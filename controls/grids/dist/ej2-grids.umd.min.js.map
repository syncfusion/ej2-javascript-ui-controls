{"version":3,"file":"ej2-grids.umd.min.js","sources":["../src/grid/actions/print.js","../src/grid/base/util.js","../src/grid/services/aria-service.js","../src/grid/actions/aggregate.js","../src/grid/renderer/datepicker-edit-cell.js","../src/grid/services/value-formatter.js","../src/grid/models/column.js","../src/grid/base/constant.js","../src/grid/base/enum.js","../src/grid/actions/checkbox-filter.js","../src/grid/actions/data.js","../src/grid/models/row.js","../src/grid/models/cell.js","../src/grid/renderer/cell-merge-renderer.js","../src/grid/renderer/row-renderer.js","../src/grid/services/row-model-generator.js","../src/grid/services/summary-model-generator.js","../src/grid/services/group-model-generator.js","../src/grid/renderer/content-renderer.js","../src/grid/renderer/header-renderer.js","../src/grid/renderer/cell-renderer.js","../src/grid/renderer/header-cell-renderer.js","../src/grid/renderer/stacked-cell-renderer.js","../src/grid/renderer/indent-cell-renderer.js","../src/grid/renderer/caption-cell-renderer.js","../src/grid/renderer/expand-cell-renderer.js","../src/grid/renderer/header-indent-renderer.js","../src/grid/renderer/detail-header-indent-renderer.js","../src/grid/renderer/detail-expand-cell-renderer.js","../src/grid/renderer/row-drag-drop-renderer.js","../src/grid/renderer/row-drag-header-indent-render.js","../src/grid/renderer/render.js","../src/grid/services/cell-render-factory.js","../src/grid/services/service-locator.js","../src/grid/services/renderer-factory.js","../src/grid/services/width-controller.js","../src/grid/services/focus-strategy.js","../src/grid/models/page-settings.js","../src/grid/actions/selection.js","../src/grid/actions/search.js","../src/grid/actions/show-hide.js","../src/grid/actions/scroll.js","../src/grid/models/aggregate.js","../src/grid/actions/clipboard.js","../src/grid/base/grid.js","../src/grid/actions/sort.js","../src/pager/numeric-container.js","../src/pager/pager-message.js","../src/pager/pager.js","../src/pager/pager-dropdown.js","../src/pager/external-message.js","../src/grid/actions/page.js","../src/grid/renderer/filter-cell-renderer.js","../src/grid/renderer/filter-menu-operator.js","../src/grid/renderer/string-filter-ui.js","../src/grid/renderer/number-filter-ui.js","../src/grid/renderer/boolean-filter-ui.js","../src/grid/renderer/date-filter-ui.js","../src/grid/renderer/filter-menu-renderer.js","../src/grid/actions/excel-filter.js","../src/grid/actions/filter.js","../src/grid/actions/resize.js","../src/grid/actions/reorder.js","../src/grid/actions/row-reorder.js","../src/grid/actions/group.js","../src/grid/actions/detail-row.js","../src/grid/actions/toolbar.js","../src/grid/renderer/footer-renderer.js","../src/grid/renderer/summary-cell-renderer.js","../src/grid/services/intersection-observer.js","../src/grid/services/virtual-row-model-generator.js","../src/grid/renderer/virtual-content-renderer.js","../src/grid/actions/virtual-scroll.js","../src/grid/renderer/inline-edit-renderer.js","../src/grid/renderer/batch-edit-renderer.js","../src/grid/renderer/dialog-edit-renderer.js","../src/grid/renderer/edit-renderer.js","../src/grid/renderer/boolean-edit-cell.js","../src/grid/renderer/dropdown-edit-cell.js","../src/grid/renderer/numeric-edit-cell.js","../src/grid/renderer/default-edit-cell.js","../src/grid/actions/normal-edit.js","../src/grid/actions/inline-edit.js","../src/grid/actions/batch-edit.js","../src/grid/actions/dialog-edit.js","../src/grid/renderer/template-edit-cell.js","../src/grid/actions/edit.js","../src/grid/actions/column-chooser.js","../src/grid/actions/export-helper.js","../src/grid/actions/excel-export.js","../src/grid/actions/pdf-export.js","../src/grid/renderer/command-column-renderer.js","../src/grid/actions/command-column.js","../src/grid/actions/context-menu.js","../src/grid/services/freeze-row-model-generator.js","../src/grid/renderer/freeze-renderer.js","../src/grid/actions/freeze.js","../src/grid/actions/column-menu.js","../src/grid/actions/foreign-key.js","../src/grid/actions/logger.js","../src/grid/renderer/autocomplete-edit-cell.js","../src/grid/renderer/combobox-edit-cell.js","../src/grid/renderer/multiselect-edit-cell.js","../src/grid/renderer/timepicker-edit-cell.js","../src/grid/renderer/toggleswitch-edit-cell.js","../src/grid/renderer/inputmask-edit-cell.js"],"sourcesContent":["import { print as printWindow, createElement, detach, classList } from '@syncfusion/ej2-base';\nimport { getPrintGridModel } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\nimport { Deferred } from '@syncfusion/ej2-data';\n/**\n * @hidden\n */\nexport function getCloneProperties() {\n    return ['aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString', 'enableRtl',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging', 'hierarchyPrintMode', 'searchSettings'];\n}\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.defered = new Deferred();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.isContentReady(), this);\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.on(events.hierarchyPrint, this.hierarchyPrint, this);\n        this.scrollModule = scrollModule;\n    }\n    Print.prototype.isContentReady = function () {\n        var _this = this;\n        if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === 'None' || !this.parent.childGrid)) {\n            return this.contentReady;\n        }\n        return function () {\n            _this.defered.promise.then(function () {\n                _this.contentReady();\n            });\n            if (_this.isPrintGrid()) {\n                _this.hierarchyPrint();\n            }\n        };\n    };\n    Print.prototype.hierarchyPrint = function () {\n        this.removeColGroup(this.parent);\n        var printGridObj = window.printGridObj;\n        if (printGridObj && !printGridObj.element.querySelector('[aria-busy=true')) {\n            printGridObj.printModule.defered.resolve();\n        }\n    };\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](grid/#printmode-string/).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        document.body.appendChild(element);\n        var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));\n        printGrid.query = gObj.getQuery().clone();\n        window.printGridObj = printGrid;\n        printGrid.isPrinting = true;\n        var modules = printGrid.getInjectedModules();\n        var injectedModues = gObj.getInjectedModules();\n        if (!modules || modules.length !== injectedModues.length) {\n            printGrid.setInjectedModules(injectedModues);\n        }\n        gObj.notify(events.printGridInit, { element: element, printgrid: printGrid });\n        this.parent.log('exporting_begin', this.getModuleName());\n        printGrid.appendTo(element);\n        printGrid.registeredTemplate = this.parent.registeredTemplate;\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false,\n                hierarchyPrintMode: gObj.hierarchyPrintMode\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') { // if scroller enabled\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.e-content');\n            var headerDiv = gObj.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj);\n            }\n        }\n        // hide horizontal scroll\n        for (var _i = 0, _a = [].slice.call(gObj.element.querySelectorAll('.e-content')); _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.overflowX = 'hidden';\n        }\n        // Hide the waiting popup\n        var waitingPop = gObj.element.querySelectorAll('.e-spin-show');\n        for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {\n            var element = _c[_b];\n            classList(element, ['e-spin-hide'], ['e-spin-show']);\n        }\n        this.printGridElement(gObj);\n        gObj.isPrinting = false;\n        delete window.printGridObj;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n        this.parent.log('exporting_complete', this.getModuleName());\n    };\n    Print.prototype.printGridElement = function (gObj) {\n        classList(gObj.element, ['e-print-grid-layout'], ['e-print-grid']);\n        if (gObj.isPrinting) {\n            detach(gObj.element);\n        }\n        this.printWind = printWindow(gObj.element, this.printWind);\n    };\n    Print.prototype.removeColGroup = function (gObj) {\n        var depth = gObj.groupSettings.columns.length;\n        var element = gObj.element;\n        var id = '#' + gObj.element.id;\n        if (!depth) {\n            return;\n        }\n        var groupCaption = element.querySelectorAll(id + \"captioncell.e-groupcaption\");\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = element.querySelectorAll(\"colgroup\" + id + \"colGroup\");\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].childNodes[j].style.display = 'none';\n            }\n        }\n    };\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent.isPrinting;\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.off(events.hierarchyPrint, this.hierarchyPrint);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = getCloneProperties().concat([events.beforePrint, events.printComplete]);\n    return Print;\n}());\nexport { Print };\n","import { ChildProperty, compile as baseTemplateComplier, setValue, Internationalization } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { isObject } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition, calculatePosition } from '@syncfusion/ej2-popups';\nimport { Print } from '../actions/print';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, data);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function updatecloneRow(grid) {\n    var nRows = [];\n    var actualRows = grid.vRows;\n    for (var i = 0; i < actualRows.length; i++) {\n        if (actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n        }\n        else if (!actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n            if (!actualRows[i].isExpand && actualRows[i].isCaptionRow) {\n                i += getCollapsedRowsCount(actualRows[i], grid);\n            }\n        }\n    }\n    grid.vcRows = nRows;\n}\n/**\n * @hidden\n */\nvar count = 0;\nexport function getCollapsedRowsCount(val, grid) {\n    count = 0;\n    var gSummary = 'gSummary';\n    var total = 'count';\n    var gLen = grid.groupSettings.columns.length;\n    var records = 'records';\n    var items = 'items';\n    var value = val[gSummary];\n    var dataRowCnt = 0;\n    var agrCnt = 'aggregatesCount';\n    if (value === val.data[total]) {\n        if (grid.groupSettings.columns.length && !isNullOrUndefined(val[agrCnt])) {\n            if (grid.groupSettings.columns.length !== 1 && val[agrCnt]) {\n                count += (val.indent !== 0 && (value) < 2) ? (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent) * val[agrCnt])) :\n                    (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent - 1) * val[agrCnt])) + val[agrCnt];\n            }\n            else if (val[agrCnt] && grid.groupSettings.columns.length === 1) {\n                count += (val[gSummary] * (gLen - val.indent)) + val[agrCnt];\n            }\n        }\n        else if (grid.groupSettings.columns.length) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += val[gSummary] * (grid.groupSettings.columns.length - val.indent);\n            }\n            else {\n                count += val[gSummary];\n            }\n        }\n        return count;\n    }\n    else {\n        for (var i = 0, len = val.data[items].length; i < len; i++) {\n            var gLevel = val.data[items][i];\n            count += gLevel[items].length + ((gLen !== grid.columns.length) &&\n                !isNullOrUndefined(gLevel[items][records]) ? gLevel[items][records].length : 0);\n            dataRowCnt += (!isNullOrUndefined(gLevel[items][records]) && !isNullOrUndefined(val[agrCnt])) ? gLevel[items][records].length :\n                gLevel[items].length;\n            if (gLevel[items].GroupGuid && gLevel[items].childLevels !== 0) {\n                recursive(gLevel);\n            }\n        }\n        count += val.data[items].length;\n        if (!isNullOrUndefined(val[agrCnt])) {\n            if (val[agrCnt] && count && dataRowCnt !== 0) {\n                count += ((count - dataRowCnt) * val[agrCnt]) + val[agrCnt];\n            }\n        }\n    }\n    return count;\n}\n/**\n * @hidden\n */\nexport function recursive(row) {\n    var items = 'items';\n    var rCount = 'count';\n    for (var j = 0, length_1 = row[items].length; j < length_1; j++) {\n        var nLevel = row[items][j];\n        count += nLevel[rCount];\n        if (nLevel[items].childLevels !== 0) {\n            recursive(nLevel);\n        }\n    }\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function iterateExtend(array) {\n    var obj = [];\n    for (var i = 0; i < array.length; i++) {\n        obj.push(baseExtend({}, getActualProperties(array[i]), {}, true));\n    }\n    return obj;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    Object.keys(moved).forEach(function (value, index) {\n        if (exclude && exclude.indexOf(value) !== -1) {\n            delete moved[value];\n        }\n    });\n    return moved;\n}\n/** @hidden */\nexport function setColumnIndex(columnModel, ind) {\n    if (ind === void 0) { ind = 0; }\n    for (var i = 0, len = columnModel.length; i < len; i++) {\n        if (columnModel[i].columns) {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n            ind = setColumnIndex(columnModel[i].columns, ind);\n        }\n        else {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n        }\n    }\n    return ind;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] });\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c]);\n            }\n            else {\n                columns[c].columns = prepareColumns(columns[c].columns);\n                column = new Column(columns[c]);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = (typeof column.valueAccessor === 'string' ? getValue(column.valueAccessor, window)\n            : column.valueAccessor) || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        var temp = column.customAggregate;\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n        }\n        return temp ? temp.call(context, data, column) : '';\n    }\n    return (column.field in data || data instanceof Array) ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/** @hidden */\nexport function getComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/\\./g, '___');\n}\n/** @hidden */\nexport function setComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/___/g, '.');\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n    return inst.editSettings.mode === 'Batch' &&\n        (inst.element.querySelectorAll('.e-updatedtd').length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj, grid) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos;\n    if (!grid.enableRtl) {\n        newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n        dialogObj.element.style.display = elementVisible;\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n        }\n        else {\n            dialogObj.element.style.left = leftPos + -4 + 'px';\n        }\n    }\n    else {\n        newpos = calculatePosition(target, 'left', 'bottom');\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 35 + 'px';\n        dialogObj.element.style.display = elementVisible;\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) + -16 + 'px';\n        }\n        else {\n            dialogObj.element.style.left = leftPos - 16 + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    span.classList.contains('e-check') ? classList(span, ['e-uncheck'], ['e-check']) :\n        classList(span, ['e-check'], ['e-uncheck']);\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n * @param row - Grid Row model object.\n * @param columns - Foreign columns array.\n * @param data - Updated Row data.\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    columns.forEach(function (col) {\n        setValue(col.field, getForeignData(col, data), row.foreignKeyData);\n    });\n    row.cells.forEach(function (cell) {\n        if (cell.isForeignKey) {\n            setValue('foreignKeyData', getValue(cell.column.field, row.foreignKeyData), cell);\n        }\n    });\n}\n/**\n * Get the foreign data for the corresponding cell value.\n * @param column - Foreign Key column\n * @param data - Row data.\n * @param lValue - cell value.\n * @param foreignData - foreign data source.\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (!isNullOrUndefined(lValue) ? lValue : valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || ((column.dataSource instanceof DataManager) && column.dataSource.dataSource.json.length ?\n        column.dataSource.dataSource.json : column.columnData);\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n * @param foreignKeyValue - Defines ForeignKeyValue.\n * @param columns - Array of column object.\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @hidden\n * @param filterObject - Defines predicate model object\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    if (filterObject.value === null) {\n        datePredicate = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        return datePredicate;\n    }\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @hidden\n */\nexport function renderMovable(ele, frzCols) {\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\n/**\n * @hidden\n */\nexport function isGroupAdaptive(grid) {\n    return grid.enableVirtualization && grid.groupSettings.columns.length > 0 && grid.isVirtualAdaptive;\n}\n/**\n * @hidden\n */\nexport function getObject(field, object) {\n    if (field === void 0) { field = ''; }\n    if (field) {\n        var value = object;\n        var splits = field.split('.');\n        for (var i = 0; i < splits.length && !isNullOrUndefined(value); i++) {\n            value = value[splits[i]];\n        }\n        return value;\n    }\n}\n/**\n * @hidden\n */\nexport function getCustomDateFormat(format, colType) {\n    var intl = new Internationalization();\n    var formatvalue;\n    var formatter = 'format';\n    var type = 'type';\n    if (colType === 'date') {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'date', format: format[formatter] }, false) :\n            intl.getDatePattern({ type: 'date', skeleton: format }, false);\n    }\n    else {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'dateTime', format: format[formatter] }, false) :\n            intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    return formatvalue;\n}\n/**\n * @hidden\n */\nexport function getExpandedState(gObj, hierarchyPrintMode) {\n    var rows = gObj.getRowsObject();\n    var obj = {};\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        if (row.isExpand && !row.isDetailRow) {\n            var index = gObj.allowPaging && gObj.printMode === 'AllPages' ? row.index +\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : row.index;\n            obj[index] = {};\n            obj[index].isExpand = true;\n            obj[index].gridModel = getPrintGridModel(row.childGrid, hierarchyPrintMode);\n            obj[index].gridModel.query = gObj.childGrid.query;\n        }\n    }\n    return obj;\n}\n/**\n * @hidden\n */\nexport function getPrintGridModel(gObj, hierarchyPrintMode) {\n    if (hierarchyPrintMode === void 0) { hierarchyPrintMode = 'Expanded'; }\n    var printGridModel = {};\n    if (!gObj) {\n        return printGridModel;\n    }\n    for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key === 'columns') {\n            printGridModel[key] = getActualPropFromColl(gObj[key]);\n        }\n        else if (key === 'allowPaging') {\n            printGridModel[key] = gObj.printMode === 'CurrentPage';\n        }\n        else {\n            printGridModel[key] = getActualProperties(gObj[key]);\n        }\n    }\n    if (gObj.childGrid && hierarchyPrintMode !== 'None') {\n        printGridModel.expandedRows = getExpandedState(gObj, hierarchyPrintMode);\n    }\n    return printGridModel;\n}\n/**\n * @hidden\n */\nexport function extendObjWithFn(copied, first, second, deep) {\n    var res = copied || {};\n    var len = arguments.length;\n    if (deep) {\n        len = len - 1;\n    }\n    var _loop_1 = function (i) {\n        if (!arguments_1[i]) {\n            return \"continue\";\n        }\n        var obj1 = arguments_1[i];\n        var keys = Object.keys(Object.getPrototypeOf(obj1)).length ?\n            Object.keys(obj1).concat(getPrototypesOfObj(obj1)) : Object.keys(obj1);\n        keys.forEach(function (key) {\n            var source = res[key];\n            var cpy = obj1[key];\n            var cln;\n            if (deep && (isObject(cpy) || Array.isArray(cpy))) {\n                if (isObject(cpy)) {\n                    cln = source ? source : {};\n                    res[key] = baseExtend({}, cln, cpy, deep);\n                }\n                else {\n                    cln = source ? source : [];\n                    res[key] = baseExtend([], cln, cpy, deep);\n                }\n            }\n            else {\n                res[key] = cpy;\n            }\n        });\n    };\n    var arguments_1 = arguments;\n    for (var i = 1; i < len; i++) {\n        _loop_1(i);\n    }\n    return res;\n}\n/**\n * @hidden\n */\nfunction getPrototypesOfObj(obj) {\n    var keys = [];\n    while (Object.getPrototypeOf(obj) && Object.keys(Object.getPrototypeOf(obj)).length) {\n        keys = keys.concat(Object.keys(Object.getPrototypeOf(obj)));\n        obj = Object.getPrototypeOf(obj);\n    }\n    return keys;\n}\n/**\n * @hidden\n */\nexport function measureColumnDepth(column) {\n    var max = 0;\n    for (var i = 0; i < column.length; i++) {\n        var depth = checkDepth(column[i], 0);\n        if (max < depth) {\n            max = depth;\n        }\n    }\n    return max + 1;\n}\n/**\n * @hidden\n */\nexport function checkDepth(col, index) {\n    var max = index;\n    var indices = [];\n    if (col.columns) {\n        index++;\n        for (var i = 0; i < col.columns.length; i++) {\n            indices[i] = checkDepth(col.columns[i], index);\n        }\n        for (var j = 0; j < indices.length; j++) {\n            if (max < indices[j]) {\n                max = indices[j];\n            }\n        }\n        index = max;\n    }\n    return index;\n}\n/**\n * @hidden\n */\nexport function refreshFilteredColsUid(gObj, filteredCols) {\n    for (var i = 0; i < filteredCols.length; i++) {\n        filteredCols[i].uid = filteredCols[i].isForeignKey ?\n            getColumnByForeignKeyValue(filteredCols[i].field, gObj.getForeignKeyColumns()).uid\n            : gObj.getColumnByField(filteredCols[i].field).uid;\n    }\n}\n","/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove && target) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount'\n};\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary].forEach(function (type) {\n            return cellFac.addCellRenderer(type, instance);\n        });\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            var cFormat = 'customFormat';\n            if (!isNullOrUndefined(column[cFormat])) {\n                column.setPropertiesSilent({ format: column[cFormat] });\n            }\n            column.setPropertiesSilent({ format: _this.getFormatFromType(column.format, type) });\n            column.setFormatter(_this.parent.locale);\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n    };\n    Aggregate.prototype.getFormatFromType = function (format, type) {\n        if (isNullOrUndefined(type) || typeof format !== 'string') {\n            return format;\n        }\n        var obj;\n        switch (type) {\n            case 'number':\n                obj = { format: format };\n                break;\n            case 'date':\n                obj = { type: type, skeleton: format };\n                break;\n            case 'datetime':\n                obj = { type: 'dateTime', skeleton: format };\n                break;\n        }\n        return obj;\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(refreshAggregates, this.refresh, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(refreshAggregates, this.refresh);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    Aggregate.prototype.refresh = function (data) {\n        var editedData = data instanceof Array ? data : [data];\n        this.parent.notify(refreshFooterRenderer, editedData);\n        if (this.parent.groupSettings.columns.length > 0) {\n            this.parent.notify(groupAggregates, editedData);\n        }\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    aggregates.forEach(function (row) {\n        row.columns.forEach(function (column) {\n            callback(column, row);\n        });\n    });\n}\n","import { extend } from '@syncfusion/ej2-base';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject, getCustomDateFormat } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        if (args.column.editType === 'datepickeredit') {\n            this.obj = new DatePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        else if (args.column.editType === 'datetimepickeredit') {\n            this.obj = new DateTimePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\nfunction dateanddatetimerender(args, mode, rtl) {\n    var isInline = mode !== 'Dialog';\n    var format = getCustomDateFormat(args.column.format, args.column.type);\n    var value = getObject(args.column.field, args.rowData);\n    value = value ? new Date(value) : null;\n    return {\n        floatLabelType: isInline ? 'Never' : 'Always',\n        value: value,\n        format: format,\n        placeholder: isInline ?\n            '' : args.column.headerText, enableRtl: rtl,\n        enabled: isEditable(args.column, args.requestType, args.element),\n    };\n}\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if ((type === 'date' || type === 'datetime' || type === 'number') && (!isNullOrUndefined(format))) {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { merge, isNullOrUndefined, extend, Property } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData, getObject } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options) {\n        var _this = this;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create  It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](../../grid/filtering/#custom-component-in-filter-menu) for its customization.\n         *  @default {}\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         * @default {}\n         */\n        this.edit = {};\n        /**\n         * If `allowSearching` set to false, then it disables Searching of a particular column.\n         * By default all columns allow Searching.\n         * @default true\n         */\n        this.allowSearching = true;\n        /**\n         * If `autoFit` set to true, then the particular column content width will be\n         * adjusted based on its content in the initial rendering itself.\n         * Setting this property as true is equivalent to calling `autoFitColumns` method in the `dataBound` event.\n         * @default false\n         */\n        this.autoFit = false;\n        this.sortDirection = 'Descending';\n        /** @hidden */\n        this.getEditTemplate = function () { return _this.editTemplateFn; };\n        /** @hidden */\n        this.getFilterTemplate = function () { return _this.filterTemplateFn; };\n        merge(this, options);\n        this.type = this.type === 'none' ? null : (this.type ? this.type.toLowerCase() : this.type);\n        if (this.editType) {\n            this.editType = this.editType.toLowerCase();\n        }\n        this.uid = getUid('grid-column');\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(options.format));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        this.toJSON = function () {\n            var col = {};\n            var skip = ['filter', 'dataSource', 'headerText', 'template', 'headerTemplate', 'edit',\n                'editTemplate', 'filterTemplate', 'commandsTemplate'];\n            var keys = Object.keys(_this);\n            for (var i = 0; i < keys.length; i++) {\n                if (keys[i] === 'columns') {\n                    col[keys[i]] = [];\n                    for (var j = 0; j < _this[keys[i]].length; j++) {\n                        col[keys[i]].push(_this[keys[i]][j].toJSON());\n                    }\n                }\n                else if (skip.indexOf(keys[i]) < 0) {\n                    col[keys[i]] = _this[keys[i]];\n                }\n            }\n            return col;\n        };\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n            if (this.columns) {\n                this.allowResizing = this.columns.some(function (col) {\n                    return col.allowResizing;\n                });\n            }\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (!isNullOrUndefined(this.filter) && this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.editTemplate) {\n            this.editTemplateFn = templateCompiler(this.editTemplate);\n        }\n        if (this.filterTemplate) {\n            this.filterTemplateFn = templateCompiler(this.filterTemplate);\n        }\n        if (this.isForeignColumn() && (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = extend({\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            }, this.edit.params);\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y, xObj, yObj) {\n                if (typeof a_1 === 'string') {\n                    a_1 = getObject(a_1, window);\n                }\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                    var obj = xObj;\n                    xObj = yObj;\n                    yObj = obj;\n                }\n                return a_1(x, y, xObj, yObj);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getObject(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getObject(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /** @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /** @hidden */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /** @hidden */\n    Column.prototype.setProperties = function (column) {\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n        }\n    };\n    /**\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n/**\n * Define options for custom command buttons.\n */\nvar CommandColumnModel = /** @class */ (function () {\n    function CommandColumnModel() {\n    }\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"buttonOption\", void 0);\n    return CommandColumnModel;\n}());\nexport { CommandColumnModel };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStartHelper = 'rowDragStartHelper';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var beforePaste = 'beforePaste';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/** @hidden */\nexport var commandClick = 'commandClick';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var groupAggregates = 'group-aggregates';\n/** @hidden */\nexport var refreshFooterRenderer = 'refresh-footer-rendered';\n/** @hidden */\nexport var refreshAggregateCell = 'refresh-aggregate-cell';\n/** @hidden */\nexport var refreshAggregates = 'refresh-aggregates';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var exportDetailDataBound = 'exportdetaildatabound';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n/** @hidden */\nexport var textWrapRefresh = 'textWrapRefresh';\n/** @hidden */\nexport var recordAdded = 'recordAdded';\n/** @hidden */\nexport var cancelBegin = 'cancel-Begin';\n/** @hidden */\nexport var editNextValCell = 'editNextValCell';\n/** @hidden */\nexport var hierarchyPrint = 'hierarchyprint';\n/** @hidden */\nexport var expandChildGrid = 'expandchildgrid';\n/** @hidden */\nexport var printGridInit = 'printGrid-Init';\n/** @hidden */\nexport var exportRowDataBound = 'export-RowDataBound';\n/** @hidden */\nexport var rowPositionChanged = 'row-position-changed';\n/** @hidden */\nexport var columnChooserOpened = 'columnChooserOpened';\n/** @hidden */\nexport var batchForm = 'batchedit-form';\n/** @hidden */\nexport var beforeStartEdit = 'edit-form';\n/** @hidden */\nexport var beforeBatchCancel = 'before-batch-cancel';\n/** @hidden */\nexport var batchEditFormRendered = 'batcheditform-rendered';\n/** @hidden */\nexport var partialRefresh = 'partial-refresh';\n/** @hidden */\nexport var beforeCustomFilterOpen = 'beforeCustomFilterOpen';\n/** @hidden */\nexport var selectVirtualRow = 'select-virtual-Row';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n    /**  Defines CellType as DetailFooterIntent */\n    CellType[CellType[\"DetailFooterIntent\"] = 15] = \"DetailFooterIntent\";\n    /**  Defines CellType as RowDrag */\n    CellType[CellType[\"RowDragIcon\"] = 16] = \"RowDragIcon\";\n    /**  Defines CellType as RowDragHeader */\n    CellType[CellType[\"RowDragHIcon\"] = 17] = \"RowDragHIcon\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, isActionPrevent, appendChildren, getDatePredicate } from '../base/util';\nimport { remove, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilter.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchHandler, this);\n    };\n    CheckBoxFilter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        var elem = this.dlg.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilter.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            fPredicate.predicate.predicates.forEach(function (fpred) {\n                filterCollection.push({\n                    field: fpred.field,\n                    predicate: 'or',\n                    matchCase: fpred.ignoreCase,\n                    ignoreAccent: fpred.ignoreAccent,\n                    operator: fpred.operator,\n                    value: fpred.value,\n                    type: _this.options.type\n                });\n            });\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilter.prototype.foreignFilter = function (args, value) {\n        var operator = this.parent.getDataModule().isRemote() ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'startswith' : 'contains');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.parent.filterSettings.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilter.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilter.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilter.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilter.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.updateDataSource();\n        this.parent.log('column_type_missing', { column: options.column });\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilter.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = '800px';\n        this.dialogObj.show();\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilter.prototype.dialogCreated = function (e) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n        }\n        else {\n            this.dialogObj.position = { X: 'center', Y: 'center' };\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            var filterTemplateCol = this.parent.getColumns().filter(function (col) { return col.getFilterItemTemplate(); });\n            if (filterTemplateCol.length) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n        }\n    };\n    CheckBoxFilter.prototype.clearFilter = function () {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFilter });\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: this.options.field });\n    };\n    CheckBoxFilter.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input') {\n                var value = e.target.value;\n                if (this.options.column.type === 'boolean') {\n                    if (value !== undefined &&\n                        this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = 'true';\n                    }\n                    else if (value !== undefined &&\n                        this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = 'false';\n                    }\n                }\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.parent.getDataModule().isRemote() ?\n                            (this.options.column.type === 'string' ? 'contains' : 'equal') :\n                            (this.options.column.type === 'date' || this.options.column.type === 'datetime' ||\n                                this.options.column.type === 'boolean' ? 'equal' : 'contains'),\n                        value: value, matchCase: false, type: this.options.column.type\n                    },\n                    field: this.options.field\n                };\n                value ? this.options.column.isForeignColumn() ? this.foreignFilter(args, value) :\n                    this.options.handler(args) : this.closeDialog();\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    this.fltrBtnHandler();\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    CheckBoxFilter.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var optr = 'equal';\n        var searchInput = this.searchBox.querySelector('.e-searchinput');\n        var caseSen = this.filterSettings.enableCaseSensitivity;\n        var defaults = {\n            field: this.options.field, predicate: 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.parent.filterSettings.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput.value === '') {\n            optr = 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = 'and';\n            defaults.operator = 'notequal';\n        }\n        var value;\n        var fObj;\n        var coll = [];\n        if (checked.length !== this.itemsCnt || (searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                if (value === '' || isNullOrUndefined(value)) {\n                    if (this.options.type === 'string') {\n                        coll.push({\n                            field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                            operator: defaults.operator, predicate: defaults.predicate, value: ''\n                        });\n                    }\n                    coll.push({\n                        field: defaults.field,\n                        matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n                    });\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n                        predicate: defaults.predicate, value: undefined\n                    });\n                }\n                else {\n                    coll.push(fObj);\n                }\n                if (isActionPrevent(this.parent)) {\n                    this.parent.notify(events.preventBatch, {\n                        instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                        arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value\n                    });\n                    return;\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilter.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = column.isForeignColumn() ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.parent.getDataModule().isRemote() ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'startswith' : 'contains');\n        var matchCase = true;\n        var ignoreAccent = this.parent.filterSettings.ignoreAccent;\n        var field = column.isForeignColumn() ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            operator = 'equal';\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query\n        };\n        this.parent.trigger(events.actionBegin, args);\n        predicte = new Predicate(field, args.operator, parsed, args.matchCase, args.ignoreAccent);\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n            operator = 'equal';\n            if (isNullOrUndefined(parsed) && val.length) {\n                return;\n            }\n            var filterObj = {\n                field: field, operator: operator, value: parsed, matchCase: matchCase,\n                ignoreAccent: ignoreAccent\n            };\n            predicte = getDatePredicate(filterObj, this.options.type);\n        }\n        if (val.length) {\n            query.where(predicte);\n        }\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        var fPredicate = {};\n        showSpinner(this.spinner);\n        this.renderEmpty = false;\n        if (column.isForeignColumn() && val.length) {\n            // tslint:disable-next-line:no-any\n            column.dataSource.executeQuery(query).then(function (e) {\n                var columnData = _this.options.column.columnData;\n                _this.options.column.columnData = e.result;\n                _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                if (fPredicate.predicate.predicates.length) {\n                    foreignQuery.where(fPredicate.predicate);\n                }\n                else {\n                    _this.renderEmpty = true;\n                }\n                _this.options.column.columnData = columnData;\n                foreignQuery.take(args.filterChoiceCount);\n                _this.search(args, foreignQuery);\n            });\n        }\n        else {\n            query.take(args.filterChoiceCount);\n            this.search(args, query);\n        }\n    };\n    CheckBoxFilter.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n        var predicates = CheckBoxFilter.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (this.parent.getColumnByField(prop).isForeignColumn()) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilter.prototype.getAllData = function () {\n        var query = this.parent.getQuery().clone();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        query.take(args.filterChoiceCount);\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processDataOperation(query, true);\n        }\n    };\n    CheckBoxFilter.prototype.addDistinct = function (query) {\n        var filteredColumn = DataUtil.distinct(this.parent.filterSettings.columns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        query.distinct(filteredColumn);\n        return query;\n    };\n    CheckBoxFilter.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var def = this.eventPromise(args, query);\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilter.prototype.eventPromise = function (args, query) {\n        var state;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.dataSource = def.resolve;\n        state.action = args;\n        this.parent.trigger(events.dataStateChange, state);\n        return def;\n    };\n    ;\n    CheckBoxFilter.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return data;\n    };\n    ;\n    CheckBoxFilter.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.options.column.isForeignColumn() && isInitial) {\n            allPromise.push(this.options.column.dataSource.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            e.forEach(function (data) {\n                runArray[i++](data.result);\n            });\n        });\n    };\n    CheckBoxFilter.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var query = new Query();\n        if (this.parent.searchSettings.key.length) {\n            var sSettings = this.parent.searchSettings;\n            var fields = sSettings.fields.length ? sSettings.fields : this.parent.getColumns().map(function (f) { return f.field; });\n            query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n        }\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                var filterColumn = this.options.filteredColumns[i];\n                filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                if (filterColumn.uid !== this.options.uid) {\n                    cols.push(this.options.filteredColumns[i]);\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n        // query.select(this.options.field);\n        var result = new DataManager(this.fullData).executeLocal(query);\n        var col = this.options.column;\n        this.filteredData = CheckBoxFilter.\n            getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n        this.processDataSource(null, true, this.filteredData);\n        this.sInput.focus();\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.processDataSource = function (query, isInitial, dataSource) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial);\n    };\n    CheckBoxFilter.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilter.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getValue(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilter.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n    };\n    CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    CheckBoxFilter.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            this.dialogObj.element.querySelector('.e-btn').focus();\n        }\n    };\n    CheckBoxFilter.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        var label = elem.querySelector('.e-label');\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template) {\n            label.innerHTML = '';\n            appendChildren(label, this.options.template(data, this.parent, 'filterItemTemplate'));\n        }\n        return elem;\n    };\n    CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dialogObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n        var _a;\n        var cBoxes = this.parent.createElement('div');\n        var btn = this.dialogObj.btnObj[0];\n        var nullCounter = -1;\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue('ejValue', data[i]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue('ejValue', data[i]);\n                var value = this.valueFormatter.toView(getValue(this.options.field, data[i]), this.options.formatFn);\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            this.updateIndeterminatenBtn();\n            btn.disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionComplete, args);\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            return this.result[value];\n        }\n    };\n    CheckBoxFilter.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn();\n        while (len--) {\n            value = json[len];\n            value = getValue(field, value); //local remote diff, check with mdu   \n            if (!(value in lookup)) {\n                var obj = {};\n                obj[ejValue] = value;\n                lookup[value] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[len], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilter.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilter.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        first = CheckBoxFilter.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilter.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p]), cols[p].type, cols[p].ignoreAccent);\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilter.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            return true;\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilter.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, getDatePredicate, isGroupAdaptive, getColumnByForeignKeyValue, refreshFilteredColsUid } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed || this.getModuleName() === 'foreignKey') {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowPositionChanged, this.reorderRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n        this.parent.on(events.autoCol, this.refreshFilteredCols, this);\n    }\n    Data.prototype.reorderRows = function (e) {\n        this.dataManager.dataSource.json.splice(e.toIndex, 0, this.dataManager.dataSource.json.splice(e.fromIndex, 1)[0]);\n    };\n    Data.prototype.getModuleName = function () {\n        return 'data';\n    };\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        gObj.setProperties({ query: gObj.query instanceof Query ? gObj.query : new Query() }, true);\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.getQuery().clone();\n        if (this.parent.columnQueryMode === 'ExcludeHidden') {\n            query.select(this.parent.getColumns().filter(function (column) { return !(column.isPrimaryKey !== true && column.visible === false || column.field === undefined); }).map(function (column) { return column.field; }));\n        }\n        else if (this.parent.columnQueryMode === 'Schema') {\n            var selectQueryFields = [];\n            var columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                selectQueryFields.push(columns[i].field);\n            }\n            query.select(selectQueryFields);\n        }\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        if (isGroupAdaptive(this.parent)) {\n            this.virtualGroupPageQuery(query);\n        }\n        else {\n            this.pageQuery(query, skipPage);\n        }\n        this.groupQuery(query);\n        return query;\n    };\n    Data.prototype.aggregateQuery = function (query, isForeign) {\n        this.parent.aggregates.forEach(function (row) {\n            row.columns.forEach(function (column) {\n                var types = column.type instanceof Array ? column.type : [column.type];\n                types.forEach(function (type) { return query.aggregate(type.toLowerCase(), column.field); });\n            });\n        });\n        return query;\n    };\n    Data.prototype.virtualGroupPageQuery = function (query) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if (query.queries.length) {\n            for (var i = 0; i < query.queries.length; i++) {\n                if (query.queries[i][fName] === 'onPage') {\n                    query.queries.splice(i, 1);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            if (query.queries.length) {\n                for (var i = 0; i < query.queries.length; i++) {\n                    if (query.queries[i][fName] === 'onPage') {\n                        query.queries.splice(i, 1);\n                    }\n                }\n            }\n            query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                if (!column) {\n                    this.parent.log('initial_action', { moduleName: 'group', columnName: columns[i] });\n                }\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                else {\n                    this.parent.log('initial_action', { moduleName: 'sort', columnName: columns[i].field });\n                    return query;\n                }\n                var fn = columns[i].direction;\n                if (col.sortComparer) {\n                    this.parent.log('grid_sort_comparer');\n                    fn = !this.isRemote() ? col.sortComparer.bind(col) : columns[i].direction;\n                }\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    query.sortBy(col.field, fn);\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query) {\n        var _this = this;\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.getSearchColumnFieldNames();\n        var predicateList = [];\n        var needForeignKeySearch = false;\n        if (this.parent.searchSettings.key.length) {\n            needForeignKeySearch = this.parent.getForeignKeyColumns().some(function (col) { return fields.indexOf(col.field) > -1; });\n            if (needForeignKeySearch && !(this.dataManager.adaptor.getModulename &&\n                this.dataManager.adaptor.getModulename() === 'ODataV4Adaptor')) {\n                fields.forEach(function (columnName) {\n                    var column = _this.getColumnByField(columnName);\n                    if (column.isForeignColumn()) {\n                        predicateList = _this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(column.field, sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                });\n                query.where(Predicate.or(predicateList));\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var fPredicate = {};\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var checkBoxCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                if (colType[col.field] === 'CheckBox' || colType[col.field] === 'Excel') {\n                    checkBoxCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (checkBoxCols.length) {\n                var excelPredicate = CheckBoxFilter.getPredicate(checkBoxCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    var col = void 0;\n                    if (this.parent.getColumnByField(prop).isForeignColumn()) {\n                        col = getColumnByForeignKeyValue(prop, foreignColumn);\n                    }\n                    if (!col) {\n                        this.parent.log('initial_action', { moduleName: 'filter', columnName: prop });\n                    }\n                    if (col && !skipFoerign) {\n                        predicateList = this.fGeneratePredicate(col, predicateList);\n                        actualFilter.push(col);\n                    }\n                    else {\n                        predicateList.push(excelPredicate[prop]);\n                    }\n                }\n            }\n            if (defaultFltrCols.length) {\n                for (var _e = 0, defaultFltrCols_1 = defaultFltrCols; _e < defaultFltrCols_1.length; _e++) {\n                    var col = defaultFltrCols_1[_e];\n                    col.uid = col.uid || this.parent.grabColumnByFieldFromAllCols(col.field).uid;\n                    var column_1 = this.parent.grabColumnByUidFromAllCols(col.uid);\n                    if (!column_1) {\n                        this.parent.log('initial_action', { moduleName: 'filter', columnName: col.field });\n                    }\n                    var sType = column_1.type;\n                    if (column_1.isForeignColumn() && getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        if (sType !== 'date' && sType !== 'datetime') {\n                            predicateList.push(new Predicate(col.field, col.operator, col.value, !col.matchCase, this.parent.filterSettings.ignoreAccent));\n                        }\n                        else {\n                            predicateList.push(getDatePredicate(col, sType));\n                        }\n                    }\n                }\n            }\n            if (predicateList.length) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        this.parent.log('datasource_syntax_mismatch', { dataState: this.parent });\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);\n                    break;\n            }\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                return crud.then(function (result) {\n                    return _this.insert(query, args);\n                });\n            }\n            else {\n                return this.insert(query, args);\n            }\n        }\n    };\n    Data.prototype.insert = function (query, args) {\n        if (args.requestType === 'save') {\n            this.parent.notify(events.recordAdded, args);\n        }\n        return this.executeQuery(query);\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);\n                break;\n        }\n        args[pr] = promise ? promise : args[pr];\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key, original, query) {\n        if (query === void 0) { query = this.generateQuery(); }\n        query.requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var state = void 0;\n            state = this.getStateEventArgument(query);\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n        this.parent.off(events.autoCol, this.refreshFilteredCols);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var state;\n        var dataArgs = args;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs = args;\n                editArgs.key = key;\n                var promise = 'promise';\n                editArgs[promise] = deff.promise;\n                editArgs.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs);\n                deff.promise.then(function (e) {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    _this.parent.trigger(events.dataStateChange, state);\n                })\n                    .catch(function () { return void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * Gets the columns where searching needs to be performed from the Grid.\n     * @return {string[]}\n     */\n    Data.prototype.getSearchColumnFieldNames = function () {\n        var colFieldNames = [];\n        var columns = this.parent.getColumns();\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var col = columns_2[_i];\n            if (col.allowSearching && !isNullOrUndefined(col.field)) {\n                colFieldNames.push(col.field);\n            }\n        }\n        return colFieldNames;\n    };\n    Data.prototype.refreshFilteredCols = function () {\n        if (this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            refreshFilteredColsUid(this.parent, this.parent.filterSettings.columns);\n        }\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options) {\n        merge(this, options);\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        this.isRowSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var colSpan = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var rowSpan = cellArgs.rowSpan;\n        var visible = 0;\n        var spannedCell;\n        if (row.index > 0) {\n            var cells = this.parent.groupSettings.columns.length > 0 &&\n                !this.parent.getRowsObject()[row.index - 1].isDataRow ? this.parent.getRowsObject()[row.index].cells :\n                this.parent.getRowsObject()[row.index - 1].cells;\n            var targetCell_1 = row.cells[i];\n            var uid_1 = 'uid';\n            spannedCell = cells.filter(function (cell) { return cell.column.uid === targetCell_1.column[uid_1]; })[0];\n        }\n        var colSpanLen = spannedCell && spannedCell.colSpanRange > 1 && spannedCell.rowSpanRange > 1 ?\n            spannedCell.colSpanRange : colSpan;\n        for (var j = i + 1; j < i + colSpanLen && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + colSpan; j < i + colSpan + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + colSpan + visible >= row.cells.length) {\n                colSpan -= (i + colSpan + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (colSpan > 1) {\n            attributes(td, { 'colSpan': colSpan.toString(), 'aria-colSpan': colSpan.toString() });\n        }\n        if (rowSpan > 1) {\n            attributes(td, { 'rowspan': rowSpan.toString(), 'aria-rowspan': rowSpan.toString() });\n            row.cells[i].isRowSpanned = true;\n            row.cells[i].rowSpanRange = Number(rowSpan);\n            if (colSpan > 1) {\n                row.cells[i].colSpanRange = Number(colSpan);\n            }\n        }\n        if (row.index > 0 && (spannedCell.rowSpanRange > 1)) {\n            row.cells[i].isSpanned = true;\n            row.cells[i].rowSpanRange = Number(spannedCell.rowSpanRange - 1);\n            row.cells[i].colSpanRange = spannedCell.rowSpanRange > 0 ? spannedCell.colSpanRange : 1;\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject, extendObjWithFn } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.isSpan = false;\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extendObjWithFn({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate, null, isChanged);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode, isEdit) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getObject(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var _loop_1 = function (i, len) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = this_1.parent.isPrinting ? 'e-detailrowcollapse' : 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs, row.isExpand, isEdit);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this_1.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        rowSpan: 1, foreignKeyData: row.cells[i].foreignKeyData,\n                        requestType: this_1.parent.requestTypeAction\n                    }));\n                    var isRowSpanned = false;\n                    if (row.index > 0 && this_1.isSpan) {\n                        var prevRowCells = this_1.parent.groupSettings.columns.length > 0 &&\n                            !this_1.parent.getRowsObject()[row.index - 1].isDataRow ?\n                            this_1.parent.getRowsObject()[row.index].cells : this_1.parent.getRowsObject()[row.index - 1].cells;\n                        var uid_1 = 'uid';\n                        var prevRowCell = prevRowCells.filter(function (cell) {\n                            return cell.column.uid === row.cells[i].column[uid_1];\n                        })[0];\n                        isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;\n                    }\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {\n                        this_1.isSpan = true;\n                        var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n            if (this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate) {\n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cols.push(this.generateCell({}, null, CellType.DetailExpand));\n        }\n        if (this.parent.isRowDragable()) {\n            cols.push(this.generateCell({}, null, CellType.RowDragIcon));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent, pid, tIndex) {\n        var options = {};\n        options.foreignKeyData = {};\n        options.uid = getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.tIndex = tIndex;\n        options.isDataRow = true;\n        options.parentGid = pid;\n        if (this.parent.isPrinting) {\n            if (this.parent.hierarchyPrintMode === 'All') {\n                options.isExpand = true;\n            }\n            else if (this.parent.hierarchyPrintMode === 'Expanded' && this.parent.expandedRows && this.parent.expandedRows[index]) {\n                options.isExpand = this.parent.expandedRows[index].isExpand;\n            }\n        }\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = new Row(options);\n        row.cells = cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        this.parent.getForeignKeyColumns().forEach(function (col) {\n            setValue(col.field, getForeignData(col, options.data), options.foreignKeyData);\n        });\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var _this = this;\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        dummies.forEach(function (dummy, index) {\n            return tmp.push(_this.generateCell(dummy, options.uid, isNullOrUndefined(dummy.commands) ? undefined : CellType.CommandColumn, null, index, options.foreignKeyData));\n        });\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox') {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        input.forEach(function (row) {\n            _this.refreshForeignKeyRow(row);\n            row.cells = _this.generateCells(row);\n        });\n        return input;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        this.parent.aggregates.slice().forEach(function (row) {\n            var columns = row.columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new Column({})); });\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid) || this.parent.isRowDragable()) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end) {\n        var _this = this;\n        if (this.parent.currentViewData.length === 0) {\n            return [];\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        this.getData().forEach(function (row, index) {\n            rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined, start, end));\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end) {\n        var _this = this;\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ||\n            !isNullOrUndefined(this.parent.childGrid) ? 1 : 0);\n        if (this.parent.isRowDragable()) {\n            indentLength++;\n            indents = ['e-indentcelltop'];\n        }\n        this.getColumns(start, end).forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() :\n            index < _this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[index], isDetailGridAlone)); });\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.uid = getUid('grid-row');\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = { 'style': { 'textAlign': column.textAlign } };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var _this = this;\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        summaryRows.forEach(function (row) {\n            single = {};\n            row.columns.forEach(function (column) {\n                single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n            });\n            dummy.push(single);\n        });\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var _this = this;\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        types.forEach(function (type) {\n            var key = column.field + ' - ' + type.toLowerCase();\n            var disp = column.columnName;\n            var val = type !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(type, group.aggregates ? group : data, column, _this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][type] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        });\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.rows = [];\n        this.index = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level, i, undefined, this.rows.length);\n        }\n        this.index = 0;\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw, parentid, childId, tIndex) {\n        var _a;\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level, parentid, index, this.rows.length);\n                }\n            }\n        }\n        else {\n            this.rows = this.rows.concat(this.generateCaptionRow(data, index, parentid, childId, tIndex));\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length);\n            }\n            if (this.parent.aggregates.length) {\n                var rowCnt = this.rows.length;\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n                for (var i = rowCnt - 1; i >= 0; i--) {\n                    if (this.rows[i].isCaptionRow) {\n                        this.rows[i].aggregatesCount = this.rows.length - rowCnt;\n                    }\n                    else if (!this.rows[i].isCaptionRow && !this.rows[i].isDataRow) {\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var _this = this;\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        cols.forEach(function (col, index) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = _this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            if (gObj.isRowDragable()) {\n                indent++;\n            }\n            cells.push(_this.generateCell(column, null, cellType, indent));\n        });\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent, parentID, childID, tIndex) {\n        var options = {};\n        var tmp = [];\n        var records = 'records';\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        options.isExpand = true;\n        options.parentGid = parentID;\n        options.childGid = childID;\n        options.tIndex = tIndex;\n        options.isCaptionRow = true;\n        options.gSummary = !isNullOrUndefined(data.items[records]) ? data.items[records].length : data.items.length;\n        options.uid = getUid('grid-row');\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            var fkValue = (isNullOrUndefined(data.key) ? '' : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col));\n            setValue('foreignKey', fkValue, row.data);\n        }\n    };\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent, childID, tIndex) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++, tIndex++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent, childID, tIndex);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        var indexes = this.parent.getColumnIndexesInView();\n        input.forEach(function (row) {\n            if (row.isDataRow) {\n                row.cells = _this.generateCells(row);\n                for (var j = 0; j < row.indent; j++) {\n                    if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n                        continue;\n                    }\n                    row.cells.unshift(_this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = _this.generateCaptionRow(row.data, row.indent);\n                row.cells = cRow.cells;\n            }\n        });\n        return input;\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove, updateBlazorTemplate, removeClass } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth, isGroupAdaptive } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.freezeRowElements = [];\n        this.isLoaded = true;\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.getFrozenColumns() !== 0) {\n                    rows = args.isFrozen ? _this.freezeRows : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {});\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                    if (_this.parent.getFrozenColumns() !== 0 && !_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n                    }\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = this.parent.createElement('div', {\n            className: 'e-content'\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var virtualTable = contentDiv.querySelector('.e-virtualtable');\n        var virtualTrack = contentDiv.querySelector('.e-virtualtrack');\n        if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)) {\n            remove(virtualTable);\n            remove(virtualTrack);\n        }\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstChild;\n        if (this.getTable()) {\n            remove(this.getTable());\n        }\n        var table = this.parent.createElement('table', {\n            className: 'e-table', attrs: {\n                cellspacing: '0.25px', role: 'grid',\n                id: this.parent.element.id + id\n            }\n        });\n        this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    ContentRender.prototype.splitRows = function (idx) {\n        if (this.parent.getFrozenColumns()) {\n            if (idx === 0) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = gObj.currentViewData;\n        var frag = document.createDocumentFragment();\n        var hdrfrag = document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var trElement;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        if (isGroupAdaptive(gObj)) {\n            if (['sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n                .some(function (value) { return args.requestType === value; })) {\n                gObj.vcRows = [];\n                gObj.vRows = [];\n            }\n        }\n        var modelData = this.generator.generateRows(dataSource, args);\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            mCont.querySelector('tbody').innerHTML = '';\n        }\n        var idx = modelData[0].cells[0].index;\n        /* tslint:disable:no-any */\n        if (this.parent.registeredTemplate && this.parent.registeredTemplate.template && !args.isFrozen) {\n            var templatetoclear = [];\n            for (var i = 0; i < this.parent.registeredTemplate.template.length; i++) {\n                for (var j = 0; j < this.parent.registeredTemplate.template[i].rootNodes.length; j++) {\n                    if (isNullOrUndefined(this.parent.registeredTemplate.template[i].rootNodes[j].parentNode)) {\n                        templatetoclear.push(this.parent.registeredTemplate.template[i]);\n                        /* tslint:enable:no-any */\n                    }\n                }\n            }\n            this.parent.destroyTemplate(['template'], templatetoclear);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (frzCols && idx >= frzCols) {\n            this.tbody = mCont.querySelector('tbody');\n        }\n        else {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        var startIndex = 0;\n        var blockLoad = true;\n        if (isGroupAdaptive(gObj) && gObj.vcRows.length) {\n            var top_1 = 'top';\n            var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top :\n                (!isNullOrUndefined(args.scrollTop) ? args.scrollTop[top_1] : 0);\n            if (scrollTop !== 0) {\n                var offsets_1 = gObj.vGroupOffsets;\n                var bSize = gObj.pageSettings.pageSize / 2;\n                var values = Object.keys(offsets_1).map(function (key) { return offsets_1[key]; });\n                for (var m = 0; m < values.length; m++) {\n                    if (scrollTop < values[m]) {\n                        if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === 'up') {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m * bSize);\n                            break;\n                        }\n                        else {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m) * bSize;\n                            break;\n                        }\n                    }\n                }\n                if (scrollTop + this.contentPanel.firstElementChild.offsetHeight ===\n                    this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {\n                    blockLoad = false;\n                }\n            }\n        }\n        for (var i = startIndex, len = modelData.length; i < len; i++) {\n            this.rows.push(modelData[i]);\n            if (isGroupAdaptive(gObj) && this.rows.length >= (gObj.pageSettings.pageSize) && blockLoad) {\n                break;\n            }\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                if (gObj.frozenRows && i < gObj.frozenRows) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n                if (modelData[i].isExpand) {\n                    gObj.notify(events.expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);\n                }\n            }\n            else {\n                var rowTemplateID = gObj.element.id + 'rowTemplate';\n                var elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate', rowTemplateID);\n                if (elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = appendChildren(hdrfrag, elements);\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        tr = appendChildren(frag, elements);\n                        trElement = tr.lastElementChild;\n                    }\n                }\n                var arg = { data: modelData[i].data, row: trElement ? trElement : tr };\n                this.parent.trigger(events.rowDataBound, arg);\n            }\n            if (modelData[i].isDataRow) {\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        this.splitRows(idx);\n        if (gObj.frozenRows) {\n            hdrTbody = frzCols ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n                : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n            hdrTbody.innerHTML = '';\n            hdrTbody.appendChild(hdrfrag);\n        }\n        if (gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (frzCols && idx === 0) {\n            this.getPanel().firstChild.style.overflowY = 'hidden';\n        }\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.rows = this.rows.slice(0);\n        }\n        args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            if (!_this.parent.enableVirtualization) {\n                remove(_this.tbody);\n                _this.tbody = _this.parent.createElement('tbody');\n            }\n            if (frzCols) {\n                _this.tbody.appendChild(frag);\n                if (_this.index === 0) {\n                    _this.isLoaded = false;\n                    fCont.querySelector('table').appendChild(_this.tbody);\n                }\n                else {\n                    if (_this.tbody.childElementCount < 1) {\n                        _this.tbody.appendChild(_this.parent.createElement('tr').appendChild(_this.parent.createElement('td')));\n                    }\n                    _this.isLoaded = true;\n                    mCont.querySelector('table').appendChild(_this.tbody);\n                    fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                    mCont.style.overflowY = _this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                    fCont.style.borderRightWidth = '1px';\n                }\n            }\n            else {\n                if (gObj.rowTemplate) {\n                    updateBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate', gObj);\n                }\n                _this.appendContent(_this.tbody, frag, args);\n            }\n            if (frzCols && idx === 0) {\n                _this.refreshContentRows(extend({}, args));\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args) {\n        tbody.appendChild(frag);\n        this.getTable().appendChild(tbody);\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        return this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (frzCols) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        var args = {};\n        var contentrows = this.rows.filter(function (row) { return !row.isDetailRow; });\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                if (frzCols) {\n                    if (idx < frzCols) {\n                        setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                        contentrows = this.freezeRows;\n                    }\n                    else {\n                        var mTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n                        idx = idx - frzCols;\n                        setStyleAttribute(mTable.childNodes[idx], { 'display': displayVal });\n                        tr = gObj.getMovableDataRows();\n                        contentrows = this.movableRows;\n                    }\n                }\n                else {\n                    if (gObj.isRowDragable()) {\n                        idx++;\n                    }\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                    if (gObj.isRowDragable()) {\n                        idx--;\n                    }\n                }\n            }\n            idx = gObj.isDetail() ? idx - 1 : idx;\n            if (!needFullRefresh) {\n                this.setDisplayNone(tr, idx, displayVal, contentrows);\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            if (!this.parent.getFrozenColumns()) {\n                this.parent.notify(events.partialRefresh, { rows: contentrows, args: args });\n            }\n            else {\n                this.parent.notify(events.partialRefresh, { rows: this.freezeRows, args: { isFrozen: true, rows: this.freezeRows } });\n                this.parent.notify(events.partialRefresh, { rows: this.movableRows, args: { isFrozen: false, rows: this.movableRows } });\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    ContentRender.prototype.setDisplayNone = function (tr, idx, displayVal, rows) {\n        Object.keys(tr).forEach(function (i) {\n            if (tr[i].querySelectorAll('td.e-rowcell').length) {\n                setStyleAttribute(tr[i].querySelectorAll('td.e-rowcell')[idx], { 'display': displayVal });\n                if (tr[i].querySelectorAll('td.e-rowcell')[idx].classList.contains('e-hide')) {\n                    removeClass([tr[i].querySelectorAll('td.e-rowcell')[idx]], ['e-hide']);\n                }\n                rows[i].cells[idx].visible = displayVal === '' ? true : false;\n            }\n        });\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        if (this.parent.getFrozenColumns()) {\n            this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; }).forEach(function (row) { return row.isSelected = set; });\n        }\n        this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n            .forEach(function (row) {\n            row.isSelected = set;\n            row.cells.forEach(function (cell) { return cell.isSelected = set; });\n        });\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    ContentRender.prototype.setRowObjects = function (rows) {\n        this.rows = rows;\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var result = void 0;\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    return;\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-headercontent' });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        this.parent.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        if (!this.parent.getFrozenColumns()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().firstChild;\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function () {\n        var gObj = this.parent;\n        if (this.getTable() && (!gObj.getFrozenColumns())) {\n            remove(this.getTable());\n        }\n        var columns = gObj.getColumns();\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var innerDiv = this.getPanel().firstChild;\n        var findHeaderRow = this.createHeaderContent();\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement('colgroup');\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, this.parent);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    HeaderRender.prototype.createHeaderContent = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        colGroup.id = this.parent.element.id + 'colGroup';\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable()) {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows) {\n        var column;\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var frzCols = this.parent.getFrozenColumns();\n        if (!cols.columns) {\n            if (!frzCols && (!this.parent.lockcolPositionCount\n                || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))\n                || (frzCols && ((!isMovable && (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns || cols.isFrozen) &&\n                    (!this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered) ||\n                        (!cols.lockColumn && this.lockColsRendered)))\n                    || (isMovable && (this.frzIdx + this.notfrzIdx >= this.parent.frozenColumns && !cols.isFrozen) &&\n                        (!this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered) ||\n                            (!cols.lockColumn && this.lockColsRendered)))))) {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var frzObj = this.refreshFrozenHdr(cols.columns, { isPartial: false, isComp: true, cnt: 0 });\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                if (!frzCols && (!this.parent.lockcolPositionCount\n                    || (!this.lockColsRendered && stackedLockColsCount) || (this.lockColsRendered && (colSpan - stackedLockColsCount)))\n                    || (frzCols && ((!isMovable && (this.parent.frozenColumns - this.frzIdx > 0 || (frzObj.isPartial)))\n                        || (isMovable && (colSpan + this.frzIdx > this.parent.frozenColumns && !frzObj.isComp))))) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, isMovable, frzObj.cnt, stackedLockColsCount)\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol, isMovable);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.refreshFrozenHdr = function (cols, frzObj) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                frzObj = this.refreshFrozenHdr(cols[i].columns, frzObj);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    frzObj.isPartial = true;\n                    frzObj.cnt++;\n                }\n                frzObj.isComp = frzObj.isComp && (cols[i].isFrozen ||\n                    this.parent.getColumnIndexByField(cols[i].field) < this.parent.frozenColumns);\n            }\n        }\n        return frzObj;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, isMovable, frozenCnt, stackedLockColsCount) {\n        var frzCol = this.parent.frozenColumns;\n        if (this.parent.getFrozenColumns() && this.frzIdx + colSpan > frzCol) {\n            if (isMovable) {\n                colSpan = colSpan - (frzCol > this.frzIdx ? frzCol - this.frzIdx : 0) - frozenCnt;\n            }\n            else {\n                colSpan = colSpan - (colSpan - (frzCol > this.frzIdx ? frzCol + frozenCnt - this.frzIdx : frozenCnt));\n            }\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal;\n        var idx;\n        var className;\n        var element;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                    setStyleAttribute(mTblColGrp.children[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                if (gObj.isRowDragable()) {\n                    idx++;\n                }\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n            this.refreshUI();\n        }\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.getTable();\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.getTable()) {\n            remove(this.getTable());\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement('colgroup');\n            var findHeaderRow = this.createHeaderContent();\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            this.setTable(table);\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().firstChild.appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n        for (var i = 0, len = headerRows.length; i < len; i++) {\n            var drag = new Draggable(headerRows[i], {\n                dragTarget: '.e-headercell',\n                distance: 5,\n                helper: this.helper,\n                dragStart: this.dragStart,\n                drag: this.drag,\n                dragStop: this.dragStop,\n                abort: '.e-rhandler'\n            });\n        }\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { isNullOrUndefined, extend, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren, extendObjWithFn } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData } from '../base/constant';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n        this.element = this.parent.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = this.parent.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData, isEdit) {\n        var _a;\n        var result;\n        if (cell.column.template) {\n            var literals = ['index'];\n            var dummyData = extendObjWithFn({}, data, (_a = {}, _a[foreignKeyData] = fData, _a.column = cell.column, _a));\n            var templateID = this.parent.element.id + cell.column.uid;\n            var str = 'isStringTemplate';\n            var index = 'index';\n            if (isBlazor() && isEdit) {\n                var rNumber = this.parent.editSettings.mode !== 'Batch' ? parseInt(attributes[index], 10) : null;\n                result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str], rNumber);\n                window[templateID] = null;\n                if (this.parent.editSettings.mode !== 'Batch') {\n                    updateBlazorTemplate(templateID, 'Template', cell.column, false);\n                }\n            }\n            else {\n                result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str]);\n            }\n            appendChildren(node, result);\n            this.parent.notify('template-result', { template: result });\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes, isExpand, isEdit) {\n        return this.refreshCell(cell, data, attributes, isEdit);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var isEdit = this.parent.editSettings.mode === 'Batch' && td.classList.contains('e-editedbatchcell');\n        var node = this.refreshCell(cell, data, attributes, isEdit);\n        td.innerHTML = '';\n        td.setAttribute('aria-label', node.getAttribute('aria-label'));\n        var elements = [].slice.call(node.childNodes);\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            td.appendChild(elem);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes, isEdit) {\n        var _a;\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if ((column.type === 'date' || column.type === 'datetime') && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', (innerHtml === '' ? 'empty' : innerHtml) + ' column header ' + cell.column.headerText);\n        if (!isNullOrUndefined(cell.column.headerText)) {\n            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        }\n        if (this.evaluate(node, cell, data, attributes, fData, isEdit) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = _this.parent.createElement('span', { className: 'e-headertext' });\n        _this.sortEle = _this.parent.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = _this.parent.createElement('div');\n        _this.chkAllBox = _this.parent.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            //need to pass the template id for blazor headertemplate\n            var headerTempID = gridObj.element.id + column.uid + 'headerTemplate';\n            var str = 'isStringTemplate';\n            result = column.getHeaderTemplate()(extend({ 'index': colIndex }, column), gridObj, 'headerTemplate', headerTempID, this.parent[str]);\n            node.firstElementChild.innerHTML = '';\n            appendChildren(node.firstElementChild, result);\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (this.parent.createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = this.parent.createElement('div', {\n            className: 'e-stackedheadercelldiv',\n            attrs: { 'e-mappinguid': cell.column.uid }\n        });\n        var column = cell.column;\n        node.appendChild(div);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            appendChildren(div, column.getHeaderTemplate()(column, this.parent, 'headerTemplate'));\n        }\n        else {\n            this.appendHtml(div, column.headerText, column.getDomSetter());\n        }\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        if (cell.column.customAttributes) {\n            setStyleAndAttributes(node, cell.column.customAttributes);\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = cell.column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-groupcaption',\n            attrs: { id: _this.parent.element.id + 'captioncell', role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var fKeyValue;\n        data.headerText = cell.column.headerText;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            if (isBlazor()) {\n                var tempID = gObj.element.id + 'captionTemplate';\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data, null, null, tempID);\n            }\n            else {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n            }\n            appendChildren(node, result);\n        }\n        else {\n            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     * @param  {{ [x: string]: string }} attr\n     * @param {boolean} isExpand\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data, attr, isExpand) {\n        var node = this.element.cloneNode();\n        node.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', isExpand ? 'true' : 'false');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(this.parent.createElement('div', {\n            className: isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' : 'e-icons e-gnextforward e-icon-grightarrow'\n        }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar RowDragDropRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropRenderer, _super);\n    function RowDragDropRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowdragdrop',\n            attrs: { role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    RowDragDropRenderer.prototype.render = function (cell, data) {\n        var nodeElement = this.element.cloneNode();\n        nodeElement.appendChild(this.parent.createElement('div', {\n            className: 'e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon'\n        }));\n        return nodeElement;\n    };\n    return RowDragDropRenderer;\n}(CellRenderer));\nexport { RowDragDropRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar RowDragDropHeaderRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropHeaderRenderer, _super);\n    function RowDragDropHeaderRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-rowdragheader' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    RowDragDropHeaderRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return RowDragDropHeaderRenderer;\n}(CellRenderer));\nexport { RowDragDropHeaderRenderer };\n","import { remove, resetBlazorTemplate, blazorTemplates, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.parent.scrollModule.setWidth();\n        this.parent.scrollModule.setHeight();\n        if (this.parent.height !== 'auto') {\n            this.parent.scrollModule.setPadding();\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        var _this = this;\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        var gObj = this.parent;\n        gObj.notify(e.requestType + \"-begin\", e);\n        if (isBlazor()) {\n            this.resetTemplates();\n        }\n        gObj.trigger(events.actionBegin, e, function (args) {\n            if (args === void 0) { args = { requestType: 'refresh' }; }\n            if (args.requestType === 'delete' && isBlazor() && !gObj.isJsComponent) {\n                var data = 'data';\n                args[data] = gObj.getSelectedRecords();\n            }\n            if (args.cancel) {\n                gObj.notify(events.cancelBegin, args);\n                return;\n            }\n            if (args.requestType === 'delete' && gObj.allowPaging) {\n                var dataLength = args.data.length;\n                var count = gObj.pageSettings.totalRecordsCount - dataLength;\n                if (!(gObj.currentViewData.length - dataLength) && count) {\n                    gObj.prevPageMoving = true;\n                    gObj.setProperties({\n                        pageSettings: {\n                            totalRecordsCount: count, currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n                        }\n                    }, true);\n                    gObj.pagerModule.pagerObj.totalRecordsCount = count;\n                }\n            }\n            _this.refreshDataManager(args);\n        });\n    };\n    Render.prototype.resetTemplates = function () {\n        var gObj = this.parent;\n        var gridColumns = gObj.getColumns();\n        if (gObj.detailTemplate) {\n            var detailTemplateID = gObj.element.id + 'detailTemplate';\n            blazorTemplates[detailTemplateID] = [];\n            resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n        }\n        if (gObj.groupSettings.captionTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n        }\n        if (gObj.rowTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n        }\n        if (gObj.toolbarTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[i].template) {\n                blazorTemplates[gObj.element.id + gridColumns[i].uid] = [];\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid, 'Template');\n            }\n            if (gridColumns[i].headerTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'headerTemplate', 'HeaderTemplate');\n            }\n            if (gridColumns[i].filterTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'filterTemplate', 'FilterTemplate');\n            }\n        }\n        var guid = 'guid';\n        for (var k = 0; k < gObj.aggregates.length; k++) {\n            for (var j = 0; j < gObj.aggregates[k].columns.length; j++) {\n                if (gObj.aggregates[k].columns[j].footerTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'footerTemplate';\n                    resetBlazorTemplate(tempID, 'FooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupFooterTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupFooterTemplate';\n                    resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupCaptionTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupCaptionTemplate';\n                    resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n                }\n            }\n        }\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1 });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.uid === value.uid;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement('tbody');\n        var spanCount = 0;\n        if (gObj.detailTemplate || gObj.childGrid) {\n            ++spanCount;\n        }\n        tr = this.parent.createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(this.parent.createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: (gObj.getColumns().length + spanCount).toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var cFormat = 'customFormat';\n        var equalTo = 'equalTo';\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[i].field || '', data);\n            if (!isNullOrUndefined(columns[i][cFormat])) {\n                columns[i].format = columns[i][cFormat];\n            }\n            if (!isNullOrUndefined(columns[i].validationRules) && !isNullOrUndefined(columns[i].validationRules[equalTo])) {\n                columns[i].validationRules[equalTo][0] = this.parent.element.id + columns[i].validationRules[equalTo][0];\n            }\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(columns[i].format));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                setFormatter(this.locator, columns[i]);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    /** @hidden */\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var _this = this;\n        var gObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        e.actionArgs = args;\n        gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n            if (dataArgs.cancel) {\n                return;\n            }\n            var len = Object.keys(dataArgs.result).length;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n                gObj.hideSpinner();\n                return;\n            }\n            _this.parent.isEdit = false;\n            _this.parent.notify(events.tooltipDestroy, {});\n            gObj.currentViewData = dataArgs.result;\n            if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n                gObj.prevPageMoving = true;\n                gObj.pageSettings.totalRecordsCount = dataArgs.count;\n                if (args.requestType !== 'paging') {\n                    gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n                }\n                gObj.dataBind();\n                return;\n            }\n            if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n                _this.updatesOnInitialRender(dataArgs);\n            }\n            if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n                _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n            }\n            if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates &&\n                !_this.parent.groupSettings.columns.length) {\n                dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n            }\n            _this.parent.notify(events.dataReady, extend({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates }, args));\n            if ((gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping'))\n                && (args && args.requestType !== 'filtering')) {\n                _this.headerRenderer.refreshUI();\n            }\n            if (len) {\n                if (isGroupAdaptive(gObj)) {\n                    var content = 'content';\n                    args.scrollTop = { top: _this.contentRenderer[content].scrollTop };\n                }\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else {\n                if (!gObj.getColumns().length) {\n                    gObj.element.innerHTML = '';\n                    alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                    return;\n                }\n                _this.contentRenderer.setRowElements([]);\n                _this.contentRenderer.setRowObjects([]);\n                _this.ariaService.setBusy(_this.parent.getContent().firstChild, false);\n                _this.renderEmptyRow();\n                if (args) {\n                    var action = (args.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, args);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        args.rows = [];\n                        args.isFrozen = _this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                _this.parent.hideSpinner();\n            }\n            _this.parent.notify(events.toolbarRefresh, {});\n        });\n    };\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        this.parent.log('actionfailure', { error: e });\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n        }\n        prepareColumns(this.parent.columns);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.buildColumns = function (record) {\n        var columns = Object.keys(record);\n        var cols = [];\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.setProperties({ 'columns': cols }, true);\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            [group0, groupN].forEach(function (group) {\n                return predicate.push(new Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n            });\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            [group0, groupN].forEach(function (group) {\n                return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n            });\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var _this = this;\n        var dm = new DataManager(untouched);\n        current.forEach(function (element, index, array) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n            element.count = uGroup.count;\n            var itemGroup = element.items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                element.items = _this.updateGroupInfo(element.items, uGroup.items);\n            }\n            _this.parent.aggregates.forEach(function (row) {\n                return row.columns.forEach(function (column) {\n                    var types = column.type instanceof Array ? column.type : [column.type];\n                    types.forEach(function (type) {\n                        var key = column.field + ' - ' + type.toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = _this.parent;\n                        if (type === 'Custom') {\n                            var data_1 = itemGroup.level ? uGroupItem : uGroup;\n                            element.aggregates[key] = column.customAggregate ?\n                                column.customAggregate.call(context, data_1, column) : '';\n                        }\n                        else {\n                            element.aggregates[key] = DataUtil.aggregates[type.toLowerCase()](data, column.field);\n                        }\n                    });\n                });\n            });\n        });\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var _this = this;\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        var totalColumnsWidth = 0;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        if (this.parent.isRowDragable()) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        this.parent.getColumns().forEach(function (column, index) {\n            _this.setColumnWidth(column, wFlag && _this.parent.enableColumnVirtualization ? undefined : index + i);\n        });\n        totalColumnsWidth = this.getTableWidth(this.parent.getColumns());\n        if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n            this.setMinwidthBycalculation(totalColumnsWidth);\n        }\n    };\n    ColumnWidthService.prototype.setMinwidthBycalculation = function (tWidth) {\n        var difference = 0;\n        var collection = this.parent.getColumns().filter(function (a) {\n            return isNullOrUndefined(a.width) || a.width === 'auto';\n        });\n        if (collection.length) {\n            if (!isNullOrUndefined(this.parent.width) && this.parent.width !== 'auto') {\n                difference = (typeof this.parent.width === 'string' ? parseInt(this.parent.width, 10) : this.parent.width) - tWidth;\n            }\n            var tmWidth = 0;\n            for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n                var cols = collection_1[_i];\n                tmWidth += !isNullOrUndefined(cols.minWidth) ?\n                    ((typeof cols.minWidth === 'string' ? parseInt(cols.minWidth, 10) : cols.minWidth)) : 0;\n            }\n            for (var i = 0; i < collection.length; i++) {\n                if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && (i !== collection.length - 1)) {\n                    this.setUndefinedColumnWidth(collection);\n                }\n                if (tWidth !== 0 && difference < tmWidth) {\n                    this.setWidth(collection[i].minWidth, this.parent.getColumnIndexByField(collection[i].field));\n                }\n                else if (tWidth !== 0 && difference > tmWidth) {\n                    this.setWidth('', this.parent.getColumnIndexByField(collection[i].field), true);\n                }\n            }\n        }\n    };\n    ColumnWidthService.prototype.setUndefinedColumnWidth = function (collection) {\n        for (var k = 0; k < collection.length; k++) {\n            if (k !== collection.length - 1) {\n                collection[k].width = 200;\n                this.setWidth(200, this.parent.getColumnIndexByField(collection[k].field));\n            }\n        }\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        var tgridWidth = this.getTableWidth(this.parent.getColumns());\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n                this.setMinwidthBycalculation(tgridWidth);\n            }\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index, clear) {\n        var chrome = 'chrome';\n        var webstore = 'webstore';\n        if (typeof (width) === 'string' && width.indexOf('%') !== -1 &&\n            !(Boolean(window[chrome]) && Boolean(window[chrome][webstore])) && this.parent.allowGrouping) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = parseInt(width, 10) / 100 * (elementWidth);\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol && !clear) {\n            headerCol.style.width = fWidth;\n        }\n        else if (headerCol && clear) {\n            headerCol.style.width = ' ';\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol && !clear) {\n            contentCol.style.width = fWidth;\n        }\n        else if (contentCol && clear) {\n            contentCol.style.width = ' ';\n        }\n        var edit = this.parent.element.querySelectorAll('.e-table.e-inline-edit');\n        var editTableCol = [];\n        for (var i = 0; i < edit.length; i++) {\n            for (var j = 0; j < edit[i].querySelector('colgroup').children.length; j++) {\n                editTableCol.push(edit[i].querySelector('colgroup').children[j]);\n            }\n        }\n        if (edit.length) {\n            editTableCol[index].style.width = fWidth;\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.isWidthUndefined = function () {\n        var isWidUndefCount = this.parent.getColumns().filter(function (col) {\n            return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);\n        }).length;\n        return (this.parent.getColumns().length === isWidUndefCount);\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing\n            && isNullOrUndefined(column.minWidth) && !this.isWidthUndefined()) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.width === 'auto') {\n                cWidth = 0;\n            }\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.calcMovableOrFreezeColWidth = function (tableType) {\n        var columns = this.parent.getColumns().slice();\n        if (tableType === 'movable') {\n            columns.splice(0, this.parent.getFrozenColumns());\n        }\n        else if (tableType === 'freeze') {\n            columns.splice(this.parent.getFrozenColumns(), columns.length);\n        }\n        return formatUnit(this.getTableWidth(columns));\n    };\n    ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var movableWidth = '';\n        var isColUndefined = this.parent.getColumns().filter(function (a) { return isNullOrUndefined(a.width); }).length >= 1;\n        var isWidthAuto = this.parent.getColumns().filter(function (a) { return (a.width === 'auto'); }).length >= 1;\n        if (typeof this.parent.width === 'number' && !isColUndefined && !isWidthAuto) {\n            movableWidth = formatUnit(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth('freeze').split('px')[0], 10) - 5);\n        }\n        else if (!isColUndefined && !isWidthAuto) {\n            movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        }\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenEditTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[0].style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableEditTable = function () {\n        var movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[1].style.width = movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenTable();\n            this.setWidthToMovableTable();\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit && this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenEditTable();\n            this.setWidthToMovableEditTable();\n        }\n        else if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = true;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.refMatrix = this.refreshMatrix(true);\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(this.parent.frozenRows === 0, this.parent.frozenColumns !== 0);\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.e-gridheader'));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.e-frozencontent')) ||\n            !isNullOrUndefined(closest(e.target, '.e-frozenheader'));\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-content') ||\n            !isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-filtermenudiv')) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        var th = closest(target, 'th') && !closest(target, 'th').tabIndex;\n        if (th && closest(document.activeElement, '.e-filterbarcell') !== null) {\n            this.removeFocus();\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (closest(document.activeElement, '.e-filterbarcell') !== null ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null)));\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen) {\n        this.active = content ? isFrozen ? this.fContent : this.content :\n            isFrozen ? this.fHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : _this.content :\n                (e.args && e.args.isFrozen) ? _this.fHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            var isRowTemplate = !isNullOrUndefined(_this.parent.rowTemplate);\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector, isRowTemplate);\n            var frozenColumnsCount = _this.parent.getFrozenColumns();\n            if (e.name === 'batchAdd' && frozenColumnsCount) {\n                var newMovableRows = rows.map(function (row) { return row.clone(); });\n                var newFrozenRows = rows.map(function (row) { return row.clone(); });\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].cells.length > frozenColumnsCount) {\n                        newFrozenRows[i].cells = rows[i].cells.slice(0, frozenColumnsCount);\n                        newMovableRows[i].cells = rows[i].cells.slice(frozenColumnsCount);\n                    }\n                }\n                _this.fContent.matrix.generate(newFrozenRows, _this.fContent.selector, isRowTemplate);\n                cFocus.matrix.generate(newMovableRows, cFocus.selector, isRowTemplate);\n            }\n            else {\n                cFocus.matrix.generate(rows, cFocus.selector, isRowTemplate);\n            }\n            cFocus.generateRows(updateRow, { matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader : _this.header });\n            if (!Browser.isDevice && !_this.focusByClick && e && e.args && e.args.requestType === 'paging') {\n                _this.skipFocus = false;\n                _this.parent.element.focus();\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        var focusElement = _this.getContent().getFocusInfo().elementToFocus;\n                        if (focusElement) {\n                            var cellPosition = focusElement.getBoundingClientRect();\n                            var gridPosition = _this.parent.element.getBoundingClientRect();\n                            if (cellPosition.top >= 0 && cellPosition.left >= 0 &&\n                                cellPosition.right <= Math.min(gridPosition.right, window.innerWidth ||\n                                    document.documentElement.clientWidth) &&\n                                cellPosition.bottom <= Math.min(gridPosition.bottom, window.innerHeight ||\n                                    document.documentElement.clientHeight)) {\n                                _this.focus();\n                            }\n                        }\n                    }\n                }\n                else if (e.args.focusElement && e.args.focusElement.classList.contains('e-filtertext')) {\n                    var focusElement = _this.parent.element.querySelector('#' + e.args.focusElement.id);\n                    if (focusElement) {\n                        focusElement.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refMatrix, this);\n        this.parent.on(event.partialRefresh, this.refMatrix, this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearIndicator, _this); });\n        ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n        this.parent.on(event.batchAdd, this.refMatrix, this);\n        this.parent.on(event.batchCancel, this.refMatrix, this);\n        this.parent.on(event.batchDelete, this.refMatrix, this);\n        this.parent.on(event.detailDataBound, this.refMatrix, this);\n        this.parent.on(event.onEmpty, this.refMatrix, this);\n        this.parent.on(event.cellFocused, this.internalCellFocus, this);\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refMatrix);\n        this.parent.off(event.partialRefresh, this.refMatrix);\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n        ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n        this.parent.off(event.batchAdd, this.refMatrix);\n        this.parent.off(event.batchDelete, this.refMatrix);\n        this.parent.off(event.batchCancel, this.refMatrix);\n        this.parent.off(event.detailDataBound, this.refMatrix);\n        this.parent.off(event.onEmpty, this.refMatrix);\n        this.parent.off(event.cellFocused, this.internalCellFocus);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (this.parent.frozenColumns === 0 && this.parent.frozenRows === 0) {\n            return;\n        }\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.frozenColumns !== 0 }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        if (isNullOrUndefined(this.matrix[rowIndex])) {\n            return null;\n        }\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        if (rowIndex === this.rows && (action === 'downArrow' || action === 'enter')) {\n            navigator[0] = -1;\n        }\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector, isRowTemplate) {\n        var _this = this;\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        rows.forEach(function (row, rIndex) {\n            var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n            _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n            cells.forEach(function (cell, cIndex) {\n                _this.set(rIndex, cIndex, selector(row, cell, isRowTemplate));\n            });\n        });\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.frozenColumns ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString() || (this.matrix.current[0] === this.matrix.rows &&\n                this.matrix.current.toString() === current.toString())) {\n                return false;\n            }\n            else {\n                current = this.editNextRow(current[0], current[1], e.action);\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.editNextRow = function (rowIndex, cellIndex, action) {\n        var gObj = this.parent;\n        var editNextRow = gObj.editSettings.allowNextRowEdit && (gObj.isEdit || gObj.isLastCellPrimaryKey);\n        var visibleIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[0].field);\n        if (action === 'tab' && editNextRow) {\n            rowIndex++;\n            var index = (this.getTable().rows[rowIndex].querySelectorAll('.e-indentcell').length +\n                this.getTable().rows[rowIndex].querySelectorAll('.e-detailrowcollapse').length);\n            cellIndex = visibleIndex + index;\n        }\n        if (action === 'shiftTab' && editNextRow) {\n            rowIndex--;\n            cellIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[gObj.getVisibleColumns().length - 1].field);\n        }\n        return !this.getTable().rows[rowIndex].cells[cellIndex].classList.contains('e-rowcell') ?\n            this.editNextRow(rowIndex, cellIndex, action) : [rowIndex, cellIndex];\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action) || (this.matrix.current.length === 0)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains('e-table') ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell, isRowTemplate) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand && isNullOrUndefined(cell.visible))\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn)\n            || (row.isDataRow && isRowTemplate))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var info = {\n            swap: ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var _a;\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            var cell;\n            if (table.rows[rowIndex].cells[0].classList.contains('e-editcell')) {\n                cell = table.rows[rowIndex].cells[0].querySelectorAll('td')[cellIndex];\n            }\n            else {\n                cell = table.rows[rowIndex].cells[cellIndex];\n            }\n            var isCellWidth = cell.getBoundingClientRect().width !== 0;\n            if (action === 'enter' || action === 'shiftEnter') {\n                return isCellWidth && cell.classList.contains('e-rowcell');\n            }\n            if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                return isCellWidth;\n            }\n            else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                return isCellWidth;\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains('e-rowcell') && !cell.classList.contains('e-unboundcell')\n                && !cell.classList.contains('e-templatecell') && !cell.classList.contains('e-detailcell') : true;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.getFrozenColumns() ?\n            this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains('e-rowcell') ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (e.target.classList.contains('e-columnheader') ||\n            e.target.querySelector('.e-stackedheadercell')) {\n            return false;\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        info.elementToFocus = this.getFocusable(info.element);\n        info.outline = !info.element.classList.contains('e-filterbarcell');\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox' ||\n            cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            (action === 'leftArrow' || action === 'shiftTab') && current[1] === 0;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                frozenSwap,\n            toHeader: frozenSwap,\n            toFrozen: frozenSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var _this = this;\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            rows[0].cells.forEach(function (cell, cIndex) {\n                return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n            });\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rowIndex = _a[0], columnIndex = _a[1];\n        if (rowIndex < 0 || columnIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rowIndex + \".cells.\" + columnIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        return {\n            swap: (action === 'upArrow' || enterFrozen) && current[0] === 0\n                || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: (action === 'upArrow' || enterFrozen) && current[0] === 0\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current2[0] = previous[0];\n            current2[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n                || ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns),\n            toHeader: (action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current3[0] = previous[0];\n            current3[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { Browser, EventHandler, createElement, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, isGroupAdaptive, parentsUntil, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { iterateExtend } from '../base/util';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal letiables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        /**\n         * @hidden\n         */\n        this.preventFocus = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.isPersisted = false;\n        this.cmdKeyPressed = false;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.wireEvents();\n    }\n    Selection.prototype.initializeSelection = function () {\n        this.parent.log('selection_key_missing');\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (args.cellIndex || args.rowIndex) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        this.unWireEvents();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' && this.parent.editModule &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.getFrozenColumns()) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getCurrentBatchRecordChanges = function () {\n        var gObj = this.parent;\n        var added = 'addedRecords';\n        var deleted = 'deletedRecords';\n        if (gObj.editSettings.mode === 'Batch' && gObj.editModule) {\n            var currentRecords = iterateExtend(this.parent.getCurrentViewRecords());\n            currentRecords = this.parent.editModule.getBatchChanges()[added].concat(currentRecords);\n            var deletedRecords = this.parent.editModule.getBatchChanges()[deleted];\n            var primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < (deletedRecords.length); i++) {\n                for (var j = 0; j < currentRecords.length; j++) {\n                    if (deletedRecords[i][primaryKey] === currentRecords[j][primaryKey]) {\n                        currentRecords.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            return currentRecords;\n        }\n        else {\n            return gObj.getCurrentViewRecords();\n        }\n    };\n    /**\n     * Selects a row by the given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        if (this.selectedRowIndexes.length && this.selectionSettings.enableSimpleMultiRowSelection) {\n            this.addRowsToSelection([index]);\n            return;\n        }\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectData;\n        var isRemoved = false;\n        if (gObj.enableVirtualization && index > -1) {\n            if (selectedRow) {\n                selectData = gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')).data;\n            }\n            else {\n                var prevSelectedData = this.parent.getSelectedRecords();\n                if (prevSelectedData.length > 0) {\n                    this.clearRowSelection();\n                }\n                this.parent.notify(events.selectVirtualRow, { selectedIndex: index });\n                return;\n            }\n        }\n        else {\n            selectData = this.getCurrentBatchRecordChanges()[index];\n        }\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                previousRowIndex: this.prevRowIndex, target: this.actualTarget, cancel: false\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionBegin(args, events.rowSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        if (isRowSelected && this.selectionSettings.persistSelection) {\n            this.clearSelectedRow(index);\n            isRemoved = true;\n        }\n        if (!this.selectionSettings.persistSelection) {\n            this.clearRow();\n        }\n        if (!isToggle && !isRemoved) {\n            if (this.selectedRowIndexes.indexOf(index) <= -1) {\n                this.updateRowSelection(selectedRow, index);\n                if (gObj.getFrozenColumns()) {\n                    this.updateRowSelection(selectedMovableRow, index);\n                }\n            }\n            this.selectRowIndex(index);\n        }\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index,\n                row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                previousRowIndex: this.prevRowIndex, target: this.actualTarget\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionComplete(args, events.rowSelected);\n        }\n        this.updateRowProps(index);\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow) {\n        if (this.parent.getFrozenColumns()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.selectRowIndex(endIndex);\n    };\n    /**\n     * Selects a collection of rows by index.\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        var selectedRow = gObj.getRowByIndex(rowIndex);\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var frzCols = gObj.getFrozenColumns();\n        var can = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[rowIndexes[0]];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.actualTarget,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionBegin(args, events.rowSelecting);\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        this.clearRow();\n        this.selectRowIndex(rowIndexes.slice(-1)[0]);\n        if (!this.isSingleSel()) {\n            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                var rowIdx = rowIndexes_1[_i];\n                this.updateRowSelection(gObj.getRowByIndex(rowIdx), rowIdx);\n                if (frzCols) {\n                    this.updateRowSelection(gObj.getMovableRowByIndex(rowIdx), rowIdx);\n                }\n                this.updateRowProps(rowIndex);\n            }\n        }\n        else {\n            this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n            if (frzCols) {\n                this.updateRowSelection(gObj.getMovableRowByIndex(rowIndex), rowIndex);\n            }\n            this.updateRowProps(rowIndex);\n        }\n        args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.actualTarget,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionComplete(args, events.rowSelected);\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var can = 'cancel';\n        var target = this.target;\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args;\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var rowObj = this.getRowObj(rowIndex);\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            this.selectRowIndex(rowIndex);\n            if (isUnSelected && ((checkboxColumn.length ? true : this.selectionSettings.enableToggle) || this.isMultiCtrlRequest)) {\n                this.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target);\n                if (this.isCancelDeSelect) {\n                    return;\n                }\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target, [selectedMovableRow]);\n                this.isInteracted = false;\n            }\n            else {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionBegin(args, events.rowSelecting);\n                if (!isNullOrUndefined(args) && args[can] === true) {\n                    return;\n                }\n                if (this.isSingleSel()) {\n                    this.clearRow();\n                }\n                this.updateRowSelection(selectedRow, rowIndex);\n                if (frzCols) {\n                    this.updateRowSelection(selectedMovableRow, rowIndex);\n                }\n            }\n            if (!isUnSelected) {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionComplete(args, events.rowSelected);\n            }\n            this.updateRowProps(rowIndex);\n            if (this.isSingleSel()) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex <= endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowSelection();\n        if (this.isCancelDeSelect && this.parent.checkAllRows !== 'Check') {\n            return;\n        }\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.selectRowIndex(-1);\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.clearSelectedRow = function (index) {\n        if (this.target) {\n            var selectedEle = this.target.parentElement;\n            if (!this.disableUI) {\n                selectedEle.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedEle, false, true, 'e-selectionbackground', 'e-active');\n            }\n            this.updatePersistCollection(selectedEle, false);\n            this.updateCheckBoxes(selectedEle);\n            this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(index), 1);\n            this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(index)), 1);\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if (this.parent.isPersistSelection && !isNullOrUndefined(selectedRow)) {\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState, rowIndex) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(rowIndex);\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.getFrozenColumns() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)');\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            this.isInteracted = false;\n            if (this.parent.isPersistSelection) {\n                this.persistSelectedData = [];\n                this.selectedRowState = {};\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.enableSelectMultiTouch = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows = this.parent.getDataRows();\n            var data = [];\n            var row = [];\n            var mRow = [];\n            var rowIndex = [];\n            var frzCols = gObj.getFrozenColumns();\n            var foreignKeyData = [];\n            var target = this.target;\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.editSettings.mode === 'Batch' ?\n                    this.parent.getRows()[this.selectedRowIndexes[i]]\n                    : this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data.push(rowObj.data);\n                    row.push(currentRow);\n                    rowIndex.push(this.selectedRowIndexes[i]);\n                    foreignKeyData.push(rowObj.foreignKeyData);\n                }\n                if (frzCols) {\n                    mRow.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                }\n            }\n            if (this.selectionSettings.persistSelection) {\n                this.isInteracted = this.checkSelectAllClicked ? true : false;\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex, data, row, foreignKeyData, target, mRow);\n            if (this.isCancelDeSelect && (this.isInteracted || this.checkSelectAllClicked)) {\n                if (this.parent.isPersistSelection) {\n                    if (this.getCheckAllStatus(this.parent.element.querySelector('.e-checkselectall')) === 'Intermediate') {\n                        for (var i = 0; i < this.selectedRecords.length; i++) {\n                            this.updatePersistCollection(this.selectedRecords[i], true);\n                        }\n                    }\n                    else {\n                        this.parent.checkAllRows = 'Check';\n                        this.updatePersistSelectedData(true);\n                    }\n                }\n                return;\n            }\n            rows.filter(function (record) { return record.hasAttribute('aria-selected'); }).forEach(function (ele) {\n                if (!_this.disableUI) {\n                    ele.removeAttribute('aria-selected');\n                    _this.addRemoveClassesForRow(ele, false, true, 'e-selectionbackground', 'e-active');\n                }\n                _this.updatePersistCollection(ele, false);\n                _this.updateCheckBoxes(ele);\n            });\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var movableRow = this.getSelectedMovableRow(this.selectedRowIndexes[i]);\n                if (movableRow) {\n                    if (!this.disableUI) {\n                        movableRow.removeAttribute('aria-selected');\n                        this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    this.updatePersistCollection(movableRow, false);\n                }\n            }\n            this.selectedRowIndexes = [];\n            this.selectedRecords = [];\n            this.isRowSelected = false;\n            this.selectRowIndex(-1);\n            this.rowDeselect(events.rowDeselected, rowIndex, data, row, foreignKeyData, target, mRow);\n            this.isInteracted = false;\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, target, mRow) {\n        if ((this.selectionSettings.persistSelection && this.isInteracted) || !this.selectionSettings.persistSelection) {\n            var cancl = 'cancel';\n            var rowDeselectObj = {\n                rowIndex: rowIndex, data: data, foreignKeyData: foreignKeyData,\n                cancel: false, target: target, isInteracted: this.isInteracted\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                var rowInString = 'row';\n                rowDeselectObj[rowInString] = row;\n            }\n            else {\n                var rowIndex_1 = 'rowIndex';\n                var data_1 = 'data';\n                rowDeselectObj[rowIndex_1] = rowDeselectObj[rowIndex_1][rowDeselectObj[rowIndex_1].length - 1];\n                rowDeselectObj[data_1] = rowDeselectObj[data_1][rowDeselectObj[data_1].length - 1];\n            }\n            this.parent.trigger(type, this.parent.getFrozenColumns() ? __assign({}, rowDeselectObj, { mRow: mRow }) : rowDeselectObj);\n            this.isCancelDeSelect = rowDeselectObj[cancl];\n            if (!this.isCancelDeSelect || (!this.isInteracted && !this.checkSelectAllClicked)) {\n                this.updatePersistCollection(row[0], false);\n                this.updateCheckBoxes(row[0], undefined, rowIndex[0]);\n            }\n        }\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols) {\n            if (cellIndex.cellIndex >= frzCols) {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        var selectedTable;\n        var cIdx;\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                var currentCell = 'currentCell';\n                args[currentCell] = selectedCell;\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData));\n        }\n        else {\n            this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData)(args);\n        }\n    };\n    Selection.prototype.successCallBack = function (cellSelectingArgs, isToggle, cellIndex, selectedCell, selectedData) {\n        var _this = this;\n        return function (cellSelectingArgs) {\n            var cncl = 'cancel';\n            var currentCell = 'currentCell';\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            if (!isToggle) {\n                cellSelectingArgs[currentCell] = cellSelectingArgs[currentCell] ? cellSelectingArgs[currentCell] : selectedCell;\n            }\n            _this.clearCell();\n            if (!isToggle) {\n                _this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            _this.updateCellProps(cellIndex, cellIndex);\n            if (!isToggle) {\n                var args = {\n                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                    selectedRowCellIndex: _this.selectedRowCellIndexes,\n                    previousRowCell: _this.prevECIdxs ?\n                        _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                };\n                if (!isBlazor()) {\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    args[previousRowCellIndex] = _this.prevECIdxs;\n                }\n                _this.onActionComplete(args, events.cellSelected);\n            }\n        };\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        var _this = this;\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            args[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), function (cellSelectingArgs) {\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            _this.clearCell();\n            if (startIndex.rowIndex > endIndex.rowIndex) {\n                var temp = startIndex;\n                startIndex = endIndex;\n                endIndex = temp;\n            }\n            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n                if (_this.selectionSettings.cellSelectionMode.indexOf('Box') < 0) {\n                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : _this.getLastColIndex(i);\n                }\n                else {\n                    min = startIndex.cellIndex;\n                    max = endIndex.cellIndex;\n                }\n                cellIndexes = [];\n                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                    if (frzCols) {\n                        if (j < frzCols) {\n                            selectedCell = gObj.getCellFromIndex(i, j);\n                        }\n                        else {\n                            selectedCell = gObj.getMovableCellFromIndex(i, j);\n                        }\n                    }\n                    else {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    if (!selectedCell) {\n                        continue;\n                    }\n                    cellIndexes.push(j);\n                    _this.updateCellSelection(selectedCell);\n                    _this.addAttribute(selectedCell);\n                }\n                _this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n            }\n            _this.updateCellProps(stIndex, edIndex);\n            var cellSelectedArgs = {\n                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n                selectedRowCellIndex: _this.selectedRowCellIndexes,\n                previousRowCell: _this.prevECIdxs ? _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n            };\n            if (!isBlazor()) {\n                var previousRowCellIndex = 'previousRowCellIndex';\n                cellSelectedArgs[previousRowCellIndex] = _this.prevECIdxs;\n            }\n            _this.onActionComplete(cellSelectedArgs, events.cellSelected);\n        });\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var cellSelectArgs = {\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n            isShiftPressed: this.isMultiShiftRequest,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.onActionBegin(cellSelectArgs, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        var cellSelectedArgs = {\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.onActionComplete(cellSelectedArgs, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedTable;\n        var cIdx;\n        var selectedCell;\n        var frzCols = gObj.getFrozenColumns();\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.hideAutoFill();\n        var rowObj;\n        if (frzCols && cellIndexes[0].cellIndex >= frzCols) {\n            rowObj = gObj.getMovableRowsObject()[cellIndexes[0].rowIndex];\n        }\n        else {\n            rowObj = this.getRowObj(cellIndexes[0].rowIndex);\n        }\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            foreignKeyData.push(rowObj.cells[frzCols && cellIndexes[0].cellIndex >= frzCols\n                ? cellIndex.cellIndex - frzCols : cellIndex.cellIndex].foreignKeyData);\n            var args = {\n                data: selectedData, cellIndex: cellIndexes[0],\n                isShiftPressed: this.isMultiShiftRequest,\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n            };\n            if (!isBlazor()) {\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    if (selectedCellIdx.length === 0) {\n                        this.selectedRowCellIndexes.splice(index, 1);\n                    }\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n            if (!isUnSelected) {\n                var cellSelectedArgs = {\n                    data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                    previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                        undefined, selectedRowCellIndex: this.selectedRowCellIndexes\n                };\n                if (!isBlazor()) {\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n                }\n                this.onActionComplete(cellSelectedArgs, events.cellSelected);\n            }\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var cells;\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (index >= frzCols) {\n                cells = this.parent.getMovableDataRows()[rowIndex] &&\n                    this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n            }\n        }\n        if (!cells) {\n            cells = this.parent.getDataRows()[rowIndex] &&\n                this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        }\n        if (cells) {\n            for (var m = 0; m < cells.length; m++) {\n                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n                if (colIndex === index) {\n                    if (frzCols) {\n                        if (index >= frzCols) {\n                            m += frzCols;\n                        }\n                    }\n                    return m;\n                }\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = this.getCurrentBatchRecordChanges();\n            var selectedTable = void 0;\n            var frzCols = gObj.getFrozenColumns();\n            this.hideAutoFill();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        if (rowCell[i].cellIndexes[j] < frzCols) {\n                            cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                        else {\n                            cells.push(gObj.getMovableCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                    }\n                    else {\n                        if (rowObj.cells) {\n                            foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        }\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            if (this.bdrBottom) {\n                this.hideBorders();\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.getFrozenColumns()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            if (!this.isCellDrag) {\n                this.hideAutoFill();\n                this.selectRowsByRange(this.startDIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, 'e-rowcell');\n                if (td) {\n                    this.startAFCell = this.startCell;\n                    this.endAFCell = parentsUntil(e.target, 'e-rowcell');\n                    this.selectLikeExcel(e, rowIndex, parseInt(td.getAttribute('aria-colindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (e, rowIndex, cellIndex) {\n        if (!this.isAutoFillSel) {\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.drawBorders();\n        }\n        else { //Autofill\n            this.showAFBorders();\n            this.selectLikeAutoFill(e);\n        }\n    };\n    Selection.prototype.drawBorders = function () {\n        if (this.selectionSettings.cellSelectionMode === 'BoxWithBorder' && this.selectedRowCellIndexes.length && !this.parent.isEdit) {\n            if (!this.bdrBottom) {\n                this.createBorders();\n            }\n            this.positionBorders();\n        }\n        else {\n            this.hideBorders();\n        }\n    };\n    Selection.prototype.positionBorders = function () {\n        this.updateStartEndCells();\n        if (!this.startCell || !this.bdrLeft || !this.selectedRowCellIndexes.length) {\n            return;\n        }\n        this.showBorders();\n        var stOff = this.startCell.getBoundingClientRect();\n        var endOff = this.endCell.getBoundingClientRect();\n        var parentOff = this.startCell.offsetParent.getBoundingClientRect();\n        this.bdrLeft.style.left = stOff.left - parentOff.left + 'px';\n        this.bdrLeft.style.top = stOff.top - parentOff.top + 'px';\n        this.bdrLeft.style.height = endOff.top - stOff.top > 0 ?\n            (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) + 'px' : endOff.height + 'px';\n        this.bdrRight.style.left = endOff.left - parentOff.left + endOff.width + 'px';\n        this.bdrRight.style.top = this.bdrLeft.style.top;\n        this.bdrRight.style.height = this.bdrLeft.style.height;\n        this.bdrTop.style.left = this.bdrLeft.style.left;\n        this.bdrTop.style.top = this.bdrRight.style.top;\n        this.bdrTop.style.width = parseInt(this.bdrRight.style.left, 10) - parseInt(this.bdrLeft.style.left, 10) + 1 + 'px';\n        this.bdrBottom.style.left = this.bdrLeft.style.left;\n        this.bdrBottom.style.top = parseInt(this.bdrLeft.style.top, 10) + parseInt(this.bdrLeft.style.height, 10) + 'px';\n        this.bdrBottom.style.width = this.bdrTop.style.width;\n    };\n    Selection.prototype.createBorders = function () {\n        if (!this.bdrLeft) {\n            this.bdrLeft = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrleft', styles: 'width: 2px;' }));\n            this.bdrRight = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrright', styles: 'width: 2px;' }));\n            this.bdrBottom = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrbottom', styles: 'height: 2px;' }));\n            this.bdrTop = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrtop', styles: 'height: 2px;' }));\n        }\n    };\n    Selection.prototype.showBorders = function () {\n        if (this.bdrLeft) {\n            this.bdrLeft.style.display = '';\n            this.bdrRight.style.display = '';\n            this.bdrBottom.style.display = '';\n            this.bdrTop.style.display = '';\n        }\n    };\n    Selection.prototype.hideBorders = function () {\n        if (this.bdrLeft) {\n            this.bdrLeft.style.display = 'none';\n            this.bdrRight.style.display = 'none';\n            this.bdrBottom.style.display = 'none';\n            this.bdrTop.style.display = 'none';\n        }\n    };\n    Selection.prototype.drawAFBorders = function () {\n        if (!this.bdrAFBottom) {\n            this.createAFBorders();\n        }\n        this.positionAFBorders();\n    };\n    Selection.prototype.positionAFBorders = function () {\n        if (!this.startCell || !this.bdrAFLeft) {\n            return;\n        }\n        this.showBorders();\n        var stOff = this.startAFCell.getBoundingClientRect();\n        var endOff = this.endAFCell.getBoundingClientRect();\n        var parentOff = this.startAFCell.offsetParent.getBoundingClientRect();\n        this.bdrAFLeft.style.left = stOff.left - parentOff.left + 'px';\n        this.bdrAFLeft.style.top = stOff.top - parentOff.top + 'px';\n        this.bdrAFLeft.style.height = endOff.top - stOff.top > 0 ?\n            (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) + 'px' : endOff.height + 'px';\n        this.bdrAFRight.style.left = endOff.left - parentOff.left + endOff.width + 'px';\n        this.bdrAFRight.style.top = this.bdrAFLeft.style.top;\n        this.bdrAFRight.style.height = this.bdrAFLeft.style.height;\n        this.bdrAFTop.style.left = this.bdrAFLeft.style.left;\n        this.bdrAFTop.style.top = this.bdrAFRight.style.top;\n        this.bdrAFTop.style.width = parseInt(this.bdrAFRight.style.left, 10) - parseInt(this.bdrAFLeft.style.left, 10) + 1 + 'px';\n        this.bdrAFBottom.style.left = this.bdrAFLeft.style.left;\n        this.bdrAFBottom.style.top = parseInt(this.bdrAFLeft.style.top, 10) + parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        this.bdrAFBottom.style.width = this.bdrAFTop.style.width;\n    };\n    Selection.prototype.createAFBorders = function () {\n        if (!this.bdrAFLeft) {\n            this.bdrAFLeft = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrafleft', styles: 'width: 2px;' }));\n            this.bdrAFRight = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrafright', styles: 'width: 2px;' }));\n            this.bdrAFBottom = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdrafbottom', styles: 'height: 2px;' }));\n            this.bdrAFTop = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_bdraftop', styles: 'height: 2px;' }));\n        }\n    };\n    Selection.prototype.showAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = '';\n            this.bdrAFRight.style.display = '';\n            this.bdrAFBottom.style.display = '';\n            this.bdrAFTop.style.display = '';\n        }\n    };\n    Selection.prototype.hideAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = 'none';\n            this.bdrAFRight.style.display = 'none';\n            this.bdrAFBottom.style.display = 'none';\n            this.bdrAFTop.style.display = 'none';\n        }\n    };\n    Selection.prototype.updateValue = function (rIdx, cIdx, cell) {\n        var col = this.parent.getColumnByIndex(cIdx);\n        if (this.parent.editModule && cell) {\n            if (col.type === 'number') {\n                this.parent.editModule.updateCell(rIdx, col.field, parseInt(cell.textContent, 10));\n            }\n            else {\n                this.parent.editModule.updateCell(rIdx, col.field, cell.textContent);\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Selection.prototype.selectLikeAutoFill = function (e, isApply) {\n        var startrowIdx = parseInt(parentsUntil(this.startAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var startCellIdx = parseInt(this.startAFCell.getAttribute('aria-colindex'), 10);\n        var endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n        var rowLen = this.selectedRowCellIndexes.length - 1;\n        var colLen = this.selectedRowCellIndexes[0].cellIndexes.length - 1;\n        var col;\n        switch (true) { //direction         \n            case !isApply && this.endAFCell.classList.contains('e-cellselectionbackground') &&\n                !!parentsUntil(e.target, 'e-rowcell'):\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, startCellIdx);\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, startCellIdx + colLen);\n                this.drawAFBorders();\n                break;\n            case startCellIdx + colLen < endCellIdx && //right\n                endCellIdx - startCellIdx - colLen + 1 > endrowIdx - startrowIdx - rowLen // right bottom\n                && endCellIdx - startCellIdx - colLen + 1 > startrowIdx - endrowIdx: //right top\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, endCellIdx);\n                endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n                endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var cellIdx = parseInt(this.endCell.getAttribute('aria-colindex'), 10);\n                    for (var i = startrowIdx; i <= endrowIdx; i++) {\n                        var cells = [].slice.call(this.parent.getDataRows()[i].querySelectorAll('.e-cellselectionbackground'));\n                        var c = 0;\n                        for (var j = cellIdx + 1; j <= endCellIdx; j++) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: this.startCellIndex }, { rowIndex: endrowIdx, cellIndex: endCellIdx });\n                }\n                break;\n            case startCellIdx > endCellIdx && // left\n                startCellIdx - endCellIdx + 1 > endrowIdx - startrowIdx - rowLen && //left top\n                startCellIdx - endCellIdx + 1 > startrowIdx - endrowIdx: // left bottom\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, endCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    for (var i = startrowIdx; i <= startrowIdx + rowLen; i++) {\n                        var cells = [].slice.call(this.parent.getDataRows()[i].querySelectorAll('.e-cellselectionbackground'));\n                        cells.reverse();\n                        var c = 0;\n                        for (var j = this.startCellIndex - 1; j >= endCellIdx; j--) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: endCellIdx }, { rowIndex: startrowIdx + rowLen, cellIndex: this.startCellIndex + colLen });\n                }\n                break;\n            case startrowIdx > endrowIdx: //up\n                this.startAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = trIdx;\n                    for (var i = startrowIdx - 1; i >= endrowIdx; i--) {\n                        if (r === this.startIndex - 1) {\n                            r = trIdx;\n                        }\n                        var cells = [].slice.call(this.parent.getDataRows()[r].querySelectorAll('.e-cellselectionbackground'));\n                        var c = 0;\n                        r--;\n                        for (var j = this.startCellIndex; j <= this.startCellIndex + colLen; j++) {\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: endrowIdx, cellIndex: startCellIdx + colLen }, { rowIndex: startrowIdx + rowLen, cellIndex: startCellIdx });\n                }\n                break;\n            default: //down\n                this.endAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx + colLen);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = this.startIndex;\n                    for (var i = trIdx + 1; i <= endrowIdx; i++) {\n                        if (r === trIdx + 1) {\n                            r = this.startIndex;\n                        }\n                        var cells = [].slice.call(this.parent.getDataRows()[r].querySelectorAll('.e-cellselectionbackground'));\n                        r++;\n                        var c = 0;\n                        for (var m = this.startCellIndex; m <= this.startCellIndex + colLen; m++) {\n                            this.updateValue(i, m, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: trIdx - rowLen, cellIndex: startCellIdx }, { rowIndex: endrowIdx, cellIndex: startCellIdx + colLen });\n                }\n                break;\n        }\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        if (this.isDragged && this.selectedRowCellIndexes.length === 1 && this.selectedRowCellIndexes[0].cellIndexes.length === 1) {\n            this.mUPTarget = parentsUntil(e.target, 'e-rowcell');\n        }\n        else {\n            this.mUPTarget = null;\n        }\n        this.isDragged = false;\n        this.updateAutoFillPosition();\n        if (this.isAutoFillSel) {\n            this.startAFCell = this.startCell;\n            this.endAFCell = parentsUntil(e.target, 'e-rowcell');\n            this.updateStartCellsIndex();\n            this.selectLikeAutoFill(e, true);\n            this.updateAutoFillPosition();\n            this.hideAFBorders();\n            this.positionBorders();\n            this.isAutoFillSel = false;\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n    };\n    Selection.prototype.hideAutoFill = function () {\n        if (this.autofill) {\n            this.autofill.style.display = 'none';\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.updateAutoFillPosition = function () {\n        if (this.parent.enableAutoFill && !this.parent.isEdit &&\n            this.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()\n            && this.selectedRowCellIndexes.length) {\n            var cells = [].slice.call(this.parent.getDataRows()[this.selectedRowCellIndexes[this.selectedRowCellIndexes.length - 1].rowIndex].querySelectorAll('.e-cellselectionbackground'));\n            if (!this.parent.element.querySelector('#' + this.parent.element.id + '_autofill')) {\n                this.autofill = this.parent.getContentTable().parentElement.appendChild(createElement('div', { className: 'e-autofill', id: this.parent.element.id + '_autofill' }));\n            }\n            var cell = cells[cells.length - 1];\n            if (cell && cell.offsetParent) {\n                var clientRect = cell.getBoundingClientRect();\n                var parentOff = cell.offsetParent.getBoundingClientRect();\n                this.autofill.style.left = clientRect.left - parentOff.left + clientRect.width - 3 + 'px';\n                this.autofill.style.top = clientRect.top - parentOff.top + clientRect.height - 3 + 'px';\n            }\n            this.autofill.style.display = '';\n        }\n        else {\n            this.hideAutoFill();\n        }\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (parentsUntil(target, 'e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop && !gObj.isEdit) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = this.parent.createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                this.enableDrag(e, true);\n            }\n        }\n        this.updateStartEndCells();\n        if (target.classList.contains('e-autofill')) {\n            this.isCellDrag = true;\n            this.isAutoFillSel = true;\n            this.enableDrag(e);\n        }\n    };\n    Selection.prototype.updateStartEndCells = function () {\n        var cells = [].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground'));\n        this.startCell = cells[0];\n        this.endCell = cells[cells.length - 1];\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.updateStartCellsIndex = function () {\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.enableDrag = function (e, isUpdate) {\n        var gObj = this.parent;\n        if (isUpdate) {\n            var tr = closest(e.target, 'tr');\n            this.startDIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n            this.startDCellIndex = parseInt(parentsUntil(e.target, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n        document.body.classList.add('e-disableuserselect');\n        var gBRect = gObj.element.getBoundingClientRect();\n        var postion = getPosition(e);\n        this.x = postion.x - gBRect.left;\n        this.y = postion.y - gBRect.top;\n        EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.beforeFragAppend, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n        this.parent.on(events.headerRefreshed, this.refreshHeader, this);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.beforeFragAppend, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n        this.parent.off(events.headerRefreshed, this.refreshHeader);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.wireEvents = function () {\n        this.isMacOS = navigator.userAgent.indexOf('Mac OS') !== -1;\n        if (this.isMacOS) {\n            EventHandler.add(this.parent.element, 'keydown', this.keyDownHandler, this);\n            EventHandler.add(this.parent.element, 'keyup', this.keyUpHandler, this);\n        }\n    };\n    Selection.prototype.unWireEvents = function () {\n        if (this.isMacOS) {\n            EventHandler.remove(this.parent.element, 'keydown', this.keyDownHandler);\n            EventHandler.remove(this.parent.element, 'keyup', this.keyUpHandler);\n        }\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n                this.prevCIdxs = undefined;\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n                this.prevRowIndex = undefined;\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n        }\n        this.isPersisted = true;\n        this.checkBoxSelectionChanged();\n        this.isPersisted = false;\n        this.initPerisistSelection();\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length) {\n            gObj.isCheckBoxSelection = !(this.selectionSettings.checkboxMode === 'ResetOnRowClick');\n        }\n        this.drawBorders();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.selectRow(this.parent.selectedRowIndex);\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        this.parent.off(events.contentReady, this.checkBoxSelectionChanged);\n        var gobj = this.parent;\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection && !this.isPersisted) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            if (!query.params) {\n                query.params = this.parent.query.params;\n            }\n            var dataManager = data.getData({}, query);\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        var adaptorName = 'adaptorName';\n        if (!this.parent.getDataModule().isRemote() && !(this.parent.dataSource[adaptorName] === 'BlazorAdaptor')) {\n            if (state) {\n                for (var _i = 0, _a = this.getData(); _i < _a.length; _i++) {\n                    var data = _a[_i];\n                    this.selectedRowState[data[this.primaryKey]] = true;\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        if (rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            this.isSingleSel() && indexes.length > 0 ? this.selectRow(indexes[0], true) : this.selectRows(indexes);\n        }\n        if (this.parent.isCheckBoxSelection && this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        var _this = this;\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            e.data.slice().forEach(function (data) {\n                if (!isNullOrUndefined(data[_this.primaryKey])) {\n                    _this.updatePersistDelete(data[_this.primaryKey]);\n                }\n            });\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        if (e.requestType === 'paging') {\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n            this.prevECIdxs = undefined;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.updatePersistSelectedData = function (checkState) {\n        if (this.parent.isPersistSelection) {\n            var adaptorName = 'adaptorName';\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = (!this.parent.getDataModule().isRemote() &&\n                    !(this.parent.dataSource[adaptorName] === 'BlazorAdaptor')) ?\n                    this.getData().slice() : this.persistSelectedData;\n            }\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.getCurrentBatchRecordChanges().length) {\n            this.parent.checkAllRows = 'Check';\n            this.updatePersistSelectedData(checkState);\n            this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length - 1));\n        }\n        else {\n            this.parent.checkAllRows = 'Uncheck';\n            this.updatePersistSelectedData(checkState);\n            this.clearSelection();\n        }\n        this.chkAllCollec = [];\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n            }\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        if (stateStr === 'Intermediate') {\n            state = this.getCurrentBatchRecordChanges().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        this.checkSelectAllAction(!state);\n        this.target = null;\n        if (this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        var gObj = this.parent;\n        this.isMultiCtrlRequest = true;\n        var rIndex = 0;\n        if (isGroupAdaptive(gObj)) {\n            var uid = target.parentElement.getAttribute('data-uid');\n            rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n        }\n        else {\n            rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        }\n        if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && this.parent.enableVirtualization && !this.parent.getDataModule().isRemote()) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                for (var data = 0; data < this.getData().length; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                if (index && this.parent.getRowByIndex(index).getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    ;\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection) {\n                checkedLen = this.selectedRowIndexes.length;\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.getCheckAllBox()) {\n                var spanEle = this.getCheckAllBox().nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                if (checkedLen === this.totalRecordsCount && this.totalRecordsCount || (this.parent.enableVirtualization\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote() && checkedLen === this.getData().length)) {\n                    addClass([spanEle], ['e-check']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (checkedLen === 0 || this.getCurrentBatchRecordChanges().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                }\n                if (this.parent.enableVirtualization && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.keyDownHandler = function (e) {\n        // Below are keyCode for command key in MAC OS. Safari/Chrome(91-Left command, 93-Right Command), Opera(17), FireFox(224)\n        if ((Browser.info.name === ('chrome' || 'safari') && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = true;\n        }\n    };\n    Selection.prototype.keyUpHandler = function (e) {\n        if ((Browser.info.name === ('chrome' || 'safari') && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = false;\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.actualTarget = target;\n        this.isInteracted = true;\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch ||\n            (this.isMacOS && this.cmdKeyPressed);\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        this.checkSelectAllClicked = checkWrap && checkWrap.querySelectorAll('.e-checkselectall') ? true : false;\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        this.drawBorders();\n        target = parentsUntil(target, 'e-rowcell');\n        if ((target && target.parentElement.classList.contains('e-row') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                }\n            }\n            else {\n                var gObj = this.parent;\n                var rIndex = 0;\n                if (isGroupAdaptive(gObj)) {\n                    var uid = target.parentElement.getAttribute('data-uid');\n                    rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n                }\n                else {\n                    rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                }\n                if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                if (!this.mUPTarget || !this.mUPTarget.isEqualNode(target)) {\n                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                }\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        if (isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            this.preventFocus = false;\n        }\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        if (!this.selectionSettings.enableSimpleMultiRowSelection) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n                (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                    || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n        }\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, this.selectionSettings.enableToggle);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, this.selectionSettings.enableToggle);\n            if (this.selectedRowCellIndexes.length) {\n                this.updateAutoFillPosition();\n            }\n            this.drawBorders();\n        }\n        else if (this.isMultiShiftRequest) {\n            if (this.parent.isCheckBoxSelection || (!this.parent.isCheckBoxSelection &&\n                !closest(this.target, '.e-rowcell').classList.contains('e-gridchkbox'))) {\n                this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            }\n            else {\n                this.addRowsToSelection([rowIndex]);\n            }\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.updateAutoFillPosition();\n            this.drawBorders();\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n            this.hideBorders();\n        }\n        this.isDragged = false;\n    };\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute('aria-rowindex'));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.getFrozenColumns() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space');\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.e-rowcell'))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.e-rowcell'))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = prev.rowIndex ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n        }\n        if (this.parent.getFrozenColumns()) {\n            var cIdx = Number(e.element.getAttribute('aria-colindex'));\n            prev.cellIndex = prev.cellIndex ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n            cellIndex = cIdx;\n        }\n        if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n            rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n            return;\n        }\n        this.preventFocus = true;\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n            case 'tab':\n                if (this.parent.editSettings.allowNextRowEdit) {\n                    this.selectRow(rowIndex);\n                }\n                break;\n        }\n        this.preventFocus = false;\n        this.positionBorders();\n        this.updateAutoFillPosition();\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.parent.getRows().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check' && !this.selectionSettings.persistSelection) {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var detailIndentCell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            var dragdropIndentCell = row.querySelector('.e-rowdragdrop');\n            if (detailIndentCell) {\n                cells.push(detailIndentCell);\n            }\n            if (dragdropIndentCell) {\n                cells.push(dragdropIndentCell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    Selection.prototype.addEventListener_checkbox = function () {\n        var _this = this;\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.resizeEndFn = function () {\n            _this.updateAutoFillPosition();\n            _this.drawBorders();\n        };\n        this.resizeEndFn.bind(this);\n        this.parent.addEventListener(events.resizeStop, this.resizeEndFn);\n    };\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.click, this.clickHandler);\n    };\n    Selection.prototype.dataReady = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.disableUI = true;\n            this.clearSelection();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.selectRowIndex = function (index) {\n        this.parent.isSelectedRowIndexUpdating = true;\n        this.parent.selectedRowIndex = index;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](grid/#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    Search.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'searching') {\n            this.parent.setProperties({ searchSettings: { key: '' } }, true);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = true;\n        });\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = false;\n        });\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.columnModel, function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.setVisible,\n                arg1: columns\n            });\n            return;\n        }\n        var currentViewCols = this.parent.getColumns();\n        columns = isNullOrUndefined(columns) ? currentViewCols : columns;\n        if (this.parent.allowSelection && this.parent.getSelectedRecords().length) {\n            this.parent.clearSelection();\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var colsInCurrentView = columns.filter(function (col1) { return (currentViewCols.some(function (col2) { return col1.field === col2.field; })); });\n            if (colsInCurrentView.length) {\n                this.parent.notify(events.columnVisibilityChanged, columns);\n            }\n        }\n        else {\n            this.parent.notify(events.columnVisibilityChanged, columns);\n        }\n        if (this.parent.columnQueryMode !== 'All') {\n            this.parent.refresh();\n        }\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed, textWrapRefresh } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function (uiupdate) {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (uiupdate) {\n            this.widthService.setWidthToColumns();\n        }\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().firstChild;\n        if (this.parent.frozenRows && this.parent.height !== 'auto') {\n            mHdrHeight =\n                this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n            content.style.height = formatUnit(this.parent.height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(this.parent.height);\n        }\n        this.ensureOverflow(content);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n        this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](grid/#height/) must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(textWrapRefresh, this.wireEvents, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(textWrapRefresh, this.wireEvents);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.frozenColumns) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var top = target.scrollTop;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onWheelScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var cont;\n            var mHdr;\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.getHeaderContent().contains(e.target)) {\n                mHdr = _this.parent.getFrozenColumns() ?\n                    _this.parent.getHeaderContent().querySelector('.e-movableheader') : _this.parent.getHeaderContent().firstChild;\n                if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                    return;\n                }\n                e.preventDefault();\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.previousValues.left = left;\n            }\n            else {\n                cont = _this.parent.getContent().querySelector('.e-frozencontent');\n                if (_this.previousValues.top === top && (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)\n                    || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n                    return;\n                }\n                e.preventDefault();\n                cont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.previousValues.top = top;\n            }\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.getFrozenColumns();\n            this.content = this.parent.getContent().firstChild;\n            this.header = this.parent.getHeaderContent().firstChild;\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (frzCols) {\n                EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n                EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n                EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n                EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n                EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            if (!_this.parent.enableVirtualization) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.getFrozenColumns()) {\n                        addClass(_this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if ((_this.parent.frozenRows > 0 || _this.parent.frozenColumns > 0) && _this.header.querySelector('.e-movableheader')) {\n                    _this.header.querySelector('.e-movableheader').scrollLeft = _this.previousValues.left;\n                }\n                else {\n                    _this.header.scrollLeft = _this.previousValues.left;\n                }\n                _this.content.scrollLeft = _this.previousValues.left;\n                _this.content.scrollTop = _this.previousValues.top;\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.frozenColumns && _this.header.querySelector('.e-movableheader')) {\n                _this.header.querySelector('.e-movableheader').scrollLeft =\n                    _this.content.querySelector('.e-movablecontent').scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        if (this.parent.getFrozenColumns()) {\n            content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n            if (content.querySelector('.e-movablecontent').style.overflowY === 'scroll') {\n                this.setPadding();\n            }\n        }\n        else {\n            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        var width = 'width';\n        this.setWidth(!isNullOrUndefined(e.properties[width]));\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n        removeClass([this.parent.getContent().firstChild], 'e-content');\n        //Remove height\n        this.parent.getContent().firstChild.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\nimport { ValueFormatter } from '../services/value-formatter';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function (cultureName) {\n        var valueFormatter = new ValueFormatter(cultureName);\n        if (this.format && (this.format.skeleton || this.format.format)) {\n            this.formatFn = valueFormatter.getFormatFunction(this.format);\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, remove, EventHandler, isUndefined, closest, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        EventHandler.add(this.parent.element, 'keydown', this.pasteHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.click, this.clickHandler);\n        EventHandler.remove(this.parent.element, 'keydown', this.pasteHandler);\n    };\n    Clipboard.prototype.clickHandler = function (e) {\n        var target = e.target;\n        target = parentsUntil(target, 'e-rowcell');\n    };\n    Clipboard.prototype.pasteHandler = function (e) {\n        var _this = this;\n        if (e.keyCode === 86 && e.ctrlKey && !this.parent.isEdit) {\n            var target_1 = closest(document.activeElement, '.e-rowcell');\n            if (!target_1) {\n                return;\n            }\n            this.activeElement = document.activeElement;\n            this.clipBoardTextArea.value = '';\n            var x_1 = window.scrollX;\n            var y_1 = window.scrollY;\n            this.clipBoardTextArea.focus();\n            setTimeout(function () {\n                _this.activeElement.focus();\n                window.scrollTo(x_1, y_1);\n                _this.paste(_this.clipBoardTextArea.value, parseInt(target_1.parentElement.getAttribute('aria-rowindex'), 10), parseInt(target_1.getAttribute('aria-colindex'), 10));\n            }, 10);\n        }\n    };\n    /**\n     * Paste data from clipboard to selected cells.\n     * @param {boolean} data - Specifies the date for paste.\n     * @param {boolean} rowIndex - Specifies the row index.\n     * @param {boolean} colIndex - Specifies the column index.\n     */\n    Clipboard.prototype.paste = function (data, rowIndex, colIndex) {\n        var grid = this.parent;\n        var cIdx = colIndex;\n        var rIdx = rowIndex;\n        var col;\n        var value;\n        var isAvail;\n        if (!grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n            grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n            return;\n        }\n        var rows = data.split('\\n');\n        var cols;\n        var dataRows = grid.getDataRows();\n        var mRows;\n        var isFrozen = this.parent.getFrozenColumns();\n        if (isFrozen) {\n            mRows = grid.getMovableDataRows();\n        }\n        for (var r = 0; r < rows.length; r++) {\n            cols = rows[r].split('\\t');\n            cIdx = colIndex;\n            if ((r === rows.length - 1 && rows[r] === '') || isUndefined(grid.getRowByIndex(rIdx))) {\n                cIdx++;\n                break;\n            }\n            for (var c = 0; c < cols.length; c++) {\n                isAvail = grid.getCellFromIndex(rIdx, cIdx);\n                if (isFrozen) {\n                    var fTr = dataRows[rIdx];\n                    var mTr = mRows[rIdx];\n                    isAvail = !fTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') ?\n                        mTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') : true;\n                }\n                if (!isAvail) {\n                    cIdx++;\n                    break;\n                }\n                col = grid.getColumnByIndex(cIdx);\n                value = col.getParser() ? col.getParser()(cols[c]) : cols[c];\n                if (col.allowEditing && !col.isPrimaryKey && !col.template) {\n                    var args = {\n                        column: col,\n                        data: value,\n                    };\n                    this.parent.trigger(events.beforePaste, args);\n                    if (grid.editModule) {\n                        if (col.type === 'number') {\n                            this.parent.editModule.updateCell(rIdx, col.field, parseInt(args.data, 10));\n                        }\n                        else {\n                            grid.editModule.updateCell(rIdx, col.field, args.data);\n                        }\n                    }\n                }\n                cIdx++;\n            }\n            rIdx++;\n        }\n        grid.selectionModule.selectCellsByRange({ rowIndex: rowIndex, cellIndex: colIndex }, { rowIndex: rIdx - 1, cellIndex: cIdx - 1 });\n        var cell = this.parent.getCellFromIndex(rIdx - 1, cIdx - 1);\n        if (cell) {\n            classList(cell, ['e-focus', 'e-focused'], []);\n        }\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.getFrozenColumns();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell')));\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            querySelectorAll('.e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]].querySelectorAll('.e-cellselectionbackground')));\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    this.copyContent += cells[j].textContent;\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var isBox = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort(function (a, b) { return a - b; });\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue, getValue, isBlazor, blazorTemplates } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, append, updateBlazorTemplate, classList, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, isGroupAdaptive, refreshForeignData } from './util';\nimport { getRowHeight, setColumnIndex } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    __decorate([\n        Property(false)\n    ], SortDescriptor.prototype, \"isFromGroup\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"uid\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"isForeignKey\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"enableCaseSensitivity\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    __decorate([\n        Property('Default')\n    ], SelectionSettings.prototype, \"checkboxMode\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"enableSimpleMultiRowSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"enableToggle\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Top')\n    ], EditSettings.prototype, \"newRowPosition\", void 0);\n    __decorate([\n        Property({})\n    ], EditSettings.prototype, \"dialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowNextRowEdit\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.media = {};\n        _this.freezeRefresh = Component.prototype.refresh;\n        /** @hidden */\n        _this.isVirtualAdaptive = false;\n        /** @hidden */\n        _this.vRows = [];\n        /** @hidden */\n        _this.vcRows = [];\n        /** @hidden */\n        _this.vGroupOffsets = {};\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.lockcolPositionCount = 0;\n        /** @hidden */\n        _this.prevPageMoving = false;\n        /** @hidden */\n        _this.pageTemplateChange = false;\n        // enable/disable logger for MVC & Core\n        _this.enableLogger = true;\n        _this.needsID = true;\n        Grid_1.Inject(Selection);\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    Grid_1 = Grid;\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    Grid.prototype.getPersistData = function () {\n        var _this = this;\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex', 'scrollPosition'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: [], scrollPosition: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands', 'dataSource', 'headerText'];\n        keyEntity.forEach(function (value) {\n            var currentObject = _this[value];\n            for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        });\n        this.pageSettings.template = undefined;\n        this.pageTemplateChange = !isNullOrUndefined(this.pagerTemplate);\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n        if (this.enableLogger) {\n            modules.push({ member: 'logger', args: [this] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        /* tslint:disable */\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.freezeRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No Matches Found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Autofit all columns',\n            autoFit: 'Autofit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No Matches Found',\n            ClearFilter: 'Clear Filter',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            DateTimeFilter: 'DateTime Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H'\n        };\n        /* tslint:enable */\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.log(['module_missing', 'promise_enabled', 'locale_missing', 'check_datasource_columns']);\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        if (isBlazor()) {\n            this.renderComplete();\n        }\n        createSpinner({ target: this.element }, this.createElement);\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        if (this.getDataModule().dataManager.dataSource.offline === true || this.getDataModule().dataManager.dataSource.url === undefined) {\n            this.isVirtualAdaptive = true;\n        }\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.getMediaColumns();\n        setColumnIndex(this.columns);\n        this.checkLockColumns(this.columns);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Manually showed spinner needs to hide by `hideSpinnner`.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia) && (isNullOrUndefined(gcol[index].visible) || gcol[index].visible)) {\n                        this.pushMediaColumn(gcol[index], index);\n                    }\n                }\n            }\n        }\n    };\n    Grid.prototype.pushMediaColumn = function (col, index) {\n        this.mediaCol.push(col);\n        this.media[col.uid] = window.matchMedia(col.hideAtMedia);\n        this.mediaQueryUpdate(index, this.media[col.uid]);\n        this.media[col.uid].addListener(this.mediaQueryUpdate.bind(this, index));\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateMediaColumns = function (col) {\n        if (!this.enableColumnVirtualization) {\n            var index = this.getColumnIndexByUid(col.uid);\n            for (var i = 0; i < this.mediaCol.length; i++) {\n                if (col.uid === this.mediaCol[i].uid) {\n                    this.mediaCol.splice(i, 1);\n                    return;\n                }\n            }\n            this.pushMediaColumn(col, index);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        if (this.mediaCol.some(function (mediaColumn) { return mediaColumn.uid === col.uid; })) {\n            col.visible = e.matches;\n            if (this.isInitialLoad) {\n                this.invokedFromMedia = true;\n                if (col.visible) {\n                    this.showHider.show(col.headerText, 'headerText');\n                }\n                else {\n                    this.showHider.hide(col.headerText, 'headerText');\n                }\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        if (this.aggregates.length && this.element.scrollHeight > this.height) {\n            var footerContent = this.element.querySelector('.e-gridfooter');\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        var checkboxColumn = this.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length && this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            this.isCheckBoxSelection = false;\n            this.refreshHeader();\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        this.element.innerHTML = '';\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    Grid.prototype.enableBoxSelection = function () {\n        if (this.enableAutoFill) {\n            this.selectionSettings.cellSelectionMode = 'BoxWithBorder';\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    // tslint:disable-next-line:max-func-body-length\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var freezeRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        this.log('module_missing');\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    if (this.pageTemplateChange) {\n                        this.pageTemplateChange = false;\n                        break;\n                    }\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.pageSize)\n                        && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || !isNullOrUndefined(oldProp.pageSettings) &&\n                            ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                                && !this.enableColumnVirtualization && !this.enableVirtualization\n                                && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'enableAutoFill':\n                    if (this.selectionModule) {\n                        this.enableBoxSelection();\n                        this.selectionModule.updateAutoFillPosition();\n                    }\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                case 'enableVirtualization':\n                case 'currencyCode':\n                case 'locale':\n                    this.log('frozen_rows_columns');\n                    freezeRefresh = true;\n                    requireGridRefresh = true;\n                    break;\n                case 'query':\n                    requireRefresh = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, requireGridRefresh);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            if (freezeRefresh || this.frozenColumns || this.frozenRows) {\n                this.freezeRefresh();\n            }\n            else {\n                this.refresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n            this.maintainSelection(newProp.selectedRowIndex);\n        }\n    };\n    /* tslint:disable */\n    Grid.prototype.extendedPropertyChange = function (prop, newProp, requireGridRefresh) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar && this.toolbarModule) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems && this.contextMenuModule) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu && this.columnMenuModule) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                var pending_1 = this.getDataModule().getState();\n                if (Object.getPrototypeOf(newProp).deepWatch) {\n                    var pKeyField = this.getPrimaryKeyFieldNames()[0];\n                    for (var i = 0, props = Object.keys(newProp.dataSource); i < props.length; i++) {\n                        this.setRowData(getValue(pKeyField, this.dataSource[props[i]]), this.dataSource[props[i]]);\n                    }\n                }\n                else if (pending_1.isPending) {\n                    var gResult_1 = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    (pending_1.group || []).forEach(function (name) {\n                        gResult_1 = DataUtil.group(gResult_1, name, pending_1.aggregates || []);\n                    });\n                    this.dataSource = {\n                        result: gResult_1, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    this.getDataModule().setState({});\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    if (!requireGridRefresh) {\n                        this.renderModule.refresh();\n                    }\n                }\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n            case 'selectedRowIndex':\n                if (!this.isSelectedRowIndexUpdating) {\n                    this.selectRow(newProp.selectedRowIndex);\n                }\n                this.isSelectedRowIndexUpdating = false;\n                break;\n        }\n    };\n    Grid.prototype.maintainSelection = function (index) {\n        var _this = this;\n        if (index !== -1) {\n            var fn_1 = function () {\n                _this.selectRow(index);\n                _this.off(events.contentReady, fn_1);\n            };\n            this.on(events.contentReady, fn_1, this);\n        }\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        var filterSettings = 'filterSettings';\n        if (prop[filterSettings] && this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            if (this.allowSorting || (this.allowGrouping && this.groupSettings.showDropArea) || this.allowReordering) {\n                row.classList.remove('e-defaultcursor');\n            }\n            else {\n                row.classList.add('e-defaultcursor');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateFrozenColumns();\n        this.updateLockableColumns();\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        var cols = this.columnModel;\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].isFrozen) {\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n        }\n    };\n    Grid.prototype.updateLockableColumns = function () {\n        var cols = this.columnModel;\n        var frozenCount = 0;\n        var movableCount = 0;\n        var frozenColumns = this.getFrozenColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].lockColumn) {\n                if (i < frozenColumns) {\n                    cols.splice(frozenCount, 0, cols.splice(i, 1)[0]);\n                    frozenCount++;\n                }\n                else {\n                    cols.splice(frozenColumns + movableCount, 0, cols.splice(i, 1)[0]);\n                    movableCount++;\n                }\n            }\n        }\n    };\n    Grid.prototype.checkLockColumns = function (cols) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                this.checkLockColumns(cols[i].columns);\n            }\n            else if (cols[i].lockColumn) {\n                this.lockcolPositionCount++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getQuery = function () {\n        return this.query;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand'))) && !this.isEdit) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!cell) {\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var frzCols = this.getFrozenColumns();\n                var isMovable = frzCols ? cellIndex >= frzCols : false;\n                var rows = (isMovable ?\n                    this.contentModule.getMovableRows() : this.contentModule.getRows());\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = {};\n                var column = void 0;\n                if (Object.keys(rowsObject).length) {\n                    rowData = rowsObject[0].data;\n                    column = rowsObject[0].cells[isMovable ? cellIndex - frzCols : cellIndex].column;\n                }\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderTable().querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                dRows.push(rows[i]);\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        var rows = [].slice.call(this.getContent().querySelector('.e-movablecontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var fieldIdx;\n        var col;\n        var tr;\n        var mTr;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var selectedRow = {};\n        var movableSelectedRow = {};\n        var rowObjects = this.contentModule.getRows();\n        var movableRowObjects = this.contentModule.getMovableRows();\n        fieldIdx = this.getColumnIndexByField(field);\n        if (this.groupSettings.columns.length > 0 || this.childGrid || this.detailTemplate) {\n            fieldIdx = fieldIdx + 1;\n        }\n        col = this.getColumnByField(field);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        movableSelectedRow = movableRowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        tr = !isNullOrUndefined(selectedRow) ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        mTr = !isNullOrUndefined(movableSelectedRow) ? this.element.querySelector('[data-uid=' + movableSelectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var td = !isNullOrUndefined(tr.childNodes[fieldIdx]) ?\n                tr.childNodes[fieldIdx] : mTr.childNodes[fieldIdx - this.frozenColumns];\n            if (!isNullOrUndefined(td)) {\n                var sRow = selectedRow[cells][fieldIdx];\n                var mRow = void 0;\n                if (this.frozenColumns) {\n                    mRow = movableSelectedRow[cells][fieldIdx - this.frozenColumns];\n                }\n                cell.refreshTD(td, !isNullOrUndefined(sRow) ? sRow : mRow, selectedRow[rowData], { index: selectedRow[rowIdx] });\n                if (this.aggregates.length > 0) {\n                    this.notify(events.refreshFooterRenderer, {});\n                    if (this.groupSettings.columns.length > 0) {\n                        this.notify(events.groupAggregates, {});\n                    }\n                }\n                /* tslint:disable:no-string-literal */\n                if (!isNullOrUndefined(movableSelectedRow) && !isNullOrUndefined(movableSelectedRow['changes'])) {\n                    movableSelectedRow['changes'][field] = value;\n                }\n                /* tslint:disable:no-string-literal */\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *  @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     *  @param {Object} rowData - To update new data for the particular row.\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rwdata = 'data';\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var selectedRow;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        if (this.groupSettings.columns.length > 0 && this.aggregates.length > 0) {\n            rowObjects = rowObjects.filter(function (row) { return row.isDataRow; });\n        }\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n            if (this.aggregates.length > 0) {\n                this.notify(events.refreshFooterRenderer, {});\n                if (this.groupSettings.columns.length > 0) {\n                    this.notify(events.groupAggregates, {});\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getDataRows()[rowIndex] && this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getMovableDataRows()[rowIndex] &&\n            this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - this.getFrozenColumns()];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.getFrozenColumns()) {\n            if (!row) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                return row;\n            }\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        return this.contentModule.getMovableRows();\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n    };\n    /**\n     * Gets a column header by UID.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns().concat(this.getStackedColumns(this.columns)), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getStackedColumns = function (columns, stackedColumn) {\n        if (stackedColumn === void 0) { stackedColumn = []; }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.columns) {\n                stackedColumn.push(column);\n                this.getStackedColumns(column.columns, stackedColumn);\n            }\n        }\n        return stackedColumn;\n    };\n    /**\n     * Gets a column index by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        if (this.allowRowDragAndDrop && this.allowResizing) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditTemplate = function () {\n        return this.editTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        for (var k = 0; k < this.columnModel.length; k++) {\n            if (this.columnModel[k].isPrimaryKey) {\n                keys.push(this.columnModel[k].field);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        this.headerModule.refreshUI();\n        this.updateStackedFilter();\n        this.renderModule.refresh();\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowCellIndexes : [];\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     * @isGenericType true\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule ? this.selectionModule.getSelectedRecords() : [];\n    };\n    /**\n     * Gets the data module.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var col = this.columns;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (col[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen && cols[i].visible) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        if (this.pagerModule) {\n            this.pagerModule.goToPage(pageNo);\n        }\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        if (this.pagerModule) {\n            this.pagerModule.updateExternalMessage(message);\n        }\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        if (this.sortModule) {\n            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        if (this.sortModule) {\n            this.sortModule.clearSorting();\n        }\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        if (this.sortModule) {\n            this.sortModule.removeSortColumn(field);\n        }\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        if (this.filterModule) {\n            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n        }\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function () {\n        if (this.filterModule) {\n            this.filterModule.clearFiltering();\n        }\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        if (this.filterModule) {\n            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n        }\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRow(index, isToggle);\n        }\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRows(rowIndexes);\n        }\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearSelection();\n        }\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCell(cellIndex, isToggle);\n        }\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Grid.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        this.selectionModule.selectCellsByRange(startIndex, endIndex);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        if (this.searchModule) {\n            this.searchModule.search(searchString);\n        }\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./#printmode).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        if (this.printModule) {\n            this.printModule.print();\n        }\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        if (this.editModule) {\n            this.editModule.deleteRecord(fieldname, data);\n        }\n    };\n    /**\n     * Starts edit the selected row. At least one row must be selected before invoking this method.\n     * `editSettings.allowEditing` should be true.\n     * @return {void}\n     */\n    Grid.prototype.startEdit = function () {\n        if (this.editModule) {\n            this.editModule.startEdit();\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        if (this.editModule) {\n            this.editModule.endEdit();\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        if (this.editModule) {\n            this.editModule.closeEdit();\n        }\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        if (this.editModule) {\n            this.editModule.addRecord(data, index);\n        }\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        if (this.editModule) {\n            this.editModule.deleteRow(tr);\n        }\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Grid.prototype.editCell = function (index, field) {\n        if (this.editModule) {\n            this.editModule.editCell(index, field);\n        }\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Grid.prototype.saveCell = function () {\n        if (this.editModule) {\n            this.editModule.saveCell();\n        }\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Grid.prototype.updateCell = function (rowIndex, field, value) {\n        if (this.editModule) {\n            this.editModule.updateCell(rowIndex, field, value);\n        }\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Grid.prototype.updateRow = function (index, data) {\n        if (this.editModule) {\n            this.editModule.updateRow(index, data);\n        }\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Grid.prototype.getBatchChanges = function () {\n        if (this.editModule) {\n            return this.editModule.getBatchChanges();\n        }\n        return {};\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     */\n    Grid.prototype.enableToolbarItems = function (items, isEnable) {\n        if (this.toolbarModule) {\n            this.toolbarModule.enableItems(items, isEnable);\n        }\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        if (this.clipboardModule) {\n            this.clipboardModule.copy(withHeader);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail() && !this.isRowDragable()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = 0;\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (this.enableColumnVirtualization) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isDetail()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isRowDragable()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n        }\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isRowDragable = function () {\n        return this.allowRowDragAndDrop && !this.rowDropSettings.targetID;\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumns(fromFName, toFName);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByIndex multiple times,\n     * then you won't get the same results every time.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByIndex(fromIndex, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByTargetIndex multiple times,\n     * then you will get the same results every time.\n     * @param  {string} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByTargetIndex(fieldName, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid Row position with given indexes.\n     * @param  {number} fromIndexes - Defines the origin Indexes.\n     * @param  {number} toIndex - Defines the destination Index.\n     * @return {void}\n     */\n    Grid.prototype.reorderRows = function (fromIndexes, toIndex) {\n        if (this.rowDragAndDropModule) {\n            this.rowDragAndDropModule.reorderRows(fromIndexes, toIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.refreshDataSource = function (e, args) {\n        this.notify('refreshdataSource', e);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.disableRowDD = function (enable) {\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerRows = headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell');\n        var rows = this.getRows();\n        var disValue = enable ? 'none' : '';\n        setStyleAttribute(headerTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        setStyleAttribute(contentTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        for (var i = 0; i < this.getRows().length; i++) {\n            var ele = rows[i].firstElementChild;\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n        for (var j = 0; j < headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell').length; j++) {\n            var ele = headerRows[j];\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        if (this.resizeModule) {\n            this.resizeModule.autoFitColumns(fieldNames);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.renderColumnChooser(x, y, target);\n        }\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var _this = this;\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending' });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    if (column) {\n                        column.visible = false;\n                    }\n                    else {\n                        this_1.log('initial_action', { moduleName: 'group', columnName: gCols[i] });\n                    }\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            sCols.forEach(function (col) {\n                _this.sortedColumns.push(col.field);\n            });\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        this.editTemplateFn = templateCompiler(this.editSettings.template);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n        this.enableBoxSelection();\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = this.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = this.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, this.createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(this.createElement('span'));\n        append([content, this.createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var td = element;\n        var table = headerTable.contains(element) ? htable : ctable;\n        var ele = headerTable.contains(element) ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (this.prevElement !== element || e.type === 'mouseout') {\n                this.toolTipObj.close();\n            }\n            var tagName = e.target.tagName;\n            var elemNames = ['A', 'BUTTON', 'INPUT'];\n            if (element && e.type !== 'mouseout' && !(Browser.isDevice && elemNames.indexOf(tagName) !== -1)) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.prevElement = element;\n                    this.toolTipObj.open(element);\n                }\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = this.createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = this.createElement('tr');\n        var mytd = this.createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    Grid.prototype.onKeyPressed = function (e) {\n        if (e.action === 'tab' || e.action === 'shiftTab') {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.element, 'dblclick', this.dblClickHandler, this);\n        EventHandler.add(this.element, 'keydown', this.keyPressHandler, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(this.element, 'mouseout', this.mouseMoveHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'mouseout', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'keydown', this.keyPressHandler);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.on(events.keyPressed, this.onKeyPressed, this);\n        this.on(events.contentReady, this.blazorTemplate, this);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.off(events.keyPressed, this.onKeyPressed);\n    };\n    Grid.prototype.blazorTemplate = function () {\n        if (isBlazor()) {\n            for (var i = 0; i < this.columnModel.length; i++) {\n                if (this.columnModel[i].template) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid, 'Template', this.columnModel[i], false);\n                }\n                if (this.columnModel[i].headerTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'headerTemplate', 'HeaderTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type == 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    var fieldName = this.columnModel[i].field;\n                    var tempID = this.element.id + this.columnModel[i].uid + 'filterTemplate';\n                    var filteredColumns = this.filterSettings.columns;\n                    for (var k = 0; k < filteredColumns.length; k++) {\n                        if (fieldName == filteredColumns[k].field) {\n                            blazorTemplates[tempID][0][fieldName] = filteredColumns[k].value;\n                        }\n                    }\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type != 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i]);\n                }\n            }\n            if (this.groupSettings.captionTemplate) {\n                updateBlazorTemplate(this.element.id + 'captionTemplate', 'CaptionTemplate', this.groupSettings);\n            }\n            var guid = 'guid';\n            for (var k = 0; k < this.aggregates.length; k++) {\n                for (var j = 0; j < this.aggregates[k].columns.length; j++) {\n                    if (this.aggregates[k].columns[j].footerTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'footerTemplate', 'FooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupFooterTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupFooterTemplate', 'GroupFooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupCaptionTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupCaptionTemplate', 'GroupCaptionTemplate', this.aggregates[k].columns[j]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @hidden\n     * @isGenericType true\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        if (isGroupAdaptive(this)) {\n            return isNullOrUndefined(this.currentViewData.records) ?\n                this.currentViewData : this.currentViewData.records;\n        }\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, 'e-gridcontent') ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n            e.preventDefault();\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var dataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            dataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        if (dataRow) {\n            this.trigger(events.recordDoubleClick, args);\n        }\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        var relatedTarget = e.relatedTarget;\n        var ariaOwns = relatedTarget ? relatedTarget.getAttribute('aria-owns') : null;\n        if ((!relatedTarget || (!parentsUntil(relatedTarget, 'e-grid') &&\n            (!isNullOrUndefined(ariaOwns) &&\n                (ariaOwns)) !== e.target.getAttribute('aria-owns')))\n            && !this.keyPress && this.isEdit && !Browser.isDevice) {\n            if (this.editSettings.mode === 'Batch') {\n                this.editModule.saveCell();\n                this.notify(events.editNextValCell, {});\n            }\n            if (this.editSettings.mode === 'Normal') {\n                this.editModule.editFormValidate();\n            }\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mergePersistGridData = function () {\n        var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj = JSON.parse(data);\n            if (this.enableVirtualization) {\n                dataObj.pageSettings.currentPage = 1;\n            }\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        setColumnIndex(this[key]);\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var _this = this;\n        storedColumn.forEach(function (col, index, arr) {\n            var localCol = columns.filter(function (tCol) { return tCol.index === col.index; })[0];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    _this.mergeColumns(col.columns, localCol.columns);\n                    arr[index] = extend(localCol, col, true);\n                }\n                else {\n                    arr[index] = extend(localCol, col, true);\n                }\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyPressHandler = function (e) {\n        var presskey = extend(e, { cancel: false, });\n        this.trigger(\"keyPressed\", presskey);\n        if (presskey.cancel === true) {\n            e.stopImmediatePropagation();\n        }\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        this.keyPress = e.action !== 'space';\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        setColumnIndex(this.columns);\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.isPreventScrollEvent = true;\n        this.updateColumnObject();\n        this.checkLockColumns(this.getColumns());\n        this.refresh();\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n    /* tslint:disable-next-line:no-any */\n    workbook, isBlob) {\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob) : null;\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, isBlob) {\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob) : null;\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, pdfDoc, isBlob) {\n        return this.pdfExportModule ? this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) : null;\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.groupColumn(columnName);\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.groupExpandAll = function () {\n        if (this.groupModule) {\n            this.groupModule.expandAll();\n        }\n    };\n    /**\n    * Collapses all the grouped rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.groupCollapseAll = function () {\n        if (this.groupModule) {\n            this.groupModule.collapseAll();\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    // public expandCollapseRows(target: Element): void {\n    //     if (this.groupModule) {\n    //         this.groupModule.expandCollapseRows(target);\n    //     }\n    // }\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearGrouping = function () {\n        if (this.groupModule) {\n            this.groupModule.clearGrouping();\n        }\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.ungroupColumn(columnName);\n        }\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    Grid.prototype.openColumnChooser = function (x, y) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.openColumnChooser(x, y);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    // public detailCollapse(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.collapse(target);\n    //     }\n    // }\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.detailCollapseAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.collapseAll();\n        }\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    // public detailExpand(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.expand(target);\n    //     }\n    // }\n    /**\n    * Expands all the detail rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.detailExpandAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.expandAll();\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Grid.prototype.clearCellSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearCellSelection();\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Grid.prototype.clearRowSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearRowSelection();\n        }\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectCells = function (rowCellIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCells(rowCellIndexes);\n        }\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Grid.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRowsByRange(startIndex, endIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    //tslint:disable-next-line:no-any\n    Grid.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * @hidden\n     * @private\n     */\n    Grid.prototype.log = function (type, args) {\n        this.loggerModule ? this.loggerModule.log(type, args) : (function () { return 0; })();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.applyBiggerTheme = function (element) {\n        if (this.element.classList.contains('e-bigger')) {\n            element.classList.add('e-bigger');\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getPreviousRowData = function () {\n        var previousRowData = this.getRowsObject()[this.getRows().length - 1].data;\n        return previousRowData;\n    };\n    /**\n     * Hides the scrollbar placeholder of Grid content when grid content is not overflown.\n     * @return {void}\n     */\n    Grid.prototype.hideScroll = function () {\n        var content = this.getContent().querySelector('.e-content');\n        var cTable = content.querySelector('.e-movablecontent') ? content.querySelector('.e-movablecontent') : content;\n        var fTable = content.querySelector('.e-frozencontent') ? content.querySelector('.e-frozencontent') : content;\n        if (cTable.scrollHeight <= cTable.clientHeight && fTable.scrollHeight <= fTable.clientHeight) {\n            this.scrollModule.removePadding();\n            cTable.style.overflowY = 'auto';\n        }\n        if (this.frozenColumns && cTable.scrollWidth <= cTable.clientWidth) {\n            cTable.style.overflowX = 'auto';\n            cTable.style.overflowY = 'auto';\n            this.notify(events.frozenHeight, 0);\n        }\n    };\n    /**\n     * Get row index by primary key or row data.\n     * @param  {string} value - Defines the primary key value.\n     * @param  {Object} value - Defines the row data.\n     */\n    Grid.prototype.getRowIndexByPrimaryKey = function (value) {\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        value = typeof value === 'object' ? value[pkName] : value;\n        for (var i = 0; i < this.getRowsObject().length; i++) {\n            if (this.getRowsObject()[i].data[pkName] === value) {\n                return this.getRowsObject()[i].index;\n            }\n        }\n        return -1;\n    };\n    ;\n    /**\n    * @hidden\n    */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByFieldFromAllCols = function (field) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        this.columnModel.forEach(function (gCol) {\n            if (field === gCol.field) {\n                column = gCol;\n            }\n        });\n        return column;\n    };\n    /**\n    * @hidden\n    */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByUidFromAllCols = function (uid) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        this.columnModel.forEach(function (gCol) {\n            if (uid === gCol.uid) {\n                column = gCol;\n            }\n        });\n        return column;\n    };\n    var Grid_1;\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableAutoFill\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Grid.prototype, \"hierarchyPrintMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Property('All')\n    ], Grid.prototype, \"columnQueryMode\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportDetailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStartHelper\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"commandClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"keyPressed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePaste\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    Grid = Grid_1 = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.currentTarget = null;\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction, isFromGroup: sCol.isFromGroup });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: columnName });\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;        \n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting',\n                type: events.actionBegin, target: this.currentTarget\n            } : {\n                requestType: 'sorting', type: events.actionBegin, cancel: false,\n                target: this.currentTarget\n            };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        var _this = this;\n        this.sortedColumns.length = 0;\n        this.sortSettings.columns.forEach(function (e) {\n            if (!e.isFromGroup) {\n                _this.sortedColumns.push(e.field);\n            }\n        });\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin, target: this.currentTarget\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.clearSorting();\n        }\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        this.currentTarget = null;\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !e.target.classList.contains('e-stackedheadercell') &&\n            !e.target.classList.contains('e-stackedheadercelldiv') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv')) {\n            var gObj = this.parent;\n            var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n                'Descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        this.currentTarget = e.target;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (!isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                (isNullOrUndefined(header) || !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerModule.element, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = createElement('div');\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = createElement('div');\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n        this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n        this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page',\n            pagerAllDropDown: 'Items',\n            All: 'All'\n        };\n        this.containerModule = new NumericContainer(this);\n        this.pagerMessageModule = new PagerMessage(this);\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            this.pagerTemplate();\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes() && this.pagerdropdownModule) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        this.element.innerHTML = '';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    if (newProp.pageSize !== oldProp.pageSize) {\n                        this.pageSize = newProp.pageSize;\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    else {\n                        this.refresh();\n                    }\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage && this.externalMessageModule) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Pager.prototype.setPageSize = function (pageSize) {\n        this.pageSize = pageSize;\n        this.dataBind();\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function (newProp, oldProp) {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        if (newProp.currentPage !== oldProp.currentPage || newProp.pageSize !== oldProp.pageSize) {\n            var args = {\n                currentPage: this.currentPage,\n                newProp: newProp, oldProp: oldProp, cancel: false\n            };\n            this.trigger('click', args);\n            if (!args.cancel) {\n                this.refresh();\n            }\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        result = this.getPagerTemplate()(data);\n        appendChildren(this.element, result);\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            this.element.innerHTML = '';\n            this.updateTotalPages();\n            this.pagerTemplate();\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var _this = this;\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            });\n        }\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? this.convertValue(pageSizesModule) :\n            [this.pagerModule.getLocalizedLabel('All'), '5', '10', '12', '20']);\n        var defaultValue = this.pagerModule.pageSize;\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue.toString(),\n            change: this.onChange.bind(this),\n            cssClass: 'e-alldrop'\n        });\n        this.dropDownListObject.appendTo(input);\n        if (pageSizesModule.length) {\n            this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();\n        }\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n        this.addEventListener();\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel('All')) {\n            this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;\n            this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerAllDropDown');\n            e.value = this.pagerModule.pageSize;\n            if (document.getElementsByClassName('e-popup-open e-alldrop').length) {\n                document.getElementsByClassName('e-popup-open e-alldrop')[0].style.display = 'none';\n            }\n        }\n        else {\n            this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);\n            if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel('pagerDropDown')) {\n                this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerDropDown');\n            }\n        }\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: parseInt(this.dropDownListObject.value, 10) });\n    };\n    PagerDropDown.prototype.beforeValueChange = function (prop) {\n        if (typeof prop.newProp.value === 'number') {\n            var val = prop.newProp.value.toString();\n            prop.newProp.value = val;\n        }\n    };\n    PagerDropDown.prototype.convertValue = function (pageSizeValue) {\n        var item = pageSizeValue;\n        for (var i = 0; i < item.length; i++) {\n            item[i] = typeof item[i] === 'number' ? item[i].toString() : item[i];\n        }\n        return item;\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    PagerDropDown.prototype.addEventListener = function () {\n        this.dropDownListObject.on('beforeValueChange', this.beforeValueChange, this);\n    };\n    PagerDropDown.prototype.removeEventListener = function () {\n        this.dropDownListObject.off('beforeValueChange', this.beforeValueChange);\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.removeEventListener();\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        if (!isNullOrUndefined(this.element)) {\n            this.element.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        Pager.Inject(ExternalMessage, PagerDropDown);\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n        }\n        this.element = this.parent.createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        if (!this.isInitialLoad) {\n            this.pageSettings.currentPage = 1;\n        }\n    };\n    Page.prototype.addAriaAttr = function () {\n        var _this = this;\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = this.parent.createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = this.parent.createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                if (_this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n                }\n            });\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.setPageSize = function (pageSize) {\n        this.pagerObj.setPageSize(pageSize);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                if (!isNullOrUndefined(e.newProp) && !isNullOrUndefined(e.newProp.pageSize)) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.setPageSize, arg1: e.newProp.pageSize });\n                    this.pagerObj.pageSize = e.oldProp.pageSize;\n                    gObj.pageSettings.pageSize = e.newProp.pageSize;\n                }\n                else if (e.currentPage) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                    this.pagerObj.currentPage = gObj.pageSettings.currentPage === this.pagerObj.currentPage ?\n                        this.pagerObj.previousPageNo : gObj.pageSettings.currentPage;\n                }\n                this.isForceCancel = true;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.pageSettings.pageSize = this.pagerObj.pageSize;\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        this.parent.notify(events.modelChanged, {\n            requestType: 'paging',\n            previousPage: prevPage,\n            currentPage: e.currentPage,\n            type: events.actionBegin\n        });\n        this.parent.requestTypeAction = 'paging';\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.isInitialLoad = true;\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.appendTo(this.element);\n        this.isInitialLoad = false;\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        this.pagerDestroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { appendChildren } from '../base/util';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return this.parent.createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            if (data) {\n                fltrData[column.field] = data[column.field];\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            if (column.visible) {\n                var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n                var element = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                appendChildren(node, element);\n            }\n            else {\n                node.classList.add('e-hide');\n            }\n        }\n        else {\n            if (column.type !== 'checkbox') {\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    node.classList.add('e-fltrtemp');\n                    attributes(innerDIV, {\n                        'class': 'e-fltrtempdiv'\n                    });\n                    if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                        input = this.parent.createElement('input', {\n                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            attrs: { type: 'search', title: column.headerText }\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                    else {\n                        var args = { column: column, node: Element };\n                        var temp = column.filterBarTemplate.create;\n                        if (typeof temp === 'string') {\n                            temp = getValue(temp, window);\n                        }\n                        input = temp(args);\n                        if (typeof input === 'string') {\n                            var div = this.parent.createElement('div');\n                            div.innerHTML = input;\n                            input = div.firstChild;\n                        }\n                        attributes(innerDIV, {\n                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            title: column.headerText,\n                            id: column.field + '_filterBarcell',\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                }\n                else {\n                    attributes(innerDIV, {\n                        'class': 'e-filterdiv e-fltrinputdiv'\n                    });\n                    input = this.parent.createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n                        attrs: {\n                            type: 'search', title: column.headerText + cell.attributes.title,\n                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                        }\n                    });\n                    innerDIV.appendChild(input);\n                    var args = {\n                        element: input, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.createInput(args, this.parent.createElement);\n                }\n                //TODO: apply intial filtering\n                if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                    input.setAttribute('disabled', 'true');\n                    input.classList.add('e-disable');\n                }\n                if (!column.visible) {\n                    node.classList.add('e-hide');\n                }\n                this.appendHtml(node, innerDIV);\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    var templateWrite = column.filterBarTemplate.write;\n                    var args = { element: input, column: column };\n                    if (typeof templateWrite === 'string') {\n                        templateWrite = getValue(templateWrite, window);\n                    }\n                    templateWrite.call(this, args);\n                }\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = (!isNullOrUndefined(this.parent.filterSettings.operators) &&\n            !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n            this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = this.parent.createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') { // rewuired or not\n            if (col.filter.operator) {\n                var optrLen = Object.keys(this.optrData).length;\n                for (var i = 0; i < optrLen; i++) {\n                    if (this.optrData[i].value === col.filter.operator) {\n                        selValue = this.optrData[i].text;\n                    }\n                }\n            }\n            else {\n                selValue = this.optrData[0].text;\n            }\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { Browser, isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion } from '../base/util';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var data;\n        var floptr;\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = this.getAutoCompleteOptions(args);\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        var autoComplete = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return mapObj[_this.actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            }\n        }, args.column.filter.params));\n        return autoComplete;\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { extend } from '@syncfusion/ej2-base';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: args.column.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        }, args.column.filter.params));\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList(extend({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        }, args.column.filter.params));\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getCustomDateFormat } from '../base/util';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var format = getCustomDateFormat(args.column.format, args.column.type);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        if (args.column.type === 'date') {\n            this.datePickerObj = new DatePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        else if (args.column.type === 'datetime') {\n            this.datePickerObj = new DateTimePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { Browser, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n    }\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) { ///\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function () {\n        if (!this.dlgObj) {\n            return;\n        }\n        if (isBlazor()) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            this.parent.notify(events.filterMenuClose, { field: this.col.field });\n            this.isDialogOpen = false;\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = this.parent.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(target, this.dlgObj, this.parent);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        this.dlgObj.element.style.maxHeight = '350px';\n        this.dlgObj.show();\n        if (!column.filterTemplate) {\n            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.isDialogOpen = true;\n        this.parent.trigger(events.actionComplete, args);\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.parent.log('column_type_missing', { column: col });\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = this.parent.createElement('div', { className: 'e-flmenu-valuediv' });\n        var fObj = this.filterObj;\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            var valueInString = 'value';\n            fltrData[column.field] = fltrData[valueInString] = fObj.values[column.field];\n            if (column.foreignKeyValue) {\n                fltrData[column.foreignKeyValue] = fObj.values[column.field];\n                fltrData[column.field] = undefined;\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n            var compElement = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n            updateBlazorTemplate(tempID, 'FilterTemplate', column);\n            appendChildren(valueDiv, compElement);\n        }\n        else {\n            if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n                && !isNullOrUndefined(column.filter.ui.create)) {\n                var temp = column.filter.ui.create;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                temp({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n                });\n            }\n            else {\n                instanceofFilterUI.create({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n                });\n            }\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.uid === column.uid) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (col.filterTemplate) {\n            var element = this.dlgDiv.querySelector('.e-flmenu-valuediv');\n            var fltrValue = void 0;\n            if (element.children[0].value) {\n                fltrValue = element.children[0].value;\n            }\n            else {\n                fltrValue = !isBlazor() && !isNullOrUndefined((element.children[0].ej2_instances)) ?\n                    element.children[0].ej2_instances[0].value\n                    : element.querySelector('.e-control').ej2_instances[0].value;\n            }\n            this.filterObj.filterByColumn(col.field, flOptrValue, fltrValue);\n        }\n        else {\n            if (!isNullOrUndefined(col.filter) &&\n                !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n                var temp = col.filter.ui.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n            }\n            else {\n                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n            }\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n        var flIcon = column.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.add('e-filtered');\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, appendChildren, extend } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { isNullOrUndefined, } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n    };\n    ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilter.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilter.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilter.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left, e.target);\n            this.parent.applyBiggerTheme(this.menuObj.element.parentElement);\n        }\n    };\n    ExcelFilter.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n                selectedMenu = 'between';\n            }\n            else {\n                selectedMenu = 'customfilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilter.prototype.preventClose = function (args) {\n        if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n            args.cancel = true;\n        }\n    };\n    ExcelFilter.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilter.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        var targetBorder = target.offsetWidth - target.clientWidth;\n        targetBorder = targetBorder ? targetBorder + 1 : 0;\n        return (leftPos < 1) ? (targetPosition.right + 1 - targetBorder) : (targetPosition.left - contextWidth - 1 + targetBorder);\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2));\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilter.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilter.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e.element;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                if (_this.options.column.filterTemplate) {\n                    if (isBlazor()) {\n                        row.querySelector('.e-xlfl-valuediv').children[0].focus();\n                    }\n                    else {\n                        row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n                    }\n                }\n                else {\n                    row.cells[1].querySelector('input:not([type=hidden])').focus();\n                }\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilter.prototype.removeDialog = function () {\n        if (isBlazor()) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilter.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        if (Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.parent.notify(events.beforeCustomFilterOpen, { column: column, dialog: this.dialogObj });\n        this.dlgObj.show();\n        this.parent.applyBiggerTheme(this.dlgObj.element.parentElement);\n    };\n    ExcelFilter.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilter.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.parent.getColumnByField(col).filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-frstvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.parent.getColumnByField(col).filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-secndvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.parent.filterSettings.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var col = this.parent.getColumnByField(fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue\n            });\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (!isNullOrUndefined(secondValue)) {\n            secondOperator = !isNullOrUndefined(secondOperator) ? secondOperator : 'equal';\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /*tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        if (col.isForeignColumn()) {\n            this.foreignKeyFilter(args, fColl, mPredicate);\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(this.parent.getColumnByField(column), predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        var col = this.parent.getColumnByField(column);\n        this.dropOptr = new DropDownList(extend({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl\n        }, col.filter.params));\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilter.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilter.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilter.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else {\n            operator = isFirst ? col.filter.operator || 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilter.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilter.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /*tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilter.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilter.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var isFilteredCol = this.filterSettings.columns.some(function (col) { return column === col.field; });\n        var fltrPredicates = this.options.filteredColumns.filter(function (col) { return col.field === column; });\n        if (this.options.column.filterTemplate) {\n            var data = {};\n            var columnObj = this.parent.getColumnByField(column);\n            if (isFilteredCol && elementId) {\n                data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n            }\n            var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n            var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n            appendChildren(valueDiv, element);\n            if (isBlazor()) {\n                valueDiv.children[0].classList.add(elementId);\n                if (this.dlgDiv.querySelectorAll('.e-xlfl-value').length > 1) {\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columnObj);\n                }\n            }\n            else {\n                valueDiv.children[0].id = isComplex ? complexFieldName + elementId : column + elementId;\n            }\n            value.appendChild(valueDiv);\n        }\n        else {\n            var valueInput = this.parent\n                .createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n            valueDiv.appendChild(valueInput);\n            value.appendChild(valueDiv);\n            var flValue = void 0;\n            var predicate = void 0;\n            if (predicates && predicates.length > 0) {\n                predicate = predicates.length === 2 ?\n                    (isFirst ? predicates[0] : predicates[1]) :\n                    (isFirst ? predicates[0] : undefined);\n                flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n            }\n            var types = {\n                'string': this.renderAutoComplete.bind(this),\n                'number': this.renderNumericTextBox.bind(this),\n                'date': this.renderDate.bind(this),\n                'datetime': this.renderDateTime.bind(this)\n            };\n            types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n        }\n    };\n    ExcelFilter.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n        var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n        if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n            data = { column: predicates instanceof Array ? predicates[predIndex] : predicates };\n            var indx = this.options.column.columnData && fltrPredicates.length > 1 ?\n                (this.options.column.columnData.length === 1 ? 0 : 1) : predIndex;\n            data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] :\n                fltrPredicates[indx].value;\n            if (this.options.foreignKeyValue) {\n                data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n            }\n        }\n        return data;\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /*tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.datePicker = new DatePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        }, options.column.filter.params));\n        this.datePicker.appendTo(inputValue);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.dateTimePicker = new DateTimePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        }, options.column.filter.params));\n        this.dateTimePicker.appendTo(inputValue);\n    };\n    ExcelFilter.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue\n        }, options.column.filter.params));\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.parent.getColumnByField(column);\n        var isForeignColumn = colObj.isForeignColumn();\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.parent.getQuery().clone(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return isComplex ? _this.performComplexDataOperation(actObj.fields.value, mapObject)\n                            : mapObject[actObj.fields.value];\n                    }).indexOf(isComplex ? _this.performComplexDataOperation(actObj.fields.value, obj) :\n                        obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            value: fValue\n        }, colObj.filter.params));\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    ExcelFilter.prototype.performComplexDataOperation = function (value, mapObject) {\n        var returnObj;\n        var length = value.split('.').length;\n        var splits = value.split('.');\n        var duplicateMap = mapObject;\n        for (var i = 0; i < length; i++) {\n            returnObj = duplicateMap[splits[i]];\n            duplicateMap = returnObj;\n        }\n        return returnObj;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.refresh = true;\n        this.values = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e)) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                var rowdrag = this.parent.element.querySelector('.e-rowdragheader');\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                if (rowdrag) {\n                    rowdrag.className = 'e-dragheadercell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.filterSettings.columns = [];\n        }\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.getFrozenColumns() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        if (this.parent.isRowDragable()) {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n        this.currentFilterObject = {\n            field: field, uid: col.uid, isForeignKey: col.isForeignColumn(), operator: this.operator,\n            value: this.value, predicate: this.predicate,\n            matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n        };\n        var index = this.getFilteredColsIndexByField(col);\n        if (index > -1) {\n            this.filterSettings.columns[index] = this.currentFilterObject;\n        }\n        else {\n            this.filterSettings.columns.push(this.currentFilterObject);\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].uid === col.uid || (col.isForeignColumn() && this.parent.getColumnByUid(col.uid).field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.parent.getHeaderTable().classList.add('e-sortfilter');\n            this.render();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.initialLoad = true;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.initialLoad = false;\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.clickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.grabColumnByFieldFromAllCols(fieldName);\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: this.column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.value = filterValue;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.predicate = predicate || 'and';\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n            this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n            this.updateFilterMsg();\n            return;\n        }\n        if (filterCell && this.filterSettings.type === 'FilterBar' && filterCell.value !== filterValue) {\n            filterCell.value = filterValue;\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n            if (this.initialLoad && this.filterSettings.type === 'FilterBar') {\n                filterCell.value = this.values[this.column.field];\n            }\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        this.actualPredicate[this.fieldName] = [{\n                field: this.fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: this.operator,\n                value: this.value,\n                type: this.column.type\n            }];\n        this.addFilteredClass(this.fieldName);\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        this.parent.notify(events.modelChanged, {\n                            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                                this.column.field : undefined,\n                            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n                        });\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[i].uid);\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.column.field);\n                if (filterElement) {\n                    if (!isNullOrUndefined(this.cellText[this.filterSettings.columns[i].field])) {\n                        filterElement.value = this.cellText[this.column.field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[i].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function () {\n        var _this = this;\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        cols.forEach(function (col) {\n            col.uid = col.uid || _this.parent.getColumnByField(col.field).uid;\n        });\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredcols = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        this.refresh = false;\n        for (var i = 0, len = filteredcols.length; i < len; i++) {\n            this.removeFilteredColsByField(this.parent.getColumnByUid(filteredcols[i]).field, false);\n        }\n        this.refresh = true;\n        if (filteredcols.length) {\n            this.parent.renderModule.refresh();\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        var gObj = this.parent;\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n        var dataSource = col.filter.dataSource || gObj.getDataModule().dataManager;\n        this.filterModule.openDialog({\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format,\n            filteredColumns: gObj.filterSettings.columns, target: target,\n            sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: this.parent.localeObj\n        });\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredColsUid = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        for (var i = 0, len = filteredColsUid.length; i < len; i++) {\n            cols[i].uid = cols[i].uid || this.parent.getColumnByField(cols[i].field).uid;\n            var len_1 = cols.length;\n            var column = this.parent.grabColumnByUidFromAllCols(filteredColsUid[i]);\n            if (column.field === field || (column.field === column.foreignKeyValue && column.isForeignColumn())) {\n                if (this.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + column.field + '_filterBarcell\\']';\n                    fCell = this.parent.getHeaderContent().querySelector(selector);\n                    if (fCell) {\n                        fCell.value = '';\n                        delete this.values[field];\n                    }\n                }\n                while (len_1--) {\n                    if (cols[len_1].uid === column.uid) {\n                        cols.splice(len_1, 1);\n                    }\n                }\n                var fltrElement = this.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this.isRemove = true;\n                if (this.actualPredicate[field]) {\n                    delete this.actualPredicate[field];\n                }\n                if (this.values[field]) {\n                    delete this.values[field];\n                }\n                if (this.refresh) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'filtering', type: events.actionBegin, currentFilterObject: {\n                            field: column.field, operator: this.operator, value: this.value, predicate: this.predicate,\n                            matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                        }, currentFilterColumn: column\n                    });\n                }\n                break;\n            }\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if ((this.filterSettings.mode === 'Immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.grabColumnByUidFromAllCols(columns[index].uid);\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            this.valueFormatter.fromView(this.values[column.field], column.getParser(), column.type) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater_1 = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater_1.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        var skipInput;\n        if (column.type === 'number') {\n            skipInput = ['=', ' ', '!'];\n            if (DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            skipInput = ['>', '<', '=', '!'];\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (skipInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.getFrozenColumns()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase, this.ignoreAccent);\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        switch (this.column.type) {\n            case 'number':\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    if (this.column.filter.operator) {\n                        this.operator = this.column.filter.operator;\n                    }\n                    else {\n                        this.operator = this.filterOperators.startsWith;\n                    }\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            var gClient = gObj.element.getBoundingClientRect();\n            var fClient = target.getBoundingClientRect();\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule &&\n                (!parentsUntil(target, 'e-popup-wrapper')\n                    && (!closest(target, '.e-filter-item.e-menu-item'))\n                    && (!parentsUntil(target, 'e-filter-popup'))) && !datepickerEle) {\n                this.filterModule.closeDialog(target);\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            this.parent.renderModule.refresh(); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        this.actualPredicate = {};\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            /* tslint:disable-next-line:max-line-length */\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent, cols[i].uid);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent, uid) {\n        var obj;\n        obj = {\n            field: fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: operator,\n            value: value,\n            type: type\n        };\n        this.actualPredicate[fieldName] ? this.actualPredicate[fieldName].push(obj) : this.actualPredicate[fieldName] = [obj];\n        var field = uid ? this.parent.grabColumnByUidFromAllCols(uid).field : fieldName;\n        this.addFilteredClass(field);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        if (this.parent.showColumnMenu) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-columnmenu');\n        }\n        else if (this.parent.getColumnByField(fieldName)) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        }\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil } from '../base/util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.autoFit = function () {\n        var newarray = this.parent.getColumns().filter(function (c) { return c.autoFit === true; })\n            .map(function (c) { return c.field || c.headerText; });\n        if (newarray.length > 0) {\n            this.autoFitColumns(newarray);\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var footerDivTag = 'e-gridfooter';\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var footerTextClone;\n        var frzCols = gObj.getFrozenColumns();\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (frzCols) {\n            if (index < frzCols) {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                if (footerTable) {\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                }\n            }\n            else {\n                headerTable = gObj.getHeaderContent().querySelector('.e-movableheader').children[0];\n                contentTable = gObj.getContent().querySelector('.e-movablecontent').children[0];\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n                if (footerTable) {\n                    footerTable = gObj.getFooterContent().querySelector('.e-movablefootercontent').children[0];\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n                }\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            if (footerTable) {\n                footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            }\n        }\n        var indentWidthClone = headerTable.querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        var footerText = [];\n        if (footerTable) {\n            for (var i = 0; i < footerTextClone.length; i++) {\n                footerText[i] = footerTextClone[i].cloneNode(true);\n            }\n        }\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var wFooter = null;\n        if (footerText.length) {\n            wFooter = this.createTable(footerTable, footerText, footerDivTag);\n        }\n        var columnbyindex = gObj.getColumns()[index];\n        var result;\n        var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n        this.widthService.setColumnWidth(gObj.getColumns()[index]);\n        result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            gObj.getColumns().forEach(function (element) {\n                if (element.visible) {\n                    tWidth = tWidth + parseFloat(element.width);\n                }\n            });\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.getFrozenColumns()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        var _this = this;\n        fName.forEach(function (element) {\n            var fieldName = element;\n            var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n            if (_this.parent.getColumns()[columnIndex].visible === true) {\n                _this.resizeColumn(fieldName, columnIndex);\n            }\n        });\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        text.forEach(function (element) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(element);\n            myTable.appendChild(tr);\n        });\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n        this.parent.on(events.contentReady, this.autoFit, this);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        this.getResizeHandlers().forEach(function (ele) {\n            if (ele.parentElement.offsetHeight > 0) {\n                ele.style.height = ele.parentElement.offsetHeight + 'px';\n            }\n        });\n        this.setHandlerHeight();\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.getFrozenColumns() ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress)).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            if (col.columns) {\n                return;\n            }\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.refreshStackedColumnWidth();\n                this.element = e.target;\n                if (this.parent.getVisibleFrozenColumns()) {\n                    var mtbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                    var ftbody = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n                    var mtr = mtbody.querySelectorAll('tr');\n                    var ftr = ftbody.querySelectorAll('tr');\n                    for (var i = 0; i < mtr.length; i++) {\n                        if (this.parent.rowHeight) {\n                            mtr[i].style.height = this.parent.rowHeight + 'px';\n                            ftr[i].style.height = this.parent.rowHeight + 'px';\n                        }\n                        else {\n                            mtr[i].style.removeProperty('height');\n                            ftr[i].style.removeProperty('height');\n                        }\n                    }\n                }\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.parent.enableRtl) {\n                    this.minMove = parseFloat(this.column.width.toString())\n                        - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                        - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = {\n                    e: e,\n                    column: this.column\n                };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n                EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n                EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n                this.updateCursor('add');\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.getColData = function (column, mousemove) {\n        return {\n            width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0'\n                : this.widthService.getWidth(column).toString()) + mousemove,\n            minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n            maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n        };\n    };\n    Resize.prototype.resizing = function (e) {\n        if (isNullOrUndefined(this.column)) {\n            return;\n        }\n        var offsetWidth = 0;\n        if (isNullOrUndefined(this.column)) {\n            offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n        }\n        if (this.parent.allowTextWrap) {\n            this.element.style.height = this.element.parentElement.offsetHeight + 'px';\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = this.getColData(this.column, mousemove);\n        if (!colData.width) {\n            colData.width = closest(this.element, 'th').offsetWidth;\n        }\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        this.parent.log('resize_min_max', { column: this.column, width: width });\n        if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n            width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ?\n            offsetWidth.toString() : this.column.width.toString())) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            var columns = [this.column];\n            var finalColumns = [this.column];\n            if (this.column.columns) {\n                columns = this.getSubColumns(this.column, []);\n                columns = this.calulateColumnsWidth(columns, false, mousemove);\n                finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n            }\n            for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n                var col = finalColumns_1[_i];\n                this.widthService.setColumnWidth(col, null, 'resize');\n            }\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n        var finalColumns = [];\n        var _loop_1 = function (col) {\n            var totalWidth = 0;\n            columns.forEach(function (col) {\n                totalWidth += parseFloat(col.width.toString());\n            });\n            var colData = this_1.getColData(col, (parseFloat(col.width)) * mousemove / totalWidth);\n            var colWidth = this_1.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n            if ((colWidth !== parseFloat(col.width.toString()))) {\n                if (isUpdate) {\n                    col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n                }\n                finalColumns.push(col);\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            _loop_1(col);\n        }\n        return finalColumns;\n    };\n    Resize.prototype.getSubColumns = function (column, subColumns) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false && col.allowResizing) {\n                if (col.columns) {\n                    this.getSubColumns(col, subColumns);\n                }\n                else {\n                    subColumns.push(col);\n                }\n            }\n        }\n        return subColumns;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = {\n            e: e,\n            column: this.column\n        };\n        var content = this.parent.getContent().querySelector('.e-content');\n        var cTable = content.querySelector('.e-movablecontent') ? content.querySelector('.e-movablecontent') : content;\n        if (cTable.scrollHeight >= cTable.clientHeight) {\n            this.parent.scrollModule.setPadding();\n            cTable.style.overflowY = 'scroll';\n        }\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.getFrozenColumns()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.textWrapRefresh, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_2 = columns; _b < columns_2.length; _b++) {\n                var column = columns_2[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.refreshStackedColumnWidth = function () {\n        for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n            var stackedColumn = _a[_i];\n            stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n        }\n    };\n    Resize.prototype.getStackedWidth = function (column, width) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false) {\n                if (col.columns) {\n                    this.getStackedWidth(col, width);\n                }\n                else {\n                    width += col.width;\n                }\n            }\n        }\n        return width;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n        var uid = cell.getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (rect.parentElement.children.length !== frzCols) {\n                tr.splice(0, tr.length / 2);\n            }\n            else {\n                tr.splice(tr.length / 2, tr.length / 2);\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.getFrozenColumns()) {\n            var table = closest(rect, '.e-table');\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n        var bool = col ? !col.lockColumn : true;\n        return (srcElem.parentElement.isEqualNode(destElem.parentElement) || (this.parent.getFrozenColumns()\n            && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column });\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n                this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column, destColumn: destColumn });\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.getColumns(true).filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n                this.destElement = destElem;\n                if (uid) {\n                    this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n                }\n                else {\n                    var headers = this.getHeaderCells();\n                    var oldIdx = getElementIndex(this.element, headers);\n                    var columns = this.getColumnsModel(this.parent.columns);\n                    var column_2 = columns[oldIdx];\n                    this.moveColumns(newIndex, column_2);\n                }\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (((this.parent.getFrozenColumns() && parent) || this.parent.lockcolPositionCount) && !reorderByColumn) {\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].field === column.field) {\n                    srcIdx = i;\n                    break;\n                }\n            }\n            var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n            if (col) {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].field === col.field) {\n                        destIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].headerText === this.destElement.innerText.trim()) {\n                        destIndex = i;\n                    }\n                }\n            }\n        }\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        gObj.notify(events.modelChanged, {\n            type: events.actionBegin, requestType: 'reorder'\n        });\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = this.getHeaderCells();\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        var frozenColumns = this.parent.getFrozenColumns();\n        if (frozenColumns || this.parent.lockcolPositionCount) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            if (frozenColumns) {\n                var mRows = [].slice.call(this.parent.getHeaderContent()\n                    .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n                for (var i = 0; i < fRows.length; i++) {\n                    fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                    var isAvail = void 0;\n                    for (var k = 0; k < fTh.length; k++) {\n                        for (var j = 0; j < mTh.length; j++) {\n                            if (mTh[j].innerText === fTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([fTh[k]]);\n                        }\n                    }\n                    for (var j = 0; j < mTh.length; j++) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < fRows.length; i++) {\n                    mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    for (var k = 0; k < mTh.length; k++) {\n                        var isAvail = void 0;\n                        for (var j = k + 1; j < mTh.length; j++) {\n                            if (mTh[j].innerText === mTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([mTh[k]]);\n                        }\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n        var fColumn = this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn)) ||\n            (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: fColumn, destColumn: toColumn });\n            return;\n        }\n        var column = this.parent.getColumnByField(toFName);\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, this.parent.getColumnByField(fromFName), true);\n        }\n    };\n    Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n        var toIndex = this.parent.getColumnIndexByField(toFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if (toIndex < 0 || (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn))) {\n            return;\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByField(fromFNames[i]);\n            if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n                return;\n            }\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByIndex(toIndex);\n            var parent_1 = this.getColParent(column, this.parent.columns);\n            var columns = parent_1 ? parent_1.columns : this.parent.columns;\n            var destIndex = inArray(column, columns);\n            if (destIndex > -1) {\n                this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true);\n            }\n            if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n                toIndex++; //R to L\n            }\n        }\n    };\n    Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n        if (toIndex > -1) {\n            this.moveColumns(toIndex, column, true);\n        }\n    };\n    Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n        var column = this.parent.getColumnByField(fieldName);\n        this.moveTargetColumn(column, toIndex);\n    };\n    Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n        for (var i = 0; i < fieldName.length; i++) {\n            this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string | string[]} fromFName - Defines the origin field names.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        typeof fromFName === 'string' ? this.reorderSingleColumn(fromFName, toFName) : this.reorderMultipleColumns(fromFName, toFName);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        var column = this.parent.getColumnByIndex(fromIndex);\n        this.moveTargetColumn(column, toIndex);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {string | string[]} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        typeof fieldName === 'string' ? this.reorderSingleColumnByTarget(fieldName, toIndex) :\n            this.reorderMultipleColumnByTarget(fieldName, toIndex);\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function () {\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var isLeft = this.x > getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader')\n            .getBoundingClientRect().left : cliRect.left;\n        var cliRectBaseRight = cliRect.right;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        this.x = getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable, isBlazor } from '@syncfusion/ej2-base';\nimport { removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition, addRemoveActiveClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { Scroll } from '../actions/scroll';\nimport { Query } from '@syncfusion/ej2-data';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        this.selectedRows = [];\n        this.isOverflowBorder = true;\n        this.selectedRowColls = [];\n        this.isRefresh = true;\n        /* tslint:disable-next-line:max-line-length */\n        // tslint:disable-next-line:max-func-body-length\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var visualElement = _this.parent.createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = _this.parent.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = _this.parent.createElement('tbody');\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (gObj.rowDropSettings.targetID && (!e.sender.target.classList.contains('e-selectionbackground')\n                    && gObj.selectionSettings.type !== 'Single')) ||\n                (!gObj.rowDropSettings.targetID && !parentsUntil(e.sender.target, 'e-rowdragdrop'))) {\n                return false;\n            }\n            if (gObj.rowDropSettings.targetID &&\n                gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                gObj.selectRow(parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10));\n            }\n            _this.startedRow = closestElement(target, 'tr').cloneNode(true);\n            _this.processArgs(target);\n            var args = {\n                selectedRow: _this.rows, dragelement: target,\n                cloneElement: visualElement, cancel: false, data: _this.rowData\n            };\n            var selectedRows = gObj.getSelectedRows();\n            gObj.trigger(events.rowDragStartHelper, args);\n            var cancel = 'cancel';\n            var cloneElement = 'cloneElement';\n            if (args[cancel]) {\n                visualElement = args[cloneElement];\n                return visualElement;\n            }\n            removeElement(_this.startedRow, '.e-indentcell');\n            removeElement(_this.startedRow, '.e-detailrowcollapse');\n            removeElement(_this.startedRow, '.e-detailrowexpand');\n            _this.removeCell(_this.startedRow, 'e-gridchkbox');\n            var exp = new RegExp('e-active', 'g'); //high contrast issue\n            _this.startedRow.innerHTML = _this.startedRow.innerHTML.replace(exp, '');\n            tbody.appendChild(_this.startedRow);\n            if (gObj.getSelectedRows().length > 1) {\n                var dropCountEle = _this.parent.createElement('span', {\n                    className: 'e-dropitemscount', innerHTML: '' + selectedRows.length,\n                });\n                visualElement.appendChild(dropCountEle);\n            }\n            var ele = closestElement(target, 'tr').querySelector('.e-icon-rowdragicon');\n            if (ele) {\n                ele.classList.add('e-dragstartrow');\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            var target = e.target;\n            var spanCssEle = _this.parent.element.querySelector('.e-dropitemscount');\n            if (_this.parent.getSelectedRecords().length > 1 && spanCssEle) {\n                spanCssEle.style.left = _this.parent.element.querySelector('.e-cloneproperties table')\n                    .offsetWidth - 5 + 'px';\n            }\n            _this.processArgs(target);\n            gObj.trigger(events.rowDragStart, {\n                rows: _this.rows,\n                target: e.target, draggableType: 'rows', fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                data: _this.rowData\n            });\n            _this.dragStartData = _this.rowData;\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances &&\n                dropElem.ej2_instances[0].getModuleName() === 'grid') {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur', 'e-movecur']);\n            _this.isOverflowBorder = true;\n            _this.hoverState = gObj.enableHover;\n            var trElement = closestElement(e.target, 'tr');\n            gObj.enableHover = false;\n            if (!e.target) {\n                return;\n            }\n            _this.processArgs(target);\n            var args = {\n                rows: _this.rows, target: target, draggableType: 'rows',\n                data: _this.rowData, originalEvent: e, cancel: false\n            };\n            gObj.trigger(events.rowDrag, args);\n            _this.stopTimer();\n            if (args.cancel) {\n                return;\n            }\n            gObj.element.classList.add('e-rowdrag');\n            _this.dragTarget = trElement && parentsUntil(target, 'e-grid').id === cloneElement.parentElement.id ?\n                trElement.rowIndex : parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10);\n            if (gObj.rowDropSettings.targetID) {\n                if (!parentsUntil(target, 'e-gridcontent') ||\n                    parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                }\n            }\n            else {\n                var elem = parentsUntil(target, 'e-grid');\n                if (elem && elem.id === cloneElement.parentElement.id) {\n                    classList(cloneElement, ['e-movecur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-movecur']);\n                }\n            }\n            if (!gObj.rowDropSettings.targetID &&\n                (!gObj.groupSettings.columns.length || e.target.classList.contains('e-selectionbackground'))) {\n                if (parentsUntil(target, 'e-grid')) {\n                    _this.updateScrollPostion(e.event, target);\n                }\n                if (_this.isOverflowBorder && parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10) !== _this.dragTarget) {\n                    _this.moveDragRows(e, _this.startedRow, trElement);\n                }\n                else {\n                    if (trElement && _this.parent.getRowByIndex(_this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') ===\n                        trElement.getAttribute('data-uid')) {\n                        var bottomborder = _this.parent.createElement('div', { className: 'e-lastrow-dragborder' });\n                        var gridcontentEle = _this.parent.getContent();\n                        bottomborder.style.width = _this.parent.element.offsetWidth - _this.getScrollWidth() + 'px';\n                        if (!gridcontentEle.querySelectorAll('.e-lastrow-dragborder').length) {\n                            gridcontentEle.classList.add('e-grid-relative');\n                            gridcontentEle.appendChild(bottomborder);\n                            bottomborder.style.bottom = _this.getScrollWidth() + 'px';\n                        }\n                    }\n                    _this.removeBorder(trElement);\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var targetEle = _this.getElementFromPosition(e.helper, e.event);\n            var target = targetEle ? targetEle : e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElement = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElement && dropElement.ej2_instances &&\n                dropElement.ej2_instances[0].getModuleName() === 'grid') {\n                dropElement.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            if (gObj.isRowDragable()) {\n                _this.stopTimer();\n                gObj.enableHover = _this.hoverState;\n                _this.parent.getContent().classList.remove('e-grid-relative');\n                _this.removeBorder(targetEle);\n                var stRow = gObj.element.querySelector('.e-dragstartrow');\n                if (stRow) {\n                    stRow.classList.remove('e-dragstartrow');\n                }\n            }\n            _this.processArgs(target);\n            var args = {\n                target: target, draggableType: 'rows',\n                cancel: false,\n                fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                dropIndex: _this.dragTarget,\n                rows: _this.rows, data: _this.dragStartData\n            };\n            gObj.trigger(events.rowDrop, args);\n            if (!parentsUntil(target, 'e-gridcontent') || args.cancel) {\n                _this.dragTarget = null;\n                remove(e.helper);\n                return;\n            }\n            _this.isRefresh = false;\n            var selectedIndexes = _this.parent.getSelectedRowIndexes();\n            if (gObj.isRowDragable()) {\n                if (!_this.parent.rowDropSettings.targetID &&\n                    _this.startedRow.querySelector('td.e-selectionbackground') && selectedIndexes.length > 1 &&\n                    selectedIndexes.length !== _this.parent.getCurrentViewRecords().length) {\n                    _this.reorderRows(selectedIndexes, args.dropIndex);\n                }\n                else {\n                    _this.reorderRows([parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10)], _this.dragTarget);\n                }\n                _this.dragTarget = null;\n                if (!gObj.rowDropSettings.targetID) {\n                    remove(e.helper);\n                    gObj.refresh();\n                }\n            }\n            _this.isRefresh = true;\n        };\n        this.removeCell = function (targetRow, className) {\n            return [].slice.call(targetRow.querySelectorAll('td')).filter(function (cell) {\n                if (cell.classList.contains(className)) {\n                    targetRow.deleteCell(cell.cellIndex);\n                }\n            });\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.onDataBoundFn = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.reorderRows = function (fromIndexes, toIndex) {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var selectedRecords = [];\n        var draggedRecords = [];\n        var currentViewData = this.parent.renderModule.data.dataManager.dataSource.json;\n        var dropIdx = toIndex;\n        var actualIdx = fromIndexes[0];\n        for (var i = 0, len = fromIndexes.length; i < len; i++) {\n            draggedRecords[i] = currentViewData[fromIndexes[i]];\n        }\n        for (var i = 0, len = selectedIndexes.length; i < len; i++) {\n            selectedRecords[i] = currentViewData[selectedIndexes[i]];\n        }\n        for (var i = 0, len = draggedRecords.length; i < len; i++) {\n            if (i !== 0) {\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) ===\n                        JSON.stringify(draggedRecords[i])) {\n                        actualIdx = j;\n                        break;\n                    }\n                }\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(draggedRecords[i - 1])) {\n                        if (actualIdx > j) {\n                            dropIdx = j + 1;\n                        }\n                        break;\n                    }\n                }\n            }\n            this.reorderRow(actualIdx, dropIdx);\n        }\n        if (this.isRefresh) {\n            this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n        for (var i = 0, len = selectedRecords.length; i < len; i++) {\n            for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(selectedRecords[i])) {\n                    selectedIndexes[i] = j;\n                    break;\n                }\n            }\n        }\n        this.selectedRowColls = selectedIndexes;\n    };\n    RowDD.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        this.draggable = new Draggable(gObj.getContent(), {\n            dragTarget: '.e-rowcelldrag, .e-rowdragdrop, .e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    RowDD.prototype.updateScrollPostion = function (e, target) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var y = getPosition(e).y;\n        var cliRect = this.parent.getContent().getBoundingClientRect();\n        var rowHeight = this.parent.getRowHeight() - 15;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (cliRect.top + rowHeight >= y) {\n            var scrollPixel_1 = -(this.parent.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_1, true); }, 200);\n        }\n        else if (cliRect.top + this.parent.getContent().clientHeight - rowHeight - 33 <= y) {\n            var scrollPixel_2 = (this.parent.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_2, true); }, 200);\n        }\n    };\n    RowDD.prototype.setScrollDown = function (scrollElem, scrollPixel, isLeft) {\n        scrollElem.scrollTop = scrollElem.scrollTop + scrollPixel;\n    };\n    RowDD.prototype.moveDragRows = function (e, startedRow, targetRow) {\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        var element = closestElement(e.target, 'tr');\n        if (parentsUntil(element, 'e-gridcontent') && parentsUntil(cloneElement.parentElement, 'e-grid').id ===\n            parentsUntil(element, 'e-grid').id) {\n            var targetElement = element ?\n                element : this.startedRow;\n            this.setBorder(targetElement, e.event, startedRow, targetRow);\n        }\n    };\n    RowDD.prototype.setBorder = function (element, event, startedRow, targetRow) {\n        var node = this.parent.element;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        if (parentsUntil(element, 'e-gridcontent') && parentsUntil(cloneElement.parentElement, 'e-grid').id ===\n            parentsUntil(element, 'e-grid').id) {\n            removeClass(node.querySelectorAll('.e-rowcell,.e-rowdragdrop'), ['e-dragborder']);\n            var rowElement = [];\n            if (targetRow && targetRow.rowIndex === 0) {\n                var div = this.parent.createElement('div', { className: 'e-firstrow-dragborder' });\n                var gridheaderEle = this.parent.getHeaderContent();\n                gridheaderEle.classList.add('e-grid-relative');\n                div.style.width = node.offsetWidth - this.getScrollWidth() + 'px';\n                if (!gridheaderEle.querySelectorAll('.e-firstrow-dragborder').length) {\n                    gridheaderEle.appendChild(div);\n                }\n            }\n            else if (targetRow && parseInt(startedRow.getAttribute('aria-rowindex'), 10) > targetRow.rowIndex) {\n                element = this.parent.getRowByIndex(targetRow.rowIndex - 1);\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            else {\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            if (rowElement.length > 0) {\n                addRemoveActiveClasses(rowElement, true, 'e-dragborder');\n            }\n        }\n    };\n    RowDD.prototype.getScrollWidth = function () {\n        var scrollElem = this.parent.getContent().firstElementChild;\n        return scrollElem.scrollWidth > scrollElem.offsetWidth ? Scroll.getScrollBarWidth() : 0;\n    };\n    RowDD.prototype.removeFirstRowBorder = function (element) {\n        if (this.parent.element.getElementsByClassName('e-firstrow-dragborder').length > 0 && element &&\n            element.rowIndex !== 0) {\n            this.parent.element.getElementsByClassName('e-firstrow-dragborder')[0].remove();\n        }\n    };\n    RowDD.prototype.removeLastRowBorder = function (element) {\n        var islastRowIndex = element &&\n            this.parent.getRowByIndex(this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') !==\n                element.getAttribute('data-uid');\n        if (this.parent.element.getElementsByClassName('e-lastrow-dragborder').length > 0 && element && islastRowIndex) {\n            this.parent.element.getElementsByClassName('e-lastrow-dragborder')[0].remove();\n        }\n    };\n    RowDD.prototype.removeBorder = function (element) {\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        element = this.parent.getRows().filter(function (row) {\n            return row.querySelector('td.e-dragborder');\n        })[0];\n        if (element) {\n            var rowElement = [].slice.call(element.querySelectorAll('.e-dragborder'));\n            addRemoveActiveClasses(rowElement, false, 'e-dragborder');\n        }\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    RowDD.prototype.onDataBound = function (e) {\n        if (this.selectedRowColls.length > 0) {\n            this.parent.selectRows(this.selectedRowColls);\n            this.selectedRowColls = [];\n        }\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.singleRowDrop = function (e) {\n        var targetRow = closestElement(e.target, 'tr');\n        var currentIndex;\n        var srcControl;\n        srcControl = e.droppedElement.parentElement.ej2_instances[0];\n        currentIndex = targetRow ? targetRow.rowIndex : srcControl.currentViewData.length - 1;\n        this.reorderRow(this.startedRowIndex, currentIndex);\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        var draggObj = e.droppedElement.parentElement.ej2_instances[0];\n        if (e.droppedElement.getAttribute('action') !== 'grouping') {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl_1;\n            var currentIndex = void 0;\n            if ((e.droppedElement.querySelector('tr').getAttribute('single-dragrow') !== 'true' &&\n                e.droppedElement.parentElement.id === gObj.element.id)\n                || (e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true' &&\n                    e.droppedElement.parentElement.id !== gObj.element.id)) {\n                return;\n            }\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl_1 = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else if (this.isSingleRowDragDrop || e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true') {\n                this.singleRowDrop(e);\n                return;\n            }\n            if (srcControl_1.element.id !== gObj.element.id && srcControl_1.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl_1.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges\n            if (!isBlazor()) {\n                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n                gObj.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n                var selectedRows = srcControl_1.getSelectedRowIndexes();\n                var skip = srcControl_1.allowPaging ?\n                    (srcControl_1.pageSettings.currentPage * srcControl_1.pageSettings.pageSize) - srcControl_1.pageSettings.pageSize : 0;\n                this.selectedRows = [];\n                for (var i = 0, len = records.length; i < len; i++) {\n                    this.selectedRows.push(skip + selectedRows[i]);\n                }\n                srcControl_1.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n                srcControl_1.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n            }\n            else {\n                var changes = {\n                    addedRecords: records,\n                    deletedRecords: [],\n                    changedRecords: []\n                };\n                var dragDropDestinationIndex = 'dragDropDestinationIndex';\n                var query = new Query;\n                query[dragDropDestinationIndex] = targetIndex;\n                gObj.getDataModule().saveChanges(changes, gObj.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    gObj.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    gObj.trigger(events.actionFailure, { error: e });\n                });\n                changes.deletedRecords = records;\n                changes.addedRecords = [];\n                srcControl_1.getDataModule().saveChanges(changes, srcControl_1.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    srcControl_1.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    srcControl_1.trigger(events.actionFailure, { error: e });\n                });\n            }\n        }\n    };\n    RowDD.prototype.reorderRow = function (fromIndexes, toIndex) {\n        var gObj = this.parent;\n        if (!gObj.sortSettings.columns.length && !gObj.groupSettings.columns.length && !gObj.filterSettings.columns.length) {\n            //Todo: drag and drop mapper & BatchChanges                 \n            var skip = gObj.allowPaging ?\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : 0;\n            var fromIndex = fromIndexes;\n            toIndex = toIndex + skip;\n            this.selectedRows = gObj.getSelectedRowIndexes();\n            gObj.notify(events.rowPositionChanged, {\n                fromIndex: fromIndexes + skip,\n                toIndex: toIndex\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.draggable.destroy();\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    RowDD.prototype.processArgs = function (target) {\n        var gObj = this.parent;\n        if ((gObj.getSelectedRecords().length > 0 && this.startedRow.cells[0].classList.contains('e-selectionbackground') === false)\n            || gObj.getSelectedRecords().length === 0) {\n            this.rows = [this.startedRow];\n            this.rowData = this.parent.getRowInfo((this.startedRow).querySelector('.e-rowcell')).rowData;\n        }\n        else {\n            this.rows = gObj.getSelectedRows();\n            this.rowData = gObj.getSelectedRecords();\n        }\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, isGroupAdaptive, updatecloneRow } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function () {\n            _this.parent.element.classList.add('e-ungroupdrag');\n        };\n        this.drag = function (e) {\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            if (!(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'))) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                _this.parent.log('action_disabled_column', { moduleName: _this.getModuleName(), columnName: column.headerText });\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n        this.groupGenerator = new GroupModelGenerator(this.parent);\n    }\n    Group.prototype.columnDrag = function (e) {\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.groupAggregates, this.onGroupAggregates, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.groupAggregates, this.onGroupAggregates);\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if ((!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var dataManager = void 0;\n            var query = void 0;\n            var toExpand = [];\n            var gObj = this.parent;\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, expand, query, dataManager);\n                }\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, !isHide, query, dataManager);\n                }\n            }\n            this.aria.setExpand(trgt, expand);\n            if (!isGroupAdaptive(gObj)) {\n                for (var i = 0, len = rows.length; i < len; i++) {\n                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                        if (isHide) {\n                            rows[i].style.display = 'none';\n                        }\n                        else {\n                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                                rows[i].style.display = '';\n                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n                                if (expandElem) {\n                                    toExpand.push(expandElem);\n                                }\n                                if (rows[i].classList.contains('e-detailrow')) {\n                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                        rows[i].style.display = 'none';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.updateVirtualRows = function (gObj, target, isExpand, query, dataManager) {\n        var rObj = gObj.getRowObjectFromUID(target.closest('tr').getAttribute('data-uid'));\n        rObj.isExpand = isExpand;\n        updatecloneRow(gObj);\n        query = gObj.getDataModule().generateQuery(false);\n        query.queries = [];\n        var args = { requestType: 'virtualscroll', rowObject: rObj };\n        dataManager = gObj.getDataModule().getData(args, query.requiresCount());\n        dataManager.then(function (e) { return gObj.renderModule.dataManagerSuccess(e, args); });\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = this.parent.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: '.e-groupheadercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.push(this.colName);\n        this.groupSettings.columns = columns;\n        this.groupAddSortingQuery(this.colName);\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending', isFromGroup: true });\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var groupedColumn = this.parent.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = this.parent.createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        // if (!isNullOrUndefined(column.headerTemplate)) {\n        //     if (column.headerTemplate.indexOf('#') !== -1) {\n        //         childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n        //     } else {\n        //         childDiv.innerHTML = column.headerTemplate;\n        //     }\n        //     childDiv.firstElementChild.classList.add('e-grouptext');\n        // } else {\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-grouptext', innerHTML: column.headerText,\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        // }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(this.parent.createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            remove(this.getGHeaderCell(field));\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        var _this = this;\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'columns':\n                    var args = void 0;\n                    if (this_1.contentRefresh) {\n                        if (!this_1.isAppliedUnGroup) {\n                            if (!this_1.isAppliedGroup) {\n                                this_1.updateGroupDropArea(true);\n                                for (var i = 0; i < this_1.groupSettings.columns.length; i++) {\n                                    this_1.colName = this_1.groupSettings.columns[i];\n                                    var col = this_1.parent.getColumnByField(this_1.colName);\n                                    col.visible = this_1.parent.groupSettings.showGroupedColumn;\n                                    this_1.groupAddSortingQuery(this_1.colName);\n                                    if (i < this_1.groupSettings.columns.length - 1) {\n                                        this_1.addColToGroupDrop(this_1.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = {\n                                columnName: this_1.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin\n                            };\n                        }\n                        else {\n                            args = { requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this_1.groupSettings.showGroupedColumn) {\n                            e.oldProperties[prop].forEach(function (column) {\n                                if (e.properties[prop].indexOf(column) === -1) {\n                                    _this.parent.getColumnByField(column).visible = true;\n                                }\n                            });\n                        }\n                        this_1.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this_1.updateGroupDropArea();\n                    this_1.groupSettings.showDropArea ? this_1.element.style.display = '' : this_1.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this_1.updateGroupedColumn(this_1.groupSettings.showGroupedColumn);\n                    this_1.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this_1.parent.refreshHeader();\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.isDestroyed && !this.parent.refreshing) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (i === (len - 1)) {\n                this.contentRefresh = true;\n            }\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    Group.prototype.onGroupAggregates = function (editedData) {\n        var _this = this;\n        var aggregates = this.iterateGroupAggregates(editedData);\n        var rowData = this.groupGenerator.generateRows(aggregates, {});\n        var summaryRows = this.parent.getRowsObject().filter(function (row) { return !row.isDataRow; });\n        var updateSummaryRows = rowData.filter(function (data) { return !data.isDataRow; });\n        updateSummaryRows.forEach(function (row, indx) {\n            var cells = row.cells.filter(function (cell) { return cell.isDataCell; });\n            var args = { cells: cells, data: row.data, dataUid: summaryRows[indx] ? summaryRows[indx].uid : '' };\n            _this.parent.notify(events.refreshAggregateCell, args);\n        });\n    };\n    Group.prototype.iterateGroupAggregates = function (editedData) {\n        var updatedData = editedData instanceof Array ? editedData : [];\n        var rows = this.parent.getRowsObject();\n        var initData = this.parent.getCurrentViewRecords();\n        var deletedCols = [];\n        var changeds = rows.map(function (row) {\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.changes instanceof Object ? row.changes : row.data;\n        });\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        changeds = updatedData.length === 0 ? changeds : updatedData;\n        var mergeData = initData.map(function (item) {\n            var pKeyVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return pKeyVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            deletedCols.forEach(function (row) {\n                var index = mergeData.indexOf(row);\n                mergeData.splice(index, 1);\n            });\n        }\n        var aggregates = [];\n        var aggregateRows = this.parent.aggregates;\n        aggregateRows.forEach(function (row) {\n            row.columns.forEach(function (col) {\n                var aggr = {};\n                var type = col.type.toString();\n                aggr = { type: type.toLowerCase(), field: col.field };\n                aggregates.push(aggr);\n            });\n        });\n        var result;\n        var aggrds;\n        var groupedCols = this.parent.groupSettings.columns;\n        groupedCols.forEach(function (field) {\n            aggrds = result ? result : mergeData;\n            result = DataUtil.group(aggrds, field, aggregates, null, null);\n        });\n        return result;\n    };\n    return Group;\n}());\nexport { Group };\n","import { isBlazor } from '@syncfusion/ej2-base';\nimport { closest, classList, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var parent = 'parentDetails';\n        var childGrid;\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))) {\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId } });\n                var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                detailRow.appendChild(detailCell);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                if (gObj.detailTemplate) {\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID));\n                    if (isBlazor()) {\n                        //resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n                        updateBlazorTemplate(detailTemplateID, 'DetailTemplate', gObj, false);\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: data[gObj.childGrid.queryString],\n                        parentRowData: data\n                    };\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid('')\n                    });\n                    detailCell.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                gObj.getRowsObject().splice(rowObj.index + 1, 0, row);\n                gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data, childGrid: childGrid });\n                gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            this.aria.setExpand(target, true);\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    /**\n     * @hidden\n     * @param gObj\n     * @param rowObj\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = gObj.expandedRows[rowObj.index].gridModel;\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n                gridModel = gObj.childGrid;\n            }\n            else {\n                gridModel = gObj.childGrid;\n            }\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        detailrows.forEach(function (detailrow) {\n            detailrow.querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren } from '../base/util';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            template: '<div class=\"e-input-group e-search\" role=\"search\">\\\n            <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n            placeholder= \\\"' + this.l10n.getConstant('Search') + '\\\"/>\\\n            <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n            tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n            </div>',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: this.l10n.getConstant('Columnchooser'), tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right',\n        };\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n            }\n            else {\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.bindSearchEvents = function () {\n        this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            created: this.bindSearchEvents.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.toolbar[isStringTemplate] = true;\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.toolbarTemplate) {\n            if (!isBlazor() && typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                if (isBlazor()) {\n                    var tempID = this.parent.element.id + 'toolbarTemplate';\n                    var item = appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', tempID));\n                    var items_1 = this.getItem(item);\n                    this.toolbar.items.push(items_1);\n                    this.toolbar.appendTo(this.element);\n                    updateBlazorTemplate(this.parent.element.id + 'toolbarTemplate', 'ToolbarTemplate', this.parent);\n                }\n                else {\n                    appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n                }\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n        this.bindSearchEvents();\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing && hasData ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting && hasData ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n            var item = items_2[_i];\n            var element = this.element.querySelector('#' + item);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        var newArgs = !isBlazor() || this.parent.isJsComponent ? args : { item: args.item, cancel: args.cancel, name: args.name };\n        var originalEvent = args.originalEvent;\n        gObj.trigger(events.toolbarClick, newArgs, function (toolbarargs) {\n            toolbarargs.originalEvent = toolbarargs.originalEvent ? toolbarargs.originalEvent : originalEvent;\n            if (!toolbarargs.cancel) {\n                switch (!isNullOrUndefined(toolbarargs.item) && toolbarargs.item.id) {\n                    case gID + '_print':\n                        gObj.print();\n                        break;\n                    case gID + '_edit':\n                        gObj.startEdit();\n                        break;\n                    case gID + '_update':\n                        gObj.endEdit();\n                        break;\n                    case gID + '_cancel':\n                        gObj.closeEdit();\n                        break;\n                    case gID + '_add':\n                        gObj.addRecord();\n                        break;\n                    case gID + '_delete':\n                        gObj.deleteRecord();\n                        break;\n                    case gID + '_search':\n                        if (toolbarargs.originalEvent.target.id === gID + '_searchbutton') {\n                            _this.search();\n                        }\n                        break;\n                    case gID + '_columnchooser':\n                        var tarElement = _this.parent.element.querySelector('.e-ccdiv');\n                        var y = tarElement.getBoundingClientRect().top;\n                        var x = tarElement.getBoundingClientRect().left;\n                        var targetEle = toolbarargs.originalEvent.target;\n                        y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                        gObj.createColumnchooser(x, y, targetEle);\n                        break;\n                }\n            }\n        });\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.getFrozenColumns()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            innerDiv.appendChild(fDiv);\n            innerDiv.appendChild(mDiv);\n            this.frozenContent = fDiv;\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.getFrozenColumns()) {\n            var freezeTable = table.cloneNode(true);\n            this.frozenContent.appendChild(freezeTable);\n            this.freezeTable = freezeTable;\n            this.movableContent.appendChild(table);\n            remove(table.querySelector('colgroup'));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector('tbody'));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = e;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        if (this.parent.getFrozenColumns()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            this.freezeTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.freezeTable, 0, this.parent.getFrozenColumns());\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), this.parent.getFrozenColumns());\n        // check freeze content have no row case\n        if (this.parent.getFrozenColumns()) {\n            var frozenDiv = this.frozenContent;\n            if (!frozenDiv.offsetHeight) {\n                frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table \n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns());\n            this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector('colGroup'));\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent').scrollLeft :\n                this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var fCol = this.parent.getFrozenColumns();\n        if (fCol && fCol > index) {\n            return this.freezeTable.querySelector('colGroup').children[index];\n        }\n        return this.getColGroup().children[index - fCol];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n        this.parent.on(refreshFooterRenderer, this.refreshFooterRenderer, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n        this.parent.off(refreshFooterRenderer, this.refreshFooterRenderer);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        var _this = this;\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var deletedCols = [];\n        var data = 'dataSource';\n        var mergeds;\n        var rows = this.parent.frozenColumns > 0 ? this.parent.getMovableRowsObject() : this.parent.getRowsObject();\n        var initds = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.dataSource[data].json.length\n            ? this.parent.dataSource[data].json : this.parent.getCurrentViewRecords();\n        var addrow = [];\n        var changeds = rows.map(function (row) {\n            if (row.changes && row.edit === 'add') {\n                addrow.push(row.changes);\n            }\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.isDirty && row.changes ? row.changes : row.data;\n        });\n        changeds = editedData.length === 0 ? changeds : editedData;\n        mergeds = initds.map(function (item) {\n            var idVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return idVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var currentData = this.parent.groupSettings.columns.length > 0 && 'records' in this.parent.currentViewData ?\n            this.parent.getCurrentViewRecords() : this.parent.currentViewData;\n        var currentds;\n        currentds = currentData.map(function (item) {\n            var idVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = mergeds.some(function (cItem) {\n                value = cItem;\n                return idVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        if (addrow.length > 0) {\n            addrow.forEach(function (row) { mergeds.push(row); currentds.push(row); });\n        }\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            deletedCols.forEach(function (row) {\n                var index = mergeds.indexOf(row);\n                var curIndx = currentData.indexOf(row);\n                mergeds.splice(index, 1);\n                if (currentds && currentds.length) {\n                    currentds.splice(curIndx, 1);\n                }\n            });\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        aggregateRows.forEach(function (row) {\n            row.columns.forEach(function (col) {\n                var data = [];\n                var type = col.type.toString();\n                data = type.toLowerCase() === 'custom' && !isNullOrUndefined(currentds) ? currentds : mergeds;\n                agrVal = calculateAggregate(type, data, col, _this.parent);\n                aggregate[col.field + ' - ' + type.toLowerCase()] = agrVal;\n            });\n        });\n        var result = {\n            result: this.parent.groupSettings.columns.length > 0 ? mergeds : currentds,\n            count: mergeds.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { refreshAggregateCell } from '../base/constant';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        this.parent.on(refreshAggregateCell, this.refreshWithAggregate(node, cell), this);\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            return true;\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        var tempID = '';\n        if (isBlazor()) {\n            var guid = 'guid';\n            tempID = this.parent.element.id + column[guid] + tempObj.property;\n        }\n        appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property, tempID));\n        return false;\n    };\n    SummaryCellRenderer.prototype.refreshWithAggregate = function (node, cell) {\n        var _this = this;\n        var cellNode = cell;\n        return function (args) {\n            var cell = cellNode;\n            var field = cell.column.columnName ? cell.column.columnName : null;\n            var curCell = (!isNullOrUndefined(field) ? args.cells.filter(function (cell) {\n                return cell.column.columnName === field;\n            })[0] : null);\n            if (node.parentElement && node.parentElement.getAttribute('data-uid') === args.dataUid && field &&\n                field === curCell.column.columnName) {\n                _this.refreshTD(node, curCell, args.data);\n            }\n        };\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var prevTop = 0;\n        var prevLeft = 0;\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top ? 'down' : 'up';\n            direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n            prevTop = top;\n            prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                onEnterCallback(_this.element, current, direction, { top: top, left: left }, _this.fromWheel, check);\n            }\n            if (check) {\n                var fn = debounced100; //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                    focusElement: document.activeElement });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { isGroupAdaptive } from '../base/util';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var _this = this;\n        var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        this.checkAndResetCache(notifyArgs.requestType);\n        if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n            return result = this.parent.vcRows;\n        }\n        if (this.parent.enableColumnVirtualization) {\n            info.blockIndexes.forEach(function (value) {\n                if (_this.isBlockAvailable(value)) {\n                    _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n                }\n            });\n        }\n        info.blockIndexes.forEach(function (value) {\n            if (!_this.isBlockAvailable(value)) {\n                var rows = _this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n                });\n                if (isGroupAdaptive(_this.parent) && !_this.parent.vcRows.length) {\n                    _this.parent.vRows = rows;\n                    _this.parent.vcRows = rows;\n                }\n                var median = void 0;\n                if (isGroupAdaptive(_this.parent)) {\n                    median = _this.model.pageSize / 2;\n                    if (!_this.isBlockAvailable(indexes[0])) {\n                        _this.cache[indexes[0]] = rows.slice(0, median);\n                    }\n                    if (!_this.isBlockAvailable(indexes[1])) {\n                        _this.cache[indexes[1]] = rows.slice(median, _this.model.pageSize);\n                    }\n                }\n                else {\n                    median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n                    if (!_this.isBlockAvailable(indexes[0])) {\n                        _this.cache[indexes[0]] = rows.slice(0, median);\n                    }\n                    if (!_this.isBlockAvailable(indexes[1])) {\n                        _this.cache[indexes[1]] = rows.slice(median);\n                    }\n                }\n            }\n            if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n                _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n            }\n            result.push.apply(result, _this.cache[value]);\n            if (_this.isBlockAvailable(value)) {\n                loadedBlocks.push(value);\n            }\n        });\n        info.blockIndexes = loadedBlocks;\n        var grouping = 'records';\n        if (this.parent.allowGrouping) {\n            this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n        }\n        else {\n            this.parent.currentViewData = result.map(function (m) { return m.data; });\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder',\n            'save', 'delete'].some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n        Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n            block = block + gLen;\n            _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n        });\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var _this = this;\n        var currentFirst = current[0];\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) {\n            if (Number(key) < block) {\n                rows = rows.concat(_this.cache[key]);\n            }\n        });\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var _this = this;\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive } from '../base/util';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        _this.currentInfo = {};\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.isSelection = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().firstChild;\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        if (this.parent.enablePersistence) {\n            this.parent.scrollPosition = scrollArgs.offset;\n        }\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        if (isNullOrUndefined(document.activeElement)) {\n            this.isFocused = false;\n        }\n        else {\n            this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        }\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (isGroupAdaptive(this.parent)) {\n            if ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n                && scrollArgs.direction === 'up' && viewInfo.blockIndexes[viewInfo.blockIndexes.length - 1] !== 2) {\n                return;\n            }\n            else {\n                viewInfo.event = 'refresh-virtual-block';\n                if (!isNullOrUndefined(viewInfo.offsets)) {\n                    viewInfo.offsets.top = this.content.scrollTop;\n                }\n                this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n                return;\n            }\n        }\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            if (Browser.isIE) {\n                this.parent.hideSpinner();\n            }\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        infoType.page = this.getPageFromTop(e.top + vHeight, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        if (this.parent.height === '100%') {\n            this.parent.element.style.height = '100%';\n        }\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n        this.virtualEle.adjustTable(cOffset, translate);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        if (!isNullOrUndefined(target.parentNode)) {\n            remove(target);\n        }\n        var tbody = this.parent.element.querySelector('.e-content').querySelector('tbody');\n        if (tbody) {\n            remove(tbody);\n            target = null;\n        }\n        target = this.parent.createElement('tbody');\n        target.appendChild(newChild);\n        this.getTable().appendChild(target);\n        if (this.parent.groupSettings.columns.length) {\n            if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused) {\n            this.content.focus();\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    VirtualContentRenderer.prototype.setVirtualHeight = function () {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        this.virtualEle.setVirtualHeight(this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()], width);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = (isGroupAdaptive(this.parent)) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop <= _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop + cHeight, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        if (result + blockHeight > this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()]) {\n            result -= (result + blockHeight) - this.offsets[this.getTotalBlocks()];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            if (Browser.isIE && !isWheel && check && !_this.preventEvent) {\n                _this.parent.showSpinner();\n            }\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(x, 0);\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.dataBound = function () {\n        if (this.isSelection) {\n            this.isSelection = false;\n            this.parent.selectRow(this.selectedRowIndex);\n        }\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.parent[action](events.selectVirtualRow, this.selectVirtualRow, this);\n        this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            var gObj = _this.parent;\n            if (gObj.enablePersistence && gObj.scrollPosition) {\n                _this.content.scrollTop = gObj.scrollPosition.top;\n                var scrollValues = { direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                    offset: gObj.scrollPosition, focusElement: gObj.element };\n                _this.scrollListener(scrollValues);\n                if (gObj.enableColumnVirtualization) {\n                    _this.content.scrollLeft = gObj.scrollPosition.left;\n                }\n            }\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n        var rows = this.parent.vcRows;\n        return Math.floor((rows.length / this.getBlockSize()) < 1 ? 1 : rows.length / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        if (isGroupAdaptive(this.parent)) {\n            return this.parent.getDataRows()[index];\n        }\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return this.parent.getDataRows()[index - startIdx];\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var _this = this;\n        var gObj = this.parent;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        Array.apply(null, Array(total)).map(function () { return ++row; })\n            .forEach(function (block) {\n            var tmp = (_this.vgenerator.cache[block] || []).length;\n            var rem = !isGroupAdaptive(_this.parent) ? _this.count % bSize : (gObj.vcRows.length % bSize);\n            var size = !isGroupAdaptive(_this.parent) && block in _this.vgenerator.cache ?\n                tmp * _this.parent.getRowHeight() : rem && block === total ? rem * _this.parent.getRowHeight() : _this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n            _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n        });\n        this.offsetKeys = Object.keys(this.offsets);\n        if (isGroupAdaptive(this.parent)) {\n            this.parent.vGroupOffsets = this.offsets;\n        }\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    VirtualContentRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [];\n        rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = gObj.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            if (!needFullRefresh) {\n                var width = void 0;\n                if (column.visible) {\n                    width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (width > gObj.width) {\n                    this.setDisplayNone(tr, idx, displayVal, rows);\n                    this.virtualEle.setWrapperWidth(width + '');\n                    this.vgenerator.refreshColOffsets();\n                    this.refreshVirtualElement();\n                }\n                else {\n                    this.refreshContentRows({ requestType: 'refresh' });\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            this.parent.notify(events.partialRefresh, { rows: rows, args: { isFrozen: false, rows: rows } });\n        }\n    };\n    VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n        this.isSelection = true;\n        this.selectedRowIndex = args.selectedIndex;\n        var page = Math.ceil((args.selectedIndex + 1) / this.parent.pageSettings.pageSize);\n        var blockIndexes = this.vgenerator.getBlockIndexes(page);\n        var scrollTop = this.offsets[blockIndexes[0] - 1];\n        this.parent.getContent().firstElementChild.scrollTop = scrollTop;\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().firstChild;\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.refreshUI.call(this);\n    };\n    VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n                var tablewidth = void 0;\n                if (column.visible) {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (tablewidth > gObj.width) {\n                    this.setDisplayNone(column, displayVal);\n                    this.virtualEle.setWrapperWidth(tablewidth + '');\n                    this.gen.refreshColOffsets();\n                }\n                else {\n                    this.refreshUI();\n                }\n            }\n            else {\n                this.refreshUI();\n            }\n        }\n    };\n    VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n        for (var _i = 0, _a = [].slice.apply(this.getTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            if (ele.querySelector('[e-mappinguid]') &&\n                ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n                setStyleAttribute(ele, { 'display': displayVal });\n                break;\n            }\n        }\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        this.parent.log(['limitation', 'virtual_height'], 'virtualization');\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.enableColumnVirtualization) {\n            renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n        }\n        renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.parent.height :\n            this.parent.element.getBoundingClientRect().height;\n        this.blockSize = ~~(vHeight / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var mTbody;\n        var tbody;\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = this.parent.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.getContentTable().querySelector('tbody');\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').remove();\n        }\n        this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(args.row, tbody.firstChild) : tbody.appendChild(args.row);\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        if (this.parent.getFrozenColumns()) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n                mTbody = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            this.parent.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mEle, mTbody.firstChild) : mTbody.appendChild(mEle);\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.getFrozenColumns()) {\n            var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n            var fCont = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n            var mCont = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            var fHdr = this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            if (this.parent.frozenRows && idx >= this.parent.frozenRows) {\n                idx -= this.parent.frozenRows;\n            }\n            if (fCont.contains(row)) {\n                return mCont.children[idx];\n            }\n            else if (mCont.contains(row)) {\n                return fCont.children[idx];\n            }\n            else if (fHdr.contains(row)) {\n                return mHdr.children[idx];\n            }\n            else if (mHdr.contains(row)) {\n                return fHdr.children[idx];\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        if (closest(args.row, '.e-movablecontent')) {\n            args.row = this.getFreezeRow(args.row);\n        }\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        tdElement = this.updateFreezeEdit(args.row, tdElement);\n        args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n        args.row.classList.add('e-editedrow');\n        this.refreshFreezeEdit(args.row, args);\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        if (this.parent.getFrozenColumns()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.e-frozenheader';\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.e-frozencontent';\n            }\n            var mTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                form.innerHTML = '';\n                this.appendChildren(form, args.rowData, false);\n            }\n            var fRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add('e-editedrow');\n        }\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        if (!this.parent.editSettings.template) {\n            this.renderMovable(ele, mEle);\n            mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n                .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        }\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        var frzCols = this.parent.getFrozenColumns();\n        for (var i = 0; i < frzCols; i++) {\n            mEle.querySelector('tr').removeChild(mEle.querySelector('tr').children[0]);\n        }\n        for (var i = frzCols, len = ele.querySelector('tr').childElementCount; i < len; i++) {\n            ele.querySelector('tr').removeChild(ele.querySelector('tr').children[ele.querySelector('tr').childElementCount - 1]);\n        }\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        var isDragable = gObj.isRowDragable() ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length - gObj.getVisibleFrozenColumns() + gLen + isDetail + isDragable).toString() }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = this.parent.createElement('tbody');\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            var td_1 = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate'));\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { classList } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        args.cell.innerHTML = '';\n        args.cell.appendChild(this.getEditElement(elements, args));\n        args.cell.classList.remove('e-ellipsistooltip');\n        args.cell.classList.add('e-editedbatchcell');\n        classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper', styles: 'width: auto' });\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        // let position: PositionDataModel = this.parent.element.getBoundingClientRect().height < 400 ?\n        //     { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog(extend({\n            header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements, args),\n            showCloseIcon: true,\n            allowDragging: true,\n            // position: position,\n            close: this.dialogClose.bind(this),\n            closeOnEscape: true, width: gObj.editSettings.template ? 'auto' : '330px',\n            target: args.target ? args.target : document.body, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        }, gObj.editSettings.dialog.params));\n        if (!isBlazor()) {\n            args.dialog = this.dialogObj;\n        }\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.dialogObj.appendTo(this.dialog);\n        this.parent.applyBiggerTheme(this.dialogObj.element.parentElement);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n        this.destroy();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings);\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n            var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n            updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings);\n            div.appendChild(form);\n            return div;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editModule.checkColumnIsGrouped(cols[i]) || cols[i].commands || cols[i].commandsTemplate) {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = this.parent.createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, extend, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.parent.notify(events.beforeStartEdit, args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.editSettings.mode === 'Dialog' ?\n            document.querySelector('#' + gObj.element.id + '_dialogEdit_wrapper').querySelector('.e-gridform') :\n            gObj.element.querySelector('.e-gridform');\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute('aria-rowindex'), 10);\n            if (gObj.frozenRows && ((args.requestType === 'add' && gObj.editSettings.newRowPosition === 'Top')\n                || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            }\n            else {\n                fForm = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n                var cellArgs = extend({}, args);\n                cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                if (isNullOrUndefined(cellArgs.element) && frzCols) {\n                    cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                }\n                if (typeof col.edit.write === 'string') {\n                    getObject(col.edit.write, window)(cellArgs);\n                }\n                else {\n                    col.edit.write(cellArgs);\n                }\n                continue;\n            }\n            if (this.parent.editModule.checkColumnIsGrouped(col) || col.commands) {\n                continue;\n            }\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (frzCols && cols.indexOf(col) >= frzCols && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n        if (frzCols !== 0 && !this.parent.allowTextWrap && ((args.requestType === 'add') || args.requestType === 'beginEdit')\n            && this.parent.editSettings.mode !== 'Dialog' && !isNullOrUndefined(form) && !isNullOrUndefined(fForm)) {\n            var mTdElement = (fForm.querySelector('tr').children[0]);\n            var fTdElement = (form.querySelector('tr').children[0]);\n            if (fTdElement.offsetHeight > mTdElement.offsetHeight) {\n                mTdElement.style.height = fTdElement.offsetHeight + 'px';\n            }\n            else {\n                fTdElement.style.height = mTdElement.offsetHeight + 'px';\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            elem.focus();\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        if (this.parent.editSettings.template) {\n            return {};\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (this.parent.editModule.checkColumnIsGrouped(col)) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var cell = cells.filter(function (cell) { return cell.rowID; });\n                var td = cellRenderer.render(cell[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (col.editTemplate) {\n                input = this.parent.createElement('span', { attrs: { 'e-mappinguid': col.uid } });\n                var tempID = this.parent.element.id + col.uid + 'editTemplate';\n                appendChildren(input, col.getEditTemplate()(args.rowData, this.parent, 'editTemplate', tempID));\n                if (isBlazor()) {\n                    updateBlazorTemplate(tempID, 'EditTemplate', col);\n                }\n            }\n            else {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    input = temp(tArgs);\n                }\n                else {\n                    input = col.edit.create(tArgs);\n                }\n                if (typeof input === 'string') {\n                    var div = this.parent.createElement('div');\n                    div.innerHTML = input;\n                    input = div.firstChild;\n                }\n                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n                var complexFieldName = getComplexFieldID(col.field);\n                attributes(isInput ? input.querySelector('input') : input, {\n                    name: complexFieldName, 'e-mappinguid': col.uid,\n                    id: gObj.element.id + complexFieldName\n                });\n                classList(input, ['e-input', 'e-field'], []);\n                if (col.textAlign === 'Right') {\n                    input.classList.add('e-ralign');\n                }\n                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                    (col.isIdentity && args.requestType === 'add')) { // already disabled in cell plugins\n                    input.setAttribute('disabled', '');\n                }\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            chkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n        this.flag = false;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, filtering: this.ddFiltering.bind(this), actionComplete: this.ddActionComplete.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.ddFiltering = function (e) {\n        this.flag = true;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n        if (!this.flag && this.column.dataSource) {\n            this.column.dataSource.dataSource.json = e.result;\n        }\n        this.flag = false;\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n            var dlgObj = document.querySelector('#' + dlgElement.id).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend, Internationalization } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.create = function (args) {\n        var complexFieldName = getComplexFieldID(args.column.field);\n        this.instances = new Internationalization(this.parent.locale);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        var value = this.instances.getNumberParser({ format: 'n' })(element.value);\n        return value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new NumericTextBox(extend({\n            value: parseFloat(getObject(args.column.field, args.rowData)),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n        }, col.edit.params));\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n        this.obj.appendTo(args.element);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID } from '../base/util';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = this.parent.createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + getComplexFieldID(col.field), name: getComplexFieldID(col.field),\n                style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var inputargs = {\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n                placeholder: isInline ? '' : args.column.headerText\n            }\n        };\n        Input.createInput(inputargs, this.parent.createElement);\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend, isBlazor } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    this.parent.selectRow(0);\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                if (isBlazor() && !this.parent.isJsComponent) {\n                    var d = 'data';\n                    e[d] = e[d][0];\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                this.parent.selectRow(this.editRowIndex);\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var _this = this;\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        if (isBlazor()) {\n            var cols = this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    resetBlazorTemplate(gObj.element.id + col.uid, 'Template', this.rowIndex);\n                }\n            }\n        }\n        if (isGroupAdaptive(gObj)) {\n            var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            this.previousData = rObj.data;\n        }\n        else {\n            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        }\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData, target: undefined\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.row = tr;\n        }\n        gObj.trigger(events.beginEdit, args, function (begineditargs) {\n            begineditargs.type = 'actionBegin';\n            gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n                if (!editargs.cancel) {\n                    gObj.isEdit = true;\n                    editargs.row = editargs.row ? editargs.row : tr;\n                    if (gObj.editSettings.mode !== 'Dialog') {\n                        gObj.clearSelection();\n                    }\n                    if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n                        gObj.selectionModule.preventFocus = true;\n                        editargs.row.classList.add('e-dlgeditrow');\n                    }\n                    _this.renderer.update(editargs);\n                    _this.uid = tr.getAttribute('data-uid');\n                    gObj.editModule.applyFormValidation();\n                    editargs.type = 'actionComplete';\n                    gObj.trigger(events.actionComplete, editargs);\n                    _this.args = editargs;\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                    if (isBlazor()) {\n                        _this.parent.notify(events.toolbarRefresh, {});\n                        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n                        _this.parent.notify('start-edit', {});\n                    }\n                }\n            });\n        });\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var _this = this;\n        var gObj = this.parent;\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index]\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        if (args.promise) {\n            args.promise.then(function () { return gObj.refresh(); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            gObj.refresh();\n        }\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var form1 = gObj.editModule.formObj.validate();\n        var form2 = gObj.editModule.mFormObj ? gObj.editModule.mFormObj.validate() : true;\n        return (form1 && form2);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        var isDlg = gObj.editSettings.mode === 'Dialog';\n        var dlgWrapper = document.querySelector('#' + gObj.element.id + '_dialogEdit_wrapper');\n        var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.element.querySelector('.e-gridform');\n        editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n        if (gObj.getFrozenColumns() && gObj.editSettings.mode === 'Normal') {\n            var mForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            if (gObj.frozenRows && mForm) {\n                editedData = gObj.editModule.getCurrentEditedData(mForm, editedData);\n            }\n            else {\n                editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform'), editedData);\n            }\n        }\n        if (isDlg ? dlgWrapper.querySelectorAll('.e-editedrow').length : gObj.element.querySelectorAll('.e-editedrow').length) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n                if (endEditArgs.cancel) {\n                    return;\n                }\n                gObj.showSpinner();\n                gObj.notify(events.updateData, endEditArgs);\n            });\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add') {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n            var rowData = 'rowData';\n            args.data = extend({}, extend({}, args[rowData], args.data), e);\n        }\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        this.refreshRow(args.data);\n        this.updateCurrentViewData(args.data);\n        this.blazorTemplate();\n        this.parent.trigger(events.actionComplete, args);\n        if (isBlazor()) {\n            this.parent.notify(events.toolbarRefresh, {});\n        }\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection)) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n            }\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.blazorTemplate = function () {\n        var cols = this.parent.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[i];\n            if (col.template) {\n                updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n            }\n            if (col.editTemplate) {\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n            }\n        }\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, e);\n        this.parent.hideSpinner();\n        this.parent.log('actionfailure', { error: e });\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            row.refresh(rowObj, this.parent.getColumns(), true);\n            if (frzCols) {\n                var uid = void 0;\n                var tr = this.parent.element.querySelector('[data-uid=' + rowObj.uid + ']');\n                if ((parentsUntil(tr, 'e-frozencontent')) || (parentsUntil(tr, 'e-frozenheader'))) {\n                    uid = this.parent.getMovableRows()[rowObj.index].getAttribute('data-uid');\n                }\n                else {\n                    uid = this.parent.getRows()[rowObj.index].getAttribute('data-uid');\n                }\n                rowObj = this.parent.getRowObjectFromUID(uid);\n                rowObj.changes = data;\n                row.refresh(rowObj, this.parent.columns, true);\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        var _this = this;\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        this.blazorTemplate();\n        gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n            if (_this.parent.editSettings.mode === 'Dialog') {\n                _this.parent.notify(events.dialogDestroy, {});\n            }\n            gObj.isEdit = false;\n            _this.stopEditStatus();\n            closeEditArgs.type = events.actionComplete;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                _this.refreshRow(closeEditArgs.data);\n            }\n            if (!gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n                !gObj.getContentTable().querySelector('tr.e-row')) {\n                gObj.renderModule.emptyRow();\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.selectRow(_this.rowIndex);\n            }\n            gObj.trigger(events.actionComplete, closeEditArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('close-edit', {});\n            }\n        });\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        (gObj.columnModel).forEach(function (col) {\n            if (col.field) {\n                DataUtil.setValue(col.field, col.defaultValue, _this.previousData);\n            }\n        });\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData, target: undefined\n        };\n        gObj.trigger(events.actionBegin, args, function (addArgs) {\n            if (addArgs.cancel) {\n                return;\n            }\n            gObj.isEdit = true;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.clearSelection();\n            }\n            _this.renderer.addNew(addArgs);\n            gObj.editModule.applyFormValidation();\n            addArgs.type = events.actionComplete;\n            addArgs.row = gObj.element.querySelector('.e-addedrow');\n            gObj.trigger(events.actionComplete, addArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n            _this.args = addArgs;\n        });\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getObject(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        var args = {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        };\n        var dataInString = 'data';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            args[dataInString] = args[dataInString][0];\n        }\n        this.parent.notify(events.modelChanged, args);\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var elem = gObj.element.querySelector('.e-addedrow');\n        var mElem;\n        var editMElem;\n        if (gObj.getFrozenColumns()) {\n            mElem = gObj.element.querySelectorAll('.e-addedrow')[1];\n            editMElem = gObj.element.querySelectorAll('.e-editedrow')[1];\n            if (mElem) {\n                remove(mElem);\n            }\n            if (editMElem) {\n                editMElem.classList.remove('e-editedrow');\n            }\n        }\n        if (elem) {\n            remove(elem);\n        }\n        elem = gObj.element.querySelector('.e-editedrow');\n        if (elem) {\n            elem.classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.recordAdded, this.requestSuccess, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.recordAdded, this.requestSuccess);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { remove, classList, updateBlazorTemplate, blazorTemplates, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.editNextValCell, this.editNextValCell, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.editNextValCell, this.editNextValCell);\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            if (this.parent.isEdit) {\n                this.saveCell();\n                this.editNextValCell();\n            }\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))\n            && !target.parentElement.classList.contains('e-editedrow')) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field, this.isAddRow(parseInt(tr.getAttribute('aria-rowindex'), 10)));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenColumns();\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            if (this.parent.isEdit && clear) {\n                this.saveCell();\n            }\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!this.parent.element.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    if (isEdit || this.parent.isLastCellPrimaryKey) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    if (isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.closeEdit = function () {\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        var argument = { cancel: false, batchChanges: this.getBatchChanges() };\n        gObj.notify(events.beforeBatchCancel, argument);\n        if (argument.cancel) {\n            return;\n        }\n        if (gObj.frozenColumns && rows.length < this.parent.currentViewData.length * 2) {\n            rows.push.apply(rows, this.parent.getMovableRowsObject());\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n                }\n            }\n        }\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tr;\n        var mTr;\n        var movObj;\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        gObj.clearSelection();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDirty) {\n                if (gObj.frozenColumns) {\n                    movObj = gObj.getMovableRowsObject()[rows[i].index];\n                    movObj.isDirty = true;\n                }\n                tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n                if (gObj.frozenRows && !tr) {\n                    tr = gObj.getHeaderContent().querySelector('[data-uid=' + rows[i].uid + ']');\n                }\n                if (gObj.frozenColumns) {\n                    if (gObj.frozenRows) {\n                        mTr = gObj.getHeaderContent().querySelector('.e-movableheader')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                        if (!mTr) {\n                            mTr = gObj.getContent().querySelector('.e-movablecontent')\n                                .querySelector('[data-uid=' + rows[i].uid + ']');\n                        }\n                    }\n                    else {\n                        mTr = gObj.getContent().querySelector('.e-movablecontent')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                }\n                if (tr || mTr) {\n                    if (tr && tr.classList.contains('e-insertedrow') || mTr && mTr.classList.contains('e-insertedrow')) {\n                        if (tr) {\n                            remove(tr);\n                        }\n                        if (mTr && (gObj.frozenColumns || gObj.frozenRows)) {\n                            remove(mTr);\n                        }\n                        this.removeRowObjectFromUID(rows[i].uid);\n                        i--;\n                    }\n                    else {\n                        refreshForeignData(rows[i], this.parent.getForeignKeyColumns(), rows[i].data);\n                        delete rows[i].changes;\n                        delete rows[i].edit;\n                        rows[i].isDirty = false;\n                        var ftr = mTr ? mTr : tr;\n                        classList(ftr, [], ['e-hiddenrow', 'e-updatedtd']);\n                        rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n                        if (this.parent.aggregates.length > 0) {\n                            var type = 'type';\n                            var editType = [];\n                            editType[type] = 'cancel';\n                            this.parent.notify(events.refreshFooterRenderer, editType);\n                            if (this.parent.groupSettings.columns.length > 0) {\n                                this.parent.notify(events.groupAggregates, editType);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (!gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.renderModule.renderEmptyRow();\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n        if (gObj.frozenColumns) {\n            rows.splice(this.parent.getMovableRowsObject().length, rows.length);\n        }\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        this.bulkDelete(fieldname, data);\n        if (this.parent.aggregates.length > 0) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n            if (this.parent.groupSettings.columns.length > 0) {\n                this.parent.notify(events.groupAggregates, {});\n            }\n        }\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var gObj = this.parent;\n        var deletedRecords = 'deletedRecords';\n        if (gObj.isCheckBoxSelection) {\n            var checkAllBox = gObj.element.querySelector('.e-checkselectall').parentElement;\n            if (checkAllBox.classList.contains('e-checkbox-disabled') &&\n                gObj.pageSettings.totalRecordsCount > gObj.currentViewData.length) {\n                removeClass([checkAllBox], ['e-checkbox-disabled']);\n            }\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    blazorTemplates[this.parent.element.id + col.uid] = [];\n                    resetBlazorTemplate(this.parent.element.id + col.uid, 'Template');\n                }\n            }\n        }\n        this.saveCell();\n        if (gObj.isEdit || this.editNextValCell() || gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        if (this.parent.selectionSettings.type === 'Multiple' && changes[deletedRecords].length) {\n            changes[deletedRecords] = changes[deletedRecords].concat(this.removeSelectedData);\n            this.removeSelectedData = [];\n        }\n        var original = {\n            changedRecords: this.parent.getRowsObject()\n                .filter(function (row) { return row.isDirty && ['add', 'delete'].indexOf(row.edit) === -1; })\n                .map(function (row) { return row.data; })\n        };\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args, function (beforeBatchSaveArgs) {\n            if (beforeBatchSaveArgs.cancel) {\n                return;\n            }\n            gObj.showSpinner();\n            gObj.notify(events.bulkSave, { changes: changes, original: original });\n        });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        var mRows = this.parent.getMovableRowsObject();\n        var frzCols = this.parent.getFrozenColumns();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (frzCols) {\n                this.mergeBatchChanges(row, mRows[row.index], frzCols);\n            }\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    BatchEdit.prototype.mergeBatchChanges = function (row, mRow, frzCols) {\n        if (row.isDirty) {\n            if (mRow.isDirty) {\n                var i_1 = 0;\n                Object.keys(row.changes).forEach(function (key) {\n                    if (i_1 >= frzCols) {\n                        row.changes[key] = mRow.changes[key];\n                    }\n                    i_1++;\n                });\n            }\n        }\n        else if (mRow.isDirty) {\n            row.changes = mRow.changes;\n            row.isDirty = mRow.isDirty;\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        rows.splice(i, 1);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        var isTop = this.parent.editSettings.newRowPosition === 'Top';\n        isTop ? this.parent.getRowsObject().unshift(row) :\n            this.parent.getRowsObject().push(row);\n        var mRow = this.parent.getMovableRowsObject();\n        if (this.parent.getFrozenColumns() && !mRow.length) {\n            isTop ? mRow.unshift(row) : mRow.push(row);\n        }\n    };\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var _this = this;\n        this.removeSelectedData = [];\n        var gObj = this.parent;\n        if (data) {\n            gObj.selectRow(this.getIndexFromData(data));\n        }\n        var index = gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.row = data ? gObj.getRows()[index] : selectedRows[0];\n            if (!args.row) {\n                return;\n            }\n        }\n        gObj.trigger(events.beforeBatchDelete, args, function (beforeBatchDeleteArgs) {\n            if (beforeBatchDeleteArgs.cancel) {\n                return;\n            }\n            beforeBatchDeleteArgs.row = beforeBatchDeleteArgs.row ?\n                beforeBatchDeleteArgs.row : data ? gObj.getRows()[index] : selectedRows[0];\n            if (_this.parent.frozenColumns || selectedRows.length === 1) {\n                var uid = beforeBatchDeleteArgs.row.getAttribute('data-uid');\n                if (beforeBatchDeleteArgs.row.classList.contains('e-insertedrow')) {\n                    _this.removeRowObjectFromUID(uid);\n                    remove(beforeBatchDeleteArgs.row);\n                }\n                else {\n                    var rowObj = gObj.getRowObjectFromUID(uid);\n                    rowObj.isDirty = true;\n                    rowObj.edit = 'delete';\n                    classList(beforeBatchDeleteArgs.row, ['e-hiddenrow', 'e-updatedtd'], []);\n                    if (gObj.getFrozenColumns()) {\n                        classList(data ? gObj.getMovableRows()[index] : selectedRows[1], ['e-hiddenrow', 'e-updatedtd'], []);\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getMovableDataRows().length >= gObj.frozenRows) {\n                            gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n                                .appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                            gObj.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody')\n                                .appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                        }\n                    }\n                    else if (gObj.frozenRows && index < gObj.frozenRows && gObj.getDataRows().length >= gObj.frozenRows) {\n                        gObj.getHeaderContent().querySelector('tbody').appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                    }\n                }\n                delete beforeBatchDeleteArgs.row;\n            }\n            else {\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uniqueid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uniqueid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        var selectedRow = gObj.getRowObjectFromUID(uniqueid);\n                        selectedRow.isDirty = true;\n                        selectedRow.edit = 'delete';\n                        delete selectedRows[i];\n                    }\n                }\n            }\n            _this.refreshRowIdx();\n            _this.removeSelectedData = gObj.getSelectedRecords();\n            gObj.clearSelection();\n            gObj.selectRow(index);\n            gObj.trigger(events.batchDelete, beforeBatchDeleteArgs);\n            gObj.notify(events.batchDelete, { rows: _this.parent.getRowsObject() });\n            gObj.notify(events.toolbarRefresh, {});\n        });\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var rows = [];\n        var mRows = [];\n        var nonMovableRows = [];\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.frozenRows) {\n            rows = [].slice.call(this.parent.getHeaderTable().querySelector('tbody').children);\n            if (frzCols) {\n                mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n                for (var i = 0; i < mRows.length; i++) {\n                    nonMovableRows[i] = this.parent.createElement('tr', { className: 'emptynonmv' });\n                }\n            }\n        }\n        if (frzCols) {\n            mRows = mRows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n            nonMovableRows = nonMovableRows.concat([].slice.call(this.parent.element.querySelector('.e-movablecontent').querySelector('tbody').children));\n        }\n        rows = rows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                rows[i].setAttribute('aria-rowindex', j.toString());\n                if (frzCols) {\n                    mRows[i].setAttribute('aria-rowindex', j.toString());\n                    if (nonMovableRows[i].classList.contains('e-row')) {\n                        nonMovableRows[i].setAttribute('aria-rowindex', j.toString());\n                    }\n                }\n                j++;\n            }\n            else {\n                rows[i].removeAttribute('aria-rowindex');\n                if (frzCols) {\n                    mRows[i].removeAttribute('aria-rowindex');\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var _this = this;\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args, function (beforeBatchAddArgs) {\n            if (beforeBatchAddArgs.cancel) {\n                return;\n            }\n            _this.isAdded = true;\n            gObj.clearSelection();\n            var mTr;\n            var mTbody;\n            var row = new RowRenderer(_this.serviceLocator, null, _this.parent);\n            var model = new RowModelGenerator(_this.parent);\n            var modelData = model.generateRows([beforeBatchAddArgs.defaultData]);\n            var tr = row.render(modelData[0], gObj.getColumns());\n            var col;\n            var index;\n            for (var i = 0; i < _this.parent.groupSettings.columns.length; i++) {\n                tr.insertBefore(_this.parent.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n                modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            var tbody = gObj.getContentTable().querySelector('tbody');\n            tr.classList.add('e-insertedrow');\n            if (tbody.querySelector('.e-emptyrow')) {\n                tbody.querySelector('.e-emptyrow').remove();\n            }\n            if (gObj.getFrozenColumns()) {\n                mTr = _this.renderMovable(tr);\n                if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                    mTbody = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n                }\n                else {\n                    mTbody = gObj.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                }\n                _this.parent.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mTr, mTbody.firstChild) : mTbody.appendChild(mTr);\n                addClass(mTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n                if (_this.parent.height === 'auto') {\n                    _this.parent.notify(events.frozenHeight, {});\n                }\n            }\n            if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                tbody = gObj.getHeaderContent().querySelector('tbody');\n            }\n            else {\n                tbody = gObj.getContent().querySelector('tbody');\n            }\n            _this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(tr, tbody.firstChild) : tbody.appendChild(tr);\n            addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            modelData[0].isDirty = true;\n            modelData[0].changes = extend({}, {}, modelData[0].data, true);\n            modelData[0].edit = 'add';\n            _this.addRowObject(modelData[0]);\n            _this.refreshRowIdx();\n            _this.focus.forgetPrevious();\n            gObj.notify(events.batchAdd, { rows: _this.parent.getRowsObject(), args: { isFrozen: _this.parent.getFrozenColumns() } });\n            var changes = _this.getBatchChanges();\n            var addedRecords = 'addedRecords';\n            _this.parent.editSettings.newRowPosition === 'Top' ? gObj.selectRow(0) :\n                gObj.selectRow(_this.parent.getCurrentViewRecords().length + changes[addedRecords].length - 1);\n            if (!data) {\n                index = _this.findNextEditableCell(0, true);\n                col = gObj.getColumns()[index];\n                _this.parent.editSettings.newRowPosition === 'Top' ? _this.editCell(0, col.field, true) :\n                    _this.editCell(_this.parent.getCurrentViewRecords().length + changes[addedRecords].length - 1, col.field, true);\n            }\n            if (_this.parent.aggregates.length > 0 && data) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n            }\n            var args1 = {\n                defaultData: beforeBatchAddArgs.defaultData, row: tr,\n                columnObject: col, columnIndex: index, primaryKey: beforeBatchAddArgs.primaryKey, cell: tr.cells[index]\n            };\n            gObj.trigger(events.batchAdd, args1);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n        });\n    };\n    BatchEdit.prototype.renderMovable = function (ele) {\n        var mEle = ele.cloneNode(true);\n        for (var i = 0; i < this.parent.frozenColumns; i++) {\n            mEle.removeChild(mEle.children[0]);\n        }\n        for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n            ele.removeChild(ele.children[ele.childElementCount - 1]);\n        }\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd, isValOnly) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        var validation;\n        for (var i = columnIndex; i < endIndex; i++) {\n            validation = isValOnly ? isNullOrUndefined(cols[i].validationRules) : false;\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey) && !validation) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = (gObj.columnModel); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.field) {\n                setValue(col.field, col.defaultValue ? col.defaultValue : dValues[col.type], data);\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.getAttribute('index'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var _this = this;\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (isBlazor() && col.template && !isAdd) {\n            resetBlazorTemplate(this.parent.element.id + col.uid, 'Template', index);\n        }\n        if (gObj.editSettings.allowEditing && col.allowEditing) {\n            if (gObj.isEdit && !(this.cellDetails.column.field === field\n                && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index))) {\n                this.saveCell();\n                if (this.cellDetails.rowIndex === index && this.cellDetails.column.field === field) {\n                    return;\n                }\n            }\n            if (gObj.isEdit) {\n                return;\n            }\n            var row_1;\n            var rowData_1;\n            var mRowData = void 0;\n            var colIdx = gObj.getColumnIndexByField(field);\n            var frzCols = gObj.getFrozenColumns();\n            if (frzCols && colIdx >= frzCols) {\n                row_1 = gObj.getMovableDataRows()[index];\n                mRowData = this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[index].getAttribute('data-uid'));\n                rowData_1 = mRowData.changes ? extend({}, {}, mRowData.changes, true) : extend({}, {}, this.getDataByIndex(index), true);\n            }\n            else {\n                row_1 = gObj.getDataRows()[index];\n                rowData_1 = extend({}, {}, this.getDataByIndex(index), true);\n            }\n            if ((keys[0] === col.field && !row_1.classList.contains('e-insertedrow')) || col.columns ||\n                (col.isPrimaryKey && col.isIdentity)) {\n                this.parent.isLastCellPrimaryKey = true;\n                return;\n            }\n            this.parent.isLastCellPrimaryKey = false;\n            var rowObj = gObj.getRowObjectFromUID(row_1.getAttribute('data-uid'));\n            var cells_1 = [].slice.apply(row_1.cells);\n            var args = {\n                columnName: col.field, columnObject: col, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n                primaryKey: keys, rowData: rowData_1,\n                validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n                value: getObject(col.field, rowData_1),\n                type: !isAdd ? 'edit' : 'add', cancel: false,\n                foreignKeyData: rowObj && rowObj.foreignKeyData\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                args.cell = cells_1[this.getColIndex(cells_1, this.getCellIdx(col.uid))];\n                args.row = row_1;\n                if (!args.cell) {\n                    return;\n                }\n            }\n            gObj.trigger(events.cellEdit, args, function (cellEditArgs) {\n                if (cellEditArgs.cancel) {\n                    return;\n                }\n                cellEditArgs.cell = cellEditArgs.cell ? cellEditArgs.cell : cells_1[_this.getColIndex(cells_1, _this.getCellIdx(col.uid))];\n                cellEditArgs.row = cellEditArgs.row ? cellEditArgs.row : row_1;\n                _this.cellDetails = {\n                    rowData: rowData_1, column: col, value: cellEditArgs.value, isForeignKey: cellEditArgs.isForeignKey, rowIndex: index,\n                    cellIndex: parseInt(cellEditArgs.cell.getAttribute('aria-colindex'), 10),\n                    foreignKeyData: cellEditArgs.foreignKeyData\n                };\n                if (cellEditArgs.cell.classList.contains('e-updatedtd')) {\n                    _this.isColored = true;\n                    cellEditArgs.cell.classList.remove('e-updatedtd');\n                }\n                gObj.isEdit = true;\n                gObj.clearSelection();\n                if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                    gObj.selectRow(_this.cellDetails.rowIndex, true);\n                }\n                _this.renderer.update(cellEditArgs);\n                _this.parent.notify(events.batchEditFormRendered, cellEditArgs);\n                _this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n                gObj.editModule.applyFormValidation([col]);\n                _this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n            });\n        }\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var col = this.parent.getColumnByField(field);\n        var index = this.parent.getColumnIndexByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = this.parent.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[index];\n            if (this.parent.getFrozenColumns()) {\n                var cells = [].slice.call(this.parent.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')).concat([].slice.call(this.parent.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')));\n                td = cells[index];\n            }\n            var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n        if (!rowObj.changes) {\n            rowObj.changes = extend({}, {}, rowObj.data, true);\n        }\n        if (!isNullOrUndefined(field)) {\n            DataUtil.setValue(field, value, rowObj.changes);\n        }\n        if (rowObj.data[field] !== value) {\n            rowObj.isDirty = true;\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        this.setChanges(rowObj, column.field, value);\n        var frzCols = this.parent.getFrozenColumns();\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && this.getCellIdx(column.uid) >= frzCols && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - (this.getCellIdx(column.uid) >= frzCols ? frzCols : 0)], rowObj.changes, { 'index': this.getCellIdx(column.uid) });\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.editNextValCell = function () {\n        var gObj = this.parent;\n        if (this.isAdded && !gObj.isEdit) {\n            for (var i = this.cellDetails.cellIndex; i < gObj.getColumns().length; i++) {\n                if (gObj.isEdit) {\n                    return;\n                }\n                var index = this.findNextEditableCell(this.cellDetails.cellIndex + 1, true, true);\n                var col = gObj.getColumns()[index];\n                if (col) {\n                    this.editCell(0, col.field, true);\n                    this.saveCell();\n                }\n            }\n            if (!gObj.isEdit) {\n                this.isAdded = false;\n            }\n        }\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        var tr = parentsUntil(this.form, 'e-row');\n        var column = this.cellDetails.column;\n        var obj = {};\n        obj[column.field] = this.cellDetails.rowData[column.field];\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, obj);\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        var value = getObject(column.field, cloneEditedData);\n        if (!isNullOrUndefined(column.field)) {\n            setValue(column.field, value, editedData);\n        }\n        var args = {\n            columnName: column.field,\n            value: getObject(column.field, editedData),\n            rowData: this.cellDetails.rowData,\n            previousValue: this.cellDetails.value,\n            columnObject: column,\n            isForeignKey: this.cellDetails.isForeignKey, cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = this.form.parentElement;\n        }\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args, this.successCallBack(args, tr, column));\n            gObj.notify(events.batchForm, { formObj: this.form });\n        }\n        else {\n            this.successCallBack(args, tr, column)(args);\n        }\n    };\n    BatchEdit.prototype.successCallBack = function (cellSaveArgs, tr, column) {\n        var _this = this;\n        return function (cellSaveArgs) {\n            var gObj = _this.parent;\n            cellSaveArgs.cell = cellSaveArgs.cell ? cellSaveArgs.cell : _this.form.parentElement;\n            if (cellSaveArgs.cancel) {\n                return;\n            }\n            gObj.editModule.destroyForm();\n            gObj.isEdit = false;\n            gObj.editModule.destroyWidgets([column]);\n            if (isBlazor() && column.template && !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow')) {\n                updateBlazorTemplate(gObj.element.id + column.uid, 'Template', column, false);\n            }\n            _this.parent.notify(events.tooltipDestroy, {});\n            _this.refreshTD(cellSaveArgs.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), cellSaveArgs.value);\n            removeClass([tr], ['e-editedrow', 'e-batchrow']);\n            removeClass([cellSaveArgs.cell], ['e-editedbatchcell', 'e-boolcell']);\n            if (!isNullOrUndefined(cellSaveArgs.value) && cellSaveArgs.value.toString() ===\n                (!isNullOrUndefined(_this.cellDetails.value) ? _this.cellDetails.value : '').toString() && !_this.isColored\n                || (isNullOrUndefined(cellSaveArgs.value) && isNullOrUndefined(_this.cellDetails.value) &&\n                    !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow'))) {\n                cellSaveArgs.cell.classList.remove('e-updatedtd');\n            }\n            gObj.trigger(events.cellSaved, cellSaveArgs);\n            gObj.notify(events.toolbarRefresh, {});\n            _this.isColored = false;\n            if (_this.parent.aggregates.length > 0) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n                if (_this.parent.groupSettings.columns.length > 0 && !_this.isAddRow(_this.cellDetails.rowIndex)) {\n                    _this.parent.notify(events.groupAggregates, {});\n                }\n            }\n        };\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if ((e.action === 'tab' || e.action === 'shiftTab') && this.parent.isEdit) {\n            var gObj = this.parent;\n            var rowcell = parentsUntil(e.target, 'e-rowcell');\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    var columnIndex = e.action === 'tab' ? visibleColumns.length - 1 : 0;\n                    if (visibleColumns[columnIndex].field === cell.getAttribute('id').slice(this.parent.element.id.length)) {\n                        if (this.cellDetails.rowIndex !== gObj.getRows().length - 1) {\n                            this.saveCell();\n                        }\n                        else {\n                            if (gObj.editSettings.newRowPosition === 'Top') {\n                                gObj.editSettings.newRowPosition = 'Bottom';\n                                this.addRecord();\n                                gObj.editSettings.newRowPosition = 'Top';\n                            }\n                            else {\n                                this.addRecord();\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addCancelWhilePaging = function () {\n        if (this.validateFormObj()) {\n            this.parent.notify(events.destroyForm, {});\n            this.parent.isEdit = false;\n            this.isColored = false;\n        }\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","/**\n * `TemplateEditCell` is used to handle template cell.\n * @hidden\n */\nvar TemplateEditCell = /** @class */ (function () {\n    function TemplateEditCell(parent) {\n        this.parent = parent;\n    }\n    TemplateEditCell.prototype.read = function (element, value) {\n        return value;\n    };\n    TemplateEditCell.prototype.write = function () {\n        //\n    };\n    TemplateEditCell.prototype.destroy = function () {\n        //\n    };\n    return TemplateEditCell;\n}());\nexport { TemplateEditCell };\n","import { EventHandler, closest } from '@syncfusion/ej2-base';\nimport { extend, getValue, resetBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, getComplexFieldID, setComplexFieldID, getScrollBarWidth } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { TemplateEditCell } from '../renderer/template-edit-cell';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        var _this = this;\n        this.parent.columnModel.forEach(function (col) {\n            if (_this.parent.editSettings.template || col.editTemplate) {\n                var templteCell = 'templateedit';\n                col.edit = extend(new Edit.editCellType[templteCell](_this.parent), col.edit || {});\n            }\n            else {\n                col.edit = extend(new Edit.editCellType[col.editType && Edit.editCellType[col.editType] ?\n                    col.editType : 'defaultedit'](_this.parent, _this.serviceLocator), col.edit || {});\n            }\n        });\n        this.parent.log('primary_column_missing');\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    Edit.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n    };\n    Edit.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n    };\n    Edit.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.parent.notify(events.doubleTap, e);\n            }\n        }\n    };\n    Edit.prototype.getUserAgent = function () {\n        var userAgent = window.navigator.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            this.parent.notify('start-edit', {});\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.editModule.closeEdit();\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            this.parent.notify('close-edit', {});\n        }\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        this.editModule.addRecord(data, index);\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            this.parent.notify('start-add', {});\n        }\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.parent.editModule.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n            if (isNullOrUndefined(this.formObj) || this.formObj.validate()) {\n                this.showDialog('BatchSaveConfirm', this.dialogObj);\n                return;\n            }\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') || value === true ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepickeredit' && col.editType !== 'datetimepickeredit'\n                    && value && value.length) {\n                    val = new Date(value);\n                }\n                else if (value === '') {\n                    val = null;\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = this.parent.createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        var isStringTemplate = 'isStringTemplate';\n        obj[isStringTemplate] = true;\n        obj.appendTo(div);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                if (this.parent.editSettings.mode === 'Batch') {\n                    this.editModule.addCancelWhilePaging();\n                }\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.off(events.initialEnd, this.unwireEvents);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            [].slice.call(form.elements).forEach(function (element) {\n                if (element.hasAttribute('name')) {\n                    var field = setComplexFieldID(element.getAttribute('name'));\n                    var column = gObj.getColumnByField(field) || { field: field, type: element.getAttribute('type') };\n                    var value = void 0;\n                    if (column.type === 'checkbox' || column.type === 'boolean') {\n                        value = element.checked;\n                    }\n                    else if (element.value) {\n                        value = element.value;\n                        if (element.ej2_instances &&\n                            element.ej2_instances.length &&\n                            !isNullOrUndefined(element.ej2_instances[0].value)) {\n                            element.blur();\n                            value = element.ej2_instances[0].value;\n                        }\n                    }\n                    if (column.edit && typeof column.edit.read === 'string') {\n                        value = getValue(column.edit.read, window)(element, value);\n                    }\n                    else if (column.edit && column.edit.read) {\n                        value = column.edit.read(element, value);\n                    }\n                    value = gObj.editModule.getValueFromType(column, value);\n                    DataUtil.setValue(column.field, value, editedData);\n                }\n            });\n            return editedData;\n        }\n        gObj.columnModel.filter(function (col) { return col.editTemplate; }).forEach(function (col) {\n            if (form[getComplexFieldID(col.field)]) {\n                var inputElements = [].slice.call(form[getComplexFieldID(col.field)]);\n                inputElements = inputElements.length ? inputElements : [form[getComplexFieldID(col.field)]];\n                inputElements.forEach(function (input) {\n                    var value = _this.getValue(col, input, editedData);\n                    DataUtil.setValue(col.field, value, editedData);\n                });\n            }\n        });\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            if (col && col.field) {\n                var value = this.getValue(col, inputs[i], editedData);\n                DataUtil.setValue(col.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    Edit.prototype.getValue = function (col, input, editedData) {\n        var value = input.value;\n        var gObj = this.parent;\n        var temp = col.edit.read;\n        if (col.type === 'checkbox' || col.type === 'boolean') {\n            value = input.checked;\n        }\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n            value = gObj.editModule.getValueFromType(col, (temp)(input, value));\n        }\n        else {\n            value = gObj.editModule.getValueFromType(col, col.edit.read(input, value));\n        }\n        if (isNullOrUndefined(editedData[col.field]) && value === '') {\n            value = editedData[col.field];\n        }\n        return value;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save'];\n        if (this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n            && restrictedRequestTypes.indexOf(e.requestType) === -1) {\n            this.destroyWidgets();\n            this.destroyForm();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            this.parent.destroyTemplate(['editSettingsTemplate']);\n        }\n        cols = cols ? cols : this.parent.getColumns();\n        if (cols.some(function (column) { return !isNullOrUndefined(column.editTemplate); })) {\n            this.parent.destroyTemplate(['editTemplate']);\n        }\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            var temp = col.edit.destroy;\n            if (isBlazor() && col.editTemplate) {\n                resetBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate');\n            }\n            if (col.edit.destroy) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp();\n                }\n                else {\n                    col.edit.destroy();\n                }\n            }\n        }\n        [].slice.call(this.formObj.element.elements).forEach(function (element) {\n            if (element.hasAttribute('name')) {\n                if (element.ej2_instances &&\n                    element.ej2_instances.length &&\n                    !element.ej2_instances[0].isDestroyed) {\n                    element.ej2_instances[0].destroy();\n                }\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        this.unwireEvents();\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, 'e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, 'e-gridcontent') || (this.parent.frozenRows\n                        && parentsUntil(e.target, 'e-headercontent')))\n                    && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                this.closeEdit();\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var form = this.parent.editSettings.mode !== 'Dialog' ?\n            gObj.element.querySelector('.e-gridform') :\n            document.querySelector('#' + gObj.element.id + '_dialogEdit_wrapper').querySelector('.e-gridform');\n        var mForm = gObj.element.querySelectorAll('.e-gridform')[1];\n        var rules = {};\n        var mRules = {};\n        cols = cols ? cols : gObj.getColumns();\n        cols.forEach(function (col, index) {\n            if (!col.visible) {\n                return;\n            }\n            if (index < frzCols && col.validationRules) {\n                rules[getComplexFieldID(col.field)] = col.validationRules;\n            }\n            else if (index >= frzCols && col.validationRules) {\n                mRules[getComplexFieldID(col.field)] = col.validationRules;\n            }\n        });\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n        }\n        else {\n            rules = extend(rules, mRules);\n        }\n        this.parent.editModule.formObj = this.createFormObj(form, rules);\n    };\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            locale: this.parent.locale,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                _this.valErrorPlacement(inputElement, error);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.outerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        if (this.parent.editSettings.mode !== 'Dialog') {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(inputElement, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        return this.parent.editSettings.mode !== 'Dialog' ? isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable() :\n            document.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var gcontent = this.parent.getContent().firstElementChild;\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight || gcontent.scrollWidth > gcontent.clientWidth;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isFHdr;\n        if (isInline) {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(element, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        var fCont = this.parent.getContent().querySelector('.e-frozencontent');\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            document.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = closest(element, 'td');\n        var inputClient = input ? input.getBoundingClientRect() : element.parentElement.getBoundingClientRect();\n        var div = this.parent.createElement('div', {\n            className: 'e-tooltip-wrap e-lib e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (this.parent.getFrozenColumns() ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + inputClient.width + 'px;text-align:center;'\n        });\n        if (isInline && client.left < left) {\n            div.style.left = parseInt(div.style.left, 10) - client.left + left + 'px';\n        }\n        var content = this.parent.createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var validationForBottomRowPos;\n        if (this.parent.editSettings.newRowPosition === 'Bottom' && this.parent.editSettings.mode !== 'Dialog' &&\n            ((this.editModule.args && this.editModule.args.requestType === 'add') || this.editModule.isAdded)) {\n            validationForBottomRowPos = true;\n        }\n        var arrow;\n        if (validationForBottomRowPos) {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-bottom' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-bottom' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-bottom' }));\n        }\n        else {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        }\n        div.appendChild(content);\n        div.appendChild(arrow);\n        this.formObj.element.appendChild(div);\n        if (isInline && gcontent.getBoundingClientRect().bottom < inputClient.bottom + inputClient.height) {\n            gcontent.scrollTop = gcontent.scrollTop + div.offsetHeight + arrow.scrollHeight;\n        }\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < inputClient.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        if (!isScroll && isInline && !this.parent.allowPaging) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n        if (validationForBottomRowPos) {\n            if (isScroll) {\n                var scrollElem = this.parent.getContent().firstElementChild;\n                var scrollWidth = scrollElem.scrollWidth > scrollElem.offsetWidth ? getScrollBarWidth() : 0;\n                div.style.bottom = (this.parent.height - this.parent.getContentTable().offsetHeight\n                    - scrollWidth) + inputClient.height + 9 + 'px';\n            }\n            else {\n                div.style.bottom = inputClient.height + 9 + 'px';\n            }\n            div.style.top = null;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.checkColumnIsGrouped = function (col) {\n        return !col.visible && !(this.parent.groupSettings.columns.indexOf(col.field) > -1);\n    };\n    /**\n     * @hidden\n     */\n    Edit.AddEditors = function (editors) {\n        Edit.editCellType = extend(Edit.editCellType, editors);\n    };\n    Edit.editCellType = {\n        'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n        'datepickeredit': DatePickerEditCell, 'datetimepickeredit': DatePickerEditCell,\n        'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell,\n        'templateedit': TemplateEditCell\n    };\n    return Edit;\n}());\nexport { Edit };\n/** @hidden */\nexport var Global;\n(function (Global) {\n    Global.timer = null;\n})(Global || (Global = {}));\n","import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.prevShowedCols = [];\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n        else {\n            removeClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args1 = {\n                requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n                columns: this.getColumns(), cancel: false, searchOperator: this.searchOperator\n            };\n            this.parent.trigger(events.beforeOpenColumnChooser, args1);\n            if (args1.cancel) {\n                return;\n            }\n            this.searchOperator = args1.searchOperator;\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearActions.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.parent.notify(events.columnChooserOpened, { event: args, dialog: this.dlgObj });\n        this.stateChangeColumns = [];\n        var uncheckedLength = this.ulElement.querySelectorAll('.e-uncheck').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < this.parent.getColumns().length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                var params = {\n                    requestType: 'columnstate', element: this.parent.element,\n                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n                };\n                this.parent.trigger(events.actionComplete, params);\n                this.getShowHideService.setVisible(this.stateChangeColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n            }\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            if (currentCol.type !== 'checkbox') {\n                currentCol.visible = state;\n            }\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCbox = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCbox) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var _this = this;\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!elem.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            this.updateIntermediateBtn();\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumns();\n            if (columnUid === 'grid-selectAll') {\n                column.forEach(function (col) {\n                    if (col.showInColumnChooser) {\n                        _this.checkstatecolumn(checkstate, col.uid);\n                    }\n                });\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var cnt = this.ulElement.children.length - 1;\n        var className = [];\n        var elem = this.ulElement.children[0].querySelector('.e-frame');\n        var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlgObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var cBoxes = [].slice.call(this.ulElement.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var searchValue = this.dlgObj.element.querySelector('.e-cc.e-input').value;\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[i].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1) {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        var selected;\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = this.parent.element.querySelectorAll('.e-cc-chbox');\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var cclist = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n        if (gdCol.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            cclist.appendChild(selectAll);\n            this.ulElement.appendChild(cclist);\n        }\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            if (column.visible) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue, createElement } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query } from '@syncfusion/ej2-data';\nimport { getForeignData, measureColumnDepth, getUid } from '../base/util';\nimport { Grid } from '../base/grid';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        return data.isRemote() ?\n            data.generateQuery(true).requiresCount().take(parent.pageSettings.totalRecordsCount) :\n            data.generateQuery(true).requiresCount();\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getGridRowModel = function (columns, dataSource, gObj, startIndex) {\n        if (startIndex === void 0) { startIndex = 0; }\n        var rows = [];\n        var length = dataSource.length;\n        if (length) {\n            for (var i = 0; i < length; i++, startIndex++) {\n                var options = { isExpand: false };\n                options.data = dataSource[i];\n                options.index = startIndex;\n                if (gObj.childGrid) {\n                    if (gObj.hierarchyPrintMode === 'All') {\n                        options.isExpand = true;\n                    }\n                    else if (gObj.hierarchyPrintMode === 'Expanded' &&\n                        this.parent.expandedRows && this.parent.expandedRows[startIndex]) {\n                        options.isExpand = gObj.expandedRows[startIndex].isExpand;\n                    }\n                }\n                var row = new Row(options);\n                row.cells = this.generateCells(columns, gObj);\n                rows.push(row);\n            }\n            this.processColumns(rows);\n        }\n        return rows;\n    };\n    ExportHelper.prototype.generateCells = function (columns, gObj) {\n        var cells = [];\n        if (gObj.childGridLevel) {\n            var len = gObj.childGridLevel;\n            for (var i = 0; len > i; i++) {\n                cells.push(this.generateCell({}, CellType.Indent));\n            }\n        }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            cells.push(this.generateCell(col, CellType.Data));\n        }\n        return cells;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            fColumns.forEach(function (col) {\n                columnPromise.push(col.dataSource.executeQuery(new Query()));\n            });\n            promise = Promise.all(columnPromise).then(function (e) {\n                fColumns.forEach(function (col, index) {\n                    _this.foreignKeyData[col.field] = e[index].result;\n                });\n                // tslint:disable-next-line:no-any\n            });\n        }\n        return promise;\n    };\n    ExportHelper.prototype.getHeaders = function (columns, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        this.colDepth = measureColumnDepth(columns);\n        var rows = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows);\n        return { rows: rows, columns: this.generateActualColumns(columns) };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (columns, actualColumns) {\n        if (actualColumns === void 0) { actualColumns = []; }\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var column = columns_2[_i];\n            if (column.commands) {\n                continue;\n            }\n            if (!column.columns) {\n                if (column.visible || this.hideColumnInclude) {\n                    actualColumns.push(column);\n                }\n            }\n            else {\n                if (column.visible || this.hideColumnInclude) {\n                    var colSpan = this.getCellCount(column, 0);\n                    if (colSpan !== 0) {\n                        this.generateActualColumns(column.columns, actualColumns);\n                    }\n                }\n            }\n        }\n        return actualColumns;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows) {\n        var columns = this.parent.columns;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0);\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index) {\n        if (!cols.columns && (cols.visible !== false || this.hideColumnInclude) && !cols.commands) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, index));\n        }\n        else if (cols.columns) {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isIgnoreFirstCell = true;\n                }\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, rowIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': cellType === CellType.Data,\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'index': rowIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = [];\n        if (gridObj.enableColumnVirtualization) {\n            columnIndexes = gridObj.getColumnIndexesInView();\n        }\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (gridObj.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.splice(0, 0, this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    ExportHelper.prototype.checkAndExport = function (gridPool, globalResolve) {\n        var bool = Object.keys(gridPool).some(function (key) {\n            return !gridPool[key];\n        });\n        if (!bool) {\n            globalResolve();\n        }\n    };\n    ExportHelper.prototype.failureHandler = function (gridPool, childGridObj, resolve) {\n        var _this = this;\n        return function () {\n            gridPool[childGridObj.id] = true;\n            _this.checkAndExport(gridPool, resolve);\n        };\n    };\n    // tslint:disable-next-line:no-any\n    ExportHelper.prototype.createChildGrid = function (gObj, row, exportType, gridPool) {\n        var childGridObj = new Grid(this.parent.detailRowModule.getGridModel(gObj, row, exportType));\n        gObj.isPrinting = false;\n        var parent = 'parentDetails';\n        childGridObj[parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: getValue(childGridObj.queryString, row.data),\n            parentRowData: row.data\n        };\n        var exportId = getUid('child-grid');\n        var element = createElement('div', {\n            id: exportId, styles: 'display: none'\n        });\n        document.body.appendChild(element);\n        childGridObj.id = exportId;\n        gridPool[exportId] = false;\n        return { childGrid: childGridObj, element: element };\n    };\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value ? this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.value === 'string') {\n                args.value = new Date(args.value);\n            }\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                if (args.column.type === 'date') {\n                    format = { type: 'date', skeleton: args.column.format };\n                }\n                else if (args.column.type === 'time') {\n                    format = { type: 'time', skeleton: args.column.format };\n                }\n                else {\n                    format = { type: 'dateTime', skeleton: args.column.format };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, getValue, detach, extend } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getPrintGridModel, getUid } from '../base/util';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent, locator) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.foreignKeyData = {};\n        this.gridPool = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.locator = locator;\n        this.l10n = this.locator.getService('localization');\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n        gObj.id = getUid('main-grid');\n        this.gridPool[gObj.id] = false;\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        var cancel = 'cancel';\n        var isBlb = 'isBlob';\n        var csv = 'isCsv';\n        var workbk = 'workbook';\n        var isMultiEx = 'isMultipleExport';\n        this.gridPool = {};\n        if (grid.childGrid && !(!isNullOrUndefined(exportProperties) && exportProperties.hierarchyExportMode === 'None')) {\n            grid.expandedRows = getPrintGridModel(grid).expandedRows;\n        }\n        var args = {\n            requestType: 'beforeExcelExport', gridObject: gObj, cancel: false,\n            isMultipleExport: isMultipleExport, workbook: workbook, isCsv: isCsv, isBlob: isBlob\n        };\n        gObj.trigger(events.beforeExcelExport, args);\n        if (args[cancel]) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        this.parent.log('exporting_begin', this.getModuleName());\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        this.isBlob = args[isBlb];\n        if (args[csv]) {\n            this.isCsvExport = args[csv];\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        return this.processRecords(gObj, exportProperties, args[isMultiEx], args[workbk]);\n    };\n    ExcelExport.prototype.exportingSuccess = function (resolve) {\n        this.isExporting = false;\n        this.parent.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n        this.parent.log('exporting_complete', this.getModuleName());\n        resolve(this.book);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) &&\n            exportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                var dataManager = exportProperties.dataSource.executeQuery(new Query());\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                });\n            });\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, _this.parent.getCurrentViewRecords());\n                _this.exportingSuccess(resolve);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise_1.push(this.helper.getColumnData(gObj));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                }).catch(function (e) {\n                    reject(_this.book);\n                    _this.parent.trigger(events.actionFailure, e);\n                });\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, r) {\n        var _this = this;\n        this.groupedColLength = gObj.groupSettings.columns.length;\n        var blankRows = 5;\n        var rows = [];\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.multipleExport)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (!isNullOrUndefined(exportProperties)) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (!isNullOrUndefined(exportProperties) ? exportProperties.includeHiddenColumn : false);\n        return new Promise(function (resolve, reject) {\n            gObj.childGridLevel = 0;\n            rows = _this.processGridExport(gObj, exportProperties, r);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            var organisedRows = [];\n            _this.organiseRows(rows, rows[0].index, organisedRows);\n            _this.rows = _this.rows.concat(organisedRows);\n            //footer template add\n            if (!isNullOrUndefined(_this.footer)) {\n                if ((_this.expType === 'AppendToSheet' && !isMultipleExport) || (_this.expType === 'NewSheet')) {\n                    _this.processExcelFooter(_this.footer);\n                }\n            }\n            var sheet = {};\n            if (_this.columns.length > 0) {\n                sheet.columns = _this.columns;\n            }\n            /* tslint:disable-next-line:no-any */\n            sheet.rows = _this.rows;\n            _this.workSheet.push(sheet);\n            _this.book.worksheets = _this.workSheet;\n            _this.book.styles = _this.styles;\n            if (!isMultipleExport) {\n                if (_this.isCsvExport) {\n                    var book = new Workbook(_this.book, 'csv', gObj.locale, gObj.currencyCode);\n                    if (!_this.isBlob) {\n                        if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.csv');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('text/csv');\n                    }\n                }\n                else {\n                    var book = new Workbook(_this.book, 'xlsx', gObj.locale, gObj.currencyCode);\n                    if (!_this.isBlob) {\n                        if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.xlsx');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                    }\n                }\n                if (_this.isElementIdChanged) {\n                    gObj.element.id = '';\n                }\n                delete gObj.expandedRows;\n            }\n            return workbook;\n        });\n    };\n    ExcelExport.prototype.organiseRows = function (rows, initialIndex, organisedRows) {\n        if (!rows.length) {\n            return initialIndex;\n        }\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            var childRows = row.childRows;\n            if (childRows) {\n                row.index = initialIndex++;\n                delete row.childRows;\n                organisedRows.push(row);\n                initialIndex = this.organiseRows(childRows, initialIndex, organisedRows);\n            }\n            else {\n                row.index = initialIndex++;\n                organisedRows.push(row);\n            }\n        }\n        return initialIndex;\n    };\n    ExcelExport.prototype.processGridExport = function (gObj, exportProperties, r) {\n        var excelRows = [];\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n            this.theme = exportProperties.theme;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(exportProperties)) {\n            gObj.hierarchyPrintMode = exportProperties.hierarchyExportMode || 'Expanded';\n        }\n        var helper = new ExportHelper(gObj);\n        var headerRow = helper.getHeaders(gObj.columns, this.includeHiddenColumn);\n        var groupIndent = gObj.groupSettings.columns.length;\n        excelRows = this.processHeaderContent(gObj, headerRow, groupIndent, excelRows);\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, exportProperties.dataSource, excelRows, helper);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, gObj.currentViewData, excelRows, helper);\n        }\n        else {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, undefined, excelRows, helper);\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, exportProperties, currentViewRecords, excelRow, helper) {\n        var record;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level, 0, exportProperties, excelRow, helper);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0, 0, exportProperties, excelRow, helper);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, excelRow, currentViewRecords);\n            }\n            else {\n                var result = returnType.result.GroupGuid ?\n                    returnType.result.records : returnType.result;\n                this.processAggregates(gObj, result, excelRow);\n            }\n        }\n        return excelRow;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            cell.value = gObj.getColumnByField(item.field).headerText +\n                ': ' + (!col.enableGroupByFormat ? this.exportValueFormatter.formatCellValue(args) : item.key) + ' - ';\n            if (item.count > 1) {\n                cell.value += item.count + ' items';\n            }\n            else {\n                cell.value += item.count + ' item';\n            }\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, excelRows, this.rowLength);\n            cells.push(cell);\n            if (excelRows[excelRows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = excelRows[excelRows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level + dataSource.childLevels)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    sCell.index = (hIndex + 1);\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            excelRows[excelRows.length - 1].cells = cells;\n            this.rowLength++;\n            if (this.groupedColLength < 8 && level > 1) {\n                var grouping = { outlineLevel: level - 1, isCollapsed: true };\n                excelRows[excelRows.length - 1].grouping = grouping;\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level, startIndex, excelExportProperties, excelRows, helper);\n            }\n            else {\n                startIndex = this.processRecordRows(gObj, item.items, headerRow, (level), startIndex, excelExportProperties, excelRows, helper);\n                this.processAggregates(gObj, item, excelRows, undefined, (level), true);\n            }\n        }\n    };\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        var index = 1;\n        var cells = [];\n        var columns = headerRow.columns;\n        var rows = helper.getGridRowModel(columns, record, gObj, startIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            cells = [];\n            startIndex++;\n            index = 1;\n            for (var c = 0, len = row.cells.length; c < len; c++) {\n                var gCell = row.cells[c];\n                if (gCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var fkData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    fkData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, fkData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    var cell = {};\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = {\n                        data: row.data, column: column, foreignKeyData: fkData,\n                        value: value, style: undefined, colSpan: 1, cell: cell\n                    };\n                    gObj.trigger(events.excelQueryCellInfo, excelCellArgs);\n                    cell = excelCellArgs.cell;\n                    cell.index = index + level + gObj.childGridLevel;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.data === '' && gObj.childGridLevel && index === 1) {\n                        var style = {};\n                        style.hAlign = 'left';\n                        excelCellArgs = { style: style };\n                        cell.colSpan = gObj.getVisibleColumns().length;\n                        cell.value = this.l10n.getConstant('EmptyRecord');\n                    }\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            var excelRow = { index: this.rowLength++, cells: cells };\n            if (this.groupedColLength < 8 && level > 0) {\n                excelRow.grouping = { outlineLevel: level, isCollapsed: true };\n                excelRows.push(excelRow);\n            }\n            else {\n                excelRows.push(excelRow);\n            }\n            if (!isNullOrUndefined(gObj.childGrid)) {\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(excelExportProperties) && excelExportProperties.exportType) ?\n                    excelExportProperties.exportType : 'AllPages';\n                var returnVal = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnVal.childGrid;\n                var element = returnVal.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                childGridObj.childGridLevel = gObj.childGridLevel + 1;\n                var args = { childGrid: childGridObj, row: row, exportProperties: excelExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(excelRow, childGridObj, excelExportProperties, row);\n                childGridObj.appendTo(element);\n            }\n            gObj.notify(events.exportRowDataBound, { rowObj: row, type: 'excel' });\n        }\n        return startIndex;\n    };\n    ExcelExport.prototype.childGridCell = function (excelRow, childGridObj, excelExportProps, gRow) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            if (result.result.length === 0) {\n                result.result = [''];\n            }\n            excelRow.childRows = _this.processGridExport(childGridObj, excelExportProps, result);\n            var intent = _this.parent.groupSettings.columns.length;\n            excelRow.childRows.forEach(function (row) {\n                row.grouping = { outlineLevel: intent + childGridObj.childGridLevel,\n                    isCollapsed: !gRow.isExpand, isHidden: !gRow.isExpand };\n            });\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return excelRow;\n        };\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.processAggregates = function (gObj, rec, excelRows, currentViewRecords, indent, byGroup) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                excelRows = this.fillAggregates(gObj, groupSummaryRows, indent, excelRows);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates);\n            if (sRows.length > 0 && !byGroup) {\n                excelRows = this.fillAggregates(gObj, sRows, indent, excelRows);\n            }\n        }\n        return excelRows;\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.fillAggregates = function (gObj, rows, indent, excelRows, customIndex) {\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            var cells = [];\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    continue;\n                }\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        eCell.index = index + indent + gObj.childGridLevel;\n                        if (!isNullOrUndefined(cell.column.footerTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - sum\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - average\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - max\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - min\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - count\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - truecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - falsecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        this.aggregateStyle(cell.column, eCell.style, cell.column.field);\n                        var gridCellStyle = cell.attributes.style;\n                        if (gridCellStyle.textAlign) {\n                            eCell.style.hAlign = gridCellStyle.textAlign.toLowerCase();\n                        }\n                        cells.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent + gObj.childGridLevel;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                excelRows.push({ index: customIndex, cells: cells });\n            }\n            else {\n                var row_1 = {};\n                if (this.groupedColLength < 8 && this.groupedColLength > 0) {\n                    var dummyOutlineLevel = 'outlineLevel';\n                    var dummyGrouping = 'grouping';\n                    var level = excelRows[excelRows.length - 1][dummyGrouping][dummyOutlineLevel];\n                    var grouping = { outlineLevel: level, isCollapsed: true };\n                    row_1 = { index: this.rowLength++, cells: cells, grouping: grouping };\n                }\n                else {\n                    row_1 = { index: this.rowLength++, cells: cells };\n                }\n                excelRows.push(row_1);\n            }\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.aggregateStyle = function (col, style, field) {\n        if (typeof col.format === 'object') {\n            var format = col.format;\n            style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n            style.type = !isNullOrUndefined(format.type) ? format.type.toLowerCase() :\n                this.parent.getColumnByField(field).type.toLowerCase();\n        }\n        else {\n            style.numberFormat = col.format;\n            style.type = this.parent.getColumnByField(field).type.toLowerCase();\n        }\n    };\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        /* tslint:disable-next-line:max-line-length */\n        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n        return txt[0].textContent;\n    };\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        var result = {};\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, indent, excelRows) {\n        var rowIndex = 1;\n        var gridRows = headerRow.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = headerRow.columns;\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            var cells = [];\n            for (var column = 0; column < gridRows[row].cells.length; column++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                var cell = {};\n                var gridCell = gridRows[row].cells[column];\n                if (gridCell.cellType === CellType.HeaderIndent || gridCell.cellType === CellType.DetailHeader) {\n                    continue;\n                }\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index + gObj.childGridLevel;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign.toLowerCase();\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign.toLowerCase();\n                }\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, style: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, excelHeaderCellArgs);\n                cell.style = excelHeaderCellArgs.style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            excelRows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        style.bold = true;\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        return extend(style, themestyle);\n    };\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (typeof col.format === 'object') {\n                var format = col.format;\n                style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n                if (!isNullOrUndefined(format.type)) {\n                    style.type = format.type.toLowerCase();\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign.toLowerCase();\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width)) {\n            this.columns.push({ index: index + gObj.childGridLevel, width: typeof col.width === 'number' ?\n                    col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @return{void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.gridPool = {};\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        parent.id = getUid('main-grid');\n        this.gridPool[parent.id] = false;\n    };\n    PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        this.init(parent);\n        if (!isNullOrUndefined(pdfDoc)) {\n            this.pdfDocument = pdfDoc;\n        }\n        else {\n            this.pdfDocument = new PdfDocument();\n        }\n        this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            resolve(_this.pdfDocument);\n        });\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        this.gridPool = {};\n        if (parent.childGrid && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n            parent.expandedRows = getPrintGridModel(parent).expandedRows;\n        }\n        var args = {\n            requestType: 'beforePdfExport', cancel: false\n        };\n        if (!isBlazor()) {\n            var gridObject = 'gridObject';\n            args[gridObject] = parent;\n        }\n        var can = 'cancel';\n        parent.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        this.parent.log('exporting_begin', this.getModuleName());\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)\n            && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                pdfExportProperties.dataSource.executeQuery(new Query()).then(function (returnType) {\n                    _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport);\n                });\n            });\n        }\n        else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise_1.push(this.helper.getColumnData(parent));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport).then(function () {\n                        _this.isExporting = false;\n                        parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                        _this.parent.log('exporting_complete', _this.getModuleName());\n                        resolve(_this.pdfDocument);\n                    });\n                });\n            });\n        }\n    };\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        var section = this.pdfDocument.sections.add();\n        var pdfGrid;\n        this.processSectionExportProperties(section, pdfExportProperties);\n        var pdfPage = section.pages.add();\n        return new Promise(function (resolve, reject) {\n            pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            // draw the grid\n            pdfGrid.draw(pdfPage, 0, 0);\n            if (!isMultipleExport) {\n                // save the PDF\n                if (!_this.isBlob) {\n                    if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                        _this.pdfDocument.save(pdfExportProperties.fileName);\n                    }\n                    else {\n                        _this.pdfDocument.save('Export.pdf');\n                    }\n                }\n                else {\n                    _this.blobPromise = _this.pdfDocument.save();\n                }\n                _this.pdfDocument.destroy();\n                delete gObj.expandedRows;\n            }\n            return _this.pdfDocument;\n        });\n    };\n    PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation)\n            || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n            var pdfPageSettings = new PdfPageSettings();\n            pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ?\n                PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n            pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n            section.setPageSettings(pdfPageSettings);\n        }\n        return section;\n    };\n    PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n        }\n        var helper = new ExportHelper(gObj);\n        var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n        var columns = gObj.columns;\n        var isGrouping = false;\n        if (gObj.groupSettings.columns.length) {\n            isGrouping = true;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(pdfExportProperties)) {\n            gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n        }\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid, helper, gObj);\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length) {\n            if (isGrouping) {\n                if (!isNullOrUndefined(captionThemeStyle.border)) {\n                    border = captionThemeStyle.border;\n                }\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.\n                    brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n                }\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ?\n                this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.caption);\n            var pdfColor = new PdfColor(0, 0, 0);\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n                font = this.gridTheme.caption.font;\n            }\n            return { font: font, brush: new PdfSolidBrush(pdfColor), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n                border: borderCaption };\n        }\n        else {\n            //Material theme\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n                backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ?\n                this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.header);\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.header.font)) {\n                font = this.gridTheme.header.font;\n            }\n            return { border: this.getBorderStyle(this.gridTheme.header.border), font: font, brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n                brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n        var groupIndex = level;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = this.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            row.cells.getCell(groupIndex).value = value;\n            row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n            row.style.setBorder(border);\n            row.style.setFont(font);\n            row.style.setTextBrush(brush);\n            row.style.setBackgroundBrush(backgroundBrush);\n            var sRows = void 0;\n            var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n            if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n            }\n            else {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n            }\n            if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n            else {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                index = this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1), pdfExportProperties, helper, index);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n        }\n    };\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid) {\n        var columnCount = gridColumn.length + childLevels;\n        // add columns\n        pdfGrid.columns.add(columnCount);\n        // add header\n        pdfGrid.headers.add(rows.length);\n        // set cell values of each rows in the header\n        for (var i = 0; i < rows.length; i++) {\n            var gridHeader = pdfGrid.headers.getHeader(i);\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            var colSpan = 0;\n            var cellLength = rows[i].cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var cell = rows[i].cells[j];\n                var pdfCell = gridHeader.cells.getCell(j + colSpan);\n                switch (cell.cellType) {\n                    case CellType.HeaderIndent:\n                    case CellType.DetailHeader:\n                        pdfCell.value = '';\n                        pdfCell.width = 20;\n                        break;\n                    case CellType.Header:\n                    case CellType.StackedHeader:\n                        if (pdfCell.value !== null) {\n                            if (!isNullOrUndefined(cell.column.headerTextAlign)) {\n                                pdfCell.style.stringFormat = this.getHorizontalAlignment(cell.column.headerTextAlign);\n                            }\n                            if (!isNullOrUndefined(cell.rowSpan)) {\n                                pdfCell.rowSpan = cell.rowSpan;\n                                pdfCell.style.stringFormat = this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, cell.column.textAlign);\n                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n                                    pdfGrid.headers.getHeader(i + k).cells.getCell(j).value = null;\n                                }\n                            }\n                            if (!isNullOrUndefined(cell.colSpan)) {\n                                pdfCell.columnSpan = cell.colSpan;\n                                colSpan += cell.colSpan - 1;\n                            }\n                            pdfCell.value = cell.column.headerText;\n                            var args = {\n                                cell: pdfCell,\n                                gridCell: cell,\n                                style: pdfCell.style\n                            };\n                            this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n                        }\n                        else {\n                            colSpan += pdfCell.columnSpan;\n                            j = j - 1;\n                        }\n                        break;\n                }\n            }\n        }\n        if (pdfGrid.columns.count >= 6) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            var clientSize = this.pdfDocument.pageSettings.size;\n            if (!isNullOrUndefined(pdfExportProperties.header)) {\n                /* tslint:disable-next-line:no-any */\n                var header = pdfExportProperties.header;\n                var position = new PointF(0, header.fromTop);\n                var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return dataSource;\n    };\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format;\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                var cell = row.cells[index];\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    i--;\n                    index++;\n                    continue;\n                }\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (cell.cellType === CellType.DetailFooterIntent) {\n                            continue;\n                        }\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                i += 1;\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        /* tslint:disable-next-line:max-line-length */\n                        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n                        value.push(txt[0].textContent);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n        if (!isNullOrUndefined(column.footerTemplate)) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    /**\n     * Set alignment, width and type of the values of the column\n     */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj) {\n        var startIndex = gObj.groupSettings.columns.length;\n        for (var i = 0; i < startIndex; i++) {\n            pdfGrid.columns.getColumn(i).width = 20;\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width)) {\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ?\n                    gridColumns[i].width * 0.75 : helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ?\n                this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n            var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n            var fontStyle = this.getFontStyle(this.gridTheme.record);\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.record.font)) {\n                font = this.gridTheme.record.font;\n            }\n            row.style.setFont(font);\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        var borderRecord = this.gridTheme && this.gridTheme.record &&\n            this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n        row.style.setBorder(borderRecord);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n        var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            rowIndex++;\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            var cellLength = row.cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var gridCell = row.cells[j];\n                if (gridCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gridCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = row.data;\n                var cell = gridRow.cells.getCell(j);\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1,\n                    cell: cell\n                };\n                args.value = this.exportValueFormatter.formatCellValue(args);\n                this.parent.trigger(events.pdfQueryCellInfo, args);\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n            if (row.isExpand) {\n                var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n                var cell = gridRow_1.cells.getCell(startIndex);\n                cell.columnSpan = gridRow_1.cells.count - (startIndex);\n                cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType) ?\n                    pdfExportProperties.exportType : 'AllPages';\n                var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnValue.childGrid;\n                var element = returnValue.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                var args = { childGrid: childGridObj, row: row, cell: cell, exportProperties: pdfExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, pdfExportProperties);\n                childGridObj.appendTo(element);\n            }\n            this.parent.notify(events.exportRowDataBound, { type: 'pdf', rowObj: row });\n        }\n        return rowIndex;\n    };\n    PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return cell;\n        };\n    };\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.cellPadding)) {\n            cell.style.cellPadding = args.style.cellPadding;\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) ||\n            !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        if (content.style.font) {\n            return content.style.font;\n        }\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ?\n            (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.TimesRoman;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    PdfExport.prototype.getFontStyle = function (theme) {\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(theme) && theme.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(theme) && theme.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(theme) && theme.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(theme) && theme.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return fontStyle;\n    };\n    PdfExport.prototype.getBorderStyle = function (border) {\n        var borders = new PdfBorders();\n        if (!isNullOrUndefined(border)) {\n            var borderWidth = border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? borderWidth * 0.75 : undefined;\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(border.color)) {\n                var borderColor = this.hexToRgb(border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(border.dashStyle);\n            }\n            borders.all = pen;\n        }\n        else {\n            borders.all = new PdfPen(new PdfColor(234, 234, 234));\n        }\n        return borders;\n    };\n    /**\n     * To destroy the pdf export\n     * @return{void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, removeClass, attributes, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = _this.parent.createElement('button', {});\n        _this.unbounDiv = _this.parent.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button',\n            title: !isNullOrUndefined(buttonOption.title) ? buttonOption.title :\n                buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { click, keyPressed, commandClick } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.initiateRender();\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = gObj.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        var commandColumn;\n        var row = gObj.getRowObjectFromUID(closest(target, '.e-row').getAttribute('data-uid'));\n        this.parent.columnModel.forEach(function (col) {\n            if (col.commands) {\n                col.commands.forEach(function (commandCol) {\n                    var typeInString = 'type';\n                    if (commandCol[typeInString] === type) {\n                        commandColumn = commandCol;\n                    }\n                });\n            }\n        });\n        var args = {\n            cancel: false,\n            target: target,\n            commandColumn: commandColumn,\n            rowData: isNullOrUndefined(row) ? undefined : row.data\n        };\n        this.parent.trigger(commandClick, args, function (commandclickargs) {\n            if (buttonObj.disabled || !gObj.editModule || commandclickargs.cancel) {\n                return;\n            }\n            switch (type) {\n                case 'Edit':\n                    gObj.editModule.endEdit();\n                    gObj.editModule.startEdit(closest(target, 'tr'));\n                    break;\n                case 'Cancel':\n                    gObj.editModule.closeEdit();\n                    break;\n                case 'Save':\n                    gObj.editModule.endEdit();\n                    break;\n                case 'Delete':\n                    if (gObj.editSettings.mode !== 'Batch') {\n                        gObj.editModule.endEdit();\n                    }\n                    gObj.clearSelection();\n                    //for toogle issue when dbl click\n                    gObj.selectRow(parseInt(closest(target, 'tr').getAttribute('aria-rowindex'), 10), false);\n                    gObj.editModule.deleteRecord();\n                    break;\n            }\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(keyPressed, this.keyPressHandler);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                            this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                        }\n                    }\n                    else {\n                        this.parent.editModule.endEdit();\n                        this.parent.editModule.startEdit(this.row);\n                    }\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode !== 'Batch') {\n                        this.parent.editModule.endEdit();\n                    }\n                    if (this.parent.getSelectedRecords().length === 1) {\n                        this.parent.editModule.deleteRow(this.row);\n                    }\n                    else {\n                        this.parent.deleteRecord();\n                    }\n                }\n                break;\n            case 'Save':\n                if (this.parent.editModule) {\n                    this.parent.editModule.endEdit();\n                }\n                break;\n            case 'Cancel':\n                if (this.parent.editModule) {\n                    this.parent.editModule.closeEdit();\n                }\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        args.rowInfo = this.targetRowdata;\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.targetRowdata = this.parent.getRowInfo(args.event.target);\n            if ((isNullOrUndefined(args.parentItem)) && this.targetColumn) {\n                this.selectRow(args.event, (args.event.target.classList.contains('e-selectionbackground')\n                    && this.parent.selectionSettings.type === 'Multiple') ? false : true);\n            }\n            var hideSepItems = [];\n            var showSepItems = [];\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editModule && this.parent.editSettings.mode === 'Batch' &&\n                        ((closest(args.event.target, '.e-gridform')) ||\n                            this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    if (item.separator) {\n                        hideSepItems.push(item.id);\n                    }\n                    else {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (this.ensureTarget(args.event.target, item.target) && item.separator) {\n                    showSepItems.push(item.id);\n                }\n            }\n            if (showSepItems.length > 0) {\n                this.contextMenu.showItems(showSepItems, true);\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            if (hideSepItems.length > 0) {\n                this.contextMenu.hideItems(hideSepItems, true);\n            }\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            args.rowInfo = this.targetRowdata;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (args.cancel || (this.hiddenItems.length === args.items.length && !args.parentItem)) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n        this.parent.applyBiggerTheme(this.contextMenu.element.parentElement);\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : 'tbody');\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.getFrozenColumns() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit)\n                    || (this.targetColumn && !this.targetColumn.field && item === 'AutoFit');\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (element) {\n                        if (element.field === _this.targetColumn.field\n                            && element.direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    });\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            var uid = cell.querySelector('.e-headercelldiv, .e-stackedheadercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        else {\n            var ele = (this.parent.getRowInfo(e.target).column);\n            return ele || null;\n        }\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute('aria-rowindex'), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.isFrzLoad = 1;\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n        for (var i = 0, len = row.length; i < len; i++) {\n            if (this.isFrzLoad % 2 === 0) {\n                row[i].cells = row[i].cells.slice(frzCols, row[i].cells.length);\n            }\n            else {\n                row[i].cells = row[i].cells.slice(0, frzCols);\n            }\n        }\n        this.isFrzLoad++;\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth, wrap } from '../base/util';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        return _super.call(this, parent, locator) || this;\n    }\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozencontent' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.getFrozenContent().appendChild(this.getTable());\n        var mTbl = this.getTable().cloneNode(true);\n        this.getMovableContent().appendChild(mTbl);\n        remove(this.getMovableContent().querySelector('colgroup'));\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozenheader' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        var tbody = this.getMovableHeader().querySelector('tbody');\n        remove(this.getMovableHeader().querySelector('table'));\n        _super.prototype.refreshUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        this.updateColgroup();\n        this.widthService.setWidthToTable();\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.movableHeader.querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns());\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.getMovableHeader().appendChild(this.createTable());\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader').length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(renderMovable(filterRow, this.parent.getFrozenColumns()));\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            var fRows = void 0;\n            var mRows = void 0;\n            var fHdr = this.getFrozenHeader();\n            var mHdr = this.getMovableHeader();\n            var cont = this.parent.getContent();\n            var wrapMode = this.parent.textWrapSettings.wrapMode;\n            var hdrClassList = this.parent.getHeaderContent().firstChild.classList;\n            if (obj.case === 'textwrap') {\n                if (wrapMode !== 'Header' || obj.isModeChg) {\n                    fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                    mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                    this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n                }\n                if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                    hdrClassList.add('e-wrap');\n                }\n                else {\n                    hdrClassList.remove('e-wrap');\n                }\n                if (wrapMode === 'Both' || obj.isModeChg) {\n                    fRows = fHdr.querySelectorAll('tr');\n                    mRows = mHdr.querySelectorAll('tr');\n                }\n                else {\n                    fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                        'tbody' : 'thead').querySelectorAll('tr');\n                    mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                        'tbody' : 'thead').querySelectorAll('tr');\n                }\n                if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                    this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n                }\n                this.refreshStackedHdrHgt();\n            }\n            else if (obj.case === 'refreshHeight') {\n                this.setWrapHeight(cont.querySelector('.e-frozencontent').querySelectorAll('tr'), cont.querySelector('.e-movablecontent').querySelectorAll('tr'), obj.isModeChg);\n                this.setWrapHeight(fHdr.querySelectorAll('tr'), mHdr.querySelectorAll('tr'), obj.isModeChg);\n            }\n        }\n    };\n    FreezeRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'scroll') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler')).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue \n            if (!fRows[i].classList.contains('e-columnheader')) {\n                height[i] = fRows[i].offsetHeight; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n                width[i] = mRows[i].offsetHeight;\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) || (!isWrap && fRowHgt < mRowHgt) ||\n                (this.parent.allowResizing && this.parent.resizeModule && !this.parent.resizeModule.isFrozenColResized))) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            if (mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) || (!isWrap && fRowHgt > mRowHgt) ||\n                (this.parent.allowResizing && this.parent.resizeModule && this.parent.resizeModule.isFrozenColResized))) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function (height) {\n        if (height === void 0) { height = getScrollBarWidth(); }\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var movableContent = this.parent.element.querySelector('.e-movablecontent');\n        var frozenContent = this.parent.element.querySelector('.e-frozencontent');\n        if (movableContent.scrollWidth - movableContent.clientWidth) {\n            frozenContent.style.height = movableContentHeight -\n                height + 'px';\n            frozenContent.style.borderBottom = '';\n        }\n        else {\n            frozenContent.style.height = movableContentHeight + 'px';\n            if ((frozenContent.scrollHeight <= frozenContent.clientHeight) ||\n                (movableContent.scrollHeight <= movableContent.clientHeight)) {\n                this.parent.scrollModule.removePadding();\n            }\n            frozenContent.style.borderBottom = '0px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns()), mTable.querySelector('thead'));\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        this.parent.log('limitation', this.getModuleName());\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n        });\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n        });\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        e.preventDefault();\n        this.parent.applyBiggerTheme(this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1) {\n                if (this.ensureDisabledStatus(key) && !dItem.hide) {\n                    this.disableItems.push(item.text);\n                }\n                else if (item.hide) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n            else if (this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    this.parent.sortSettings.columns.forEach(function (ele) {\n                        if (ele.field === _this.targetColumn.field\n                            && ele.direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    });\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null) {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        columns.forEach(function (column) {\n            column.dataSource = (column.dataSource instanceof DataManager ? column.dataSource :\n                (isNullOrUndefined(column.dataSource) ? new DataManager() : new DataManager(column.dataSource)));\n        });\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        foreignColumns.forEach(function (col) {\n            var promise;\n            var query = args.isComplex ? _this.genarateColumnQuery(col) :\n                _this.genarateQuery(col, args.result.result, false, true);\n            query.params = _this.parent.query.params;\n            var dataSource = col.dataSource;\n            if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        });\n        Promise.all(allPromise).then(function (responses) {\n            responses.forEach(function (data, index) {\n                foreignColumns[index].columnData = data.result;\n            });\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            _this.parent.log(['actionfailure', 'foreign_key_failure']);\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var predicate;\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length && !fromData) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            filteredValue.forEach(function (obj) {\n                if (obj && obj.getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: obj, matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', obj, false));\n                }\n            });\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        predicate = (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n        return predicate;\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = new Query();\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue && fColumn.uid === column.uid);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n","/**\n *\n * `Logger` class\n */\nimport { isNullOrUndefined, L10n, isUndefined } from '@syncfusion/ej2-base';\nimport { DataUtil, DataManager } from '@syncfusion/ej2-data';\nvar BASE_DOC_URL = 'https://ej2.syncfusion.com/documentation/grid';\nvar DOC_URL = 'https://ej2.syncfusion.com/documentation/';\nvar WARNING = '[EJ2Grid.Warning]';\nvar ERROR = '[EJ2Grid.Error]';\nvar INFO = '[EJ2Grid.Info]';\nvar Logger = /** @class */ (function () {\n    function Logger(parent) {\n        this.parent = parent;\n        this.parent.on('initial-end', this.patchadaptor, this);\n    }\n    Logger.prototype.getModuleName = function () {\n        return 'logger';\n    };\n    Logger.prototype.log = function (types, args) {\n        var _this = this;\n        if (!(types instanceof Array)) {\n            types = [types];\n        }\n        types.forEach(function (type) {\n            var item = detailLists[type];\n            var cOp = item.check(args, _this.parent);\n            if (cOp.success) {\n                console[item.logType](item.generateMessage(args, _this.parent, cOp.options));\n            }\n        });\n    };\n    Logger.prototype.patchadaptor = function () {\n        var adaptor = this.parent.getDataModule().dataManager.adaptor;\n        var original = adaptor.beforeSend;\n        if (original) {\n            adaptor.beforeSend = function (dm, request, settings) {\n                original.call(adaptor, dm, request, settings);\n            };\n        }\n    };\n    Logger.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('initial-end', this.patchadaptor);\n    };\n    return Logger;\n}());\nexport { Logger };\nexport var detailLists = {\n    module_missing: {\n        type: 'module_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var injected = parent.getInjectedModules().map(function (m) { return m.prototype.getModuleName(); });\n            /* tslint:disable-next-line:no-any */\n            var modules = parent.requiredModules().map(function (m) { return m.member; })\n                .filter(function (name) { return injected.indexOf(name) === -1; });\n            return { success: modules.filter(function (m) { return m !== 'resize'; }).length > 0, options: modules };\n        },\n        generateMessage: function (args, parent, modules) {\n            modules = modules.filter(function (m) { return m !== 'resize'; })\n                .reduce(function (prev, cur) { return prev + (\"* \" + cur + \"\\n\"); }, '');\n            return WARNING + ': MODULES MISSING\\n' + 'The following modules are not injected:.\\n' +\n                (\"\" + modules) +\n                (\"Refer to \" + BASE_DOC_URL + \"/module.html for documentation on importing feature modules.\");\n        }\n    },\n    promise_enabled: {\n        type: 'promise_enabled',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: typeof Promise === 'undefined' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': PROMISE UNDEFINED\\n' +\n                'Promise object is not present in the global environment,' +\n                'please use polyfil to support Promise object in your environment.\\n' +\n                (\"Refer to \" + DOC_URL + \"/base/browser.html?#required-polyfills for more information.\");\n        }\n    },\n    primary_column_missing: {\n        type: 'primary_column_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' + 'Editing is enabled but primary key column is not specified.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    selection_key_missing: {\n        type: 'selection_key_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.selectionSettings.persistSelection &&\n                    parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' +\n                'selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    actionfailure: {\n        type: 'actionfailure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            var message = '';\n            var formatError = formatErrorHandler(args, parent);\n            var ajaxError = ajaxErrorHandler(args, parent);\n            if (ajaxError !== '') {\n                message = ajaxError;\n            }\n            else if (formatError !== '') {\n                message = formatError;\n            }\n            else {\n                message = args.error;\n            }\n            return WARNING + ': ' + message;\n        }\n    },\n    locale_missing: {\n        type: 'locale_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var lObj = DataUtil.getObject(\"locale.\" + parent.locale + \".grid\", L10n);\n            return { success: parent.locale !== 'en-US' && isNullOrUndefined(lObj) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': LOCALE CONFIG MISSING\\n' + (\"Locale configuration for '\" + parent.locale + \"' is not provided.\\n\") +\n                (\"Refer to \" + BASE_DOC_URL + \"/globalization-and-localization.html?#localization \\n             for documentation on setting locale configuration.\");\n        }\n    },\n    limitation: {\n        type: 'limitation',\n        logType: 'warn',\n        check: function (args, parent) {\n            var name = args;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = {\n                        success: parent.allowGrouping || !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid)\n                            || !isUndefined(parent.rowTemplate) || parent.enableVirtualization,\n                        options: { name: 'freeze' }\n                    };\n                    break;\n                case 'virtualization':\n                    opt = {\n                        success: !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid) || parent.frozenRows !== 0\n                            || parent.frozenColumns !== 0,\n                        options: { name: 'virtualization' }\n                    };\n                    break;\n                default:\n                    opt = { success: false };\n                    break;\n            }\n            return opt;\n        },\n        generateMessage: function (args, parent, options) {\n            var name = options.name;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = 'Frozen rows and columns do not support the following features:\\n' +\n                        '* Virtualization\\n' +\n                        '* Row Template\\n' +\n                        '* Details Template\\n' +\n                        '* Hierarchy Grid\\n' +\n                        '* Grouping';\n                    break;\n                case 'virtualization':\n                    opt = 'Virtualization does not support the following features.\\n' +\n                        '* Freeze rows and columns.\\n' +\n                        '* Details Template.\\n' +\n                        '* Hierarchy Grid.\\n';\n                    break;\n                default:\n                    opt = '';\n                    break;\n            }\n            return WARNING + (\": \" + name.toUpperCase() + \" LIMITATIONS\\n\") + opt;\n        }\n    },\n    check_datasource_columns: {\n        type: 'check_datasource_columns',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: !(parent.columns.length ||\n                    (parent.dataSource instanceof DataManager) || parent.dataSource.length) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': GRID CONFIG MISSING\\n' + 'dataSource and columns are not provided in the grid. ' +\n                'At least one of either must be provided for grid configuration.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns.html for documentation on configuring the grid data and columns.\");\n        }\n    },\n    virtual_height: {\n        type: 'virtual_height',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(parent.height) || parent.height === 'auto' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': GRID HEIGHT MISSING \\n' + 'height property is required to use virtualization.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/virtual.html for documentation on configuring the virtual grid.\");\n        }\n    },\n    grid_remote_edit: {\n        type: 'grid_remote_edit',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: Array.isArray(args) || Array.isArray(args.result) };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': RETRUN VALUE MISSING  \\n' +\n                'Remote service returns invalid data. \\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/edit.html for documentation on configuring editing with remote data.\");\n        }\n    },\n    grid_sort_comparer: {\n        type: 'grid_sort_comparer',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getDataModule().isRemote() };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': SORT COMPARER NOT WORKING  \\n' + 'Sort comparer will not work with remote data.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/sorting/#custom-sort-comparer for documentation on using the sort comparer.\");\n        }\n    },\n    resize_min_max: {\n        type: 'resize_min_max',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: (args.column.minWidth && args.column.minWidth >= args.width) ||\n                    (args.column.maxWidth && args.column.maxWidth <= args.width) };\n        },\n        generateMessage: function (args, parent) {\n            return INFO + ': RESIZING COLUMN REACHED MIN OR MAX  \\n' + 'The column resizing width is at its min or max.';\n        }\n    },\n    action_disabled_column: {\n        type: 'action_disabled_column',\n        logType: 'info',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'reorder':\n                    if (isNullOrUndefined(args.destColumn)) {\n                        fn = \"reordering action is disabled for the \" + args.column.headerText + \" column\";\n                    }\n                    else {\n                        fn = \"reordering action is disabled for the \" + (args.column.allowReordering ?\n                            args.destColumn.headerText : args.column.headerText) + \" column\";\n                    }\n                    break;\n                case 'group':\n                    fn = \"grouping action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'filter':\n                    fn = \"filtering action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'sort':\n                    fn = \"sorting action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": ACTION DISABLED \\n \" + options.fn);\n        }\n    },\n    exporting_begin: {\n        type: 'exporting_begin',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG INPROGRESS \\n Grid \" + options.args + \"ing is in progress\");\n        }\n    },\n    exporting_complete: {\n        type: 'exporting_complete',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG COMPLETED \\n Grid \" + options.args + \"ing is complete\");\n        }\n    },\n    foreign_key_failure: {\n        type: 'foreign_key_failure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': FOREIGNKEY CONFIG \\n  Grid foreign key column needs a valid data source/service.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns/#foreign-key-column for documentation on configuring foreign key columns.\");\n        }\n    },\n    initial_action: {\n        type: 'initial_action',\n        logType: 'error',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'group':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to group the column';\n                    break;\n                case 'filter':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to filter the column.';\n                    break;\n                case 'sort':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to sort the column.';\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": INITIAL ACTION FAILURE \\n \" + options.fn);\n        }\n    },\n    frozen_rows_columns: {\n        type: 'frozen_rows_columns',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: parent.getColumns().length <= parent.frozenColumns || parent.frozenRows >= parent.currentViewData.length };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": OUT OF RANGE ERROR-\\n \" + (parent.getColumns().length <= parent.frozenColumns ? 'FROZEN COLUMNS,' : '')) +\n                ((parent.frozenRows >= parent.currentViewData.length ? 'FROZEN ROWS' : '') + \" invalid\");\n        }\n    },\n    column_type_missing: {\n        type: 'column_type_missing',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(args.column.type), options: args.column.headerText };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": COLUMN TYPE MISSING-\\n  \" + options + \" column type was invalid or not defined.\") +\n                (\"Please go through below help link: \" + DOC_URL + \"/grid/columns/#column-type\");\n        }\n    },\n    datasource_syntax_mismatch: {\n        type: 'datasource_syntax_mismatch',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: (args.dataState.dataSource instanceof DataManager || args.dataState.dataSource instanceof Array) &&\n                    !(isNullOrUndefined(args.dataState.dataStateChange)) };\n        },\n        generateMessage: function (args, parent, options) {\n            return WARNING + ': DATASOURCE SYNTAX WARNING\\n' +\n                'DataSource should be in the form of {result: Object[], count: number}' +\n                'when dataStateChangeEvent used';\n        }\n    }\n};\nvar formatErrorHandler = function (args, parent) {\n    var error = args.error;\n    if (error.indexOf && error.indexOf('Format options') !== 0) {\n        return '';\n    }\n    return 'INVALID FORMAT\\n' +\n        'For more information, refer to the following documentation links:\\n' +\n        (\"Number format: \" + DOC_URL + \"/base/intl.html?#supported-format-string.\\n\") +\n        (\"Date format: \" + DOC_URL + \"/base/intl.html?#manipulating-datetime.\\n\") +\n        (\"Message: \" + error);\n};\nvar ajaxErrorHandler = function (args, parent) {\n    var error = DataUtil.getObject('error.error', args);\n    if (isNullOrUndefined(error)) {\n        return '';\n    }\n    var jsonResult = '';\n    try {\n        jsonResult = JSON.parse(error.responseText);\n    }\n    catch (_a) {\n        jsonResult = '';\n    }\n    return 'XMLHTTPREQUEST FAILED\\n' +\n        (\"Url: \" + error.responseURL + \"\\n\") +\n        (\"Status: \" + error.status + \" - \" + error.statusText + \"\\n\") +\n        (\"\" + (jsonResult !== '' ? 'Message: ' + jsonResult : ''));\n};\n","import { extend } from '@syncfusion/ej2-base';\nimport { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `AutoCompleteEditCell` is used to handle autocomplete cell type editing.\n * @hidden\n */\nvar AutoCompleteEditCell = /** @class */ (function () {\n    function AutoCompleteEditCell(parent) {\n        //constructor\n        this.parentObj = parent;\n    }\n    AutoCompleteEditCell.prototype.create = function (args) {\n        //create \n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parentObj.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parentObj.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    AutoCompleteEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parentObj.editSettings.mode !== 'Dialog';\n        this.object = new AutoComplete(extend({\n            dataSource: this.parentObj.dataSource instanceof DataManager ?\n                this.parentObj.dataSource : new DataManager(this.parentObj.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            // enableRtl: this.parentObject.enableRtl,\n            actionComplete: this.selectedValues.bind(this),\n            placeholder: isInlineEdit ? '' : args.column.headerText,\n            floatLabelType: isInlineEdit ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.object.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    AutoCompleteEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    AutoCompleteEditCell.prototype.selectedValues = function (valObj) {\n        valObj.result = DataUtil.distinct(valObj.result, this.object.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = valObj.result;\n        }\n    };\n    AutoCompleteEditCell.prototype.destroy = function () {\n        if (this.object) {\n            this.object.destroy();\n        }\n    };\n    return AutoCompleteEditCell;\n}());\nexport { AutoCompleteEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ComboBoxEditCell` is used to handle ComboBoxEdit cell type editing.\n * @hidden\n */\nvar ComboboxEditCell = /** @class */ (function () {\n    function ComboboxEditCell(parentObject) {\n        //constructor\n        this.parent = parentObject;\n    }\n    ComboboxEditCell.prototype.create = function (args) {\n        //create\n        var fieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + fieldName,\n                name: fieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    ComboboxEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineMode = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new ComboBox(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.finalValue.bind(this),\n            placeholder: isInlineMode ? '' : args.column.headerText,\n            floatLabelType: isInlineMode ? 'Never' : 'Always',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ComboboxEditCell.prototype.read = function (inputEle) {\n        return inputEle.ej2_instances[0].value;\n    };\n    ComboboxEditCell.prototype.finalValue = function (val) {\n        val.result = DataUtil.distinct(val.result, this.obj.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = val.result;\n        }\n    };\n    ComboboxEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ComboboxEditCell;\n}());\nexport { ComboboxEditCell };\n","import { extend, getValue } from '@syncfusion/ej2-base';\nimport { MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { getComplexFieldID, } from '../base/util';\n/**\n * `MultiSelectEditCell` is used to handle multiselect dropdown cell type editing.\n * @hidden\n */\nvar MultiSelectEditCell = /** @class */ (function () {\n    function MultiSelectEditCell(parentObj) {\n        //constructor\n        this.parent = parentObj;\n    }\n    MultiSelectEditCell.prototype.create = function (args) {\n        //create\n        var colName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + colName,\n                name: colName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MultiSelectEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MultiSelectEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MultiSelect(extend({\n            fields: { text: args.column.field, value: args.column.field },\n            value: getValue(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    MultiSelectEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MultiSelectEditCell;\n}());\nexport { MultiSelectEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { TimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `TimePickerEditCell` is used to handle Timepicker cell type editing.\n * @hidden\n */\nvar TimePickerEditCell = /** @class */ (function () {\n    function TimePickerEditCell(grid) {\n        this.parent = grid;\n    }\n    TimePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexField,\n                name: complexField, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    TimePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    TimePickerEditCell.prototype.write = function (args) {\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        var rowDataValue = getObject(args.column.field, args.rowData);\n        rowDataValue = rowDataValue ? new Date(rowDataValue) : null;\n        this.obj = new TimePicker(extend({\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            value: rowDataValue,\n            placeholder: isInlineEdit ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    TimePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return TimePickerEditCell;\n}());\nexport { TimePickerEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Switch } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ToggleEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar ToggleEditCell = /** @class */ (function () {\n    function ToggleEditCell(parentObject) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parentObject;\n    }\n    ToggleEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexField,\n                name: complexField\n            }\n        });\n    };\n    ToggleEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    ToggleEditCell.prototype.write = function (args) {\n        var chkBoxElement;\n        var checkState;\n        // let isAddRow : boolean =  args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            chkBoxElement = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            checkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(chkBoxElement)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                checkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), checkState].concat(this.activeClasses));\n        }\n        this.obj = new Switch(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: checkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.switchModeChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ToggleEditCell.prototype.switchModeChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var addClass = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                addClass = true;\n                this.editRow.setAttribute('aria-selected', addClass.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), addClass].concat(this.activeClasses));\n        }\n    };\n    ToggleEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ToggleEditCell;\n}());\nexport { ToggleEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `MaskedTextBoxCellEdit` is used to handle masked input cell type editing.\n * @hidden\n */\nvar MaskedTextBoxCellEdit = /** @class */ (function () {\n    function MaskedTextBoxCellEdit(parentInstance) {\n        //constructor\n        this.parent = parentInstance;\n    }\n    MaskedTextBoxCellEdit.prototype.create = function (args) {\n        //create\n        var columnField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + columnField,\n                name: columnField, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MaskedTextBoxCellEdit.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MaskedTextBox(extend({\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            mask: '000-000-0000',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    MaskedTextBoxCellEdit.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MaskedTextBoxCellEdit.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MaskedTextBoxCellEdit;\n}());\nexport { MaskedTextBoxCellEdit };\n"],"names":["getCloneProperties","doesImplementInterface","target","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","DataUtil","getObject","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","updatecloneRow","grid","nRows","actualRows","vRows","i","length","isDataRow","push","isExpand","isCaptionRow","getCollapsedRowsCount","vcRows","val","count","gSummary","gLen","groupSettings","columns","records","value","dataRowCnt","agrCnt","indent","len","gLevel","GroupGuid","childLevels","recursive","row","j","length_1","nLevel","iterateArrayOrObject","collection","predicate","result","pred","iterateExtend","array","obj","baseExtend","getActualProperties","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","Object","keys","forEach","index","indexOf","setColumnIndex","columnModel","ind","prepareColumns","autoWidth","c","Column","headerText","foreignKeyValue","foreignKeyField","getValue","window","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","popup","offsetWidth","x","getPosition","right","getPopupLeftPosition","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","remove","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","type","context","temp","customAggregate","Array","aggregates","toLowerCase","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","isComplexField","split","getComplexFieldID","replace","setComplexFieldID","isEditable","col","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","editSettings","mode","showConfirmDialog","wrap","action","add","setFormatter","serviceLocator","fmtr","getService","getFormatFunction","skeleton","format","setParser","getParserFunction","addRemoveActiveClasses","cells","args","_i","arguments","setAttribute","removeAttribute","distinctStringValues","res","toString","getFilterMenuPostion","dialogObj","elementVisible","newpos","dlgWidth","enableRtl","calculatePosition","leftPos","calculateRelativeBasedPosition","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","removeAddCboxClasses","checked","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","cell","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Predicate","Date","setSeconds","getSeconds","setHours","predicateSt","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","mEle","cloneNode","childElementCount","isGroupAdaptive","enableVirtualization","isVirtualAdaptive","object","splits","getCustomDateFormat","colType","intl","Internationalization","getDatePattern","getExpandedState","gObj","hierarchyPrintMode","rows_1","getRowsObject","isDetailRow","allowPaging","printMode","pageSettings","currentPage","pageSize","gridModel","getPrintGridModel","childGrid","printGridModel","_a","Print","printGridProp","expandedRows","extendObjWithFn","deep","_loop_1","arguments_1","obj1","getPrototypeOf","concat","getPrototypesOfObj","cln","source","cpy","isObject","isArray","measureColumnDepth","max","depth","checkDepth","indices","refreshFilteredColsUid","filteredCols","getForeignKeyColumns","getColumnByField","setStateAndProperties","attribute","summaryIterator","callback","dateanddatetimerender","rtl","isInline","rowData","floatLabelType","placeholder","enabled","requestType","ValueFormatter","cultureName","this","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","setCulture","__decorate","decorators","desc","d","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","options","_this","allowSorting","allowResizing","allowFiltering","allowGrouping","allowReordering","showColumnMenu","enableGroupByFormat","filter","showInColumnChooser","edit","allowSearching","autoFit","sortDirection","getEditTemplate","editTemplateFn","getFilterTemplate","filterTemplateFn","merge","editType","valueFormatter","toJSON","skip","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","editTemplate","filterTemplate","isForeignColumn","params","fields","text","sortComparer","a_1","xObj","yObj","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","CommandColumnModel","Property","rowDataBound","queryCellInfo","headerCellInfo","actionBegin","actionComplete","actionFailure","dataBound","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStartHelper","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","batchAdd","batchCancel","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","recordDoubleClick","beforeDataBound","beforeOpenColumnChooser","resizeStop","checkBoxChange","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","filterSearchBegin","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","pageComplete","sortComplete","filterComplete","searchComplete","reorderComplete","groupComplete","ungroupComplete","groupAggregates","refreshFooterRenderer","refreshAggregateCell","refreshAggregates","rowSelectionComplete","cellSelectionComplete","beforeCellFocused","cellFocused","keyPressed","click","destroy","columnVisibilityChanged","scroll","columnWidthChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshComplete","refreshVirtualBlock","dblclick","toolbarRefresh","bulkSave","autoCol","tooltipDestroy","updateData","saveComplete","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","excelHeaderQueryCellInfo","exportDetailDataBound","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","pdfHeaderQueryCellInfo","contextMenuClick","freezeRender","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","initForeignKeyColumn","getForeignKeyData","generateQuery","showEmptyGrid","dataStateChange","dataSourceChanged","rtlUpdated","beforeFragAppend","frozenHeight","textWrapRefresh","recordAdded","cancelBegin","editNextValCell","hierarchyPrint","expandChildGrid","printGridInit","exportRowDataBound","rowPositionChanged","columnChooserOpened","batchForm","beforeBatchCancel","batchEditFormRendered","partialRefresh","beforeCustomFilterOpen","selectVirtualRow","scrollModule","isAsyncPrint","defered","Deferred","isDestroyed","on","events.contentReady","isContentReady","addEventListener","events.actionBegin","bind","events.onEmpty","events.hierarchyPrint","isPrintGrid","promise","then","removeColGroup","printGridObj","printModule","resolve","print","renderPrintGrid","printWind","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","printGrid","Grid","getQuery","clone","isPrinting","modules","getInjectedModules","injectedModues","setInjectedModules","notify","events.printGridInit","printgrid","log","getModuleName","appendTo","registeredTemplate","trigger","selectedRows","getContentTable","cancel","events.beforePrint","detach","cssProps","getCssProperties","contentDiv","headerDiv","overflowY","padding","firstElementChild","border","overflowX","waitingPop","_b","_c","printGridElement","events.printComplete","printWindow","groupCaption","colSpan","getAttribute","colGroups","childNodes","off","removeEventListener","CellType","RenderType","ToolbarItem","CheckBoxFilter","filterSettings","existingPredicate","foreignKeyQuery","filterState","values","renderEmpty","locale","cBoxTrue","createCheckBox","label","cBoxFalse","insertBefore","attrs","firstChild","closeDialog","wireEvents","EventHandler","clickHandler","searchHandler","debounce","searchBoxKeyUp","unWireEvents","foreignKeyFilter","fColl","mPredicate","fPredicate","filterCollection","executeQuery","events.generateQuery","predicates","fpred","ignoreCase","ignoreAccent","handler","foreignFilter","getDataModule","isRemote","initalPredicate","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","localeObj","getConstant","updateDataSource","updateModel","actualPredicate","filteredColumns","sortedColumns","sortSettings","allowCaseSensitive","isFiltered","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","inputargs","Input","createInput","spinner","cBox","showDialog","events.filterBeforeOpen","columnName","columnType","isBlazor","isJsComponent","Dialog","content","close","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","cssClass","isPrimary","created","dialogCreated","dialogOpen","maxHeight","show","createSpinner","showSpinner","getAllData","Browser","isDevice","X","Y","events.filterDialogCreated","openDialog","getColumns","destroyTemplate","events.filterMenuClose","clearFilter","events.preventBatch","instance","tagName","textContent","fltrBtnHandler","optr","searchInput","caseSen","enableCaseSensitivity","defaults","isNotEqual","itemsCnt","fObj","arg1","arg2","arg3","arg4","arg5","arg6","initiateFilter","firstVal","foreignQuery","queries","parsed","parseFloat","predicte","addDistinct","events.filterSearchBegin","filterModel","filterChoiceCount","take","search","filterEvent","processSearch","getPredicateFromCols","getPredicate","predicateList","foreignColumn","prop","requiresCount","events.filterChoiceRequest","processDataOperation","filteredColumn","distinct","eventPromise","dataSuccess","state","getStateEventArgument","def","events.dataStateChange","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","isInitial","allPromise","runArray","Promise","all","fullData","searchSettings","sSettings","map","f","cols","filterColumn","filteredData","getDistinct","processDataSource","events.filterAfterOpen","events.actionComplete","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes_1","createCheckbox","cnt","selected","btn","btnObj","disabled","dataBind","cBoxes","nullCounter","selectAllValue","checkBox","isColFiltered","isRndere","checkbox","getCheckedState","hideSpinner","lookup","foreignDataObj","events.foreignKeyData","group","sort","generatePredicate","updateDateFilter","getCaseValue","p","Data","dataState","isPending","resolver","initDataManager","events.rowsAdded","addRows","events.rowPositionChanged","reorderRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","events.autoCol","refreshFilteredCols","dataManager","splice","toIndex","fromIndex","skipPage","columnQueryMode","select","selectQueryFields","filterQuery","searchQuery","aggregateQuery","sortQuery","virtualGroupPageQuery","pageQuery","groupQuery","isForeign","aggregate","pageCount","page","moduleName","isGrpFmt","formatGroupColumn","sortGrp","fn","sortBy","getSearchColumnFieldNames","getModulename","fGeneratePredicate","skipFoerign","actualFilter","checkBoxCols","defaultFltrCols","columns_1","excelPredicate","_d","_e","defaultFltrCols_1","grabColumnByFieldFromAllCols","column_1","grabColumnByUidFromAllCols","sType","events.showEmptyGrid","getKey","getPrimaryKeyFieldNames","crud","fromTable","changes","addedRecords","deletedRecords","changedRecords","saveChanges","insert","events.recordAdded","ready","deferred_1","catch","reject","date","getHours","getMinutes","getMilliseconds","update","previousData","events.crudAction","original","deff","endEdit","setState","events.dataSourceChanged","offline","getState","pvtData","dataArgs","isDataChanged","editArgs","cancelEdit","colFieldNames","columns_2","Row","Cell","isSpanned","isRowSpanned","CellMergeRender","render","cellArgs","td","spannedCell","cellRenderer","getCellRenderer","cellType","cellSpan","rowSpan","targetCell_1","colSpanLen","colSpanRange","rowSpanRange","spanText","aria-colSpan","rowspan","aria-rowspan","Number","enableColumnVirtualization","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","rows","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","getVisibleColumns","item","RowRenderer","isSpan","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","tr","cells_1","isEdit","rowArgs","attrCopy","chekBoxEnable","isSelected","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","DetailExpand","this_1","Filter","CommandColumn","requestTypeAction","prevRowCell","isRowDragable","detailTemplate","scrollHeight","footerTemplate","summarycell","lastSummaryCell","attr","classes","isAltRow","class","RowModelGenerator","generateRows","startIndex","generateRow","ensureColumns","generateCell","RowDragIcon","pid","tIndex","parentGid","enableAltRow","refreshForeignKeyRow","generateCells","tmp","dummy","rowId","oIndex","opt","isDataCell","isTemplate","rowID","refreshRows","input","__extends","extendStatics","b","setPrototypeOf","__proto__","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","start","end","apply","currentViewData","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","DetailFooterIntent","sColumn","scolumn","single","setTemplate","types","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","reduce","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","getGroupedRecords","parentid","childId","items","generateDataRows","generateCaptionRow","rowCnt","aggregatesCount","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","parentID","childID","childGid","fkValue","unshift","cRow","ContentRender","freezeRows","movableRows","freezeRowElements","isLoaded","drop","events.columnDrop","droppedElement","rafCallback","arg","ariaService","setBusy","getPanel","getFrozenColumns","isFrozen","events.dataBound","allowTextWrap","events.freezeRender","case","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","renderPanel","innerDiv","setOptions","busy","setPanel","renderTable","virtualTable","virtualTrack","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","frozenRows","getHeaderContent","cellspacing","setColGroup","getColGroup","splitRows","idx","rowElements","refreshContentRows","hdrTbody","trElement","frag","createDocumentFragment","hdrfrag","fCont","mCont","cont","modelData","templatetoclear","rootNodes","parentNode","tbody","blockLoad","scrollTop","virtualInfo","offsets","offsets_1","vGroupOffsets","bSize","m","blockIndexes","contentPanel","rowObject","rowTemplateID","getRowTemplate","isTR","nodeName","lastElementChild","events.rowDataBound","events.expandChildGrid","colcount","getHeaderTable","events.beforeFragAppend","borderRightWidth","updateBlazorTemplate","appendContent","panel","contentTable","getRows","getMovableRows","getRowElements","getMovableRowElements","setRowElements","colgroup","colGroup","fRows","mRows","rowLen","cellLen","testRow","needFullRefresh","getDataRows","contentrows","clen","getNormalizedColumnIndex","displayVal","mTable","getContent","getMovableDataRows","isDetail","setDisplayNone","invokedFromMedia","hideAtMedia","updateMediaColumns","events.partialRefresh","replaceChild","Droppable","accept","canSkip","setSelection","set","clearAll","getRowByIndex","getVirtualRowIndex","getMovableRowByIndex","module","enable","setRowObjects","HeaderRender","frzIdx","notfrzIdx","sender","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","getColumnByUid","lockColumn","colIndex","getColumnIndexByField","lineHeight","dragStart","events.columnDragStart","event","drag","closest","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","widthService","events.columnPositionChanged","colPosRefresh","toggleStackClass","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","createTable","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","Header","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getHeaderCells","len_2","HeaderIndent","DetailHeader","RowDragHIcon","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isFirstCol","isLastCol","isMovable","lastCol","getCellCnt","frzObj","refreshFrozenHdr","isPartial","isComp","stackedLockColsCount","getStackedLockColsCount","frozenColumns","StackedHeader","getColSpan","getColumnIndexByUid","lockColsCount","frozenCnt","frzCol","rowIndex","mTblColGrp","refreshUI","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","showDropArea","headerRows","Draggable","dragTarget","distance","abort","CellRenderer","locator","localizer","formatter","tabindex","rowChkBox","getGui","evaluate","fData","dummyData","templateID","str","rNumber","parseInt","invokeFormatter","refreshCell","refreshTD","elements_1","innerHtml","displayAsCheckBox","localeStr","fromFormatter","appendHtml","persistSelection","checkWrap","setAttributes","isNaN","property","buildAttributeFromCell","clipMode","isCheckBoxType","AriaService","name","config","setExpand","expand","setSort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","haspopup","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","checkAllWrap","matchFlColumns","extendPrepareHeader","gridObj","headerTempID","headerTextAlign","alignment","matchFilteredColumns","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","tempID","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","RowDragDropRenderer","nodeElement","RowDragDropHeaderRenderer","Render","emptyGrid","l10n","renderer","headerRenderer","getRenderer","contentRenderer","Content","isLayoutRendered","emptyRow","setWidth","setHeight","setPadding","refreshDataManager","resetTemplates","getSelectedRecords","events.cancelBegin","dataLength","totalRecordsCount","prevPageMoving","pagerModule","pagerObj","gridColumns","detailTemplateID","blazorTemplates","resetBlazorTemplate","toolbarTemplate","k","isFActon","isNeedForeignAction","deffered","getFData","deffered_1","events.getForeignKeyData","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","dmSuccess","dmFailure","renderEmptyRow","isTrigger","spanCount","colspan","dynamicColumnChange","getCurrentViewRecords","updateColumnType","record","validationRules","isColTypeDef","actionArgs","events.beforeDataBound","events.tooltipDestroy","updatesOnInitialRender","isInitialLoad","events.dataReady","alert","events.toolbarRefresh","events.actionFailure","error","buildColumns","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","events.refreshComplete","events.bulkSave","group0","groupN","addWhere","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","uGroup","itemGroup","uGroupItem","data_1","CellRendererFactory","cellRenderMap","getEnumValue","ServiceLocator","services","register","RendererFactory","rendererMap","rName","ColumnWidthService","totalColumnsWidth","setColumnWidth","getTableWidth","setMinwidthBycalculation","tWidth","difference","tmWidth","collection_1","minWidth","isWidthUndefined","setUndefinedColumnWidth","cWidth","getWidth","tgridWidth","setWidthToTable","clear","Boolean","elementWidth","headerCol","header","fWidth","formatUnit","mHdr","contentCol","editTableCol","getSiblingsHeight","getHeightFromDirection","sibling","isWidUndefCount","maxWidth","calcMovableOrFreezeColWidth","tableType","setWidthToFrozenTable","freezeWidth","setWidthToMovableTable","movableWidth","isColUndefined","isWidthAuto","setWidthToFrozenEditTable","setWidthToMovableEditTable","FocusStrategy","currentInfo","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","refMatrix","refreshMatrix","focusCheck","onFocus","setActive","matrix","get","validator","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","force","isContent","isHeader","clearOutline","beforeArgs","byKey","byClick","clickArgs","event.beforeCellFocused","onKeyPress","skipOn","keyArgs","bValue","outline","swapInfo","jump","toHeader","toFrozen","getNextCurrent","active","setActiveByKey","preventDefault","clearIndicator","activeElement","getFocusedElement","fContent","fHeader","setFocusedElement","setTimeout","addFocus","info","isFocused","event.cellFocused","isJump","container","getInfo","cellIndex","focusedColumnUid","getColumnByIndex","FixedContentFocus","ContentFocus","FixedHeaderFocus","HeaderFocus","cFocus","updateRow","isRowTemplate","generate","frozenColumnsCount","newMovableRows","newFrozenRows","handlerInstance","index_1","focusElement","cellPosition","gridPosition","min","innerWidth","documentElement","bottom","innerHeight","clientHeight","passiveHandler","event.keyPressed","event.click","event.contentReady","event.partialRefresh","event.headerRefreshed","restoreFocus","evt","event.batchAdd","event.batchCancel","event.batchDelete","event.detailDataBound","event.onEmpty","internalCellFocus","getPrevIndexes","forgetPrevious","actions","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","navigator","inValid","vector","rIndex","cIndex","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","editNextRow","allowNextRowEdit","isLastCellPrimaryKey","visibleIndex","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","child","isDirty","frozenSwap","enterFrozen","previous","optionals","defaultLen","isData","isSelectable","isCellWidth","current1","current2","current3","SearchBox","searchFocus","searchBlur","wireEvent","unWireEvent","PageSettings","__assign","assign","t","s","n","Selection","selectedRowIndexes","selectedRowCellIndexes","selectedRecords","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","isCancelDeSelect","isPreventCellSelect","disableUI","isPersisted","cmdKeyPressed","factory","initializeSelection","mouseDownHandler","onActionBegin","fDataUpdate","rowObj","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","clearSelection","isEditing","editModule","formObj","validate","isPersistSelection","getSelectedMovableRow","getCurrentBatchRecordChanges","currentRecords","getBatchChanges","primaryKey","selectRow","isToggle","enableSimpleMultiRowSelection","addRowsToSelection","selectData","selectedRow","selectedMovableRow","isRemoved","clearRowSelection","events.selectVirtualRow","selectedIndex","getRowObjectFromUID","isRowType","isRowSelected","hasAttribute","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","actualTarget","addMovableArgs","events.rowSelecting","clearSelectedRow","clearRow","updateRowSelection","selectRowIndex","events.rowSelected","updateRowProps","targetObj","mRow","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedData","prevRow","rowIndexes_1","rowIdx","checkboxColumn","rowIndexes_2","isUnSelected","enableToggle","rowDeselect","events.rowDeselecting","addRemoveClassesForRow","events.rowDeselected","isInteracted","reverse","selectedEle","updatePersistCollection","updateCheckBoxes","chkState","pKey_1","updatePersistDelete","pKey","chkBox","nextElementSibling","checkedTarget","setCheckAllState","pop","clearCellSelection","currentRow","checkSelectAllClicked","getCheckAllStatus","updatePersistSelectedData","movableRow","rowDeselectObj","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","isUndefined","prevCIdxs","successCallBack","previousRowCell","prevECIdxs","getCellIndex","events.cellSelecting","cellSelectingArgs","currentCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","events.cellSelected","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","cellSelectedArgs","selectCells","rowCellIndexes","cellSelectArgs","addRowCellIndex","addCellsToSelection","hideAutoFill","getMovableRowsObject","cellIndexes_1","selectedCellIdx","cellDeselect","events.cellDeselecting","events.cellDeselected","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","bdrBottom","hideBorders","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","startAFCell","startCell","endAFCell","selectLikeExcel","startDIndex","isAutoFillSel","showAFBorders","selectLikeAutoFill","startDCellIndex","drawBorders","createBorders","positionBorders","updateStartEndCells","bdrLeft","showBorders","stOff","endOff","endCell","parentOff","offsetParent","bdrRight","bdrTop","drawAFBorders","bdrAFBottom","createAFBorders","positionAFBorders","bdrAFLeft","bdrAFRight","bdrAFTop","hideAFBorders","updateValue","updateCell","isApply","startrowIdx","startCellIdx","endrowIdx","endCellIdx","colLen","cellIdx","startCellIndex","trIdx","mouseUpHandler","mUPTarget","updateAutoFillPosition","updateStartCellsIndex","autofill","enableAutoFill","clientRect","isDrag","allowRowDragAndDrop","enableDrag","isUpdate","postion","clearSelAfterRefresh","events.initialEnd","events.rowSelectionComplete","events.cellSelectionComplete","events.inBoundModelChanged","onPropertyChanged","events.cellFocused","onCellFocused","actionBeginFunction","actionCompleteFunction","refreshHeader","addEventListener_checkbox","removeEventListener_checkbox","isMacOS","userAgent","keyDownHandler","keyUpHandler","getCheckAllBox","checkBoxSelectionChanged","initPerisistSelection","checkboxMode","selectedRowIndex","gobj","chkField","ensureCheckboxFieldSelection","proxy_1","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","checkSelectAllAction","cRenderer","editForm","checkSelectAll","stateStr","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","events.checkBoxChange","updateSelectedRowIndex","selectedVal","isInteraction","checkedLen","spanEle","keyCode","popUpClickHandler","chkSelect","checkboxOnly","showPopup","headerAction","thLen","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","applyUpDown","isAdd","detailIndentCell","dragdropIndentCell","onDataBoundFunction","actionCompleteFunc","actionCompleteHandler","events.click","resizeEndFn","events.resizeStop","isSelectedRowIndexUpdating","Search","searchString","refreshSearch","events.searchComplete","onSearchComplete","cancelBeginEvent","ShowHide","showBy","getToggleFields","hide","hideBy","getKeyBy","currentViewCols","allowSelection","col1","col2","Scroll","lastScrollTop","previousValues","oneTimeReady","uiupdate","toolbarModule","toolbar","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","removePadding","setScrollLeft","headerModule","getMovableHeader","scrollLeft","onContentScroll","scrollTarget","isPreventScrollEvent","isFooter","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","setPageXY","touches","pageX","pageY","getFooterContent","sLeft","sHeight","css","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","pasteHandler","target_1","clipBoardTextArea","x_1","scrollX","y_1","scrollY","scrollTo","paste","isAvail","dataRows","fTr","mTr","selectionModule","aria-label","copy","setCopyData","withHeader","getSelection","selectedIndexes","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","getSelectedRowCellIndexes","stringify","SortDescriptor","SortSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","inViewIndexes","media","freezeRefresh","Component","pageTemplateChange","enableLogger","needsID","Grid_1","Inject","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","scrollPosition","currentObject","pagerTemplate","addOnPersist","requiredModules","member","allowExcelExport","allowPdfExport","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","mediaCol","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","NumberFilter","TextFilter","DateFilter","DateTimeFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","renderComplete","renderModule","searchModule","getMediaColumns","checkLockColumns","processModel","gridRender","addListener","updateStackedFilter","gcol","getShowHideService","pushMediaColumn","matchMedia","mediaQueryUpdate","mediaColumn","matches","showHider","refreshMediaCol","footerContent","eventInitializer","hasGridChild","unwireEvents","removeListener","destroyDependentModules","toolTipObj","keyboardModule","focusModule","enableBoxSelection","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","maintainSelection","updateRTL","ej2_instances","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","events.rtlUpdated","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","deepWatch","pKeyField","props","setRowData","gResult_1","enableHover","fn_1","muteOnChange","filterModule","refreshFilter","headerRows_1","updateColumnModel","updateFrozenColumns","updateLockableColumns","frozenCount","movableCount","isRefresh","inview","vLen","stackedHeader","individualColumn","stackedColumn","getLocaleConstants","setColumnIndexesInView","setGridHeaderContent","contentModule","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getElementsByClassName","getFooterContentTable","getPager","gridPager","setGridPager","getRowInfo","row_1","rowsObject","mrows","dRows","setCellValue","fieldIdx","pkName","movableSelectedRow","rowObjects","movableRowObjects","sRow","events.refreshFooterRenderer","events.groupAggregates","events.queryCellInfo","getColumnHeaderByField","getColumnHeaderByUid","getStackedColumns","getUidByColumnField","getColumnFieldNames","columnNames","getDetailTemplate","getSelectedRows","showColumns","hideColumns","getFrozenCount","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","visibleFrozenColumns","goToPage","pageNo","updateExternalMessage","message","sortColumn","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","actualFilterValue","actualOperator","clearFiltering","removeFilteredColsByField","isClearFilterBar","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","editCell","saveCell","enableToolbarItems","isEnable","enableItems","clipboardModule","recalcIndentWidth","indentWidth","perPixel","events.columnWidthChanged","rowDropSettings","targetID","reorderColumns","fromFName","toFName","reorderModule","reorderColumnByIndex","reorderColumnByTargetIndex","fromIndexes","rowDragAndDropModule","refreshDataSource","disableRowDD","disValue","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","L10n","valueFormatterService","flag","gCols","sCols","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","events.initForeignKeyColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","Tooltip","opensOn","getTooltipStatus","htable","ctable","isEllipsisTooltip","prevElement","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","onKeyPressed","mouseClickHandler","focusOutHandler","dblClickHandler","keyPressHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","dataBoundFunction","blazorTemplate","isChildGrid","checkEdit","dataRow","events.recordDoubleClick","events.dblclick","filterClear","ariaOwns","keyPress","events.editNextValCell","editFormValidate","localStorage","getItem","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","arr","localCol","tCol","presskey","stopImmediatePropagation","injectedModules","refreshColumns","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","groupExpandAll","expandAll","groupCollapseAll","collapseAll","clearGrouping","ungroupColumn","openColumnChooser","detailCollapseAll","detailRowModule","detailExpandAll","isContextMenuOpen","isOpen","ensureModuleInjected","propertyNames","clearTemplate","loggerModule","applyBiggerTheme","getPreviousRowData","hideScroll","cTable","fTable","events.frozenHeight","getRowIndexByPrimaryKey","gCol","Complex","Event","NotifyPropertyChanges","Sort","contentRefresh","isModelChanged","aria","currentTarget","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","isFromGroup","lastSortedCol","isRemove","allowMultiSorting","backupSettings","removeSortIcons","updateSortedCols","lastSortedCols","lastCols","restoreSettings","refreshSortSettings","addSortIcons","events.sortComplete","refreshSortIcons","refreshing","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","next","last","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","enableExternalMessage","checkpagesizes","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","pagerAllDropDown","All","containerModule","pagerMessageModule","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","setPageSize","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","getPagerTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","PagerDropDown","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","convertValue","defaultValue","dropDownListObject","DropDownList","change","onChange","beforeValueChange","pageSizeValue","ExternalMessage","externalMessage","Page","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","appendToElement","handlers","load","complete","updateLayout","inboundChange","events.pageComplete","FilterCellRenderer","fltrData","filterBarTemplate","showClearButton","Element","templateWrite","write","FlMenuOptrUI","customFltrOperators","customFilterOperators","renderOperatorUI","dlgConetntEle","dlgObj","optrData","customOptr","operators","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","optrLen","getFlOperator","StringFilterUI","serLocator","actObj","getAutoCompleteOptions","AutoComplete","sortOrder","openPopup","filterType","getOptrInstance","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","NumberFilterUI","numericTxtObj","NumericTextBox","BooleanFilterUI","dropInstance","drpuiObj","DateFilterUI","fltrSettings","inputElem","datePickerObj","DatePicker","DateTimePicker","FilterMenuRenderer","fltrObj","isDialogOpen","colTypes","string","number","boolean","datetime","flMuiObj","renderDlgContent","getElementById","mainDiv","dlgDiv","showCloseIcon","closeOnEscape","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","renderFlValueUI","valueDiv","instanceofFilterUI","compElement","ui","dlgContentEle","flValue","flOptrValue","targ","fltrValue","iconClass","flIcon","ExcelFilter","getCMenuDS","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","menu","ul","icon","createMenuElem","ensureTextFilter","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","submenu","isCMenuOpen","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","isIE","pageYOffset","getCMenuYPosition","MouseEvent","contextWidth","targetBorder","filterLength","renderDialogue","complexFieldName","isModal","overlayClick","removeDialog","createdDialog","removeObjects","datePicker","dateTimePicker","renderCustomFilter","events.beforeCustomFilterOpen","dialog","dlgFields","fieldSet","displayName","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","andRadio","firstOperator","firstValue","secondOperator","secondValue","arg7","arg8","elementID","isFirst","fieldElement","xlfloptr","menuText","getSelectedValue","getSelectedText","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","RadioButton","orRadio","elementId","isFilteredCol","fltrPredicates","columnObj","getExcelFilterData","valueInput","renderAutoComplete","renderNumericTextBox","renderDate","renderDateTime","predIndex","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","completeAction","columnvalue","mapObject","performComplexDataOperation","returnObj","duplicateMap","cellText","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","rowdrag","detail","updateFilterMsg","filterBarElement","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","events.filterComplete","events.filterOpen","columnMenuFilter","filterIconClickHandler","filterCell","checkForSkipInput","filterStatusMsg","applyColumnFormat","addFilteredClass","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","refreshFilterSettings","updateFilter","getFilterBarElement","colUid","filteredcols","fltrElement","isClose","filterDialogOpen","customOperators","filterHandler","localizedStrings","fCell","filteredColsUid","currentFilterColumn","closeHeaderEle","processFilter","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","stopTimer","startTimer","timer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","datepickerEle","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","newarray","resizeColumn","footerTable","headerTextClone","contentTextClone","footerTextClone","indentWidthClone","detailsElement","contentText","footerText","wHeader","wContent","wFooter","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","resizeStart","callAutoFit","getTargetColumn","refreshColumnWidth","refreshStackedColumnWidth","mtbody","ftbody","mtr","ftr","removeProperty","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","getColData","mousemove","setHelperHeight","colData","finalColumns","getSubColumns","calulateColumnsWidth","finalColumns_1","updateHelper","totalWidth","colWidth","subColumns","isFrozenColResized","events.textWrapRefresh","doubleTapEvent","getStackedWidth","calcPos","floor","cls","fLeft","parentOffset","offset","doc","ownerDocument","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","bool","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","newIndex","destElement","oldIdx","column_2","destIndex","reorderByColumn","getColParent","srcIdx","flatColumns","fTh","mTh","fHeaders","reorderSingleColumn","fColumn","toColumn","reorderMultipleColumns","fromFNames","parent_1","moveTargetColumn","reorderSingleColumnByTarget","reorderMultipleColumnByTarget","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseLeft","cliRectBaseRight","scrollElem","cliRectBase","RowDD","isOverflowBorder","selectedRowColls","startedRow","processArgs","dragelement","events.rowDragStartHelper","removeCell","exp","dropCountEle","spanCssEle","events.rowDragStart","dragStartData","dropElem","getElementFromPosition","hoverState","originalEvent","events.rowDrag","moveDragRows","bottomborder","gridcontentEle","getScrollWidth","removeBorder","targetEle","dropElement","stRow","dropIndex","events.rowDrop","targetRow","deleteCell","initializeDrag","onDataBoundFn","draggedRecords","dropIdx","actualIdx","len1","reorderRow","draggable","scrollPixel_1","setScrollDown","scrollPixel_2","scrollPixel","targetElement","setBorder","removeFirstRowBorder","removeLastRowBorder","rowElement","gridheaderEle","islastRowIndex","getTargetIdx","singleRowDrop","srcControl","startedRowIndex","srcControl_1","isSingleRowDragDrop","targetIndex","isAppliedGroup","isAppliedUnGroup","groupGenerator","dropArea","events.groupComplete","events.ungroupComplete","onGroupAggregates","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","rowNodes","isHide","expandElem","toExpand","updateVirtualRows","rObj","expandCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","groupAddSortingQuery","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","editedData","iterateGroupAggregates","summaryRows","dataUid","events.refreshAggregateCell","updatedData","initData","deletedCols","changeds","mergeData","pKeyVal","cItem","eData","aggr","aggrds","DetailRow","refreshColSpan","toogleExpandcollapse","nextRow","detailRow","data-uid","detailCell","nextSibling","getGridModel","parentPrimaryKeys","parentKeyField","parentRowData","promiseResolve","gridElem","events.detailDataBound","detailElement","getTDfromIndex","collapse","moduleObj","detailrows","detailrow","Toolbar","predefinedItems","gridID","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","createToolbar","bindSearchEvents","searchElement","refreshToolbarItems","updateSearchBox","getItems","tool","clicked","toolbarClickHandler","viewStr","items_1","disableItems","hasData","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","items_2","gID","newArgs","toolbarargs","tarElement","offsetTop","searchBoxObj","FooterRenderer","gridModule","modelGenerator","movableContent","fDiv","mDiv","frozenContent","tFoot","freezeTable","renderSummaryContent","cStart","cEnd","summaries","dummies","fragment","rowrenderer","srow","frozenDiv","onScroll","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","updateFooterTableWidth","fCol","onAggregates","mergeds","initds","addrow","idVal","currentds","currentData","curIndx","agrVal","SummaryCellRenderer","refreshWithAggregate","tempObj","cellNode","curCell","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","getFormatFromType","cModel","InterSectionObserver","fromWheel","touchMove","sentinelInfo","up","check","containerRect","entered","pageHeight","axis","down","observe","onEnterCallback","virtualScrollHandler","delay","prevTop","prevLeft","debounced100","debounced50","axes","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","cache","groups","rowModelGenerator","notifyArgs","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","isBlockAvailable","getStartIndex","median","updateGroupRow","getPage","block","columnIndexes","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","refreshColOffsets","currentFirst","iterateGroup","oRow","shift","VirtualContentRenderer","prevHeight","preventEvent","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","isSelection","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","getBlockHeight","observer","adjustTable","scrollListener","scrollArgs","viewInfo","getInfoFromView","prevInfo","tempBlocks","infoType","vHeight","getPageFromTop","blocks","ensureBlocks","every","mIdx","old","isEndBlock","getGroupedTotalBlocks","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","sTop","setVirtualHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","cHeight","isOnenter","endTranslate","blockHeight","maxBlock","onEntered","isWheel","scrollValues","getBlockSize","totalBlocks","startIdx","rem","size","refreshVirtualElement","VirtualHeaderRenderer","gen","tablewidth","xValue","yValue","transform","VirtualScroll","ensurePageSize","blockSize","InlineEditRender","addNew","mTbody","newRowPosition","getEditElement","renderMovableform","form","movableForm","updateFreezeEdit","getFreezeRow","fHdr","tdElement","refreshFreezeEdit","fCls","mTd","updateFrozenCont","isDragable","td_1","BatchEditRender","columnObject","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","primaryKeyValue","allowDragging","dialogClose","editTemplateID","events.destroyForm","checkColumnIsGrouped","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","cols_1","mTdElement","fTdElement","tArgs","isInput","BooleanEditCell","activeClasses","classNames","selectChkBox","editRow","DropDownEditCell","filtering","ddFiltering","ddActionComplete","popupHeight","dlgElement","NumericEditCell","instances","DefaultEditCell","NormalEdit","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","begineditargs","editargs","applyFormValidation","edFail","form1","form2","mFormObj","isDlg","dlgWrapper","dlgForm","getCurrentEditedData","mForm","endEditArgs","addedRowIndex","destroyElements","destroyWidgets","editHandler","edSucc","editSuccess","editFailure","updateCurrentViewData","requestSuccess","stopEditStatus","closeEditArgs","addArgs","dataLen","tmpRecord","contained","mElem","editMElem","events.doubleTap","events.deleteComplete","events.saveComplete","InlineEdit","BatchEdit","cellDetails","events.beforeCellFocused","onBeforeCellFocused","setCellIdx","isAddRow","validateFormObj","editCellFromIndex","argument","batchChanges","events.beforeBatchCancel","isAdded","removeRowObjectFromUID","events.batchCancel","refreshRowIdx","bulkDelete","bulkAddRow","batchSave","checkAllBox","removeSelectedData","events.beforeBatchSave","beforeBatchSaveArgs","mergeBatchChanges","i_1","addRowObject","isTop","getIndexFromData","events.beforeBatchDelete","beforeBatchDeleteArgs","uniqueid","events.batchDelete","nonMovableRows","defaultData","getDefaultData","events.beforeBatchAdd","beforeBatchAddArgs","events.batchAdd","findNextEditableCell","args1","isValOnly","validation","checkNPCell","dValues","rowData_1","mRowData","colIdx","getDataByIndex","getCellIdx","cellEditArgs","isColored","events.batchEditFormRendered","setChanges","rowcell","isForceSave","cloneEditedData","previousValue","events.batchForm","cellSaveArgs","visibleColumns","addCancelWhilePaging","DialogEdit","DatePickerEditCell","TemplateEditCell","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","editCellType","tapEvent","Global","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","inputElements","inputs","preventObj","rules","mRules","createFormObj","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","getElemTable","outerHTML","isFHdr","inputName","gcontent","isScroll","inputClient","validationForBottomRowPos","arrow","defaultView","getComputedStyle","getPropertyValue","AddEditors","editors","dropdownedit","numericedit","datepickeredit","datetimepickeredit","booleanedit","defaultedit","templateedit","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","prevShowedCols","rtlUpdate","enableAfterRenderEle","hideDialog","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","targetdlg","hideOpenedDialog","addcancelIcon","events.beforeOpenColumnChooser","refreshPosition","mOpenDlg","renderChooserList","updateIntermediateBtn","beforeOpen","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","events.columnChooserOpened","uncheckedLength","ulElement","columnStateChange","dialogInstance","stateColumns","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","okButton","clearSearch","buttonEle","selectedCbox","nMatchele","checkBoxClickHandler","checkstate","updateSelectAll","columnUid","visibleCols","columnUID","srchShowCols","searchData","itemsLen","hideCols","gdCol","cclist","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","cbox","hideColState","showColState","cccheckboxlist","searchValue","proxy","interval","openCC","dlgEle","dlgLen","ExportHelper","hideColumnInclude","getGridRowModel","processColumns","childGridLevel","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","processHeaderCells","generateActualColumns","getConvertedWidth","actualColumns","getCellCount","appendGridCells","gridRows","isIgnoreFirstCell","gridColumn","option","checkAndExport","gridPool","globalResolve","failureHandler","childGridObj","createChildGrid","exportType","exportId","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","exportProperties","isCsv","hierarchyExportMode","events.beforeExcelExport","processRecords","exportingSuccess","events.excelExportComplete","blobPromise","processInnerRecords","allPromise_1","groupedColLength","blankRows","multipleExport","worksheets","processExcelHeader","processGridExport","organisedRows","organiseRows","processExcelFooter","sheet","Workbook","currencyCode","saveAsBlob","fileName","save","initialIndex","childRows","excelRows","theme","groupIndent","processHeaderContent","processRecordContent","returnType","currentViewRecords","excelRow","processRecordRows","processGroupedRows","processAggregates","dataSource_1","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","grouping","outlineLevel","isCollapsed","gCell","cellValue","fkData","excelCellArgs","events.excelQueryCellInfo","hAlign","styleIndex","getColumnStyle","mergeOptions","returnVal","events.exportDetailDataBound","childGridCell","events.exportRowDataBound","excelExportProps","gRow","intent","isHidden","rec","byGroup","summaryModel","groupSummaryRows","sRows","customIndex","rows_2","eCell","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","getAggreateValue","aggregateStyle","gridCellStyle","numberFormat","JSON1","JSON2","attrname","spannedCells","currentCellIndex","gridCell","getIndex","getHeaderThemeStyle","excelHeaderCellArgs","events.excelHeaderQueryCellInfo","parseStyles","getRecordThemeStyle","fontSize","borders","color","bold","updateThemeStyle","themestyle","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","PdfExport","customDataSource","isGrouping","pdfDocument","exportWithData","PdfDocument","processExport","events.pdfExportComplete","events.beforePdfExport","pdfGrid","section","sections","processSectionExportProperties","pdfPage","pages","draw","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","gridTheme","processExportProperties","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","returnValue","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","fontFamily","fontName","getFontFamily","fontStyle","getFontStyle","pdfColor","fontColor","penBrushColor","hexToRgb","g","borderCaption","getBorderStyle","PdfBorders","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","gridHeader","getHeader","cellLength","pdfCell","getHorizontalAlignment","getVerticalAlignment","events.pdfHeaderQueryCellInfo","allowHorizontalOverflow","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","txt","gridRow","getColumn","setRecordThemeStyle","borderRecord","events.pdfQueryCellInfo","processCellStyle","gridRow_1","cellPadding","PdfPaddings","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","italic","underline","strikeout","borderWidth","borderColor","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","TimesRoman","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","button","onclick","buttonObj","Button","commandType","commandClickHandler","commandColumn","commandCol","commandclickargs","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","rowInfo","targetRowdata","events.contextMenuClick","updateItemStatus","getLocaleText","showItems","closestGrid","parentItem","hideSepItems","showSepItems","dItem","ensureDisabledStatus","ensureTarget","hideItems","eventArgs","events.contextMenuOpen","ensureFrozenHeader","substr","generateID","AutoFitAll","AutoFit","CsvExport","export","PrevPage","FreezeRowModelGenerator","isFrzLoad","FreezeContentRender","setFrozenContent","setMovableContent","getMovableContent","getFrozenContent","mTbl","FreezeRender","refreshFreeze","setFrozenHeight","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","movableHeader","getFrozenHeader","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","borderBottom","fRowSpan","mRowSpan","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenHeader","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","field_1","colChooser","events.columnMenuOpen","getFilter","events.columnMenuClick","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initEvent","initForeignKeyColumns","generateQueryFormData","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","isTrue","destroyEvent","BASE_DOC_URL","DOC_URL","WARNING","ERROR","INFO","Logger","patchadaptor","detailLists","cOp","success","console","logType","generateMessage","beforeSend","request","settings","module_missing","injected","promise_enabled","primary_column_missing","selection_key_missing","actionfailure","formatError","formatErrorHandler","ajaxError","ajaxErrorHandler","locale_missing","lObj","limitation","check_datasource_columns","virtual_height","grid_remote_edit","grid_sort_comparer","resize_min_max","action_disabled_column","exporting_begin","exporting_complete","foreign_key_failure","initial_action","frozen_rows_columns","column_type_missing","datasource_syntax_mismatch","jsonResult","responseText","responseURL","statusText","AutoCompleteEditCell","parentObj","isInlineEdit","selectedValues","valObj","ComboboxEditCell","parentObject","isInlineMode","ComboBox","finalValue","inputEle","MultiSelectEditCell","MultiSelect","TimePickerEditCell","complexField","rowDataValue","TimePicker","ToggleEditCell","chkBoxElement","Switch","switchModeChange","MaskedTextBoxCellEdit","parentInstance","columnField","MaskedTextBox","mask"],"mappings":"m8BAQA,SAAgBA,IACZ,OAAQ,aAAc,gBAAiB,iBAAkB,oBAAqB,kBAAmB,eAC7F,gBAAiB,YAAa,UAAW,kBAAmB,aAAc,iBAAkB,eAC5F,6BAA8B,iBAAkB,YAChD,gBAAiB,SAAU,SAAU,eAAgB,YAAa,QAAS,cAAe,YAC1F,YAAa,cAAe,eAAgB,mBAAoB,cAAe,qBAAsB,kBCG7G,SAAgBC,EAAuBC,EAAQC,GAE3C,OAAOD,EAAOE,WAAaD,KAAYD,EAAOE,UASlD,SAAgBC,EAAcC,EAAOC,EAAMC,GACvC,OAAQC,oBAAkBH,IAAoB,KAAVA,EAAgB,GAAKI,WAASC,UAAUL,EAAOC,GAQvF,SAAgBK,EAAkBC,EAAgBC,GAC9CC,sBAAsB,WAClB,IACID,EAAS,KAAMD,KAEnB,MAAOG,GACHF,EAASE,MAOrB,SAAgBC,EAAeC,GAG3B,IAAK,IAFDC,KACAC,EAAaF,EAAKG,MACbC,EAAI,EAAGA,EAAIF,EAAWG,OAAQD,IAC/BF,EAAWE,GAAGE,UACdL,EAAMM,KAAKL,EAAWE,IAEhBF,EAAWE,GAAGE,YACpBL,EAAMM,KAAKL,EAAWE,KACjBF,EAAWE,GAAGI,UAAYN,EAAWE,GAAGK,eACzCL,GAAKM,EAAsBR,EAAWE,GAAIJ,KAItDA,EAAKW,OAASV,EAMlB,SAAgBS,EAAsBE,EAAKZ,GACvCa,GAAQ,EACR,IAAIC,EAAW,WAEXC,EAAOf,EAAKgB,cAAcC,QAAQZ,OAClCa,EAAU,UAEVC,EAAQP,EAAIE,GACZM,EAAa,EACbC,EAAS,kBACb,GAAIF,IAAUP,EAAIvB,KAAU,MAkBxB,OAjBIW,EAAKgB,cAAcC,QAAQZ,SAAWd,oBAAkBqB,EAAIS,IAClB,IAAtCrB,EAAKgB,cAAcC,QAAQZ,QAAgBO,EAAIS,GAC/CR,IAAyB,IAAfD,EAAIU,QAAgB,EAAU,EAAMV,EAAIE,IAAcC,EAAOH,EAAIU,QAAWP,EAAOH,EAAIU,QAAUV,EAAIS,IAC1GT,EAAIE,IAAcC,EAAOH,EAAIU,QAAWP,EAAOH,EAAIU,OAAS,GAAKV,EAAIS,IAAYT,EAAIS,GAErFT,EAAIS,IAAiD,IAAtCrB,EAAKgB,cAAcC,QAAQZ,SAC/CQ,IAAUD,EAAIE,IAAaC,EAAOH,EAAIU,QAAWV,EAAIS,IAGpDrB,EAAKgB,cAAcC,QAAQZ,SACU,IAAtCL,EAAKgB,cAAcC,QAAQZ,OAC3BQ,IAASD,EAAIE,IAAad,EAAKgB,cAAcC,QAAQZ,OAASO,EAAIU,QAGlET,IAASD,EAAIE,IAGdD,GAGP,IAAK,IAAIT,EAAI,EAAGmB,EAAMX,EAAIvB,KAAU,MAAEgB,OAAQD,EAAImB,EAAKnB,IAAK,CACxD,IAAIoB,EAASZ,EAAIvB,KAAU,MAAEe,GAC7BS,IAASW,EAAY,MAAEnB,QAAWU,IAASf,EAAKiB,QAAQZ,QACnDd,oBAAkBiC,EAAY,MAAEN,IAA4C,EAAhCM,EAAY,MAAEN,GAASb,QACxEe,GAAgB7B,oBAAkBiC,EAAY,MAAEN,KAAc3B,oBAAkBqB,EAAIS,IAChFG,EAAY,MAAEnB,OAD8EmB,EAAY,MAAEN,GAASb,OAEnHmB,EAAY,MAAEC,WAA2C,IAA9BD,EAAY,MAAEE,aACzCC,EAAUH,GAUtB,OAPIX,IAASD,EAAIvB,KAAU,MAAEgB,OACpBd,oBAAkBqB,EAAIS,KACnBT,EAAIS,IAAWR,IAAwB,IAAfO,IACxBP,KAAWA,GAAQO,GAAcR,EAAIS,GAAWT,EAAIS,IAIzDR,GAKX,SAAgBc,EAAUC,GAGtB,IAAK,IAAIC,EAAI,EAAGC,EAAWF,EAAS,MAAEvB,OAAQwB,EAAIC,EAAUD,IAAK,CAC7D,IAAIE,EAASH,EAAS,MAAEC,GACxBhB,IAASkB,EAAa,MACY,IAA9BA,EAAY,MAAEL,aACdC,EAAUI,IAOtB,SAAgBC,EAAqBC,EAAYC,GAE7C,IAAK,IADDC,KACK/B,EAAI,EAAGmB,EAAMU,EAAW5B,OAAQD,EAAImB,EAAKnB,IAAK,CACnD,IAAIgC,EAAOF,EAAUD,EAAW7B,GAAIA,GAC/Bb,oBAAkB6C,IACnBD,EAAO5B,KAAK6B,GAGpB,OAAOD,EAGX,SAAgBE,EAAcC,GAE1B,IAAK,IADDC,KACKnC,EAAI,EAAGA,EAAIkC,EAAMjC,OAAQD,IAC9BmC,EAAIhC,KAAKiC,YAAeC,EAAoBH,EAAMlC,QAAS,IAE/D,OAAOmC,EAGX,SAAgBG,EAAiBC,GAC7B,GAAIA,EACA,IAEI,GAAIC,SAASC,iBAAiBF,GAAUtC,OACpC,OAAOyC,UAAqBF,SAASG,cAAcJ,GAAUK,UAAUC,QAG/E,MAAOnD,GACH,OAAOgD,UAAqBH,IAMxC,SAAgBO,EAAsBC,EAAMC,GACxC,IAAIC,KACAC,GAAY,QAAS,SAEzBd,SAAWa,EAAUD,MACjB,UAAWC,IACXE,oBAAkBJ,EAAME,EAASC,EAAS,YACnCD,EAASC,EAAS,KAEzB,UAAWD,IACXG,YAAUL,GAAOE,EAASC,EAAS,YAC5BD,EAASC,EAAS,KAE7BG,aAAWN,EAAME,GAGrB,SAAgBK,EAAOC,EAAQC,EAAOC,EAAQC,GAC1C,IAAIC,EAAQvB,SAAWmB,EAAQC,EAAOC,GAMtC,OALAG,OAAOC,KAAKF,GAAOG,QAAQ,SAAU/C,EAAOgD,GACpCL,IAAuC,IAA5BA,EAAQM,QAAQjD,WACpB4C,EAAM5C,KAGd4C,EAGX,SAAgBM,EAAeC,EAAaC,QAC5B,IAARA,IAAkBA,EAAM,GAC5B,IAAK,IAAInE,EAAI,EAAGmB,EAAM+C,EAAYjE,OAAQD,EAAImB,EAAKnB,IAC3CkE,EAAYlE,GAAGa,SACfqD,EAAYlE,GAAG+D,MAAQ5E,oBAAkB+E,EAAYlE,GAAG+D,OAASI,EAAMD,EAAYlE,GAAG+D,MACtFI,IACAA,EAAMF,EAAeC,EAAYlE,GAAGa,QAASsD,KAG7CD,EAAYlE,GAAG+D,MAAQ5E,oBAAkB+E,EAAYlE,GAAG+D,OAASI,EAAMD,EAAYlE,GAAG+D,MACtFI,KAGR,OAAOA,EAGX,SAAgBC,EAAevD,EAASwD,GACpC,IAAK,IAAIC,EAAI,EAAGnD,EAAMN,EAAQZ,OAAQqE,EAAInD,EAAKmD,IAAK,CAChD,IAAIpF,OAAS,EACa,iBAAf2B,EAAQyD,GACfpF,EAAS,IAAIqF,IAASvF,MAAO6B,EAAQyD,KAE9BzD,EAAQyD,aAAcC,GAU7BrF,EAAS2B,EAAQyD,GATZzD,EAAQyD,GAAGzD,SAIZA,EAAQyD,GAAGzD,QAAUuD,EAAevD,EAAQyD,GAAGzD,SAC/C3B,EAAS,IAAIqF,GAAO1D,EAAQyD,KAJ5BpF,EAAS,IAAIqF,GAAO1D,EAAQyD,IAUpCpF,EAAOsF,WAAarF,oBAAkBD,EAAOsF,YAActF,EAAOuF,iBAAmBvF,EAAOF,OAAS,GAAKE,EAAOsF,WACjHtF,EAAOwF,gBAAkBxF,EAAOwF,iBAAmBxF,EAAOF,MAC1DE,EAAOH,eAAiD,iBAAzBG,EAAOH,cAA6B4F,WAASzF,EAAOH,cAAe6F,QAC5F1F,EAAOH,gBAAkBA,EAC/BG,EAAO2F,MAAQR,GAAalF,oBAAkBD,EAAO2F,OAAS,IAAM3F,EAAO2F,MACvE1F,oBAAkBD,EAAO4F,WACzB5F,EAAO4F,SAAU,GAErBjE,EAAQyD,GAAKpF,EAEjB,OAAO2B,EAGX,SAAgBkE,EAAkBC,EAAOtF,EAAGuF,GACxC,IAGIC,EAHAC,EAAYH,EAAMrC,cAAc,QAChCyC,EAAWJ,EAAMK,cAAcC,wBAC/BC,EAAiB7F,EAAEd,OAAO0G,wBAE9BH,EAAUF,UAAYA,EACtBD,EAAMQ,MAAMC,QAAU,GACtBP,GAAgB/F,oBAAkBO,EAAEgG,SAAWhG,EAAEiG,eAAe,GAAGD,QAC/DhG,EAAEgG,SAAWV,EAAMY,aAAe,GACtCZ,EAAMQ,MAAMK,IAAMN,EAAeM,IAAMT,EAASS,KAC3CX,IAAiBF,EAAMY,aAAe,IAAMZ,EAAMY,aAAe,IAAM,KAC5EZ,EAAMQ,MAAMM,KAWhB,SAA8BC,EAAOrG,EAAG6F,EAAgBO,GACpD,IAAIjB,EAAQkB,EAAMC,YAAc,EAC5BC,EAAIC,EAAYxG,GAAGuG,EACvB,OAAIA,EAAIV,EAAeO,KAAOjB,EACnBU,EAAeO,KAAOA,EAExBP,EAAeY,MAAQF,EAAIpB,EACzBU,EAAeY,MAAQL,EAAe,EAARjB,EAG9BoB,EAAIH,EAAOjB,EArBHuB,CAAqBpB,EAAOtF,EAAG6F,EAAgBH,EAASU,MAAQ,KAC/EZ,GACAF,EAAMrC,cAAc,eAAe6C,MAAMC,QAAU,GACnDT,EAAMrC,cAAc,aAAa6C,MAAMC,QAAU,SAGjDT,EAAMrC,cAAc,eAAe6C,MAAMC,QAAU,OACnDT,EAAMrC,cAAc,aAAa6C,MAAMC,QAAU,IAkBzD,SAAgBpD,EAAoBF,GAChC,OAAIA,aAAekE,gBACR1B,WAAS,aAAcxC,GAGvBA,EAIf,SAAgBmE,EAAaC,EAAMC,EAAUC,GAEzC,IADA,IAAIC,EAASH,EACNG,IACCD,EAAOC,EAAOC,KAAOH,GAAWE,EAAOE,UAAUC,SAASL,KAG9DE,EAASA,EAAOrB,cAEpB,OAAOqB,EAGX,SAAgBI,EAAgBC,EAASC,GAErC,IAAK,IADDjD,GAAS,EACJ/D,EAAI,EAAGmB,EAAM6F,EAAS/G,OAAQD,EAAImB,EAAKnB,IAC5C,GAAIgH,EAAShH,GAAGiH,YAAYF,GAAU,CAClChD,EAAQ/D,EACR,MAGR,OAAO+D,EAGX,SAAgBmD,EAAQnG,EAAOc,GAC3B,IAAK,IAAI7B,EAAI,EAAGmB,EAAMU,EAAW5B,OAAQD,EAAImB,EAAKnB,IAC9C,GAAI6B,EAAW7B,KAAOe,EAClB,OAAOf,EAGf,OAAQ,EAGZ,SAAgBmH,EAAsBtF,GAElC,IAAK,IADDuF,KACKpH,EAAI,EAAGmB,EAAMU,EAAW5B,OAAQD,EAAImB,EAAKnB,IAC1C6B,EAAW7B,GAAGqH,eAAe,cAC7BD,EAAKjH,KAAK0B,EAAW7B,GAAGsH,YAGxBF,EAAKjH,KAAK0B,EAAW7B,IAG7B,OAAOoH,EAGX,SAAgBG,EAAc3I,EAAQ4H,GAElC,IAAK,IADDQ,KAAcQ,MAAMC,KAAK7I,EAAO6D,iBAAiB+D,IAC5CxG,EAAI,EAAGA,EAAIgH,EAAS/G,OAAQD,IACjC0H,SAAOV,EAAShH,IAIxB,SAAgBkG,EAAYxG,GACxB,IAAI0F,KAKJ,OAJAA,EAASa,EAAK9G,oBAAkBO,EAAEiI,SAAWjI,EAAEiG,eAAe,GAAGgC,QAC7DjI,EAAEiI,QACNvC,EAASwC,EAAKzI,oBAAkBO,EAAEgG,SAAWhG,EAAEiG,eAAe,GAAGD,QAC7DhG,EAAEgG,QACCN,EAIX,SAAgByC,EAAOC,GACnB,OAAOA,EAASC,KAGpB,SAAgBC,EAAezB,EAAM0B,GACjC,IAAK,IAAIjI,EAAI,EAAGmB,EAAM8G,EAAShI,OAAQD,EAAImB,EAAKnB,IACxCmB,IAAQ8G,EAAShI,OACjBsG,EAAK2B,YAAYD,EAASjI,IAG1BuG,EAAK2B,YAAYD,EAAS,IAGlC,OAAO1B,EAGX,SAAgB4B,EAAQ5B,EAAMC,EAAUC,GAGpC,IAFA,IAAIC,EAASH,EACT4B,KACGzB,IACCD,EAAOC,EAAOC,KAAOH,EAAWE,EAAOE,UAAUC,SAASL,KAC1D2B,EAAQhI,KAAKuG,GAEjBA,EAASA,EAAOrB,cAEpB,OAAO8C,EAGX,SAAgBC,EAAmBC,EAAMpJ,EAAMC,EAAQoJ,GACnD,GAAa,WAATD,EAAmB,CACnB,IAAIE,EAAOrJ,EAAOsJ,gBAIlB,MAHoB,iBAATD,IACPA,EAAO5D,WAAS4D,EAAM3D,SAEnB2D,EAAOA,EAAKd,KAAKa,EAASrJ,EAAMC,GAAU,GAErD,OAAQA,EAAOF,SAASC,GAAQA,aAAgBwJ,MAASrJ,WAASsJ,WAAWL,EAAKM,eAAe1J,EAAMC,EAAOF,OAAS,KAK3H,SAAgB4J,IACZ,GAAoB,OAAhBC,GACA,OAAOA,GAEX,IAAIC,EAAUtG,SAASuG,cAAc,OACjChI,EAAQ,EAKZ,OAJA+H,EAAQtD,MAAMwD,QAAU,8EACxBxG,SAASyG,KAAKf,YAAYY,GAC1B/H,EAAS+H,EAAQ9C,YAAc8C,EAAQI,YAAe,EACtD1G,SAASyG,KAAKE,YAAYL,GACnBD,GAAc9H,EAKzB,SAAgBqI,EAAarC,GACzB,QAAkBsC,IAAdC,GACA,OAAOA,GAEX,IAAIC,EAAQR,gBAAc,SAAW9D,UAAW,UAAWuE,OAAQ,uBACnED,EAAM3G,UAAY,uCAClBmE,EAAQmB,YAAYqB,GACpB,IAAIE,EAAOF,EAAM5G,cAAc,MAAM2C,wBAGrC,OAFAyB,EAAQoC,YAAYI,GACpBD,GAAYI,KAAKC,KAAKF,EAAKG,QAI/B,SAAgBC,EAAe7K,GAC3B,OAAOA,EAAM8K,MAAM,KAAK7J,OAAS,EAGrC,SAAgB8J,EAAkB/K,GAE9B,YADc,IAAVA,IAAoBA,EAAQ,IACzBA,EAAMgL,QAAQ,MAAO,OAGhC,SAAgBC,EAAkBjL,GAE9B,YADc,IAAVA,IAAoBA,EAAQ,IACzBA,EAAMgL,QAAQ,OAAQ,KAGjC,SAAgBE,EAAWC,EAAK9B,EAAM9B,GAClC,IAAI/E,EAAM8E,EAAaC,EAAM,SACzB6D,GAAY5I,GAAaA,IAAQA,EAAIoF,UAAUC,SAAS,iBAC5D,MAAa,cAATwB,GAAwB+B,IACpBD,EAAIE,YAAcF,EAAIG,eAAiBH,EAAII,eAKjC,QAATlC,IAAkB8B,EAAIE,eAIvBD,IAAaD,EAAII,eAAiBJ,EAAIE,aAAeF,EAAIG,cAOrE,SAAgBE,EAAgBC,GAC5B,IAAIC,EAAMD,EAAK1D,QAAQpE,cAAc,IAAM8H,EAAK1D,QAAQJ,GAAK,eAC7D,MAAkC,UAA3B8D,EAAKE,aAAaC,MACpBH,EAAK1D,QAAQtE,iBAAiB,gBAAsB,QAAKgI,EAAKE,aAAaE,qBAC3EH,GAAMA,EAAI9D,UAAUC,SAAS,kBAGtC,SAAgBiE,EAAKvE,EAAMwE,GAEvBxE,EAAOA,aAAgBkC,MAAQlC,GAAQA,GACvC,IAAK,IAAIvG,EAAI,EAAGA,EAAIuG,EAAKtG,OAAQD,IAC7B+K,EAASxE,EAAKvG,GAAG4G,UAAUoE,IAHlB,UAGgCzE,EAAKvG,GAAG4G,UAAUc,OAHlD,UAOjB,SAAgBuD,EAAaC,EAAgBhM,GACzC,IAAIiM,EAAOD,EAAeE,WAAW,kBACrC,OAAQlM,EAAOmJ,MACX,IAAK,OACDnJ,EAAO+L,aAAaE,EAAKE,mBAAoBhD,KAAM,OAAQiD,SAAUpM,EAAOqM,UAC5ErM,EAAOsM,UAAUL,EAAKM,mBAAoBpD,KAAM,OAAQiD,SAAUpM,EAAOqM,UACzE,MACJ,IAAK,WACDrM,EAAO+L,aAAaE,EAAKE,mBAAoBhD,KAAM,WAAYiD,SAAUpM,EAAOqM,UAChFrM,EAAOsM,UAAUL,EAAKM,mBAAoBpD,KAAM,WAAYiD,SAAUpM,EAAOqM,UAC7E,MACJ,IAAK,SACDrM,EAAO+L,aAAaE,EAAKE,mBAAoBE,OAAQrM,EAAOqM,UAC5DrM,EAAOsM,UAAUL,EAAKM,mBAAoBF,OAAQrM,EAAOqM,WAKrE,SAAgBG,EAAuBC,EAAOX,GAE1C,IAAK,IADDY,KACKC,EAAK,EAAGA,EAAKC,UAAU7L,OAAQ4L,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,IAAK,IAAI7L,EAAI,EAAGmB,EAAMwK,EAAM1L,OAAQD,EAAImB,EAAKnB,IACrCgL,GACApE,YAAU+E,EAAM3L,GAAI4L,EAAKpE,YACzBmE,EAAM3L,GAAG+L,aAAa,gBAAiB,UAGvCnF,YAAU+E,EAAM3L,MAAQ4L,EAAKpE,SAC7BmE,EAAM3L,GAAGgM,gBAAgB,kBAKrC,SAAgBC,EAAqBlK,GAGjC,IAAK,IAFDwG,KACA2D,KACKlM,EAAI,EAAGA,EAAI+B,EAAO9B,OAAQD,IACzB+B,EAAO/B,KAAMuI,IACf2D,EAAI/L,KAAK4B,EAAO/B,GAAGmM,YACnB5D,EAAKxG,EAAO/B,IAAM,GAG1B,OAAOkM,EAGX,SAAgBE,EAAqBxN,EAAQyN,EAAWzM,GACpD,IAAI0M,EAAiBD,EAAUtF,QAAQvB,MAAMC,QAC7C4G,EAAUtF,QAAQvB,MAAMC,QAAU,QAClC,IACI8G,EADAC,EAAWH,EAAUxH,MAEzB,GAAKjF,EAAK6M,UAYL,CACDF,EAASG,oBAAkB9N,EAAQ,OAAQ,UAC3CyN,EAAUtF,QAAQvB,MAAMK,IAAO0G,EAAO1G,IAAMjH,EAAO0G,wBAAwBsE,OAAU,GAAK,KAC1FyC,EAAUtF,QAAQvB,MAAMC,QAAU6G,EAC9BK,EAAYJ,EAAOzG,KAAO0G,EAAY5N,EAAOsK,YAE7CmD,EAAUtF,QAAQvB,MAAMM,KADxB6G,EAAU,EACsBH,EAAWG,GAAY,GAAK,KAG7BA,EAAU,GAAK,SArBjC,CACjBJ,EAASK,iCAA+BhO,EAAQyN,EAAUtF,SAC1DsF,EAAUtF,QAAQvB,MAAMC,QAAU6G,EAClCD,EAAUtF,QAAQvB,MAAMK,IAAO0G,EAAO1G,IAAMjH,EAAO0G,wBAAwBsE,OAAU,EAAI,KACzF,IAAI+C,EAAYJ,EAAOzG,KAAO0G,EAAY5N,EAAOsK,YAE7CmD,EAAUtF,QAAQvB,MAAMM,KADxB6G,EAAU,EACsBH,EAAWG,EAAW,GAAK,KAG5BA,GAAW,EAAI,MAiB1D,SAAgBE,EAAqBjB,EAAMS,GACvCT,EAAK7F,MAAMgB,QAAQvB,MAAMsH,QAAUT,EAAUS,OAAS,GAAGX,WAG7D,SAAgBY,EAAexG,GAC3B,IAAIyG,EAAOzG,EAAK5D,cAAc,YAC9BqK,EAAKpG,UAAUC,SAAS,WAAaD,YAAUoG,GAAO,cAAe,YACjEpG,YAAUoG,GAAO,YAAa,cAGtC,SAAgBC,EAAmBlF,EAAKxB,EAAMtB,GAC1C,IAAIiI,EAAMnE,gBAAc,OAAS9D,UAAWA,IAG5C,OAFAiI,EAAIhF,YAAY3B,GAChB2G,EAAInB,aAAa,MAAOhE,GACjBmF,EAGX,SAAgBC,EAAqB5G,EAAM6G,GACvCC,eAAa9G,IAAQ,UAAW,SAAU,cACtC6G,EACA7G,EAAKK,UAAUoE,IAAI,WAGnBzE,EAAKK,UAAUoE,IAAI,aAU3B,SAAgBsC,EAAmB9L,EAAKX,EAAS5B,GAC7C4B,EAAQiD,QAAQ,SAAUqG,GACtBoD,WAASpD,EAAInL,MAAOwO,GAAerD,EAAKlL,GAAOuC,EAAIiM,kBAEvDjM,EAAImK,MAAM7H,QAAQ,SAAU4J,GACpBA,EAAKC,cACLJ,WAAS,iBAAkB5I,WAAS+I,EAAKxO,OAAOF,MAAOwC,EAAIiM,gBAAiBC,KAYxF,SAAgBF,GAAetO,EAAQD,EAAM2O,EAAQH,GACjD,IAAII,EAAS3O,EAAOwF,gBAChBoJ,EAAQ3O,oBAAkByO,GAAmB7O,EAAcG,EAAOF,MAAOC,GAArC2O,EACxCE,EAAM3O,oBAAkB2O,GAAO,GAAKA,EACpC,IAAIC,EAAQ,IAAIC,QACZC,EAAQR,IAAoBvO,EAAOgP,sBAAsBC,eAAgBjP,EAAOgP,WAAWA,WAAWE,KAAKnO,OAC3Gf,EAAOgP,WAAWA,WAAWE,KAAOlP,EAAOmP,YAO/C,OANIP,EAAIQ,OACJP,EAAMQ,MAAMC,IAAmBxP,MAAO6O,EAAQY,SAAU,QAAS1N,MAAO+M,EAAKY,WAAW,KAGxFX,EAAMQ,MAAMV,EAAQ,KAAMC,GAAK,GAE5B,IAAIK,cAAYF,GAAOU,aAAaZ,GAQ/C,SAAgBa,GAA2BnK,EAAiB5D,GACxD,IAAI3B,EACJ,OAAO2B,EAAQgO,KAAK,SAAU1E,GAE1B,OADAjL,EAASiL,EACFA,EAAI1F,kBAAoBA,KAC7BvF,EAMV,SAAgBsP,GAAiBM,EAAczG,GAC3C,IAAI0G,EACAC,EACAC,EACAC,EAAU9M,YAAeC,EAAoByM,IAC7CK,EAAU/M,YAAeC,EAAoByM,IACjD,GAA2B,OAAvBA,EAAa/N,MAEb,OADAgO,EAAgB,IAAIK,YAAUF,EAAQlQ,MAAOkQ,EAAQT,SAAUS,EAAQnO,OAAO,GAGlF,IAAIA,EAAQ,IAAIsO,KAAKP,EAAa/N,OAClC,GAA8B,UAA1B+N,EAAaL,UAAkD,aAA1BK,EAAaL,SAAyB,CAC9D,aAATpG,GACA2G,EAAW,IAAIK,KAAKtO,EAAMuO,WAAWvO,EAAMwO,aAAe,IAC1DN,EAAW,IAAII,KAAKtO,EAAMuO,WAAWvO,EAAMwO,aAAe,IAC1DT,EAAa/N,MAAQ,IAAIsO,KAAKtO,EAAMuO,WAAWL,EAASM,aAAe,MAGvEP,EAAW,IAAIK,KAAKtO,EAAMyO,SAAS,GAAK,GACxCP,EAAW,IAAII,KAAKtO,EAAMyO,SAAS,MAEvCN,EAAQnO,MAAQiO,EAChBG,EAAQpO,MAAQkO,EACc,UAA1BH,EAAaL,UACbS,EAAQT,SAAW,cACnBU,EAAQV,SAAW,YAEY,aAA1BK,EAAaL,WAClBS,EAAQT,SAAW,kBACnBU,EAAQV,SAAW,sBAEvB,IAAIgB,EAAc,IAAIL,YAAUF,EAAQlQ,MAAOkQ,EAAQT,SAAUS,EAAQnO,OAAO,GAC5E2O,EAAe,IAAIN,YAAUD,EAAQnQ,MAAOmQ,EAAQV,SAAUU,EAAQpO,OAAO,GACjFgO,EAA0C,UAA1BD,EAAaL,SAAuBgB,EAAYE,IAAID,GAAgBD,EAAYG,GAAGF,OAElG,CAC8B,iBAAnBR,EAAa,QACrBA,EAAQnO,MAAQ,IAAIsO,KAAKH,EAAQnO,QAGrCgO,EADiB,IAAIK,YAAUF,EAAQlQ,MAAOkQ,EAAQT,SAAUS,EAAQnO,OAAO,GASnF,OANI+N,EAAae,cACbf,EAAae,eAAgBC,YAAaf,IAAiB,GAG3DD,EAAagB,YAAcf,EAExBA,EAKX,SAAgBgB,GAAcC,EAAKC,GAE/B,IAAK,IADDC,EAAOF,EAAIG,WAAU,GAChBnQ,EAAI,EAAGA,EAAIiQ,EAASjQ,IACzBkQ,EAAK/G,YAAY+G,EAAKjI,SAAS,IAE1BjI,EAAIiQ,EAAb,IAAK,IAAiB9O,EAAM6O,EAAII,kBAAmBpQ,EAAImB,EAAKnB,IACxDgQ,EAAI7G,YAAY6G,EAAI/H,SAAS+H,EAAII,kBAAoB,IAEzD,OAAOF,EAKX,SAAgBG,GAAgBzQ,GAC5B,OAAOA,EAAK0Q,sBAAwB1Q,EAAKgB,cAAcC,QAAQZ,OAAS,GAAKL,EAAK2Q,kBAKtF,SAAgBlR,GAAUL,EAAOwR,GAE7B,QADc,IAAVxR,IAAoBA,EAAQ,IAC5BA,EAAO,CAGP,IAAK,IAFD+B,EAAQyP,EACRC,EAASzR,EAAM8K,MAAM,KAChB9J,EAAI,EAAGA,EAAIyQ,EAAOxQ,SAAWd,oBAAkB4B,GAAQf,IAC5De,EAAQA,EAAM0P,EAAOzQ,IAEzB,OAAOe,GAMf,SAAgB2P,GAAoBnF,EAAQoF,GACxC,IAAIC,EAAO,IAAIC,uBAcf,MAVgB,SAAZF,EACkC,mBAC9BC,EAAKE,gBAAiBzI,KAAMkD,EAAW,KAAIA,EAAW,KAAI,OAAQA,OAAQA,EAAgB,SAAK,GAC/FqF,EAAKE,gBAAiBzI,KAAM,OAAQiD,SAAUC,IAAU,GAG1B,mBAC9BqF,EAAKE,gBAAiBzI,KAAMkD,EAAW,KAAIA,EAAW,KAAI,WAAYA,OAAQA,EAAgB,SAAK,GACnGqF,EAAKE,gBAAiBzI,KAAM,WAAYiD,SAAUC,IAAU,GAOxE,SAAgBwF,GAAiBC,EAAMC,GAGnC,IAAK,IADD9O,KACK0J,EAAK,EAAGqF,EAFNF,EAAKG,gBAEgBtF,EAAKqF,EAAOjR,OAAQ4L,IAAM,CACtD,IAAIrK,EAAM0P,EAAOrF,GACjB,GAAIrK,EAAIpB,WAAaoB,EAAI4P,YAAa,CAClC,IAAIrN,EAAQiN,EAAKK,aAAkC,aAAnBL,EAAKM,UAA2B9P,EAAIuC,MAC/DiN,EAAKO,aAAaC,YAAcR,EAAKO,aAAaE,SAAYT,EAAKO,aAAaE,SAAWjQ,EAAIuC,MACpG5B,EAAI4B,MACJ5B,EAAI4B,GAAO3D,UAAW,EACtB+B,EAAI4B,GAAO2N,UAAYC,GAAkBnQ,EAAIoQ,UAAWX,GACxD9O,EAAI4B,GAAO2N,UAAU3D,MAAQiD,EAAKY,UAAU7D,OAGpD,OAAO5L,EAKX,SAAgBwP,GAAkBX,EAAMC,QACT,IAAvBA,IAAiCA,EAAqB,YAC1D,IAAIY,KACJ,IAAKb,EACD,OAAOa,EAEX,IAAK,IAAIhG,EAAK,EAAGiG,EAAKC,GAAMC,cAAenG,EAAKiG,EAAG7R,OAAQ4L,IAAM,CAC7D,IAAIiC,EAAMgE,EAAGjG,GAETgG,EAAe/D,GADP,YAARA,EACsB3G,EAAsB6J,EAAKlD,IAEpC,gBAARA,EACoC,gBAAnBkD,EAAKM,UAGLjP,EAAoB2O,EAAKlD,IAMvD,OAHIkD,EAAKY,WAAoC,SAAvBX,IAClBY,EAAeI,aAAelB,GAAiBC,EAAMC,IAElDY,EAKX,SAAgBK,GAAgB3O,EAAQC,EAAOC,EAAQ0O,GACnD,IAAIjG,EAAM3I,MACNpC,EAAM2K,UAAU7L,OAChBkS,IACAhR,GAAY,GA6BhB,IAAK,IA3BDiR,EAAU,SAAUpS,GACpB,IAAKqS,EAAYrS,GACb,MAAO,WAEX,IAAIsS,EAAOD,EAAYrS,IACZ4D,OAAOC,KAAKD,OAAO2O,eAAeD,IAAOrS,OAChD2D,OAAOC,KAAKyO,GAAME,OA6B9B,SAA4BrQ,GACxB,IAAI0B,KACJ,KAAOD,OAAO2O,eAAepQ,IAAQyB,OAAOC,KAAKD,OAAO2O,eAAepQ,IAAMlC,QACzE4D,EAAOA,EAAK2O,OAAO5O,OAAOC,KAAKD,OAAO2O,eAAepQ,KACrDA,EAAMyB,OAAO2O,eAAepQ,GAEhC,OAAO0B,EAnC0B4O,CAAmBH,IAAS1O,OAAOC,KAAKyO,IAChExO,QAAQ,SAAUgK,GACnB,IAEI4E,EAFAC,EAASzG,EAAI4B,GACb8E,EAAMN,EAAKxE,GAEXqE,IAASU,WAASD,IAAQnK,MAAMqK,QAAQF,IACpCC,WAASD,IACTF,EAAMC,MACNzG,EAAI4B,GAAO1L,YAAesQ,EAAKE,EAAKT,KAGpCO,EAAMC,MACNzG,EAAI4B,GAAO1L,YAAesQ,EAAKE,EAAKT,IAIxCjG,EAAI4B,GAAO8E,KAInBP,EAAcvG,UACT9L,EAAI,EAAGA,EAAImB,EAAKnB,IACrBoS,EAAQpS,GAEZ,OAAOkM,EAgBX,SAAgB6G,GAAmB7T,GAE/B,IAAK,IADD8T,EAAM,EACDhT,EAAI,EAAGA,EAAId,EAAOe,OAAQD,IAAK,CACpC,IAAIiT,EAAQC,GAAWhU,EAAOc,GAAI,GAC9BgT,EAAMC,IACND,EAAMC,GAGd,OAAOD,EAAM,EAKjB,SAAgBE,GAAW/I,EAAKpG,GAC5B,IAAIiP,EAAMjP,EACNoP,KACJ,GAAIhJ,EAAItJ,QAAS,CACbkD,IACA,IAAK,IAAI/D,EAAI,EAAGA,EAAImK,EAAItJ,QAAQZ,OAAQD,IACpCmT,EAAQnT,GAAKkT,GAAW/I,EAAItJ,QAAQb,GAAI+D,GAE5C,IAAK,IAAItC,EAAI,EAAGA,EAAI0R,EAAQlT,OAAQwB,IAC5BuR,EAAMG,EAAQ1R,KACduR,EAAMG,EAAQ1R,IAGtBsC,EAAQiP,EAEZ,OAAOjP,EAKX,SAAgBqP,GAAuBpC,EAAMqC,GACzC,IAAK,IAAIrT,EAAI,EAAGA,EAAIqT,EAAapT,OAAQD,IACrCqT,EAAarT,GAAG+H,IAAMsL,EAAarT,GAAG2N,aAClCiB,GAA2ByE,EAAarT,GAAGhB,MAAOgS,EAAKsC,wBAAwBvL,IAC7EiJ,EAAKuC,iBAAiBF,EAAarT,GAAGhB,OAAO+I,ICn0B3D,SAASyL,GAAsB5U,EAAQ6U,EAAW1S,EAAO2G,GACjDA,GAAU9I,EACVA,EAAOoN,gBAAgByH,GAGvB7U,GACAA,EAAOmN,aAAa0H,EAAW1S,GCgFvC,SAAgB2S,GAAgBhL,EAAYiL,GACxCjL,EAAW5E,QAAQ,SAAUtC,GACzBA,EAAIX,QAAQiD,QAAQ,SAAU5E,GAC1ByU,EAASzU,EAAQsC,OClF7B,SACSoS,GAAsBhI,EAAMhB,EAAMiJ,GACvC,IAAIC,EAAoB,WAATlJ,EACXW,EAASmF,GAAoB9E,EAAK1M,OAAOqM,OAAQK,EAAK1M,OAAOmJ,MAC7DtH,EAAQ1B,GAAUuM,EAAK1M,OAAOF,MAAO4M,EAAKmI,SAE9C,OADAhT,EAAQA,EAAQ,IAAIsO,KAAKtO,GAAS,MAE9BiT,eAAgBF,EAAW,QAAU,SACrC/S,MAAOA,EACPwK,OAAQA,EACR0I,YAAaH,EACT,GAAKlI,EAAK1M,OAAOsF,WAAYiI,UAAWoH,EAC5CK,QAAShK,EAAW0B,EAAK1M,OAAQ0M,EAAKuI,YAAavI,EAAK7E,UC9ChE,IJ6YIuC,GI7YA8K,GAAgC,WAChC,SAASA,EAAeC,GACpBC,KAAK1D,KAAO,IAAIC,uBACX1R,oBAAkBkV,KACnBC,KAAK1D,KAAK2D,QAAUF,GAuC5B,OApCAD,EAAetV,UAAUuM,kBAAoB,SAAUE,GACnD,OAAIA,EAAOlD,KACAiM,KAAK1D,KAAK4D,cAAcjJ,GAGxB+I,KAAK1D,KAAK6D,gBAAgBlJ,IAGzC6I,EAAetV,UAAU2M,kBAAoB,SAAUF,GACnD,OAAIA,EAAOlD,KACAiM,KAAK1D,KAAK8D,cAAcnJ,GAGxB+I,KAAK1D,KAAK+D,gBAAgBpJ,IAGzC6I,EAAetV,UAAU8V,SAAW,SAAU7T,EAAOwK,EAAQlD,GACzD,MAAc,SAATA,GAA4B,aAATA,GAAgC,WAATA,GAAwBlJ,oBAAkBoM,GAI9ExK,EAHAwK,EAAOxK,IAMtBqT,EAAetV,UAAU+V,OAAS,SAAU9T,EAAOwK,GAC/C,IAAIxJ,EAAShB,EAIb,OAHK5B,oBAAkBoM,IAAYpM,oBAAkB4B,KACjDgB,EAASwJ,EAAOxK,IAEbgB,GAEXqS,EAAetV,UAAUgW,WAAa,SAAUT,GACvClV,oBAAkBkV,IACnBS,aAAWT,IAGZD,KCjDPW,GAA0C,SAAUC,EAAYpW,EAAQkP,EAAKmH,GAC7E,IAA2HC,EAAvH5Q,EAAIwH,UAAU7L,OAAQkV,EAAI7Q,EAAI,EAAI1F,EAAkB,OAATqW,EAAgBA,EAAOrR,OAAOwR,yBAAyBxW,EAAQkP,GAAOmH,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASN,EAAYpW,EAAQkP,EAAKmH,QACpH,IAAK,IAAIjV,EAAIgV,EAAW/U,OAAS,EAAGD,GAAK,EAAGA,KAASkV,EAAIF,EAAWhV,MAAImV,GAAK7Q,EAAI,EAAI4Q,EAAEC,GAAK7Q,EAAI,EAAI4Q,EAAEtW,EAAQkP,EAAKqH,GAAKD,EAAEtW,EAAQkP,KAASqH,GAChJ,OAAO7Q,EAAI,GAAK6Q,GAAKvR,OAAO2R,eAAe3W,EAAQkP,EAAKqH,GAAIA,GAS5D5Q,GAAwB,WACxB,SAASA,EAAOiR,GACZ,IAAIC,EAAQnB,KAMZA,KAAKoB,cAAe,EAMpBpB,KAAKqB,eAAgB,EAMrBrB,KAAKsB,gBAAiB,EAMtBtB,KAAKuB,eAAgB,EAMrBvB,KAAKwB,iBAAkB,EAMvBxB,KAAKyB,gBAAiB,EAKtBzB,KAAK0B,qBAAsB,EAM3B1B,KAAK/J,cAAe,EAapB+J,KAAK2B,UAML3B,KAAK4B,qBAAsB,EAK3B5B,KAAK6B,QAML7B,KAAK8B,gBAAiB,EAOtB9B,KAAK+B,SAAU,EACf/B,KAAKgC,cAAgB,aAErBhC,KAAKiC,gBAAkB,WAAc,OAAOd,EAAMe,gBAElDlC,KAAKmC,kBAAoB,WAAc,OAAOhB,EAAMiB,kBACpDC,QAAMrC,KAAMkB,GACZlB,KAAKjM,KAAqB,SAAdiM,KAAKjM,KAAkB,KAAQiM,KAAKjM,KAAOiM,KAAKjM,KAAKM,cAAgB2L,KAAKjM,KAClFiM,KAAKsC,WACLtC,KAAKsC,SAAWtC,KAAKsC,SAASjO,eAElC2L,KAAKvM,IAAMF,EAAO,eAClB,IAAIgP,EAAiB,IAAIzC,GA0DzB,GAzDIoB,EAAQjK,SAAWiK,EAAQjK,OAAOD,UAAYkK,EAAQjK,OAAOA,UAC7D+I,KAAKrJ,aAAa4L,EAAexL,kBAAkBmK,EAAQjK,SAC3D+I,KAAK9I,UAAUqL,EAAepL,kBAAkB+J,EAAQjK,UAE5D+I,KAAKwC,OAAS,WAKV,IAAK,IAJD3M,KACA4M,GAAQ,SAAU,aAAc,aAAc,WAAY,iBAAkB,OAC5E,eAAgB,iBAAkB,oBAClClT,EAAOD,OAAOC,KAAK4R,GACdzV,EAAI,EAAGA,EAAI6D,EAAK5D,OAAQD,IAC7B,GAAgB,YAAZ6D,EAAK7D,GAAkB,CACvBmK,EAAItG,EAAK7D,OACT,IAAK,IAAIyB,EAAI,EAAGA,EAAIgU,EAAM5R,EAAK7D,IAAIC,OAAQwB,IACvC0I,EAAItG,EAAK7D,IAAIG,KAAKsV,EAAM5R,EAAK7D,IAAIyB,GAAGqV,eAGnCC,EAAK/S,QAAQH,EAAK7D,IAAM,IAC7BmK,EAAItG,EAAK7D,IAAMyV,EAAM5R,EAAK7D,KAGlC,OAAOmK,GAENmK,KAAKtV,QACNsV,KAAKsB,gBAAiB,EACtBtB,KAAKuB,eAAgB,EACrBvB,KAAKoB,cAAe,EAChBpB,KAAKzT,UACLyT,KAAKqB,cAAgBrB,KAAKzT,QAAQgO,KAAK,SAAU1E,GAC7C,OAAOA,EAAIwL,kBAInBrB,KAAK0C,WAAa1C,KAAK2C,YACvB3C,KAAK2C,UAAY,UAEjB3C,KAAK/R,UAAY+R,KAAK4C,oBACtB5C,KAAK6C,WAAa7U,EAAiBgS,KAAK/R,UAAY+R,KAAK4C,mBAEzD5C,KAAK8C,iBACL9C,KAAK+C,iBAAmB/U,EAAiBgS,KAAK8C,kBAE7CjY,oBAAkBmV,KAAK2B,SAAW3B,KAAK2B,OAAOqB,eAC/ChD,KAAKiD,eAAiBjV,EAAiBgS,KAAK2B,OAAOqB,eAEnDhD,KAAKkD,eACLlD,KAAKkC,eAAiBlU,EAAiBgS,KAAKkD,eAE5ClD,KAAKmD,iBACLnD,KAAKoC,iBAAmBpU,EAAiBgS,KAAKmD,iBAE9CnD,KAAKoD,oBAAsBvY,oBAAkBmV,KAAKsC,WAA+B,iBAAlBtC,KAAKsC,YACpEtC,KAAKsC,SAAW,eAChBtC,KAAK6B,KAAKwB,OAASrU,UACf4K,WAAYoG,KAAKpG,WACjBH,MAAO,IAAIC,QAAS4J,QAAU7W,MAAOuT,KAAK5P,iBAAmB4P,KAAKtV,MAAO6Y,KAAMvD,KAAK7P,kBACrF6P,KAAK6B,KAAKwB,SAEbrD,KAAKwD,aAAc,CACnB,IAAIC,EAAMzD,KAAKwD,aACfxD,KAAKwD,aAAe,SAAkB7R,EAAG2B,EAAGoQ,EAAMC,GAI9C,GAHmB,iBAARF,IACPA,EAAM1Y,GAAU0Y,EAAKnT,SAEE,eAAvB0P,KAAKgC,cAAgC,CACrC,IAAI4B,EAAIjS,EACRA,EAAI2B,EACJA,EAAIsQ,EACJ,IAAI/V,EAAM6V,EACVA,EAAOC,EACPA,EAAO9V,EAEX,OAAO4V,EAAI9R,EAAG2B,EAAGoQ,EAAMC,KAG1B3D,KAAKwD,cAAgBxD,KAAKoD,oBAC3BpD,KAAKwD,aAAe,SAAU7R,EAAG2B,GAG7B,OAFA3B,EAAI5G,GAAUoW,EAAMhR,gBAAiB+I,GAAeiI,KAAWxP,GAAG,IAClE2B,EAAIvI,GAAUoW,EAAMhR,gBAAiB+I,GAAeiI,KAAW7N,GAAG,IACnC,eAAxB6N,EAAMa,cAAiClX,WAAS+Y,aAAalS,EAAG2B,GAAKxI,WAASgZ,YAAYnS,EAAG2B,KA2DhH,OAtDArD,EAAOzF,UAAUuZ,iBAAmB,WAChC,OAAO/D,KAAKgC,eAGhB/R,EAAOzF,UAAUwZ,iBAAmB,SAAUC,GAC1CjE,KAAKgC,cAAgBiC,GAGzBhU,EAAOzF,UAAU+Q,cAAgB,SAAU3Q,GAGvC,IAAK,IADD2E,EAAOD,OAAOC,KAAK3E,GACdc,EAAI,EAAGA,EAAI6D,EAAK5D,OAAQD,IAC7BsU,KAAKzQ,EAAK7D,IAAMd,EAAO2E,EAAK7D,KAOpCuE,EAAOzF,UAAU4Y,gBAAkB,WAC/B,SAAUpD,KAAKpG,aAAcoG,KAAK7P,kBAGtCF,EAAOzF,UAAU0Z,aAAe,WAC5B,OAAOlE,KAAKmE,UAGhBlU,EAAOzF,UAAUmM,aAAe,SAAUlK,GACtCuT,KAAKmE,SAAW1X,GAGpBwD,EAAOzF,UAAU4Z,UAAY,WACzB,OAAOpE,KAAKqE,UAGhBpU,EAAOzF,UAAU0M,UAAY,SAAUzK,GACnCuT,KAAKqE,SAAW5X,GAGpBwD,EAAOzF,UAAU8Z,kBAAoB,WACjC,OAAOtE,KAAK6C,YAGhB5S,EAAOzF,UAAU+Z,kBAAoB,WACjC,OAAOvE,KAAK+C,kBAGhB9S,EAAOzF,UAAUga,sBAAwB,WACrC,OAAOxE,KAAKiD,gBAGhBhT,EAAOzF,UAAUia,aAAe,WAC5B,OAAOzE,KAAK0E,kBAAoB,cAAgB,aAE7CzU,KAMP0U,GAAoC,WACpC,SAASA,KAWT,OATAlE,IACImE,cACDD,EAAmBna,UAAW,aAAS,GAC1CiW,IACImE,cACDD,EAAmBna,UAAW,YAAQ,GACzCiW,IACImE,cACDD,EAAmBna,UAAW,oBAAgB,GAC1Cma,KCpQAE,GAAe,eAEfC,GAAgB,gBAEhBC,GAAiB,iBAEjBC,GAAc,cAEdC,GAAiB,iBAEjBC,GAAgB,gBAEhBC,GAAY,YAEZC,GAAe,eAEfC,GAAc,cAEdC,GAAiB,iBAEjBC,GAAgB,gBAEhBC,GAAgB,gBAEhBC,GAAe,eAEfC,GAAkB,kBAElBC,GAAiB,iBAEjBC,GAAkB,kBAElBC,GAAa,aAEbC,GAAa,aAEbC,GAAqB,qBAErBC,GAAe,eAEfC,GAAU,UAEVC,GAAU,UAEVC,GAAc,cAEdC,GAAgB,gBAEhBC,GAAkB,kBAIlBC,GAAW,WAEXC,GAAc,cAEdC,GAAc,cAEdC,GAAiB,iBAEjBC,GAAoB,oBAEpBC,GAAkB,kBAgBlBC,GAAoB,oBAIpBC,GAAkB,kBAElBC,GAA0B,0BAM1BC,GAAa,aAEbC,GAAiB,iBAMjBC,GAAsB,sBAEtBC,GAAkB,kBAElBC,GAAmB,mBAEnBC,GAAoB,oBAOpBC,GAAc,eAEdC,GAAa,cAEbC,GAAY,aAEZC,GAAe,gBAEfC,GAAW,YAEXC,GAAU,WAEVC,GAAsB,wBAEtBC,GAAe,gBAEfC,GAAkB,mBAElBC,GAAkB,mBAIlBC,GAAe,kBAIfC,GAAe,mBAIfC,GAAiB,qBAIjBC,GAAiB,qBAIjBC,GAAkB,mBAQlBC,GAAgB,oBAIhBC,GAAkB,sBAElBC,GAAkB,mBAElBC,GAAwB,0BAExBC,GAAuB,yBAEvBC,GAAoB,qBAIpBC,GAAuB,cAQvBC,GAAwB,eAExBC,GAAoB,oBAEpBC,GAAc,cAEdC,GAAa,cAEbC,GAAQ,QAERC,GAAU,UAEVC,GAA0B,yBAE1BC,GAAS,SAETC,GAAqB,uBAErBC,GAAwB,0BAIxBC,GAAY,aAEZC,GAAc,eAEdC,GAAiB,mBAEjBC,GAAa,cAEbC,GAAqB,sBAErBC,GAAkB,mBAElBC,GAAsB,wBAEtBC,GAAW,WAEXC,GAAiB,kBAEjBC,GAAW,YAEXC,GAAU,WAEVC,GAAiB,kBAEjBC,GAAa,cAUbC,GAAe,gBAIfC,GAAiB,kBAEjBC,GAAe,gBAEfC,GAAgB,iBAEhBC,GAAa,cAEbC,GAAkB,oBAElBC,GAAc,eAEdC,GAAY,aAEZC,GAAoB,oBAEpBC,GAAsB,sBAEtBC,GAAqB,qBAErBC,GAA2B,2BAE3BC,GAAwB,wBAExBC,GAAkB,kBAElBC,GAAoB,oBAEpBC,GAAmB,mBAEnBC,GAAyB,yBAIzBC,GAAmB,mBAEnBC,GAAe,eAIfC,GAAkB,kBAElBC,GAAkB,kBAElBC,GAAiB,iBAEjBC,GAAa,aAEbC,GAAsB,sBAEtBC,GAAkB,oBAElBC,GAAuB,uBAEvBC,GAAoB,oBAEpBC,GAAgB,gBAEhBC,GAAgB,gBAEhB3S,GAAiB,iBAEjB4S,GAAkB,kBAElBC,GAAoB,oBAEpBC,GAAa,cAEbC,GAAmB,mBAEnBC,GAAe,eAEfC,GAAkB,kBAElBC,GAAc,cAEdC,GAAc,eAEdC,GAAkB,kBAElBC,GAAiB,iBAEjBC,GAAkB,kBAElBC,GAAgB,iBAEhBC,GAAqB,sBAErBC,GAAqB,uBAErBC,GAAsB,sBAEtBC,GAAY,iBAIZC,GAAoB,sBAEpBC,GAAwB,yBAExBC,GAAiB,kBAEjBC,GAAyB,yBAEzBC,GAAmB,qBP7U1B1P,GAAuB,WAKvB,SAASA,EAAMrL,EAAQgb,GACnBpN,KAAKqN,cAAe,EACpBrN,KAAKsN,QAAU,IAAIC,WACnBvN,KAAK5N,OAASA,EACV4N,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOqb,GAAGC,GAAqB1N,KAAK2N,iBAAkB3N,MAC3DA,KAAK5N,OAAOwb,iBAAiBC,GAAoB7N,KAAKgF,YAAY8I,KAAK9N,OACvEA,KAAK5N,OAAOqb,GAAGM,GAAgB/N,KAAK0H,QAAQoG,KAAK9N,OACjDA,KAAK5N,OAAOqb,GAAGO,GAAuBhO,KAAKwM,eAAgBxM,MAC3DA,KAAKoN,aAAeA,GAwLxB,OAtLA3P,EAAMjT,UAAUmjB,eAAiB,WAC7B,IAAIxM,EAAQnB,KACZ,OAAIA,KAAKiO,eAAqD,SAAnCjO,KAAK5N,OAAOuK,oBAAkCqD,KAAK5N,OAAOkL,UAG9E,WACH6D,EAAMmM,QAAQY,QAAQC,KAAK,WACvBhN,EAAMqG,iBAENrG,EAAM8M,eACN9M,EAAMqL,kBAPHxM,KAAKwH,cAWpB/J,EAAMjT,UAAUgiB,eAAiB,WAC7BxM,KAAKoO,eAAepO,KAAK5N,QACzB,IAAIic,EAAe/d,OAAO+d,aACtBA,IAAiBA,EAAa5b,QAAQpE,cAAc,oBACpDggB,EAAaC,YAAYhB,QAAQiB,WASzC9Q,EAAMjT,UAAUgkB,MAAQ,WACpBxO,KAAKyO,kBACLzO,KAAK0O,UAAYpe,OAAOqe,KAAK,GAAI,QAAS,UAAYre,OAAOse,YAAc,UAAYte,OAAOue,WAAa,cAC3G7O,KAAK0O,UAAUI,OAAO,EAAG,GACzB9O,KAAK0O,UAAUK,SAASC,OAAOC,WAAYD,OAAOE,cAEtDzR,EAAMjT,UAAUkd,QAAU,WAClB1H,KAAKiO,eACLjO,KAAKwH,gBAGb/J,EAAMjT,UAAUwa,YAAc,WACtBhF,KAAKiO,gBACLjO,KAAKqN,cAAe,IAG5B5P,EAAMjT,UAAUikB,gBAAkB,WAC9B,IAAI/R,EAAOsD,KAAK5N,OACZK,EAAUgC,gBAAc,OACxBpC,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,SAAU1B,UAAW+L,EAAKjK,QAAQ9B,UAAY,kBAE/EzC,SAASyG,KAAKf,YAAYnB,GAC1B,IAAI0c,EAAY,IAAIC,GAAK/R,GAAkBX,EAAMA,EAAKC,qBACtDwS,EAAU1V,MAAQiD,EAAK2S,WAAWC,QAClChf,OAAO+d,aAAec,EACtBA,EAAUI,YAAa,EACvB,IAAIC,EAAUL,EAAUM,qBACpBC,EAAiBhT,EAAK+S,qBACrBD,GAAWA,EAAQ7jB,SAAW+jB,EAAe/jB,QAC9CwjB,EAAUQ,mBAAmBD,GAEjChT,EAAKkT,OAAOC,IAAwBpd,QAASA,EAASqd,UAAWX,IACjEnP,KAAK5N,OAAO2d,IAAI,kBAAmB/P,KAAKgQ,iBACxCb,EAAUc,SAASxd,GACnB0c,EAAUe,mBAAqBlQ,KAAK5N,OAAO8d,mBAC3Cf,EAAUgB,QAAUzT,EAAKyT,SAE7B1S,EAAMjT,UAAUgd,aAAe,WAC3B,GAAIxH,KAAKiO,cAAe,CACpB,IAAIvR,EAAOsD,KAAK5N,OAChB,GAAI4N,KAAKqN,aAEL,YADArN,KAAKmP,YAGT,IAAI7X,GACAuI,YAAa,QACbpN,QAASiK,EAAKjK,QACd2d,aAAc1T,EAAK2T,kBAAkBliB,iBAAiB,4BACtDmiB,QAAQ,EACR3T,mBAAoBD,EAAKC,oBAK7B,GAHKqD,KAAKqN,cACN3Q,EAAKyT,QAAQI,GAAoBjZ,GAEjCA,EAAKgZ,OAEL,YADAE,SAAO9T,EAAKjK,SAGXuN,KAAKqN,cACNrN,KAAKmP,cAIjB1R,EAAMjT,UAAU2kB,UAAY,WACxB,IAAIzS,EAAOsD,KAAK5N,OAEhB,GAAoB,SAAhBsK,EAAKpH,OAAmB,CACxB,IAAImb,EAAWzQ,KAAKoN,aAAasD,mBAC7BC,EAAajU,EAAKjK,QAAQpE,cAAc,cACxCuiB,EAAYlU,EAAKjK,QAAQpE,cAAc,iBAC3CsiB,EAAWzf,MAAMoE,OAAS,OAC1Bqb,EAAWzf,MAAM2f,UAAY,OAC7BD,EAAU1f,MAAMuf,EAASK,SAAW,GACpCF,EAAUG,kBAAkB7f,MAAMuf,EAASO,QAAU,GAGrDtU,EAAK6E,gBACA7E,EAAKpQ,cAAcC,QAAQZ,OAI5BqU,KAAKoO,eAAe1R,GAHpBA,EAAKjK,QAAQpE,cAAc,oBAAoB6C,MAAMC,QAAU,QAOvE,IAAK,IAAIoG,EAAK,EAAGiG,KAAQtK,MAAMC,KAAKuJ,EAAKjK,QAAQtE,iBAAiB,eAAgBoJ,EAAKiG,EAAG7R,OAAQ4L,IAAM,EAChG9E,EAAU+K,EAAGjG,IACTrG,MAAM+f,UAAY,SAI9B,IAAK,IADDC,EAAaxU,EAAKjK,QAAQtE,iBAAiB,gBACtCgjB,EAAK,EAAGC,KAAQle,MAAMC,KAAK+d,GAAaC,EAAKC,EAAGzlB,OAAQwlB,IAAM,CACnE,IAAI1e,EAAU2e,EAAGD,GACjB7e,YAAUG,GAAU,gBAAiB,gBAEzCuN,KAAKqR,iBAAiB3U,GACtBA,EAAK6S,YAAa,SACXjf,OAAO+d,aACd,IAAI/W,GACA7E,QAASiK,EAAKjK,SAElBiK,EAAKyT,QAAQmB,GAAsBha,GACnC0I,KAAK5N,OAAO2d,IAAI,qBAAsB/P,KAAKgQ,kBAE/CvS,EAAMjT,UAAU6mB,iBAAmB,SAAU3U,GACzCpK,YAAUoK,EAAKjK,SAAU,wBAAyB,iBAC9CiK,EAAK6S,YACLiB,SAAO9T,EAAKjK,SAEhBuN,KAAK0O,UAAY6C,QAAY7U,EAAKjK,QAASuN,KAAK0O,YAEpDjR,EAAMjT,UAAU4jB,eAAiB,SAAU1R,GACvC,IAAIiC,EAAQjC,EAAKpQ,cAAcC,QAAQZ,OACnC8G,EAAUiK,EAAKjK,QACfJ,EAAK,IAAMqK,EAAKjK,QAAQJ,GAC5B,GAAKsM,EAAL,CAKA,IAAK,IAFD6S,EAAe/e,EAAQtE,iBAAiBkE,EAAK,8BAC7Cof,EAAUD,EAAa7S,EAAQ,GAAG+S,aAAa,WAC1ChmB,EAAI,EAAGA,EAAI8lB,EAAa7lB,OAAQD,IACrC8lB,EAAa9lB,GAAG+L,aAAa,UAAWga,GAGvC,IADDE,EAAYlf,EAAQtE,iBAAiB,WAAakE,EAAK,YAC3D,IAAS3G,EAAI,EAAGA,EAAIimB,EAAUhmB,OAAQD,IAClC,IAAK,IAAIyB,EAAI,EAAGA,EAAIwR,EAAOxR,IACvBwkB,EAAUjmB,GAAGkmB,WAAWzkB,GAAG+D,MAAMC,QAAU,SAIvDsM,EAAMjT,UAAUyjB,YAAc,WAC1B,OAAOjO,KAAK5N,OAAOK,QAAQJ,GAAG3C,QAAQ,UAAY,GAAKsQ,KAAK5N,OAAOmd,YAOvE9R,EAAMjT,UAAUwe,QAAU,WAClBhJ,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOyf,IAAInE,GAAqB1N,KAAKwH,aAAasG,KAAK9N,OAC5DA,KAAK5N,OAAO0f,oBAAoBjE,GAAoB7N,KAAKgF,YAAY8I,KAAK9N,OAC1EA,KAAK5N,OAAOyf,IAAI9D,GAAgB/N,KAAK0H,QAAQoG,KAAK9N,OAClDA,KAAK5N,OAAOyf,IAAI7D,GAAuBhO,KAAKwM,kBAMhD/O,EAAMjT,UAAUwlB,cAAgB,WAC5B,MAAO,SAEXvS,EAAMC,eAjNE,aAAc,gBAAiB,iBAAkB,oBAAqB,kBAAmB,eAC7F,gBAAiB,YAAa,UAAW,kBAAmB,aAAc,iBAAkB,eAC5F,6BAA8B,iBAAkB,YAChD,gBAAiB,SAAU,SAAU,eAAgB,YAAa,QAAS,cAAe,YAC1F,YAAa,cAAe,eAAgB,mBAAoB,cAAe,qBAAsB,kBA6M9DQ,QAAQqS,GAAoBe,KAChE7T,KCvJPtR,GAAQ,EAuRRsH,GAAM,EAyCNc,GAAc,MO/XlB,SAAWwd,GAEPA,EAASA,EAAe,KAAI,GAAK,OAEjCA,EAASA,EAAiB,OAAI,GAAK,SAEnCA,EAASA,EAAkB,QAAI,GAAK,UAEpCA,EAASA,EAAuB,aAAI,GAAK,eAEzCA,EAASA,EAAyB,eAAI,GAAK,iBAE3CA,EAASA,EAAiB,OAAI,GAAK,SAEnCA,EAASA,EAAiB,OAAI,GAAK,SAEnCA,EAASA,EAAuB,aAAI,GAAK,eAEzCA,EAASA,EAA4B,kBAAI,GAAK,oBAE9CA,EAASA,EAAiB,OAAI,GAAK,SAEnCA,EAASA,EAAuB,aAAI,IAAM,eAE1CA,EAASA,EAAwB,cAAI,IAAM,gBAE3CA,EAASA,EAAuB,aAAI,IAAM,eAE1CA,EAASA,EAAuB,aAAI,IAAM,eAE1CA,EAASA,EAAwB,cAAI,IAAM,gBAE3CA,EAASA,EAA6B,mBAAI,IAAM,qBAEhDA,EAASA,EAAsB,YAAI,IAAM,cAEzCA,EAASA,EAAuB,aAAI,IAAM,eApC9C,CAqCGA,aAAaA,gBAMhB,SAAWC,GAEPA,EAAWA,EAAmB,OAAI,GAAK,SAEvCA,EAAWA,EAAoB,QAAI,GAAK,UAExCA,EAAWA,EAAoB,QAAI,GAAK,UAN5C,CAOGA,eAAeA,kBAMlB,SAAWC,GACPA,EAAYA,EAAiB,IAAI,GAAK,MACtCA,EAAYA,EAAkB,KAAI,GAAK,OACvCA,EAAYA,EAAoB,OAAI,GAAK,SACzCA,EAAYA,EAAoB,OAAI,GAAK,SACzCA,EAAYA,EAAoB,OAAI,GAAK,SACzCA,EAAYA,EAAmB,MAAI,GAAK,QACxCA,EAAYA,EAAoB,OAAI,GAAK,SACzCA,EAAYA,EAA2B,cAAI,GAAK,gBAChDA,EAAYA,EAAuB,UAAI,GAAK,YAC5CA,EAAYA,EAAyB,YAAI,GAAK,cAC9CA,EAAYA,EAAuB,UAAI,IAAM,YAC7CA,EAAYA,EAAwB,WAAI,IAAM,aAZlD,CAaGA,gBAAgBA,mBCzDnB,IAAIC,GAAgC,WAKhC,SAASA,EAAe9f,EAAQ+f,EAAgBvb,GAC5CoJ,KAAKoS,qBACLpS,KAAKqS,gBAAkB,IAAI3Y,QAC3BsG,KAAKsS,aAAc,EACnBtS,KAAKuS,UACLvS,KAAKwS,aAAc,EACnBxS,KAAK5N,OAASA,EACd4N,KAAK3N,GAAK2N,KAAK5N,OAAOK,QAAQJ,GAC9B2N,KAAKpJ,eAAiBA,EACtBoJ,KAAKmS,eAAiBA,EACtBnS,KAAKuC,eAAiB,IAAIzC,GAAeE,KAAK5N,OAAOqgB,QACrDzS,KAAK0S,SAAWC,iBAAe3S,KAAK5N,OAAOqC,eAAe,GAASqE,SAAS,EAAM8Z,MAAO,MACzF5S,KAAK6S,UAAYF,iBAAe3S,KAAK5N,OAAOqC,eAAe,GAASqE,SAAS,EAAO8Z,MAAO,MAC3F5S,KAAK0S,SAASI,aAAa9S,KAAK5N,OAAOqC,cAAc,SACjD9D,UAAW,eAAgBoiB,OAAShf,KAAM,cAC1CiM,KAAK0S,SAASM,YAClBhT,KAAK6S,UAAUC,aAAa9S,KAAK5N,OAAOqC,cAAc,SAClD9D,UAAW,eAAgBoiB,OAAShf,KAAQ,cAC5CiM,KAAK6S,UAAUG,YACnBhT,KAAK6S,UAAUxkB,cAAc,YAAYiE,UAAUoE,IAAI,aACnDsJ,KAAK5N,OAAO+F,WACZrJ,YAAUkR,KAAK0S,SAAU1S,KAAK6S,YAAa,UAozBnD,OA5yBAX,EAAe1nB,UAAUwe,QAAU,WAC/BhJ,KAAKiT,eAETf,EAAe1nB,UAAU0oB,WAAa,WAClCC,eAAazc,IAAIsJ,KAAK5J,IAAK,QAAS4J,KAAKoT,aAAcpT,MACvDA,KAAKqT,cAAgBC,WAAStT,KAAKuT,eAAgB,KACnDJ,eAAazc,IAAIsJ,KAAK5J,IAAI/H,cAAc,kBAAmB,QAAS2R,KAAKqT,cAAerT,OAE5FkS,EAAe1nB,UAAUgpB,aAAe,WACpCL,eAAa/f,OAAO4M,KAAK5J,IAAK,QAAS4J,KAAKoT,cAC5C,IAAInhB,EAAO+N,KAAK5J,IAAI/H,cAAc,kBAC9B4D,GACAkhB,eAAa/f,OAAOnB,EAAM,QAAS+N,KAAKqT,gBAGhDnB,EAAe1nB,UAAUipB,iBAAmB,SAAUnc,EAAMoc,EAAOC,GAC/D,IAAIxS,EAAQnB,KACR4T,KACAC,KACApa,EAAQuG,KAAKqS,gBAAgB/C,QACjCtP,KAAKkB,QAAQtW,OAAOgP,WAChBka,aAAara,EAAMQ,MAAM0Z,IAAaxF,KAAK,SAAU/iB,GACrD+V,EAAMD,QAAQtW,OAAOmP,WAAa3O,EAAEqC,OACpC0T,EAAM/O,OAAOwd,OAAOmE,IAAwBvmB,UAAWomB,EAAYhpB,OAAQuW,EAAMD,QAAQtW,SACzF0M,EAAKkE,YAAcoY,EAAWpmB,UAAUwmB,WACxCJ,EAAWpmB,UAAUwmB,WAAWxkB,QAAQ,SAAUykB,GAC9CJ,EAAiBhoB,MACbnB,MAAOupB,EAAMvpB,MACb8C,UAAW,KACX4M,UAAW6Z,EAAMC,WACjBC,aAAcF,EAAME,aACpBha,SAAU8Z,EAAM9Z,SAChB1N,MAAOwnB,EAAMxnB,MACbsH,KAAMoN,EAAMD,QAAQnN,SAG5BuD,EAAKuc,iBAAmBA,EAAiBloB,OAASkoB,EAC9CH,EAAM/R,OAAO,SAAU9L,GAAO,OAAOA,EAAInL,MAAQyW,EAAMD,QAAQxW,QACnEyW,EAAMD,QAAQkT,QAAQ9c,MAG9B4a,EAAe1nB,UAAU6pB,cAAgB,SAAU/c,EAAM7K,GACrD,IAAI0N,EAAW6F,KAAK5N,OAAOkiB,gBAAgBC,WACT,WAA7BvU,KAAKkB,QAAQtW,OAAOmJ,KAAoB,WAAa,QAAYiM,KAAKkB,QAAQtW,OAAOmJ,KAAO,aAAe,WAC5GygB,EAAkB,IAAI1Z,YAAUkF,KAAKkB,QAAQtW,OAAOuF,gBAAiBgK,EAAU1N,GAAO,EAAMuT,KAAK5N,OAAO+f,eAAegC,cAC3HnU,KAAKyT,iBAAiBnc,GAAOA,EAAKuc,kBAAmBW,IAEzDtC,EAAe1nB,UAAUiqB,eAAiB,SAAUrpB,GACnCA,EAAEd,OACJgI,UAAUC,SAAS,mBAC1ByN,KAAK0U,OAAOjoB,MAAQ,GACpBuT,KAAK2U,oBACL3U,KAAK4U,mBACL5U,KAAK0U,OAAOG,UAGpB3C,EAAe1nB,UAAU+oB,eAAiB,SAAUnoB,GAChD4U,KAAK2U,oBACL3U,KAAK4U,oBAET1C,EAAe1nB,UAAUoqB,iBAAmB,WACpC5U,KAAK0U,OAAOjoB,MAAMd,OAClB2G,YAAU0N,KAAK8U,OAAQ,qBAAsB,kBAG7CxiB,YAAU0N,KAAK8U,OAAQ,kBAAmB,sBAQlD5C,EAAe1nB,UAAUuqB,kBAAoB,SAAUvb,GACnD,OAAOwG,KAAKgV,UAAUC,YAAYzb,IAEtC0Y,EAAe1nB,UAAU0qB,iBAAmB,WACxC,IAAItb,EAAaoG,KAAKkB,QAAQtH,WAE9B,KAAMA,aAAsBC,eACxB,IAAK,IAAInO,EAAI,EAAGA,EAAIkO,EAAWjO,OAAQD,IACnC,GAHE,iBAGSkO,EAAoB,CAC3B,IAAI/L,KACJA,EAAImS,KAAKkB,QAAQxW,OAASkP,EAAWlO,GACrCkO,EAAWlO,GAAKmC,IAKhCqkB,EAAe1nB,UAAU2qB,YAAc,SAAUjU,GAC7ClB,KAAKkB,QAAUA,EACflB,KAAKoS,kBAAoBlR,EAAQkU,oBACjCpV,KAAKkB,QAAQtH,WAAasH,EAAQtH,WAClCoG,KAAKkV,mBACLlV,KAAK5N,OAAO2d,IAAI,uBAAyBnlB,OAAQsW,EAAQtW,SACzDoV,KAAKkB,QAAQnN,KAAOmN,EAAQnN,KAC5BiM,KAAKkB,QAAQjK,OAASiK,EAAQjK,QAAU,GACxC+I,KAAKkB,QAAQmU,gBAAkBnU,EAAQmU,iBAAmBrV,KAAK5N,OAAO+f,eAAe5lB,QACrFyT,KAAKkB,QAAQoU,cAAgBpU,EAAQoU,eAAiBtV,KAAK5N,OAAOmjB,aAAahpB,QAC/EyT,KAAKkB,QAAQzH,MAAQyH,EAAQzH,OAAS,IAAIC,QAC1CsG,KAAKkB,QAAQsU,mBAAqBtU,EAAQsU,qBAAsB,EAChExV,KAAKkB,QAAQzN,IAAMyN,EAAQtW,OAAO6I,IAClCuM,KAAKuS,UACLvS,KAAKgV,UAAY9T,EAAQ8T,UACzBhV,KAAKyV,WAAavU,EAAQmU,gBAAgB1pB,QAE9CumB,EAAe1nB,UAAUkrB,iBAAmB,SAAUxU,GAMlD,GALAlB,KAAK5J,IAAM4J,KAAK5N,OAAOqC,cAAc,OACjCpC,GAAI2N,KAAK3N,GAAK2N,KAAKkB,QAAQnN,KAAO,YAClCpD,UAAW,oCAEfqP,KAAK2V,KAAO3V,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,uBACrDuQ,EAAQ0U,cAAe,CACxB5V,KAAK0U,OAAS1U,KAAK5N,OAAOqC,cAAc,SACpCpC,GAAI2N,KAAK3N,GAAK,aACd1B,UAAW,kBAEfqP,KAAK8U,MAAQ9U,KAAK5N,OAAOqC,cAAc,QACnC9D,UAAW,yDAA0DoiB,OACjEhf,KAAM,OAAQ8hB,MAAO7V,KAAK+U,kBAAkB,aAGpD/U,KAAK8V,UAAY9V,KAAK5N,OAAOqC,cAAc,QAAU9D,UAAW,yBAChEqP,KAAK8V,UAAUliB,YAAYoM,KAAK0U,QAChC1U,KAAK2V,KAAK/hB,YAAYoM,KAAK8V,WAC3B,IAAIC,GACAtjB,QAASuN,KAAK0U,OAAQhV,eAAgB,QAAS1M,YAC3C2M,YAAaK,KAAK+U,kBAAkB,YAG5CiB,QAAMC,YAAYF,EAAW/V,KAAK5N,OAAOqC,eACzCuL,KAAK8V,UAAUznB,cAAc,kBAAkBuF,YAAYoM,KAAK8U,OASpE,OAPA9U,KAAKkW,QAAUlW,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,cAC7DqP,KAAKmW,KAAOnW,KAAK5N,OAAOqC,cAAc,OAClCpC,GAAI2N,KAAK3N,GAAK2N,KAAKkB,QAAQnN,KAAO,gBAClCpD,UAAW,4BAEfqP,KAAKkW,QAAQtiB,YAAYoM,KAAKmW,MAC9BnW,KAAK2V,KAAK/hB,YAAYoM,KAAKkW,SACpBlW,KAAK2V,MAEhBzD,EAAe1nB,UAAU4rB,WAAa,SAAUlV,GAC5C,IAAI5J,GACAuI,YAAawW,GACbC,WAAYtW,KAAKkB,QAAQxW,MAAO6rB,WAAYvW,KAAKkB,QAAQnN,KAAMuc,QAAQ,GAE3E,IAAKkG,cAAcxW,KAAK5N,OAAOqkB,cAAe,CAE1Cnf,EAAgB,YAAI0I,KAGxB,GADAA,KAAK5N,OAAO+d,QAAQtC,GAAoBvW,IACpCA,EAAKgZ,OAAT,CAGAtQ,KAAKjI,UAAY,IAAI2e,UACjBlmB,SAAS,EAAOmmB,QAAS3W,KAAK2V,KAC9BiB,MAAO5W,KAAKiT,YAAYnF,KAAK9N,MAC7BzP,OAAS1F,oBAAkBmH,EAAakP,EAAQ5W,OAAQ,cACjD0V,KAAK5N,OAAOK,QAAQH,UAAUC,SAAS,YAAc,IAAM,IAClEjI,OAAQ0V,KAAK5N,OAAOK,QAASokB,mBAAqBC,OAAQ,QAC1DC,UACQhO,MAAO/I,KAAKgX,SAASlJ,KAAK9N,MAC1BiX,aACIN,QAAS3W,KAAK+U,kBAAkB/U,KAAKkX,QAAU,WAAa,gBAC5DC,SAAU,YAAaC,WAAW,KAItCrO,MAAO/I,KAAKgX,SAASlJ,KAAK9N,MAC1BiX,aAAeE,SAAU,SAAUR,QAAS3W,KAAK+U,kBAAkB/U,KAAKkX,QAAU,eAAiB,kBAE3GG,QAASrX,KAAKsX,cAAcxJ,KAAK9N,MACjC2O,KAAM3O,KAAKuX,WAAWzJ,KAAK9N,QAG/BA,KAAKjI,UAA0B,kBAAI,EACnCiI,KAAKjI,UAAUkY,SAASjQ,KAAK5J,KAC7B4J,KAAKjI,UAAUtF,QAAQvB,MAAMsmB,UAAY,QACzCxX,KAAKjI,UAAU0f,OACfzX,KAAKkT,aACLwE,iBAAgBptB,OAAQ0V,KAAKkW,SAAWlW,KAAK5N,OAAOqC,eACpDkjB,cAAY3X,KAAKkW,SACjBlW,KAAK4X,eAET1F,EAAe1nB,UAAU8sB,cAAgB,SAAUlsB,GAC1CysB,UAAQC,SAIT9X,KAAKjI,UAAUjH,UAAainB,EAAG,SAAUC,EAAG,UAH5ClgB,EAAqBkI,KAAKkB,QAAQ5W,OAAQ0V,KAAKjI,UAAWiI,KAAK5N,QAKnE4N,KAAK5N,OAAOwd,OAAOqI,GAA4B7sB,IAEnD8mB,EAAe1nB,UAAU0tB,WAAa,SAAUhX,GAC5ClB,KAAKmV,YAAYjU,GACjBlB,KAAK0V,iBAAiBxU,GACtBlB,KAAKoW,WAAWlV,IAEpBgR,EAAe1nB,UAAUyoB,YAAc,WACnC,GAAIjT,KAAKjI,YAAciI,KAAKjI,UAAUyV,YAAa,CACvBxN,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAU9L,GAAO,OAAOA,EAAI2O,0BAC9D7Y,QAClBqU,KAAK5N,OAAOgmB,iBAAiB,uBAEjCpY,KAAK5N,OAAOwd,OAAOyI,IAA0B3tB,MAAOsV,KAAKkB,QAAQxW,QACjEsV,KAAKjI,UAAUiR,UACfhJ,KAAKwT,eACLpgB,SAAO4M,KAAK5J,KACZ4J,KAAK5J,IAAM,OAGnB8b,EAAe1nB,UAAU8tB,YAAc,WAC/BpiB,EAAgB8J,KAAK5N,QACrB4N,KAAK5N,OAAOwd,OAAO2I,IAAuBC,SAAUxY,KAAMoU,QAASpU,KAAKsY,cAG5EtY,KAAKkB,QAAQkT,SAAU3d,OAAQ,eAAgB/L,MAAOsV,KAAKkB,QAAQxW,SAEvEwnB,EAAe1nB,UAAUwsB,SAAW,SAAU5rB,GAC1C,GAAI4U,KAAKsS,YAAa,CAClB,GAAuC,UAAnClnB,EAAEd,OAAOmuB,QAAQpkB,cAA2B,CAC5C,IAAI5H,EAAQrB,EAAEd,OAAOmC,MACY,YAA7BuT,KAAKkB,QAAQtW,OAAOmJ,YACNgB,IAAVtI,IACqF,IAArFuT,KAAK+U,kBAAkB,cAAc1gB,cAAc3E,QAAQjD,EAAM4H,eACjE5H,EAAQ,YAEOsI,IAAVtI,IACiF,IAAtFuT,KAAK+U,kBAAkB,eAAe1gB,cAAc3E,QAAQjD,EAAM4H,iBAClE5H,EAAQ,UAGhB,IAAI6K,GACAb,OAAQ,YAAaod,kBACjBnpB,MAAOsV,KAAKkB,QAAQxW,MACpByP,SAAU6F,KAAK5N,OAAOkiB,gBAAgBC,WACJ,WAA7BvU,KAAKkB,QAAQtW,OAAOmJ,KAAoB,WAAa,QACxB,SAA7BiM,KAAKkB,QAAQtW,OAAOmJ,MAAgD,aAA7BiM,KAAKkB,QAAQtW,OAAOmJ,MAC3B,YAA7BiM,KAAKkB,QAAQtW,OAAOmJ,KAAqB,QAAU,WAC3DtH,MAAOA,EAAO2N,WAAW,EAAOrG,KAAMiM,KAAKkB,QAAQtW,OAAOmJ,MAE9DrJ,MAAOsV,KAAKkB,QAAQxW,OAExB+B,EAAQuT,KAAKkB,QAAQtW,OAAOwY,kBAAoBpD,KAAKqU,cAAc/c,EAAM7K,GACrEuT,KAAKkB,QAAQkT,QAAQ9c,GAAQ0I,KAAKiT,kBAErC,CACD,IAAI1P,EAAOnY,EAAEd,OAAO0oB,WAAW0F,YAAYrkB,cACvC2L,KAAK+U,kBAAkB/U,KAAKkX,QAAU,WAAa,gBAAgB7iB,gBAAkBkP,EACrFvD,KAAK2Y,iBAEA3Y,KAAK+U,kBAAkB,eAAe1gB,gBAAkBkP,GAC7DvD,KAAKsY,cAGbtY,KAAKiT,kBAEqC,UAAnC7nB,EAAEd,OAAOmuB,QAAQpkB,gBACxB2L,KAAKsY,cACLtY,KAAKiT,gBAGbf,EAAe1nB,UAAUmuB,eAAiB,WACtC,IAAI7f,KAAa5F,MAAMC,KAAK6M,KAAKmW,KAAKhoB,iBAAiB,+BACnDyqB,EAAO,QACPC,EAAc7Y,KAAK8V,UAAUznB,cAAc,kBAC3CyqB,EAAU9Y,KAAKmS,eAAe4G,sBAC9BC,GACAtuB,MAAOsV,KAAKkB,QAAQxW,MAAO8C,UAAW,KAAMiG,IAAKuM,KAAKkB,QAAQzN,IAC9D0G,SAAUye,EAAM7kB,KAAMiM,KAAKkB,QAAQnN,KAAMqG,UAAW0e,EAAS3E,aAAcnU,KAAK5N,OAAO+f,eAAegC,cAEtG8E,EAAajZ,KAAKkZ,WAAapgB,EAAQnN,QAAUqU,KAAKkZ,SAAWpgB,EAAQnN,OAASmN,EAAQnN,OAC1FstB,GAAoC,KAAtBJ,EAAYpsB,QAC1BmsB,EAAO,WACP9f,KAAa5F,MAAMC,KAAK6M,KAAKmW,KAAKhoB,iBAAiB,iCACnD6qB,EAASxrB,UAAY,MACrBwrB,EAAS7e,SAAW,YAExB,IAAI1N,EACA0sB,EACArmB,KACJ,GAAIgG,EAAQnN,SAAWqU,KAAKkZ,UAAaL,EAAYpsB,OAA+B,KAAtBosB,EAAYpsB,MAAe,CACrF,IAAK,IAAIf,EAAI,EAAGA,EAAIoN,EAAQnN,OAAQD,IAyBhC,GAxBAe,EAAQuT,KAAKuS,OAAOvgB,EAAa8G,EAAQpN,GAAI,YAAYgmB,aAAa,QACtEyH,EAAOnqB,aAAavC,MAAOA,GAASusB,GAChCvsB,IAAUA,EAAMoL,WAAWlM,SAC3BwtB,EAAKhf,SAAW8e,EAAa,WAAa,SAEhC,KAAVxsB,GAAgB5B,oBAAkB4B,IACR,WAAtBuT,KAAKkB,QAAQnN,MACbjB,EAAKjH,MACDnB,MAAOsuB,EAAStuB,MAAOypB,aAAc6E,EAAS7E,aAAc/Z,UAAW4e,EAAS5e,UAChFD,SAAU6e,EAAS7e,SAAU3M,UAAWwrB,EAASxrB,UAAWf,MAAO,KAG3EqG,EAAKjH,MACDnB,MAAOsuB,EAAStuB,MAChB0P,UAAW4e,EAAS5e,UAAWD,SAAU6e,EAAS7e,SAAU3M,UAAWwrB,EAASxrB,UAAWf,MAAO,OAEtGqG,EAAKjH,MACDnB,MAAOsuB,EAAStuB,MAAO0P,UAAW4e,EAAS5e,UAAWD,SAAU6e,EAAS7e,SACzE3M,UAAWwrB,EAASxrB,UAAWf,WAAOsI,KAI1CjC,EAAKjH,KAAKstB,GAEVjjB,EAAgB8J,KAAK5N,QAKrB,YAJA4N,KAAK5N,OAAOwd,OAAO2I,IACfC,SAAUxY,KAAMoU,QAASpU,KAAK2Y,eAAgBS,KAAMD,EAAKzuB,MAAO2uB,KAAMF,EAAK3rB,UAAW8rB,KAAMH,EAAKhf,SACjGof,KAAMJ,EAAK/e,UAAWof,KAAML,EAAKhF,aAAcsF,KAAMN,EAAK1sB,QAKtEuT,KAAK0Z,eAAe5mB,QAGpBkN,KAAKsY,eAGbpG,EAAe1nB,UAAUkvB,eAAiB,SAAUhG,GAChD,IACIlmB,EADAmsB,EAAWjG,EAAM,GAErB,IAAK7oB,oBAAkB8uB,GAAW,CAC9BnsB,EAAYmsB,EAASne,YAAcme,EAASne,YACxC,IAAIV,YAAU6e,EAASjvB,MAAOivB,EAASxf,SAAUwf,EAASltB,OAAQktB,EAASvf,UAAWuf,EAASxF,cACnG,IAAK,IAAIhnB,EAAI,EAAGA,EAAIumB,EAAM/nB,OAAQwB,IAC9BK,OAAqCuH,IAAzB2e,EAAMvmB,GAAGqO,YACjBhO,EAAUkmB,EAAMvmB,GAAGK,WAAWkmB,EAAMvmB,GAAGqO,aACvChO,EAAUkmB,EAAMvmB,GAAGK,WAAWkmB,EAAMvmB,GAAGzC,MAAOgpB,EAAMvmB,GAAGgN,SAAUuZ,EAAMvmB,GAAGV,OAAQinB,EAAMvmB,GAAGiN,UAAWsZ,EAAMvmB,GAAGgnB,cAEvH,IAAI7c,GACAb,OAAQ,YAAaod,iBAAkBH,EAAOhpB,MAAOsV,KAAKkB,QAAQxW,MAClE8Q,YAAaV,YAAUQ,GAAG9N,IAE9BwS,KAAKkB,QAAQkT,QAAQ9c,KAG7B4a,EAAe1nB,UAAUmqB,kBAAoB,WACzC,IAAIxT,EAAQnB,KACR9T,EAAM8T,KAAK0U,OAAOjoB,MAClB7B,EAASoV,KAAKkB,QAAQtW,OACtB6O,EAAQ7O,EAAOwY,kBAAoBpD,KAAKqS,gBAAgB/C,QAAUtP,KAAKkB,QAAQzH,MAAM6V,QACrFsK,EAAe5Z,KAAKkB,QAAQzH,MAAM6V,QACtC7V,EAAMogB,WACND,EAAaC,WACb,IAAIC,EAAgC,WAAtB9Z,KAAKkB,QAAQnN,MAAqBgmB,WAAW7tB,GAAQ6tB,WAAW7tB,GAAOA,EACjFiO,EAAW6F,KAAK5N,OAAOkiB,gBAAgBC,WAChB,WAAtBvU,KAAKkB,QAAQnN,KAAoB,WAAa,QAAYiM,KAAKkB,QAAQnN,KAAO,aAAe,WAE9FogB,EAAenU,KAAK5N,OAAO+f,eAAegC,aAC1CzpB,EAAQE,EAAOwY,kBAAoBxY,EAAOuF,gBAAkBvF,EAAOF,MACvEovB,EAAqB,KAAXA,QAA4B/kB,IAAX+kB,OAAwB/kB,EAAY+kB,EAC/D,IAAIE,EACsB,YAAtBha,KAAKkB,QAAQnN,YACEgB,IAAX+kB,IACsF,IAAtF9Z,KAAK+U,kBAAkB,cAAc1gB,cAAc3E,QAAQoqB,EAAOzlB,eAClEylB,EAAS,YAEO/kB,IAAX+kB,IACkF,IAAvF9Z,KAAK+U,kBAAkB,eAAe1gB,cAAc3E,QAAQoqB,EAAOzlB,iBACnEylB,EAAS,SAEb3f,EAAW,SAEf6F,KAAKia,YAAYxgB,GACjB,IAAInC,GACAuI,YAAaqa,GACbC,YAAana,KAAMsW,WAAY5rB,EAAOE,OAAQA,EAC9CuP,SAAUA,EAAUC,WApBR,EAoB8B+Z,aAAcA,EAAciG,kBAAmB,KACzF3gB,MAAOA,GAIX,GAFAuG,KAAK5N,OAAO+d,QAAQtC,GAAoBvW,GACxC0iB,EAAW,IAAIlf,YAAUpQ,EAAO4M,EAAK6C,SAAU2f,EAAQxiB,EAAK8C,UAAW9C,EAAK6c,cAClD,SAAtBnU,KAAKkB,QAAQnN,MAAyC,aAAtBiM,KAAKkB,QAAQnN,KAAqB,CAGlE,GAFA+lB,EAAS9Z,KAAKuC,eAAejC,SAASpU,EAAK8T,KAAKkB,QAAQmD,SAAUrE,KAAKkB,QAAQnN,MAC/EoG,EAAW,QACPtP,oBAAkBivB,IAAW5tB,EAAIP,OACjC,OAMJquB,EAAW9f,IAHPxP,MAAOA,EAAOyP,SAAUA,EAAU1N,MAAOqtB,EAAQ1f,WAhCzC,EAiCR+Z,aAAcA,GAEqBnU,KAAKkB,QAAQnN,MAEpD7H,EAAIP,QACJ8N,EAAMQ,MAAM+f,GAEhB1iB,EAAK8iB,kBAAqBvvB,oBAAkByM,EAAK8iB,mBAA8C,IAAzB9iB,EAAK8iB,kBAC3E,IAAIxG,KACJ+D,cAAY3X,KAAKkW,SACjBlW,KAAKwS,aAAc,EACf5nB,EAAOwY,mBAAqBlX,EAAIP,OAEhCf,EAAOgP,WAAWka,aAAara,GAAO0U,KAAK,SAAU/iB,GACjD,IAAI2O,EAAaoH,EAAMD,QAAQtW,OAAOmP,WACtCoH,EAAMD,QAAQtW,OAAOmP,WAAa3O,EAAEqC,OACpC0T,EAAM/O,OAAOwd,OAAOmE,IAAwBvmB,UAAWomB,EAAYhpB,OAAQA,IACvEgpB,EAAWpmB,UAAUwmB,WAAWroB,OAChCiuB,EAAa3f,MAAM2Z,EAAWpmB,WAG9B2T,EAAMqR,aAAc,EAExBrR,EAAMD,QAAQtW,OAAOmP,WAAaA,EAClC6f,EAAaS,KAAK/iB,EAAK8iB,mBACvBjZ,EAAMmZ,OAAOhjB,EAAMsiB,MAIvBngB,EAAM4gB,KAAK/iB,EAAK8iB,mBAChBpa,KAAKsa,OAAOhjB,EAAMmC,KAG1ByY,EAAe1nB,UAAU8vB,OAAS,SAAUhjB,EAAMmC,GAC1CuG,KAAK5N,OAAOwH,YAAc,WAAYoG,KAAK5N,OAAOwH,WAClDoG,KAAKua,YAAYjjB,EAAMmC,GAGvBuG,KAAKwa,cAAc/gB,IAG3ByY,EAAe1nB,UAAUiwB,qBAAuB,SAAUluB,GAKtD,IAAK,IAJDynB,EAAa9B,EAAewI,aAAanuB,GACzCouB,KACA/G,KACAgH,EAAgB5a,KAAK5N,OAAO4M,uBACvBzH,EAAK,EAAGiG,EAAKlO,OAAOC,KAAKykB,GAAazc,EAAKiG,EAAG7R,OAAQ4L,IAAM,CACjE,IAAIsjB,EAAOrd,EAAGjG,GACV1B,OAAM,EACNmK,KAAK5N,OAAO6M,iBAAiB4b,GAAMzX,oBACnCvN,EAAMyE,GAA2BugB,EAAMD,IAEvC/kB,GACAmK,KAAK5N,OAAOwd,OAAOmE,IAAwBvmB,UAAWomB,EAAYhpB,OAAQiL,IACtE+d,EAAWpmB,UAAUwmB,WAAWroB,QAChCgvB,EAAc9uB,KAAKiP,YAAUQ,GAAGsY,EAAWpmB,UAAUwmB,cAIzD2G,EAAc9uB,KAAKmoB,EAAW6G,IAGtC,OAAOF,EAAchvB,QAAUmP,YAAUO,IAAIsf,IAEjDzI,EAAe1nB,UAAUotB,WAAa,WAClC,IAAIne,EAAQuG,KAAK5N,OAAOid,WAAWC,QACnC7V,EAAMqhB,gBACN9a,KAAKia,YAAYxgB,GACjB,IAAInC,GACAuI,YAAakb,GAA4BthB,MAAOA,EAAO2gB,kBAAmB,MAE9E,IAAK5D,cAAcxW,KAAK5N,OAAOqkB,cAAe,CAE1Cnf,EAAgB,YAAI0I,KAExBA,KAAK5N,OAAO+d,QAAQtC,GAAoBvW,GACxCA,EAAK8iB,kBAAqBvvB,oBAAkByM,EAAK8iB,mBAA8C,IAAzB9iB,EAAK8iB,kBAC3E3gB,EAAM4gB,KAAK/iB,EAAK8iB,mBACZpa,KAAK5N,OAAOwH,YAAc,WAAYoG,KAAK5N,OAAOwH,WAClDoG,KAAKua,YAAYjjB,EAAMmC,GAGvBuG,KAAKgb,qBAAqBvhB,GAAO,IAGzCyY,EAAe1nB,UAAUyvB,YAAc,SAAUxgB,GAC7C,IAAIwhB,EAAiBnwB,WAASowB,SAASlb,KAAK5N,OAAO+f,eAAe5lB,QAAS,SAK3E,OAJI0uB,EAAevrB,QAAQsQ,KAAKkB,QAAQtW,OAAOF,SAAW,IACtDuwB,EAAiBA,EAAe/c,OAAO8B,KAAKkB,QAAQtW,OAAOF,QAE/D+O,EAAMyhB,SAASD,GACRxhB,GAEXyY,EAAe1nB,UAAU+vB,YAAc,SAAUjjB,EAAMmC,GACnD,IAAI0H,EAAQnB,KACFA,KAAKmb,aAAa7jB,EAAMmC,GAC9ByU,QAAQC,KAAK,SAAU/iB,GACvB+V,EAAMia,YAAYhwB,MAG1B8mB,EAAe1nB,UAAU2wB,aAAe,SAAU7jB,EAAMmC,GACpD,IAAI4hB,EACJA,EAAQrb,KAAKsb,sBAAsB7hB,GACnC,IAAI8hB,EAAM,IAAIhO,WAId,OAHA8N,EAAMzhB,WAAa2hB,EAAIhN,QACvB8M,EAAM5kB,OAASa,EACf0I,KAAK5N,OAAO+d,QAAQqL,GAAwBH,GACrCE,GAGXrJ,EAAe1nB,UAAU8wB,sBAAwB,SAAU7hB,GACvD,IAAIgiB,EAAS,IAAIC,aACbC,EAAK,IAAI9hB,eAAc+hB,IAAK,GAAIC,QAAS,IAAIH,eAC7CL,EAAQI,EAAOK,aAAaH,EAAIliB,GAEpC,OADWsiB,KAAKC,MAAMX,EAAM1wB,OAIhCunB,EAAe1nB,UAAUwwB,qBAAuB,SAAUvhB,EAAOwiB,GAC7D,IAAI9a,EAAQnB,KACZA,KAAKkB,QAAQtH,WAAaoG,KAAKkB,QAAQtH,sBAAsBC,cACzDmG,KAAKkB,QAAQtH,WAAa,IAAIC,cAAYmG,KAAKkB,QAAQtH,YAC3D,IAAIsiB,KACAC,KACAnc,KAAKkB,QAAQtW,OAAOwY,mBAAqB6Y,IACzCC,EAAWrwB,KAAKmU,KAAKkB,QAAQtW,OAAOgP,WAAWka,aAAa9T,KAAKqS,kBACjE8J,EAAStwB,KAAK,SAAUlB,GAAQ,OAAOwW,EAAMhI,eAAiBxO,KAElEuxB,EAAWrwB,KAAKmU,KAAKkB,QAAQtH,WAAWka,aAAara,IACrD0iB,EAAStwB,KAAKmU,KAAKob,YAAYtN,KAAK9N,OACpC,IAAItU,EAAI,EACR0wB,QAAQC,IAAIH,GAAY/N,KAAK,SAAU/iB,GACnCA,EAAEoE,QAAQ,SAAU7E,GAChBwxB,EAASzwB,KAAKf,EAAK8C,aAI/BykB,EAAe1nB,UAAU4wB,YAAc,SAAUhwB,GAC7C4U,KAAKsc,SAAWlxB,EAChB,IAAIqO,EAAQ,IAAIC,QAChB,GAAIsG,KAAK5N,OAAOmqB,eAAe/iB,IAAI7N,OAAQ,CACvC,IAAI6wB,EAAYxc,KAAK5N,OAAOmqB,eACxBjZ,EAASkZ,EAAUlZ,OAAO3X,OAAS6wB,EAAUlZ,OAAStD,KAAK5N,OAAO+lB,aAAasE,IAAI,SAAUC,GAAK,OAAOA,EAAEhyB,QAC/G+O,EAAM6gB,OAAOkC,EAAUhjB,IAAK8J,EAAQkZ,EAAUriB,SAAUqiB,EAAUtI,WAAYsI,EAAUrI,cAE5F,GAAKnU,KAAKkB,QAAQmU,gBAAsB,OAAG,CAEvC,IAAK,IADDsH,KACKjxB,EAAI,EAAGA,EAAIsU,KAAKkB,QAAQmU,gBAAgB1pB,OAAQD,IAAK,CAC1D,IAAIkxB,EAAe5c,KAAKkB,QAAQmU,gBAAgB3pB,GAChDkxB,EAAanpB,IAAMmpB,EAAanpB,KAAOuM,KAAK5N,OAAO6M,iBAAiB2d,EAAalyB,OAAO+I,IACpFmpB,EAAanpB,MAAQuM,KAAKkB,QAAQzN,KAClCkpB,EAAK9wB,KAAKmU,KAAKkB,QAAQmU,gBAAgB3pB,IAG/C,IAAI8B,EAAYwS,KAAKya,qBAAqBkC,GACtCnvB,GACAiM,EAAMQ,MAAMzM,GAIpB,IAAIC,EAAS,IAAIoM,cAAYmG,KAAKsc,UAAUjiB,aAAaZ,GACrD5D,EAAMmK,KAAKkB,QAAQtW,OACvBoV,KAAK6c,aAAe3K,EAChB4K,YAAYrvB,EAAQuS,KAAKkB,QAAQxW,MAAOmL,EAAKmK,KAAK7G,gBAAgB3M,YACtEwT,KAAK+c,kBAAkB,MAAM,EAAM/c,KAAK6c,cACxC7c,KAAK0U,OAAOG,QACZ,IAAIvd,GACAuI,YAAamd,GACb1G,WAAYtW,KAAKkB,QAAQxW,MAAO6rB,WAAYvW,KAAKkB,QAAQnN,MAE7D,IAAKyiB,cAAcxW,KAAK5N,OAAOqkB,cAAe,CAE1Cnf,EAAgB,YAAI0I,KAExBA,KAAK5N,OAAO+d,QAAQ8M,GAAuB3lB,IAE/C4a,EAAe1nB,UAAUuyB,kBAAoB,SAAUtjB,EAAOwiB,EAAWriB,GACrE+d,cAAY3X,KAAKkW,SAKjBlW,KAAKkd,eACLld,KAAKmd,kBAAkBvjB,EAAYqiB,IAEvC/J,EAAe1nB,UAAUgwB,cAAgB,SAAU/gB,GAC/CuG,KAAKgb,qBAAqBvhB,IAE9ByY,EAAe1nB,UAAU0yB,aAAe,WACpCld,KAAKvS,UACL,IAAID,EAAYwS,KAAKya,qBAAqBza,KAAKkB,QAAQmU,iBACnD5b,EAAQ,IAAIC,QACZlM,GACAiM,EAAMQ,MAAMzM,GAGhB,IAAK,IAAI+J,EAAK,EAAG6lB,EADJ,IAAIvjB,cAAYmG,KAAKsc,UAAUjiB,aAAaZ,GACrBlC,EAAK6lB,EAASzxB,OAAQ4L,IAAM,CAC5D,IAAIK,EAAMwlB,EAAS7lB,GACnByI,KAAKvS,OAAO4C,WAAS2P,KAAKkB,QAAQxW,MAAOkN,KAAQ,IAGzDsa,EAAe1nB,UAAU4oB,aAAe,SAAUhoB,GAC9C,IAAId,EAASc,EAAEd,OACX2H,EAAOD,EAAa1H,EAAQ,sBAIhC,GAHI0H,EAAa1H,EAAQ,gBACrB0V,KAAKyU,eAAerpB,GAEpB6G,EAAM,CACN,IAAIorB,EAAYprB,EAAK5D,cAAc,gBAC/BgvB,EACArd,KAAKsd,iBAAiBD,EAAU/qB,UAAUC,SAAS,YAGnDkG,EAAexG,EAAKlB,eAExBiP,KAAKud,0BACLtrB,EAAK5D,cAAc,iBAAiBwmB,UAG5C3C,EAAe1nB,UAAU8yB,gBAAkB,SAAUxkB,GAEjD,IAAK,IAAIvB,EAAK,EAAGimB,KADDtqB,MAAMC,KAAK6M,KAAKmW,KAAKhoB,iBAAiB,aAClBoJ,EAAKimB,EAAS7xB,OAAQ4L,IAAM,CAE5DsB,EADW2kB,EAASjmB,GACOuB,KAGnCoZ,EAAe1nB,UAAU+sB,WAAa,WAC9BvX,KAAK5N,OAAOK,QAAQH,UAAUC,SAAS,cACvCyN,KAAKjI,UAAUtF,QAAQpE,cAAc,kBAAkBiE,UAAUc,OAAO,iBACxE4M,KAAKjI,UAAUtF,QAAQpE,cAAc,UAAUwmB,UAGvD3C,EAAe1nB,UAAUizB,eAAiB,SAAUhxB,EAAOqM,EAASnO,GAChE,IAAIsH,EAAO6G,EAAUkH,KAAK0S,SAAS7W,WAAU,GACzCmE,KAAK6S,UAAUhX,WAAU,GACzB+W,EAAQ3gB,EAAK5D,cAAc,YAQ/B,OAPAukB,EAAMtkB,WAAazD,oBAAkB4B,IAAUA,EAAMoL,WAAWlM,OAASc,EACrEuT,KAAK+U,kBAAkB,UAC3BjmB,YAAU8jB,IAAS,yBACf5S,KAAKkB,QAAQjT,WACb2kB,EAAMtkB,UAAY,GAClBoF,EAAekf,EAAO5S,KAAKkB,QAAQjT,SAAStD,EAAMqV,KAAK5N,OAAQ,wBAE5DH,GAEXigB,EAAe1nB,UAAU+yB,wBAA0B,WAC/C,IAAIG,EAAM1d,KAAKmW,KAAKxiB,SAAShI,OAAS,EAClCgF,KACAsB,EAAO+N,KAAKmW,KAAK9nB,cAAc,gBAC/BsvB,EAAW3d,KAAKmW,KAAKhoB,iBAAiB,8BAA8BxC,OACpEiyB,EAAM5d,KAAKjI,UAAU8lB,OAAO,GAChCD,EAAIE,UAAW,EACXJ,IAAQC,EACRhtB,GAAa,WAERgtB,EACLhtB,GAAa,WAGbA,GAAa,aACbitB,EAAIE,UAAW,GAEnB9d,KAAKsS,aAAesL,EAAIE,SACxBF,EAAIG,WACJhlB,eAAa9G,IAAQ,UAAW,SAAU,cAC1CnD,YAAUmD,GAAOtB,IAErBuhB,EAAe1nB,UAAU2yB,kBAAoB,SAAUxyB,EAAMsxB,GAKzD,IAAK,IAJDze,EACAwgB,EAAShe,KAAK5N,OAAOqC,cAAc,OACnCmpB,EAAM5d,KAAKjI,UAAU8lB,OAAO,GAC5BI,GAAe,EACVvyB,EAAI,EAAGA,EAAIf,EAAKgB,OAAQD,IAAK,CAClC,IAAIQ,EAAMmE,WAAS,UAAW1F,EAAKe,KACvB,KAARQ,GAAcrB,oBAAkBqB,MAChC+xB,GAA4B,GAIpC,GADAje,KAAKkZ,UAA4B,IAAjB+E,EAAqBtzB,EAAKgB,OAASsyB,EAActzB,EAAKgB,OAClEhB,EAAKgB,SAAWqU,KAAKwS,YAAa,CAClC,IAAI0L,EAAiBle,KAAK+U,kBAAkB,aACxCoJ,EAAWne,KAAKyd,eAAeS,GAAgB,GAAQ1gB,KAASA,EAAGwC,KAAKkB,QAAQxW,OAASwzB,EAAgB1gB,IACzG6f,EAAY1kB,EAAmBpF,EAAO,QAAS4qB,EAAU,YAC7Dd,EAAUhvB,cAAc,YAAYiE,UAAUoE,IAAI,eAClDsnB,EAAOpqB,YAAYypB,GACnB,IAAI7vB,EAAY,IAAIsN,YAAU,QAAS,QAASkF,KAAKkB,QAAQxW,OACzDsV,KAAKkB,QAAQ/Q,kBACb3C,EAAYA,EAAU8N,GAAG,QAAS,QAAS0E,KAAKkB,QAAQ/Q,kBAIvD,IAFDiuB,EAAgB,IAAIvkB,cAAYmG,KAAKkB,QAAQmU,iBAAiBhb,cAAa,IAAIX,SAAQO,MAAMzM,IAAY7B,OACzG0yB,OAAW,EACf,IAAS3yB,EAAI,EAAGA,EAAIf,EAAKgB,OAAQD,IAAK,CAClC,IAAI+H,EAAMF,EAAO,QACjByM,KAAKuS,OAAO9e,GAAOpD,WAAS,UAAW1F,EAAKe,IAC5C,IAAIe,EAAQuT,KAAKuC,eAAehC,OAAOlQ,WAAS2P,KAAKkB,QAAQxW,MAAOC,EAAKe,IAAKsU,KAAKkB,QAAQiD,UAC3F,GAAe,KAAV1X,GAAgB5B,oBAAkB4B,GAAS,CAC5C,GAAI4xB,EACA,SAEJA,GAAW,EAEf,IAAIC,EAAWte,KAAKyd,eAAehxB,EAAOuT,KAAKue,gBAAgBH,EAAepe,KAAKuS,OAAO9e,IAAOpD,WAAS,UAAW1F,EAAKe,KAC1HsyB,EAAOpqB,YAAY+E,EAAmBlF,EAAK6qB,EAAU,aAEzDte,KAAKmW,KAAK7nB,UAAY,GACtBoF,EAAesM,KAAKmW,QAASjjB,MAAMC,KAAK6qB,EAAOrqB,WAC/CqM,KAAKud,0BACLK,EAAIE,UAAW,OAGfE,EAAOpqB,YAAYoM,KAAK5N,OAAOqC,cAAc,QAAUnG,UAAW0R,KAAK+U,kBAAkB,eACzF/U,KAAKmW,KAAK7nB,UAAY,GACtBoF,EAAesM,KAAKmW,QAASjjB,MAAMC,KAAK6qB,EAAOrqB,WAC/CiqB,EAAIE,UAAW,EAEnB9d,KAAKsS,aAAesL,EAAIE,SACxBF,EAAIG,WACJ,IAAIzmB,GAASuI,YAAakb,GAA4BnhB,WAAYoG,KAAKwS,eAAmB7nB,GAC1F,IAAK6rB,cAAcxW,KAAK5N,OAAOqkB,cAAe,CAE1Cnf,EAAgB,YAAI0I,KAExBA,KAAK5N,OAAO+d,QAAQ8M,GAAuB3lB,GAC3CknB,cAAYxe,KAAKkW,UAErBhE,EAAe1nB,UAAU+zB,gBAAkB,SAAUH,EAAe3xB,GAChE,OAAKuT,KAAKyV,aAAe2I,GAIdpe,KAAKvS,OAAOhB,IAG3BylB,EAAe4K,YAAc,SAAUhjB,EAAMpP,EAAOE,EAAQuO,GAOxD,IANA,IAEI1M,EAFAI,EAAMiN,EAAKnO,OACX8B,KAGAgxB,KACAplB,EAAezO,GAAUA,EAAOwY,kBAC7BvW,KAGH,GAFAJ,EAAQqN,EAAKjN,MACbJ,EAAQ4D,WAAS3F,EAAO+B,MACTgyB,GAAS,CACpB,IAAI5wB,KAGJ,GAFAA,EAAW,QAAIpB,EACfgyB,EAAOhyB,IAAS,EACZ4M,EAAc,CACd,IAAIqlB,EAAiBxlB,GAAetO,KAAY6B,EAAO0M,GAAgB,GACvEF,WAAS0lB,GAAuBD,EAAgB5kB,EAAKjN,IACrDJ,EAAQ4D,WAASzF,EAAOuF,gBAAiBuuB,GAE7CzlB,WAASvO,EAAOG,oBAAkB4B,GAAS,KAAOA,EAAOoB,GACzDoL,WAAS,UAAWa,EAAKjN,GAAMgB,GAC/BJ,EAAO5B,KAAKgC,GAGpB,OAAO/C,WAAS8zB,MAAM9zB,WAAS+zB,KAAKpxB,EAAQ/C,EAAOI,WAASgZ,aAAc,YAE9EoO,EAAewI,aAAe,SAAUnuB,GAIpC,IAAK,IAHDowB,EAAO7xB,WAASowB,SAAS3uB,EAAS,SAAS,OAC3CgB,KACAG,KACKhC,EAAI,EAAGA,EAAIixB,EAAKhxB,OAAQD,IAEH,KAD1B6B,EAAa,IAAIsM,cAAYtN,GAAS8N,cAAa,IAAIX,SAAQO,MAAM,QAAS,QAAS0iB,EAAKjxB,GAAGhB,SAChFiB,SACX+B,EAAKivB,EAAKjxB,GAAGhB,OAASwnB,EAAe4M,kBAAkBvxB,IAG/D,OAAOG,GAEXwkB,EAAe4M,kBAAoB,SAAUnC,GACzC,IACInvB,EACA0B,EAFArC,EAAM8vB,EAAOA,EAAKhxB,OAAS,GAG/BuD,EAAQgjB,EAAe6M,iBAAiBpC,EAAK,KACvCxI,cAAgBtpB,oBAAkBqE,EAAMilB,eAAgBjlB,EAAMilB,aAEhE3mB,EADe,SAAf0B,EAAM6E,MAAkC,aAAf7E,EAAM6E,KACnBmG,GAAiBhL,EAAOA,EAAM6E,MAG9B7E,EAAMsM,YAActM,EAAMsM,YAClC,IAAIV,YAAU5L,EAAMxE,MAAOwE,EAAMiL,SAAUjL,EAAMzC,OAAQylB,EAAe8M,aAAa9vB,GAAQA,EAAMilB,cAE3G,IAAK,IAAI8K,EAAI,EAAGA,EAAIpyB,EAAKoyB,IACrBtC,EAAKsC,GAAK/M,EAAe6M,iBAAiBpC,EAAKsC,IAC3CpyB,EAAM,GAAKoyB,EAAI,GAA2B,OAAtBtC,EAAKsC,GAAGzxB,UACP,SAAjBmvB,EAAKsC,GAAGlrB,MAAoC,aAAjB4oB,EAAKsC,GAAGlrB,KACnCvG,EAAUwmB,WAAWnoB,KAAKqO,GAAiByiB,EAAKsC,GAAItC,EAAKsC,GAAGlrB,OAG5DvG,EAAUwmB,WAAWnoB,KAAK,IAAIiP,YAAU6hB,EAAKsC,GAAGv0B,MAAOiyB,EAAKsC,GAAG9kB,SAAUwiB,EAAKsC,GAAGxyB,OAAQylB,EAAe8M,aAAarC,EAAKsC,IAAKtC,EAAKsC,GAAG9K,eAKvI3mB,EADiB,SAAjBmvB,EAAKsC,GAAGlrB,MAAoC,aAAjB4oB,EAAKsC,GAAGlrB,KACvBvG,EAAWmvB,EAAKsC,GAAY,WAAG/kB,GAAiByiB,EAAKsC,IAAKtC,EAAKsC,GAAGlrB,KAAM4oB,EAAKsC,GAAG9K,cAGhFwI,EAAKsC,GAAGzjB,YAChBhO,EAAUmvB,EAAKsC,GAAGzxB,WAAWmvB,EAAKsC,GAAGzjB,aACrChO,EAAWmvB,EAAKsC,GAAY,WAAGtC,EAAKsC,GAAGv0B,MAAOiyB,EAAKsC,GAAG9kB,SAAUwiB,EAAKsC,GAAGxyB,OAAQylB,EAAe8M,aAAarC,EAAKsC,IAAKtC,EAAKsC,GAAG9K,cAI9I,OAAO3mB,GAAa,MAExB0kB,EAAe8M,aAAe,SAAUrd,GACpC,QAAI9W,oBAAkB8W,EAAOvH,YAIlBuH,EAAOvH,WAGtB8X,EAAe6M,iBAAmB,SAAUpd,GAIxC,OAHqB,SAAhBA,EAAO5N,MAAmC,aAAhB4N,EAAO5N,MAAuB4N,EAAOlV,iBAAiBsO,QACjF4G,EAAO5N,KAAO4N,EAAO5N,MAAQ,QAE1B4N,GAMXuQ,EAAe1nB,UAAUwlB,cAAgB,WACrC,MAAO,kBAEJkC,KCr1BPgN,GAAsB,WAKtB,SAASA,EAAK9sB,EAAQwE,GAClBoJ,KAAKmf,WAAcC,WAAW,EAAOC,SAAU,KAAMT,UACrD5e,KAAK5N,OAASA,EACd4N,KAAKpJ,eAAiBA,EACtBoJ,KAAKsf,kBACDtf,KAAK5N,OAAOob,aAAwC,eAAzBxN,KAAKgQ,kBAGpChQ,KAAK5N,OAAOqb,GAAG8R,GAAkBvf,KAAKwf,QAASxf,MAC/CA,KAAK5N,OAAOqb,GAAGgS,GAA2Bzf,KAAK0f,YAAa1f,MAC5DA,KAAK5N,OAAOqb,GAAGkS,GAAoB3f,KAAK4f,WAAY5f,MACpDA,KAAK5N,OAAOqb,GAAGoS,GAA2B7f,KAAKsf,gBAAiBtf,MAChEA,KAAK5N,OAAOqb,GAAGqS,GAAgB9f,KAAKgJ,QAAShJ,MAC7CA,KAAK5N,OAAOqb,GAAGsS,GAAmB/f,KAAKggB,YAAahgB,MACpDA,KAAK5N,OAAOqb,GAAGwS,GAAwBjgB,KAAKkgB,QAASlgB,MACrDA,KAAK5N,OAAOqb,GAAG0S,GAAgBngB,KAAKogB,oBAAqBpgB,OAif7D,OA/eAkf,EAAK10B,UAAUk1B,YAAc,SAAUt0B,GACnC4U,KAAKqgB,YAAYzmB,WAAWE,KAAKwmB,OAAOl1B,EAAEm1B,QAAS,EAAGvgB,KAAKqgB,YAAYzmB,WAAWE,KAAKwmB,OAAOl1B,EAAEo1B,UAAW,GAAG,KAElHtB,EAAK10B,UAAUwlB,cAAgB,WAC3B,MAAO,QAMXkP,EAAK10B,UAAU80B,gBAAkB,WAC7B,IAAI5iB,EAAOsD,KAAK5N,OAChB4N,KAAKqgB,YAAc3jB,EAAK9C,sBAAsBC,cAAc6C,EAAK9C,WAC5D/O,oBAAkB6R,EAAK9C,YAAc,IAAIC,cAAgB,IAAIA,cAAY6C,EAAK9C,YACnF8C,EAAKnB,eAAgB9B,MAAOiD,EAAKjD,iBAAiBC,QAAQgD,EAAKjD,MAAQ,IAAIC,UAAW,IAO1FwlB,EAAK10B,UAAUqhB,cAAgB,SAAU4U,GACrC,IACIhnB,EADOuG,KAAK5N,OACCid,WAAWC,QAC5B,GAAoC,kBAAhCtP,KAAK5N,OAAOsuB,gBACZjnB,EAAMknB,OAAO3gB,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAU/W,GAAU,SAAiC,IAAxBA,EAAOoL,eAA4C,IAAnBpL,EAAO4F,cAAsCuE,IAAjBnK,EAAOF,SAAyB+xB,IAAI,SAAU7xB,GAAU,OAAOA,EAAOF,cAE3M,GAAoC,WAAhCsV,KAAK5N,OAAOsuB,gBAA8B,CAG/C,IAAK,IAFDE,KACAr0B,EAAUyT,KAAK5N,OAAO7F,QACjBb,EAAI,EAAGA,EAAIa,EAAQZ,OAAQD,IAChCk1B,EAAkB/0B,KAAKU,EAAQb,GAAGhB,OAEtC+O,EAAMknB,OAAOC,GAajB,OAXA5gB,KAAK6gB,YAAYpnB,GACjBuG,KAAK8gB,YAAYrnB,GACjBuG,KAAK+gB,eAAetnB,GACpBuG,KAAKghB,UAAUvnB,GACXsC,GAAgBiE,KAAK5N,QACrB4N,KAAKihB,sBAAsBxnB,GAG3BuG,KAAKkhB,UAAUznB,EAAOgnB,GAE1BzgB,KAAKmhB,WAAW1nB,GACTA,GAEXylB,EAAK10B,UAAUu2B,eAAiB,SAAUtnB,EAAO2nB,GAO7C,OANAphB,KAAK5N,OAAOgC,WAAW5E,QAAQ,SAAUtC,GACrCA,EAAIX,QAAQiD,QAAQ,SAAU5E,IACdA,EAAOmJ,gBAAgBI,MAAQvJ,EAAOmJ,MAAQnJ,EAAOmJ,OAC3DvE,QAAQ,SAAUuE,GAAQ,OAAO0F,EAAM4nB,UAAUttB,EAAKM,cAAezJ,EAAOF,aAGnF+O,GAEXylB,EAAK10B,UAAUy2B,sBAAwB,SAAUxnB,GAClCuG,KAAK5N,OAEhB,GAAIqH,EAAMogB,QAAQluB,OACd,IAAK,IAAID,EAAI,EAAGA,EAAI+N,EAAMogB,QAAQluB,OAAQD,IACN,WAA5B+N,EAAMogB,QAAQnuB,GAAQ,IACtB+N,EAAMogB,QAAQyG,OAAO50B,EAAG,GAIpC,OAAO+N,GAEXylB,EAAK10B,UAAU02B,UAAY,SAAUznB,EAAOgnB,GACxC,IAAI/jB,EAAOsD,KAAK5N,OAEhB,IAAKsK,EAAKK,aAAeL,EAAKV,wBAAsC,IAAbykB,EAAmB,CAQtE,GAPA/jB,EAAKO,aAAaC,YAAc9H,KAAKsJ,IAAI,EAAGhC,EAAKO,aAAaC,aAC1DR,EAAKO,aAAaqkB,WAAa,IAC/B5kB,EAAKO,aAAaqkB,UAAY,GAE9B5kB,EAAKO,aAAaE,UAAY,IAC9BT,EAAKO,aAAaE,SAAW,IAE7B1D,EAAMogB,QAAQluB,OACd,IAAK,IAAID,EAAI,EAAGA,EAAI+N,EAAMogB,QAAQluB,OAAQD,IACN,WAA5B+N,EAAMogB,QAAQnuB,GAAQ,IACtB+N,EAAMogB,QAAQyG,OAAO50B,EAAG,GAIpC+N,EAAM8nB,KAAK7kB,EAAKO,aAAaC,YAAaR,EAAKO,aAAaE,UAEhE,OAAO1D,GAEXylB,EAAK10B,UAAU22B,WAAa,SAAU1nB,GAClC,IAAIiD,EAAOsD,KAAK5N,OAChB,GAAIsK,EAAK6E,eAAiB7E,EAAKpQ,cAAcC,QAAQZ,OAEjD,IAAK,IADDY,EAAUmQ,EAAKpQ,cAAcC,QACxBb,EAAI,EAAGmB,EAAMN,EAAQZ,OAAQD,EAAImB,EAAKnB,IAAK,CAChD,IAAId,EAASoV,KAAKf,iBAAiB1S,EAAQb,IACtCd,GACDoV,KAAK5N,OAAO2d,IAAI,kBAAoByR,WAAY,QAASlL,WAAY/pB,EAAQb,KAEjF,IAAI+1B,EAAW72B,EAAO8W,oBAClBzK,EAASrM,EAAOqM,OAChBwqB,EACAhoB,EAAMmlB,MAAMryB,EAAQb,GAAIsU,KAAK0hB,kBAAkB5T,KAAK9N,MAAO/I,GAG3DwC,EAAMmlB,MAAMryB,EAAQb,GAAI,MAIpC,OAAO+N,GAEXylB,EAAK10B,UAAUw2B,UAAY,SAAUvnB,GACjC,IAAIiD,EAAOsD,KAAK5N,OAChB,IAAKsK,EAAK0E,cAAgB1E,EAAK6E,gBAAkB7E,EAAK6Y,aAAahpB,QAAQZ,OAAQ,CAG/E,IAAK,IAFDY,EAAUmQ,EAAK6Y,aAAahpB,QAC5Bo1B,KACKj2B,EAAIa,EAAQZ,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAC1C,IAAImK,EAAMmK,KAAKf,iBAAiB1S,EAAQb,GAAGhB,OAC3C,IAAImL,EAKA,OADAmK,KAAK5N,OAAO2d,IAAI,kBAAoByR,WAAY,OAAQlL,WAAY/pB,EAAQb,GAAGhB,QACxE+O,EAJP5D,EAAImO,iBAAiBzX,EAAQb,GAAGuY,WAMpC,IAAI2d,EAAKr1B,EAAQb,GAAGuY,UAChBpO,EAAI2N,eACJxD,KAAK5N,OAAO2d,IAAI,sBAChB6R,EAAM5hB,KAAKuU,WAA0ChoB,EAAQb,GAAGuY,UAAxCpO,EAAI2N,aAAasK,KAAKjY,KAEY,IAA1D6G,EAAKpQ,cAAcC,QAAQmD,QAAQnD,EAAQb,GAAGhB,OAC9C+O,EAAMooB,OAAOhsB,EAAInL,MAAOk3B,GAGxBD,EAAQ91B,MAAOoY,UAAW2d,EAAIl3B,MAAOmL,EAAInL,QAGxCgB,EAAI,EAAb,IAAK,IAAWmB,EAAM80B,EAAQh2B,OAAQD,EAAImB,EAAKnB,IAC3C+N,EAAMooB,OAAOF,EAAQj2B,GAAGhB,MAAOi3B,EAAQj2B,GAAGuY,WAGlD,OAAOxK,GAEXylB,EAAK10B,UAAUs2B,YAAc,SAAUrnB,GACnC,IAAI0H,EAAQnB,KACRwc,EAAYxc,KAAK5N,OAAOmqB,eACxBjZ,EAASkZ,EAAUlZ,OAAO3X,OAAS6wB,EAAUlZ,OAAStD,KAAK8hB,4BAC3DnH,KAqBJ,OAnBI3a,KAAK5N,OAAOmqB,eAAe/iB,IAAI7N,UACRqU,KAAK5N,OAAO4M,uBAAuBzE,KAAK,SAAU1E,GAAO,OAAOyN,EAAO5T,QAAQmG,EAAInL,QAAU,KACtFsV,KAAKqgB,YAAYxE,QAAQkG,eACN,mBAA7C/hB,KAAKqgB,YAAYxE,QAAQkG,gBAazBtoB,EAAM6gB,OAAOkC,EAAUhjB,IAAK8J,EAAQkZ,EAAUriB,SAAUqiB,EAAUtI,WAAYsI,EAAUrI,eAZxF7Q,EAAO9T,QAAQ,SAAU8mB,GACrB,IAAI1rB,EAASuW,EAAMlC,iBAAiBqX,GAChC1rB,EAAOwY,kBACPuX,EAAgBxZ,EAAM6gB,mBAAmBp3B,EAAQ+vB,GAGjDA,EAAc9uB,KAAK,IAAIiP,YAAUlQ,EAAOF,MAAO8xB,EAAUriB,SAAUqiB,EAAUhjB,IAAKgjB,EAAUtI,WAAYsI,EAAUrI,iBAG1H1a,EAAMQ,MAAMa,YAAUQ,GAAGqf,MAM1BlhB,GAEXylB,EAAK10B,UAAUq2B,YAAc,SAAUpnB,EAAO7O,EAAQq3B,GAClD,IAAIvlB,EAAOsD,KAAK5N,OACZuoB,KAEAuH,KACAtH,EAAgB5a,KAAK5N,OAAO4M,uBAChC,GAAItC,EAAK4E,gBAAkB5E,EAAKyV,eAAe5lB,QAAQZ,OAAQ,CAG3D,IAAK,IAFDY,EAAU3B,GAAkB8R,EAAKyV,eAAe5lB,QAChD8P,KACK9E,EAAK,EAAGiG,EAAKd,EAAKyb,aAAc5gB,EAAKiG,EAAG7R,OAAQ4L,IAAM,CAE3D8E,GADIxG,EAAM2H,EAAGjG,IACD7M,OAASmL,EAAI8L,OAAO5N,KAAO8B,EAAI8L,OAAO5N,KAAO2I,EAAKyV,eAAepe,KAIjF,IAAK,IAFDouB,KACAC,KACKjR,EAAK,EAAGkR,EAAY91B,EAAS4kB,EAAKkR,EAAU12B,OAAQwlB,IAAM,CAEpC,aAAvB9U,GADAxG,EAAMwsB,EAAUlR,IACJzmB,QAAgD,UAAvB2R,EAAQxG,EAAInL,OACjDy3B,EAAat2B,KAAKgK,GAGlBusB,EAAgBv2B,KAAKgK,GAG7B,GAAIssB,EAAax2B,OAEb,IAAK,IADD22B,EAAiBpQ,GAAewI,aAAayH,GACxC/Q,EAAK,EAAGmR,EAAKjzB,OAAOC,KAAK+yB,GAAiBlR,EAAKmR,EAAG52B,OAAQylB,IAAM,CACrE,IAAIyJ,EAAO0H,EAAGnR,GACVvb,OAAM,EACNmK,KAAK5N,OAAO6M,iBAAiB4b,GAAMzX,oBACnCvN,EAAMyE,GAA2BugB,EAAMD,IAEtC/kB,GACDmK,KAAK5N,OAAO2d,IAAI,kBAAoByR,WAAY,SAAUlL,WAAYuE,IAEtEhlB,IAAQosB,GACRtH,EAAgB3a,KAAKgiB,mBAAmBnsB,EAAK8kB,GAC7CuH,EAAar2B,KAAKgK,IAGlB8kB,EAAc9uB,KAAKy2B,EAAezH,IAI9C,GAAIuH,EAAgBz2B,OAChB,IAAK,IAAI62B,EAAK,EAAGC,EAAoBL,EAAiBI,EAAKC,EAAkB92B,OAAQ62B,IAAM,EACnF3sB,EAAM4sB,EAAkBD,IACxB/uB,IAAMoC,EAAIpC,KAAOuM,KAAK5N,OAAOswB,6BAA6B7sB,EAAInL,OAAO+I,IACzE,IAAIkvB,EAAW3iB,KAAK5N,OAAOwwB,2BAA2B/sB,EAAIpC,KACrDkvB,GACD3iB,KAAK5N,OAAO2d,IAAI,kBAAoByR,WAAY,SAAUlL,WAAYzgB,EAAInL,QAE9E,IAAIm4B,EAAQF,EAAS5uB,KACjB4uB,EAASvf,mBAAqB9I,GAA2BzE,EAAInL,MAAOkwB,KAAmBqH,GACvFC,EAAar2B,KAAKgK,GAClB8kB,EAAgB3a,KAAKgiB,mBAAmBW,EAAUhI,IAGpC,SAAVkI,GAA8B,aAAVA,EACpBlI,EAAc9uB,KAAK,IAAIiP,YAAUjF,EAAInL,MAAOmL,EAAIsE,SAAUtE,EAAIpJ,OAAQoJ,EAAIuE,UAAW4F,KAAK5N,OAAO+f,eAAegC,eAGhHwG,EAAc9uB,KAAKqO,GAAiBrE,EAAKgtB,IAKrDlI,EAAchvB,OACd8N,EAAMQ,MAAMa,YAAUO,IAAIsf,IAG1B3a,KAAK5N,OAAOwd,OAAOkT,OAG3B,OAAOrpB,GAEXylB,EAAK10B,UAAUw3B,mBAAqB,SAAUnsB,EAAK8kB,GAC/C,IAAI/G,KAOJ,OANI/d,IACAmK,KAAK5N,OAAOwd,OAAOmE,IAAwBvmB,UAAWomB,EAAYhpB,OAAQiL,IACtE+d,EAAWpmB,UAAUwmB,WAAWroB,QAChCgvB,EAAc9uB,KAAK+nB,EAAWpmB,YAG/BmtB,GAQXuE,EAAK10B,UAAU01B,QAAU,SAAU5oB,EAAMmC,GACrC,IAAI0H,EAAQnB,UACC,IAAT1I,IAAmBA,GAASuI,YAAa,KAC7C,IAAIrG,EAAMwG,KAAK+iB,OAAOzrB,EAAK6B,gBACvB7J,OAAOC,KAAK+H,EAAK6B,gBAAgBxN,OACjC2L,EAAK6B,eAAiB6G,KAAK5N,OAAO4wB,2BAEtC,GADAhjB,KAAK5N,OAAO2d,IAAI,8BAAgCoP,UAAWnf,KAAK5N,SAC5D4N,KAAK5N,OAAOwH,YAAc,WAAYoG,KAAK5N,OAAOwH,WAAY,CAE9D,OADUoG,KAAKmb,aAAa7jB,EAAMmC,EAAOD,GAC9B0U,QAGX,IAAI+U,OAAO,EACX,OAAQ3rB,EAAKuI,aACT,IAAK,SACDpG,EAAQA,GAAgBuG,KAAK6L,gBAE7B,GAAY,IADFvc,OAAOC,KAAK+H,EAAK3M,MAAMgB,OAE7Bs3B,EAAOjjB,KAAKqgB,YAAYjtB,OAAOoG,EAAKlC,EAAK3M,KAAK,GAAI8O,EAAMypB,UAAWzpB,OAElE,CACD,IAAI0pB,GACAC,gBACAC,kBACAC,mBAEJH,EAAQE,eAAiB/rB,EAAK3M,KAC9Bs4B,EAAOjjB,KAAKqgB,YAAYkD,YAAYJ,EAAS3pB,EAAKC,EAAMypB,UAAWzpB,EAAMqhB,iBAE7E,MACJ,IAAK,OACDrhB,EAAQA,GAAgBuG,KAAK6L,gBAC7BvU,EAAK7H,MAAQ5E,oBAAkByM,EAAK7H,OAAS,EAAI6H,EAAK7H,MACtDwzB,EAAOjjB,KAAKqgB,YAAYmD,OAAOlsB,EAAK3M,KAAM8O,EAAMypB,UAAWzpB,EAAOnC,EAAK7H,OAG/E,OAAIwzB,GAAS9uB,MAAMqK,QAAQykB,IAAUA,EAAKlwB,eAAe,kBAM9CiN,KAAKwjB,OAAO/pB,EAAOnC,GALnB2rB,EAAK9U,KAAK,SAAU1gB,GACvB,OAAO0T,EAAMqiB,OAAO/pB,EAAOnC,MAQ3C4nB,EAAK10B,UAAUg5B,OAAS,SAAU/pB,EAAOnC,GAIrC,MAHyB,SAArBA,EAAKuI,aACLG,KAAK5N,OAAOwd,OAAO6T,GAAoBnsB,GAEpC0I,KAAK8T,aAAara,IAE7BylB,EAAK10B,UAAUspB,aAAe,SAAUra,GACpC,IAAI0H,EAAQnB,KACZ,GAAIA,KAAKqgB,YAAYqD,MAAO,CACxB,IAAIC,EAAa,IAAIpW,WASrB,OARYvN,KAAKqgB,YAAYqD,MACvBvV,KAAK,SAAU/iB,GACjB+V,EAAMkf,YAAYvM,aAAara,GAAO0U,KAAK,SAAU1gB,GACjDk2B,EAAWpV,QAAQ9gB,OAExBm2B,MAAM,SAAUx4B,GACfu4B,EAAWE,OAAOz4B,KAEfu4B,EAAWzV,QAGlB,OAAOlO,KAAKqgB,YAAYvM,aAAara,IAG7CylB,EAAK10B,UAAUk3B,kBAAoB,SAAUj1B,EAAO/B,GACrCsV,KAAK5N,OAAhB,IACIwE,EAAiBoJ,KAAKpJ,eACtBhM,EAASoV,KAAKf,iBAAiBvU,GAC/Bo5B,EAAOr3B,EACN7B,EAAOmJ,OACRnJ,EAAOmJ,KAAO+vB,EAAK9pB,OAAU8pB,EAAKC,WAAa,GAAKD,EAAKE,aAAe,GACpEF,EAAK7oB,aAAe,GAAK6oB,EAAKG,kBAAoB,EAAI,WAAa,iBAEvEp5B,oBAAkBD,EAAOsZ,iBACzBvN,EAAaC,EAAgBhM,GAGjC,OADgBkV,GAAetV,UAAU+V,OAAO9T,EAAO7B,EAAOsZ,iBAGlEgb,EAAK10B,UAAUw1B,YAAc,SAAU1oB,GACnC,IAAImC,EAAQuG,KAAK6L,gBACbqC,EAAU,KAEV1U,EAAMwG,KAAK+iB,OAAOzrB,EAAK6B,gBACvB7J,OAAOC,KAAK+H,EAAK6B,gBAAgBxN,OAAS2L,EAAK6B,eAC/C6G,KAAK5N,OAAO4wB,2BAIhB,OAHIhjB,KAAK5N,OAAOwH,YAAc,WAAYoG,KAAK5N,OAAOwH,YAClDoG,KAAKmb,aAAa7jB,EAAMmC,EAAOD,GAE3BlC,EAAKuI,aACT,IAAK,OACDqO,EAAUlO,KAAKqgB,YAAY6D,OAAO1qB,EAAKlC,EAAK3M,KAAM8O,EAAMypB,UAAWzpB,EAAOnC,EAAK6sB,cAGvF7sB,EAAO,QAAI4W,GAAoB5W,EAAO,QACtC0I,KAAK5N,OAAOwd,OAAOwU,GAAmB9sB,IAG1C4nB,EAAK10B,UAAU+4B,YAAc,SAAUJ,EAAS3pB,EAAK6qB,EAAU5qB,GAG3D,QAFc,IAAVA,IAAoBA,EAAQuG,KAAK6L,iBACrCpS,EAAMqhB,gBACF,WAAY9a,KAAK5N,OAAOwH,WAAY,CAE5BoG,KAAKsb,sBAAsB7hB,GACnC,IAAI6qB,EAAO,IAAI/W,WACXjW,GACAuI,YAAa,YAAasjB,QAASA,EAAS3pB,IAAKA,EAAKC,MAAOA,EAC7D8qB,QAASD,EAAK/V,SAIlB,OAFAvO,KAAKwkB,UAAWpF,WAAW,EAAMC,SAAUiF,EAAK/V,UAChDvO,KAAK5N,OAAO+d,QAAQsU,GAA0BntB,GACvCgtB,EAAKpW,QAIZ,OADclO,KAAKqgB,YAAYkD,YAAYJ,EAAS3pB,EAAKC,EAAMypB,UAAWzpB,EAAO4qB,IAIzFnF,EAAK10B,UAAUu4B,OAAS,SAAUxzB,GAC9B,GAAIA,GAAQA,EAAK5D,OACb,OAAO4D,EAAK,IAKpB2vB,EAAK10B,UAAU+pB,SAAW,WACtB,OAA+C,IAAxCvU,KAAKqgB,YAAYzmB,WAAW8qB,cAAwD3vB,IAApCiL,KAAKqgB,YAAYzmB,WAAWgiB,KAC3C,KAApC5b,KAAKqgB,YAAYzmB,WAAWgiB,KAEpCsD,EAAK10B,UAAUg1B,QAAU,SAAUp0B,GAC/B,IAAK,IAAIM,EAAIN,EAAEoB,QAAQb,OAAQD,EAAI,EAAGA,IAClCsU,KAAKqgB,YAAYzmB,WAAWE,KAAKwmB,OAAOl1B,EAAEm1B,QAAS,EAAGn1B,EAAEoB,QAAQd,EAAI,KAG5EwzB,EAAK10B,UAAUo1B,WAAa,SAAUx0B,GAClC,IAAI0O,EAAOkG,KAAKqgB,YAAYzmB,WAAWE,KACvCkG,KAAKqgB,YAAYzmB,WAAWE,KAAOA,EAAK6H,OAAO,SAAUlV,EAAOgD,GAAS,OAAqC,IAA9BrE,EAAEoB,QAAQkD,QAAQjD,MAEtGyyB,EAAK10B,UAAUyU,iBAAmB,SAAUvU,GACxC,IAAImL,EACJ,OAAQmK,KAAK5N,OAAkB,YAAEmI,KAAK,SAAU3P,GAE5C,OADAiL,EAAMjL,EACCA,EAAOF,QAAUA,KACtBmL,GAEVqpB,EAAK10B,UAAUwe,QAAU,WACjBhJ,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOyf,IAAI0N,GAAkBvf,KAAKwf,SACvCxf,KAAK5N,OAAOyf,IAAI8N,GAAoB3f,KAAK4f,YACzC5f,KAAK5N,OAAOyf,IAAIgO,GAA2B7f,KAAKsf,iBAChDtf,KAAK5N,OAAOyf,IAAIiO,GAAgB9f,KAAKgJ,SACrChJ,KAAK5N,OAAOyf,IAAIkO,GAAmB/f,KAAKggB,aACxChgB,KAAK5N,OAAOyf,IAAIoO,GAAwBjgB,KAAKkgB,SAC7ClgB,KAAK5N,OAAOyf,IAAIsO,GAAgBngB,KAAKogB,uBAEzClB,EAAK10B,UAAUm6B,SAAW,WACtB,OAAO3kB,KAAKmf,WAEhBD,EAAK10B,UAAUg6B,SAAW,SAAUnJ,GAChC,OAAOrb,KAAKmf,UAAY9D,GAE5B6D,EAAK10B,UAAU8wB,sBAAwB,SAAU7hB,GAC7C,IAAIgiB,EAAS,IAAIC,aACbC,EAAK,IAAI9hB,eAAc+hB,IAAK,GAAIC,QAAS,IAAIH,eAC7CL,EAAQI,EAAOK,aAAaH,EAAIliB,GAChC9O,EAAOoxB,KAAKC,MAAMX,EAAM1wB,MAC5B,OAAOqE,SAAOrE,EAAM0wB,EAAMuJ,UAE9B1F,EAAK10B,UAAU2wB,aAAe,SAAU7jB,EAAMmC,EAAOD,GACjD,IACI6hB,EADAla,EAAQnB,KAER6kB,EAAWvtB,EACf+jB,EAAQrb,KAAKsb,sBAAsB7hB,GACnC,IAAI8hB,EAAM,IAAIhO,WACV+W,EAAO,IAAI/W,WACf,QAAyBxY,IAArBuC,EAAKuI,cAA8D,IAAjCG,KAAKmf,UAAU2F,cAEjD,GADAzJ,EAAM5kB,OAASa,EACU,SAArBA,EAAKuI,aAA+C,WAArBvI,EAAKuI,YAA0B,CAC9D,IAAIklB,EAAWztB,EACfytB,EAASvrB,IAAMA,EAEfurB,EAAgB,QAAIT,EAAKpW,QACzB6W,EAAS1J,MAAQA,EACjBrb,KAAKwkB,UAAWpF,WAAW,EAAMC,SAAUiF,EAAK/V,UAChDsW,EAASN,QAAUD,EAAK/V,QACxBsW,EAASG,WAAaV,EAAKT,OAC3B7jB,KAAK5N,OAAO+d,QAAQsU,GAA0BM,GAC9CT,EAAKpW,QAAQC,KAAK,SAAU/iB,GACxB+V,EAAMqjB,UAAWpF,WAAW,EAAMC,SAAU9D,EAAIhN,QAASqQ,MAAOvD,EAAMuD,MAAOxqB,WAAYinB,EAAMjnB,aAC/F+M,EAAM/O,OAAO+d,QAAQqL,GAAwBH,KAE5CuI,MAAM,mBAGX5jB,KAAKwkB,UAAWpF,WAAW,EAAMC,SAAU9D,EAAIhN,QAASqQ,MAAOvD,EAAMuD,MAAOxqB,WAAYinB,EAAMjnB,aAC9F4L,KAAK5N,OAAO+d,QAAQqL,GAAwBH,QAIhDrb,KAAKwkB,aACLjJ,EAAIhN,QAAQvO,KAAK5N,OAAOwH,YAE5B,OAAO2hB,GAMX2D,EAAK10B,UAAUs3B,0BAA4B,WAGvC,IAAK,IAFDmD,KAEK1tB,EAAK,EAAG2tB,EADHllB,KAAK5N,OAAO+lB,aACY5gB,EAAK2tB,EAAUv5B,OAAQ4L,IAAM,CAC/D,IAAI1B,EAAMqvB,EAAU3tB,GAChB1B,EAAIiM,iBAAmBjX,oBAAkBgL,EAAInL,QAC7Cu6B,EAAcp5B,KAAKgK,EAAInL,OAG/B,OAAOu6B,GAEX/F,EAAK10B,UAAU41B,oBAAsB,WAC7BpgB,KAAK5N,OAAOkP,gBAAkBtB,KAAK5N,OAAO+f,eAAe5lB,QAAQZ,QACjEmT,GAAuBkB,KAAK5N,OAAQ4N,KAAK5N,OAAO+f,eAAe5lB,UAGhE2yB,KC1gBPiG,GAAqB,WACrB,SAASA,EAAIjkB,GACTmB,QAAMrC,KAAMkB,GAQhB,OANAikB,EAAI36B,UAAU8kB,MAAQ,WAClB,IAAIpiB,EAAM,IAAIi4B,MAGd,OAFA9iB,QAAMnV,EAAK8S,MACX9S,EAAImK,MAAQ2I,KAAK3I,MAAMolB,IAAI,SAAUrjB,GAAQ,OAAOA,EAAKkW,UAClDpiB,GAEJi4B,KCVPC,GAAsB,WACtB,SAASA,EAAKlkB,GACVlB,KAAKqlB,WAAY,EACjBrlB,KAAKslB,cAAe,EACpBjjB,QAAMrC,KAAMkB,GAOhB,OALAkkB,EAAK56B,UAAU8kB,MAAQ,WACnB,IAAIlW,EAAO,IAAIgsB,MAEf,OADA/iB,QAAMjJ,EAAM4G,MACL5G,GAEJgsB,KCTPG,GAAiC,WACjC,SAASA,EAAgB3uB,EAAgBxE,GACrC4N,KAAKpJ,eAAiBA,EACtBoJ,KAAK5N,OAASA,EA+GlB,OA7GAmzB,EAAgB/6B,UAAUg7B,OAAS,SAAUC,EAAUv4B,EAAKxB,EAAGg6B,GAC3D,IAMIC,EALAC,EADmB5lB,KAAKpJ,eAAeE,WAAW,uBAClB+uB,gBAAgB34B,EAAImK,MAAM3L,GAAGo6B,UAAY/T,WAASmN,MAClFzN,EAAUvkB,EAAImK,MAAM3L,GAAGq6B,SAAW74B,EAAImK,MAAM3L,GAAGq6B,SAC9CN,EAAShU,QAAU/lB,GAAMwB,EAAImK,MAAM1L,OAAS85B,EAAShU,QAAUvkB,EAAImK,MAAM1L,OAASD,EACnFs6B,EAAUP,EAASO,QACnBx1B,EAAU,EAEd,GAAItD,EAAIuC,MAAQ,EAAG,CACf,IAAI4H,EAAQ2I,KAAK5N,OAAO9F,cAAcC,QAAQZ,OAAS,IAClDqU,KAAK5N,OAAOyK,gBAAgB3P,EAAIuC,MAAQ,GAAG7D,UAAYoU,KAAK5N,OAAOyK,gBAAgB3P,EAAIuC,OAAO4H,MAC/F2I,KAAK5N,OAAOyK,gBAAgB3P,EAAIuC,MAAQ,GAAG4H,MAC3C4uB,EAAe/4B,EAAImK,MAAM3L,GAE7Bi6B,EAActuB,EAAMsK,OAAO,SAAUvI,GAAQ,OAAOA,EAAKxO,OAAO6I,MAAQwyB,EAAar7B,OAAY,MAAM,GAI3G,IAAK,IAFDs7B,EAAaP,GAAeA,EAAYQ,aAAe,GAAKR,EAAYS,aAAe,EACvFT,EAAYQ,aAAe1U,EACtBtkB,EAAIzB,EAAI,EAAGyB,EAAIzB,EAAIw6B,GAAc/4B,EAAID,EAAImK,MAAM1L,OAAQwB,KAC/B,IAAzBD,EAAImK,MAAMlK,GAAGqD,QACbA,IAGAtD,EAAImK,MAAMlK,GAAGk4B,WAAY,EAGjC,GAAI70B,EAAU,EAAG,CACb,IAASrD,EAAIzB,EAAI+lB,EAAStkB,EAAIzB,EAAI+lB,EAAUjhB,GAAWrD,EAAID,EAAImK,MAAM1L,OAAQwB,IACzED,EAAImK,MAAMlK,GAAGk4B,WAAY,EAEzB35B,EAAI+lB,EAAUjhB,GAAWtD,EAAImK,MAAM1L,SACnC8lB,GAAY/lB,EAAI+lB,EAAUjhB,EAAWtD,EAAImK,MAAM1L,QA2BvD,OAxBIuB,EAAImK,MAAM3L,GAAGq6B,WACb74B,EAAIvC,KAAK86B,EAAS76B,OAAOF,OAASwC,EAAImK,MAAM3L,GAAG26B,SAC/CX,EAAKE,EAAaJ,OAAOt4B,EAAImK,MAAM3L,GAAIwB,EAAIvC,MAAQ8E,MAAU5E,oBAAkBqC,EAAIuC,OAAgC,GAAvBvC,EAAIuC,MAAMoI,cAEtG4Z,EAAU,GACV1iB,aAAW22B,GAAMjU,QAAWA,EAAQ5Z,WAAYyuB,eAAgB7U,EAAQ5Z,aAExEmuB,EAAU,IACVj3B,aAAW22B,GAAMa,QAAWP,EAAQnuB,WAAY2uB,eAAgBR,EAAQnuB,aACxE3K,EAAImK,MAAM3L,GAAG45B,cAAe,EAC5Bp4B,EAAImK,MAAM3L,GAAG06B,aAAeK,OAAOT,GAC/BvU,EAAU,IACVvkB,EAAImK,MAAM3L,GAAGy6B,aAAeM,OAAOhV,KAGvCvkB,EAAIuC,MAAQ,GAAMk2B,EAAYS,aAAe,IAC7Cl5B,EAAImK,MAAM3L,GAAG25B,WAAY,EACzBn4B,EAAImK,MAAM3L,GAAG06B,aAAeK,OAAOd,EAAYS,aAAe,GAC9Dl5B,EAAImK,MAAM3L,GAAGy6B,aAAeR,EAAYS,aAAe,EAAIT,EAAYQ,aAAe,IAEtFnmB,KAAK5N,OAAOs0B,4BAA+Bx5B,EAAImK,MAAM3L,GAAGq6B,UACvD/lB,KAAK2mB,YAAYlB,EAAS76B,OAAOF,MAAO+6B,EAAS96B,KAAK86B,EAAS76B,OAAOF,SACvEsV,KAAK4mB,iBAAiBnB,EAAS76B,OAAOF,MAAO+6B,EAAS96B,KAAK86B,EAAS76B,OAAOF,OAAQ+6B,EAAShU,SAEzFiU,GAEXH,EAAgB/6B,UAAUo8B,iBAAmB,SAAUC,EAAOl8B,EAAM+N,GAChEsH,KAAK8mB,cAAc9mB,KAAK+mB,WAAWF,EAAOl8B,GAAO+N,IAErD6sB,EAAgB/6B,UAAUu8B,WAAa,SAAUC,EAAOr8B,GACpD,OAAOq8B,EAAQ,KAAOr8B,EAAKkN,YAE/B0tB,EAAgB/6B,UAAUy8B,SAAW,SAAUztB,GAC3C,OAAOA,EAAIhE,MAAM,OAErB+vB,EAAgB/6B,UAAUm8B,YAAc,SAAUK,EAAOr8B,GACrD,OAAOqV,KAAKknB,gBAAgBn0B,eAAeiN,KAAK+mB,WAAWC,EAAOr8B,KAEtE46B,EAAgB/6B,UAAU08B,cAAgB,WACtC,OAAOlnB,KAAK5N,OAAO+0B,YAEvB5B,EAAgB/6B,UAAUs8B,cAAgB,SAAUttB,EAAKd,GACrDsH,KAAK5N,OAAO+0B,WAAW3tB,GAAOd,GAElC6sB,EAAgB/6B,UAAU48B,mBAAqB,SAAUC,GAErD,IAAK,IADDC,EAAStnB,KAAKknB,gBACT3vB,EAAK,EAAGiG,EAAKlO,OAAOC,KAAK+3B,GAAS/vB,EAAKiG,EAAG7R,OAAQ4L,IAAM,CAC7D,IAAIiC,EAAMgE,EAAGjG,GACT9K,EAAQ66B,EAAO9tB,GACf6I,EAAQrC,KAAKinB,SAASztB,GACtB+tB,EAAcvnB,KAAKwnB,uBAAuBnlB,EAAM,IAChDolB,EAAiBznB,KAAK5N,OAAOs1B,yBAC7BhvB,EAAOjM,GAASg7B,EAAe,GAAKF,GACxC,GAAIA,EAAcE,EAAe,IAAM/uB,EAAO,EAC1C,IAAK,IAAIyY,EAAK,EAAGvU,EAASyqB,EAAMlW,EAAKvU,EAAOjR,OAAQwlB,IAAM,CACtD,IAAIjkB,EAAM0P,EAAOuU,GACjB,GAAIjkB,EAAIvC,KAAK0X,EAAM,IAAIxK,aAAewK,EAAM,GAAGxK,WAAY,CACvD3K,EAAImK,MAAM,GAAG0uB,SAAWrtB,EACxBxL,EAAImK,MAAM,GAAGgvB,SAAWhkB,EAAM,GAC9B,QAKhB,OAAOglB,GAEX9B,EAAgB/6B,UAAUg9B,uBAAyB,SAAU98B,GAOzD,OANY4C,EAAqB0S,KAAK5N,OAAOu1B,oBAAqB,SAAUC,EAAMn4B,GAC9E,GAAIm4B,EAAKl9B,QAAUA,EACf,OAAO+E,IAGZ,IAGA81B,KC/GPsC,GAA6B,WAC7B,SAASA,EAAYjxB,EAAgBkvB,EAAU1zB,GAC3C4N,KAAK8nB,QAAS,EACd9nB,KAAK8lB,SAAWA,EAChB9lB,KAAKpJ,eAAiBA,EACtBoJ,KAAK5N,OAASA,EACd4N,KAAKvN,QAAUuN,KAAK5N,OAAOqC,cAAc,MAAQse,OAASgV,KAAM,SAgLpE,OAvKAF,EAAYr9B,UAAUg7B,OAAS,SAAUt4B,EAAKX,EAASwC,EAAYi5B,EAAansB,GAC5E,OAAOmE,KAAKioB,WAAW/6B,EAAKX,EAASwC,EAAYi5B,EAAansB,IASlEgsB,EAAYr9B,UAAU09B,QAAU,SAAUh7B,EAAKX,EAAS47B,EAAWp5B,EAAYi5B,GACvEG,IACAj7B,EAAIvC,KAAOiT,MAAoB1Q,EAAIi2B,SACnCnjB,KAAKooB,kBAAkBl7B,IAE3B,IAAIuB,EAAOuR,KAAK5N,OAAOK,QAAQpE,cAAc,aAAenB,EAAIuG,IAAM,KAClE40B,EAAKroB,KAAKioB,WAAW/6B,EAAKX,EAASwC,EAAYi5B,EAAa,KAAMG,GAClE9wB,KAAWnE,MAAMC,KAAKk1B,EAAGhxB,OAC7B5I,EAAKH,UAAY,GACjB,IAAK,IAAIiJ,EAAK,EAAG+wB,EAAUjxB,EAAOE,EAAK+wB,EAAQ38B,OAAQ4L,IAAM,CACzD,IAAI6B,EAAOkvB,EAAQ/wB,GACnB9I,EAAKmF,YAAYwF,KAGzByuB,EAAYr9B,UAAUy9B,WAAa,SAAU/6B,EAAKX,EAASwC,EAAYi5B,EAAansB,EAAW0sB,GAC3F,IAAIF,EAAMx9B,oBAAkBgR,GAAyBmE,KAAKvN,QAAQoJ,YAAzBA,EACrC2sB,GAAY79B,KAAMuC,EAAIvC,MACtB86B,GAAa96B,KAAMuC,EAAIvC,MACvB89B,EAAWz5B,YAAWD,MACtB25B,EAAgB1oB,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAU9L,GAAO,MAAoB,aAAbA,EAAI9B,MAAuB8B,EAAInL,QAAU,GACjH+B,GAAQ,EACRi8B,IACAj8B,EAAQ1B,GAAU29B,EAAch+B,MAAO89B,EAAQ79B,OAE/CuC,EAAItB,YACJsB,EAAIy7B,WAAa3oB,KAAK5N,OAAOw2B,wBAAwBl5B,QAAQxC,EAAIuC,QAAU,GAAKhD,GAEhFS,EAAItB,WAAaoU,KAAK5N,OAAOy2B,qBACG,UAA7B7oB,KAAK5N,OAAO02B,cAA4B9oB,KAAK5N,OAAO4J,uBACvD9O,EAAIy7B,YAAa,GAC+C,IAA5D3oB,KAAK5N,OAAOw2B,wBAAwBl5B,QAAQxC,EAAIuC,QAChDuQ,KAAK5N,OAAOw2B,wBAAwB/8B,KAAKqB,EAAIuC,QAGrDuQ,KAAK+oB,sBAAsBV,EAAIn7B,GAC/B87B,aAAcX,EAAII,GAClBj6B,EAAsB65B,EAAIn7B,EAAI6B,YAyC9B,IAAK,IAxCDk6B,EAAmBjpB,KAAKpJ,eAAeE,WAAW,uBAClDgH,EAAU,SAAUpS,EAAGmB,GACvB,IAAIuM,EAAOlM,EAAImK,MAAM3L,GACrB0N,EAAKuvB,WAAaz7B,EAAIy7B,WACtB,IAAI/C,EAAeqD,EAAiBpD,gBAAgB34B,EAAImK,MAAM3L,GAAGo6B,UAAY/T,WAASmN,MAClFnM,GAAUtjB,MAAU5E,oBAAkBqC,EAAIuC,OAAgC,GAAvBvC,EAAIuC,MAAMoI,YAC7D3K,EAAIpB,UAAYoB,EAAImK,MAAM3L,GAAGo6B,WAAa/T,WAASmX,eACnDnW,EAAa,MAAIoW,EAAO/2B,OAAOmd,WAAa,sBAAwB,qBAExE,IAAImW,EAAKE,EAAaJ,OAAOt4B,EAAImK,MAAM3L,GAAIwB,EAAIvC,KAAMooB,EAAO7lB,EAAIpB,SAAUy8B,GAC1E,GAAIr7B,EAAImK,MAAM3L,GAAGo6B,WAAa/T,WAASqX,OAAQ,CAC3C,GAAIl8B,EAAImK,MAAM3L,GAAGo6B,WAAa/T,WAASmN,MAAQhyB,EAAImK,MAAM3L,GAAGo6B,WAAa/T,WAASsX,cAAe,CAC7FF,EAAO/2B,OAAO+d,QAAQrL,GAAe9V,SAAOy2B,GACxCrsB,KAAMssB,EAAI96B,OAAQwO,EAAKxO,OAAQ6mB,QAAS,EACxCuU,QAAS,EAAG7sB,eAAgBjM,EAAImK,MAAM3L,GAAGyN,eACzC0G,YAAaspB,EAAO/2B,OAAOk3B,qBAE/B,IAAIhE,GAAe,EACnB,GAAIp4B,EAAIuC,MAAQ,GAAK05B,EAAOrB,OAAQ,CAChC,IAIIyB,GAJeJ,EAAO/2B,OAAO9F,cAAcC,QAAQZ,OAAS,IAC3Dw9B,EAAO/2B,OAAOyK,gBAAgB3P,EAAIuC,MAAQ,GAAG7D,UAC9Cu9B,EAAO/2B,OAAOyK,gBAAgB3P,EAAIuC,OAAO4H,MAAQ8xB,EAAO/2B,OAAOyK,gBAAgB3P,EAAIuC,MAAQ,GAAG4H,OAEnEsK,OAAO,SAAUvI,GAC5C,OAAOA,EAAKxO,OAAO6I,MAAQvG,EAAImK,MAAM3L,GAAGd,OAAY,MACrD,GACH06B,EAAeiE,EAAYjE,aAAeiE,EAAYjE,aAAeiE,EAAYnD,aAAe,EAEpG,GAAIX,EAAShU,QAAU,GAAKvkB,EAAImK,MAAM3L,GAAGq6B,SAAW,GAAKN,EAASO,QAAU,GAAKV,EAAc,CAC3F6D,EAAOrB,QAAS,EAEhBpC,EADgB,IAAIH,GAAgB4D,EAAOvyB,eAAgBuyB,EAAO/2B,QACnDozB,OAAOC,EAAUv4B,EAAKxB,EAAGg6B,IAG3Cx4B,EAAImK,MAAM3L,GAAG25B,WACdgD,EAAGz0B,YAAY8xB,KAIvByD,EAASnpB,KACJtU,EAAI,EAAGmB,EAAMK,EAAImK,MAAM1L,OAAQD,EAAImB,EAAKnB,IAC7CoS,EAAQpS,GAEZ,IAAI4L,GAASpK,IAAKm7B,EAAIrzB,UAAWgL,KAAK5N,OAAO4C,WAC7C,GAAI9H,EAAItB,YACJoU,KAAK5N,OAAO+d,QAAQtL,GAAc7V,SAAOw5B,EAASlxB,IAC9C0I,KAAK5N,OAAOkL,WAAa0C,KAAK5N,OAAOo3B,iBAAmBxpB,KAAK5N,OAAOq3B,gBAAgB,CACpF,IAAI/D,EAAK2C,EAAGl6B,iBAAiB,2BAA2B,GACpDu3B,GACAA,EAAGpzB,UAAUoE,IAAI,sBAgB7B,GAZIsJ,KAAK5N,OAAO4J,uBACZwsB,EAAQxzB,UAAYgL,KAAK5N,OAAO4C,WAEhCwzB,EAAQxzB,UACRqzB,EAAGn3B,MAAMoE,OAASkzB,EAAQxzB,UAAY,KAEjCgL,KAAK5N,OAAO4C,YAAcqzB,EAAGh6B,cAAc,kBAAoBg6B,EAAGh6B,cAAc,sBACrFg6B,EAAGn3B,MAAMoE,OAAS0K,KAAK5N,OAAO4C,UAAY,MAE1C9H,EAAIiqB,UACJkR,EAAG/1B,UAAUoE,IAAIxJ,EAAIiqB,UAErBnX,KAAK5N,OAAOK,QAAQi3B,aAAe1pB,KAAK5N,OAAOkD,QAAU0K,KAAK5N,OAAOgC,WAAWzI,OAChF,IAASD,EAAI,EAAGA,EAAIsU,KAAK5N,OAAOgC,WAAWzI,OAAQD,IAAK,CAGpD,GAAIsU,KAAK5N,OAAOgC,WAAW1I,GAAW,WAAQ,QAAE,GAAGi+B,eAAgB,CAC/D,IAAIC,EAAcvB,EAAGl6B,iBAAiB,kBACtC,GAAIy7B,EAAYj+B,OAAQ,CACpB,IAAIk+B,EAAmBD,EAAYA,EAAYj+B,OAAS,GACxDmD,YAAU+6B,IAAmB,wBAK7C,OAAOxB,GAEXR,EAAYr9B,UAAU49B,kBAAoB,SAAUl7B,GAChD,IAAK,IAAIqK,EAAK,EAAGiG,EAAKtQ,EAAImK,MAAOE,EAAKiG,EAAG7R,OAAQ4L,IAAM,CACxCiG,EAAGjG,GACT8tB,WAAY,EAErB,OAAOn4B,GAOX26B,EAAYr9B,UAAUu+B,sBAAwB,SAAUV,EAAIn7B,GACxD,IAAI48B,KACAjP,EAAqB,gBAArBA,EAAiD,WAAjDA,EAA6E,gBAC7EkP,KACA78B,EAAItB,WACJm+B,EAAQl+B,KAAK,SAEbqB,EAAI88B,UACJD,EAAQl+B,KAAK,YAEZhB,oBAAkBqC,EAAIuC,SACvBq6B,EAAKjP,GAAiB3tB,EAAIuC,OAE1BvC,EAAI84B,UACJ8D,EAAK9D,QAAU94B,EAAI84B,SAEnB94B,EAAIuG,MACJq2B,EAAKjP,GAAgB3tB,EAAIuG,KAEzBvG,EAAIy7B,aACJmB,EAAKjP,IAAqB,IAEV,IAAhB3tB,EAAIsD,SACJu5B,EAAQl+B,KAAK,UAEjBi+B,EAAKG,MAAQF,EACbv7B,EAAsB65B,EAAIyB,IAEvBjC,KCtLPqC,GAAmC,WAInC,SAASA,EAAkB93B,GACvB4N,KAAK5N,OAASA,EAwFlB,OAtFA83B,EAAkB1/B,UAAU2/B,aAAe,SAAUx/B,EAAM2M,GAGvD,IAAK,IAFD+vB,KACA+C,EAAapqB,KAAK5N,OAAO4J,qBAAuB1E,EAAK8yB,WAAa,EAC7D1+B,EAAI,EAAGmB,EAAMyC,OAAOC,KAAK5E,GAAMgB,OAAQD,EAAImB,EAAKnB,IAAK0+B,IAC1D/C,EAAK37B,GAAKsU,KAAKqqB,YAAY1/B,EAAKe,GAAI0+B,GAExC,OAAO/C,GAEX6C,EAAkB1/B,UAAU8/B,cAAgB,WAExC,IAAI3N,KAOJ,OANI3c,KAAK5N,OAAOq3B,gBAAkBzpB,KAAK5N,OAAOkL,YAC1Cqf,EAAK9wB,KAAKmU,KAAKuqB,gBAAiB,KAAMxY,WAASmX,eAE/ClpB,KAAK5N,OAAOo3B,iBACZ7M,EAAK9wB,KAAKmU,KAAKuqB,gBAAiB,KAAMxY,WAASyY,cAE5C7N,GAEXuN,EAAkB1/B,UAAU6/B,YAAc,SAAU1/B,EAAM8E,EAAO0nB,EAAUvqB,EAAQ69B,EAAKC,GACpF,IAAIxpB,KACJA,EAAQ/H,kBACR+H,EAAQzN,IAAMF,EAAO,YACrB2N,EAAQvW,KAAOA,EACfuW,EAAQzR,MAAQA,EAChByR,EAAQtU,OAASA,EACjBsU,EAAQwpB,OAASA,EACjBxpB,EAAQtV,WAAY,EACpBsV,EAAQypB,UAAYF,EAChBzqB,KAAK5N,OAAOmd,aAC2B,QAAnCvP,KAAK5N,OAAOuK,mBACZuE,EAAQpV,UAAW,EAEqB,aAAnCkU,KAAK5N,OAAOuK,oBAAqCqD,KAAK5N,OAAOuL,cAAgBqC,KAAK5N,OAAOuL,aAAalO,KAC3GyR,EAAQpV,SAAWkU,KAAK5N,OAAOuL,aAAalO,GAAO3D,WAG3DoV,EAAQiW,SAAWA,EACnBjW,EAAQ8oB,WAAWhqB,KAAK5N,OAAOw4B,cAAen7B,EAAQ,GAAM,EAC5DyR,EAAQynB,WAAa3oB,KAAK5N,OAAOw2B,wBAAwBl5B,QAAQD,IAAU,EAC3EuQ,KAAK6qB,qBAAqB3pB,GAC1B,IAAI7J,EAAQ2I,KAAKsqB,gBACbp9B,EAAM,IAAIi4B,GAAIjkB,GAElB,OADAhU,EAAImK,MAAQA,EAAM6G,OAAO8B,KAAK8qB,cAAc5pB,IACrChU,GAEXg9B,EAAkB1/B,UAAUqgC,qBAAuB,SAAU3pB,GACzDlB,KAAK5N,OAAO4M,uBAAuBxP,QAAQ,SAAUqG,GACjDoD,WAASpD,EAAInL,MAAOwO,GAAerD,EAAKqL,EAAQvW,MAAOuW,EAAQ/H,mBAGvE+wB,EAAkB1/B,UAAUsgC,cAAgB,SAAU5pB,GAClD,IAAIC,EAAQnB,KAER+qB,KAIJ,OALc/qB,KAAK5N,OAAO+lB,aAElB3oB,QAAQ,SAAUw7B,EAAOv7B,GAC7B,OAAOs7B,EAAIl/B,KAAKsV,EAAMopB,aAAaS,EAAO9pB,EAAQzN,IAAK5I,oBAAkBmgC,EAAMtoB,eAAY3N,EAAYgd,WAASsX,cAAe,KAAM55B,EAAOyR,EAAQ/H,mBAEjJ4xB,GAEXb,EAAkB1/B,UAAU+/B,aAAe,SAAU3/B,EAAQqgC,EAAOnF,EAAUrU,EAASyZ,EAAQ/xB,GAC3F,IAAIgyB,GACA36B,QAAW5F,EAAO4F,QAClB46B,YAAevgC,oBAAkBD,EAAOF,OAASE,EAAOqD,UACxDo9B,YAAexgC,oBAAkBD,EAAOqD,UACxCq9B,MAASL,EACTrgC,OAAUA,EACVk7B,SAAaj7B,oBAAkBi7B,GAAuB/T,WAASmN,KAApB4G,EAC3CrU,QAAWA,EACX/O,SAAY9X,EAAO8X,SACnBrJ,aAAgBzO,EAAOwY,iBAAmBxY,EAAOwY,kBACjDjK,eAAkBvO,EAAOwY,iBAAmBxY,EAAOwY,mBAAqB/S,WAASzF,EAAOF,MAAOyO,IAKnG,OAHIgyB,EAAIC,YAAkC,aAApBD,EAAIvgC,OAAOmJ,QAC7Bo3B,EAAI17B,MAAQy7B,GAET,IAAI9F,GAAK+F,IAEpBjB,EAAkB1/B,UAAU+gC,YAAc,SAAUC,GAChD,IAAIrqB,EAAQnB,KAKZ,OAJAwrB,EAAMh8B,QAAQ,SAAUtC,GACpBiU,EAAM0pB,qBAAqB39B,GAC3BA,EAAImK,MAAQ8J,EAAM2pB,cAAc59B,KAE7Bs+B,GAEJtB,KCvGPuB,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAuBxCG,GAAuC,WAIvC,SAASA,EAAsB75B,GAC3B4N,KAAK5N,OAASA,EAiIlB,OA/HA65B,EAAsBzhC,UAAU01B,QAAU,WACtC,IAAI/e,EAAQnB,KACRqnB,KAUJ,OATArnB,KAAK5N,OAAOgC,WAAWlB,QAAQ1D,QAAQ,SAAUtC,GAC7C,IAAIX,EAAUW,EAAIX,QAAQoV,OAAO,SAAU/W,GACvC,QAASA,EAAO++B,gBAAkB/+B,EAAOshC,qBAAuBthC,EAAOuhC,uBAChEhrB,EAAMirB,eAAexhC,KAE5B2B,EAAQZ,QACR07B,EAAKx7B,MAAOU,QAASA,MAGtB86B,GAEX4E,EAAsBzhC,UAAU4hC,eAAiB,SAAUxhC,GACvD,YAAiCmK,IAA1BnK,EAAO++B,gBAElBsC,EAAsBzhC,UAAU2tB,WAAa,SAAUkU,EAAOC,GAC1D,IAAI//B,KAQJ,OAPIyT,KAAK5N,OAAOmP,eACZvB,KAAK5N,OAAO9F,cAAcC,QAAQiD,QAAQ,SAAU/C,GAAS,OAAOF,EAAQV,KAAK,IAAIoE,WAErF+P,KAAK5N,OAAOq3B,iBAAmB5+B,oBAAkBmV,KAAK5N,OAAOkL,YAAc0C,KAAK5N,OAAOo3B,kBACvFj9B,EAAQV,KAAK,IAAIoE,QAErB1D,EAAQV,KAAK0gC,MAAMhgC,EAASyT,KAAK5N,OAAO+lB,cACjCttB,oBAAkBwhC,GAAS9/B,EAAUA,EAAQ2G,MAAMm5B,EAAOC,IAErEL,EAAsBzhC,UAAU2/B,aAAe,SAAUqB,EAAOl0B,EAAM+0B,EAAOC,GACzE,IAAInrB,EAAQnB,KACZ,GAA2C,IAAvCA,KAAK5N,OAAOo6B,gBAAgB7gC,OAC5B,SAEJ,IAAIhB,EAAOqV,KAAKysB,iBAAiBjB,EAAOl0B,GACpC+vB,KAIJ,OAHArnB,KAAKkgB,UAAU1wB,QAAQ,SAAUtC,EAAKuC,GAClC43B,EAAKx7B,KAAKsV,EAAMurB,gBAAgBx/B,EAAKvC,EAAK8E,GAAQ6H,EAAOA,EAAKq1B,WAAQ53B,EAAWs3B,EAAOC,MAErFjF,GAEX4E,EAAsBzhC,UAAUkiC,gBAAkB,SAAUE,EAAYjiC,EAAMkiC,EAAKR,EAAOC,GACtF,IAAInrB,EAAQnB,KACR+qB,KACA+B,EAAU9sB,KAAK+sB,iBAAiBF,GAChCG,GAAqBniC,oBAAkBmV,KAAK5N,OAAOkL,WACnD2vB,EAAejtB,KAAK5N,OAAO9F,cAAcC,QAAQZ,QAAUqU,KAAK5N,OAAOq3B,iBACtE5+B,oBAAkBmV,KAAK5N,OAAOkL,WAAa,EAAI,GAChD0C,KAAK5N,OAAOo3B,kBACZyD,IACAH,GAAW,oBAEf9sB,KAAKmY,WAAWkU,EAAOC,GAAK98B,QAAQ,SAAU/C,EAAOgD,GAAS,OAAOs7B,EAAIl/B,KAAKsV,EAAM+rB,iBAAiBzgC,EAAOmgC,EAAYn9B,GAASw9B,EAAe9rB,EAAMgsB,cAClJ19B,EAAQ0R,EAAM/O,OAAO9F,cAAcC,QAAQZ,OAASomB,WAASqb,OAASrb,WAASsb,mBAAoBP,EAAQr9B,GAAQu9B,MACvH,IAAI9/B,EAAM,IAAIi4B,IAAMx6B,KAAMA,EAAMoE,YAAck7B,MAAO,kBAIrD,OAHA/8B,EAAImK,MAAQ0zB,EACZ79B,EAAIuG,IAAMF,EAAO,YACjBrG,EAAIsD,QAAUu6B,EAAIxwB,KAAK,SAAUnB,GAAQ,OAAOA,EAAKgyB,YAAchyB,EAAK5I,UACjEtD,GAEX++B,EAAsBzhC,UAAU0iC,iBAAmB,SAAUtiC,EAAQgiC,EAAY9G,EAAUl5B,EAAQogC,GAE/F,IAAIM,EAAUV,EAAWrgC,QAAQoV,OAAO,SAAU4rB,GAAW,OAAOA,EAAQjX,aAAe1rB,EAAOF,QAAU,GACxGqoB,GAAU7hB,OAAWyR,UAAa/X,EAAO+X,YACzC/V,IACAmmB,EAAMkX,MAAQr9B,GAEd/B,oBAAkB+B,IAAWogC,IAC7Bja,EAAMkX,MAAQ,yBAElB,IAAIkB,GACA36B,QAAW5F,EAAO4F,QAClB46B,YAAevgC,oBAAkByiC,GACjCjC,WAAciC,IAAYziC,oBAAkByiC,EAAQ3D,gBAC7C2D,EAAQpB,qBAAuBoB,EAAQnB,sBAC9CvhC,OAAU0iC,MACVv+B,WAAcgkB,EACd+S,SAAYA,GAEhB,OAAO,IAAIV,GAAK+F,IAEpBc,EAAsBzhC,UAAUiiC,iBAAmB,SAAU9hC,EAAM2M,GAC/D,IAAI6J,EAAQnB,KACRgrB,KAEAwC,KASJ,OAVkBxtB,KAAKkgB,UAGX1wB,QAAQ,SAAUtC,GAC1BsgC,KACAtgC,EAAIX,QAAQiD,QAAQ,SAAU5E,GAC1B4iC,EAASrsB,EAAMssB,YAAY7iC,EAAS0M,GAAQA,EAAKlD,WAAckD,EAAO3M,EAAM6iC,KAEhFxC,EAAMn/B,KAAK2hC,KAERxC,GAEXiB,EAAsBzhC,UAAUuiC,iBAAmB,SAAUpiC,GACzD,OAAOqV,KAAK5N,OAAO9F,cAAcC,QAAQkwB,IAAI,WAAc,MAAO,qBAEtEwP,EAAsBzhC,UAAUijC,YAAc,SAAU7iC,EAAQD,EAAM6iC,GAClE,IAAIrsB,EAAQnB,KACR0tB,EAAQ9iC,EAAOmJ,KACf45B,KACAxpB,EAAWvZ,EAAOsZ,gBAAwC,SAAU0pB,GAAK,OAAOA,GAChFhP,EAAQj0B,EAmBZ,OAlBM+iC,aAAiBv5B,QACnBu5B,GAAS9iC,EAAOmJ,OAEpB25B,EAAMl+B,QAAQ,SAAUuE,GACpB,IAAIyF,EAAM5O,EAAOF,MAAQ,MAAQqJ,EAAKM,cAClCw5B,EAAOjjC,EAAO0rB,WACdpqB,EAAe,WAAT6H,GAAqB6qB,EAAMxqB,YAAcoF,KAAOolB,EAAMxqB,WAAawqB,EAAMxqB,WAAWoF,GAC1F1F,EAAmBC,EAAM6qB,EAAMxqB,WAAawqB,EAAQj0B,EAAMC,EAAQuW,EAAM/O,QAC5Eo7B,EAAOK,GAAQL,EAAOK,OACtBL,EAAOK,GAAMr0B,GAAOtN,EACpBshC,EAAOK,GAAM95B,GAASlJ,oBAAkBqB,GAAuB,IAAhBiY,EAASjY,GACpD0yB,EAAMl0B,QACN8iC,EAAOK,GAAMnjC,MAAQk0B,EAAMl0B,MAC3B8iC,EAAOK,GAAMr0B,IAAMolB,EAAMplB,OAGjCm0B,EAAO12B,OAASrM,EAAOsZ,eACvBtZ,EAAO6iC,YAAYE,GACZH,GAEXvB,EAAsBzhC,UAAU2iC,YAAc,WAC1C,OAAOpb,WAAS+b,SAEb7B,KAGP8B,GAA4C,SAAUC,GAEtD,SAASD,IACL,OAAkB,OAAXC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAY/D,OAdAyrB,GAAUsC,EAA4BC,GAItCD,EAA2BvjC,UAAU4hC,eAAiB,SAAUxhC,GAC5D,YAAsCmK,IAA/BnK,EAAOshC,qBAElB6B,EAA2BvjC,UAAUuiC,iBAAmB,SAAUJ,GAE9D,YADc,IAAVA,IAAoBA,EAAQ3sB,KAAK5N,OAAO9F,cAAcC,QAAQZ,QAC3DqU,KAAK5N,OAAO9F,cAAcC,QAAQkwB,IAAI,SAAUwR,EAAGC,GAAQ,OAAOA,GAAQvB,EAAQ,EAAI,GAAK,qBAEtGoB,EAA2BvjC,UAAU2iC,YAAc,WAC/C,OAAOpb,WAASoc,cAEbJ,GACT9B,IAEEmC,GAA8C,SAAUJ,GAExD,SAASI,IACL,OAAkB,OAAXJ,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAkB/D,OApBAyrB,GAAU2C,EAA8BJ,GAIxCI,EAA6B5jC,UAAU4hC,eAAiB,SAAUxhC,GAC9D,YAAuCmK,IAAhCnK,EAAOuhC,sBAElBiC,EAA6B5jC,UAAU01B,QAAU,WAE7C,OAAQ8N,EAAOxjC,UAAU01B,QAAQ/sB,KAAK6M,MAAMquB,OAAO,SAAUC,EAAMC,GAE3D,OADAD,EAAK/hC,QAAU+hC,EAAK/hC,QAAQ2R,OAAOqwB,EAAIhiC,SAChC+hC,IAHC/hC,eAMpB6hC,EAA6B5jC,UAAUgkC,QAAU,WAC7C,OAAoD,KAA5CxuB,KAAKkgB,UAAU,GAAG3zB,aAAeZ,QAE7CyiC,EAA6B5jC,UAAU2iC,YAAc,WACjD,OAAOpb,WAAS0c,gBAEbL,GACTnC,ICxMER,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAuBxC4C,GAAqC,SAAUV,GAE/C,SAASU,EAAoBt8B,GACzB,IAAI+O,EAAQ6sB,EAAO76B,KAAK6M,KAAM5N,IAAW4N,KAMzC,OALAmB,EAAMkmB,QACNlmB,EAAM1R,MAAQ,EACd0R,EAAM/O,OAASA,EACf+O,EAAMwtB,gBAAkB,IAAIZ,GAA2B37B,GACvD+O,EAAMytB,gBAAkB,IAAIR,GAA6Bh8B,GAClD+O,EAwKX,OAhLAsqB,GAAUiD,EAAqBV,GAU/BU,EAAoBlkC,UAAU2/B,aAAe,SAAUx/B,EAAM2M,GACzD,GAAiD,IAA7C0I,KAAK5N,OAAO9F,cAAcC,QAAQZ,OAClC,OAAOqiC,EAAOxjC,UAAU2/B,aAAah3B,KAAK6M,KAAMrV,EAAM2M,GAE1D0I,KAAKqnB,QACLrnB,KAAKvQ,MAAQuQ,KAAK5N,OAAO4J,qBAAuB1E,EAAK8yB,WAAa,EAClE,IAAK,IAAI1+B,EAAI,EAAGmB,EAAMlC,EAAKgB,OAAQD,EAAImB,EAAKnB,IACxCsU,KAAK6uB,kBAAkB,EAAGlkC,EAAKe,GAAIf,EAAKgiC,MAAOjhC,OAAGqJ,EAAWiL,KAAKqnB,KAAK17B,QAG3E,OADAqU,KAAKvQ,MAAQ,EACNuQ,KAAKqnB,MAEhBqH,EAAoBlkC,UAAUqkC,kBAAoB,SAAUp/B,EAAO9E,EAAMkiC,EAAKiC,EAAUC,EAASrE,GAC7F,IAAIltB,EACAmvB,EAAQE,EACZ,GAAIhiC,oBAAkBF,EAAKqkC,OACvB,GAAInkC,oBAAkBF,EAAKoC,WACvBiT,KAAKqnB,KAAOrnB,KAAKqnB,KAAKnpB,OAAO8B,KAAKivB,iBAAiBtkC,EAAM8E,EAAOq/B,EAAU9uB,KAAKqnB,KAAK17B,cAGpF,IAAK,IAAIwB,EAAI,EAAGN,EAAMlC,EAAKgB,OAAQwB,EAAIN,EAAKM,IACxC6S,KAAK6uB,kBAAkBp/B,EAAO9E,EAAKwC,GAAIxC,EAAKgiC,MAAOmC,EAAUr/B,EAAOuQ,KAAKqnB,KAAK17B,aAStF,GAJAqU,KAAKqnB,KAAOrnB,KAAKqnB,KAAKnpB,OAAO8B,KAAKkvB,mBAAmBvkC,EAAM8E,EAAOq/B,EAAUC,EAASrE,IACjF//B,EAAKqkC,OAASrkC,EAAKqkC,MAAMrjC,QACzBqU,KAAK6uB,kBAAkBp/B,EAAQ,EAAG9E,EAAKqkC,MAAOrkC,EAAKqkC,MAAMrC,MAAOmC,EAAUr/B,EAAQ,EAAGuQ,KAAKqnB,KAAK17B,QAE/FqU,KAAK5N,OAAOgC,WAAWzI,OAAQ,CAC/B,IAAIwjC,EAASnvB,KAAKqnB,KAAK17B,QACtB6R,EAAKwC,KAAKqnB,MAAMx7B,KAAK0gC,MAAM/uB,EAAIwC,KAAK2uB,gBAAgBxE,aAAax/B,GAAQgiC,MAAOA,KACjF,IAAK,IAAIjhC,EAAIyjC,EAAS,EAAGzjC,GAAK,EAAGA,IAC7B,GAAIsU,KAAKqnB,KAAK37B,GAAGK,aACbiU,KAAKqnB,KAAK37B,GAAG0jC,gBAAkBpvB,KAAKqnB,KAAK17B,OAASwjC,OAEjD,IAAKnvB,KAAKqnB,KAAK37B,GAAGK,eAAiBiU,KAAKqnB,KAAK37B,GAAGE,UACjD,QAMpB8iC,EAAoBlkC,UAAU6kC,mBAAqB,SAAU3kC,EAAOkC,EAAQjC,GACxE,IAAIwW,EAAQnB,KACR3I,KACAi4B,KACA1kC,EAASoV,KAAK5N,OAAO6M,iBAAiBvU,GACtC6kC,EAAUvvB,KAAK5N,OAAOs1B,yBACtB1nB,KAAK5N,OAAOs0B,6BACZ97B,EAASoV,KAAK5N,OAAO7F,QAAQoV,OAAO,SAAU3R,GAAK,OAAOA,EAAEtF,QAAUA,IAAU,IAEpF,IAAI8kC,EAAaxvB,KAAK5N,OAAO9F,cAAcC,QAAQZ,OAC/C+Q,EAAOsD,KAAK5N,OAChB,IAAK4N,KAAK5N,OAAOs0B,6BAA2D,IAA7B6I,EAAQ7/B,QAAQ9C,GAAgB,CAC3E,IAAK,IAAIlB,EAAI,EAAGA,EAAIkB,EAAQlB,IACxB2L,EAAMxL,KAAKmU,KAAKyvB,sBAEpBp4B,EAAMxL,KAAKmU,KAAKuqB,gBAAiB,KAAMxY,WAAS2d,SAMpD,GAJA9iC,EAASoT,KAAK5N,OAAOs0B,2BAA6B,EAC7C1mB,KAAK5N,OAAOu1B,oBAAoBh8B,OAAS6jC,GAAc9yB,EAAK+sB,gBAAkB/sB,EAAKY,UAAY,EAAI,GAChG1Q,GAAUoT,KAAK5N,OAAOu1B,oBAAoBh8B,QAAU,EAAI,GAE5DqU,KAAK5N,OAAOgC,WAAWzI,SAAWqU,KAAK4uB,gBAAgBJ,UAAW,CAClE,IAAImB,EAAe3vB,KAAK4uB,gBAAgBzE,aAAax/B,GAAM,GAC3DqE,SAAOrE,EAAMglC,EAAahlC,MAC1B,IAAIilC,EAAW,EACfD,EAAat4B,MAAMkD,KAAK,SAAUnB,EAAM3J,GAA2B,OAAlBmgC,EAAWngC,EAAc2J,EAAK5I,SAAW4I,EAAKgyB,aAC/FkE,EAAWK,EAAat4B,MAAMnE,MAAM08B,GAAUjuB,OAAO,SAAUvI,GAAQ,OAAOA,EAAK5I,UAC/Em/B,EAAan/B,SAAW8+B,EAAS,GAAG1kC,OAAOF,QAAUsV,KAAK5N,OAAOu1B,oBAAoB,GAAGj9B,QACxF4kC,EAAWA,EAASp8B,MAAM,IAEiB,IAA3C8M,KAAK5N,OAAOu1B,oBAAoBh8B,SAChC2jC,MAEJ1iC,GAAkB0iC,EAAS3jC,OAE/B,IACIkkC,GAAQ,EAeZ,OAhBa7vB,KAAK5N,OAAOs0B,2BAAwC1mB,KAAK5N,OAAO+lB,cAAtBvtB,IAElD4E,QAAQ,SAAUqG,EAAKpG,GACxB,IAAIqgC,EAAUD,IAAsC,IAA7BN,EAAQ7/B,QAAQ9C,GACnCkjC,IACAD,GAAQ,GAEZ,IAAI/J,GAAY3kB,EAAM/O,OAAOs0B,4BAA8BoJ,EACvD/d,WAASge,aAAehe,WAASie,kBACrCpjC,EAASuU,EAAM/O,OAAOs0B,4BAA8BZ,IAAa/T,WAASge,aAAenjC,EAAS4iC,EAAa5iC,EAC3G8P,EAAK8sB,iBACL58B,IAEJyK,EAAMxL,KAAKsV,EAAMopB,aAAa3/B,EAAQ,KAAMk7B,EAAUl5B,MAE1DyK,EAAMxL,KAAK0gC,MAAMl1B,EAAOi4B,GACjBj4B,GAEXq3B,EAAoBlkC,UAAU0kC,mBAAqB,SAAUvkC,EAAMiC,EAAQqjC,EAAUC,EAASxF,GAC1F,IAAIxpB,KAGArL,EAAMmK,KAAK5N,OAAO6M,iBAAiBtU,EAAKD,OAC5CwW,EAAQvW,KAAOqE,YAAWrE,GACtBkL,IACAqL,EAAQvW,KAAKD,MAAQC,EAAKD,OAE9BwW,EAAQtV,WAAY,EACpBsV,EAAQpV,UAAW,EACnBoV,EAAQypB,UAAYsF,EACpB/uB,EAAQivB,SAAWD,EACnBhvB,EAAQwpB,OAASA,EACjBxpB,EAAQnV,cAAe,EACvBmV,EAAQ9U,SAAYvB,oBAAkBF,EAAKqkC,MAAa,SAAkCrkC,EAAKqkC,MAAMrjC,OAAxChB,EAAKqkC,MAAa,QAAErjC,OACjFuV,EAAQzN,IAAMF,EAAO,YACrB,IAAIrG,EAAM,IAAIi4B,GAAIjkB,GAIlB,OAHAhU,EAAIN,OAASA,EACboT,KAAK4L,kBAAkB1e,GACvBA,EAAImK,MAAQ2I,KAAKqvB,mBAAmB1kC,EAAKD,MAAOkC,EAAQM,EAAIvC,MACrDuC,GAEXwhC,EAAoBlkC,UAAUohB,kBAAoB,SAAU1e,GACxD,IAAIvC,EAAOuC,EAAIvC,KACXkL,EAAMmK,KAAK5N,OAAO6M,iBAAiBtU,EAAKD,OAC5C,GAAImL,GAAOA,EAAIuN,iBAAmBvN,EAAIuN,kBAAmB,CACrD,IAAIgtB,EAAWvlC,oBAAkBF,EAAK6O,KAAO,GAAK3D,EAAIpL,cAAcoL,EAAI1F,gBAAiB+I,GAAerD,KAASlL,EAAK6O,KAAK,GAAI3D,GAC/HoD,WAAS,aAAcm3B,EAASljC,EAAIvC,QAG5C+jC,EAAoBlkC,UAAUykC,iBAAmB,SAAUtkC,EAAMiC,EAAQsjC,EAASxF,GAG9E,IAAK,IAFDrD,KACAkI,EAAUvvB,KAAK5N,OAAOs1B,yBACjBh8B,EAAI,EAAGmB,EAAMlC,EAAKgB,OAAQD,EAAImB,EAAKnB,IAAKg/B,IAAU,CACvDrD,EAAK37B,GAAKsU,KAAKqqB,YAAY1/B,EAAKe,GAAIsU,KAAKvQ,MAAO/D,OAAIqJ,EAAY,kBAAmBnI,EAAQsjC,EAASxF,GACpG,IAAK,IAAIv9B,EAAI,EAAGA,EAAIP,EAAQO,IACpB6S,KAAK5N,OAAOs0B,6BAA2D,IAA7B6I,EAAQ7/B,QAAQ9C,IAG9Dy6B,EAAK37B,GAAG2L,MAAMg5B,QAAQrwB,KAAKyvB,sBAE/BzvB,KAAKvQ,QAET,OAAO43B,GAEXqH,EAAoBlkC,UAAUilC,mBAAqB,WAC/C,OAAOzvB,KAAKuqB,gBAAiB,KAAMxY,WAASqb,SAEhDsB,EAAoBlkC,UAAU+gC,YAAc,SAAUC,GAClD,IAAIrqB,EAAQnB,KACRuvB,EAAUvvB,KAAK5N,OAAOs1B,yBAgB1B,OAfA8D,EAAMh8B,QAAQ,SAAUtC,GACpB,GAAIA,EAAItB,UAAW,CACfsB,EAAImK,MAAQ8J,EAAM2pB,cAAc59B,GAChC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAIN,OAAQO,IACxBgU,EAAM/O,OAAOs0B,6BAA+D,IAAjC6I,EAAQ7/B,QAAQxC,EAAIN,SAGnEM,EAAImK,MAAMg5B,QAAQlvB,EAAMsuB,0BAG3B,CACD,IAAIa,EAAOnvB,EAAM+tB,mBAAmBhiC,EAAIvC,KAAMuC,EAAIN,QAClDM,EAAImK,MAAQi5B,EAAKj5B,SAGlBm0B,GAEJkD,GACTxE,IC3LEqG,GAA+B,WAI/B,SAASA,EAAcn+B,EAAQwE,GAC3B,IAAIuK,EAAQnB,KACZA,KAAKqnB,QACLrnB,KAAKwwB,cACLxwB,KAAKywB,eACLzwB,KAAK0wB,qBACL1wB,KAAK2wB,UAAW,EAChB3wB,KAAK4wB,KAAO,SAAUxlC,GAClB+V,EAAM/O,OAAOwd,OAAOihB,IAAqBvmC,OAAQc,EAAEd,OAAQwmC,eAAgB1lC,EAAE0lC,iBAC7E19B,SAAOhI,EAAE0lC,iBAEb9wB,KAAK+wB,YAAc,SAAUz5B,GACzB,IAAI05B,EAAM15B,EACV,OAAO,WAEH,GADA6J,EAAM8vB,YAAYC,QAAQ/vB,EAAMgwB,WAAWne,YAAY,IACnD7R,EAAM/O,OAAOob,YAAjB,CAGA,IAAI6Z,EAAOlmB,EAAMkmB,KAAKn0B,MAAM,GAc5B,GAbwC,IAApCiO,EAAM/O,OAAOg/B,qBACb/J,EAAO/vB,EAAK+5B,SAAWlwB,EAAMqvB,WAAarvB,EAAMsvB,aAEpDtvB,EAAM/O,OAAOwd,OAAOlC,IAAuB2Z,KAAMA,EAAM/vB,KAAM05B,IACzD7vB,EAAMwvB,WACNxvB,EAAM/O,OAAO+d,QAAQmhB,OACjBnwB,EAAM/O,OAAOm/B,eACbpwB,EAAM/O,OAAOwd,OAAO4hB,IAAuBC,KAAM,aAEb,IAApCtwB,EAAM/O,OAAOg/B,oBAA6BjwB,EAAM/O,OAAOm/B,eACvDpwB,EAAM/O,OAAOwd,OAAO4hB,IAAuBC,KAAM,mBAGrDT,EAAK,CACL,IAAIv6B,GAAUu6B,EAAInxB,aAAe,IAAIxL,cAAgB,YACrD8M,EAAM/O,OAAOwd,OAAOnZ,EAAQu6B,GACH,cAArB15B,EAAKuI,cACLvI,EAAKgZ,QAAS,EACdnP,EAAM/O,OAAO+d,QAAQ8M,GAAuB3lB,IAGhD6J,EAAMwvB,UACNxvB,EAAM/O,OAAOosB,iBAIzBxe,KAAK5N,OAASA,EACd4N,KAAKpJ,eAAiBA,EACtBoJ,KAAKixB,YAAcjxB,KAAKpJ,eAAeE,WAAW,eAClDkJ,KAAK0xB,UAAY1xB,KAAK2xB,oBAClB3xB,KAAK5N,OAAOob,cAGXxN,KAAK5N,OAAOs0B,4BAA+B1mB,KAAK5N,OAAO4J,sBACxDgE,KAAK5N,OAAOqb,GAAGmkB,GAAgC5xB,KAAK6xB,WAAY7xB,MAEpEA,KAAK5N,OAAOqb,GAAGqkB,GAAwB9xB,KAAK6H,gBAAiB7H,MAC7DA,KAAK5N,OAAOqb,GAAGskB,GAAiB/xB,KAAKgyB,kBAAmBhyB,OAkgB5D,OA7fAuwB,EAAc/lC,UAAUynC,YAAc,WAClC,IAAIv1B,EAAOsD,KAAK5N,OACZwG,EAAMoH,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,kBACpDuhC,EAAWlyB,KAAK5N,OAAOqC,cAAc,OACrC9D,UAAW,cAEfqP,KAAKixB,YAAYkB,WAAWD,GAAYE,MAAM,IAC9Cx5B,EAAIhF,YAAYs+B,GAChBlyB,KAAKqyB,SAASz5B,GACd8D,EAAKjK,QAAQmB,YAAYgF,IAK7B23B,EAAc/lC,UAAU8nC,YAAc,WAClC,IAAI3hB,EAAa3Q,KAAKmxB,WAClBoB,EAAe5hB,EAAWtiB,cAAc,mBACxCmkC,EAAe7hB,EAAWtiB,cAAc,oBACxC2R,KAAK5N,OAAO4J,sBAAyBnR,oBAAkB0nC,IAAkB1nC,oBAAkB2nC,KAC3Fp/B,SAAOm/B,GACPn/B,SAAOo/B,IAEX7hB,EAAW/c,YAAYoM,KAAKyyB,mBAAmB,mBAC/CzyB,KAAK0yB,SAAS/hB,EAAWtiB,cAAc,aACvC2R,KAAKixB,YAAYkB,WAAWnyB,KAAK2yB,YAC7BC,gBAAwD,aAAvC5yB,KAAK5N,OAAOygC,kBAAkB9+B,OAEnDiM,KAAK8yB,wBACD9yB,KAAK5N,OAAO2gC,YACZ/yB,KAAK5N,OAAO4gC,mBAAmB1gC,UAAUoE,IAAI,oBAQrD65B,EAAc/lC,UAAUioC,mBAAqB,SAAUpgC,GACnD,IAAI6/B,EAAWlyB,KAAKmxB,WAAWne,WAC3BhT,KAAK2yB,YACLv/B,SAAO4M,KAAK2yB,YAEhB,IAAI19B,EAAQ+K,KAAK5N,OAAOqC,cAAc,SAClC9D,UAAW,UAAWoiB,OAClBkgB,YAAa,SAAUlL,KAAM,OAC7B11B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAKA,KAOrC,OAJA2N,KAAKkzB,YAAYlzB,KAAK5N,OAAOK,QAAQpE,cAAc,iBAAiBA,cAAc,YAAYwN,WAAU,IACxG5G,EAAMrB,YAAYoM,KAAKmzB,eACvBl+B,EAAMrB,YAAYoM,KAAK5N,OAAOqC,cAAc,UAC5Cy9B,EAASt+B,YAAYqB,GACdi9B,GAEX3B,EAAc/lC,UAAU4oC,UAAY,SAAUC,GACtCrzB,KAAK5N,OAAOg/B,qBACA,IAARiC,GACArzB,KAAKwwB,WAAaxwB,KAAKqnB,KACvBrnB,KAAK0wB,kBAAoB1wB,KAAKszB,aAG9BtzB,KAAKywB,YAAczwB,KAAKqnB,OASpCkJ,EAAc/lC,UAAU+oC,mBAAqB,SAAUj8B,GACnD,IAAI6J,EAAQnB,UACC,IAAT1I,IAAmBA,MACvB,IAAIoF,EAAOsD,KAAK5N,OAChB,GAAoC,IAAhCsK,EAAK8vB,gBAAgB7gC,OAAzB,CAGA,IAII08B,EACAmL,EAEAC,EAPA75B,EAAa8C,EAAK8vB,gBAClBkH,EAAOxlC,SAASylC,yBAChBC,EAAU1lC,SAASylC,yBACnBpnC,EAAUmQ,EAAKyb,aAGfxc,EAAUe,EAAK00B,mBAEflkC,EAAM,IAAI26B,GAAY7nB,KAAKpJ,eAAgB,KAAMoJ,KAAK5N,QAC1D4N,KAAKszB,eACLtzB,KAAKqnB,QACL,IAAIwM,EAAQ7zB,KAAKmxB,WAAW9iC,cAAc,oBACtCylC,EAAQ9zB,KAAKmxB,WAAW9iC,cAAc,qBACtC0lC,EAAO/zB,KAAKmxB,WAAW9iC,cAAc,cACrC0N,GAAgBW,KACX,UAAW,YAAa,YAAa,WAAY,aAAc,WAC/DnC,KAAK,SAAU9N,GAAS,OAAO6K,EAAKuI,cAAgBpT,MACrDiQ,EAAKzQ,UACLyQ,EAAKjR,UAGb,IAAIuoC,EAAYh0B,KAAK0xB,UAAUvH,aAAavwB,EAAYtC,GACpDzM,oBAAkBmpC,EAAU,GAAG38B,MAAM,MACrCy8B,EAAMzlC,cAAc,SAASC,UAAY,IAE7C,IAAI+kC,EAAMW,EAAU,GAAG38B,MAAM,GAAG5H,MAEhC,GAAIuQ,KAAK5N,OAAO8d,oBAAsBlQ,KAAK5N,OAAO8d,mBAAmBjiB,WAAaqJ,EAAK+5B,SAAU,CAE7F,IAAK,IADD4C,KACKvoC,EAAI,EAAGA,EAAIsU,KAAK5N,OAAO8d,mBAAmBjiB,SAAStC,OAAQD,IAChE,IAAK,IAAIyB,EAAI,EAAGA,EAAI6S,KAAK5N,OAAO8d,mBAAmBjiB,SAASvC,GAAGwoC,UAAUvoC,OAAQwB,IACzEtC,oBAAkBmV,KAAK5N,OAAO8d,mBAAmBjiB,SAASvC,GAAGwoC,UAAU/mC,GAAGgnC,aAC1EF,EAAgBpoC,KAAKmU,KAAK5N,OAAO8d,mBAAmBjiB,SAASvC,IAKzEsU,KAAK5N,OAAOgmB,iBAAiB,YAAa6b,GAE9C,GAAIj0B,KAAK5N,OAAOs0B,2BAA4B,CACxB,IAAInB,GAAgBvlB,KAAKpJ,eAAgBoJ,KAAK5N,QACpDg1B,mBAAmB4M,GAG7Bh0B,KAAKo0B,MADLz4B,GAAW03B,GAAO13B,EACLm4B,EAAMzlC,cAAc,SAGpB2R,KAAK2yB,WAAWtkC,cAAc,SAE/C,IAAI+7B,EAAa,EACbiK,GAAY,EAChB,GAAIt4B,GAAgBW,IAASA,EAAKzQ,OAAON,OAAQ,CAC7C,IACI2oC,EAAazpC,oBAAkByM,EAAKi9B,YAAYC,SAC9C3pC,oBAAkByM,EAAKg9B,WAAqC,EAAxBh9B,EAAKg9B,UAAe,IADCh9B,EAAKi9B,YAAYC,QAAQjjC,IAExF,GAAkB,IAAd+iC,EAAiB,CAIjB,IAAK,IAHDG,EAAY/3B,EAAKg4B,cACjBC,EAAQj4B,EAAKO,aAAaE,SAAW,EACrCoV,EAASjjB,OAAOC,KAAKklC,GAAWhY,IAAI,SAAUjjB,GAAO,OAAOi7B,EAAUj7B,KACjEo7B,EAAI,EAAGA,EAAIriB,EAAO5mB,OAAQipC,IAC/B,GAAIN,EAAY/hB,EAAOqiB,GAAI,CACvB,GAAK/pC,oBAAkByM,EAAKi9B,cAA+C,OAA/Bj9B,EAAKi9B,YAAYtwB,UAKxD,CACD3M,EAAKi9B,YAAYM,aAAqB,IAAND,GAAiB,IAANA,GAAW,EAAG,IAAMA,EAAGA,EAAI,GACtExK,EAAmB,IAANwK,GAAiB,IAANA,EAAU,EAAI,EAAMD,EAC5C,MAPAr9B,EAAKi9B,YAAYM,aAAqB,IAAND,GAAiB,IAANA,GAAW,EAAG,IAAMA,EAAGA,EAAI,GACtExK,EAAmB,IAANwK,GAAiB,IAANA,EAAU,EAAKA,EAAID,EAC3C,MASRL,EAAYt0B,KAAK80B,aAAa/jB,kBAAkBzf,eAChD0O,KAAK80B,aAAa/jB,kBAAkB2Y,cAAiBpyB,EAAKy9B,YAC1DV,GAAY,IAIf3oC,EAAI0+B,EAAb,IAAK,IAAoBv9B,EAAMmnC,EAAUroC,OAAQD,EAAImB,IACjDmT,KAAKqnB,KAAKx7B,KAAKmoC,EAAUtoC,MACrBqQ,GAAgBW,IAASsD,KAAKqnB,KAAK17B,QAAW+Q,EAAKO,aAAqB,UAAKo3B,IAF3B3oC,IAAK,CAK3D,GAAKgR,EAAKsrB,YAYL,CACD,IAAIgN,EAAgBt4B,EAAKjK,QAAQJ,GAAK,cAClCK,EAAWgK,EAAKu4B,gBAALv4B,CAAsB1N,UAASS,MAAO/D,GAAKkO,EAAWlO,IAAKgR,EAAM,cAAes4B,GAC/F,GAA4B,UAAxBtiC,EAAS,GAAG+lB,QAAqB,CACjC,IAAStrB,EAAI,EAAGA,EAAIuF,EAAS/G,OAAQwB,IAAK,CACtC,IAAI+nC,EAA8C,OAAvCxiC,EAASvF,GAAGgoC,SAAS9gC,eAC5B6gC,GAASxiC,EAASvF,GAAGgB,kBAAoBuE,EAASvF,GAAGgB,iBAAiB,MAAMxC,UAC5E08B,EAAK6M,EAAOxiC,EAASvF,GAAKuF,EAASvF,GAAGkB,cAAc,OAGxDqO,EAAKq2B,YAAcrnC,EAAIgR,EAAKq2B,WAC5Ba,EAAQhgC,YAAYy0B,GAGpBqL,EAAK9/B,YAAYy0B,QAIjB3rB,EAAKq2B,YAAcrnC,EAAIgR,EAAKq2B,WAC5B1K,EAAK30B,EAAekgC,EAASlhC,GAK7B+gC,GADApL,EAAK30B,EAAeggC,EAAMhhC,IACX0iC,iBAGvB,IAAIpE,GAAQrmC,KAAMqpC,EAAUtoC,GAAGf,KAAMuC,IAAKumC,GAAwBpL,GAClEroB,KAAK5N,OAAO+d,QAAQklB,GAAqBrE,QAvCzC3I,EAAKn7B,EAAIs4B,OAAOwO,EAAUtoC,GAAIa,GAC1BmQ,EAAKq2B,YAAcrnC,EAAIgR,EAAKq2B,WAC5Ba,EAAQhgC,YAAYy0B,GAGpBqL,EAAK9/B,YAAYy0B,GAEjB2L,EAAUtoC,GAAGI,UACb4Q,EAAKkT,OAAO0lB,GAAwBjN,EAAGhxB,MAAMqF,EAAKpQ,cAAcC,QAAQZ,SAiC5EqoC,EAAUtoC,GAAGE,WACboU,KAAKszB,YAAYznC,KAAKw8B,GAE1BroB,KAAKixB,YAAYkB,WAAWnyB,KAAK2yB,YAAc4C,SAAU74B,EAAKyb,aAAaxsB,OAAOkM,aAEtFmI,KAAKozB,UAAUC,GACX32B,EAAKq2B,cACLS,EAAW73B,EAAUe,EAAKs2B,mBAAmB3kC,cAAsB,IAARglC,EAAY,kBACjE,oBAAoBhlC,cAAc,SAAWqO,EAAK84B,iBAAiBnnC,cAAc,UAC9EC,UAAY,GACrBklC,EAAS5/B,YAAYggC,IAErBl3B,EAAKq2B,YAAsB,IAARM,GAAaU,EAAKziC,eAAiBm1B,OAAO/pB,EAAKpH,UAClEy+B,EAAK7iC,MAAMoE,OAAUy+B,EAAKziC,aAAekiC,EAASliC,aAAgB,MAElEqK,GAAmB,IAAR03B,IACXrzB,KAAKmxB,WAAWne,WAAW9hB,MAAM2f,UAAY,UAE5C2F,eAAcxW,KAAK5N,OAAOqkB,gBAC3Bnf,EAAK+vB,KAAOrnB,KAAKqnB,KAAKn0B,MAAM,IAEhCoE,EAAK+5B,SAA8C,IAAnCrxB,KAAK5N,OAAOg/B,qBAA6B95B,EAAK+5B,SAC9DrxB,KAAKvQ,MAAQ4jC,EACbroC,EAAkB,WACdmW,EAAM/O,OAAOwd,OAAO6lB,GAAyBn+B,GACxC6J,EAAM/O,OAAO4J,uBACd5I,SAAO+N,EAAMizB,OACbjzB,EAAMizB,MAAQjzB,EAAM/O,OAAOqC,cAAc,UAEzCkH,GACAwF,EAAMizB,MAAMxgC,YAAY8/B,GACJ,IAAhBvyB,EAAM1R,OACN0R,EAAMwvB,UAAW,EACjBkD,EAAMxlC,cAAc,SAASuF,YAAYuN,EAAMizB,SAG3CjzB,EAAMizB,MAAMt4B,kBAAoB,GAChCqF,EAAMizB,MAAMxgC,YAAYuN,EAAM/O,OAAOqC,cAAc,MAAMb,YAAYuN,EAAM/O,OAAOqC,cAAc,QAEpG0M,EAAMwvB,UAAW,EACjBmD,EAAMzlC,cAAc,SAASuF,YAAYuN,EAAMizB,OAC/CP,EAAM3iC,MAAMoE,OAAWw+B,EAAkB,aAAIx/B,IAAuB,KACpEw/B,EAAM5iC,MAAM2f,UAAoC,SAAxB1P,EAAM/O,OAAOkD,OAAoB,SAAW,OACpEu+B,EAAM3iC,MAAMwkC,iBAAmB,SAI/Bh5B,EAAKsrB,aACL2N,uBAAqBj5B,EAAKjK,QAAQJ,GAAK,cAAe,cAAeqK,GAEzEyE,EAAMy0B,cAAcz0B,EAAMizB,MAAOV,EAAMp8B,IAEvCqE,GAAmB,IAAR03B,GACXlyB,EAAMoyB,mBAAmBvkC,YAAWsI,IAExCo8B,EAAO,MACR1zB,KAAK+wB,YAAY/hC,YAAWsI,OAEnCi5B,EAAc/lC,UAAUorC,cAAgB,SAAUxB,EAAOV,EAAMp8B,GAC3D88B,EAAMxgC,YAAY8/B,GAClB1zB,KAAK2yB,WAAW/+B,YAAYwgC,IAMhC7D,EAAc/lC,UAAU2mC,SAAW,WAC/B,OAAOnxB,KAAK80B,cAMhBvE,EAAc/lC,UAAU6nC,SAAW,SAAUwD,GACzC71B,KAAK80B,aAAee,GAMxBtF,EAAc/lC,UAAUmoC,SAAW,WAC/B,OAAO3yB,KAAK81B,cAMhBvF,EAAc/lC,UAAUkoC,SAAW,SAAUz9B,GACzC+K,KAAK81B,aAAe7gC,GAMxBs7B,EAAc/lC,UAAUurC,QAAU,WAC9B,OAAO/1B,KAAK5N,OAAOg/B,mBAAqBpxB,KAAKwwB,WAAaxwB,KAAKqnB,MAMnEkJ,EAAc/lC,UAAUwrC,eAAiB,WACrC,OAAOh2B,KAAKywB,aAMhBF,EAAc/lC,UAAUyrC,eAAiB,WACrC,OAAOj2B,KAAK5N,OAAOg/B,mBAAqBpxB,KAAK0wB,kBAAoB1wB,KAAKszB,aAM1E/C,EAAc/lC,UAAU0rC,sBAAwB,WAC5C,OAAOl2B,KAAKszB,aAMhB/C,EAAc/lC,UAAU2rC,eAAiB,SAAUzjC,GAC/CsN,KAAKszB,YAAc5gC,GAMvB69B,EAAc/lC,UAAU2oC,YAAc,WAClC,OAAOnzB,KAAKo2B,UAOhB7F,EAAc/lC,UAAU0oC,YAAc,SAAUmD,GAI5C,OAHKxrC,oBAAkBwrC,KACnBA,EAAShkC,GAAK,WAAagkC,EAAShkC,IAEjC2N,KAAKo2B,SAAWC,GAM3B9F,EAAc/lC,UAAUqnC,WAAa,SAAUtlC,GAC3C,IAAImQ,EAAOsD,KAAK5N,OACZuJ,EAAUe,EAAK00B,mBACf/J,KACJ,GAAI1rB,EAKA,IAAK,IAJD26B,EAAQt2B,KAAKwwB,WACb+F,EAAQv2B,KAAKywB,YACb+F,EAASF,EAAM3qC,OACf8qC,OAAU,EACL/qC,EAAI,EAAGwB,OAAM,EAAQxB,EAAI8qC,EAAQ9qC,IAAK,CAC3C+qC,EAAUF,EAAM7qC,GAAG2L,MAAM1L,OACzBuB,EAAMopC,EAAM5qC,GAAG4jB,QACf,IAAK,IAAIniB,EAAI,EAAGA,EAAIspC,EAAStpC,IACzBD,EAAImK,MAAMxL,KAAK0qC,EAAM7qC,GAAG2L,MAAMlK,IAElCk6B,EAAKx7B,KAAKqB,QAIdm6B,EAAOrnB,KAAK+1B,UAEhB,IACIW,EACJrP,EAAK9sB,KAAK,SAAUsG,GAElB,OAF2BA,EAAEjV,YAC3B8qC,EAAU71B,GACLA,EAAEjV,YACX,IACI+qC,GAAkB,GACjBj6B,EAAKpQ,cAAcC,QAAQZ,QAAU+qC,IACtCC,GAAkB,GAKtB,IAAK,IAHDtO,EAAK3rB,EAAKk6B,cAEVC,EAAc72B,KAAKqnB,KAAK1lB,OAAO,SAAUzU,GAAO,OAAQA,EAAI4P,cACvD9M,EAAI,EAAG8mC,EAAOvqC,EAAQZ,OAAQqE,EAAI8mC,EAAM9mC,IAAK,CAClD,IAAIpF,EAAS2B,EAAQyD,GACjBqjC,EAAMrzB,KAAK5N,OAAO2kC,yBAAyBnsC,EAAO6I,KAClDujC,GAAgC,IAAnBpsC,EAAO4F,QAAmB,GAAK,OAChD,IAAa,IAAT6iC,GAAcqD,GAAWrD,EAAMqD,EAAQr/B,MAAM1L,OAC7C,GAAIgQ,EACA,GAAI03B,EAAM13B,EACN9M,oBAAkBmR,KAAKmzB,cAAcvhB,WAAWyhB,IAAQliC,QAAW6lC,IACnEH,EAAc72B,KAAKwwB,eAElB,CACD,IAAIyG,EAASv6B,EAAKw6B,aAAa7oC,cAAc,qBAAqBA,cAAc,YAChFglC,GAAY13B,EACZ9M,oBAAkBooC,EAAOrlB,WAAWyhB,IAAQliC,QAAW6lC,IACvD3O,EAAK3rB,EAAKy6B,qBACVN,EAAc72B,KAAKywB,iBAInB/zB,EAAK8sB,iBACL6J,IAEJxkC,oBAAkBmR,KAAKmzB,cAAcvhB,WAAWyhB,IAAQliC,QAAW6lC,IAC/Dt6B,EAAK8sB,iBACL6J,IAIZA,EAAM32B,EAAK06B,WAAa/D,EAAM,EAAIA,EAC7BsD,GACD32B,KAAKq3B,eAAehP,EAAIgL,EAAK2D,EAAYH,IAExC72B,KAAK5N,OAAOklC,kBAAoB1sC,EAAO2sC,aACxCv3B,KAAK5N,OAAOolC,mBAAmB5sC,GAEnCoV,KAAK5N,OAAOklC,kBAAmB,EAE/BX,EACA32B,KAAKuzB,oBAAqB1zB,YAAa,YAGlCG,KAAK5N,OAAOg/B,oBAIbpxB,KAAK5N,OAAOwd,OAAO6nB,IAAyBpQ,KAAMrnB,KAAKwwB,WAAYl5B,MAAQ+5B,UAAU,EAAMhK,KAAMrnB,KAAKwwB,cACtGxwB,KAAK5N,OAAOwd,OAAO6nB,IAAyBpQ,KAAMrnB,KAAKywB,YAAan5B,MAAQ+5B,UAAU,EAAOhK,KAAMrnB,KAAKywB,gBAJxGzwB,KAAK5N,OAAOwd,OAAO6nB,IAAyBpQ,KAAMwP,EAAav/B,WAW3Ei5B,EAAc/lC,UAAU6sC,eAAiB,SAAUhP,EAAIgL,EAAK2D,EAAY3P,GACpE/3B,OAAOC,KAAK84B,GAAI74B,QAAQ,SAAU9D,GAC1B28B,EAAG38B,GAAGyC,iBAAiB,gBAAgBxC,SACvCkD,oBAAkBw5B,EAAG38B,GAAGyC,iBAAiB,gBAAgBklC,IAAQliC,QAAW6lC,IACxE3O,EAAG38B,GAAGyC,iBAAiB,gBAAgBklC,GAAK/gC,UAAUC,SAAS,WAC/DwG,eAAasvB,EAAG38B,GAAGyC,iBAAiB,gBAAgBklC,KAAQ,WAEhEhM,EAAK37B,GAAG2L,MAAMg8B,GAAK7iC,QAAyB,KAAfwmC,MAIzCzG,EAAc/lC,UAAUqd,gBAAkB,WACtC,GAAI7H,KAAKmzB,cAAe,CACpB,IAAIkD,EAAWr2B,KAAK5N,OAAOK,QAAQpE,cAAc,iBAAiBA,cAAc,YAAYwN,WAAU,GACtGmE,KAAK2yB,WAAW+E,aAAarB,EAAUr2B,KAAKmzB,eAC5CnzB,KAAKkzB,YAAYmD,KAGzB9F,EAAc/lC,UAAUsoC,sBAAwB,WAC5C,IAAIp2B,EAAOsD,KAAK5N,OACL,IAAIulC,YAAUj7B,EAAKw6B,cAC1BU,OAAQ,eACRhH,KAAM5wB,KAAK4wB,QAGnBL,EAAc/lC,UAAUqtC,QAAU,SAAUjtC,EAAQsC,EAAKuC,GAOrD,OAAO5E,oBAAkBqC,IACrBrC,oBAAkBD,EAAO4F,UACzBtD,EAAImK,MAAM5H,GAAOe,UAAY5F,EAAO4F,SAE5C+/B,EAAc/lC,UAAUmnC,kBAAoB,WACxC,OAAO3xB,KAAK0xB,UAAY1xB,KAAK5N,OAAOmP,cAAgB,IAAImtB,GAAoB1uB,KAAK5N,QAAU,IAAI83B,GAAkBlqB,KAAK5N,SAE1Hm+B,EAAc/lC,UAAUgoB,YAAc,SAAU4hB,GAC5Cp0B,KAAK2yB,WAAW/+B,YAAYwgC,GACxBp0B,KAAK5N,OAAO2gC,aACZ/yB,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,SAASC,UAAY,KAG1EiiC,EAAc/lC,UAAUstC,aAAe,SAAUrkC,EAAKskC,EAAKC,GACnDh4B,KAAK5N,OAAOg/B,oBACZpxB,KAAKg2B,iBAAiBr0B,OAAO,SAAUzU,GAAO,OAAO8qC,GAAYvkC,IAAQvG,EAAIuG,MAAQjE,QAAQ,SAAUtC,GAAO,OAAOA,EAAIy7B,WAAaoP,IAE1I/3B,KAAK+1B,UAAUp0B,OAAO,SAAUzU,GAAO,OAAO8qC,GAAYvkC,IAAQvG,EAAIuG,MACjEjE,QAAQ,SAAUtC,GACnBA,EAAIy7B,WAAaoP,EACjB7qC,EAAImK,MAAM7H,QAAQ,SAAU4J,GAAQ,OAAOA,EAAKuvB,WAAaoP,OAGrExH,EAAc/lC,UAAUytC,cAAgB,SAAUxoC,GAC9C,OAAOuQ,KAAK5N,OAAOwkC,cAAcnnC,IAErC8gC,EAAc/lC,UAAU0tC,mBAAqB,SAAUzoC,GACnD,OAAOA,GAEX8gC,EAAc/lC,UAAU2tC,qBAAuB,SAAU1oC,GACrD,OAAOuQ,KAAK5N,OAAO+kC,qBAAqB1nC,IAE5C8gC,EAAc/lC,UAAUwnC,kBAAoB,SAAU5mC,GACjC,UAAbA,EAAEgtC,QAAsBhtC,EAAEitC,SAC1Br4B,KAAK0xB,UAAY1xB,KAAK2xB,sBAG9BpB,EAAc/lC,UAAU8tC,cAAgB,SAAUjR,GAC9CrnB,KAAKqnB,KAAOA,GAETkJ,KC9jBPgI,GAA8B,WAI9B,SAASA,EAAanmC,EAAQwE,GAC1B,IAAIuK,EAAQnB,KACZA,KAAKw4B,OAAS,EACdx4B,KAAKy4B,UAAY,EACjBz4B,KAAK2tB,OAAS,SAAUviC,GACpB,IAAIsR,EAAOyE,EAAM/O,OACb9H,EAASc,EAAEstC,OAAOpuC,OAClBquC,EAAY3mC,EAAa1H,EAAQ,gBACrC,IAAMoS,EAAK8E,kBAAmB9E,EAAK6E,gBAAoB1W,oBAAkB8tC,IAClEA,EAAUxqC,iBAAiB,qBAAqBxC,OAAS,EAC5D,OAAO,EAEX,IAAIitC,EAAgBz3B,EAAM/O,OAAOqC,cAAc,OAAS9D,UAAW,gDAC/D8B,EAAUnI,EAAOgI,UAAUC,SAAS,gBAAkBjI,EAASquC,EACnE,IAAKlmC,IAAaiK,EAAK8E,iBAAmB/O,EAAQH,UAAUC,SAAS,uBACjE,OAAO,EAEX,IAEIsD,EAFAP,EAAS7C,EAAQnB,aACjBunC,EAAgBpmC,EAAQpE,cAAc,qBAAuBoE,EAAQpE,cAAc,2BAEvF,GAAIwqC,EAAe,CAQf,GANIhjC,EADApD,EAAQpE,cAAc,2BAChBqO,EAAKo8B,mCAAmCD,EAAcE,UAAUxqC,OAAQmO,EAAKnQ,SAG7EmQ,EAAKs8B,eAAeH,EAAcnnB,aAAa,iBAEzDvQ,EAAMvW,OAASiL,EACXsL,EAAMvW,OAAOquC,WACb,OAAO,EAEXL,EAAcnhC,aAAa,eAAgB0J,EAAMvW,OAAO6I,KAE5D,GAAIoC,IAAQhL,oBAAkBgL,EAAIiN,gBAC9B,GAAKjY,oBAAkBgL,EAAIiN,gBAOvB81B,EAActqC,UAAYuH,EAAIiN,mBAPU,CACxC,IACIo2B,EAAWx8B,EAAKy8B,sBAAsBtjC,EAAInL,OAE9CgJ,EAAeklC,EADN/iC,EAAI0O,mBAAJ1O,CAAwB7G,UAASS,MAASypC,GAAYrjC,GAAM6G,EAAM,wBAQ/Ek8B,EAActqC,UAAYuqC,EACtBhjC,EAAI3F,WAAauC,EAAQse,kBAAkBziB,UAMnD,OAJAsqC,EAAc1nC,MAAMX,MAAQkC,EAAQf,YAAc,KAClDknC,EAAc1nC,MAAMoE,OAAS7C,EAAQnB,aAAe,KACpDsnC,EAAc1nC,MAAMkoC,YAAc9jC,EAAS,GAAGuC,WAAa,KAC3D6E,EAAKjK,QAAQmB,YAAYglC,GAClBA,GAEX54B,KAAKq5B,UAAY,SAAUjuC,GACvB,IAAIsR,EAAOyE,EAAM/O,OACjBsK,EAAKjK,QAAQpE,cAAc,gBAAgB6C,MAAMC,QAAU,OAC3DuL,EAAKkT,OAAO0pB,IAA0BhvC,OAAQc,EAAEd,OAAQM,OAAQuW,EAAMvW,OAAQ2uC,MAAOnuC,EAAEmuC,SAE3Fv5B,KAAKw5B,KAAO,SAAUpuC,GAClB,IAAIsR,EAAOyE,EAAM/O,OACb9H,EAASc,EAAEd,OACf,GAAIA,EAAQ,CACR,IAAImvC,EAAUC,UAAWpvC,EAAQ,WAC7BqvC,EAAex4B,EAAM/O,OAAOK,QAAQpE,cAAc,sBACtD,IAAKorC,GAAWA,EAAQ/nB,aAAa,QAAUhV,EAAKjK,QAAQif,aAAa,MAMrE,OALApf,YAAUqnC,GAAe,oBAAqB,sBAC1Cj9B,EAAK8E,kBACL9E,EAAKjK,QAAQpE,cAAc,qBAAqB6C,MAAMC,QAAU,OAChEuL,EAAKjK,QAAQpE,cAAc,uBAAuB6C,MAAMC,QAAU,SAI1EuL,EAAKkT,OAAOgqB,IAAqBtvC,OAAQc,EAAEd,OAAQM,OAAQuW,EAAMvW,OAAQ2uC,MAAOnuC,EAAEmuC,UAG1Fv5B,KAAK65B,SAAW,SAAUzuC,GACtB,IACIklB,EADA5T,EAAOyE,EAAM/O,OAEjBsK,EAAKjK,QAAQpE,cAAc,gBAAgB6C,MAAMC,QAAU,SACrDa,EAAa5G,EAAEd,OAAQ,kBAAoB0H,EAAa5G,EAAEd,OAAQ,qBAClEoS,EAAK8E,iBAAmBxP,EAAa5G,EAAEd,OAAQ,kBAC/Cc,EAAEuiC,OAAOjc,aAAa,iBAAmB1f,EAAa5G,EAAEd,OAAQ,sBAClE8I,SAAOhI,EAAEuiC,QACTrd,GAAS,GAEb5T,EAAKkT,OAAOkqB,IAAyBxvC,OAAQc,EAAEd,OAAQivC,MAAOnuC,EAAEmuC,MAAO3uC,OAAQuW,EAAMvW,OAAQ0lB,OAAQA,KAEzGtQ,KAAK4wB,KAAO,SAAUxlC,GAClB,IAAIsR,EAAOyE,EAAM/O,OACbqB,EAAMrI,EAAE0lC,eAAepf,aAAa,gBACpC+nB,EAAUC,UAAWtuC,EAAEd,OAAQ,WACnC8I,SAAOhI,EAAE0lC,gBACL2I,GAAWA,EAAQ/nB,aAAa,QAAUhV,EAAKjK,QAAQif,aAAa,QAClEhV,EAAK8E,kBAAmB9E,EAAK6E,eAGnC7E,EAAKkT,OAAOmqB,IAAqBzvC,OAAQc,EAAEd,OAAQmJ,IAAKA,KAE5DuM,KAAK5N,OAASA,EACd4N,KAAKpJ,eAAiBA,EACtBoJ,KAAKixB,YAAcjxB,KAAKpJ,eAAeE,WAAW,eAClDkJ,KAAKg6B,aAAeh6B,KAAKpJ,eAAeE,WAAW,gBAC/CkJ,KAAK5N,OAAOob,cAGXxN,KAAK5N,OAAOs0B,4BACb1mB,KAAK5N,OAAOqb,GAAGmkB,GAAgC5xB,KAAK6xB,WAAY7xB,MAEpEA,KAAK5N,OAAOqb,GAAGwsB,GAA8Bj6B,KAAKk6B,cAAel6B,OA8drE,OAzdAu4B,EAAa/tC,UAAUynC,YAAc,WACjC,IAAIr5B,EAAMoH,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,iBACpDuhC,EAAWlyB,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,oBAC7DqP,KAAKm6B,iBAAiBvhC,GACtBA,EAAIhF,YAAYs+B,GAChBlyB,KAAKqyB,SAASz5B,GACdoH,KAAK5N,OAAOK,QAAQmB,YAAYgF,IAKpC2/B,EAAa/tC,UAAU8nC,YAAc,WACjC,IAAI1hB,EAAY5Q,KAAKmxB,WACrBvgB,EAAUhd,YAAYoM,KAAKo6B,qBAC3Bp6B,KAAK0yB,SAAS9hB,EAAUviB,cAAc,aACjC2R,KAAK5N,OAAOg/B,qBACbpxB,KAAKq6B,uBACLr6B,KAAKs6B,wBAETt6B,KAAK5N,OAAOwd,OAAO2qB,IAA0BlT,KAAMrnB,KAAKqnB,KAAM/vB,MAAQ+5B,SAA6C,IAAnCrxB,KAAK5N,OAAOg/B,uBAMhGmH,EAAa/tC,UAAU2mC,SAAW,WAC9B,OAAOnxB,KAAKw6B,aAMhBjC,EAAa/tC,UAAU6nC,SAAW,SAAUwD,GACxC71B,KAAKw6B,YAAc3E,GAMvB0C,EAAa/tC,UAAUmoC,SAAW,WAC9B,OAAO3yB,KAAKy6B,aAMhBlC,EAAa/tC,UAAUkoC,SAAW,SAAUz9B,GACxC+K,KAAKy6B,YAAcxlC,GAMvBsjC,EAAa/tC,UAAU2oC,YAAc,WACjC,OAAOnzB,KAAKo2B,UAOhBmC,EAAa/tC,UAAU0oC,YAAc,SAAUmD,GAC3C,OAAOr2B,KAAKo2B,SAAWC,GAM3BkC,EAAa/tC,UAAUurC,QAAU,WAE7B,OADY/1B,KAAK2yB,WACJ+H,MAAMrT,MAOvBkR,EAAa/tC,UAAU4vC,kBAAoB,WACvC,IAAInlC,EAAQ+K,KAAK26B,cACbzI,EAAWlyB,KAAKmxB,WAAWne,WAE/B,OADAkf,EAASt+B,YAAYqB,GACdi9B,GAKXqG,EAAa/tC,UAAUmwC,YAAc,WACjC,IAAIj+B,EAAOsD,KAAK5N,OACZ4N,KAAK2yB,aAAgBj2B,EAAK00B,oBAC1Bh+B,SAAO4M,KAAK2yB,YAEFj2B,EAAKyb,aAAnB,IACIljB,EAAQ+K,KAAK5N,OAAOqC,cAAc,SAAW9D,UAAW,UAAWoiB,OAASkgB,YAAa,SAAUlL,KAAM,UAEzG6S,GADW56B,KAAKmxB,WAAWne,WACXhT,KAAK66B,uBACrBC,EAAQF,EAAcE,MACtB1G,EAAQp0B,KAAK5N,OAAOqC,cAAc,SAAW9D,UAAWqP,KAAK5N,OAAO2gC,WAAa,GAAK,WAC1F/yB,KAAK+6B,QAAU/6B,KAAK5N,OAAOqC,cAAc,WAAanG,UAAW0R,KAAK5N,OAAOK,QAAQJ,GAAK,gBAAiB1B,UAAW,WAMtH,IAAK,IAHDqqC,EAFA3E,EAAWr2B,KAAK5N,OAAOqC,cAAc,YACrCwmC,EAAUj7B,KAAK5N,OAAOqC,cAAc,MAEpC4yB,EAAOrnB,KAAKqnB,KAAOuT,EAAcvT,KAE5B37B,GADS,IAAIm8B,GAAY7nB,KAAKpJ,eAAgBmb,WAASmpB,OAAQl7B,KAAK5N,QAChE,GAAGvF,EAAMw6B,EAAK17B,OAAQD,EAAImB,EAAKnB,IACxC,IAAK,IAAIyB,EAAI,EAAGguC,EAAQ9T,EAAK37B,GAAG2L,MAAM1L,OAAQwB,EAAIguC,EAAOhuC,IAAK,CAC/Ck6B,EAAK37B,GAAG2L,MAAMlK,GACzB6tC,EAAWh7B,KAAK5N,OAAOqC,cAAc,MACrCwmC,EAAQrnC,YAAYonC,GAa5B,OAVIt+B,EAAK4E,gBAAkB5E,EAAK0E,cAAgB1E,EAAK6E,gBACjDtM,EAAM3C,UAAUoE,IAAI,gBAExBsJ,KAAKo7B,eAAe/E,GACpBjC,EAAMxgC,YAAYqnC,GAClBhmC,EAAMrB,YAAYoM,KAAKkzB,YAAYmD,IACnCphC,EAAMrB,YAAYknC,GAClB7lC,EAAMrB,YAAYwgC,GAClBn/B,EAAMrB,YAAYoM,KAAK+6B,SACvB/6B,KAAKixB,YAAYkB,WAAWl9B,GAASsgC,SAAU74B,EAAKyb,aAAaxsB,OAAOkM,aACjE5C,GAEXsjC,EAAa/tC,UAAUqwC,oBAAsB,WACzC,IAAIn+B,EAAOsD,KAAK5N,OACZ7F,EAAUmQ,EAAKyb,aACf2iB,EAAQ96B,KAAK5N,OAAOqC,cAAc,SAClC4mC,EAAYr7B,KAAK5N,OAAOqC,cAAc,MAAQ9D,UAAW,mBACzD2qC,EAAc,IAAIzT,GAAY7nB,KAAKpJ,eAAgBmb,WAASmpB,OAAQx+B,GACxE4+B,EAAY7oC,QAAU4oC,EACtB,IACIE,EADAlU,KAEJrnB,KAAKw7B,SAAW/8B,GAAmB/B,EAAKnQ,SACxC,IAAK,IAAIb,EAAI,EAAGmB,EAAMmT,KAAKw7B,SAAU9vC,EAAImB,EAAKnB,IAC1C27B,EAAK37B,GAAKsU,KAAKqqB,YAAY3+B,GAC3B27B,EAAK37B,GAAG2L,SAEZgwB,EAAOrnB,KAAKsqB,cAAcjD,GAC1BA,EAAOrnB,KAAKy7B,eAAepU,GAC3B,IAAS37B,EAAI,EAAGmB,EAAMmT,KAAKw7B,SAAU9vC,EAAImB,EAAKnB,IAC1C6vC,EAAYD,EAAY9V,OAAO6B,EAAK37B,GAAIa,GACpCyT,KAAK5N,OAAO4C,WAAaumC,EAAUltC,cAAc,mBACjDktC,EAAUrqC,MAAMoE,OAAS0K,KAAK5N,OAAO4C,UAAY,MAErD8lC,EAAMlnC,YAAY2nC,GAMtB,OAHIT,MAAOA,EACPzT,KAAMA,IAIdkR,EAAa/tC,UAAU4wC,eAAiB,SAAU/E,GAC9C,IACIxgC,EADA8mB,EAAO3c,KAAK5N,OAAO+lB,aAEnBoX,EAAUvvB,KAAK5N,OAAOs1B,yBAE1B,GADA2O,EAAShkC,GAAK2N,KAAK5N,OAAOK,QAAQJ,GAAK,WACnC2N,KAAK5N,OAAOmP,cACZ,IAAK,IAAI7V,EAAI,EAAGmB,EAAMmT,KAAK5N,OAAO9F,cAAcC,QAAQZ,OAAQD,EAAImB,EAAKnB,IACjEsU,KAAK5N,OAAOs0B,6BAAsD,IAAxB6I,EAAQ7/B,QAAQhE,KAG9DmK,EAAMmK,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,mBACpD0lC,EAASziC,YAAYiC,KAGzBmK,KAAK5N,OAAOq3B,gBAAkBzpB,KAAK5N,OAAOkL,aAC1CzH,EAAMmK,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,oBACpD0lC,EAASziC,YAAYiC,IAErBmK,KAAK5N,OAAOo3B,kBACZ3zB,EAAMmK,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,kBACpD0lC,EAASziC,YAAYiC,IAEzB,IAASnK,EAAI,EAAGmB,EAAM8vB,EAAKhxB,OAAQD,EAAImB,EAAKnB,IACxCmK,EAAMmK,KAAK5N,OAAOqC,cAAc,QACR,IAApBkoB,EAAKjxB,GAAG8E,SACR3B,oBAAkBgH,GAAO1E,QAAW,SAExCklC,EAASziC,YAAYiC,GAEzB,OAAOwgC,GAEXkC,EAAa/tC,UAAU8/B,cAAgB,SAAUjD,GAI7C,IAAK,IAFD3qB,EAAOsD,KAAK5N,OACZm9B,EAAUvvB,KAAK5N,OAAOs1B,yBACjBh8B,EAAI,EAAGmB,EAAMw6B,EAAK17B,OAAQD,EAAImB,EAAKnB,IAAK,CAC7C,GAAIgR,EAAK6E,cACL,IAAK,IAAIvR,EAAI,EAAG0rC,EAAQh/B,EAAKpQ,cAAcC,QAAQZ,OAAQqE,EAAI0rC,EAAO1rC,IAC9DgQ,KAAK5N,OAAOs0B,6BAAsD,IAAxB6I,EAAQ7/B,QAAQM,IAG9Dq3B,EAAK37B,GAAG2L,MAAMxL,KAAKmU,KAAKuqB,gBAAiBxY,WAAS4pB,gBAGtDj/B,EAAK+sB,gBAAkB/sB,EAAKY,YAC5B+pB,EAAK37B,GAAG2L,MAAMxL,KAAKmU,KAAKuqB,gBAAiBxY,WAAS6pB,eAElDl/B,EAAK8sB,iBACLnC,EAAK37B,GAAG2L,MAAMxL,KAAKmU,KAAKuqB,gBAAiBxY,WAAS8pB,eAG1D,OAAOxU,GAEXkR,EAAa/tC,UAAUixC,eAAiB,SAAUpU,GAC9C,IACIyT,EAAQ96B,KAAK5N,OAAOojC,kBAAoBx1B,KAAK5N,OAAOojC,iBAAiBnnC,cAAc,SACnFsuB,EAAO3c,KAAK5N,OAAOs0B,2BACnB1mB,KAAK5N,OAAO+lB,WAAWnY,KAAK5N,OAAO0pC,mBAAqB97B,KAAK5N,OAAO7F,QAGxE,GAFAyT,KAAKw4B,OAAS,EACdx4B,KAAKy4B,UAAY,EACbz4B,KAAK5N,OAAO2pC,qBACZ,IAAK,IAAIrwC,EAAI,EAAGA,EAAIixB,EAAKhxB,OAAQD,IAC7BsU,KAAKg8B,kBAAmB,EACxB3U,EAAOrnB,KAAKi8B,YAAYtf,EAAKjxB,GAAI27B,EAAM,EAAS,IAAN37B,GAAS,EAAOA,IAAOixB,EAAKhxB,OAAS,EAAImvC,GAGlFpvC,EAAI,EAAb,IAAK,IAAWmB,EAAM8vB,EAAKhxB,OAAQD,EAAImB,EAAKnB,IACxCsU,KAAKy4B,UAAY,EACjBz4B,KAAKg8B,kBAAmB,EACxB3U,EAAOrnB,KAAKi8B,YAAYtf,EAAKjxB,GAAI27B,EAAM,EAAS,IAAN37B,GAAS,EAAOA,IAAOmB,EAAM,EAAIiuC,GAE/E,OAAOzT,GAEXkR,EAAa/tC,UAAUyxC,YAAc,SAAUtf,EAAM0K,EAAM53B,EAAOysC,EAAYC,EAAYC,EAAWC,GACjG,IAAIC,EAAUF,EAAY,aAAe,GACrCzgC,EAAUqE,KAAK5N,OAAOg/B,mBAC1B,GAAKzU,EAAKpwB,QAwBL,CACD,IAAIklB,EAAUzR,KAAKu8B,WAAW5f,EAAM,GACpC,GAAIlL,EAAS,CACT,IAAI+qB,EAASx8B,KAAKy8B,iBAAiB9f,EAAKpwB,SAAWmwC,WAAW,EAAOC,QAAQ,EAAMjf,IAAK,IACpFkf,EAAuB58B,KAAK68B,wBAAwBlgB,EAAM,KACzDhhB,KAAaqE,KAAK5N,OAAO2pC,uBACrB/7B,KAAKg8B,kBAAoBY,GAA0B58B,KAAKg8B,kBAAqBvqB,EAAUmrB,IACxFjhC,KAAc0gC,IAAcr8B,KAAK5N,OAAO0qC,cAAgB98B,KAAKw4B,OAAS,GAAMgE,EAAgB,YACxFH,GAAc5qB,EAAUzR,KAAKw4B,OAASx4B,KAAK5N,OAAO0qC,gBAAkBN,EAAOG,UACnFtV,EAAK53B,GAAO4H,MAAMxL,KAAK,IAAIu5B,IACvBU,SAAU/T,WAASgrB,cAAenyC,OAAQ+xB,EAC1ClL,QAASzR,KAAKg9B,WAAWvrB,EAAS4qB,EAAWG,EAAO9e,IAAKkf,MAIrE,GAAI58B,KAAK5N,OAAO2pC,uBAAyB/7B,KAAKg8B,iBAC1C,IAAK,IAAItwC,EAAI,EAAGA,EAAIixB,EAAKpwB,QAAQZ,OAAQD,IACrC27B,EAAOrnB,KAAKi8B,YAAYtf,EAAKpwB,QAAQb,GAAI27B,EAAM53B,EAAQ,EAAGysC,EAAkB,IAANxwC,EAASA,IAAOixB,EAAKpwB,QAAQZ,OAAS,GAAMywC,EAAWC,GAGrI,GAAIr8B,KAAKg8B,iBACA,CAAItwC,EAAI,EAAb,IAAK,IAAWmB,EAAM8vB,EAAKpwB,QAAQZ,OAAQD,EAAImB,EAAKnB,IAChD27B,EAAOrnB,KAAKi8B,YAAYtf,EAAKpwB,QAAQb,GAAI27B,EAAM53B,EAAQ,EAAGysC,EAAkB,IAANxwC,EAASA,IAAOmB,EAAM,GAAMuvC,EAAWC,UA7ChH1gC,KAAaqE,KAAK5N,OAAO2pC,sBACtBpf,EAAKsc,aAAej5B,KAAKg8B,mBAAuBrf,EAAKsc,YAAcj5B,KAAKg8B,mBACxErgC,KAAc0gC,IAAcr8B,KAAKw4B,OAASx4B,KAAKy4B,UAAYz4B,KAAK5N,OAAO0qC,eAAiBngB,EAAK0U,aAC3FrxB,KAAK5N,OAAO2pC,sBAAyBpf,EAAKsc,aAAej5B,KAAKg8B,mBAC1Drf,EAAKsc,YAAcj5B,KAAKg8B,mBAC1BK,GAAcr8B,KAAKw4B,OAASx4B,KAAKy4B,WAAaz4B,KAAK5N,OAAO0qC,gBAAkBngB,EAAK0U,YAC/ErxB,KAAK5N,OAAO2pC,sBAAyBpf,EAAKsc,aAAej5B,KAAKg8B,mBAC1Drf,EAAKsc,YAAcj5B,KAAKg8B,qBACtC3U,EAAK53B,GAAO4H,MAAMxL,KAAKmU,KAAKuqB,aAAa5N,EAAM5K,WAASmpB,OAAQl7B,KAAKw7B,SAAW/rC,GAAQysC,EAAa,GAAMC,EAAa,cAAgB,IAAOG,EAAS7sC,EAAOuQ,KAAK5N,OAAO6qC,oBAAoBtgB,EAAKlpB,OAEpMuM,KAAK5N,OAAO2pC,qBACP/7B,KAAKw4B,OAASx4B,KAAKy4B,UAAYz4B,KAAK5N,OAAO0qC,gBAC1CngB,EAAKsc,aAAej5B,KAAKg8B,mBAAuBrf,EAAKsc,YAAcj5B,KAAKg8B,kBAC1Eh8B,KAAKw4B,SAGLx4B,KAAKy4B,YAITz4B,KAAKw4B,SA6Bb,OAAOnR,GAEXkR,EAAa/tC,UAAUqyC,wBAA0B,SAAUhnC,EAAKqnC,GAC5D,GAAIrnC,EAAItJ,QACJ,IAAK,IAAIb,EAAI,EAAGA,EAAImK,EAAItJ,QAAQZ,OAAQD,IACpCwxC,EAAgBl9B,KAAK68B,wBAAwBhnC,EAAItJ,QAAQb,GAAIwxC,QAG5DrnC,EAAIojC,YACTiE,IAEJ,OAAOA,GAEX3E,EAAa/tC,UAAUiyC,iBAAmB,SAAU9f,EAAM6f,GACtD,IAAK,IAAI9wC,EAAI,EAAGA,EAAIixB,EAAKhxB,OAAQD,IACzBixB,EAAKjxB,GAAGa,QACRiwC,EAASx8B,KAAKy8B,iBAAiB9f,EAAKjxB,GAAGa,QAASiwC,IAG5C7f,EAAKjxB,GAAG2lC,WACRmL,EAAOE,WAAY,EACnBF,EAAO9e,OAEX8e,EAAOG,OAASH,EAAOG,SAAWhgB,EAAKjxB,GAAG2lC,UACtCrxB,KAAK5N,OAAO+mC,sBAAsBxc,EAAKjxB,GAAGhB,OAASsV,KAAK5N,OAAO0qC,gBAG3E,OAAON,GAEXjE,EAAa/tC,UAAUwyC,WAAa,SAAUvrB,EAAS4qB,EAAWc,EAAWP,GACzE,IAAIQ,EAASp9B,KAAK5N,OAAO0qC,cAYzB,OAXI98B,KAAK5N,OAAOg/B,oBAAsBpxB,KAAKw4B,OAAS/mB,EAAU2rB,EACtDf,EACA5qB,EAAUA,GAAW2rB,EAASp9B,KAAKw4B,OAAS4E,EAASp9B,KAAKw4B,OAAS,GAAK2E,EAGxE1rB,GAAqBA,GAAW2rB,EAASp9B,KAAKw4B,OAAS4E,EAASD,EAAYn9B,KAAKw4B,OAAS2E,GAGzFn9B,KAAK5N,OAAO2pC,uBACjBtqB,EAAWzR,KAAKg8B,iBAA0CvqB,EAAUmrB,EAAjCA,GAEhCnrB,GAEX8mB,EAAa/tC,UAAU6/B,YAAc,SAAU56B,GAC3C,OAAO,IAAI01B,QAEfoT,EAAa/tC,UAAU+/B,aAAe,SAAU3/B,EAAQk7B,EAAUE,EAASr1B,EAAW0sC,EAAUnE,GAC5F,IAAI/N,GACA36B,QAAW5F,EAAO4F,QAClB46B,YAAc,EACdC,YAAexgC,oBAAkBD,EAAOkY,gBACxCwoB,MAAS,GACT1gC,OAAUA,EACVk7B,SAAYA,EACZE,QAAWA,EACXr1B,UAAaA,EACblB,MAAS4tC,EACTnE,SAAYA,GAKhB,QAHK/N,EAAInF,SAAWmF,EAAInF,QAAU,WACvBmF,EAAInF,QAER,IAAIZ,GAAK+F,IAMpBoN,EAAa/tC,UAAUqnC,WAAa,SAAUtlC,GAQ1C,IAAK,IALDyqC,EACA3D,EAHA32B,EAAOsD,KAAK5N,OAMZuJ,MALUzI,MAAMC,KAAK6M,KAAK+1B,WAKhBr5B,EAAK00B,oBACVphC,EAAI,EAAG8mC,EAAOvqC,EAAQZ,OAAQqE,EAAI8mC,EAAM9mC,IAAK,CAClD,IAAIpF,EAAS2B,EAAQyD,GAGrB,GAFAqjC,EAAM32B,EAAKq6B,yBAAyBnsC,EAAO6I,KAC3CujC,EAAapsC,EAAO4F,QAAU,GAAK,OAC/BmL,EACA,GAAI03B,EAAM13B,EACN9M,oBAAkBmR,KAAKmzB,cAAcx/B,SAAS0/B,IAAQliC,QAAW6lC,QAEhE,CACD,IAAIsG,EAAa5gC,EAAKs2B,mBAAmB3kC,cAAc,oBAAoBA,cAAc,YACzFQ,oBAAkByuC,EAAW3pC,SAAS0/B,EAAM13B,IAAYxK,QAAW6lC,SAInEt6B,EAAK8sB,iBACL6J,IAEJxkC,oBAAkBmR,KAAKmzB,cAAcx/B,SAAS0/B,IAAQliC,QAAW6lC,IAErEh3B,KAAKu9B,cAGbhF,EAAa/tC,UAAU0vC,cAAgB,WACnCl6B,KAAKu9B,aAMThF,EAAa/tC,UAAU+yC,UAAY,WAC/B,IAAI3sB,EAAY5Q,KAAKmxB,WACrBnxB,KAAKm6B,iBAAiBvpB,GACtB,IAAI3b,EAAQ+K,KAAK2yB,WACbh3B,EAAUqE,KAAK5N,OAAOg/B,mBAC1B,GAAIpxB,KAAK2yB,WAAY,CACjBv/B,SAAO4M,KAAK2yB,YACZ19B,EAAMJ,YAAYI,EAAM+d,YACxB/d,EAAMJ,YAAYI,EAAM2c,WAAW,IACnC,IAAIykB,EAAWr2B,KAAK5N,OAAOqC,cAAc,YACrCmmC,EAAgB56B,KAAK66B,sBACzB76B,KAAKqnB,KAAOuT,EAAcvT,KAC1BpyB,EAAM6d,aAAa8nB,EAAcE,MAAO7lC,EAAM+d,YAC9ChT,KAAKo7B,eAAe/E,GACpBphC,EAAM6d,aAAa9S,KAAKkzB,YAAYmD,GAAWphC,EAAM+d,YACrDhT,KAAK0yB,SAASz9B,GACd+K,KAAK41B,cAAc3gC,GACnB+K,KAAK5N,OAAOwd,OAAOkiB,OACnB9xB,KAAKg6B,aAAawD,oBAClBx9B,KAAK5N,OAAOqrC,sBACP9hC,GACDqE,KAAKq6B,uBAGT,IAAK,IADDhT,KAAUn0B,MAAMC,KAAKyd,EAAUziB,iBAAiB,sBAC3CoJ,EAAK,EAAGqF,EAASyqB,EAAM9vB,EAAKqF,EAAOjR,OAAQ4L,IAAM,CACtD,IAAIrK,EAAM0P,EAAOrF,GACbmmC,KAAYxqC,MAAMC,KAAKjG,EAAIiB,iBAAiB,wBAC5CuvC,EAAO/xC,QACP+xC,EAAOA,EAAO/xC,OAAS,GAAG2G,UAAUoE,IAAI,0BAG3CiF,GACDqE,KAAK5N,OAAOwd,OAAO2qB,IAA0BlT,KAAMrnB,KAAKqnB,KAAM/vB,MAAQ+5B,SAA6C,IAAnCrxB,KAAK5N,OAAOg/B,sBAE5FpxB,KAAK5N,OAAOm/B,eAA2D,WAA1CvxB,KAAK5N,OAAOurC,iBAAiBC,UAC1DpnC,EAAK6wB,GAAM,KAIvBkR,EAAa/tC,UAAU2vC,iBAAmB,SAAUvhC,GACnCoH,KAAK5N,OAAO7F,QACDgO,KAAK,SAAU3P,GAAU,OAAQC,oBAAkBD,EAAO2B,WAE9EqM,EAAItG,UAAUoE,IAAI,mBAGlBkC,EAAItG,UAAUc,OAAO,oBAG7BmlC,EAAa/tC,UAAUorC,cAAgB,SAAU3gC,GAC7C+K,KAAKmxB,WAAWne,WAAWpf,YAAYqB,IAE3CsjC,EAAa/tC,UAAU+xC,WAAa,SAAU1mC,EAAK6nB,GAC/C,GAAI7nB,EAAItJ,QACJ,IAAK,IAAIb,EAAI,EAAGmB,EAAMgJ,EAAItJ,QAAQZ,OAAQD,EAAImB,EAAKnB,IAC/CgyB,EAAM1d,KAAKu8B,WAAW1mC,EAAItJ,QAAQb,GAAIgyB,QAItC7nB,EAAIrF,SACJktB,IAGR,OAAOA,GAEX6a,EAAa/tC,UAAU6vC,qBAAuB,WAC1C,IAAI39B,EAAOsD,KAAK5N,OAChB,GAAM4N,KAAK5N,OAAOoP,iBAAoBxB,KAAK5N,OAAOmP,eAAiBvB,KAAK5N,OAAO9F,cAAcuxC,aAI7F,IAAK,IADDC,KAAgB5qC,MAAMC,KAAKuJ,EAAKs2B,mBAAmB7kC,iBAAiB,oBAC/DzC,EAAI,EAAGmB,EAAMixC,EAAWnyC,OAAQD,EAAImB,EAAKnB,IACnC,IAAIqyC,YAAUD,EAAWpyC,IAChCsyC,WAAY,gBACZC,SAAU,EACVtQ,OAAQ3tB,KAAK2tB,OACb0L,UAAWr5B,KAAKq5B,UAChBG,KAAMx5B,KAAKw5B,KACXK,SAAU75B,KAAK65B,SACfqE,MAAO,iBAInB3F,EAAa/tC,UAAU8vC,qBAAuB,WAC1C,IAAI59B,EAAOsD,KAAK5N,OACL,IAAIulC,YAAUj7B,EAAKs2B,oBAC1B4E,OAAQ,eACRhH,KAAM5wB,KAAK4wB,QAGZ2H,KCrlBP4F,GAA8B,WAC9B,SAASA,EAAa/rC,EAAQgsC,GAC1Bp+B,KAAKq+B,UAAYD,EAAQtnC,WAAW,gBACpCkJ,KAAKs+B,UAAYF,EAAQtnC,WAAW,kBACpCkJ,KAAK5N,OAASA,EACd4N,KAAKvN,QAAUuN,KAAK5N,OAAOqC,cAAc,MAAQ9D,UAAW,YAAaoiB,OAASgV,KAAM,WAAYwW,SAAU,QAC9Gv+B,KAAKw+B,UAAYx+B,KAAK5N,OAAOqC,cAAc,SAAW9D,UAAW,gBAAiBoiB,OAAShf,KAAQ,cA2NvG,OArNAoqC,EAAa3zC,UAAUi0C,OAAS,WAC5B,MAAO,IAQXN,EAAa3zC,UAAUyM,OAAS,SAAUrM,EAAQ6B,EAAO9B,GAIrD,OAHKE,oBAAkBD,EAAOqM,UAC1BxK,EAAQuT,KAAKs+B,UAAU/9B,OAAO9T,EAAO7B,EAAOsZ,iBAEzCrZ,oBAAkB4B,GAAS,GAAKA,EAAMoL,YAEjDsmC,EAAa3zC,UAAUk0C,SAAW,SAAUjwC,EAAM2K,EAAMzO,EAAMoE,EAAY4vC,EAAOpW,GAC7E,IAAI/qB,EACA/P,EACJ,GAAI2L,EAAKxO,OAAOqD,SAAU,CACtB,IAAIW,GAAY,SACZgwC,EAAYhhC,MAAoBjT,GAAO6S,KAASA,EAAGrE,IAAkBwlC,EAAOnhC,EAAG5S,OAASwO,EAAKxO,OAAQ4S,IACrGqhC,EAAa7+B,KAAK5N,OAAOK,QAAQJ,GAAK+G,EAAKxO,OAAO6I,IAClDqrC,EAAM,mBAEV,GAAItoB,cAAc+R,EAAQ,CACtB,IAAIwW,EAA4C,UAAlC/+B,KAAK5N,OAAOiE,aAAaC,KAAmB0oC,SAASjwC,EAAgB,MAAG,IAAM,KAC5FtB,EAAS2L,EAAKxO,OAAO0Z,mBAAZlL,CAAgCpK,UAASS,MAASV,EAAWH,EAAS,KAAOgwC,GAAY5+B,KAAK5N,OAAQ,WAAYysC,EAAY7+B,KAAK5N,OAAO0sC,GAAMC,GACzJzuC,OAAOuuC,GAAc,KACiB,UAAlC7+B,KAAK5N,OAAOiE,aAAaC,MACzBq/B,uBAAqBkJ,EAAY,WAAYzlC,EAAKxO,QAAQ,QAI9D6C,EAAS2L,EAAKxO,OAAO0Z,mBAAZlL,CAAgCpK,UAASS,MAASV,EAAWH,EAAS,KAAOgwC,GAAY5+B,KAAK5N,OAAQ,WAAYysC,EAAY7+B,KAAK5N,OAAO0sC,IAOvJ,OALAprC,EAAejF,EAAMhB,GACrBuS,KAAK5N,OAAOwd,OAAO,mBAAqB3hB,SAAUR,IAClDA,EAAS,KACTgB,EAAKgJ,aAAa,aAAchJ,EAAKsqC,UAAY,mCAC7C3/B,EAAKxO,OAAOsF,aACT,EAEX,OAAO,GAQXiuC,EAAa3zC,UAAUy0C,gBAAkB,SAAUr0C,EAAQ6B,EAAO9B,GAC9D,IAAKE,oBAAkBD,EAAO0zC,WAC1B,GAAIj0C,EAAuBO,EAAO0zC,UAAW,YAAa,CAEtD7xC,GAAQ,IAAI6xC,EADI1zC,EAAO0zC,YACCjuC,SAASzF,EAAQD,QAGzC8B,EADiC,mBAArB7B,EAAO0zC,UACX1zC,EAAO0zC,UAAU1zC,EAAQD,GAGzBC,EAAO0zC,UAAUjuC,SAASzF,EAAQD,GAGlD,OAAO8B,GASX0xC,EAAa3zC,UAAUg7B,OAAS,SAAUpsB,EAAMzO,EAAMoE,EAAYjD,EAAUy8B,GACxE,OAAOvoB,KAAKk/B,YAAY9lC,EAAMzO,EAAMoE,EAAYw5B,IASpD4V,EAAa3zC,UAAU20C,UAAY,SAAUzZ,EAAItsB,EAAMzO,EAAMoE,GACzD,IAAIw5B,EAA2C,UAAlCvoB,KAAK5N,OAAOiE,aAAaC,MAAoBovB,EAAGpzB,UAAUC,SAAS,qBAC5E9D,EAAOuR,KAAKk/B,YAAY9lC,EAAMzO,EAAMoE,EAAYw5B,GACpD7C,EAAGp3B,UAAY,GACfo3B,EAAGjuB,aAAa,aAAchJ,EAAKijB,aAAa,eAEhD,IAAK,IAAIna,EAAK,EAAG6nC,KADClsC,MAAMC,KAAK1E,EAAKmjB,YACMra,EAAK6nC,EAAWzzC,OAAQ4L,IAAM,CAClE,IAAItF,EAAOmtC,EAAW7nC,GACtBmuB,EAAG9xB,YAAY3B,KAGvBksC,EAAa3zC,UAAU00C,YAAc,SAAU9lC,EAAMzO,EAAMoE,EAAYw5B,GACnE,IAAI/qB,EAGAmhC,EAFAlwC,EAAOuR,KAAKvN,QAAQoJ,YACpBjR,EAASwO,EAAKxO,OAEdwO,EAAKC,eACLslC,EAAQvlC,EAAKD,eAAe,KAAOqE,KAASA,EAAG5S,EAAOuF,iBAAmBvF,EAAOqM,OAAS,KAAO,GAAIuG,IAGxG,IAAI6hC,EAAYr/B,KAAKy+B,SACjBhyC,EAAQ2M,EAAKC,aAAe2G,KAAK3P,SAASzF,EAAOuF,gBAAiBwuC,EAAO/zC,GACzEoV,KAAK3P,SAASzF,EAAOF,MAAOC,EAAMC,GAMtC,GALqB,SAAhBA,EAAOmJ,MAAmC,aAAhBnJ,EAAOmJ,MAAyBlJ,oBAAkB4B,KAC7EA,EAAQ,IAAIsO,KAAKtO,IAErBA,EAAQuT,KAAK/I,OAAOrM,EAAQ6B,EAAO9B,GACnC00C,EAAY5yC,EAAMoL,WACE,YAAhBjN,EAAOmJ,OAAuBnJ,EAAO00C,kBAAmB,CACxD,IAAIC,EAAuB,SAAV9yC,GAA8B,UAAVA,EAAqB,KAAiB,SAAVA,EAAmB,OAAS,QAC7F4yC,EAAYE,EAAYv/B,KAAKq+B,UAAUppB,YAAYsqB,GAAaF,EAEpE,IAAIG,EAAgBx/B,KAAKi/B,gBAAgBr0C,EAAQ6B,EAAO9B,GAMxD,GALA00C,EAAax0C,oBAAkBD,EAAO0zC,WAAgFe,EAAnEx0C,oBAAkB20C,GAAiB,GAAKA,EAAc3nC,WACzGpJ,EAAKgJ,aAAa,cAA6B,KAAd4nC,EAAmB,QAAUA,GAAa,kBAAoBjmC,EAAKxO,OAAOsF,YACtGrF,oBAAkBuO,EAAKxO,OAAOsF,aAC/BzB,EAAKgJ,aAAa,aAAc4nC,EAAY,kBAAoBjmC,EAAKxO,OAAOsF,YAE5E8P,KAAK0+B,SAASjwC,EAAM2K,EAAMzO,EAAMoE,EAAY4vC,EAAOpW,IAA2B,aAAhB39B,EAAOmJ,KACrEiM,KAAKy/B,WAAWhxC,EAAM4wC,EAAWz0C,EAAO6Z,aAAe7Z,EAAO6Z,eAAiB,kBAE9E,GAAoB,aAAhB7Z,EAAOmJ,KAAqB,CACjCtF,EAAK6D,UAAUoE,IAAI,gBACnBjI,EAAKgJ,aAAa,aAAc,YAE5BhL,IADAuT,KAAK5N,OAAOygC,kBAAkB6M,kBACZ,SAAVjzC,GAKRkzC,EAAYhtB,iBAAe3S,KAAK5N,OAAOqC,eAAe,GAASqE,QAASrM,EAAOmmB,MAAO,OAChFE,aAAa9S,KAAKw+B,UAAU3iC,YAAa8jC,EAAU3sB,YAC7DvkB,EAAKmF,YAAY+rC,GAMrB,GAJiC,UAA7B3/B,KAAK5N,OAAO02B,cAA4B9oB,KAAK5N,OAAO4J,uBACpD5C,EAAKuvB,YAAa,GAEtB3oB,KAAK4/B,cAAcnxC,EAAM2K,EAAMrK,GACX,YAAhBnE,EAAOmJ,MAAsBnJ,EAAO00C,kBAAmB,CACvD,IAAIxmC,EAAU+mC,MAAMb,SAASvyC,EAAMoL,WAAY,KAAiB,SAAVpL,EAAmBuyC,SAASvyC,EAAMoL,WAAY,IAAM,EACtG8nC,EAAYhtB,iBAAe3S,KAAK5N,OAAOqC,eAAe,GAASqE,QAASA,EAAS8Z,MAAO,MAC5FnkB,EAAKH,UAAY,GACjBqxC,EAAUrtC,UAAUoE,IAAI,uBACxBjI,EAAKmF,YAAY+rC,GACjBlxC,EAAKgJ,aAAa,aAAcqB,EAAU,kBAAoBM,EAAKxO,OAAOsF,YAE9E,OAAOzB,GAQX0vC,EAAa3zC,UAAUi1C,WAAa,SAAUhxC,EAAM4wC,EAAWS,GAG3D,YAFiB,IAAbA,IAAuBA,EAAW,aACtCrxC,EAAKqxC,GAAYT,EACV5wC,GAKX0vC,EAAa3zC,UAAUo1C,cAAgB,SAAUnxC,EAAM2K,EAAMrK,GACzD,IAAInE,EAASwO,EAAKxO,OAClBoV,KAAK+/B,uBAAuBtxC,EAAM2K,EAAsB,aAAhBxO,EAAOmJ,MAC/CvF,EAAsBC,EAAMM,GAC5BP,EAAsBC,EAAM2K,EAAKrK,YAC7BnE,EAAO8D,kBACPF,EAAsBC,EAAM7D,EAAO8D,kBAEnC9D,EAAO+X,YACPlU,EAAKyC,MAAMyR,UAAY/X,EAAO+X,WAEV,SAApB/X,EAAOo1C,SACPvxC,EAAK6D,UAAUoE,IAAI,cAEM,wBAApB9L,EAAOo1C,UACZvxC,EAAK6D,UAAUoE,IAAI,sBAG3BynC,EAAa3zC,UAAUu1C,uBAAyB,SAAUtxC,EAAM2K,EAAM6mC,GAClE,IAAInW,KAEAC,KACA3wB,EAAKqY,UACLqY,EAAKrY,QAAUrY,EAAKqY,SAEpBrY,EAAK4sB,UACL8D,EAAK9D,QAAU5sB,EAAK4sB,SAEpB5sB,EAAKiyB,YACLtB,EAAQl+B,KAAK,kBAEbuN,EAAKuvB,aACLoB,EAAQl+B,KAAK0gC,MAAMxC,GAAU,wBAAyB,aAClDkW,GACAxxC,EAAKJ,cAAc,YAAYiE,UAAUoE,IAAI,YAGhD7L,oBAAkBuO,EAAK3J,SACxBq6B,EAlBqB,iBAkBC1wB,EAAK3J,OAE1B2J,EAAK5I,SACNu5B,EAAQl+B,KAAK,UAEjBi+B,EAAKG,MAAQF,EACbv7B,EAAsBC,EAAMq7B,IAEhCqU,EAAa3zC,UAAU6F,SAAW,SAAU3F,EAAOC,EAAMC,GACrD,OAAOA,EAAOH,cAAcC,EAAOC,EAAMC,IAEtCuzC,KlBrOP+B,GAA6B,WAC7B,SAASA,KAsBT,OApBAA,EAAY11C,UAAU2nC,WAAa,SAAU7nC,EAAQ4W,GACrC5R,OAAOC,KAAK2R,GAClB1R,QAAQ,SAAU2wC,GAAQ,OAAOjhC,GAAsB5U,EAAQ81C,GAAOD,GAAOj/B,EAAQi/B,OAE/FD,EAAY11C,UAAU61C,UAAY,SAAU/1C,EAAQg2C,GAChDphC,GAAsB5U,EAAQ81C,GAAOE,OAAQA,IAEjDJ,EAAY11C,UAAU+1C,QAAU,SAAUj2C,EAAQ2Z,GAC9C/E,GAAsB5U,EAAQ81C,GAAOvhB,KAAM5a,EAAgC,kBAAdA,IAEjEi8B,EAAY11C,UAAU0mC,QAAU,SAAU5mC,EAAQk2C,GAC9CthC,GAAsB5U,EAAQ81C,GAAOhO,KAAMoO,GAC3CthC,GAAsB5U,EAAQ81C,GAAOK,QAAS,MAAM,IAExDP,EAAY11C,UAAUk2C,WAAa,SAAUp2C,EAAQq2C,EAAWvtC,GAC5D8L,GAAsB5U,EAAQ81C,GAAOQ,QAASD,EAAWvtC,IAE7D8sC,EAAY11C,UAAUq2C,cAAgB,SAAUv2C,EAAQw2C,GACpD5hC,GAAsB5U,EAAQ81C,GAAOW,WAAY,QAASD,IAEvDZ,KAePE,IACAE,OAAQ,gBACRvY,KAAM,OACNpK,SAAU,gBACViV,gBAAiB,uBACjB/T,KAAM,YACNuT,KAAM,YACNqO,QAAS,eACTG,QAAS,eACTG,WAAY,kBACZC,SAAU,gBACVrU,MAAO,aACP4I,SAAU,iBmBtDV9J,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAwBxCmV,GAAoC,SAAUjT,GAE9C,SAASiT,IACL,IAAI9/B,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAQhE,OAPAmB,EAAM1O,QAAU0O,EAAM/O,OACjBqC,cAAc,MAAQ9D,UAAW,eAAgBoiB,OAASgV,KAAM,eAAgBwW,SAAU,QAC/Fp9B,EAAM8vB,YAAc,IAAIiP,GACxB/+B,EAAM+/B,QAAU//B,EAAM/O,OAAOqC,cAAc,QAAU9D,UAAW,iBAChEwQ,EAAMggC,QAAUhgC,EAAM/O,OAAOqC,cAAc,OAAS9D,UAAW,4BAC/DwQ,EAAMigC,IAAMjgC,EAAM/O,OAAOqC,cAAc,OACvC0M,EAAMkgC,UAAYlgC,EAAM/O,OAAOqC,cAAc,SAAW9D,UAAW,mBAAoBoiB,OAAShf,KAAQ,cACjGoN,EAgKX,OA1KAsqB,GAAUwV,EAAoBjT,GAgB9BiT,EAAmBz2C,UAAUi0C,OAAS,WAClC,OAAOz+B,KAAKohC,IAAIvlC,aAQpBolC,EAAmBz2C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,EAAMoE,GACxD,IAAIN,EAAOuR,KAAKvN,QAAQoJ,YACpBylC,EAActhC,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,0CAChE,OAAOqP,KAAKuhC,cAAcnoC,EAAM3K,EAAM6yC,IAO1CL,EAAmBz2C,UAAU09B,QAAU,SAAU9uB,EAAM3K,GACnDuR,KAAKwhC,MAAM/yC,GACX,IAAI6yC,EAActhC,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,0CAChE,OAAOqP,KAAKuhC,cAAcnoC,EAAM3K,EAAM6yC,IAE1CL,EAAmBz2C,UAAUg3C,MAAQ,SAAU/yC,GAC3CA,EAAKH,UAAY,IAErB2yC,EAAmBz2C,UAAU+2C,cAAgB,SAAUnoC,EAAM3K,EAAM6yC,GAC/D,IAAI12C,EAASwO,EAAKxO,OACd62C,KAEAC,EAAW1hC,KAAKy+B,SAKpB,GAJA1vC,aAAW2yC,GACPC,eAAgB/2C,EAAO6I,IACvBw2B,MAAS,oBAEO,aAAhBr/B,EAAOmJ,KAAqB,CAC5B,IAAItH,EAAQ7B,EAAOsF,WACfA,EAAa8P,KAAKkhC,QAAQrlC,YAC9B3L,EAAWtF,EAAO6Z,gBAAkBhY,EACpCi1C,EAAS9tC,YAAY1D,OAEpB,CACDtF,EAAO0X,SAAW,cAClB,IAAIs/B,EAAejvB,iBAAe3S,KAAK5N,OAAOqC,eAAe,GAASqE,SAAS,EAAO8Z,MAAO,MAC7FgvB,EAAa9uB,aAAa9S,KAAKqhC,UAAUxlC,YAAa+lC,EAAa5uB,YACnE0uB,EAAS9tC,YAAYguC,GACrBF,EAASpvC,UAAUoE,IAAI,sBAK3B,GAHAsJ,KAAK+/B,uBAAuBtxC,EAAM2K,GAClC4G,KAAKy/B,WAAWhxC,EAAMizC,GACtBjzC,EAAKmF,YAAYoM,KAAKmhC,QAAQtlC,aACzBmE,KAAK5N,OAAOkP,gBAAsD,cAApCtB,KAAK5N,OAAO+f,eAAepe,MACzDnJ,EAAO0W,iBAAmBzW,oBAAkBD,EAAOF,UAClDsV,KAAK5N,OAAOqP,iBAAkB7W,EAAO6W,gBAAiB,CACxD1S,aAAWuyC,GACPK,eAAgB,YAAc/2C,EAAO6I,MAEzChF,EAAK6D,UAAUoE,IAAI,eACnB,IAAImrC,KACJ,GAAI7hC,KAAK5N,OAAO+f,eAAe5lB,QAAQZ,QAAUqU,KAAK5N,OAAO+f,eAAe5lB,QAAQZ,SAAWk2C,EAAel2C,OAC1G,IAAK,IAAI8D,EAAQ,EAAGA,EAAQuQ,KAAK5N,OAAO7F,QAAQZ,OAAQ8D,IACpD,IAAK,IAAItD,EAAQ,EAAGA,EAAQ6T,KAAK5N,OAAO+f,eAAe5lB,QAAQZ,OAAQQ,IACnE,GAAI6T,KAAK5N,OAAO+f,eAAe5lB,QAAQJ,GAAOzB,QAAUE,EAAOF,MAAO,CAClE42C,EAAYhvC,UAAUoE,IAAI,cAC1BmrC,EAAeh2C,KAAKjB,EAAOF,OAC3B,MAKhB+D,EAAKmF,YAAY0tC,EAAYzlC,aAE7BzC,EAAKzI,WACLlC,EAAK6D,UAAUoE,IAAI0C,EAAKzI,WAExB/F,EAAO8D,kBACPF,EAAsBC,EAAM7D,EAAO8D,kBAEnC9D,EAAOwW,eACPqgC,EAAS5iB,KAAO,QAEhBj0B,EAAO2W,gBACPkgC,EAASb,SAAU,GAEvBnyC,EAAOuR,KAAK8hC,oBAAoBl3C,EAAQ6D,GACxC,IAAIhB,EACAs0C,EAAU/hC,KAAK5N,OACf8mC,EAAW6I,EAAQ5I,sBAAsBvuC,EAAOF,OACpD,IAAKG,oBAAkBD,EAAOkY,gBAAiB,CAE3C,IAAIk/B,EAAeD,EAAQtvC,QAAQJ,GAAKzH,EAAO6I,IAAM,iBAErDhG,EAAS7C,EAAO2Z,mBAAP3Z,CAA2BoE,UAASS,MAASypC,GAAYtuC,GAASm3C,EAAS,iBAAkBC,EAAchiC,KAAK5N,OAAU,kBACnI3D,EAAKsiB,kBAAkBziB,UAAY,GACnCoF,EAAejF,EAAKsiB,kBAAmBtjB,GAG3C,GADAuS,KAAKixB,YAAYkB,WAAW1jC,EAAMgzC,IAC7B52C,oBAAkBD,EAAOq3C,mBAAqBp3C,oBAAkBD,EAAO+X,WAAY,CACpF,IAAIu/B,EAAYt3C,EAAOq3C,iBAAmBr3C,EAAO+X,UACjD++B,EAASxwC,MAAMyR,UAAYu/B,EACT,UAAdA,GAAuC,SAAdA,EACzBzzC,EAAK6D,UAAUoE,IAAkB,UAAdwrC,EAAwB,eAAiB,eAEzC,WAAdA,GACLzzC,EAAK6D,UAAUoE,IAAI,iBAY3B,MATwB,SAApB9L,EAAOo1C,SACPvxC,EAAK6D,UAAUoE,IAAI,cAEM,wBAApB9L,EAAOo1C,UACZvxC,EAAK6D,UAAUoE,IAAI,qBAEvBjI,EAAKgJ,aAAa,gBAAkB5M,oBAAkBuO,EAAK4sB,SAA0B,EAAf5sB,EAAK4sB,SAAanuB,YACxFpJ,EAAKgJ,aAAa,eAAgB,KAClCuI,KAAK5N,OAAO+d,QAAQpL,IAAkB3L,KAAMA,EAAM3K,KAAMA,IACjDA,GAEXwyC,EAAmBz2C,UAAUs3C,oBAAsB,SAAUl3C,EAAQ6D,GACjE,GAAIuR,KAAK5N,OAAOqP,gBAAkB7W,EAAO6W,iBAAmB5W,oBAAkBD,EAAOF,OAAQ,CACzF,IAAI+H,EAAWuN,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,yBACzDwxC,KACJ,GAAIniC,KAAK5N,OAAO+f,eAAe5lB,QAAQZ,QAAUqU,KAAK5N,OAAO+f,eAAe5lB,QAAQZ,SAAWw2C,EAAqBx2C,OAChH,IAAK,IAAID,EAAI,EAAGA,EAAIsU,KAAK5N,OAAO7F,QAAQZ,OAAQD,IAC5C,IAAK,IAAIyB,EAAI,EAAGA,EAAI6S,KAAK5N,OAAO+f,eAAe5lB,QAAQZ,OAAQwB,IAC3D,GAAI6S,KAAK5N,OAAO+f,eAAe5lB,QAAQY,GAAGzC,QAAUE,EAAOF,MAAO,CAC9D+H,EAAQH,UAAUoE,IAAI,cACtByrC,EAAqBt2C,KAAKjB,EAAOF,OACjC,MAKhB+D,EAAK6D,UAAUoE,IAAI,eACnBjI,EAAKmF,YAAYnB,GAErB,GAAIuN,KAAK5N,OAAOiP,cAAe,CAC3B,IAAI+S,EAAUpU,KAAK5N,OAAOqC,cAAc,OACxC2f,EAAQzjB,UAAY/F,EAAOyW,cAAgB,uBAAyB,cACpE5S,EAAKmF,YAAYwgB,GAErB,OAAO3lB,GAQXwyC,EAAmBz2C,UAAUi1C,WAAa,SAAUhxC,EAAM4wC,GAEtD,OADA5wC,EAAKmF,YAAYyrC,GACV5wC,GAEJwyC,GACT9C,ICpME1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAqBxCsW,GAA2C,SAAUpU,GAErD,SAASoU,IACL,IAAIjhC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAOhE,OANAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MACvC9D,UAAW,mCAAoCoiB,OAC3CgV,KAAM,eACNwW,SAAU,QAGXp9B,EA0CX,OAnDAsqB,GAAU2W,EAA2BpU,GAiBrCoU,EAA0B53C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,EAAMoE,GAC/D,IAAIN,EAAOuR,KAAKvN,QAAQoJ,YACpBjD,EAAMoH,KAAK5N,OAAOqC,cAAc,OAChC9D,UAAW,yBACXoiB,OAAS4uB,eAAgBvoC,EAAKxO,OAAO6I,OAErC7I,EAASwO,EAAKxO,OAoBlB,GAnBA6D,EAAKmF,YAAYgF,GACZ/N,oBAAkBD,EAAOkY,gBAI1B9C,KAAKy/B,WAAW7mC,EAAKhO,EAAOsF,WAAYtF,EAAO6Z,gBAH/C/Q,EAAekF,EAAKhO,EAAO2Z,mBAAP3Z,CAA2BA,EAAQoV,KAAK5N,OAAQ,mBAKpEgH,EAAKxO,OAAOy3C,SACZ5zC,EAAKgJ,aAAa,QAAS2B,EAAKxO,OAAOy3C,SAEtCx3C,oBAAkBuO,EAAKxO,OAAO+X,aAC/B/J,EAAI1H,MAAMyR,UAAYvJ,EAAKxO,OAAO+X,WAElCvJ,EAAKxO,OAAO8D,kBACZF,EAAsBC,EAAM2K,EAAKxO,OAAO8D,kBAE5CD,EAAKgJ,aAAa,UAAW2B,EAAKqY,QAAQ5Z,YAC1CpJ,EAAKgJ,aAAa,eAAgB2B,EAAKqY,QAAQ5Z,YAC/CpJ,EAAKgJ,aAAa,eAAgB,KAC9BuI,KAAK5N,OAAOiP,cAAe,CAC3B,IAAI+S,EAAUpU,KAAK5N,OAAOqC,cAAc,OACxC2f,EAAQzjB,UAAYyI,EAAKxO,OAAOyW,cAAgB,uBAAyB,cACzE5S,EAAKmF,YAAYwgB,GAGrB,OADApU,KAAK5N,OAAO+d,QAAQpL,IAAkB3L,KAAMA,EAAM3K,KAAMA,IACjDA,GAEJ2zC,GACTjE,IC1EE1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAmBxCwW,GAAoC,SAAUtU,GAE9C,SAASsU,IACL,IAAInhC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAEhE,OADAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MAAQ9D,UAAW,iBACvDwQ,EAYX,OAhBAsqB,GAAU6W,EAAoBtU,GAW9BsU,EAAmB93C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,GAClD,IAAI8D,EAAOuR,KAAKvN,QAAQoJ,YAExB,OADArN,EAAsBC,EAAM2K,EAAKrK,YAC1BN,GAEJ6zC,GACTnE,ICrCE1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAoBxCyW,GAA0C,SAAUvU,GAEpD,SAASuU,IACL,IAAIphC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAIhE,OAHAmB,EAAM1O,QAAU0O,EAAM/O,OACjBqC,cAAc,MAAQ9D,UAAW,iBAClCoiB,OAAS1gB,GAAI8O,EAAM/O,OAAOK,QAAQJ,GAAK,cAAe01B,KAAM,WAAYwW,SAAU,QAC/Ep9B,EAsCX,OA5CAsqB,GAAU8W,EAA0BvU,GAapCuU,EAAyB/3C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,GACxD,IAEI8C,EAEA+0C,EAJA/zC,EAAOuR,KAAKvN,QAAQoJ,YACpBa,EAAOsD,KAAK5N,OAIhBzH,EAAKuF,WAAakJ,EAAKxO,OAAOsF,WAC1BkJ,EAAKC,eACLmpC,EAAYxiC,KAAK/I,OAAOmC,EAAKxO,OAAQwO,EAAKxO,OAAOH,cAAc,aAAcE,EAAMyO,EAAKxO,UAE5F,IAAI6B,EAAQ2M,EAAKC,aAAempC,EAAYppC,EAAKxO,OAAO8W,oBAAsB/W,EAAK6O,IAC/EwG,KAAK/I,OAAOmC,EAAKxO,OAAQwO,EAAKxO,OAAOH,cAAc,MAAOE,EAAMyO,EAAKxO,SACzE,GAAKC,oBAAkB6R,EAAKpQ,cAAcm2C,iBAWtCh0C,EAAKH,UAAY8K,EAAKxO,OAAOsF,WAAa,KAAOzD,EAAQ,MAAQ9B,EAAKwB,MAAQ,KACzExB,EAAKwB,MAAQ,EAAI6T,KAAKq+B,UAAUppB,YAAY,QAAUjV,KAAKq+B,UAAUppB,YAAY,cAZ9B,CACxD,GAAIuB,aAAY,CACZ,IAAIksB,EAAShmC,EAAKjK,QAAQJ,GAAK,kBAC/B5E,EAASO,EAAiB0O,EAAKpQ,cAAcm2C,gBAApCz0C,CAAqDrD,EAAM,KAAM,KAAM+3C,QAGhFj1C,EAASO,EAAiB0O,EAAKpQ,cAAcm2C,gBAApCz0C,CAAqDrD,GAElE+I,EAAejF,EAAMhB,GASzB,OAHAgB,EAAKgJ,aAAa,UAAW2B,EAAKqY,QAAQ5Z,YAC1CpJ,EAAKgJ,aAAa,aAAchJ,EAAKH,UAAY,yBACjDG,EAAKgJ,aAAa,QAAShJ,EAAKH,WACzBG,GAEJ8zC,GACTpE,IAMEwE,GAA+C,SAAU3U,GAEzD,SAAS2U,IACL,IAAIxhC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAEhE,OADAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MAAQ9D,UAAW,mBACvDwQ,EAaX,OAjBAsqB,GAAUkX,EAA+B3U,GAWzC2U,EAA8Bn4C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,GAC7D,IAAI8D,EAAOuR,KAAKvN,QAAQoJ,YAGxB,OAFApN,EAAKH,UAAY,SACjBG,EAAKgJ,aAAa,UAAW2B,EAAKqY,QAAQ5Z,YACnCpJ,GAEJk0C,GACTxE,IC3FE1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAkBxC8W,GAAoC,SAAU5U,GAE9C,SAAS4U,IACL,OAAkB,OAAX5U,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAqB/D,OAvBAyrB,GAAUmX,EAAoB5U,GAW9B4U,EAAmBp4C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,EAAMm/B,EAAMh+B,GAC9D,IAAI2C,EAAOuR,KAAKvN,QAAQoJ,YASxB,OARApN,EAAKkC,UAAY7E,EAAW,qBAAuB,uBACnD2C,EAAKgJ,aAAa,iBAAkB9M,EAAKD,OACzC+D,EAAKgJ,aAAa,kBAAmB9M,EAAK6O,KAC1C/K,EAAKgJ,aAAa,gBAAiB3L,EAAW,OAAS,SACvD2C,EAAKgJ,aAAa,WAAY,MAC9BhJ,EAAKmF,YAAYoM,KAAK5N,OAAOqC,cAAc,OACvC9D,UAAW7E,EAAW,4CAA8C,+CAEjE2C,GAEJm0C,GACTN,IC3CE7W,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAkBxC+W,GAA0C,SAAU7U,GAEpD,SAAS6U,IACL,IAAI1hC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAEhE,OADAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MAAQ9D,UAAW,uBACvDwQ,EAYX,OAhBAsqB,GAAUoX,EAA0B7U,GAWpC6U,EAAyBr4C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,GACxD,IAAI8D,EAAOuR,KAAKvN,QAAQoJ,YAExB,OADApN,EAAKmF,YAAYoM,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,8BAA+BrC,UAAW,MAClGG,GAEJo0C,GACT1E,ICpCE1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAkBxCgX,GAAgD,SAAU9U,GAE1D,SAAS8U,IACL,IAAI3hC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAEhE,OADAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MAAQ9D,UAAW,uBACvDwQ,EAYX,OAhBAsqB,GAAUqX,EAAgC9U,GAW1C8U,EAA+Bt4C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,GAC9D,IAAI8D,EAAOuR,KAAKvN,QAAQoJ,YAExB,OADApN,EAAKmF,YAAYoM,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,iBACxDlC,GAEJq0C,GACT3E,ICpCE1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAmBxCiX,GAA0C,SAAU/U,GAEpD,SAAS+U,IACL,IAAI5hC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAKhE,OAJAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MACvC9D,UAAW,sBACXoiB,OAASiwB,gBAAiB,QAASjb,KAAM,WAAYwW,SAAU,QAE5Dp9B,EAiBX,OAxBAsqB,GAAUsX,EAA0B/U,GAYpC+U,EAAyBv4C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,EAAMoE,GAC9D,IAAIN,EAAOuR,KAAKvN,QAAQoJ,YASxB,OARI9M,IAAelE,oBAAkBkE,EAAkB,QACnDN,EAAKkC,UAAY,GACjBlC,EAAKkC,UAAY5B,EAAkB,MACnCN,EAAKmF,YAAYoM,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,iDAG/DlC,EAAKmF,YAAYoM,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,kDAE5DlC,GAEJs0C,GACT5E,IC7CE1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAkBxCmX,GAAqC,SAAUjV,GAE/C,SAASiV,IACL,IAAI9hC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAKhE,OAJAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MACvC9D,UAAW,gBACXoiB,OAASgV,KAAM,WAAYwW,SAAU,QAElCp9B,EAYX,OAnBAsqB,GAAUwX,EAAqBjV,GAY/BiV,EAAoBz4C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,GACnD,IAAIu4C,EAAcljC,KAAKvN,QAAQoJ,YAI/B,OAHAqnC,EAAYtvC,YAAYoM,KAAK5N,OAAOqC,cAAc,OAC9C9D,UAAW,gEAERuyC,GAEJD,GACT9E,ICvCE1S,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAmBxCqX,GAA2C,SAAUnV,GAErD,SAASmV,IACL,IAAIhiC,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAEhE,OADAmB,EAAM1O,QAAU0O,EAAM/O,OAAOqC,cAAc,MAAQ9D,UAAW,oBACvDwQ,EAYX,OAhBAsqB,GAAU0X,EAA2BnV,GAWrCmV,EAA0B34C,UAAUg7B,OAAS,SAAUpsB,EAAMzO,GACzD,IAAI8D,EAAOuR,KAAKvN,QAAQoJ,YAExB,OADApN,EAAKmF,YAAYa,gBAAc,OAAS9D,UAAW,iBAC5ClC,GAEJ00C,GACThF,ICTEiF,GAAwB,WAIxB,SAASA,EAAOhxC,EAAQgsC,GACpBp+B,KAAKqjC,WAAY,EACjBrjC,KAAK5N,OAASA,EACd4N,KAAKo+B,QAAUA,EACfp+B,KAAKrV,KAAO,IAAIu0B,GAAK9sB,EAAQgsC,GAC7Bp+B,KAAKsjC,KAAOlF,EAAQtnC,WAAW,gBAC/BkJ,KAAKixB,YAAcjxB,KAAKo+B,QAAQtnC,WAAW,eAC3CkJ,KAAKujC,SAAWvjC,KAAKo+B,QAAQtnC,WAAW,mBACxCkJ,KAAK4N,mBAkfT,OA7eAw1B,EAAO54C,UAAUg7B,OAAS,WACtB,IAAI9oB,EAAOsD,KAAK5N,OAChB4N,KAAKwjC,eAAiBxjC,KAAKujC,SAASE,YAAYzxB,aAAWkpB,QAC3Dl7B,KAAK0jC,gBAAkB1jC,KAAKujC,SAASE,YAAYzxB,aAAW2xB,SAC5D3jC,KAAKwjC,eAAevR,cACpBjyB,KAAK0jC,gBAAgBzR,cACjBv1B,EAAKyb,aAAaxsB,SAClBqU,KAAK4jC,kBAAmB,EACxB5jC,KAAKwjC,eAAelR,cACpBtyB,KAAK0jC,gBAAgBpR,cACrBtyB,KAAK6jC,UAAS,IAElB7jC,KAAK5N,OAAOgb,aAAa02B,WACzB9jC,KAAK5N,OAAOgb,aAAa22B,YACE,SAAvB/jC,KAAK5N,OAAOkD,QACZ0K,KAAK5N,OAAOgb,aAAa42B,aAE7BhkC,KAAKikC,sBAMTb,EAAO54C,UAAU09B,QAAU,SAAU98B,GACjC,IAAI+V,EAAQnB,UACF,IAAN5U,IAAgBA,GAAMyU,YAAa,YACvC,IAAInD,EAAOsD,KAAK5N,OAChBsK,EAAKkT,OAAOxkB,EAAEyU,YAAc,SAAUzU,GAClCorB,cACAxW,KAAKkkC,iBAETxnC,EAAKyT,QAAQtC,GAAoBziB,EAAG,SAAUkM,GAE1C,QADa,IAATA,IAAmBA,GAASuI,YAAa,YACpB,WAArBvI,EAAKuI,aAA4B2W,eAAe9Z,EAAK+Z,cAAe,CAEpEnf,EAAS,KAAIoF,EAAKynC,qBAEtB,GAAI7sC,EAAKgZ,OACL5T,EAAKkT,OAAOw0B,GAAoB9sC,OADpC,CAIA,GAAyB,WAArBA,EAAKuI,aAA4BnD,EAAKK,YAAa,CACnD,IAAIsnC,EAAa/sC,EAAK3M,KAAKgB,OACvBQ,EAAQuQ,EAAKO,aAAaqnC,kBAAoBD,EAC5C3nC,EAAK8vB,gBAAgB7gC,OAAS04C,IAAel4C,IAC/CuQ,EAAK6nC,gBAAiB,EACtB7nC,EAAKnB,eACD0B,cACIqnC,kBAAmBn4C,EAAO+Q,YAAa9H,KAAKC,KAAKlJ,EAAQuQ,EAAKO,aAAaE,aAEhF,GACHT,EAAK8nC,YAAYC,SAASH,kBAAoBn4C,GAGtDgV,EAAM8iC,mBAAmB3sC,OAGjC8rC,EAAO54C,UAAU05C,eAAiB,WAC9B,IAAIxnC,EAAOsD,KAAK5N,OACZsyC,EAAchoC,EAAKyb,aACvB,GAAIzb,EAAK+sB,eAAgB,CACrB,IAAIkb,EAAmBjoC,EAAKjK,QAAQJ,GAAK,iBACzCuyC,kBAAgBD,MAChBE,sBAAoBF,EAAkB,kBAEtCjoC,EAAKpQ,cAAcm2C,iBACnBoC,sBAAoBnoC,EAAKjK,QAAQJ,GAAK,kBAAmB,mBAEzDqK,EAAKsrB,aACL6c,sBAAoBnoC,EAAKjK,QAAQJ,GAAK,cAAe,eAErDqK,EAAKooC,iBACLD,sBAAoBnoC,EAAKjK,QAAQJ,GAAK,kBAAmB,mBAE7D,IAAK,IAAI3G,EAAI,EAAGA,EAAIg5C,EAAY/4C,OAAQD,IAChCg5C,EAAYh5C,GAAGuC,WACf22C,kBAAgBloC,EAAKjK,QAAQJ,GAAKqyC,EAAYh5C,GAAG+H,QACjDoxC,sBAAoBnoC,EAAKjK,QAAQJ,GAAKqyC,EAAYh5C,GAAG+H,IAAK,aAE1DixC,EAAYh5C,GAAGoX,gBACf+hC,sBAAoBnoC,EAAKjK,QAAQJ,GAAKqyC,EAAYh5C,GAAG+H,IAAM,iBAAkB,kBAE7EixC,EAAYh5C,GAAGyX,gBACf0hC,sBAAoBnoC,EAAKjK,QAAQJ,GAAKqyC,EAAYh5C,GAAG+H,IAAM,iBAAkB,kBAIrF,IAAK,IAAIsxC,EAAI,EAAGA,EAAIroC,EAAKtI,WAAWzI,OAAQo5C,IACxC,IAAK,IAAI53C,EAAI,EAAGA,EAAIuP,EAAKtI,WAAW2wC,GAAGx4C,QAAQZ,OAAQwB,IAAK,CACxD,GAAIuP,EAAKtI,WAAW2wC,GAAGx4C,QAAQY,GAAGw8B,eAAgB,CAC9C,IAAI+Y,EAAShmC,EAAKjK,QAAQJ,GAAKqK,EAAKtI,WAAW2wC,GAAGx4C,QAAQY,GAAO,KAAI,iBACrE03C,sBAAoBnC,EAAQ,kBAEhC,GAAIhmC,EAAKtI,WAAW2wC,GAAGx4C,QAAQY,GAAG++B,oBAAqB,CAC/CwW,EAAShmC,EAAKjK,QAAQJ,GAAKqK,EAAKtI,WAAW2wC,GAAGx4C,QAAQY,GAAO,KAAI,sBACrE03C,sBAAoBnC,EAAQ,uBAEhC,GAAIhmC,EAAKtI,WAAW2wC,GAAGx4C,QAAQY,GAAGg/B,qBAAsB,CAChDuW,EAAShmC,EAAKjK,QAAQJ,GAAKqK,EAAKtI,WAAW2wC,GAAGx4C,QAAQY,GAAO,KAAI,uBACrE03C,sBAAoBnC,EAAQ,2BAK5CU,EAAO54C,UAAUkf,gBAAkB,SAAUte,GACzC4U,KAAK5N,OAAO+d,QAAQ8M,GAAuB7xB,IAM/Cg4C,EAAO54C,UAAUy5C,mBAAqB,SAAU3sC,GAC5C,IAAI6J,EAAQnB,UACC,IAAT1I,IAAmBA,MACE,kBAArBA,EAAKuI,aACLG,KAAK5N,OAAOulB,cAEhB3X,KAAKqjC,WAAY,EACjB,IAAIhjB,EACA2kB,EAAWhlC,KAAKilC,sBAEpB,GADAjlC,KAAKixB,YAAYC,QAAQlxB,KAAK5N,OAAO8kC,aAAalkB,YAAY,GAC1DgyB,EAAU,CACV,IAAIE,EAAW,IAAI33B,WACnB8S,EAAcrgB,KAAKmlC,SAASD,GAgBhC,GAVI7kB,EAJCA,EAIaA,EAAYlS,KAAK,SAAU/iB,GACrC,IAAIqO,EAAQ0H,EAAMxW,KAAKkhB,gBAAgBiP,gBACvC,GAAI3Z,EAAMkiC,UAAW,CACjB,IAAI9nB,EAAM,IAAIhO,WAEd,OADAgO,EAAIhN,SAAU9gB,UAAYtB,MAAO,IAC1BovB,EAAIrN,QAEf,OAAO/M,EAAMxW,KAAKu1B,QAAQ5oB,EAAMmC,KAVtBuG,KAAKrV,KAAKu1B,QAAQ5oB,EAAM0I,KAAKrV,KAAKkhB,gBAAgBiP,iBAahE9a,KAAK5N,OAAO4M,uBAAuBrT,UAAYq5C,GAAYhlC,KAAK5N,OAAOmqB,eAAe/iB,IAAI7N,QAAS,CACnG,IAAIy5C,EAAa,IAAI73B,WACrB8S,EAAcA,EAAYlS,KAAK,SAAU/iB,GAErC,OADA+V,EAAM/O,OAAOwd,OAAOy1B,IAA4BhlB,YAAaA,EAAa5yB,OAAQrC,EAAG8iB,QAASk3B,IACvFA,EAAWl3B,UAGtBlO,KAAK5N,OAAO9F,cAAcg5C,2BAA6BtlC,KAAK5N,OAAO9F,cAAcC,QAAQZ,SACzF00B,EAAcA,EAAYlS,KAAK,SAAU/iB,GAAK,OAAO+V,EAAMokC,qBAAqBn6C,MAEpFi1B,EAAYlS,KAAK,SAAU/iB,GAAK,OAAO+V,EAAMqkC,mBAAmBp6C,EAAGkM,KAC9DssB,MAAM,SAAUx4B,GAAK,OAAO+V,EAAMskC,mBAAmBr6C,EAAGkM,MAEjE8rC,EAAO54C,UAAU26C,SAAW,SAAUO,GAElC,OADA1lC,KAAK5N,OAAOwd,OAAOy1B,IAA4BM,WAAW,EAAMz3B,QAASw3B,IAClEA,EAASx3B,SAEpBk1B,EAAO54C,UAAUy6C,oBAAsB,WACnC,IAAIvoC,EAAOsD,KAAK5N,OAChB,SAAWsK,EAAK4E,gBAAkB5E,EAAKyV,eAAe5lB,QAAQZ,QACzD+Q,EAAK6f,eAAe/iB,IAAU,SAAMwG,KAAK4lC,WAAW5lC,KAAK5N,OAAO4M,yBAEzEokC,EAAO54C,UAAUo7C,WAAa,SAAUr5C,GACpC,IAAI4U,EAAQnB,KACZ,OAAOzT,EAAQgO,KAAK,SAAU1E,GAK1B,SAHQsL,EAAM/O,OAAO+f,eAAe5lB,QAAQgO,KAAK,SAAU9N,GACvD,OAAOoJ,EAAIpC,MAAQhH,EAAMgH,QAEV0N,EAAM/O,OAAOmqB,eAAe/iB,IAAI7N,WAG3Dy3C,EAAO54C,UAAUq7C,gBAAkB,SAAUvuC,GACzC,IAAI6J,EAAQnB,KACZ1I,EAAKuI,YAAc,YACnB,IAAIqO,EAAUlO,KAAKrV,KAAK44B,YAAYjsB,EAAK6rB,QAASnjB,KAAK5N,OAAO4wB,0BAA0B,GAAI1rB,EAAK+sB,UAC7F5qB,EAAQuG,KAAKrV,KAAKkhB,gBAAgBiP,gBAClC9a,KAAKrV,KAAK01B,YAAYzmB,WAAW8qB,QACjC1kB,KAAKikC,oBAAqBpkC,YAAa,cAIvCqO,EAAQC,KAAK,SAAU/iB,GACnB+V,EAAMxW,KAAKu1B,QAAQ5oB,EAAMmC,GACpB0U,KAAK,SAAU/iB,GAAK,OAAO+V,EAAM2kC,UAAU16C,EAAGkM,KAC9CssB,MAAM,SAAUx4B,GAAK,OAAO+V,EAAM4kC,UAAU36C,EAAGkM,OAEnDssB,MAAM,SAAUx4B,GAAK,OAAO+V,EAAM4kC,UAAU36C,EAAGkM,MAG5D8rC,EAAO54C,UAAUs7C,UAAY,SAAU16C,EAAGkM,GACtC0I,KAAKwlC,mBAAmBp6C,EAAGkM,IAE/B8rC,EAAO54C,UAAUu7C,UAAY,SAAU36C,EAAGkM,GACtC0I,KAAKylC,mBAAmBr6C,EAAGkM,IAO/B8rC,EAAO54C,UAAUw7C,eAAiB,WAC9BhmC,KAAK6jC,UAAS,IAElBT,EAAO54C,UAAUq5C,SAAW,SAAUoC,GAClC,IAEI5d,EAFA3rB,EAAOsD,KAAK5N,OACZgiC,EAAQp0B,KAAK0jC,gBAAgB/Q,WAAWtkC,cAAc,SAErDxD,oBAAkBupC,IACnBhhC,SAAOghC,GAEXA,EAAQp0B,KAAK5N,OAAOqC,cAAc,SAClC,IAAIyxC,EAAY,GACZxpC,EAAK+sB,gBAAkB/sB,EAAKY,cAC1B4oC,GAEN7d,EAAKroB,KAAK5N,OAAOqC,cAAc,MAAQ9D,UAAW,gBAC/CiD,YAAYoM,KAAK5N,OAAOqC,cAAc,MACrCnG,UAAW0R,KAAKsjC,KAAKruB,YAAY,eACjClC,OAASozB,SAAUzpC,EAAKyb,aAAaxsB,OAASu6C,GAAWruC,eAE7Du8B,EAAMxgC,YAAYy0B,GAClBroB,KAAK0jC,gBAAgBlxB,YAAY4hB,GAC7B6R,IACAjmC,KAAK5N,OAAO+d,QAAQmhB,OACpBtxB,KAAK5N,OAAOwd,OAAO7B,IAAkBsZ,MAAO,IAAIlC,IAAMv5B,WAAW,EAAMyL,OAAQ,IAAI+tB,IAAOgG,YAAY,EAAM56B,SAAS,YAG7H4yC,EAAO54C,UAAU47C,oBAAsB,WAC/BpmC,KAAK5N,OAAOi0C,wBAAwB16C,QACpCqU,KAAKsmC,iBAAiBtmC,KAAK5N,OAAOi0C,wBAAwB,KAGlEjD,EAAO54C,UAAU87C,iBAAmB,SAAUC,GAO1C,IAAK,IALD95C,EADAF,EAAUyT,KAAK5N,OAAO+lB,aAItBxtB,EAAO47C,GAAUA,EAAOvX,MAAQuX,EAAOvX,MAAM,GAAKuX,EAClD1vC,EAAOmJ,KAAKo+B,QAAQtnC,WAAW,kBAC1BpL,EAAI,EAAGmB,EAAMN,EAAQZ,OAAQD,EAAImB,EAAKnB,IAAK,CAChDe,EAAQ1B,GAAUwB,EAAQb,GAAGhB,OAAS,GAAIC,GACrCE,oBAAkB0B,EAAQb,GAAU,gBACrCa,EAAQb,GAAGuL,OAAS1K,EAAQb,GAAU,cAErCb,oBAAkB0B,EAAQb,GAAG86C,kBAAqB37C,oBAAkB0B,EAAQb,GAAG86C,gBAAuB,WACvGj6C,EAAQb,GAAG86C,gBAAuB,QAAE,GAAKxmC,KAAK5N,OAAOK,QAAQJ,GAAK9F,EAAQb,GAAG86C,gBAAuB,QAAE,IAEtGj6C,EAAQb,GAAG0X,mBAAqB7W,EAAQb,GAAGqO,aAC3CtN,EAAQ1B,GAAUwB,EAAQb,GAAGyE,iBAAmB,GAAI5D,EAAQb,GAAGqO,WAAW,KAEzElP,oBAAkB4B,GAQnBF,EAAQb,GAAGqI,KAAOxH,EAAQb,GAAGqI,MAAQ,MAPrCiM,KAAKymC,cAAe,EACfl6C,EAAQb,GAAGqI,OACZxH,EAAQb,GAAGqI,KAAOtH,EAAMuN,OAAUvN,EAAMs3B,WAAa,GAAKt3B,EAAMu3B,aAAe,GAC3Ev3B,EAAMwO,aAAe,GAAKxO,EAAMw3B,kBAAoB,EAAI,WAAa,kBAMjF,IAAI1hB,EAAiB,IAAIzC,GACrBvT,EAAQb,GAAGuL,SAAW1K,EAAQb,GAAGuL,OAAOD,UAAYzK,EAAQb,GAAGuL,OAAOA,UACtE1K,EAAQb,GAAGiL,aAAa4L,EAAexL,kBAAkBxK,EAAQb,GAAGuL,SACpE1K,EAAQb,GAAGwL,UAAUqL,EAAepL,kBAAkB5K,EAAQb,GAAGuL,UAElC,iBAAvB1K,EAAQb,GAAS,OACzBiL,EAAaqJ,KAAKo+B,QAAS7xC,EAAQb,IAE7Ba,EAAQb,GAAGuL,QAA8B,WAApB1K,EAAQb,GAAGqI,MACtCxH,EAAQb,GAAGwL,UAAUL,EAAKM,mBAAoBF,OAAQ,UAKlEmsC,EAAO54C,UAAUg7C,mBAAqB,SAAUp6C,EAAGkM,GAC/C,IAAI6J,EAAQnB,KACRtD,EAAOsD,KAAK5N,OAChB4N,KAAK0jC,gBAAkB1jC,KAAKujC,SAASE,YAAYzxB,aAAW2xB,SAC5D3jC,KAAKwjC,eAAiBxjC,KAAKujC,SAASE,YAAYzxB,aAAWkpB,QAC3D9vC,EAAEs7C,WAAapvC,EACfoF,EAAKyT,QAAQw2B,GAAwBv7C,EAAG,SAAUy5B,GAC9C,IAAIA,EAASvU,OAAb,CAGA,IAAIzjB,EAAMyC,OAAOC,KAAKs1B,EAASp3B,QAAQ9B,OACvC,IAAIwV,EAAM/O,OAAOob,YAGjB,GAAM9Q,EAAKyb,aAAaxsB,QAAWkB,GAAU6P,EAAKnQ,QAAQZ,QAAU+Q,EAAKnQ,QAAQ,aAAc0D,GAA/F,CAOA,GAHAkR,EAAM/O,OAAOm2B,QAAS,EACtBpnB,EAAM/O,OAAOwd,OAAOg3B,OACpBlqC,EAAK8vB,gBAAkB3H,EAASp3B,QAC3BZ,GAAOg4B,EAAS14B,OAASuQ,EAAKK,aAAezF,GAA6B,WAArBA,EAAKuI,YAO3D,OANAnD,EAAK6nC,gBAAiB,EACtB7nC,EAAKO,aAAaqnC,kBAAoBzf,EAAS14B,MACtB,WAArBmL,EAAKuI,cACLnD,EAAKO,aAAaC,YAAc9H,KAAKC,KAAKwvB,EAAS14B,MAAQuQ,EAAKO,aAAaE,gBAEjFT,EAAKqhB,WAkBT,IAfMrhB,EAAKyb,aAAaxsB,SAAUkB,IAAQsU,EAAMyiC,kBAAsB7nC,GAAgBW,IAClFyE,EAAM0lC,uBAAuBhiB,IAE5B1jB,EAAMslC,cAAgB/pC,EAAK2pC,yBAC5BllC,EAAMmlC,iBAAiB5pC,EAAK2pC,wBAAwB,IAEnDllC,EAAM/O,OAAO00C,gBAAiB3lC,EAAM/O,OAAO9F,cAAcg5C,2BACzDnkC,EAAM/O,OAAO9F,cAAcC,QAAQZ,SACpCk5B,EAASp3B,OAAS0T,EAAM/O,OAAOwH,sBAAsBzF,MAAQgN,EAAM/O,OAAOwH,WAAauH,EAAM/O,OAAOo6B,iBAExGrrB,EAAM/O,OAAOwd,OAAOm3B,GAAkB/3C,UAAS7C,MAAO04B,EAAS14B,MAAOsB,OAAQo3B,EAASp3B,OAAQ2G,WAAYywB,EAASzwB,YAAckD,KAC7HoF,EAAKpQ,cAAcC,QAAQZ,QAAW2L,GAA6B,eAArBA,EAAKuI,cAChDvI,GAA6B,cAArBA,EAAKuI,aACjBsB,EAAMqiC,eAAejG,YAErB1wC,EAAK,CACL,GAAIkP,GAAgBW,GAAO,CAEvBpF,EAAKg9B,WAAc/iC,IAAK4P,EAAMuiC,gBAAuB,QAAEpP,WAE3DnzB,EAAMuiC,gBAAgBnQ,mBAAmBj8B,OAExC,CACD,IAAKoF,EAAKyb,aAAaxsB,OAGnB,OAFA+Q,EAAKjK,QAAQnE,UAAY,QACzB04C,MAAM7lC,EAAMmiC,KAAKruB,YAAY,yBAOjC,GAJA9T,EAAMuiC,gBAAgBvN,mBACtBh1B,EAAMuiC,gBAAgBpL,kBACtBn3B,EAAM8vB,YAAYC,QAAQ/vB,EAAM/O,OAAO8kC,aAAalkB,YAAY,GAChE7R,EAAM6kC,iBACF1uC,EAAM,CACN,IAAIb,GAAUa,EAAKuI,aAAe,IAAIxL,cAAgB,YACtD8M,EAAM/O,OAAOwd,OAAOnZ,EAAQa,GACH,cAArBA,EAAKuI,cACLvI,EAAKgZ,QAAS,EACdhZ,EAAK+vB,QACL/vB,EAAK+5B,SAA+C,IAApClwB,EAAM/O,OAAOg/B,qBAA6B95B,EAAK+5B,SAC/DlwB,EAAM/O,OAAO+d,QAAQ8M,GAAuB3lB,IAGpD6J,EAAM/O,OAAOosB,cAEjBrd,EAAM/O,OAAOwd,OAAOq3B,YA3DhBvqC,EAAK8hB,kBA8DjB4kB,EAAO54C,UAAUi7C,mBAAqB,SAAUr6C,EAAGkM,GAC/C0I,KAAKixB,YAAYkB,WAAWnyB,KAAK5N,OAAO8kC,aAAalkB,YAAcof,MAAM,EAAOqO,SAAS,IACzFzgC,KAAK5N,OAAO+d,QAAQ+2B,IAAwBC,MAAO/7C,IACnD4U,KAAK5N,OAAOosB,cACa,SAArBlnB,EAAKuI,aAA+C,WAArBvI,EAAKuI,aACnB,cAAdvI,EAAK6oC,OAGZngC,KAAK5N,OAAOo6B,mBACZxsB,KAAKgmC,iBACLhmC,KAAK5N,OAAO2d,IAAI,iBAAmBo3B,MAAO/7C,MAE9Cg4C,EAAO54C,UAAUq8C,uBAAyB,SAAUz7C,GAChD4U,KAAK4jC,kBAAmB,EACpB5jC,KAAK5N,OAAO7F,QAAQZ,OAAS,GAC7BqU,KAAKonC,aAAah8C,EAAEqC,OAAO,IAE/BqC,EAAekQ,KAAK5N,OAAO7F,SAC3ByT,KAAKwjC,eAAelR,cACpBtyB,KAAK0jC,gBAAgBpR,cACrBtyB,KAAK5N,OAAOwd,OAAOuQ,QAEvBijB,EAAO54C,UAAU48C,aAAe,SAAUb,GAGtC,IAAK,IAFDh6C,EAAU+C,OAAOC,KAAKg3C,GACtB5pB,KACKjxB,EAAI,EAAGmB,EAAMN,EAAQZ,OAAQD,EAAImB,EAAKnB,IAC3CixB,EAAKjxB,IAAOhB,MAAS6B,EAAQb,IACzBsU,KAAK5N,OAAOs0B,6BACZ/J,EAAKjxB,GAAG6E,MAAS1F,oBAAkB8xB,EAAKjxB,GAAG6E,OAAyB,IAAhBosB,EAAKjxB,GAAG6E,OAGpEyP,KAAK5N,OAAOmJ,eAAgBhP,QAAWowB,IAAQ,IAEnDymB,EAAO54C,UAAU68C,oBAAsB,WACnCrnC,KAAKujC,SAAS+D,YAAYt1B,aAAWkpB,OAAQ,IAAI3C,GAAav4B,KAAK5N,OAAQ4N,KAAKo+B,UAChFp+B,KAAKujC,SAAS+D,YAAYt1B,aAAW2xB,QAAS,IAAIpT,GAAcvwB,KAAK5N,OAAQ4N,KAAKo+B,UAClF,IAAImJ,EAAavnC,KAAKo+B,QAAQtnC,WAAW,uBACzCywC,EAAWC,gBAAgBz1B,WAASmpB,OAAQ,IAAI+F,GAAmBjhC,KAAK5N,OAAQ4N,KAAKo+B,UACrFmJ,EAAWC,gBAAgBz1B,WAASmN,KAAM,IAAIif,GAAan+B,KAAK5N,OAAQ4N,KAAKo+B,UAC7EmJ,EAAWC,gBAAgBz1B,WAASgrB,cAAe,IAAIqF,GAA0BpiC,KAAK5N,OAAQ4N,KAAKo+B,UACnGmJ,EAAWC,gBAAgBz1B,WAASqb,OAAQ,IAAIkV,GAAmBtiC,KAAK5N,OAAQ4N,KAAKo+B,UACrFmJ,EAAWC,gBAAgBz1B,WAASge,aAAc,IAAIwS,GAAyBviC,KAAK5N,OAAQ4N,KAAKo+B,UACjGmJ,EAAWC,gBAAgBz1B,WAASie,kBAAmB,IAAI2S,GAA8B3iC,KAAK5N,OAAQ4N,KAAKo+B,UAC3GmJ,EAAWC,gBAAgBz1B,WAAS2d,OAAQ,IAAIkT,GAAmB5iC,KAAK5N,OAAQ4N,KAAKo+B,UACrFmJ,EAAWC,gBAAgBz1B,WAAS4pB,aAAc,IAAIkH,GAAyB7iC,KAAK5N,OAAQ4N,KAAKo+B,UACjGmJ,EAAWC,gBAAgBz1B,WAASgrB,cAAe,IAAIqF,GAA0BpiC,KAAK5N,OAAQ4N,KAAKo+B,UACnGmJ,EAAWC,gBAAgBz1B,WAAS6pB,aAAc,IAAIkH,GAA+B9iC,KAAK5N,OAAQ4N,KAAKo+B,UACvGmJ,EAAWC,gBAAgBz1B,WAAS8pB,aAAc,IAAIsH,GAA0BnjC,KAAK5N,OAAQ4N,KAAKo+B,UAClGmJ,EAAWC,gBAAgBz1B,WAASmX,aAAc,IAAI6Z,GAAyB/iC,KAAK5N,OAAQ4N,KAAKo+B,UACjGmJ,EAAWC,gBAAgBz1B,WAASsb,mBAAoB,IAAIiV,GAAmBtiC,KAAK5N,OAAQ4N,KAAKo+B,UACjGmJ,EAAWC,gBAAgBz1B,WAASyY,YAAa,IAAIyY,GAAoBjjC,KAAK5N,OAAQ4N,KAAKo+B,WAE/FgF,EAAO54C,UAAUojB,iBAAmB,WAChC,IAAIzM,EAAQnB,KACRA,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOqb,GAAGg6B,GAAoBznC,KAAKqnC,oBAAqBrnC,MAC7DA,KAAK5N,OAAOqb,GAAG,oBAAqBzN,KAAKwlC,mBAAoBxlC,MAC7DA,KAAK5N,OAAOqb,GAAGi6B,GAAqB1nC,KAAKkoB,QAASloB,MAClDA,KAAK5N,OAAOqb,GAAGk6B,GAAwB3nC,KAAK0J,gBAAiB1J,MAC7DA,KAAK5N,OAAOqb,GAAGm6B,GAAiB5nC,KAAK6lC,gBAAiB7lC,MACtDA,KAAK5N,OAAOqb,GAAGqV,GAAsB,WAAc3hB,EAAMkiC,WAAY,GAASrjC,MAC9EA,KAAK5N,OAAOqb,GAAG0S,GAAgBngB,KAAKomC,oBAAqBpmC,QAG7DojC,EAAO54C,UAAU+6C,qBAAuB,SAAUn6C,GAC9C,IAAI+V,EAAQnB,KACRvQ,EAAQrE,EAAEqC,OAAO9B,OAAS,EAC9B,GAAI8D,EAAQ,EACR,OAAO2sB,QAAQ7N,QAAQnjB,GAE3B,IAAIy8C,EAASz8C,EAAEqC,OAAO,GAClBq6C,EAAS18C,EAAEqC,OAAOgC,GAClBjC,KACAu6C,EAAW,SAAUvc,IACpBqc,EAAQC,GAAQt4C,QAAQ,SAAUovB,GAC/B,OAAOpxB,EAAU3B,KAAK,IAAIiP,YAAU,QAAS,KAAM8jB,EAAMl0B,OAAO2Q,IAAI8F,EAAMuZ,aAAa,MAAO,QAASkE,EAAMplB,SAEjHgyB,EAAMvxB,MAAMa,YAAUQ,GAAG9N,KAEzBiM,EAAQ,IAAIC,QAChBquC,EAAStuC,GACT,IACIuuC,EADQ,IAAInuC,cAAYzO,EAAEqC,QACR4M,aAAaZ,GAC/BwuC,EAAWjoC,KAAKrV,KAAKkhB,eAAc,GACnCq8B,KACAloC,KAAKrV,KAAK4pB,aACTszB,EAAQC,GAAQt4C,QAAQ,SAAUovB,GAC/B,OAAOspB,EAAWr8C,KAAKsV,EAAMuZ,aAAakE,EAAMl0B,MAAO,QAASk0B,EAAMplB,QAE1EyuC,EAAShuC,MAAMa,YAAUQ,GAAG4sC,KAG5BH,EAASE,GAEb,IAAIvC,EAAW,IAAIn4B,WAKnB,OAJAvN,KAAKrV,KAAKu1B,WAAY+nB,GAAU95B,KAAK,SAAUtN,GAC3CM,EAAMgnC,gBAAgBH,EAAWnnC,EAAEpT,QACnCi4C,EAASn3B,QAAQnjB,KAClBw4B,MAAM,SAAUx4B,GAAK,OAAOs6C,EAAS7hB,OAAOz4B,KACxCs6C,EAASx3B,SAEpBk1B,EAAO54C,UAAUkwB,aAAe,SAAUlhB,EAAKW,EAAU1N,GACrD,OAAIA,aAAiBsO,KACVb,IAAmBxP,MAAO8O,EAAKW,SAAUA,EAAU1N,MAAOA,IAE9D,IAAIqO,YAAUtB,EAAKW,EAAU1N,IAExC22C,EAAO54C,UAAU29C,gBAAkB,SAAUC,EAASC,GAClD,IAAIlnC,EAAQnB,KACR2b,EAAK,IAAI9hB,cAAYwuC,GA6BzB,OA5BAD,EAAQ54C,QAAQ,SAAUiD,EAAShD,EAAO7B,GACtC,IAAI06C,EAAS3sB,EAAGthB,cAAa,IAAIX,SAC5BO,MAAM,IAAIa,YAAU,QAAS,KAAMrI,EAAQ/H,OAAO2Q,IAAI8F,EAAMuZ,aAAa,MAAO,QAASjoB,EAAQ+G,QAAQ,GAC9G/G,EAAQtG,MAAQm8C,EAAOn8C,MACvB,IAAIo8C,EAAY91C,EAAQu8B,MACpBwZ,EAAaF,EAAOtZ,MACpBuZ,EAAUx7C,YACV0F,EAAQu8B,MAAQ7tB,EAAMgnC,gBAAgB11C,EAAQu8B,MAAOsZ,EAAOtZ,QAEhE7tB,EAAM/O,OAAOgC,WAAW5E,QAAQ,SAAUtC,GACtC,OAAOA,EAAIX,QAAQiD,QAAQ,SAAU5E,IACrBA,EAAOmJ,gBAAgBI,MAAQvJ,EAAOmJ,MAAQnJ,EAAOmJ,OAC3DvE,QAAQ,SAAUuE,GACpB,IAAIyF,EAAM5O,EAAOF,MAAQ,MAAQqJ,EAAKM,cAClC1J,EAAO49C,EAAU5b,MAAQ6b,EAAWh8C,QAAU87C,EAAOtZ,MACrDh7B,EAAUmN,EAAM/O,OACpB,GAAa,WAAT2B,EAAmB,CACnB,IAAI00C,EAASF,EAAU5b,MAAQ6b,EAAaF,EAC5C71C,EAAQ2B,WAAWoF,GAAO5O,EAAOsJ,gBAC7BtJ,EAAOsJ,gBAAgBf,KAAKa,EAASy0C,EAAQ79C,GAAU,QAG3D6H,EAAQ2B,WAAWoF,GAAO1O,WAASsJ,WAAWL,EAAKM,eAAe1J,EAAMC,EAAOF,eAM5F09C,GAEJhF,KCphBPsF,GAAqC,WACrC,SAASA,IACL1oC,KAAK2oC,iBAiBT,OAfAD,EAAoBl+C,UAAUg9C,gBAAkB,SAAUrH,EAAMpsC,GAC5DosC,EAAuB,iBAATA,EAAoBA,EAAOyI,eAAa72B,WAAUouB,GAC5Dt1C,oBAAkBmV,KAAK2oC,cAAcxI,MACrCngC,KAAK2oC,cAAcxI,GAAQpsC,IAGnC20C,EAAoBl+C,UAAUq7B,gBAAkB,SAAUsa,GAEtD,GADAA,EAAuB,iBAATA,EAAoBA,EAAOyI,eAAa72B,WAAUouB,GAC5Dt1C,oBAAkBmV,KAAK2oC,cAAcxI,IACrC,KAAM,oBAAsBA,EAAO,gBAGnC,OAAOngC,KAAK2oC,cAAcxI,IAG3BuI,KCpBPG,GAAgC,WAChC,SAASA,IACL7oC,KAAK8oC,YAaT,OAXAD,EAAer+C,UAAUu+C,SAAW,SAAU5I,EAAMpsC,GAC5ClJ,oBAAkBmV,KAAK8oC,SAAS3I,MAChCngC,KAAK8oC,SAAS3I,GAAQpsC,IAG9B80C,EAAer+C,UAAUsM,WAAa,SAAUqpC,GAC5C,GAAIt1C,oBAAkBmV,KAAK8oC,SAAS3I,IAChC,KAAM,eAAiBA,EAAO,qBAElC,OAAOngC,KAAK8oC,SAAS3I,IAElB0I,KCdPG,GAAiC,WACjC,SAASA,IACLhpC,KAAKipC,eAiBT,OAfAD,EAAgBx+C,UAAU88C,YAAc,SAAUnH,EAAMpsC,GACpD,IAAIm1C,EAAQN,eAAa52B,aAAYmuB,GACjCt1C,oBAAkBmV,KAAKipC,YAAYC,MACnClpC,KAAKipC,YAAYC,GAASn1C,IAGlCi1C,EAAgBx+C,UAAUi5C,YAAc,SAAUtD,GAC9C,IAAI+I,EAAQN,eAAa52B,aAAYmuB,GACrC,GAAIt1C,oBAAkBmV,KAAKipC,YAAYC,IACnC,KAAM,gBAAkBA,EAAQ,gBAGhC,OAAOlpC,KAAKipC,YAAYC,IAGzBF,KCjBPG,GAAoC,WACpC,SAASA,EAAmB/2C,GACxB4N,KAAK5N,OAASA,EA6PlB,OA3PA+2C,EAAmB3+C,UAAUgzC,kBAAoB,WAC7C,IAAIr8B,EAAQnB,KACRtU,EAAI,EACJ6jC,EAAUvvB,KAAK5N,OAAOs1B,yBACtBmI,GAAQ,EACRuZ,EAAoB,EACxB,GAAIppC,KAAK5N,OAAOmP,cACZ,IAAK,IAAI1U,EAAMmT,KAAK5N,OAAO9F,cAAcC,QAAQZ,OAAQD,EAAImB,EAAKnB,IAC1DsU,KAAK5N,OAAOs0B,6BAAsD,IAAxB6I,EAAQ7/B,QAAQhE,GAC1DmkC,GAAQ,EAGZ7vB,KAAKqpC,eAAe,IAAIp5C,IAASM,MAAO,SAAW7E,IAGvDsU,KAAK5N,OAAOq3B,gBAAkBzpB,KAAK5N,OAAOkL,aAC1C0C,KAAKqpC,eAAe,IAAIp5C,IAASM,MAAO,SAAW7E,GACnDA,KAEAsU,KAAK5N,OAAOo3B,kBACZxpB,KAAKqpC,eAAe,IAAIp5C,IAASM,MAAO,SAAW7E,GACnDA,KAEJsU,KAAK5N,OAAO+lB,aAAa3oB,QAAQ,SAAU5E,EAAQ6E,GAC/C0R,EAAMkoC,eAAez+C,EAAQilC,GAAS1uB,EAAM/O,OAAOs0B,gCAA6B3xB,EAAYtF,EAAQ/D,KAExG09C,EAAoBppC,KAAKspC,cAActpC,KAAK5N,OAAO+lB,cACzB,SAAtBnY,KAAK5N,OAAO7B,QAAmE,IAA/CyP,KAAK5N,OAAO7B,MAAMsH,WAAWnI,QAAQ,MACrEsQ,KAAKupC,yBAAyBH,IAGtCD,EAAmB3+C,UAAU++C,yBAA2B,SAAUC,GAC9D,IAAIC,EAAa,EACbl8C,EAAayS,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAUisB,GACvD,OAAO/iC,oBAAkB+iC,EAAEr9B,QAAsB,SAAZq9B,EAAEr9B,QAE3C,GAAIhD,EAAW5B,OAAQ,CACdd,oBAAkBmV,KAAK5N,OAAO7B,QAAgC,SAAtByP,KAAK5N,OAAO7B,QACrDk5C,GAA2C,iBAAtBzpC,KAAK5N,OAAO7B,MAAqByuC,SAASh/B,KAAK5N,OAAO7B,MAAO,IAAMyP,KAAK5N,OAAO7B,OAASi5C,GAGjH,IAAK,IADDE,EAAU,EACLnyC,EAAK,EAAGoyC,EAAep8C,EAAYgK,EAAKoyC,EAAah+C,OAAQ4L,IAAM,CACxE,IAAIolB,EAAOgtB,EAAapyC,GACxBmyC,GAAY7+C,oBAAkB8xB,EAAKitB,UACuD,EAA3D,iBAAlBjtB,EAAKitB,SAAwB5K,SAASriB,EAAKitB,SAAU,IAAMjtB,EAAKitB,SAEjF,IAAK,IAAIl+C,EAAI,EAAGA,EAAI6B,EAAW5B,OAAQD,IACpB,IAAX89C,GAAgBxpC,KAAK5N,OAAOiP,eAAiBrB,KAAK6pC,oBAAuBn+C,IAAM6B,EAAW5B,OAAS,GACnGqU,KAAK8pC,wBAAwBv8C,GAElB,IAAXi8C,GAAgBC,EAAaC,EAC7B1pC,KAAK8jC,SAASv2C,EAAW7B,GAAGk+C,SAAU5pC,KAAK5N,OAAO+mC,sBAAsB5rC,EAAW7B,GAAGhB,QAEtE,IAAX8+C,GAAgBC,EAAaC,GAClC1pC,KAAK8jC,SAAS,GAAI9jC,KAAK5N,OAAO+mC,sBAAsB5rC,EAAW7B,GAAGhB,QAAQ,KAK1Fy+C,EAAmB3+C,UAAUs/C,wBAA0B,SAAUv8C,GAC7D,IAAK,IAAIw3C,EAAI,EAAGA,EAAIx3C,EAAW5B,OAAQo5C,IAC/BA,IAAMx3C,EAAW5B,OAAS,IAC1B4B,EAAWw3C,GAAGx0C,MAAQ,IACtByP,KAAK8jC,SAAS,IAAK9jC,KAAK5N,OAAO+mC,sBAAsB5rC,EAAWw3C,GAAGr6C,UAI/Ey+C,EAAmB3+C,UAAU6+C,eAAiB,SAAUz+C,EAAQ6E,EAAO2oC,GACnE,IAAI7Q,EAAc18B,oBAAkB4E,GAASuQ,KAAK5N,OAAO2kC,yBAAyBnsC,EAAO6I,KAAOhE,EAC5Fs6C,EAAS/pC,KAAKgqC,SAASp/C,GACvBq/C,EAAajqC,KAAKspC,cAActpC,KAAK5N,OAAO+lB,cACjC,OAAX4xB,IACA/pC,KAAK8jC,SAASiG,EAAQxiB,GACI,SAAtBvnB,KAAK5N,OAAO7B,QAAmE,IAA/CyP,KAAK5N,OAAO7B,MAAMsH,WAAWnI,QAAQ,MACrEsQ,KAAKupC,yBAAyBU,IAE7BjqC,KAAK5N,OAAOiP,eAA4B,WAAX+2B,GAAyBp4B,KAAK5N,OAAOg/B,oBAAsBpxB,KAAK5N,OAAOiP,gBACrGrB,KAAKkqC,kBAETlqC,KAAK5N,OAAOwd,OAAOzG,IAAsB1Z,MAAO83B,EAAah3B,MAAOw5C,EAAQn/C,OAAQA,EAAQwtC,OAAQA,MAG5G+Q,EAAmB3+C,UAAUs5C,SAAW,SAAUvzC,EAAOd,EAAO06C,GAG5D,GAAuB,qBAAoC,IAAxB55C,EAAMb,QAAQ,QAC3C06C,QAAQ95C,OAAa,UAAM85C,QAAQ95C,OAAa,OAAU,YAAO0P,KAAK5N,OAAOmP,cAAe,CAC9F,IAAI8oC,EAAerqC,KAAK5N,OAAOK,QAAQf,YACvCnB,EAAQyuC,SAASzuC,EAAO,IAAM,MAElC,IAGI+5C,EAHAC,EAASvqC,KAAK5N,OAAOojC,iBACrB7e,EAAU3W,KAAK5N,OAAOie,kBACtBm6B,EAASC,aAAWl6C,GAEpBoL,EAAUqE,KAAK5N,OAAOg/B,mBACtBsZ,EAAO1qC,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,qBAEpDi8C,EADA3uC,GAAWlM,GAASkM,GAAW+uC,GAAQA,EAAKr8C,cAAc,YAC9Cq8C,EAAKr8C,cAAc,YAAYsF,SAASlE,EAAQkM,GAGhD4uC,EAAOl8C,cAAc,YAAYsF,SAASlE,MAExC06C,EACdG,EAAUp5C,MAAMX,MAAQi6C,EAEnBF,GAAaH,IAClBG,EAAUp5C,MAAMX,MAAQ,KAE5B,IAAIo6C,GAEAA,EADAhvC,GAAWlM,GAASkM,EACPqE,KAAK5N,OAAO8kC,aAAa7oC,cAAc,qBAC/CA,cAAc,YAAYsF,SAASlE,EAAQkM,GAGnCgb,EAAQtoB,cAAc,YAAYsF,SAASlE,MAEzC06C,EACfQ,EAAWz5C,MAAMX,MAAQi6C,EAEpBG,GAAcR,IACnBQ,EAAWz5C,MAAMX,MAAQ,KAI7B,IAAK,IAFDsR,EAAO7B,KAAK5N,OAAOK,QAAQtE,iBAAiB,0BAC5Cy8C,KACKl/C,EAAI,EAAGA,EAAImW,EAAKlW,OAAQD,IAC7B,IAAK,IAAIyB,EAAI,EAAGA,EAAI0U,EAAKnW,GAAG2C,cAAc,YAAYsF,SAAShI,OAAQwB,IACnEy9C,EAAa/+C,KAAKgW,EAAKnW,GAAG2C,cAAc,YAAYsF,SAASxG,IAGjE0U,EAAKlW,SACLi/C,EAAan7C,GAAOyB,MAAMX,MAAQi6C,IAG1CrB,EAAmB3+C,UAAUqgD,kBAAoB,SAAUp4C,GAGvD,OAFeuN,KAAK8qC,uBAAuBr4C,EAAS,YACzCuN,KAAK8qC,uBAAuBr4C,EAAS,SAGpD02C,EAAmB3+C,UAAUsgD,uBAAyB,SAAUr4C,EAASwR,GAIrE,IAHA,IAAI8mC,EAAUt4C,EAAQwR,EAAY,kBAC9BxW,EAAS,EACT6E,GAAa,eAAgB,eAAgB,kBAAmB,cAAe,aAC5Ey4C,GACCz4C,EAAUiI,KAAK,SAAU9N,GAAS,OAAOs+C,EAAQz4C,UAAUC,SAAS9F,OACpEgB,GAAUs9C,EAAQz5C,cAEtBy5C,EAAUA,EAAQ9mC,EAAY,kBAElC,OAAOxW,GAEX07C,EAAmB3+C,UAAUq/C,iBAAmB,WAC5C,IAAImB,EAAkBhrC,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAU9L,GAC5D,OAAOhL,oBAAkBgL,EAAItF,QAAU1F,oBAAkBgL,EAAI+zC,YAC9Dj+C,OACH,OAAQqU,KAAK5N,OAAO+lB,aAAaxsB,SAAWq/C,GAEhD7B,EAAmB3+C,UAAUw/C,SAAW,SAAUp/C,GAK9C,GAJIC,oBAAkBD,EAAO2F,QAAUyP,KAAK5N,OAAOiP,eAC5CxW,oBAAkBD,EAAOg/C,YAAc5pC,KAAK6pC,qBAC/Cj/C,EAAO2F,MAAQ,MAEd3F,EAAO2F,MACR,OAAO,KAEX,IAAIA,EAAQyuC,SAASp0C,EAAO2F,MAAMsH,WAAY,IAC9C,OAAIjN,EAAOg/C,UAAYr5C,EAAQyuC,SAASp0C,EAAOg/C,SAAS/xC,WAAY,IACzDjN,EAAOg/C,SAERh/C,EAAOqgD,UAAY16C,EAAQyuC,SAASp0C,EAAOqgD,SAASpzC,WAAY,IAC/DjN,EAAOqgD,SAGPrgD,EAAO2F,OAGtB44C,EAAmB3+C,UAAU8+C,cAAgB,SAAU/8C,GAEnD,IAAK,IADDi9C,EAAS,EACJjyC,EAAK,EAAG8qB,EAAY91B,EAASgL,EAAK8qB,EAAU12B,OAAQ4L,IAAM,CAC/D,IAAI3M,EAASy3B,EAAU9qB,GACnBwyC,EAAS/pC,KAAKgqC,SAASp/C,GACN,SAAjBA,EAAO2F,QACPw5C,EAAS,IAEU,IAAnBn/C,EAAO4F,SAAgC,OAAXu5C,IAC5BP,GAAUxK,SAAS+K,EAAOlyC,WAAY,KAG9C,OAAO2xC,GAEXL,EAAmB3+C,UAAU0gD,4BAA8B,SAAUC,GACjE,IAAI5+C,EAAUyT,KAAK5N,OAAO+lB,aAAajlB,QAOvC,MANkB,YAAdi4C,EACA5+C,EAAQ+zB,OAAO,EAAGtgB,KAAK5N,OAAOg/B,oBAEX,WAAd+Z,GACL5+C,EAAQ+zB,OAAOtgB,KAAK5N,OAAOg/B,mBAAoB7kC,EAAQZ,QAEpD8+C,aAAWzqC,KAAKspC,cAAc/8C,KAEzC48C,EAAmB3+C,UAAU4gD,sBAAwB,WACjD,IAAIC,EAAcrrC,KAAKkrC,4BAA4B,UACnDlrC,KAAK5N,OAAOojC,iBAAiBtkC,MAAMX,MAAQ86C,EAC3CrrC,KAAK5N,OAAOie,kBAAkBnf,MAAMX,MAAQ86C,GAEhDlC,EAAmB3+C,UAAU8gD,uBAAyB,WAClD,IAAIC,EAAe,GACfC,EAAiBxrC,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAUisB,GAAK,OAAO/iC,oBAAkB+iC,EAAEr9B,SAAW5E,QAAU,EAChH8/C,EAAczrC,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAUisB,GAAK,MAAoB,SAAZA,EAAEr9B,QAAsB5E,QAAU,EAC1E,iBAAtBqU,KAAK5N,OAAO7B,OAAuBi7C,GAAmBC,EAGvDD,GAAmBC,IACzBF,EAAevrC,KAAKkrC,4BAA4B,YAHhDK,EAAed,aAAWzqC,KAAK5N,OAAO7B,MAAQyuC,SAASh/B,KAAKkrC,4BAA4B,UAAU11C,MAAM,MAAM,GAAI,IAAM,GAKxHwK,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,oBAAoB0iB,oBACjE/Q,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,oBAAoB0iB,kBAAkB7f,MAAMX,MACnFg7C,GAEVvrC,KAAK5N,OAAO8kC,aAAa7oC,cAAc,qBAAqB0iB,kBAAkB7f,MAAMX,MAChFg7C,GAERpC,EAAmB3+C,UAAUkhD,0BAA4B,WACrD,IAAIL,EAAcrrC,KAAKkrC,4BAA4B,UACnDlrC,KAAK5N,OAAOK,QAAQtE,iBAAiB,0BAA0B,GAAG+C,MAAMX,MAAQ86C,GAEpFlC,EAAmB3+C,UAAUmhD,2BAA6B,WACtD,IAAIJ,EAAevrC,KAAKkrC,4BAA4B,WACpDlrC,KAAK5N,OAAOK,QAAQtE,iBAAiB,0BAA0B,GAAG+C,MAAMX,MAAQg7C,GAEpFpC,EAAmB3+C,UAAU0/C,gBAAkB,WAC3C,IAAIV,EAASiB,aAAWzqC,KAAKspC,cAActpC,KAAK5N,OAAO+lB,eACnDnY,KAAK5N,OAAOg/B,oBACZpxB,KAAKorC,wBACLprC,KAAKsrC,4BAGDtrC,KAAK5N,OAAOq3B,gBAAkBzpB,KAAK5N,OAAOkL,YAC1C0C,KAAKqpC,eAAe,IAAIp5C,IAASM,MAAO,UAE5CyP,KAAK5N,OAAOojC,iBAAiBtkC,MAAMX,MAAQi5C,EAC3CxpC,KAAK5N,OAAOie,kBAAkBnf,MAAMX,MAAQi5C,GAEhD,IAAI3nC,EAAO7B,KAAK5N,OAAOK,QAAQpE,cAAc,0BACzCwT,GAAQ7B,KAAK5N,OAAOg/B,oBACpBpxB,KAAK0rC,4BACL1rC,KAAK2rC,8BAEA9pC,IACLA,EAAK3Q,MAAMX,MAAQi5C,IAGpBL,KCvQP1d,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAqBxC8f,GAA+B,WAC/B,SAASA,EAAcx5C,GACnB4N,KAAK6rC,eACL7rC,KAAK8rC,SAAU,EACf9rC,KAAK+rC,QACL/rC,KAAKgsC,QAAS,EACdhsC,KAAKisC,WAAY,EACjBjsC,KAAKksC,cAAe,EACpBlsC,KAAKmsC,eACLnsC,KAAKosC,UAAYpsC,KAAKqsC,eAAc,GACpCrsC,KAAK5N,OAASA,EACd4N,KAAK4N,mBA2WT,OAzWAg+B,EAAcphD,UAAU8hD,WAAa,SAAUlhD,GAC3C,IAAId,EAASc,EAAEd,OACf0V,KAAKksC,cAAe,EACpBlsC,KAAKisC,UAAY3hD,EAAOgI,UAAUC,SAAS,WAE/Cq5C,EAAcphD,UAAU+hD,QAAU,WAC9B,KAAIvsC,KAAK5N,OAAOob,aAAeqK,UAAQC,UAAY9X,KAAK5N,OAAO4J,sBAA/D,CAGAgE,KAAKwsC,UAAqC,IAA3BxsC,KAAK5N,OAAO2gC,WAAgD,IAA9B/yB,KAAK5N,OAAO0qC,eACzD,IAAIsL,EAAUpoC,KAAKk3B,aAAauV,OAAOC,IAAI,GAAI,GAAI,EAAG,GAAI,KAAM1sC,KAAKk3B,aAAayV,aAClF3sC,KAAKk3B,aAAauV,OAAO9rB,OAAOynB,EAAQ,GAAIA,EAAQ,IAChDpoC,KAAKisC,YACLjsC,KAAK6U,QACL7U,KAAKisC,WAAY,KAGzBL,EAAcphD,UAAUoiD,aAAe,SAAUxhD,GACzC4U,KAAK5N,OAAOob,aAGZpiB,EAAEd,QAAUc,EAAEd,OAAOgI,UAAUC,SAAS,kBACxCyN,KAAK6rC,YAAYgB,YAAa,EAC9B/9C,YAAUkR,KAAK6rC,YAAYp5C,UAAW,YAAa,cAG3Dm5C,EAAcphD,UAAUsiD,OAAS,SAAU1hD,GAClC4U,KAAK5N,OAAOm2B,QAAUn9B,KAAOA,EAAE2hD,eAAiBtT,UAAQruC,EAAE2hD,cAAe,cAG9E/sC,KAAKgtC,cACLhtC,KAAKisC,WAAY,EACjBjsC,KAAK6rC,YAAYgB,YAAa,EAC1B7sC,KAAKk3B,aAAa+V,eAAeC,iBACjCltC,KAAKk3B,aAAa+V,eAAeC,eAAeC,SAAW,KAGnEvB,EAAcphD,UAAU4iD,QAAU,SAAUhiD,EAAGiiD,GAC3C,IAAIC,GAAaziD,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,mBACjDijD,GAAY1iD,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,kBACpDgjD,EAAYA,GAAaC,GAAYD,EAAYA,EACjD,IAAIjc,GAAYxmC,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,uBAC/CO,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,oBACzC,MAAKgjD,GAAaziD,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,mBAClDc,EAAEd,OAAOgI,UAAUC,SAAS,eAC3B1H,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,mBAIzC,GADA0V,KAAKwsC,UAAUc,EAAWjc,IACrBic,GAAaziD,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,mBAClDc,EAAEd,OAAOgI,UAAUC,SAAS,mBAC5ByN,KAAKwtC,mBAFT,CAKA,IAAIC,GAAen9B,QAAQ,EAAOo9B,OAAO,EAAOC,SAAU9iD,oBAAkBO,EAAEd,QAASsjD,UAAWxiD,GAElG,GADA4U,KAAK5N,OAAOwd,OAAOi+B,GAAyBJ,IACxCA,EAAWn9B,SAAUmpB,UAAQruC,EAAEd,OAAQ,oBAG3C0V,KAAKwsC,UAAUc,EAAWjc,GACtBrxB,KAAKk3B,cAAc,CAEnB,IAAkB,IADFl3B,KAAKk3B,aAAakW,QAAQhiD,EAAGiiD,GAEzC,OAEJrtC,KAAK6U,WAGb+2B,EAAcphD,UAAUsjD,WAAa,SAAU1iD,GAC3C,IAAI4U,KAAK+tC,OAAO3iD,GAAhB,CAGA,IAAIqiD,GAAen9B,QAAQ,EAAOo9B,OAAO,EAAMC,SAAS,EAAOK,QAAS5iD,GAExE,GADA4U,KAAK5N,OAAOwd,OAAOi+B,GAAyBJ,IACxCA,EAAWn9B,OAAf,CAGA,IAAI29B,EAASjuC,KAAKk3B,aAAauV,OAAOrE,QACtCpoC,KAAK6rC,YAAYqC,SAAU,EAC3B,IAAIC,EAAWnuC,KAAKk3B,aAAakX,KAAKhjD,EAAEqL,OAAQw3C,GAChDjuC,KAAK+rC,KAAOoC,EACRA,EAASpC,OACT/rC,KAAKwsC,WAAW2B,EAASE,SAAUF,EAASG,UAC5CtuC,KAAKk3B,aAAauV,OAAOrE,QAAUpoC,KAAKk3B,aAAaqX,eAAeN,EAAQE,EAAUnuC,KAAKwuC,OAAQpjD,EAAEqL,QACrGuJ,KAAKmsC,gBAETnsC,KAAKyuC,eAAerjD,EAAEqL,OAAQuJ,KAAKk3B,eAEjB,IADFl3B,KAAKk3B,aAAa4W,WAAW1iD,IAK7CA,EAAEsjD,iBACF1uC,KAAK6U,MAAMzpB,IAJP4U,KAAK2uC,oBAMb/C,EAAcphD,UAAUujD,OAAS,SAAU3iD,GACvC,IAAId,EAASc,EAAEd,OACf,IAAKA,EACD,OAAO,EAEX,GAAI0V,KAAK6rC,YAAYgB,WAEjB,OADA7sC,KAAK2uC,kBACE,EAEX,IAAK,SAAU,YAAYj/C,QAAQtE,EAAEqL,SAAW,EAE5C,OADAuJ,KAAK2uC,kBACE,EAMX,OAJSlV,UAAQnvC,EAAQ,QAAUmvC,UAAQnvC,EAAQ,MAAM6iD,UACS,OAAxD1T,UAAQvrC,SAAS0gD,cAAe,qBACtC5uC,KAAKgtC,cAEY,WAAb5hD,EAAEqL,QACgC,UAAlCuJ,KAAK5N,OAAOiE,aAAaC,OAAqB0J,KAAK5N,OAAOm2B,SAAW,SAAU,MAAM74B,QAAQtE,EAAEqL,SAAW,IAClD,OAAxDgjC,UAAQvrC,SAAS0gD,cAAe,qBACiD,OAAjFnV,UAAQvrC,SAAS0gD,cAAe,IAAM5uC,KAAK5N,OAAOK,QAAQJ,GAAK,gBACvD,QAAS,YAAa,aACtB,YAAa,aAAc,aAAa3C,QAAQtE,EAAEqL,SAAW,GAC/B,OAAtCgjC,UAAQnvC,EAAQ,mBAAmE,OAArCmvC,UAAQnvC,EAAQ,kBACjD,UAAbc,EAAEqL,SAAwBnM,EAAOgI,UAAUC,SAAS,iBAAwD,OAArCknC,UAAQnvC,EAAQ,kBACzC,OAA3CmvC,UAAQnvC,EAAQ,wBAE/BshD,EAAcphD,UAAUqkD,kBAAoB,WACxC,OAAO7uC,KAAK6rC,YAAYqB,gBAE5BtB,EAAcphD,UAAU0sC,WAAa,WACjC,OAAOl3B,KAAKwuC,QAAUxuC,KAAK2W,SAE/Bi1B,EAAcphD,UAAUgiD,UAAY,SAAU71B,EAAS0a,GACnDrxB,KAAKwuC,OAAS73B,EAAU0a,EAAWrxB,KAAK8uC,SAAW9uC,KAAK2W,QACpD0a,EAAWrxB,KAAK+uC,QAAU/uC,KAAKuqC,QAEvCqB,EAAcphD,UAAUwkD,kBAAoB,SAAUv8C,GAClD,IAAI0O,EAAQnB,KACZA,KAAK6rC,YAAYqB,eAAiBz6C,EAClCw8C,WAAW,WAAc,OAAO9tC,EAAM0qC,YAAYqB,eAAer4B,SAAY,IAEjF+2B,EAAcphD,UAAUqqB,MAAQ,SAAUzpB,GACtC4U,KAAKgtC,cACLhtC,KAAKkvC,SAASlvC,KAAKk3B,aAAa+V,eAAgB7hD,IAEpDwgD,EAAcphD,UAAUwiD,YAAc,SAAU5hD,GACvC4U,KAAK6rC,YAAYp5C,UAGtBsG,eAAaiH,KAAK6rC,YAAYp5C,QAASuN,KAAK6rC,YAAYqB,iBAAkB,YAAa,YACvFltC,KAAK6rC,YAAYp5C,QAAQ06C,UAAY,IAEzCvB,EAAcphD,UAAU0kD,SAAW,SAAUC,EAAM/jD,GAG/C,GAFA4U,KAAK6rC,YAAcsD,EACnBnvC,KAAK6rC,YAAYqC,QAAUiB,EAAKjB,UAAYrjD,oBAAkBO,GACzD+jD,EAAK18C,QAAV,CAGA,IAAI28C,EAAYD,EAAKjC,eAAe56C,UAAUC,SAAS,WACvD,IAAI68C,EAAJ,CAGIpvC,KAAK6rC,YAAYqC,SACjBp/C,YAAUqgD,EAAK18C,UAAW,cAE9B3D,YAAUqgD,EAAKjC,iBAAkB,YACjCiC,EAAK18C,QAAQ06C,SAAW,EACnBiC,GACDpvC,KAAKgvC,kBAAkBG,EAAKjC,gBAEhCltC,KAAK5N,OAAOwd,OAAOy/B,IACf58C,QAAS08C,EAAKjC,eACd96C,OAAQ+8C,EAAK18C,QACb88B,QAASvvB,KAAKk3B,aAAauV,OAAOrE,QAClCsF,OAAQ7iD,oBAAkBO,GAC1BuiD,QAAS9iD,oBAAkBO,GAC3B4iD,QAAS5iD,EACTkkD,OAAQtvC,KAAK+rC,KAAKA,KAClBwD,UAAWvvC,KAAKk3B,aAAasY,QAAQpkD,GACrC8iD,SAAUrjD,oBAAkBO,GAC5B+iD,SAAUnuC,KAAK+rC,OAEnB,IAAIvuC,EAAKwC,KAAKk3B,aAAauV,OAAOrE,QAAS/K,EAAW7/B,EAAG,GAAIiyC,EAAYjyC,EAAG,GAC5EwC,KAAKmsC,aAAgB9O,SAAUA,EAAUoS,UAAWA,GACpDzvC,KAAK0vC,iBAAmB1vC,KAAK5N,OAAOu9C,iBAAiBF,GAAWh8C,IAChEuM,KAAKksC,cAAe,KAExBN,EAAcphD,UAAU6hD,cAAgB,SAAU11B,GAC9C,IAAIxV,EAAQnB,KACZ,OAAO,SAAU5U,GACTurB,GAAYvrB,EAAEkM,MAAQlM,EAAEkM,KAAK+5B,WAAclwB,EAAM2tC,SACjD3tC,EAAM2tC,SAAW,IAAIc,GAAkBzuC,EAAM/O,QAExCukB,IAAYxV,EAAMwV,UACvBxV,EAAMwV,QAAU,IAAIk5B,GAAa1uC,EAAM/O,UAEtCukB,GAAYvrB,EAAEkM,MAAQlM,EAAEkM,KAAK+5B,WAAclwB,EAAM4tC,QAClD5tC,EAAM4tC,QAAU,IAAIe,GAAiB3uC,EAAM/O,QAErCukB,GAAYxV,EAAMopC,SACxBppC,EAAMopC,OAAS,IAAIwF,GAAY5uC,EAAM/O,SAEzC,IAAI49C,EAASr5B,EAAWvrB,EAAEkM,MAAQlM,EAAEkM,KAAK+5B,SAAYlwB,EAAM2tC,SAAW3tC,EAAMwV,QACvEvrB,EAAEkM,MAAQlM,EAAEkM,KAAK+5B,SAAYlwB,EAAM4tC,QAAU5tC,EAAMopC,OACpDljB,EAAO1Q,EAAUvrB,EAAEi8B,KAAKn0B,MAAMiO,EAAM/O,OAAO2gC,YAAc3nC,EAAEi8B,KAC3D4oB,EAAYt5B,EAAUvrB,EAAEi8B,KAAKn0B,MAAM,EAAGiO,EAAM/O,OAAO2gC,YAAc3nC,EAAEi8B,KACnE6oB,GAAiBrlD,oBAAkBsW,EAAM/O,OAAO41B,aAChDykB,EAASuD,EAAOvD,OAAO0D,SAASF,EAAWD,EAAO99C,SAAUg+C,GAC5DE,EAAqBjvC,EAAM/O,OAAOg/B,mBACtC,GAAe,aAAXhmC,EAAE+0C,MAAuBiQ,EAAoB,CAG7C,IAAK,IAFDC,EAAiBhpB,EAAK5K,IAAI,SAAUvvB,GAAO,OAAOA,EAAIoiB,UACtDghC,EAAgBjpB,EAAK5K,IAAI,SAAUvvB,GAAO,OAAOA,EAAIoiB,UAChD5jB,EAAI,EAAGA,EAAI27B,EAAK17B,OAAQD,IACzB27B,EAAK37B,GAAG2L,MAAM1L,OAASykD,IACvBE,EAAc5kD,GAAG2L,MAAQgwB,EAAK37B,GAAG2L,MAAMnE,MAAM,EAAGk9C,GAChDC,EAAe3kD,GAAG2L,MAAQgwB,EAAK37B,GAAG2L,MAAMnE,MAAMk9C,IAGtDjvC,EAAM2tC,SAASrC,OAAO0D,SAASG,EAAenvC,EAAM2tC,SAAS58C,SAAUg+C,GACvEF,EAAOvD,OAAO0D,SAASE,EAAgBL,EAAO99C,SAAUg+C,QAGxDF,EAAOvD,OAAO0D,SAAS9oB,EAAM2oB,EAAO99C,SAAUg+C,GAOlD,GALAF,EAAO7lB,aAAa8lB,GAAaxD,OAAQA,EAAQ8D,gBAAkBnlD,EAAEkM,MAAQlM,EAAEkM,KAAK+5B,SAAYlwB,EAAM4tC,QAAU5tC,EAAMopC,UACjH1yB,UAAQC,WAAa3W,EAAM+qC,cAAgB9gD,GAAKA,EAAEkM,MAA+B,WAAvBlM,EAAEkM,KAAKuI,cAClEsB,EAAM8qC,WAAY,EAClB9qC,EAAM/O,OAAOK,QAAQoiB,SAErBzpB,GAAKA,EAAEkM,MAA+B,kBAAvBlM,EAAEkM,KAAKuI,YACtB,GAAIsB,EAAM0qC,YAAYp4C,IAAK,CACvB,IAAI+8C,EAKJ,GAJWplD,EAAEi8B,KAAK9sB,KAAK,SAAUrN,EAAKxB,GAElC,OADA8kD,EAAU9kD,EACHwB,EAAIuG,MAAQ0N,EAAM0qC,YAAYp4C,MAE/B,CACN0N,EAAMwV,QAAQ81B,OAAOrE,QAAQ,GAAKoI,EAClCrvC,EAAMwV,QAAQ81B,OAAOrE,QAAQ,GAAKjnC,EAAM/O,OAAO6qC,oBAAoB97B,EAAMuuC,mBAAqB,EAE9F,GADIe,EAAetvC,EAAM+1B,aAAa+V,eAAeC,eACnC,CACd,IAAIwD,EAAeD,EAAaz/C,wBAC5B2/C,EAAexvC,EAAM/O,OAAOK,QAAQzB,wBACpC0/C,EAAan/C,KAAO,GAAKm/C,EAAal/C,MAAQ,GAC9Ck/C,EAAa7+C,OAASuD,KAAKw7C,IAAID,EAAa9+C,MAAOvB,OAAOugD,YACtD3iD,SAAS4iD,gBAAgBl8C,cAC7B87C,EAAaK,QAAU37C,KAAKw7C,IAAID,EAAaI,OAAQzgD,OAAO0gD,aACxD9iD,SAAS4iD,gBAAgBG,eAC7B9vC,EAAM0T,eAKjB,GAAIzpB,EAAEkM,KAAKm5C,cAAgBrlD,EAAEkM,KAAKm5C,aAAan+C,UAAUC,SAAS,gBAAiB,CACpF,IAAIk+C,GAAAA,EAAetvC,EAAM/O,OAAOK,QAAQpE,cAAc,IAAMjD,EAAEkM,KAAKm5C,aAAap+C,MAE5Eo+C,EAAa57B,WAMjC+2B,EAAcphD,UAAUojB,iBAAmB,WACvC,IAAIzM,EAAQnB,KACRA,KAAK5N,OAAOob,cAGhB2F,eAAazc,IAAIsJ,KAAK5N,OAAOK,QAAS,YAAauN,KAAKssC,WAAYtsC,MACpEmT,eAAazc,IAAIsJ,KAAK5N,OAAOK,QAAS,QAASuN,KAAKusC,QAASvsC,MAC7DA,KAAK5N,OAAOK,QAAQmb,iBAAiB,QAAS5N,KAAKkxC,eAAiB,SAAU9lD,GAAK,OAAO+V,EAAMyrC,aAAaxhD,KAAO,GACpH+nB,eAAazc,IAAIsJ,KAAK5N,OAAOK,QAAS,WAAYuN,KAAK8sC,OAAQ9sC,MAC/DA,KAAK5N,OAAOqb,GAAG0jC,GAAkBnxC,KAAK8tC,WAAY9tC,MAClDA,KAAK5N,OAAOqb,GAAG2jC,GAAapxC,KAAKotC,QAASptC,MAC1CA,KAAK5N,OAAOqb,GAAG4jC,GAAoBrxC,KAAKosC,UAAWpsC,MACnDA,KAAK5N,OAAOqb,GAAG6jC,GAAsBtxC,KAAKosC,UAAWpsC,MACrDA,KAAK5N,OAAOqb,GAAG8jC,GAAuBvxC,KAAKqsC,gBAAiBrsC,MAC5DA,KAAK5N,OAAOqb,GAAG,aAAczN,KAAKwxC,aAAcxxC,OAC/C,aAAc,aAAaxQ,QAAQ,SAAUiiD,GAAO,OAAOtwC,EAAM/O,OAAOqb,GAAGgkC,EAAKtwC,EAAMwtC,eAAgBxtC,MACtG,WAAW3R,QAAQ,SAAUiH,GAAU,OAAO0K,EAAM/O,OAAOqb,GAAGhX,EAAS,YAAa0K,EAAMqwC,aAAcrwC,KACzGnB,KAAK5N,OAAOqb,GAAGikC,GAAgB1xC,KAAKosC,UAAWpsC,MAC/CA,KAAK5N,OAAOqb,GAAGkkC,GAAmB3xC,KAAKosC,UAAWpsC,MAClDA,KAAK5N,OAAOqb,GAAGmkC,GAAmB5xC,KAAKosC,UAAWpsC,MAClDA,KAAK5N,OAAOqb,GAAGokC,GAAuB7xC,KAAKosC,UAAWpsC,MACtDA,KAAK5N,OAAOqb,GAAGqkC,GAAe9xC,KAAKosC,UAAWpsC,MAC9CA,KAAK5N,OAAOqb,GAAG4hC,GAAmBrvC,KAAK+xC,kBAAmB/xC,QAE9D4rC,EAAcphD,UAAUsnB,oBAAsB,WAC1C,IAAI3Q,EAAQnB,KACRA,KAAK5N,OAAOob,cAGhB2F,eAAa/f,OAAO4M,KAAK5N,OAAOK,QAAS,YAAauN,KAAKssC,YAC3Dn5B,eAAa/f,OAAO4M,KAAK5N,OAAOK,QAAS,QAASuN,KAAKusC,SACvDp5B,eAAa/f,OAAO4M,KAAK5N,OAAOK,QAAS,WAAYuN,KAAK8sC,QAC1D9sC,KAAK5N,OAAOK,QAAQqf,oBAAoB,QAAS9R,KAAKkxC,gBAAgB,GACtElxC,KAAK5N,OAAOyf,IAAIs/B,GAAkBnxC,KAAK8tC,YACvC9tC,KAAK5N,OAAOyf,IAAIu/B,GAAapxC,KAAKotC,SAClCptC,KAAK5N,OAAOyf,IAAIw/B,GAAoBrxC,KAAKosC,WACzCpsC,KAAK5N,OAAOyf,IAAIy/B,GAAsBtxC,KAAKosC,WAC3CpsC,KAAK5N,OAAOyf,IAAI0/B,GAAuBvxC,KAAKqsC,iBAC5CrsC,KAAK5N,OAAOyf,IAAI,aAAc7R,KAAKwxC,eAClC,aAAc,aAAahiD,QAAQ,SAAUiiD,GAAO,OAAOtwC,EAAM/O,OAAOyf,IAAI4/B,EAAKtwC,EAAMqsC,iBACvF,WAAWh+C,QAAQ,SAAUiH,GAAU,OAAO0K,EAAM/O,OAAOyf,IAAIpb,EAAS,YAAa0K,EAAMqwC,gBAC5FxxC,KAAK5N,OAAOyf,IAAI6/B,GAAgB1xC,KAAKosC,WACrCpsC,KAAK5N,OAAOyf,IAAI+/B,GAAmB5xC,KAAKosC,WACxCpsC,KAAK5N,OAAOyf,IAAI8/B,GAAmB3xC,KAAKosC,WACxCpsC,KAAK5N,OAAOyf,IAAIggC,GAAuB7xC,KAAKosC,WAC5CpsC,KAAK5N,OAAOyf,IAAIigC,GAAe9xC,KAAKosC,WACpCpsC,KAAK5N,OAAOyf,IAAIw9B,GAAmBrvC,KAAK+xC,qBAE5CnG,EAAcphD,UAAUwe,QAAU,WAC9BhJ,KAAK8R,uBAET85B,EAAcphD,UAAUgnD,aAAe,WACnCxxC,KAAKkvC,SAASlvC,KAAKk3B,aAAa+V,iBAEpCrB,EAAcphD,UAAUgjD,aAAe,WACnCxtC,KAAKk3B,aAAauV,OAAOrE,QAAUpoC,KAAKk3B,aAAauV,OAAOC,IAAI,GAAI,GAAI,EAAG,GAAI,YAAa1sC,KAAKk3B,aAAayV,aAC9G3sC,KAAK2uC,kBAET/C,EAAcphD,UAAUmkD,eAAiB,WAChC3uC,KAAK6rC,YAAYp5C,SAAYuN,KAAK6rC,YAAYqB,gBAGnDn0C,eAAaiH,KAAK6rC,YAAYp5C,QAASuN,KAAK6rC,YAAYqB,iBAAkB,UAAW,eAEzFtB,EAAcphD,UAAUwnD,eAAiB,WACrC,IAAIhG,EAAShsC,KAAKgsC,OAElB,OADAhsC,KAAKgsC,QAAS,EACPA,GAAW3O,SAAU,KAAMoS,UAAW,MAASzvC,KAAKmsC,aAE/DP,EAAcphD,UAAUynD,eAAiB,WACrCjyC,KAAKgsC,QAAS,GAElBJ,EAAcphD,UAAUikD,eAAiB,SAAUh4C,EAAQ+3C,GACvD,IAAIrtC,EAAQnB,KACZ,GAAkC,IAA9BA,KAAK5N,OAAO0qC,eAAkD,IAA3B98B,KAAK5N,OAAO2gC,WAAnD,CAGA,IAAIoc,EACA+C,GACAC,KAAQ,WAAc,OAAU9D,UAAWc,EAAK7B,UAAWgB,UAAU,IACrEhiB,IAAO,WAAc,OAAU+hB,UAAWc,EAAK7B,UAAWgB,UAAU,IACpE8D,SAAY,WAAc,OAAU/D,UAAU,EAAMC,SAAyC,IAA/BntC,EAAM/O,OAAO0qC,gBAC3EuV,QAAW,WAAc,OAAUhE,UAAU,EAAOC,UAAU,KAElE,GAAM73C,KAAUy7C,EAAhB,CAGA/C,EAAOX,EAAOgB,UACd,IAAIzD,EAAOmG,EAAQz7C,KACnBuJ,KAAKwsC,WAAWT,EAAKsC,SAAUtC,EAAKuC,UACpCtuC,KAAKk3B,aAAauV,OAAOrE,QAAUoG,EAAO/B,OAAOrE,WAErDwD,EAAcphD,UAAUunD,kBAAoB,SAAU3mD,GAClD,GAAMA,EAAEsiD,OAAStiD,EAAEmkD,UAAUjC,WAAkC,UAArBliD,EAAE4iD,QAAQv3C,SAC5CrL,EAAEgH,OAAOE,UAAUC,SAAS,iBAC5BnH,EAAEgH,OAAOE,UAAUC,SAAS,kBAAoBnH,EAAEgH,OAAOE,UAAUC,SAAS,mBAFpF,CAKAyN,KAAK2uC,iBACL,IAAI2D,EAAWtyC,KAAKk3B,aAAaqb,aAAavyC,KAAK6uC,qBACnD7uC,KAAKgvC,kBAAkBsD,GACvBtyC,KAAK6rC,YAAYgB,YAAa,IAE3BjB,KAOP4G,GAAwB,WACxB,SAASA,IACLxyC,KAAKysC,UACLzsC,KAAKooC,WA2DT,OAzDAoK,EAAOhoD,UAAUutC,IAAM,SAAUsF,EAAU9V,EAAakrB,GACpDpV,EAAWjoC,KAAKsJ,IAAI,EAAGtJ,KAAKw7C,IAAIvT,EAAUr9B,KAAKqnB,OAC/CE,EAAcnyB,KAAKsJ,IAAI,EAAGtJ,KAAKw7C,IAAIrpB,EAAavnB,KAAKzT,UACrDyT,KAAKysC,OAAOpP,GAAYr9B,KAAKysC,OAAOpP,OACpCr9B,KAAKysC,OAAOpP,GAAU9V,GAAekrB,EAAQ,EAAI,GAErDD,EAAOhoD,UAAUkiD,IAAM,SAAUrP,EAAU9V,EAAamrB,EAAWj8C,EAAQk2C,GACvE,IAAI5hB,EAAMxD,EACV,GAAI8V,EAAWqV,EAAU,GAAK,EAC1B,OAAQrV,EAAU9V,GAGtB,GADA8V,EAAWjoC,KAAKsJ,IAAI,EAAGtJ,KAAKw7C,IAAIvT,EAAWqV,EAAU,GAAI1yC,KAAKqnB,OAC1Dx8B,oBAAkBmV,KAAKysC,OAAOpP,IAC9B,OAAO,KAGX,GADA9V,EAAcnyB,KAAKsJ,IAAI,EAAGtJ,KAAKw7C,IAAIrpB,EAAcmrB,EAAU,GAAI1yC,KAAKysC,OAAOpP,GAAU1xC,OAAS,IAC1Fo/B,EAAM2nB,EAAU,GAAK1yC,KAAKysC,OAAOpP,GAAU1xC,OAAS,GAAKghD,EAAUtP,EAAU9V,EAAa9wB,GAC1F,OAAQ4mC,EAAUtS,GAEtB,IAAI77B,EAAQ8Q,KAAK9Q,MAAM8Q,KAAKysC,OAAOpP,GAAW9V,EAAamrB,GAAW,EAAMj8C,GAC5E8wB,EAAwB,OAAVr4B,EAAiB67B,EAAM77B,EACrC,IAAIhD,EAAMmE,WAASgtC,EAAW,IAAM9V,EAAavnB,KAAKysC,QAItD,OAHIpP,IAAar9B,KAAKqnB,MAAoB,cAAX5wB,GAAqC,UAAXA,IACrDi8C,EAAU,IAAM,GAEb1yC,KAAK2yC,QAAQzmD,KAASygD,EAAUtP,EAAU9V,EAAa9wB,GAC1DuJ,KAAK0sC,IAAIrP,EAAUtS,EAAK2nB,EAAWj8C,EAAQk2C,IAActP,EAAU9V,IAE3EirB,EAAOhoD,UAAU0E,MAAQ,SAAU0jD,EAAQnjD,EAAOijD,EAAW5jC,EAAQrY,GACjE,OAAMhH,EAAQ,GAAKA,IAAUmjD,EAAOjnD,SAAWqU,KAAK2yC,QAAQC,EAAOnjD,KAChD,YAAXgH,GAAmC,cAAXA,IAA6Bm8C,EAAOr4C,KAAK,SAAU0zB,GAAK,OAAa,IAANA,IACpF,KAEHjuB,KAAK2yC,QAAQC,EAAOnjD,IACxBuQ,KAAK9Q,MAAM0jD,GAA+E,KAArE,UAAW,YAAa,UAAW,aAAaljD,QAAQ+G,GAAkBqY,EAAS,IAAMrf,EAAQA,EAAQijD,EAAU,GAAIA,GAAW,EAAOj8C,GAD5HhH,GAG1C+iD,EAAOhoD,UAAUm2B,OAAS,SAAU0c,EAAU9V,GAC1C8V,EAAWjoC,KAAKsJ,IAAI,EAAGtJ,KAAKw7C,IAAIvT,EAAUr9B,KAAKqnB,OAC/CE,EAAcnyB,KAAKsJ,IAAI,EAAGtJ,KAAKw7C,IAAIrpB,EAAavnB,KAAKysC,OAAOpP,GAAU1xC,OAAS,IAC/EqU,KAAKooC,SAAW/K,EAAU9V,IAE9BirB,EAAOhoD,UAAU2lD,SAAW,SAAU9oB,EAAMn1B,EAAUg+C,GAClD,IAAI/uC,EAAQnB,KAUZ,OATAA,KAAKqnB,KAAOA,EAAK17B,OAAS,EAC1BqU,KAAKysC,UACLplB,EAAK73B,QAAQ,SAAUtC,EAAK2lD,GACxB,IAAIx7C,EAAQnK,EAAImK,MAAMsK,OAAO,SAAU3R,GAAK,OAAuB,IAAhBA,EAAEq1B,YACrDlkB,EAAM5U,QAAU6I,KAAKsJ,IAAIrH,EAAM1L,OAAS,EAAmB,EAAhBwV,EAAM5U,SACjD8K,EAAM7H,QAAQ,SAAU4J,EAAM05C,GAC1B3xC,EAAM42B,IAAI8a,EAAQC,EAAQ5gD,EAAShF,EAAKkM,EAAM82C,QAG/ClwC,KAAKysC,QAEhB+F,EAAOhoD,UAAUmoD,QAAU,SAAUlmD,GACjC,OAAiB,IAAVA,QAAyBsI,IAAVtI,GAEnB+lD,KAMP3C,GAA8B,WAC9B,SAASA,EAAaz9C,GAClB,IAAI+O,EAAQnB,KACZA,KAAKysC,OAAS,IAAI+F,GAClBxyC,KAAK5N,OAASA,EACd4N,KAAK+yC,YACDC,YAAe,EAAG,GAClBC,KAAQ,EAAG,GACXC,WAAc,GAAI,GAClBC,UAAa,GAAI,GACjBC,UAAa,EAAG,GAChBC,WAAc,EAAG,GACjBC,UAAa,EAAG,GAChBC,WAAc,EAAG,GACjBC,YAAe,EAAG,GAClBC,WAAc,GAAI,GAClBC,OAAU,EAAG,GACbC,aAAgB,EAAG,IAEvB3zC,KAAK4zC,aAAe,SAAUn9C,GAO1B,OALI07C,MAAShxC,EAAMsrC,OAAOrE,QAAQ,IAAK,EAAG,EAAG,GACzC9b,KAAQnrB,EAAMsrC,OAAOrE,QAAQ,GAAIjnC,EAAMsrC,OAAOlgD,QAAU,EAAG,GAAI,GAC/D6lD,UAAa,GAAI,EAAG,EAAG,GACvBC,SAAYlxC,EAAMsrC,OAAOplB,KAAMlmB,EAAMsrC,OAAOlgD,QAAU,EAAG,GAAI,IAEtDkK,IAAW,MA8L9B,OA3LAo5C,EAAarlD,UAAUmoC,SAAW,WAC9B,OAAQ3yB,KAAK5N,OAAO0qC,cAChB98B,KAAK5N,OAAO8kC,aAAa7oC,cAAc,8BACvC2R,KAAK5N,OAAOie,mBAEpBw/B,EAAarlD,UAAUsjD,WAAa,SAAU1iD,GAC1C,IAAIsnD,EAAY1yC,KAAK+yC,WAAW3nD,EAAEqL,QAC9B2xC,EAAUpoC,KAAK6zC,qBAAqBzoD,EAAEqL,OAAQi8C,EAAWtnD,EAAEqL,UAAUuJ,KAAK+yC,WAAY3nD,GAC1F,GAAKg9C,EAAL,CAGA,KAAM,MAAO,YAAY14C,QAAQtE,EAAEqL,SAAW,GAAKuJ,KAAKysC,OAAOrE,aAAevwC,aAAeuwC,EAAQvwC,WAAY,CAC7G,GAAIuwC,EAAQvwC,cAAgBmI,KAAKysC,OAAOplB,KAAMrnB,KAAKysC,OAAOlgD,SAASsL,YAC/DuwC,EAAQvwC,cAAgB,EAAG,GAAGA,YAAemI,KAAKysC,OAAOrE,QAAQ,KAAOpoC,KAAKysC,OAAOplB,MACpFrnB,KAAKysC,OAAOrE,QAAQvwC,aAAeuwC,EAAQvwC,WAC3C,OAAO,EAGPuwC,EAAUpoC,KAAK8zC,YAAY1L,EAAQ,GAAIA,EAAQ,GAAIh9C,EAAEqL,QAG7DuJ,KAAKysC,OAAO9rB,OAAOynB,EAAQ,GAAIA,EAAQ,MAE3CyH,EAAarlD,UAAUspD,YAAc,SAAUzW,EAAUoS,EAAWh5C,GAChE,IAAIiG,EAAOsD,KAAK5N,OACZ0hD,EAAcp3C,EAAKrG,aAAa09C,mBAAqBr3C,EAAK6rB,QAAU7rB,EAAKs3C,sBACzEC,EAAev3C,EAAKy8B,sBAAsBz8B,EAAKirB,oBAAoB,GAAGj9B,OAC1E,GAAe,QAAX+L,GAAoBq9C,EAAa,CACjCzW,IAGAoS,EAAYwE,GAFCj0C,KAAK2yB,WAAWtL,KAAKgW,GAAUlvC,iBAAiB,iBAAiBxC,OAC1EqU,KAAK2yB,WAAWtL,KAAKgW,GAAUlvC,iBAAiB,wBAAwBxC,QAOhF,MAJe,aAAX8K,GAAyBq9C,IACzBzW,IACAoS,EAAY/yC,EAAKy8B,sBAAsBz8B,EAAKirB,oBAAoBjrB,EAAKirB,oBAAoBh8B,OAAS,GAAGjB,QAEjGsV,KAAK2yB,WAAWtL,KAAKgW,GAAUhmC,MAAMo4C,GAAWn9C,UAAUC,SAAS,cACtB8qC,EAAUoS,GAA3DzvC,KAAK8zC,YAAYzW,EAAUoS,EAAWh5C,IAE9Co5C,EAAarlD,UAAUqpD,qBAAuB,SAAUp9C,EAAQi8C,EAAWwB,EAAW9oD,GAElF,QADkB,IAAdsnD,IAAwBA,GAAa,EAAG,KACvCwB,IAAcl0C,KAAK4zC,aAAan9C,IAA2C,IAA/BuJ,KAAKysC,OAAOrE,QAAQz8C,OACjE,OAAO,KAEX,IAAKqU,KAAKm0C,kBAAkB/oD,GACxB,OAAO4U,KAAKysC,OAAOrE,QAEvB,IAAI5qC,EAAKwC,KAAK4zC,aAAan9C,IAAWuJ,KAAKysC,OAAOrE,QAAQlqC,OAAOw0C,GAAYrV,EAAW7/B,EAAG,GAAIiyC,EAAYjyC,EAAG,GAAI42C,EAAK52C,EAAG,GAAI62C,EAAK72C,EAAG,GAEtI,OADcwC,KAAKysC,OAAOC,IAAIrP,EAAUoS,GAAY2E,EAAIC,GAAK59C,EAAQuJ,KAAK2sC,cAG9EkD,EAAarlD,UAAU4iD,QAAU,SAAUhiD,EAAGiiD,GAC1C,IAAI/iD,EAASc,EAAEd,OAOf,GANAA,EAAUA,EAAOgI,UAAUC,SAAS,aAAejI,EAASmvC,UAAQnvC,EAAQ,MAC5EA,EAASA,IAAkBmvC,UAAQruC,EAAEd,OAAQ,2BACtCmvC,UAAQruC,EAAEd,OAAQ,yBACzBA,EAASmvC,UAAQruC,EAAEd,OAAQ,oBACvBO,oBAAkB4uC,UAAQA,UAAQruC,EAAEd,OAAQ,WAAY,oBAAsB,KAAgBA,IAClGA,EAASA,GAAUmvC,UAAQnvC,EAAQ,SAASgI,UAAUC,SAAS,WAAajI,EAAS,MAEjF,OAAO,EAEX,IAAIkT,GAAMlT,EAAOyG,cAAcssC,SAAU/yC,EAAOmlD,WAAYpS,EAAW7/B,EAAG,GAAIiyC,EAAYjyC,EAAG,GACzF2T,EAAKnR,KAAKysC,OAAOrE,QAASkM,EAAYnjC,EAAG,GAAIojC,EAAapjC,EAAG,GAC7DjlB,EAAMmE,WAASgtC,EAAW,IAAMoS,EAAWzvC,KAAKysC,OAAOA,QAC3D,GAAIzsC,KAAKysC,OAAOkG,QAAQzmD,KAAUmhD,GAASiH,IAAcjX,GAAYkX,IAAe9E,EAChF,OAAO,EAEXzvC,KAAKysC,OAAO9rB,OAAO0c,EAAUoS,IAEjCI,EAAarlD,UAAUyiD,aAAe,WAClC,IAAIkC,KACA3xC,EAAKwC,KAAKysC,OAAOrE,QAASj3B,EAAK3T,EAAG,GAAI6/B,OAAkB,IAAPlsB,EAAgB,EAAIA,EAAIC,EAAK5T,EAAG,GAAIiyC,OAAmB,IAAPr+B,EAAgB,EAAIA,EAGzH,OAFApR,KAAKysC,OAAOrE,SAAW/K,EAAUoS,GACjCN,EAAK18C,QAAW5H,oBAAkBmV,KAAK2yB,WAAWtL,KAAKgW,IAA+D,KAAlDr9B,KAAK2yB,WAAWtL,KAAKgW,GAAUhmC,MAAMo4C,GACpGN,EAAK18C,SAGV08C,EAAKjC,eAAkBiC,EAAK18C,QAAQH,UAAUC,SAAS,kBAAqB48C,EAAK18C,QAAQH,UAAUC,SAAS,gBACpE48C,EAAK18C,QAAvCuN,KAAKuyC,aAAapD,EAAK18C,SAC7B08C,EAAKjB,SAAU,EACfiB,EAAK17C,IAAM07C,EAAK18C,QAAQ1B,cAAc2gB,aAAa,YAC5Cy9B,GANIA,GAQfU,EAAarlD,UAAU+nD,aAAe,SAAU9/C,GAC5C,IAAIgH,EAAQ,gGACRuG,KAAK5N,OAAOm2B,SACZ9uB,EAAQ,0EAEZ,IAAI+6C,KAAWthD,MAAMC,KAAKV,EAAQtE,iBAAiBsL,IAKnD,OAAO+6C,EAAM7oD,OAAS6oD,EAAM,GAAK/hD,GAErCo9C,EAAarlD,UAAU0H,SAAW,SAAUhF,EAAKkM,EAAM82C,GACnD,IAAIxiB,GAAS3b,WAAS2d,OAAQ3d,WAASge,aAAche,WAAS0c,eAAgB1c,WAASoc,cACvF,OAASjhC,EAAItB,WAAawN,EAAK5I,UAAY4I,EAAKgyB,YAAchyB,EAAKiyB,aAC3Dn+B,EAAItB,WAAawN,EAAK0sB,WAAa/T,WAASmX,cAAgBr+B,oBAAkBuO,EAAK5I,WAClFtD,EAAItB,WAAa8hC,EAAMh+B,QAAQ0J,EAAK0sB,WAAa,GAClD1sB,EAAKxO,QAA+B,aAArBwO,EAAKxO,OAAOmJ,MAC3BqF,EAAK0sB,WAAa/T,WAASsX,eAC3Bn8B,EAAItB,WAAaskD,MACH,WAAbhjD,EAAI2U,MAAqB3U,EAAIunD,UAE1C5E,EAAarlD,UAAU4jD,KAAO,SAAU33C,EAAQ2xC,GAC5C,IAAIsM,EAAa10C,KAAK5N,OAAO0qC,cAAgB,IAC5B,cAAXrmC,GAAqC,aAAXA,IAAyC,IAAf2xC,EAAQ,GAC9DuM,EAAyC,IAA3B30C,KAAK5N,OAAO2gC,YAA+B,eAAXt8B,EAMlD,OAJIs1C,MAAmB,YAAXt1C,GAAwBk+C,IAA+B,IAAfvM,EAAQ,IAAasM,EACrErG,UAAsB,YAAX53C,GAAwBk+C,IAA+B,IAAfvM,EAAQ,GAC3DkG,SAAUoG,IAIlB7E,EAAarlD,UAAU+jD,eAAiB,SAAUqG,EAAU7I,EAAMyC,EAAQ/3C,QACrD,IAAbm+C,IAAuBA,MAC3B,IAAIxM,KASJ,MARe,eAAX3xC,GAAsC,QAAXA,GAC3B2xC,EAAQ,GAAKwM,EAAS,GACtBxM,EAAQ,IAAM,GAEE,cAAX3xC,GAAqC,UAAXA,IAC/B2xC,EAAQ,IAAM,EACdA,EAAQ,GAAKwM,EAAS,IAEnBxM,GAEXyH,EAAarlD,UAAU2/B,aAAe,SAAU9C,EAAMwtB,GAClD,IAAIr3C,EACAivC,EAASoI,EAAUpI,OAAQ8D,EAAkBsE,EAAUtE,gBACvD1jD,EAAM0jD,EAAgB9D,OAAOA,OAAO9gD,OACpCmpD,EAAa90C,KAAK5N,OAAOkP,gBAAsD,cAApCtB,KAAK5N,OAAO+f,eAAepe,KAAuBlH,EAAM,EAAIA,EAC3G0jD,EAAgB9D,OAAOA,OAAS8D,EAAgB9D,OAAOA,OAAOv5C,MAAM,EAAG4hD,GACvEvE,EAAgB9D,OAAOplB,KAAOytB,GAC7Bt3C,EAAK+yC,EAAgB9D,OAAOA,QAAQ5gD,KAAK0gC,MAAM/uB,EAAIivC,GACpD8D,EAAgB9D,OAAOplB,MAAQolB,EAAO9gD,QAE1CkkD,EAAarlD,UAAUglD,QAAU,SAAUpkD,GACvC,IAAI+jD,EAAOnvC,KAAKitC,eACZzvC,EAAKwC,KAAKysC,OAAOrE,QAASyK,EAASr1C,EAAG,GAAIs1C,EAASt1C,EAAG,GACtDu3C,EAAS5F,EAAK18C,QAAQH,UAAUC,SAAS,aACzCyiD,EAAeD,GAAW3pD,GAAkB,UAAbA,EAAEqL,SAAuB04C,EAAK18C,QAAQH,UAAUC,SAAS,wBACrF48C,EAAK18C,QAAQH,UAAUC,SAAS,sBACnC4e,GAAM/b,KAAKw7C,IAAI5R,SAASmQ,EAAK18C,QAAQ1B,cAAc2gB,aAAa,iBAAkB,IAAKmhC,GACvFz9C,KAAKw7C,IAAI5R,SAASmQ,EAAK18C,QAAQif,aAAa,iBAAkB,IAAKohC,IACvE,OAASxF,WAAW,EAAMliB,WAAY2pB,EAAQxlB,SAD8Cpe,EAAG,GAAgBA,EAAG,IACpC6jC,aAAcA,IAEhGnF,EAAarlD,UAAUmiD,UAAY,WAC/B,IAAI13C,EAAQ+K,KAAK2yB,WACjB,OAAO,SAAU0K,EAAUoS,EAAWh5C,GAClC,IAAI2C,EAOA67C,EAAqD,KALrD77C,EADAnE,EAAMoyB,KAAKgW,GAAUhmC,MAAM,GAAG/E,UAAUC,SAAS,cAC1C0C,EAAMoyB,KAAKgW,GAAUhmC,MAAM,GAAGlJ,iBAAiB,MAAMshD,GAGrDx6C,EAAMoyB,KAAKgW,GAAUhmC,MAAMo4C,IAEfz+C,wBAAwBT,MAC/C,MAAe,UAAXkG,GAAiC,eAAXA,EACfw+C,GAAe77C,EAAK9G,UAAUC,SAAS,aAElC,YAAXkE,GAAmC,cAAXA,IAA2B2C,EAAK9G,UAAUC,SAAS,aAG5D,YAAXkE,GAAmC,cAAXA,GACtBw+C,EAHAA,IAQnBpF,EAAarlD,UAAU2pD,kBAAoB,SAAU/oD,GACjD,IAAIoS,EAAKwC,KAAKysC,OAAOrE,QAASj3B,EAAK3T,EAAG,GAAIq1C,OAAgB,IAAP1hC,GAAiB,EAAIA,EAAIC,EAAK5T,EAAG,GAAIs1C,OAAgB,IAAP1hC,GAAiB,EAAIA,EACtH,GAAIyhC,EAAS,GAAKC,EAAS,EACvB,OAAO,EAEX,IAAI15C,EAAO/I,WAASwiD,EAAS,UAAYC,EAAQ9yC,KAAK2yB,WAAWtL,MACjE,OAAKjuB,IAGe,UAAbhO,EAAEqL,QAAmC,eAAbrL,EAAEqL,QAC7B2C,EAAK9G,UAAUC,SAAS,eAAiB6G,EAAK9G,UAAUC,SAAS,mBACzD6G,EAAK9G,UAAUC,SAAS,oBAAsB6G,EAAK9G,UAAUC,SAAS,kBAE/Es9C,KAMPE,GAA6B,SAAU/hB,GAEvC,SAAS+hB,EAAY39C,GACjB,OAAO47B,EAAO76B,KAAK6M,KAAM5N,IAAW4N,KA2FxC,OA7FAyrB,GAAUskB,EAAa/hB,GAIvB+hB,EAAYvlD,UAAUmoC,SAAW,WAC7B,OAAQ3yB,KAAK5N,OAAOg/B,mBAChBpxB,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,6BAC7C2R,KAAK5N,OAAOojC,kBAEpBua,EAAYvlD,UAAU4iD,QAAU,SAAUhiD,GACtC,IAAId,EAASc,EAAEd,OAMf,IALAA,EAAUA,EAAOgI,UAAUC,SAAS,gBAAkBjI,EAASmvC,UAAQnvC,EAAQ,QACrC,IAA3B0V,KAAK5N,OAAO2gC,aACvBzoC,EAAUc,EAAEd,OAAOgI,UAAUC,SAAS,aAAenH,EAAEd,OACnDmvC,UAAQruC,EAAEd,OAAQ,OAEtBc,EAAEd,OAAOgI,UAAUC,SAAS,mBAC5BnH,EAAEd,OAAO+D,cAAc,wBACvB,OAAO,EAEX,GAAK/D,EAAL,CAGA,IAAIkT,GAAMlT,EAAOyG,cAAcssC,SAAU/yC,EAAOmlD,WAAYpS,EAAW7/B,EAAG,GAAIiyC,EAAYjyC,EAAG,GACzFtR,EAAMmE,WAASgtC,EAAW,IAAMoS,EAAWzvC,KAAKysC,OAAOA,QAC3D,GAAIzsC,KAAKysC,OAAOkG,QAAQzmD,GACpB,OAAO,EAEX8T,KAAKysC,OAAO9rB,OAAOr2B,EAAOyG,cAAcssC,SAAU/yC,EAAOmlD,aAE7DM,EAAYvlD,UAAUyiD,aAAe,WACjC,IAAIkC,KACA3xC,EAAKwC,KAAKysC,OAAOrE,QAASj3B,EAAK3T,EAAG,GAAI6/B,OAAkB,IAAPlsB,EAAgB,EAAIA,EAAIC,EAAK5T,EAAG,GAAIiyC,OAAmB,IAAPr+B,EAAgB,EAAIA,EAIzH,OAHA+9B,EAAK18C,QAAUuN,KAAK2yB,WAAWtL,KAAKgW,GAAUhmC,MAAMo4C,GACpDN,EAAKjC,eAAiBltC,KAAKuyC,aAAapD,EAAK18C,SAC7C08C,EAAKjB,SAAWiB,EAAK18C,QAAQH,UAAUC,SAAS,mBACzC48C,GAEXY,EAAYvlD,UAAU0H,SAAW,SAAUhF,EAAKkM,GAC5C,OAAQA,EAAK5I,eAAkCuE,IAAtBqE,EAAKxO,OAAOF,OAAuB0O,EAAKiyB,aAAqC,aAArBjyB,EAAKxO,OAAOmJ,MACzFqF,EAAK0sB,WAAa/T,WAASgrB,eAEnCgT,EAAYvlD,UAAU4jD,KAAO,SAAU33C,EAAQ2xC,GAC3C,IAAIsM,EAAa10C,KAAK5N,OAAO0qC,cAAgB,IAC7B,cAAXrmC,GAAqC,aAAXA,IAAyC,IAAf2xC,EAAQ,GAC7DuM,EAAyC,IAA3B30C,KAAK5N,OAAO2gC,YAA+B,UAAXt8B,EAClD,OACIs1C,MAAmB,cAAXt1C,GAA0Bk+C,IAAgBvM,EAAQ,KAAOpoC,KAAKysC,OAAOA,OAAO9gD,OAAS,GACzF+oD,EACJrG,SAAUqG,EACVpG,SAAUoG,IAGlB3E,EAAYvlD,UAAU+jD,eAAiB,SAAUqG,EAAU7I,EAAMyC,EAAQ/3C,QACpD,IAAbm+C,IAAuBA,MAC3B,IAAIM,KASJ,MARe,YAAXz+C,GAAmC,eAAXA,GACxBy+C,EAAS,GAAKl1C,KAAKysC,OAAOA,OAAO9gD,OACjCupD,EAAS,GAAKN,EAAS,IAEP,eAAXn+C,GAAsC,QAAXA,IAChCy+C,EAAS,GAAKN,EAAS,GACvBM,EAAS,IAAM,GAEZA,GAEXnF,EAAYvlD,UAAU2/B,aAAe,SAAU9C,GAC3C,IAAIlmB,EAAQnB,KACRrU,EAASqU,KAAKysC,OAAOA,OAAO9gD,OAC5BqU,KAAK5N,OAAOkP,gBAAsD,cAApCtB,KAAK5N,OAAO+f,eAAepe,OACzDiM,KAAKysC,OAAOplB,OAASrnB,KAAKysC,OAAOplB,KACjCA,EAAK,GAAGhwB,MAAM7H,QAAQ,SAAU4J,EAAM05C,GAClC,OAAO3xC,EAAMsrC,OAAO1U,IAAIpsC,EAAQmnD,EAAQ15C,EAAK5I,UAA0C,IAA/B4I,EAAKxO,OAAO0W,oBAIhFyuC,EAAYvlD,UAAUglD,QAAU,SAAUpkD,GACtC,OAAO4D,SAAOg/B,EAAOxjC,UAAUglD,QAAQr8C,KAAK6M,KAAM5U,IAAMkiD,WAAW,EAAOC,UAAU,KAExFwC,EAAYvlD,UAAUmiD,UAAY,WAC9B,OAAO,WAAc,OAAO,IAEhCoD,EAAYvlD,UAAU2pD,kBAAoB,SAAU/oD,GAChD,IAAIoS,EAAKwC,KAAKysC,OAAOrE,QAAS/K,EAAW7/B,EAAG,GAAI+pB,EAAc/pB,EAAG,GACjE,GAAI6/B,EAAW,GAAK9V,EAAc,EAC9B,OAAO,EAEX,IAAInuB,EAAO/I,WAASgtC,EAAW,UAAY9V,EAAavnB,KAAK2yB,WAAWtL,MACxE,OAAKjuB,IAGe,UAAbhO,EAAEqL,QAAmC,iBAAbrL,EAAEqL,SAA6B2C,EAAK9G,UAAUC,SAAS,kBAEnFw9C,GACTF,IAEED,GAAmC,SAAU5hB,GAE7C,SAAS4hB,IACL,OAAkB,OAAX5hB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KA2B/D,OA7BAyrB,GAAUmkB,EAAmB5hB,GAI7B4hB,EAAkBplD,UAAUmoC,SAAW,WACnC,OAAO3yB,KAAK5N,OAAO8kC,aAAa7oC,cAAc,8BAElDuhD,EAAkBplD,UAAU4jD,KAAO,SAAU33C,EAAQ2xC,GACjD,IAAIuM,EAAyC,IAA3B30C,KAAK5N,OAAO2gC,YAA+B,eAAXt8B,EAClD,OACIs1C,MAAkB,YAAXt1C,GAAwBk+C,IAA+B,IAAfvM,EAAQ,KACnC,QAAX3xC,GAA+B,eAAXA,IAA4B2xC,EAAQ,KAAOpoC,KAAKysC,OAAOlgD,QACpF8hD,UAAsB,YAAX53C,GAAwBk+C,IAA+B,IAAfvM,EAAQ,GAC3DkG,UAAsB,YAAX73C,GAAwBk+C,IAA+B,IAAfvM,EAAQ,KAGnEwH,EAAkBplD,UAAU+jD,eAAiB,SAAUqG,EAAU7I,EAAMyC,EAAQ/3C,QAC1D,IAAbm+C,IAAuBA,MAC3B,IAAIO,KASJ,MARe,cAAX1+C,GAAqC,aAAXA,GAC1B0+C,EAAS,GAAKP,EAAS,GACvBO,EAAS,GAAK3G,EAAO/B,OAAOlgD,QAAU,GAEtB,cAAXkK,GAAqC,UAAXA,IAC/B0+C,EAAS,IAAM,EACfA,EAAS,GAAKP,EAAS,IAEpBO,GAEJvF,GACTC,IAEEC,GAAkC,SAAU9hB,GAE5C,SAAS8hB,IACL,OAAkB,OAAX9hB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KA2B/D,OA7BAyrB,GAAUqkB,EAAkB9hB,GAI5B8hB,EAAiBtlD,UAAU4jD,KAAO,SAAU33C,EAAQ2xC,GAChD,IAAIuM,EAAyC,IAA3B30C,KAAK5N,OAAO2gC,YAA+B,UAAXt8B,EAClD,OACIs1C,MAAkB,cAAXt1C,GAA0Bk+C,IAAgBvM,EAAQ,KAAOpoC,KAAKysC,OAAOA,OAAO9gD,OAAS,IACxE,eAAX8K,GAAsC,QAAXA,IAAqB2xC,EAAQ,KAAOpoC,KAAKysC,OAAOlgD,QACpF8hD,UAAsB,eAAX53C,GAAsC,QAAXA,IAAqB2xC,EAAQ,KAAOpoC,KAAKysC,OAAOlgD,QACtF+hD,UAAsB,cAAX73C,GAA0Bk+C,IAAgBvM,EAAQ,KAAOpoC,KAAKysC,OAAOA,OAAO9gD,OAAS,IAGxGmkD,EAAiBtlD,UAAUmoC,SAAW,WAClC,OAAQ3yB,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,6BAEzDyhD,EAAiBtlD,UAAU+jD,eAAiB,SAAUqG,EAAU7I,EAAMyC,EAAQ/3C,QACzD,IAAbm+C,IAAuBA,MAC3B,IAAIQ,KASJ,MARe,cAAX3+C,GAAqC,aAAXA,GAC1B2+C,EAAS,GAAKR,EAAS,GACvBQ,EAAS,GAAK5G,EAAO/B,OAAOlgD,QAAU,GAEtB,YAAXkK,GAAmC,eAAXA,IAC7B2+C,EAAS,GAAKp1C,KAAKysC,OAAOA,OAAO9gD,OACjCypD,EAAS,GAAKR,EAAS,IAEpBQ,GAEJtF,GACTC,IAGEsF,GAA2B,WAC3B,SAASA,EAAUv/B,GACf9V,KAAK8V,UAAYA,EAoBrB,OAlBAu/B,EAAU7qD,UAAU8qD,YAAc,SAAUh+C,GACxCA,EAAKhN,OAAOyG,cAAcuB,UAAUoE,IAAI,kBAE5C2+C,EAAU7qD,UAAU+qD,WAAa,SAAUj+C,GACvCA,EAAKhN,OAAOyG,cAAcuB,UAAUc,OAAO,kBAE/CiiD,EAAU7qD,UAAUgrD,UAAY,WACxBx1C,KAAK8V,YACL3C,eAAazc,IAAIsJ,KAAK8V,UAAW,QAAS9V,KAAKs1C,YAAat1C,MAC5DmT,eAAazc,IAAIsJ,KAAK8V,UAAW,OAAQ9V,KAAKu1C,WAAYv1C,QAGlEq1C,EAAU7qD,UAAUirD,YAAc,WAC1Bz1C,KAAK8V,YACL3C,eAAa/f,OAAO4M,KAAK8V,UAAW,QAAS9V,KAAKs1C,aAClDniC,eAAa/f,OAAO4M,KAAK8V,UAAW,OAAQ9V,KAAKu1C,cAGlDF,KC92BP5pB,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAaxCrrB,GAA0C,SAAUC,EAAYpW,EAAQkP,EAAKmH,GAC7E,IAA2HC,EAAvH5Q,EAAIwH,UAAU7L,OAAQkV,EAAI7Q,EAAI,EAAI1F,EAAkB,OAATqW,EAAgBA,EAAOrR,OAAOwR,yBAAyBxW,EAAQkP,GAAOmH,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASN,EAAYpW,EAAQkP,EAAKmH,QACpH,IAAK,IAAIjV,EAAIgV,EAAW/U,OAAS,EAAGD,GAAK,EAAGA,KAASkV,EAAIF,EAAWhV,MAAImV,GAAK7Q,EAAI,EAAI4Q,EAAEC,GAAK7Q,EAAI,EAAI4Q,EAAEtW,EAAQkP,EAAKqH,GAAKD,EAAEtW,EAAQkP,KAASqH,GAChJ,OAAO7Q,EAAI,GAAK6Q,GAAKvR,OAAO2R,eAAe3W,EAAQkP,EAAKqH,GAAIA,GAM5D60C,GAA8B,SAAU1nB,GAExC,SAAS0nB,IACL,OAAkB,OAAX1nB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAuB/D,OAzBAyrB,GAAUiqB,EAAc1nB,GAIxBvtB,IACImE,WAAS,KACV8wC,EAAalrD,UAAW,gBAAY,GACvCiW,IACImE,WAAS,IACV8wC,EAAalrD,UAAW,iBAAa,GACxCiW,IACImE,WAAS,IACV8wC,EAAalrD,UAAW,mBAAe,GAC1CiW,IACImE,cACD8wC,EAAalrD,UAAW,yBAAqB,GAChDiW,IACImE,YAAS,IACV8wC,EAAalrD,UAAW,yBAAqB,GAChDiW,IACImE,YAAS,IACV8wC,EAAalrD,UAAW,iBAAa,GACxCiW,IACImE,WAAS,OACV8wC,EAAalrD,UAAW,gBAAY,GAChCkrD,GACT3jD,iBClDE4jD,GAAsC,WAStC,OARAA,GAAWrmD,OAAOsmD,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGpqD,EAAI,EAAGqqD,EAAIv+C,UAAU7L,OAAQD,EAAIqqD,EAAGrqD,IAAK,CACjDoqD,EAAIt+C,UAAU9L,GACd,IAAK,IAAIuzB,KAAK62B,EAAOxmD,OAAO9E,UAAUuI,eAAeI,KAAK2iD,EAAG72B,KACzD42B,EAAE52B,GAAK62B,EAAE72B,IAEjB,OAAO42B,IAEKtpB,MAAMvsB,KAAMxI,YAa5Bw+C,GAA2B,WAK3B,SAASA,EAAU5jD,EAAQygC,EAAmBuL,GAK1Cp+B,KAAKi2C,sBAILj2C,KAAKk2C,0BAILl2C,KAAKm2C,mBAILn2C,KAAKo2C,cAAe,EACpBp2C,KAAKq2C,qBAAsB,EAC3Br2C,KAAKs2C,oBAAqB,EAC1Bt2C,KAAKu2C,wBAAyB,EAC9Bv2C,KAAKw2C,oBACLx2C,KAAKskC,kBAAoB,EACzBtkC,KAAKy2C,gBACLz2C,KAAK02C,gBAAiB,EACtB12C,KAAK22C,uBACL32C,KAAK42C,kBAAmB,EACxB52C,KAAK62C,qBAAsB,EAC3B72C,KAAK82C,WAAY,EACjB92C,KAAK+2C,aAAc,EACnB/2C,KAAKg3C,eAAgB,EACrBh3C,KAAK5N,OAASA,EACd4N,KAAK6yB,kBAAoBA,EACzB7yB,KAAKi3C,QAAU7Y,EAAQtnC,WAAW,mBAClCkJ,KAAK6U,MAAQupB,EAAQtnC,WAAW,SAChCkJ,KAAK4N,mBACL5N,KAAKkT,aA82ET,OA52EA8iC,EAAUxrD,UAAU0sD,oBAAsB,WACtCl3C,KAAK5N,OAAO2d,IAAI,yBAChBoD,eAAazc,IAAIsJ,KAAK5N,OAAO8kC,aAAc,YAAal3B,KAAKm3C,iBAAkBn3C,OAOnFg2C,EAAUxrD,UAAU4sD,cAAgB,SAAU9/C,EAAMvD,GAChDiM,KAAK5N,OAAO+d,QAAQpc,EAAMiM,KAAKq3C,YAAY//C,KAE/C0+C,EAAUxrD,UAAU6sD,YAAc,SAAU//C,GACxC,GAAIA,EAAKm4C,WAAan4C,EAAK+lC,SAAU,CACjC,IAAIia,EAASt3C,KAAKu3C,UAAU1sD,oBAAkByM,EAAK+lC,UAAYxyC,oBAAkByM,EAAKm4C,WAClFzvC,KAAKw3C,aAAelgD,EAAKm4C,UAAUpS,SAAW/lC,EAAK+lC,UACvD/lC,EAAK6B,eAAiBm+C,EAAOn+C,eAEjC,OAAO7B,GAOX0+C,EAAUxrD,UAAUitD,iBAAmB,SAAUngD,EAAMvD,GACnDiM,KAAK5N,OAAO+d,QAAQpc,EAAMiM,KAAKq3C,YAAY//C,KAM/C0+C,EAAUxrD,UAAUwlB,cAAgB,WAChC,MAAO,aAOXgmC,EAAUxrD,UAAUwe,QAAU,WAC1B,IAAI0uC,EAAc13C,KAAK5N,OAAOK,QACzBilD,IAAiBA,EAAYrpD,cAAc,kBAAqBqpD,EAAYrpD,cAAc,qBAG/F2R,KAAK23C,YACL33C,KAAK43C,iBACL53C,KAAK8R,sBACL9R,KAAKwT,eACLL,eAAa/f,OAAO4M,KAAK5N,OAAO8kC,aAAc,YAAal3B,KAAKm3C,oBAEpEnB,EAAUxrD,UAAUqtD,UAAY,WAC5B,OAA0C,WAAlC73C,KAAK5N,OAAOiE,aAAaC,MAAwD,UAAlC0J,KAAK5N,OAAOiE,aAAaC,MAAoB0J,KAAK5N,OAAO0lD,YAC5G93C,KAAK5N,OAAO0lD,WAAWC,UAAY/3C,KAAK5N,OAAO0lD,WAAWC,QAAQC,aAClEh4C,KAAK5N,OAAOm2B,SAAWvoB,KAAK5N,OAAO6lD,oBAE3CjC,EAAUxrD,UAAU0tD,sBAAwB,SAAUzoD,GAClD,IAAIiN,EAAOsD,KAAK5N,OAChB,OAAIsK,EAAK00B,mBACE10B,EAAKy7B,qBAAqB1oC,GAE9B,MAEXumD,EAAUxrD,UAAU2tD,6BAA+B,WAC/C,IAAIz7C,EAAOsD,KAAK5N,OAGhB,GAA+B,UAA3BsK,EAAKrG,aAAaC,MAAoBoG,EAAKo7C,WAAY,CACvD,IAAIM,EAAiBzqD,EAAcqS,KAAK5N,OAAOi0C,yBAC/C+R,EAAiBp4C,KAAK5N,OAAO0lD,WAAWO,kBAAuB,aAAEn6C,OAAOk6C,GAGxE,IAAK,IAFD/0B,EAAiBrjB,KAAK5N,OAAO0lD,WAAWO,kBAAyB,eACjEC,EAAat4C,KAAK5N,OAAO4wB,0BAA0B,GAC9Ct3B,EAAI,EAAGA,EAAK23B,EAAqB,OAAG33B,IACzC,IAAK,IAAIyB,EAAI,EAAGA,EAAIirD,EAAezsD,OAAQwB,IACvC,GAAIk2B,EAAe33B,GAAG4sD,KAAgBF,EAAejrD,GAAGmrD,GAAa,CACjEF,EAAe93B,OAAOnzB,EAAG,GACzB,MAIZ,OAAOirD,EAGP,OAAO17C,EAAK2pC,yBASpB2P,EAAUxrD,UAAU+tD,UAAY,SAAU9oD,EAAO+oD,GAC7C,GAAIx4C,KAAKi2C,mBAAmBtqD,QAAUqU,KAAK6yB,kBAAkB4lB,8BACzDz4C,KAAK04C,oBAAoBjpD,QAD7B,CAIA,IAGIkpD,EAHAj8C,EAAOsD,KAAK5N,OACZwmD,EAAcl8C,EAAKu7B,cAAcxoC,GACjCopD,EAAqB74C,KAAKk4C,sBAAsBzoD,GAEhDqpD,GAAY,EAChB,GAAIp8C,EAAKV,sBAAwBvM,GAAS,EAAG,CACzC,IAAImpD,EAGC,CAMD,OALuB54C,KAAK5N,OAAO+xC,qBACdx4C,OAAS,GAC1BqU,KAAK+4C,yBAET/4C,KAAK5N,OAAOwd,OAAOopC,IAA2BC,cAAexpD,IAP7DkpD,EAAaj8C,EAAKw8C,oBAAoBN,EAAYlnC,aAAa,aAAa/mB,UAYhFguD,EAAa34C,KAAKm4C,+BAA+B1oD,GAErD,GAAKuQ,KAAKm5C,aAAgBP,IAAe54C,KAAK63C,YAA9C,CAMA,IAIIvgD,EAJA8hD,EAAgBR,EAAYS,aAAa,kBAC7Cb,EAAYA,IACPx4C,KAAKi2C,mBAAmBtqD,SACe,IAAnCqU,KAAKi2C,mBAAmBtqD,QAAgB8D,IAAUuQ,KAAKi2C,mBAAmB,IAF5DuC,KAMnBlhD,GACI3M,KAAMguD,EAAYtb,SAAU5tC,EAAO6pD,cAAet5C,KAAKs2C,mBACvDiD,eAAgBv5C,KAAKq2C,oBAAqBnpD,IAAK0rD,EAC/CY,YAAa98C,EAAKu7B,cAAcj4B,KAAKy5C,cACrCC,iBAAkB15C,KAAKy5C,aAAcnvD,OAAQ0V,KAAK25C,aAAcrpC,QAAQ,GAE5EhZ,EAAO0I,KAAK45C,eAAetiD,EAAMuhD,GACjC74C,KAAKo3C,cAAc9/C,EAAMuiD,MAExBhvD,oBAAkByM,KAAuB,IAAdA,EAAQ,UAGpC8hD,GAAiBp5C,KAAK6yB,kBAAkB6M,mBACxC1/B,KAAK85C,iBAAiBrqD,GACtBqpD,GAAY,GAEX94C,KAAK6yB,kBAAkB6M,kBACxB1/B,KAAK+5C,WAEJvB,GAAaM,IACV94C,KAAKi2C,mBAAmBvmD,QAAQD,KAAW,IAC3CuQ,KAAKg6C,mBAAmBpB,EAAanpD,GACjCiN,EAAK00B,oBACLpxB,KAAKg6C,mBAAmBnB,EAAoBppD,IAGpDuQ,KAAKi6C,eAAexqD,IAEnB+oD,IACDlhD,GACI3M,KAAMguD,EAAYtb,SAAU5tC,EAC5BvC,IAAK0rD,EAAaY,YAAa98C,EAAKu7B,cAAcj4B,KAAKy5C,cACvDC,iBAAkB15C,KAAKy5C,aAAcnvD,OAAQ0V,KAAK25C,cAEtDriD,EAAO0I,KAAK45C,eAAetiD,EAAMuhD,GACjC74C,KAAKy3C,iBAAiBngD,EAAM4iD,KAEhCl6C,KAAKm6C,eAAe1qD,OAExBumD,EAAUxrD,UAAUovD,eAAiB,SAAUQ,EAAWC,GACtD,GAAIr6C,KAAK5N,OAAOg/B,mBAAoB,CAChC,IAAIkpB,GAASD,KAAMA,EAAME,eAAgBv6C,KAAK5N,OAAO4jC,iBAAiBh2B,KAAKy5C,eAC3EW,EAAYzE,MAAayE,EAAWE,GAExC,OAAOF,GAQXpE,EAAUxrD,UAAUgwD,kBAAoB,SAAUpwB,EAAYqwB,GAC1Dz6C,KAAK06C,WAAW16C,KAAK26C,yBAAyBvwB,EAAYqwB,IAC1Dz6C,KAAKi6C,eAAeQ,IAOxBzE,EAAUxrD,UAAUkwD,WAAa,SAAUE,GACvC,IAAIl+C,EAAOsD,KAAK5N,OACZirC,EAAYr9B,KAAK66C,cAAgCD,EAAWA,EAAWjvD,OAAS,GAA/CivD,EAAW,GAC5ChC,EAAcl8C,EAAKu7B,cAAcoF,GACjCwb,EAAqB74C,KAAKk4C,sBAAsB7a,GAChD1hC,EAAUe,EAAK00B,mBAEf0pB,EAAe96C,KAAKm4C,+BAA+ByC,EAAW,IAClE,GAAK56C,KAAKm5C,cAAen5C,KAAK63C,YAA9B,CAGA,IAAIvgD,GACAsjD,WAAYA,EAAY1tD,IAAK0rD,EAAavb,SAAUA,EAAU/yC,OAAQ0V,KAAK25C,aAC3EoB,QAASr+C,EAAKq5B,UAAU/1B,KAAKy5C,cAAeC,iBAAkB15C,KAAKy5C,aACnEH,cAAet5C,KAAKs2C,mBAAoBiD,eAAgBv5C,KAAKq2C,oBAC7D1rD,KAAMmwD,GAIV,GAFAxjD,EAAO0I,KAAK45C,eAAetiD,EAAMuhD,GACjC74C,KAAKo3C,cAAc9/C,EAAMuiD,IACpBhvD,oBAAkByM,KAAuB,IAAdA,EAAQ,OAAxC,CAKA,GAFA0I,KAAK+5C,WACL/5C,KAAKi6C,eAAeW,EAAW1nD,OAAO,GAAG,IACpC8M,KAAK66C,cAWN76C,KAAKg6C,mBAAmBt9C,EAAKu7B,cAAcoF,GAAWA,GAClD1hC,GACAqE,KAAKg6C,mBAAmBt9C,EAAKy7B,qBAAqBkF,GAAWA,GAEjEr9B,KAAKm6C,eAAe9c,QAdpB,IAAK,IAAI9lC,EAAK,EAAGyjD,EAAeJ,EAAYrjD,EAAKyjD,EAAarvD,OAAQ4L,IAAM,CACxE,IAAI0jD,EAASD,EAAazjD,GAC1ByI,KAAKg6C,mBAAmBt9C,EAAKu7B,cAAcgjB,GAASA,GAChDt/C,GACAqE,KAAKg6C,mBAAmBt9C,EAAKy7B,qBAAqB8iB,GAASA,GAE/Dj7C,KAAKm6C,eAAe9c,GAU5B/lC,GACIsjD,WAAYA,EAAY1tD,IAAK0rD,EAAavb,SAAUA,EAAU/yC,OAAQ0V,KAAK25C,aAC3EoB,QAASr+C,EAAKq5B,UAAU/1B,KAAKy5C,cAAeC,iBAAkB15C,KAAKy5C,aACnE9uD,KAAMmwD,GAEVxjD,EAAO0I,KAAK45C,eAAetiD,EAAMuhD,GACjC74C,KAAKy3C,iBAAiBngD,EAAM4iD,OAQhClE,EAAUxrD,UAAUkuD,mBAAqB,SAAUkC,GAC/C,IAAIl+C,EAAOsD,KAAK5N,OAEZ9H,EAAS0V,KAAK1V,OACdsuD,EAAe54C,KAAK66C,cACpBn+C,EAAKu7B,cAAc2iB,EAAWA,EAAWjvD,OAAS,IADd+Q,EAAKu7B,cAAc2iB,EAAW,IAElE/B,EAAsB74C,KAAK66C,cAC3B76C,KAAKk4C,sBAAsB0C,EAAWA,EAAWjvD,OAAS,IADfqU,KAAKk4C,sBAAsB0C,EAAW,IAEjFj/C,EAAUe,EAAK00B,mBACnB,GAAKpxB,KAAKm5C,cAAen5C,KAAK63C,YAK9B,IAAK,IAFDvgD,EACA4jD,EAAiBl7C,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAU9L,GAAO,MAAoB,aAAbA,EAAI9B,OACxEwD,EAAK,EAAG4jD,EAAeP,EAAYrjD,EAAK4jD,EAAaxvD,OAAQ4L,IAAM,CACxE,IAAI8lC,EAAW8d,EAAa5jD,GACxB+/C,EAASt3C,KAAKu3C,UAAUla,GACxB+d,EAAep7C,KAAKi2C,mBAAmBvmD,QAAQ2tC,IAAa,EAEhE,GADAr9B,KAAKi6C,eAAe5c,GAChB+d,IAAkBF,EAAevvD,QAAgBqU,KAAK6yB,kBAAkBwoB,cAAiBr7C,KAAKs2C,oBAAqB,CAEnH,GADAt2C,KAAKs7C,YAAYC,IAAwBle,IAAYia,EAAO3sD,OAAQiuD,IAAetB,EAAOn+C,gBAAiB7O,GACvG0V,KAAK42C,iBACL,OAEJ52C,KAAKi2C,mBAAmB31B,OAAOtgB,KAAKi2C,mBAAmBvmD,QAAQ2tC,GAAW,GAC1Er9B,KAAKm2C,gBAAgB71B,OAAOtgB,KAAKm2C,gBAAgBzmD,QAAQkpD,GAAc,GACvEA,EAAYlhD,gBAAgB,iBAC5BsI,KAAKw7C,uBAAuB5C,GAAa,EAAO,KAAM,wBAAyB,YAC3EC,IACA74C,KAAKm2C,gBAAgB71B,OAAOtgB,KAAKm2C,gBAAgBzmD,QAAQmpD,GAAqB,GAC9EA,EAAmBnhD,gBAAgB,iBACnCsI,KAAKw7C,uBAAuB3C,GAAoB,EAAO,KAAM,wBAAyB,aAE1F74C,KAAKs7C,YAAYG,IAAuBpe,IAAYia,EAAO3sD,OAAQiuD,IAAetB,EAAOn+C,gBAAiB7O,GAASuuD,IACnH74C,KAAK07C,cAAe,MAEnB,CASD,GARApkD,GACI3M,KAAM2sD,EAAO3sD,KAAM0yC,SAAUA,EAAUnwC,IAAK0rD,EAAatuD,OAAQ0V,KAAK25C,aACtEoB,QAASr+C,EAAKq5B,UAAU/1B,KAAKy5C,cAAeC,iBAAkB15C,KAAKy5C,aACnEH,cAAet5C,KAAKs2C,mBAAoBiD,eAAgBv5C,KAAKq2C,oBAC7Dl9C,eAAgBm+C,EAAOn+C,gBAE3B7B,EAAO0I,KAAK45C,eAAetiD,EAAMuhD,GACjC74C,KAAKo3C,cAAc9/C,EAAMuiD,KACpBhvD,oBAAkByM,KAAuB,IAAdA,EAAQ,OACpC,OAEA0I,KAAK66C,eACL76C,KAAK+5C,WAET/5C,KAAKg6C,mBAAmBpB,EAAavb,GACjC1hC,GACAqE,KAAKg6C,mBAAmBnB,EAAoBxb,GAapD,GAVK+d,IACD9jD,GACI3M,KAAM2sD,EAAO3sD,KAAM0yC,SAAUA,EAAUnwC,IAAK0rD,EAAatuD,OAAQ0V,KAAK25C,aACtEoB,QAASr+C,EAAKq5B,UAAU/1B,KAAKy5C,cAAeC,iBAAkB15C,KAAKy5C,aACnEtgD,eAAgBm+C,EAAOn+C,gBAE3B7B,EAAO0I,KAAK45C,eAAetiD,EAAMuhD,GACjC74C,KAAKy3C,iBAAiBngD,EAAM4iD,KAEhCl6C,KAAKm6C,eAAe9c,GAChBr9B,KAAK66C,cACL,QAIZ7E,EAAUxrD,UAAUmwD,yBAA2B,SAAUvwB,EAAYqwB,GAIjE,IAHA,IAAIlrB,KACA/xB,EAAM4sB,GAAcqwB,GAClB/uD,EAAG0+B,EAAY1rB,IAAK+7C,IAAe/uD,EAAG+uD,EAAU/7C,IAAK0rB,GAAc1+B,EAAI8R,EAAG9R,EAAGgT,EAAMlB,EAAGkB,IACrFhT,GAAKgT,EAAKhT,IACb6jC,EAAQ1jC,KAAKH,GAKjB,OAHI0+B,EAAaqwB,GACblrB,EAAQosB,UAELpsB,GAEXymB,EAAUxrD,UAAUuvD,SAAW,WAC3B/5C,KAAK+4C,oBACD/4C,KAAK42C,kBAAiD,UAA7B52C,KAAK5N,OAAO02B,eAGzC9oB,KAAKi2C,sBACLj2C,KAAKm2C,mBACLn2C,KAAKi6C,gBAAgB,GACjBj6C,KAAK66C,eAAiB76C,KAAK5N,OAAO6lD,qBAClCj4C,KAAKw2C,uBAGbR,EAAUxrD,UAAUsvD,iBAAmB,SAAUrqD,GAC7C,GAAIuQ,KAAK1V,OAAQ,CACb,IAAIsxD,EAAc57C,KAAK1V,OAAOyG,cACzBiP,KAAK82C,YACN8E,EAAYlkD,gBAAgB,iBAC5BsI,KAAKw7C,uBAAuBI,GAAa,GAAO,EAAM,wBAAyB,aAEnF57C,KAAK67C,wBAAwBD,GAAa,GAC1C57C,KAAK87C,iBAAiBF,GACtB57C,KAAKi2C,mBAAmB31B,OAAOtgB,KAAKi2C,mBAAmBvmD,QAAQD,GAAQ,GACvEuQ,KAAKm2C,gBAAgB71B,OAAOtgB,KAAKm2C,gBAAgBzmD,QAAQsQ,KAAK5N,OAAO6lC,cAAcxoC,IAAS,KAGpGumD,EAAUxrD,UAAU2vD,eAAiB,SAAU/vB,GAC3CpqB,KAAKy5C,aAAervB,EACpBpqB,KAAKo5C,cAAgBp5C,KAAKi2C,mBAAmBtqD,SAAU,GAE3DqqD,EAAUxrD,UAAUqxD,wBAA0B,SAAUjD,EAAamD,GACjE,IAAI56C,EAAQnB,KACZ,GAAIA,KAAK5N,OAAO6lD,qBAAuBptD,oBAAkB+tD,GAAc,CACnE,IAAItB,EAASt3C,KAAKu3C,UAAUqB,GACxBoD,EAAS1E,EAAO3sD,KAAO2sD,EAAO3sD,KAAKqV,KAAKs4C,YAAc,KAC1D,GAAe,OAAX0D,EACA,OAEJ1E,EAAO3uB,WAAaozB,EAChBA,GACA/7C,KAAKw2C,iBAAiBwF,GAAUD,EAC3B/7C,KAAK22C,oBAAoBp8C,KAAK,SAAU5P,GAAQ,OAAOA,EAAKwW,EAAMm3C,cAAgB0D,KACnFh8C,KAAK22C,oBAAoB9qD,KAAKyrD,EAAO3sD,OAIzCqV,KAAKi8C,oBAAoBD,KAIrChG,EAAUxrD,UAAUyxD,oBAAsB,SAAUC,GAChD,IAAI/6C,EAAQnB,YACJA,KAAKw2C,iBAAiB0F,GAC9B,IAAIzsD,EACYuQ,KAAK22C,oBAAoBp8C,KAAK,SAAU5P,EAAMe,GAE1D,OADA+D,EAAQ/D,EACDf,EAAKwW,EAAMm3C,cAAgB4D,KAGlCl8C,KAAK22C,oBAAoBr2B,OAAO7wB,EAAO,IAG/CumD,EAAUxrD,UAAUsxD,iBAAmB,SAAU5uD,EAAK6uD,EAAU1e,GAC5D,IAAKxyC,oBAAkBqC,GAAM,CACzB,IAAIivD,EAASjvD,EAAImB,cAAc,kBAC1BxD,oBAAkBsxD,KACnBtjD,EAAqBsjD,EAAOC,mBAAoBL,IAC5ClxD,oBAAkBmV,KAAKq8C,iBAAoBxxD,oBAAkBmV,KAAKq8C,iBAC9Dr8C,KAAKq8C,cAAc/pD,UAAUC,SAAS,sBAC1CyN,KAAKs8C,iBAAiBjf,MAKtC2Y,EAAUxrD,UAAUwvD,mBAAqB,SAAUpB,EAAaxuB,GAC5D,GAAKwuB,EAAL,CAGA54C,KAAKi2C,mBAAmBpqD,KAAKu+B,GAC7B,IAAIv9B,EAAMmT,KAAKi2C,mBAAmBtqD,OAWlC,GAVIqU,KAAK5N,OAAOg/B,oBAAsBvkC,EAAM,GACnCmT,KAAKi2C,mBAAmBppD,EAAM,KAAOmT,KAAKi2C,mBAAmBppD,EAAM,IACpEmT,KAAKi2C,mBAAmBsG,MAGhCv8C,KAAKm2C,gBAAgBtqD,KAAK+sD,GAC1BA,EAAYnhD,aAAa,gBAAiB,QAC1CuI,KAAK67C,wBAAwBjD,GAAa,GAC1C54C,KAAK87C,iBAAiBlD,GAAa,GACnC54C,KAAKw7C,uBAAuB5C,GAAa,EAAM,KAAM,wBAAyB,aACzE54C,KAAKo2C,aAAc,CACpB,IAAI9rD,EAAS0V,KAAK6U,MAAMm9B,iBAAiBvC,UACrCmJ,EAAYvhD,MAAM2I,KAAK6U,MAAMm9B,iBAAiBvC,WAC9CmJ,EAAYvqD,cAAc,yFAC9B,IAAK/D,EACD,OAEJ0V,KAAK6U,MAAMu4B,SAAU9iD,OAAQA,IAAU,MAO/C0rD,EAAUxrD,UAAUotD,eAAiB,WACjC,IAAK53C,KAAK5N,OAAO6lD,oBAAuBj4C,KAAK5N,OAAO6lD,qBAAuBj4C,KAAK5N,OAAOm2B,SACjF19B,oBAAkBmV,KAAKq8C,gBAAkBr8C,KAAKq8C,cAAc/pD,UAAUC,SAAS,oBAAsB,CACvG,IAAImG,EAAOsH,KAAK5N,OAAOK,QAAQpE,cAAc,gBAAgBA,cAAc,QACvEqK,EAAKpG,UAAUC,SAAS,gBACxBmG,EAAKpG,UAAUc,OAAO,iBAE1B4M,KAAK07C,cAAe,EAChB17C,KAAK5N,OAAO6lD,qBACZj4C,KAAK22C,uBACL32C,KAAKw2C,qBAETx2C,KAAK+4C,oBACL/4C,KAAKw8C,qBACLx8C,KAAKu2C,wBAAyB,IAOtCP,EAAUxrD,UAAUuuD,kBAAoB,WACpC,IAAI53C,EAAQnB,KACZ,GAAIA,KAAKo5C,cAAe,CAWpB,IAAK,IAVD18C,EAAOsD,KAAK5N,OACZi1B,EAAOrnB,KAAK5N,OAAOwkC,cACnBjsC,KACAuC,KACAmtD,KACAhd,KACA1hC,EAAUe,EAAK00B,mBACfj4B,KACA7O,EAAS0V,KAAK1V,OAEToB,GADasU,KAAK5N,OAAOi0C,wBACrB,GAAGx5C,EAAMmT,KAAKi2C,mBAAmBtqD,OAAQD,EAAImB,EAAKnB,IAAK,CAChE,IAAI+wD,EAA+C,UAAlCz8C,KAAK5N,OAAOiE,aAAaC,KACtC0J,KAAK5N,OAAO2jC,UAAU/1B,KAAKi2C,mBAAmBvqD,IAC5CsU,KAAK5N,OAAOwkC,cAAc52B,KAAKi2C,mBAAmBvqD,IACpD4rD,EAASt3C,KAAKu3C,UAAUkF,GACxBnF,IACA3sD,EAAKkB,KAAKyrD,EAAO3sD,MACjBuC,EAAIrB,KAAK4wD,GACTpf,EAASxxC,KAAKmU,KAAKi2C,mBAAmBvqD,IACtCyN,EAAetN,KAAKyrD,EAAOn+C,iBAE3BwC,GACA0+C,EAAKxuD,KAAK6Q,EAAKs5B,iBAAiBh2B,KAAKi2C,mBAAmBvqD,KAOhE,GAJIsU,KAAK6yB,kBAAkB6M,mBACvB1/B,KAAK07C,eAAe17C,KAAK08C,uBAE7B18C,KAAKs7C,YAAYC,GAAuBle,EAAU1yC,EAAMuC,EAAKiM,EAAgB7O,EAAQ+vD,GACjFr6C,KAAK42C,mBAAqB52C,KAAK07C,cAAgB17C,KAAK08C,uBAAwB,CAC5E,GAAI18C,KAAK5N,OAAO6lD,mBACZ,GAAuF,iBAAnFj4C,KAAK28C,kBAAkB38C,KAAK5N,OAAOK,QAAQpE,cAAc,sBACzD,IAAS3C,EAAI,EAAGA,EAAIsU,KAAKm2C,gBAAgBxqD,OAAQD,IAC7CsU,KAAK67C,wBAAwB77C,KAAKm2C,gBAAgBzqD,IAAI,QAI1DsU,KAAK5N,OAAO02B,aAAe,QAC3B9oB,KAAK48C,2BAA0B,GAGvC,OAEJv1B,EAAK1lB,OAAO,SAAU4kC,GAAU,OAAOA,EAAO8S,aAAa,mBAAqB7pD,QAAQ,SAAUkM,GACzFyF,EAAM21C,YACPp7C,EAAIhE,gBAAgB,iBACpByJ,EAAMq6C,uBAAuB9/C,GAAK,GAAO,EAAM,wBAAyB,aAE5EyF,EAAM06C,wBAAwBngD,GAAK,GACnCyF,EAAM26C,iBAAiBpgD,KAE3B,IAAShQ,EAAI,EAAGmB,EAAMmT,KAAKi2C,mBAAmBtqD,OAAQD,EAAImB,EAAKnB,IAAK,CAChE,IAAImxD,EAAa78C,KAAKk4C,sBAAsBl4C,KAAKi2C,mBAAmBvqD,IAChEmxD,IACK78C,KAAK82C,YACN+F,EAAWnlD,gBAAgB,iBAC3BsI,KAAKw7C,uBAAuBqB,GAAY,GAAO,EAAM,wBAAyB,aAElF78C,KAAK67C,wBAAwBgB,GAAY,IAGjD78C,KAAKi2C,sBACLj2C,KAAKm2C,mBACLn2C,KAAKo5C,eAAgB,EACrBp5C,KAAKi6C,gBAAgB,GACrBj6C,KAAKs7C,YAAYG,GAAsBpe,EAAU1yC,EAAMuC,EAAKiM,EAAgB7O,EAAQ+vD,GACpFr6C,KAAK07C,cAAe,IAG5B1F,EAAUxrD,UAAU8wD,YAAc,SAAUvnD,EAAMspC,EAAU1yC,EAAMuC,EAAKiM,EAAgB7O,EAAQ+vD,GAC3F,GAAKr6C,KAAK6yB,kBAAkB6M,kBAAoB1/B,KAAK07C,eAAkB17C,KAAK6yB,kBAAkB6M,iBAAkB,CAC5G,IACIod,GACAzf,SAAUA,EAAU1yC,KAAMA,EAAMwO,eAAgBA,EAChDmX,QAAQ,EAAOhmB,OAAQA,EAAQoxD,aAAc17C,KAAK07C,cAEtD,IAAKllC,cAAcxW,KAAK5N,OAAOqkB,cAAe,CAE1CqmC,EAA0B,IAAI5vD,MAE7B,CAGD4vD,EAAyB,SAAIA,EAAyB,SAAEA,EAAyB,SAAEnxD,OAAS,GAC5FmxD,EAAqB,KAAIA,EAAqB,KAAEA,EAAqB,KAAEnxD,OAAS,GAEpFqU,KAAK5N,OAAO+d,QAAQpc,EAAMiM,KAAK5N,OAAOg/B,mBAAqBukB,MAAamH,GAAkBzC,KAAMA,IAAUyC,GAC1G98C,KAAK42C,iBAAmBkG,EAAoB,OACvC98C,KAAK42C,mBAAsB52C,KAAK07C,cAAiB17C,KAAK08C,yBACvD18C,KAAK67C,wBAAwB3uD,EAAI,IAAI,GACrC8S,KAAK87C,iBAAiB5uD,EAAI,QAAI6H,EAAWsoC,EAAS,OAI9D2Y,EAAUxrD,UAAU+sD,UAAY,SAAUrqD,GAEtC,YADY,IAARA,IAAkBA,EAAM8S,KAAKw3C,cAC7B3sD,oBAAkBqC,OAGH,iBAARA,IACPA,EAAM8S,KAAK5N,OAAO6lC,cAAc/qC,IAEhCA,EACO8S,KAAK5N,OAAO8mD,oBAAoBhsD,EAAIwkB,aAAa,sBAIhEskC,EAAUxrD,UAAUuyD,uBAAyB,SAAUtN,GACnD,IAAI/yC,EAAOsD,KAAK5N,OACZuJ,EAAUe,EAAK00B,mBACnB,OAAIz1B,GACI8zC,EAAUA,WAAa9zC,EAChBe,EAAKsgD,wBAAwBvN,EAAUpS,SAAUr9B,KAAKi9C,YAAYxN,EAAUpS,SAAUoS,EAAUA,YAIxG,MAQXuG,EAAUxrD,UAAU0yD,WAAa,SAAUzN,EAAW+I,GAClD,GAAKx4C,KAAKm9C,aAAV,CAGA,IAEI7lD,EAFAoF,EAAOsD,KAAK5N,OACZgrD,EAAep9C,KAAK+8C,uBAAuBtN,GAE1C2N,IACDA,EAAe1gD,EAAK2gD,iBAAiB5N,EAAUpS,SAAUr9B,KAAKi9C,YAAYxN,EAAUpS,SAAUoS,EAAUA,aAE5GzvC,KAEKw3C,aAAe/H,EAAUpS,SAC9B,IAAIyd,EAAe96C,KAAKm4C,+BAA+Bn4C,KAAKw3C,cAC5D,GAAKx3C,KAAKm9C,cAAiBC,IAAgBp9C,KAAK63C,YAAhD,CAGA,IAAIyF,EAAiBF,EAAa9qD,UAAUC,SAAS,6BAIrD,GAHAimD,EAAYA,GAAwB+E,cAAYv9C,KAAKw9C,YACjD/N,EAAUpS,WAAar9B,KAAKw9C,UAAUngB,UAAYoS,EAAUA,YAAczvC,KAAKw9C,UAAU/N,WACzF6N,EAFmB9E,EAoBnBx4C,KAAKy9C,gBAAgBnmD,EAAMkhD,EAAU/I,EAAW2N,EAActC,EAA9D96C,CAA4E1I,OAjBjE,CAQX,GAPAA,GACI3M,KAAMmwD,EAAcrL,UAAWA,EAC/B6J,cAAet5C,KAAKs2C,mBAAoBiD,eAAgBv5C,KAAKq2C,oBAC7DqH,gBAAiB19C,KAAK29C,WAClB39C,KAAK49C,aAAa59C,KAAK29C,WAAWtgB,SAAUr9B,KAAK29C,WAAWlO,gBAAa16C,EAC7Eub,QAAQ,IAEPkG,cAAcxW,KAAK5N,OAAOqkB,cAAe,CAE1Cnf,EAAgB,YAAI8lD,EAEpB9lD,EAAyB,qBAAI0I,KAAK29C,WAEtC39C,KAAK5N,OAAO+d,QAAQ0tC,GAAsB79C,KAAKq3C,YAAY//C,GAAO0I,KAAKy9C,gBAAgBnmD,EAAMkhD,EAAU/I,EAAW2N,EAActC,QAMxI9E,EAAUxrD,UAAUizD,gBAAkB,SAAUK,EAAmBtF,EAAU/I,EAAW2N,EAActC,GAClG,IAAI35C,EAAQnB,KACZ,OAAO,SAAU89C,GACb,IACIC,EAAc,cAClB,IAAKlzD,oBAAkBizD,KAAkD,IAA5BA,EAAsB,UAG9DtF,IACDsF,EAAkBC,GAAeD,EAAkBC,GAAeD,EAAkBC,GAAeX,GAEvGj8C,EAAM68C,YACDxF,GACDr3C,EAAM88C,oBAAoBb,EAAc3N,EAAUpS,SAAUoS,EAAUA,WAE1EtuC,EAAM+8C,gBAAgBzO,EAAWA,IAC5B+I,GAAU,CACX,IAAIlhD,GACA3M,KAAMmwD,EAAcrL,UAAWA,EAAWsO,YAAaX,EACvDe,qBAAsBh9C,EAAM+0C,uBAC5BwH,gBAAiBv8C,EAAMw8C,WACnBx8C,EAAMy8C,aAAaz8C,EAAMw8C,WAAWtgB,SAAUl8B,EAAMw8C,WAAWlO,gBAAa16C,GAEpF,IAAKyhB,aAAY,CAEblf,EAAyB,qBAAI6J,EAAMw8C,WAEvCx8C,EAAMs2C,iBAAiBngD,EAAM8mD,OAIzCpI,EAAUxrD,UAAUozD,aAAe,SAAUS,EAAMC,GAC/C,OAAQt+C,KAAK5N,OAAOg/B,oBAAsBktB,GAAQt+C,KAAK5N,OAAOg/B,mBAAqBpxB,KAAK5N,OAAO4qD,wBAAwBqB,EAAMC,GAC3Et+C,KAAK5N,OAAOirD,iBAAiBgB,EAAMC,IAQzFtI,EAAUxrD,UAAU+zD,mBAAqB,SAAUn0B,EAAYqwB,GAC3D,IAAIt5C,EAAQnB,KACZ,GAAKA,KAAKm9C,aAAV,CAGA,IAAIzgD,EAAOsD,KAAK5N,OACZgrD,EAAep9C,KAAK+8C,uBAAuB3yB,GAC3CzuB,EAAUe,EAAK00B,mBACdgsB,IACDA,EAAe1gD,EAAK2gD,iBAAiBjzB,EAAWiT,SAAUjT,EAAWqlB,YAEzE,IAAImB,EACAlyC,EAGA8/C,EAFAC,EAAUr0B,EACVs0B,EAAUjE,EAAWA,GAAsBrwB,EAE/CpqB,KAAKw3C,aAAeptB,EAAWiT,SAC/B,IACIyd,EAAe96C,KAAKm4C,+BAA+Bn4C,KAAKw3C,cAC5D,IAAIx3C,KAAK66C,eAAkB76C,KAAKm9C,eAAgBn9C,KAAK63C,YAArD,CAGA,IAAIvgD,GACA3M,KAAMmwD,EAAcrL,UAAWrlB,EAAY2zB,YAAaX,EACxD9D,cAAet5C,KAAKs2C,mBAAoBiD,eAAgBv5C,KAAKq2C,oBAC7DqH,gBAAiB19C,KAAK29C,WAAa39C,KAAK49C,aAAa59C,KAAK29C,WAAWtgB,SAAUr9B,KAAK29C,WAAWlO,gBAAa16C,GAEhH,IAAKyhB,aAAY,CAEblf,EAAyB,qBAAI0I,KAAK29C,WAEtC39C,KAAK5N,OAAO+d,QAAQ0tC,GAAsB79C,KAAKq3C,YAAY//C,GAAO,SAAUwmD,GACxE,GAAKjzD,oBAAkBizD,KAAkD,IAA5BA,EAAsB,OAAnE,CAIA,GADA38C,EAAM68C,YACF5zB,EAAWiT,SAAWod,EAASpd,SAAU,CACzC,IAAIppC,EAAOm2B,EACXA,EAAaqwB,EACbA,EAAWxmD,EAEf,IAAK,IAAIvI,EAAI0+B,EAAWiT,SAAU3xC,GAAK+uD,EAASpd,SAAU3xC,IAAK,CACvDyV,EAAM0xB,kBAAkB8rB,kBAAkBjvD,QAAQ,OAAS,GAC3DkhD,EAAMllD,IAAM0+B,EAAWiT,SAAYjT,EAAoB,UAAI,EAC3D1rB,EAAMhT,IAAM+uD,EAASpd,SAAYod,EAAkB,UAAIt5C,EAAMy9C,gBAAgBlzD,KAG7EklD,EAAMxmB,EAAWqlB,UACjB/wC,EAAM+7C,EAAShL,WAEnB+O,KACA,IAAK,IAAIrxD,EAAIyjD,EAAMlyC,EAAMkyC,EAAMlyC,EAAK7R,EAAM+jD,EAAMlyC,EAAMkyC,EAAMlyC,EAAKvR,GAAKN,EAAKM,KAG/DiwD,EAFJzhD,EACIxO,EAAIwO,EACWe,EAAK2gD,iBAAiB3xD,EAAGyB,GAGzBuP,EAAKsgD,wBAAwBtxD,EAAGyB,GAIpCuP,EAAK2gD,iBAAiB3xD,EAAGyB,MAK5CqxD,EAAY3yD,KAAKsB,GACjBgU,EAAM88C,oBAAoBb,GAC1Bj8C,EAAM09C,aAAazB,IAEvBj8C,EAAM+0C,uBAAuBrqD,MAAOwxC,SAAU3xC,EAAG8yD,YAAaA,IAElEr9C,EAAM+8C,gBAAgBO,EAASC,GAC/B,IAAII,GACAn0D,KAAMmwD,EAAcrL,UAAWrlB,EAAY2zB,YAAaX,EACxDe,qBAAsBh9C,EAAM+0C,uBAC5BwH,gBAAiBv8C,EAAMw8C,WAAax8C,EAAMy8C,aAAaz8C,EAAMw8C,WAAWtgB,SAAUl8B,EAAMw8C,WAAWlO,gBAAa16C,GAEpH,IAAKyhB,aAAY,CAEbsoC,EAAqC,qBAAI39C,EAAMw8C,WAEnDx8C,EAAMs2C,iBAAiBqH,EAAkBV,UAQjDpI,EAAUxrD,UAAUu0D,YAAc,SAAUC,GACxC,GAAKh/C,KAAKm9C,aAAV,CAGA,IAAIzgD,EAAOsD,KAAK5N,OACZgrD,EAAep9C,KAAK+8C,uBAAuBiC,EAAe,IAC1DrjD,EAAUe,EAAK00B,mBACdgsB,IACDA,EAAe1gD,EAAK2gD,iBAAiB2B,EAAe,GAAG3hB,SAAU2hB,EAAe,GAAGR,YAAY,KAEnGx+C,KAAKw3C,aAAewH,EAAe,GAAG3hB,SACtC,IAAIyd,EAAe96C,KAAKm4C,+BAA+Bn4C,KAAKw3C,cAC5D,IAAIx3C,KAAK66C,eAAkB76C,KAAKm9C,eAAgBn9C,KAAK63C,YAArD,CAGA,IAAIoH,GACAt0D,KAAMmwD,EAAcrL,UAAWuP,EAAe,GAAGR,YAAY,GAC7DT,YAAaX,EAAc9D,cAAet5C,KAAKs2C,mBAC/CiD,eAAgBv5C,KAAKq2C,oBACrBqH,gBAAiB19C,KAAK29C,WAAa39C,KAAK49C,aAAa59C,KAAK29C,WAAWtgB,SAAUr9B,KAAK29C,WAAWlO,gBAAa16C,GAEhH,IAAKyhB,aAAY,CAEbyoC,EAD2B,wBACYj/C,KAAK29C,WAEhD39C,KAAKo3C,cAAc6H,EAAgBpB,IACnC,IAAK,IAAInyD,EAAI,EAAGmB,EAAMmyD,EAAerzD,OAAQD,EAAImB,EAAKnB,IAClD,IAAK,IAAIyB,EAAI,EAAGspC,EAAUuoB,EAAetzD,GAAG8yD,YAAY7yD,OAAQwB,EAAIspC,EAAStpC,KAGjEiwD,EAFJzhD,EACIqjD,EAAetzD,GAAG8yD,YAAYrxD,GAAKwO,EACpBe,EAAK2gD,iBAAiB2B,EAAetzD,GAAG2xC,SAAU2hB,EAAetzD,GAAG8yD,YAAYrxD,IAGhFuP,EAAKsgD,wBAAwBgC,EAAetzD,GAAG2xC,SAAU2hB,EAAetzD,GAAG8yD,YAAYrxD,IAI3FuP,EAAK2gD,iBAAiB2B,EAAetzD,GAAG2xC,SAAU2hB,EAAetzD,GAAG8yD,YAAYrxD,OAKnG6S,KAAKi+C,oBAAoBb,GACzBp9C,KAAK6+C,aAAazB,GAClBp9C,KAAKk/C,iBAAkB7hB,SAAU2hB,EAAetzD,GAAG2xC,SAAUoS,UAAWuP,EAAetzD,GAAG8yD,YAAYrxD,MAG9G6S,KAAKk+C,iBAAkB7gB,SAAU2hB,EAAe,GAAG3hB,SAAUoS,UAAWuP,EAAe,GAAGR,YAAY,KAAQnhB,SAAU2hB,EAAe,GAAG3hB,SAAUoS,UAAWuP,EAAe,GAAGR,YAAY,KAC7L,IAAIM,GACAn0D,KAAMmwD,EAAcrL,UAAWuP,EAAe,GAAGR,YAAY,GAC7DT,YAAaX,EAAce,qBAAsBn+C,KAAKk2C,uBACtDwH,gBAAiB19C,KAAK29C,WAAa39C,KAAK49C,aAAa59C,KAAK29C,WAAWtgB,SAAUr9B,KAAK29C,WAAWlO,gBAAa16C,GAEhH,IAAKyhB,aAAY,CAEbsoC,EAD2B,wBACc9+C,KAAK29C,WAElD39C,KAAKy3C,iBAAiBqH,EAAkBV,OAQ5CpI,EAAUxrD,UAAU20D,oBAAsB,SAAUX,GAChD,GAAKx+C,KAAKm9C,aAAV,CAGA,IAGIC,EAEA3tD,EALAiN,EAAOsD,KAAK5N,OAIZuJ,EAAUe,EAAK00B,mBAEnBpxB,KAAKw3C,aAAegH,EAAY,GAAGnhB,SACnC,IAAIyd,EAAe96C,KAAKm4C,+BAA+Bn4C,KAAKw3C,cAC5D,IAAIx3C,KAAK66C,eAAkB76C,KAAKm9C,eAAgBn9C,KAAK63C,YAArD,CAGA73C,KAAKo/C,eACL,IAAI9H,EAEAA,EADA37C,GAAW6iD,EAAY,GAAG/O,WAAa9zC,EAC9Be,EAAK2iD,uBAAuBb,EAAY,GAAGnhB,UAG3Cr9B,KAAKu3C,UAAUiH,EAAY,GAAGnhB,UAG3C,IAAK,IADDlkC,KACK5B,EAAK,EAAG+nD,EAAgBd,EAAajnD,EAAK+nD,EAAc3zD,OAAQ4L,IAAM,CAE3E,IAAK,IADDk4C,EAAY6P,EAAc/nD,GACrB7L,EAAI,EAAGmB,EAAMmT,KAAKk2C,uBAAuBvqD,OAAQD,EAAImB,EAAKnB,IAC/D,GAAIsU,KAAKk2C,uBAAuBxqD,GAAG2xC,WAAaoS,EAAUpS,SAAU,CAChE5tC,EAAQ/D,EACR,OAGR0xD,EAAep9C,KAAK+8C,uBAAuBtN,MAEvC2N,EAAe1gD,EAAK2gD,iBAAiB5N,EAAUpS,SAAUr9B,KAAKi9C,YAAYxN,EAAUpS,SAAUoS,EAAUA,aAE5Gt2C,EAAetN,KAAKyrD,EAAOjgD,MAAMsE,GAAW6iD,EAAY,GAAG/O,WAAa9zC,EAClE8zC,EAAUA,UAAY9zC,EAAU8zC,EAAUA,WAAWt2C,gBAC3D,IAAI7B,GACA3M,KAAMmwD,EAAcrL,UAAW+O,EAAY,GAC3CjF,eAAgBv5C,KAAKq2C,oBACrB0H,YAAaX,EAAc9D,cAAet5C,KAAKs2C,mBAC/CoH,gBAAiB19C,KAAK29C,WAClBjhD,EAAK2gD,iBAAiBr9C,KAAK29C,WAAWtgB,SAAUr9B,KAAK29C,WAAWlO,gBAAa16C,GAErF,IAAKyhB,aAAY,CAEblf,EAD2B,wBACE0I,KAAK29C,WAEtC,IAAIvC,EAAe3rD,GAAS,EAC5B,GAAI2rD,EAAc,CACd,IAAImE,EAAkBv/C,KAAKk2C,uBAAuBzmD,GAAO+uD,YACrDe,EAAgB7vD,QAAQ+/C,EAAUA,YAAc,GAChDzvC,KAAKw/C,aAAaC,KAA2BpiB,SAAUoS,EAAUpS,SAAUmhB,aAAc/O,EAAUA,aAAeqL,GAAesC,GAAejkD,GAChJomD,EAAgBj/B,OAAOi/B,EAAgB7vD,QAAQ+/C,EAAUA,WAAY,GACtC,IAA3B8P,EAAgB5zD,QAChBqU,KAAKk2C,uBAAuB51B,OAAO7wB,EAAO,GAE9C2tD,EAAa9qD,UAAUc,OAAO,6BAC9BgqD,EAAa1lD,gBAAgB,iBAC7BsI,KAAKw/C,aAAaE,KAA0BriB,SAAUoS,EAAUpS,SAAUmhB,aAAc/O,EAAUA,aAAeqL,GAAesC,GAAejkD,KAG/IiiD,GAAe,EACfp7C,KAAKo3C,cAAc9/C,EAAMumD,IACzB79C,KAAKk/C,iBAAkB7hB,SAAUoS,EAAUpS,SAAUoS,UAAWA,EAAUA,YAC1EzvC,KAAKi+C,oBAAoBb,GACzBp9C,KAAK6+C,aAAazB,SAItBp9C,KAAKo3C,cAAc9/C,EAAMumD,IACzB79C,KAAKi+C,oBAAoBb,EAAc3N,EAAUpS,SAAUoS,EAAUA,WAGzE,GADAzvC,KAAKk+C,gBAAgBzO,EAAWA,IAC3B2L,EAAc,CACf,IAAI0D,GACAn0D,KAAMmwD,EAAcrL,UAAW+O,EAAY,GAAIT,YAAaX,EAC5DM,gBAAiB19C,KAAK29C,WAAa39C,KAAK49C,aAAa59C,KAAK29C,WAAWtgB,SAAUr9B,KAAK29C,WAAWlO,gBAC3F16C,EAAWopD,qBAAsBn+C,KAAKk2C,wBAE9C,IAAK1/B,aAAY,CAEbsoC,EAD2B,wBACc9+C,KAAK29C,WAElD39C,KAAKy3C,iBAAiBqH,EAAkBV,SAIpDpI,EAAUxrD,UAAUyyD,YAAc,SAAU5f,EAAU5tC,GAClD,IAAI4H,EACAsE,EAAUqE,KAAK5N,OAAOg/B,mBAW1B,GAVIz1B,GACIlM,GAASkM,IACTtE,EAAQ2I,KAAK5N,OAAO+kC,qBAAqBkG,IACrCr9B,KAAK5N,OAAO+kC,qBAAqBkG,GAAUlvC,iBAAiB,iBAGnEkJ,IACDA,EAAQ2I,KAAK5N,OAAOwkC,cAAcyG,IAC9Br9B,KAAK5N,OAAOwkC,cAAcyG,GAAUlvC,iBAAiB,iBAEzDkJ,EACA,IAAK,IAAIu9B,EAAI,EAAGA,EAAIv9B,EAAM1L,OAAQipC,IAAK,CAEnC,GADeoK,SAAS3nC,EAAMu9B,GAAGljB,aAAa,iBAAkB,MAC/CjiB,EAMb,OALIkM,GACIlM,GAASkM,IACTi5B,GAAKj5B,GAGNi5B,EAInB,OAAQ,GAEZohB,EAAUxrD,UAAUo0D,gBAAkB,SAAUvhB,GAC5C,IAAIhmC,EAAQ2I,KAAK5N,OAAOg/B,mBAAqBpxB,KAAK5N,OAAO+kC,qBAAqBkG,GAAUlvC,iBAAiB,gBACnG6R,KAAK5N,OAAOwkC,cAAcyG,GAAUlvC,iBAAiB,gBAC3D,OAAO6wC,SAAS3nC,EAAMA,EAAM1L,OAAS,GAAG+lB,aAAa,iBAAkB,KAE3EskC,EAAUxrD,UAAUwzD,UAAY,WAC5Bh+C,KAAKw8C,sBAETxG,EAAUxrD,UAAUg1D,aAAe,SAAUzrD,EAAMyqD,EAAa7zD,EAAM0M,EAAO8B,GAErE9B,EAAM,IAAMA,EAAM,GAAG/E,UAAUC,SAAS,iBACxCyN,KAAK87C,iBAAiBriB,UAAQpiC,EAAM,GAAI,OAE5C,IAAIC,GACAD,MAAOA,EAAO1M,KAAMA,EAAM6zD,YAAaA,EAAarlD,eAAgBA,EAAgBmX,QAAQ,GAEhGtQ,KAAK5N,OAAO+d,QAAQpc,EAAMuD,GAC1B0I,KAAK62C,oBAAsBv/C,EAAU,QAEzC0+C,EAAUxrD,UAAUyzD,oBAAsB,SAAUb,EAAc/f,EAAUoS,GACnE5kD,oBAAkBwyC,IACnBr9B,KAAKk/C,iBAAkB7hB,SAAUA,EAAUoS,UAAWA,IAE1D2N,EAAa9qD,UAAUoE,IAAI,6BACvB0mD,EAAa9qD,UAAUC,SAAS,iBAChCyN,KAAK87C,iBAAiBriB,UAAQ2jB,EAAc,OAAO,GAEvDp9C,KAAK6+C,aAAazB,IAEtBpH,EAAUxrD,UAAUq0D,aAAe,SAAUzlD,GACzC4G,KAAK1V,OAAS8O,EACTvO,oBAAkBuO,KACnBA,EAAK3B,aAAa,gBAAiB,QAC9BuI,KAAKo2C,cACNp2C,KAAK6U,MAAMu4B,SAAU9iD,OAAQ8O,IAAQ,KAIjD48C,EAAUxrD,UAAU0zD,gBAAkB,SAAU9zB,EAAYqwB,GACxDz6C,KAAKw9C,UAAYpzB,EACjBpqB,KAAK29C,WAAalD,EAClBz6C,KAAKs9C,eAAiBt9C,KAAKk2C,uBAAuBvqD,SAAU,GAEhEqqD,EAAUxrD,UAAU00D,gBAAkB,SAAUS,GAG5C,IAAK,IAFDC,EACAnwD,EACK/D,EAAI,EAAGmB,EAAMmT,KAAKk2C,uBAAuBvqD,OAAQD,EAAImB,EAAKnB,IAC/D,GAAIsU,KAAKk2C,uBAAuBxqD,GAAG2xC,WAAasiB,EAAatiB,SAAU,CACnEuiB,GAAa,EACbnwD,EAAQ/D,EACR,MAGJk0D,EACI5/C,KAAKk2C,uBAAuBzmD,GAAO+uD,YAAY9uD,QAAQiwD,EAAalQ,WAAa,GACjFzvC,KAAKk2C,uBAAuBzmD,GAAO+uD,YAAY3yD,KAAK8zD,EAAalQ,WAIrEzvC,KAAKk2C,uBAAuBrqD,MAAOwxC,SAAUsiB,EAAatiB,SAAUmhB,aAAcmB,EAAalQ,cAOvGuG,EAAUxrD,UAAUgyD,mBAAqB,WACrC,GAAIx8C,KAAKs9C,eAAgB,CACrB,IAAI5gD,EAAOsD,KAAK5N,OACZytD,EAAgB7/C,KAAK8/C,0BACrBC,EAAU//C,KAAKk2C,uBACfvrD,KACA0M,KACA8B,KACAqzB,EAAkBxsB,KAAKm4C,+BAEvBx8C,EAAUe,EAAK00B,mBACnBpxB,KAAKo/C,eACL,IAAK,IAAI1zD,EAAI,EAAGmB,EAAMkzD,EAAQp0D,OAAQD,EAAImB,EAAKnB,IAAK,CAChDf,EAAKkB,KAAK2gC,EAAgBuzB,EAAQr0D,GAAG2xC,WAErC,IAAK,IADDia,EAASt3C,KAAKu3C,UAAUwI,EAAQr0D,GAAG2xC,UAC9BlwC,EAAI,EAAG6yD,EAAOD,EAAQr0D,GAAG8yD,YAAY7yD,OAAQwB,EAAI6yD,EAAM7yD,IACxDwO,EACIokD,EAAQr0D,GAAG8yD,YAAYrxD,GAAKwO,EAC5BtE,EAAMxL,KAAK6Q,EAAK2gD,iBAAiB0C,EAAQr0D,GAAG2xC,SAAU0iB,EAAQr0D,GAAG8yD,YAAYrxD,KAG7EkK,EAAMxL,KAAK6Q,EAAKsgD,wBAAwB+C,EAAQr0D,GAAG2xC,SAAU0iB,EAAQr0D,GAAG8yD,YAAYrxD,MAIpFmqD,EAAOjgD,OACP8B,EAAetN,KAAKyrD,EAAOjgD,MAAM0oD,EAAQr0D,GAAG8yD,YAAYrxD,IAAIgM,gBAEhE9B,EAAMxL,KAAK6Q,EAAK2gD,iBAAiB0C,EAAQr0D,GAAG2xC,SAAU0iB,EAAQr0D,GAAG8yD,YAAYrxD,MAKzF,GADA6S,KAAKw/C,aAAaC,GAAwBM,EAASp1D,EAAM0M,EAAO8B,IAC/B,IAA7B6G,KAAK62C,oBACL,OAEJ,IAASnrD,EAAI,EAAGmB,EAAMgzD,EAAcl0D,OAAQD,EAAImB,EAAKnB,IACjDm0D,EAAcn0D,GAAG4G,UAAUc,OAAO,6BAClCysD,EAAcn0D,GAAGgM,gBAAgB,iBAEjCsI,KAAKigD,WACLjgD,KAAKkgD,cAETlgD,KAAKk2C,0BACLl2C,KAAKs9C,gBAAiB,EACtBt9C,KAAKw/C,aAAaE,GAAuBK,EAASp1D,EAAM0M,EAAO8B,KAGvE68C,EAAUxrD,UAAUs1D,wBAA0B,WAC1C,IAEIvpB,EAFA75B,EAAOsD,KAAK5N,OACZi1B,EAAO3qB,EAAKk6B,cAEZl6B,EAAK00B,qBACLmF,EAAQ75B,EAAKy6B,qBACb9P,EAAO3qB,EAAKyjD,eAAe94B,EAAMkP,IAGrC,IAAK,IADDl/B,KACK3L,EAAI,EAAGmB,EAAMw6B,EAAK17B,OAAQD,EAAImB,EAAKnB,IACxC2L,EAAQA,EAAM6G,UAAUhL,MAAMC,KAAKk0B,EAAK37B,GAAGyC,iBAAiB,gCAEhE,OAAOkJ,GAEX2+C,EAAUxrD,UAAU41D,iBAAmB,SAAUh1D,GAC7CA,EAAEsjD,iBACF,IAMI3jB,EANAs1B,EAASrgD,KAAK5N,OAAOK,QAAQzB,wBAC7BsvD,EAAKtgD,KAAKrO,EACV4uD,EAAKvgD,KAAK1M,EACVxC,EAAWc,EAAYxG,GACvBo1D,EAAK1vD,EAASa,EAAI0uD,EAAO7uD,KACzBivD,EAAK3vD,EAASwC,EAAI+sD,EAAO9uD,IAEzBjH,EAASmvC,UAAQruC,EAAEd,OAAQ,MAqB/B,GApBA0V,KAAK0gD,WAAY,EACZ1gD,KAAK2gD,aACDr2D,IACDA,EAASmvC,UAAQvrC,SAAS0yD,iBAAiB5gD,KAAK5N,OAAOK,QAAQouD,WAAa,EAAGz1D,EAAEgG,SAAU,OAE3FkvD,EAAKE,IACLz1B,EAAMy1B,EACNA,EAAKF,EACLA,EAAKv1B,GAELw1B,EAAKE,IACL11B,EAAM01B,EACNA,EAAKF,EACLA,EAAKx1B,GAET/qB,KAAKvN,QAAQvB,MAAMM,KAAO8uD,EAAK,KAC/BtgD,KAAKvN,QAAQvB,MAAMK,IAAMgvD,EAAK,KAC9BvgD,KAAKvN,QAAQvB,MAAMX,MAAQiwD,EAAKF,EAAK,KACrCtgD,KAAKvN,QAAQvB,MAAMoE,OAASmrD,EAAKF,EAAK,MAEtCj2D,IAAWc,EAAE01D,UAAY11D,EAAE21D,SAAU,CACrC,IAAI1jB,EAAW2B,SAAS10C,EAAOonB,aAAa,iBAAkB,IAC9D,GAAK1R,KAAK2gD,WAIL,CACD,IAAIj7B,EAAK1zB,EAAa5G,EAAEd,OAAQ,aAC5Bo7B,IACA1lB,KAAKghD,YAAchhD,KAAKihD,UACxBjhD,KAAKkhD,UAAYlvD,EAAa5G,EAAEd,OAAQ,aACxC0V,KAAKmhD,gBAAgB/1D,EAAGiyC,EAAU2B,SAAStZ,EAAGhU,aAAa,iBAAkB,WARjF1R,KAAKo/C,eACLp/C,KAAKw6C,kBAAkBx6C,KAAKohD,YAAa/jB,KAYrD2Y,EAAUxrD,UAAU22D,gBAAkB,SAAU/1D,EAAGiyC,EAAUoS,GACpDzvC,KAAKqhD,eAMNrhD,KAAKshD,gBACLthD,KAAKuhD,mBAAmBn2D,KANxB4U,KAAKw8C,qBACLx8C,KAAKu+C,oBAAqBlhB,SAAUr9B,KAAKohD,YAAa3R,UAAWzvC,KAAKwhD,kBAAqBnkB,SAAUA,EAAUoS,UAAWA,IAC1HzvC,KAAKyhD,gBAObzL,EAAUxrD,UAAUi3D,YAAc,WACmB,kBAA7CzhD,KAAK6yB,kBAAkB8rB,mBAAyC3+C,KAAKk2C,uBAAuBvqD,SAAWqU,KAAK5N,OAAOm2B,QAC9GvoB,KAAKigD,WACNjgD,KAAK0hD,gBAET1hD,KAAK2hD,mBAGL3hD,KAAKkgD,eAGblK,EAAUxrD,UAAUm3D,gBAAkB,WAElC,GADA3hD,KAAK4hD,sBACA5hD,KAAKihD,WAAcjhD,KAAK6hD,SAAY7hD,KAAKk2C,uBAAuBvqD,OAArE,CAGAqU,KAAK8hD,cACL,IAAIC,EAAQ/hD,KAAKihD,UAAUjwD,wBACvBgxD,EAAShiD,KAAKiiD,QAAQjxD,wBACtBkxD,EAAYliD,KAAKihD,UAAUkB,aAAanxD,wBAC5CgP,KAAK6hD,QAAQ3wD,MAAMM,KAAOuwD,EAAMvwD,KAAO0wD,EAAU1wD,KAAO,KACxDwO,KAAK6hD,QAAQ3wD,MAAMK,IAAMwwD,EAAMxwD,IAAM2wD,EAAU3wD,IAAM,KACrDyO,KAAK6hD,QAAQ3wD,MAAMoE,OAAS0sD,EAAOzwD,IAAMwwD,EAAMxwD,IAAM,EAChDywD,EAAOzwD,IAAM2wD,EAAU3wD,IAAMywD,EAAO1sD,OAAS,GAAMysD,EAAMxwD,IAAM2wD,EAAU3wD,KAAO,KAAOywD,EAAO1sD,OAAS,KAC5G0K,KAAKoiD,SAASlxD,MAAMM,KAAOwwD,EAAOxwD,KAAO0wD,EAAU1wD,KAAOwwD,EAAOzxD,MAAQ,KACzEyP,KAAKoiD,SAASlxD,MAAMK,IAAMyO,KAAK6hD,QAAQ3wD,MAAMK,IAC7CyO,KAAKoiD,SAASlxD,MAAMoE,OAAS0K,KAAK6hD,QAAQ3wD,MAAMoE,OAChD0K,KAAKqiD,OAAOnxD,MAAMM,KAAOwO,KAAK6hD,QAAQ3wD,MAAMM,KAC5CwO,KAAKqiD,OAAOnxD,MAAMK,IAAMyO,KAAKoiD,SAASlxD,MAAMK,IAC5CyO,KAAKqiD,OAAOnxD,MAAMX,MAAQyuC,SAASh/B,KAAKoiD,SAASlxD,MAAMM,KAAM,IAAMwtC,SAASh/B,KAAK6hD,QAAQ3wD,MAAMM,KAAM,IAAM,EAAI,KAC/GwO,KAAKigD,UAAU/uD,MAAMM,KAAOwO,KAAK6hD,QAAQ3wD,MAAMM,KAC/CwO,KAAKigD,UAAU/uD,MAAMK,IAAMytC,SAASh/B,KAAK6hD,QAAQ3wD,MAAMK,IAAK,IAAMytC,SAASh/B,KAAK6hD,QAAQ3wD,MAAMoE,OAAQ,IAAM,KAC5G0K,KAAKigD,UAAU/uD,MAAMX,MAAQyP,KAAKqiD,OAAOnxD,MAAMX,QAEnDylD,EAAUxrD,UAAUk3D,cAAgB,WAC3B1hD,KAAK6hD,UACN7hD,KAAK6hD,QAAU7hD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,WAAY6C,OAAQ,iBACrK8K,KAAKoiD,SAAWpiD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,YAAa6C,OAAQ,iBACvK8K,KAAKigD,UAAYjgD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,aAAc6C,OAAQ,kBACzK8K,KAAKqiD,OAASriD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,UAAW6C,OAAQ,oBAG3K8gD,EAAUxrD,UAAUs3D,YAAc,WAC1B9hD,KAAK6hD,UACL7hD,KAAK6hD,QAAQ3wD,MAAMC,QAAU,GAC7B6O,KAAKoiD,SAASlxD,MAAMC,QAAU,GAC9B6O,KAAKigD,UAAU/uD,MAAMC,QAAU,GAC/B6O,KAAKqiD,OAAOnxD,MAAMC,QAAU,KAGpC6kD,EAAUxrD,UAAU01D,YAAc,WAC1BlgD,KAAK6hD,UACL7hD,KAAK6hD,QAAQ3wD,MAAMC,QAAU,OAC7B6O,KAAKoiD,SAASlxD,MAAMC,QAAU,OAC9B6O,KAAKigD,UAAU/uD,MAAMC,QAAU,OAC/B6O,KAAKqiD,OAAOnxD,MAAMC,QAAU,SAGpC6kD,EAAUxrD,UAAU83D,cAAgB,WAC3BtiD,KAAKuiD,aACNviD,KAAKwiD,kBAETxiD,KAAKyiD,qBAETzM,EAAUxrD,UAAUi4D,kBAAoB,WACpC,GAAKziD,KAAKihD,WAAcjhD,KAAK0iD,UAA7B,CAGA1iD,KAAK8hD,cACL,IAAIC,EAAQ/hD,KAAKghD,YAAYhwD,wBACzBgxD,EAAShiD,KAAKkhD,UAAUlwD,wBACxBkxD,EAAYliD,KAAKghD,YAAYmB,aAAanxD,wBAC9CgP,KAAK0iD,UAAUxxD,MAAMM,KAAOuwD,EAAMvwD,KAAO0wD,EAAU1wD,KAAO,KAC1DwO,KAAK0iD,UAAUxxD,MAAMK,IAAMwwD,EAAMxwD,IAAM2wD,EAAU3wD,IAAM,KACvDyO,KAAK0iD,UAAUxxD,MAAMoE,OAAS0sD,EAAOzwD,IAAMwwD,EAAMxwD,IAAM,EAClDywD,EAAOzwD,IAAM2wD,EAAU3wD,IAAMywD,EAAO1sD,OAAS,GAAMysD,EAAMxwD,IAAM2wD,EAAU3wD,KAAO,KAAOywD,EAAO1sD,OAAS,KAC5G0K,KAAK2iD,WAAWzxD,MAAMM,KAAOwwD,EAAOxwD,KAAO0wD,EAAU1wD,KAAOwwD,EAAOzxD,MAAQ,KAC3EyP,KAAK2iD,WAAWzxD,MAAMK,IAAMyO,KAAK0iD,UAAUxxD,MAAMK,IACjDyO,KAAK2iD,WAAWzxD,MAAMoE,OAAS0K,KAAK0iD,UAAUxxD,MAAMoE,OACpD0K,KAAK4iD,SAAS1xD,MAAMM,KAAOwO,KAAK0iD,UAAUxxD,MAAMM,KAChDwO,KAAK4iD,SAAS1xD,MAAMK,IAAMyO,KAAK2iD,WAAWzxD,MAAMK,IAChDyO,KAAK4iD,SAAS1xD,MAAMX,MAAQyuC,SAASh/B,KAAK2iD,WAAWzxD,MAAMM,KAAM,IAAMwtC,SAASh/B,KAAK0iD,UAAUxxD,MAAMM,KAAM,IAAM,EAAI,KACrHwO,KAAKuiD,YAAYrxD,MAAMM,KAAOwO,KAAK0iD,UAAUxxD,MAAMM,KACnDwO,KAAKuiD,YAAYrxD,MAAMK,IAAMytC,SAASh/B,KAAK0iD,UAAUxxD,MAAMK,IAAK,IAAMytC,SAASh/B,KAAK0iD,UAAUxxD,MAAMoE,OAAQ,IAAM,KAClH0K,KAAKuiD,YAAYrxD,MAAMX,MAAQyP,KAAK4iD,SAAS1xD,MAAMX,QAEvDylD,EAAUxrD,UAAUg4D,gBAAkB,WAC7BxiD,KAAK0iD,YACN1iD,KAAK0iD,UAAY1iD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,aAAc6C,OAAQ,iBACzK8K,KAAK2iD,WAAa3iD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,cAAe6C,OAAQ,iBAC3K8K,KAAKuiD,YAAcviD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,eAAgB6C,OAAQ,kBAC7K8K,KAAK4iD,SAAW5iD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,UAAW0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,YAAa6C,OAAQ,oBAG/K8gD,EAAUxrD,UAAU82D,cAAgB,WAC5BthD,KAAK0iD,YACL1iD,KAAK0iD,UAAUxxD,MAAMC,QAAU,GAC/B6O,KAAK2iD,WAAWzxD,MAAMC,QAAU,GAChC6O,KAAKuiD,YAAYrxD,MAAMC,QAAU,GACjC6O,KAAK4iD,SAAS1xD,MAAMC,QAAU,KAGtC6kD,EAAUxrD,UAAUq4D,cAAgB,WAC5B7iD,KAAK0iD,YACL1iD,KAAK0iD,UAAUxxD,MAAMC,QAAU,OAC/B6O,KAAK2iD,WAAWzxD,MAAMC,QAAU,OAChC6O,KAAKuiD,YAAYrxD,MAAMC,QAAU,OACjC6O,KAAK4iD,SAAS1xD,MAAMC,QAAU,SAGtC6kD,EAAUxrD,UAAUs4D,YAAc,SAAUzE,EAAMC,EAAMllD,GACpD,IAAIvD,EAAMmK,KAAK5N,OAAOu9C,iBAAiB2O,GACnCt+C,KAAK5N,OAAO0lD,YAAc1+C,IACT,WAAbvD,EAAI9B,KACJiM,KAAK5N,OAAO0lD,WAAWiL,WAAW1E,EAAMxoD,EAAInL,MAAOs0C,SAAS5lC,EAAKsf,YAAa,KAG9E1Y,KAAK5N,OAAO0lD,WAAWiL,WAAW1E,EAAMxoD,EAAInL,MAAO0O,EAAKsf,eAKpEs9B,EAAUxrD,UAAU+2D,mBAAqB,SAAUn2D,EAAG43D,GAClD,IAAIC,EAAcjkB,SAAShtC,EAAagO,KAAKghD,YAAa,SAAStvC,aAAa,iBAAkB,IAC9FwxC,EAAelkB,SAASh/B,KAAKghD,YAAYtvC,aAAa,iBAAkB,IACxEyxC,EAAYnkB,SAAShtC,EAAagO,KAAKkhD,UAAW,SAASxvC,aAAa,iBAAkB,IAC1F0xC,EAAapkB,SAASh/B,KAAKkhD,UAAUxvC,aAAa,iBAAkB,IACpE8kB,EAASx2B,KAAKk2C,uBAAuBvqD,OAAS,EAC9C03D,EAASrjD,KAAKk2C,uBAAuB,GAAGsI,YAAY7yD,OAAS,EACjE,QACQ,GACJ,KAAMq3D,GAAWhjD,KAAKkhD,UAAU5uD,UAAUC,SAAS,gCAC7CP,EAAa5G,EAAEd,OAAQ,aACzB0V,KAAKghD,YAAchhD,KAAK5N,OAAOirD,iBAAiB4F,EAAaC,GAC7DljD,KAAKkhD,UAAYlhD,KAAK5N,OAAOirD,iBAAiB4F,EAAczsB,EAAQ0sB,EAAeG,GACnFrjD,KAAKsiD,gBACL,MACJ,KAAKY,EAAeG,EAASD,GACzBA,EAAaF,EAAeG,EAAS,EAAIF,EAAYF,EAAczsB,GAChE4sB,EAAaF,EAAeG,EAAS,EAAIJ,EAAcE,EAI1D,GAHAnjD,KAAKkhD,UAAYlhD,KAAK5N,OAAOirD,iBAAiB4F,EAAczsB,EAAQ4sB,GACpED,EAAYnkB,SAAShtC,EAAagO,KAAKkhD,UAAW,SAASxvC,aAAa,iBAAkB,IAC1F0xC,EAAapkB,SAASh/B,KAAKkhD,UAAUxvC,aAAa,iBAAkB,IAC/DsxC,EAGA,CAED,IAAK,IADDM,EAAUtkB,SAASh/B,KAAKiiD,QAAQvwC,aAAa,iBAAkB,IAC1DhmB,EAAIu3D,EAAav3D,GAAKy3D,EAAWz3D,IAGtC,IAAK,IAFD2L,KAAWnE,MAAMC,KAAK6M,KAAK5N,OAAOwkC,cAAclrC,GAAGyC,iBAAiB,+BACpE6B,EAAI,EACC7C,EAAIm2D,EAAU,EAAGn2D,GAAKi2D,EAAYj2D,IACnC6C,EAAIqzD,IACJrzD,EAAI,GAERgQ,KAAK8iD,YAAYp3D,EAAGyB,EAAGkK,EAAMrH,IAC7BA,IAGRgQ,KAAKu+C,oBAAqBlhB,SAAU4lB,EAAaxT,UAAWzvC,KAAKujD,iBAAoBlmB,SAAU8lB,EAAW1T,UAAW2T,SAfrHpjD,KAAKsiD,gBAiBT,MACJ,KAAKY,EAAeE,GAChBF,EAAeE,EAAa,EAAID,EAAYF,EAAczsB,GAC1D0sB,EAAeE,EAAa,EAAIH,EAAcE,EAG9C,GAFAnjD,KAAKghD,YAAchhD,KAAK5N,OAAOirD,iBAAiB4F,EAAaG,GAC7DpjD,KAAKkhD,UAAYlhD,KAAKiiD,QACjBe,EAGA,CACD,IAASt3D,EAAIu3D,EAAav3D,GAAKu3D,EAAczsB,EAAQ9qC,IAAK,EAClD2L,KAAWnE,MAAMC,KAAK6M,KAAK5N,OAAOwkC,cAAclrC,GAAGyC,iBAAiB,gCAClEwtD,UAEN,IADI3rD,EAAI,EACC7C,EAAI6S,KAAKujD,eAAiB,EAAGp2D,GAAKi2D,EAAYj2D,IAC/C6C,EAAIqzD,IACJrzD,EAAI,GAERgQ,KAAK8iD,YAAYp3D,EAAGyB,EAAGkK,EAAMrH,IAC7BA,IAGRgQ,KAAKu+C,oBAAqBlhB,SAAU4lB,EAAaxT,UAAW2T,IAAgB/lB,SAAU4lB,EAAczsB,EAAQiZ,UAAWzvC,KAAKujD,eAAiBF,SAf7IrjD,KAAKsiD,gBAiBT,MACJ,KAAKW,EAAcE,EAGf,GAFAnjD,KAAKghD,YAAchhD,KAAK5N,OAAOirD,iBAAiB8F,EAAWD,GAC3DljD,KAAKkhD,UAAYlhD,KAAKiiD,QACjBe,EAGA,CAGI,IADDniD,EADA2iD,EAAQxkB,SAASh/B,KAAKiiD,QAAQlxD,cAAc2gB,aAAa,iBAAkB,IAE/E,IAAShmB,EAAIu3D,EAAc,EAAGv3D,GAAKy3D,EAAWz3D,IAAK,CAC3CmV,IAAMb,KAAKoqB,WAAa,IACxBvpB,EAAI2iD,GAEJnsD,KAAWnE,MAAMC,KAAK6M,KAAK5N,OAAOwkC,cAAc/1B,GAAG1S,iBAAiB,+BACpE6B,EAAI,EACR6Q,IACA,IAAS1T,EAAI6S,KAAKujD,eAAgBp2D,GAAK6S,KAAKujD,eAAiBF,EAAQl2D,IACjE6S,KAAK8iD,YAAYp3D,EAAGyB,EAAGkK,EAAMrH,IAC7BA,IAGRgQ,KAAKu+C,oBAAqBlhB,SAAU8lB,EAAW1T,UAAWyT,EAAeG,IAAYhmB,SAAU4lB,EAAczsB,EAAQiZ,UAAWyT,SAjBhIljD,KAAKsiD,gBAmBT,MACJ,QAEI,GADAtiD,KAAKkhD,UAAYlhD,KAAK5N,OAAOirD,iBAAiB8F,EAAWD,EAAeG,GACnEL,EAGA,CAGI,IAFDQ,EAAQxkB,SAASh/B,KAAKiiD,QAAQlxD,cAAc2gB,aAAa,iBAAkB,IAE/E,IADI7Q,EAAIb,KAAKoqB,WACJ1+B,EAAI83D,EAAQ,EAAG93D,GAAKy3D,EAAWz3D,IAAK,CACrCmV,IAAM2iD,EAAQ,IACd3iD,EAAIb,KAAKoqB,YAET/yB,KAAWnE,MAAMC,KAAK6M,KAAK5N,OAAOwkC,cAAc/1B,GAAG1S,iBAAiB,+BACxE0S,IACI7Q,EAAI,EACR,IAAK,IAAI4kC,EAAI50B,KAAKujD,eAAgB3uB,GAAK50B,KAAKujD,eAAiBF,EAAQzuB,IACjE50B,KAAK8iD,YAAYp3D,EAAGkpC,EAAGv9B,EAAMrH,IAC7BA,IAGRgQ,KAAKu+C,oBAAqBlhB,SAAUmmB,EAAQhtB,EAAQiZ,UAAWyT,IAAkB7lB,SAAU8lB,EAAW1T,UAAWyT,EAAeG,SAjBhIrjD,KAAKsiD,kBAsBrBtM,EAAUxrD,UAAUi5D,eAAiB,SAAUr4D,GAC3C8C,SAASyG,KAAKrC,UAAUc,OAAO,uBAC3B4M,KAAKvN,SACLW,SAAO4M,KAAKvN,SAEZuN,KAAK0gD,WAAoD,IAAvC1gD,KAAKk2C,uBAAuBvqD,QAAsE,IAAtDqU,KAAKk2C,uBAAuB,GAAGsI,YAAY7yD,OACzGqU,KAAK0jD,UAAY1xD,EAAa5G,EAAEd,OAAQ,aAGxC0V,KAAK0jD,UAAY,KAErB1jD,KAAK0gD,WAAY,EACjB1gD,KAAK2jD,yBACD3jD,KAAKqhD,gBACLrhD,KAAKghD,YAAchhD,KAAKihD,UACxBjhD,KAAKkhD,UAAYlvD,EAAa5G,EAAEd,OAAQ,aACxC0V,KAAK4jD,wBACL5jD,KAAKuhD,mBAAmBn2D,GAAG,GAC3B4U,KAAK2jD,yBACL3jD,KAAK6iD,gBACL7iD,KAAK2hD,kBACL3hD,KAAKqhD,eAAgB,GAEzBluC,eAAa/f,OAAO4M,KAAK5N,OAAO8kC,aAAc,YAAal3B,KAAKogD,kBAChEjtC,eAAa/f,OAAOlF,SAASyG,KAAM,UAAWqL,KAAKyjD,iBAEvDzN,EAAUxrD,UAAU40D,aAAe,WAC3Bp/C,KAAK6jD,WACL7jD,KAAK6jD,SAAS3yD,MAAMC,QAAU,SAMtC6kD,EAAUxrD,UAAUm5D,uBAAyB,WACzC,GAAI3jD,KAAK5N,OAAO0xD,iBAAmB9jD,KAAK5N,OAAOm2B,QAC3CvoB,KAAK6yB,kBAAkB8rB,kBAAkBjvD,QAAQ,QAAU,IAAMsQ,KAAKm5C,cAAgBn5C,KAAK66C,eACxF76C,KAAKk2C,uBAAuBvqD,OAAQ,CACvC,IAAI0L,KAAWnE,MAAMC,KAAK6M,KAAK5N,OAAOwkC,cAAc52B,KAAKk2C,uBAAuBl2C,KAAKk2C,uBAAuBvqD,OAAS,GAAG0xC,UAAUlvC,iBAAiB,+BAC9I6R,KAAK5N,OAAOK,QAAQpE,cAAc,IAAM2R,KAAK5N,OAAOK,QAAQJ,GAAK,eAClE2N,KAAK6jD,SAAW7jD,KAAK5N,OAAOie,kBAAkBtf,cAAc6C,YAAYa,gBAAc,OAAS9D,UAAW,aAAc0B,GAAI2N,KAAK5N,OAAOK,QAAQJ,GAAK,gBAEzJ,IAAI+G,EAAO/B,EAAMA,EAAM1L,OAAS,GAChC,GAAIyN,GAAQA,EAAK+oD,aAAc,CAC3B,IAAI4B,EAAa3qD,EAAKpI,wBAClBkxD,EAAY9oD,EAAK+oD,aAAanxD,wBAClCgP,KAAK6jD,SAAS3yD,MAAMM,KAAOuyD,EAAWvyD,KAAO0wD,EAAU1wD,KAAOuyD,EAAWxzD,MAAQ,EAAI,KACrFyP,KAAK6jD,SAAS3yD,MAAMK,IAAMwyD,EAAWxyD,IAAM2wD,EAAU3wD,IAAMwyD,EAAWzuD,OAAS,EAAI,KAEvF0K,KAAK6jD,SAAS3yD,MAAMC,QAAU,QAG9B6O,KAAKo/C,gBAGbpJ,EAAUxrD,UAAU2sD,iBAAmB,SAAU/rD,GAC7C,IAEI44D,EAFA15D,EAASc,EAAEd,OACXoS,EAAOsD,KAAK5N,OAEZslD,EAAc1lD,EAAa1H,EAAQ,UACvC,IAAIotD,GAAeA,EAAYrlD,KAAOqK,EAAKjK,QAAQJ,GAAnD,CAMA,IAHIjH,EAAE21D,UAAY31D,EAAE01D,UAChB11D,EAAEsjD,iBAEF18C,EAAa1H,EAAQ,eAAiBc,EAAE21D,WAAa31D,EAAE01D,QAAS,CAChE,GAAIpkD,EAAKm2B,kBAAkB8rB,kBAAkBjvD,QAAQ,QAAU,IAAMsQ,KAAKm5C,cAAgBn5C,KAAK66C,cAC3F76C,KAAK2gD,YAAa,EAClBqD,GAAS,OAER,GAAItnD,EAAKunD,sBAAwBvnD,EAAK6rB,OAAQ,CAC/C,IAAKvoB,KAAKm5C,aAAen5C,KAAK66C,eAAiBphB,UAAQnvC,EAAQ,MAAMgI,UAAUC,SAAS,yBAEpF,YADAyN,KAAK0gD,WAAY,GAGrBsD,GAAS,EACThkD,KAAKvN,QAAUuN,KAAK5N,OAAOqC,cAAc,OAAS9D,UAAW,mBAC7D+L,EAAKw6B,aAAatjC,YAAYoM,KAAKvN,SAEnCuxD,GACAhkD,KAAKkkD,WAAW94D,GAAG,GAG3B4U,KAAK4hD,sBACDt3D,EAAOgI,UAAUC,SAAS,gBAC1ByN,KAAK2gD,YAAa,EAClB3gD,KAAKqhD,eAAgB,EACrBrhD,KAAKkkD,WAAW94D,MAGxB4qD,EAAUxrD,UAAUo3D,oBAAsB,WACtC,IAAIvqD,KAAWnE,MAAMC,KAAK6M,KAAK5N,OAAOK,QAAQtE,iBAAiB,+BAC/D6R,KAAKihD,UAAY5pD,EAAM,GACvB2I,KAAKiiD,QAAU5qD,EAAMA,EAAM1L,OAAS,GAChCqU,KAAKihD,YACLjhD,KAAKoqB,WAAa4U,SAASh/B,KAAKihD,UAAUlwD,cAAc2gB,aAAa,iBAAkB,IACvF1R,KAAKujD,eAAiBvkB,SAAShtC,EAAagO,KAAKihD,UAAW,aAAavvC,aAAa,iBAAkB,MAGhHskC,EAAUxrD,UAAUo5D,sBAAwB,WACpC5jD,KAAKihD,YACLjhD,KAAKoqB,WAAa4U,SAASh/B,KAAKihD,UAAUlwD,cAAc2gB,aAAa,iBAAkB,IACvF1R,KAAKujD,eAAiBvkB,SAAShtC,EAAagO,KAAKihD,UAAW,aAAavvC,aAAa,iBAAkB,MAGhHskC,EAAUxrD,UAAU05D,WAAa,SAAU94D,EAAG+4D,GAC1C,IAAIznD,EAAOsD,KAAK5N,OAChB,GAAI+xD,EAAU,CACV,IAAI97B,EAAKoR,UAAQruC,EAAEd,OAAQ,MAC3B0V,KAAKohD,YAAcpiB,SAAS3W,EAAG3W,aAAa,iBAAkB,IAC9D1R,KAAKwhD,gBAAkBxiB,SAAShtC,EAAa5G,EAAEd,OAAQ,aAAaonB,aAAa,iBAAkB,IAEvGxjB,SAASyG,KAAKrC,UAAUoE,IAAI,uBAC5B,IAAI2pD,EAAS3jD,EAAKjK,QAAQzB,wBACtBozD,EAAUxyD,EAAYxG,GAC1B4U,KAAKrO,EAAIyyD,EAAQzyD,EAAI0uD,EAAO7uD,KAC5BwO,KAAK1M,EAAI8wD,EAAQ9wD,EAAI+sD,EAAO9uD,IAC5B4hB,eAAazc,IAAIgG,EAAKw6B,aAAc,YAAal3B,KAAKogD,iBAAkBpgD,MACxEmT,eAAazc,IAAIxI,SAASyG,KAAM,UAAWqL,KAAKyjD,eAAgBzjD,OAEpEg2C,EAAUxrD,UAAU65D,qBAAuB,SAAUj5D,GAC3B,kBAAlBA,EAAEyU,aAAoCG,KAAK5N,OAAO6lD,oBAClDj4C,KAAK43C,kBAMb5B,EAAUxrD,UAAUojB,iBAAmB,WAC/B5N,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOqb,GAAGskB,GAAiB/xB,KAAKgyB,kBAAmBhyB,MACxDA,KAAK5N,OAAOqb,GAAG62C,GAAmBtkD,KAAKk3C,oBAAqBl3C,MAC5DA,KAAK5N,OAAOqb,GAAG82C,GAA6BvkD,KAAKy3C,iBAAkBz3C,MACnEA,KAAK5N,OAAOqb,GAAG+2C,GAA8BxkD,KAAKy3C,iBAAkBz3C,MACpEA,KAAK5N,OAAOqb,GAAGg3C,GAA4BzkD,KAAK0kD,kBAAmB1kD,MACnEA,KAAK5N,OAAOqb,GAAGk3C,GAAoB3kD,KAAK4kD,cAAe5kD,MACvDA,KAAK5N,OAAOqb,GAAGgoB,GAAyBz1B,KAAKqkD,qBAAsBrkD,MACnEA,KAAK5N,OAAOqb,GAAGwsB,GAA8Bj6B,KAAKoJ,sBAAuBpJ,MACzEA,KAAK5N,OAAOqb,GAAGC,GAAqB1N,KAAKsH,WAAYtH,MACrDA,KAAK6kD,oBAAsB7kD,KAAKgF,YAAY8I,KAAK9N,MACjDA,KAAK8kD,uBAAyB9kD,KAAKiF,eAAe6I,KAAK9N,MACvDA,KAAK5N,OAAOwb,iBAAiBC,GAAoB7N,KAAK6kD,qBACtD7kD,KAAK5N,OAAOwb,iBAAiBqP,GAAuBjd,KAAK8kD,wBACzD9kD,KAAK5N,OAAOqb,GAAGkS,GAAoB3f,KAAKsJ,YAAatJ,MACrDA,KAAK5N,OAAOqb,GAAG8sB,GAAwBv6B,KAAK+kD,cAAe/kD,MAC3DA,KAAKglD,8BAKThP,EAAUxrD,UAAUsnB,oBAAsB,WAClC9R,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOyf,IAAIkgB,GAAiB/xB,KAAKgyB,mBACtChyB,KAAK5N,OAAOyf,IAAIyyC,GAAmBtkD,KAAKk3C,qBACxCl3C,KAAK5N,OAAOyf,IAAI0yC,GAA6BvkD,KAAKy3C,kBAClDz3C,KAAK5N,OAAOyf,IAAI2yC,GAA8BxkD,KAAKy3C,kBACnDz3C,KAAK5N,OAAOyf,IAAI4yC,GAA4BzkD,KAAK0kD,mBACjD1kD,KAAK5N,OAAOyf,IAAI8yC,GAAoB3kD,KAAK4kD,eACzC5kD,KAAK5N,OAAOyf,IAAI4jB,GAAyBz1B,KAAKqkD,sBAC9CrkD,KAAK5N,OAAOyf,IAAIooB,GAA8Bj6B,KAAKoJ,uBACnDpJ,KAAK5N,OAAO0f,oBAAoBjE,GAAoB7N,KAAK6kD,qBACzD7kD,KAAK5N,OAAO0f,oBAAoBmL,GAAuBjd,KAAK8kD,wBAC5D9kD,KAAK5N,OAAOyf,IAAI8N,GAAoB3f,KAAKsJ,aACzCtJ,KAAK5N,OAAOyf,IAAI0oB,GAAwBv6B,KAAK+kD,eAC7C/kD,KAAKilD,iCAETjP,EAAUxrD,UAAU0oB,WAAa,WAC7BlT,KAAKklD,SAAqD,IAA3CxS,UAAUyS,UAAUz1D,QAAQ,UACvCsQ,KAAKklD,UACL/xC,eAAazc,IAAIsJ,KAAK5N,OAAOK,QAAS,UAAWuN,KAAKolD,eAAgBplD,MACtEmT,eAAazc,IAAIsJ,KAAK5N,OAAOK,QAAS,QAASuN,KAAKqlD,aAAcrlD,QAG1Eg2C,EAAUxrD,UAAUgpB,aAAe,WAC3BxT,KAAKklD,UACL/xC,eAAa/f,OAAO4M,KAAK5N,OAAOK,QAAS,UAAWuN,KAAKolD,gBACzDjyC,eAAa/f,OAAO4M,KAAK5N,OAAOK,QAAS,QAASuN,KAAKqlD,gBAG/DrP,EAAUxrD,UAAU4e,sBAAwB,WACnCpJ,KAAK5N,OAAO6lD,oBACbj4C,KAAK43C,kBAGb5B,EAAUxrD,UAAUu6D,cAAgB,WAChC/kD,KAAKs8C,oBAETtG,EAAUxrD,UAAU8e,YAAc,SAAUle,GACxC,IAAK,IAAIM,EAAI,EAAGA,EAAIN,EAAEoB,QAAQb,OAAQD,WAC1BsU,KAAKw2C,iBAAiBprD,EAAEoB,QAAQd,GAAGsU,KAAKs4C,eAC9Ct4C,KAAKskC,kBAEXtkC,KAAKs8C,oBAGTtG,EAAUxrD,UAAU0hB,iBAAmB,SAAU9gB,GACvB,kBAAlBA,EAAEyU,aAAoCG,KAAK5N,OAAO6lD,oBAClDj4C,KAAK43C,kBAIb5B,EAAUxrD,UAAU86D,eAAiB,WACjC,OAAOtlD,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,sBAExD2nD,EAAUxrD,UAAUwnC,kBAAoB,SAAU5mC,GAC1CA,EAAEgtC,SAAWp4B,KAAKgQ,iBAAmB5kB,EAAEitC,QACvCr4B,KAAKwlB,UAGbwwB,EAAUxrD,UAAUg7B,OAAS,SAAUp6B,GACnC+nB,eAAazc,IAAIsJ,KAAK5N,OAAO8kC,aAAc,YAAal3B,KAAKm3C,iBAAkBn3C,OAEnFg2C,EAAUxrD,UAAUk6D,kBAAoB,SAAUt5D,GAC9C,GAAIA,EAAEgtC,SAAWp4B,KAAKgQ,gBAAtB,CAGA,IAAItT,EAAOsD,KAAK5N,OACXvH,oBAAkBO,EAAE4H,WAAWe,OAAyC,WAAhCiM,KAAK6yB,kBAAkB9+B,OAC5DiM,KAAKk2C,uBAAuBvqD,OAAS,IACrCqU,KAAKw8C,qBACLx8C,KAAKw9C,eAAYzoD,GAEjBiL,KAAKi2C,mBAAmBtqD,OAAS,IACjCqU,KAAK+4C,oBACL/4C,KAAKy5C,kBAAe1kD,GAExBiL,KAAKu2C,wBAAyB,EAC9Bv2C,KAAK23C,aAEJ9sD,oBAAkBO,EAAE4H,WAAWsD,OAC/BzL,oBAAkBO,EAAE4H,WAAW2rD,qBAChC3+C,KAAK43C,iBACL53C,KAAKy5C,kBAAe1kD,EACpBiL,KAAKw9C,eAAYzoD,GAErBiL,KAAK+2C,aAAc,EACnB/2C,KAAKulD,2BACLvlD,KAAK+2C,aAAc,EACnB/2C,KAAKwlD,wBACgBxlD,KAAK5N,OAAO+lB,aAAaxW,OAAO,SAAU9L,GAAO,MAAoB,aAAbA,EAAI9B,OAC9DpI,SACf+Q,EAAKmsB,sBAAgE,oBAAxC7oB,KAAK6yB,kBAAkB4yB,eAExDzlD,KAAKyhD,gBAETzL,EAAUxrD,UAAUmtD,UAAY,WACxB33C,KAAK5N,OAAOK,QAAQpE,cAAc,gBAAgBF,iBAAiB,gBAAgBxC,SACnFqU,KAAK5N,OAAOK,QAAQpE,cAAc,gBAAgB6C,MAAMC,QAAU,SAG1E6kD,EAAUxrD,UAAU8c,WAAa,WAC7BtH,KAAK5N,OAAOyf,IAAInE,GAAqB1N,KAAKsH,YAC1CtH,KAAKu4C,UAAUv4C,KAAK5N,OAAOszD,mBAE/B1P,EAAUxrD,UAAU+6D,yBAA2B,WAC3CvlD,KAAK5N,OAAOyf,IAAInE,GAAqB1N,KAAKulD,0BAC1C,IAAII,EAAO3lD,KAAK5N,OACZ8oD,EAAiByK,EAAKxtC,aAAaxW,OAAO,SAAU9L,GAAO,MAAoB,aAAbA,EAAI9B,OACtEmnD,EAAevvD,OAAS,IACxBg6D,EAAK98B,qBAAsB,EAC3B7oB,KAAK4lD,SAAW1K,EAAe,GAAGxwD,MAClCsV,KAAKskC,kBAAoBtkC,KAAK5N,OAAO6K,aAAaqnC,kBAC9Cz5C,oBAAkBmV,KAAKskC,qBACvBtkC,KAAKskC,kBAAoBtkC,KAAKm4C,+BAA+BxsD,QAE7DqU,KAAK66C,eACL8K,EAAK9yB,kBAAkB9+B,KAAO,WAC9B4xD,EAAK5nC,YAGL/d,KAAKwlD,yBAGRG,EAAK98B,qBAAwB7oB,KAAK+2C,cACnC/2C,KAAK4lD,SAAW,KAChB5lD,KAAKwlD,0BAGbxP,EAAUxrD,UAAUg7D,sBAAwB,WACxC,IAAIG,EAAO3lD,KAAK5N,OACZ4N,KAAK5N,OAAOygC,kBAAkB6M,kBAAoB1/B,KAAK5N,OAAO4wB,0BAA0Br3B,OAAS,GACjGg6D,EAAK1N,oBAAqB,EAC1Bj4C,KAAK6lD,gCAEA7lD,KAAK5N,OAAO4wB,0BAA0Br3B,OAAS,GACpDg6D,EAAK1N,oBAAqB,EAC1Bj4C,KAAK6lD,iCAGLF,EAAK1N,oBAAqB,EAC1Bj4C,KAAKw2C,sBAGbR,EAAUxrD,UAAUq7D,6BAA+B,WAC/C,IAAIF,EAAO3lD,KAAK5N,OAEhB,GADA4N,KAAKs4C,WAAat4C,KAAK5N,OAAO4wB,0BAA0B,IACnD2iC,EAAK3pD,sBAAwBgE,KAAK4lD,WAC9BD,EAAK1N,oBAAoE,IAA9C3oD,OAAOC,KAAKyQ,KAAKw2C,kBAAkB7qD,SAC9Dg6D,EAAK1N,oBAAqB,CAC/B,IAAIttD,EAAOqV,KAAK5N,OAAOkiB,gBACnB7a,GAAQ,IAAIC,SAAQO,MAAM+F,KAAK4lD,SAAU,SAAS,GACjDnsD,EAAM4J,SACP5J,EAAM4J,OAASrD,KAAK5N,OAAOqH,MAAM4J,QAErC,IAAIgd,EAAc11B,EAAKu1B,WAAYzmB,GAC/BqsD,EAAU9lD,KACdA,KAAK5N,OAAOulB,cACZ0I,EAAYlS,KAAK,SAAU/iB,GACvB06D,EAAQ1qC,YAAYhwB,EAAEqC,QACtBq4D,EAAQC,0BACRD,EAAQ1zD,OAAOosB,kBAI3Bw3B,EAAUxrD,UAAU4wB,YAAc,SAAUxjB,GACxC,IAAK,IAAIlM,EAAI,EAAGA,EAAIkM,EAAIjM,OAAQD,IACxBb,oBAAkBmV,KAAKw2C,iBAAiB5+C,EAAIlM,GAAGsU,KAAKs4C,eAAiB1gD,EAAIlM,GAAGsU,KAAK4lD,YACjF5lD,KAAKw2C,iBAAiB5+C,EAAIlM,GAAGsU,KAAKs4C,aAAe1gD,EAAIlM,GAAGsU,KAAK4lD,WAGrE5lD,KAAK22C,oBAAsB/+C,GAE/Bo+C,EAAUxrD,UAAUw7D,gBAAkB,SAAU3qC,GAE5C,IAAKrb,KAAK5N,OAAOkiB,gBAAgBC,YAAwD,kBAAxCvU,KAAK5N,OAAOwH,WAAsB,YAC/E,GAAIyhB,EACA,IAAK,IAAI9jB,EAAK,EAAGiG,EAAKwC,KAAKkgB,UAAW3oB,EAAKiG,EAAG7R,OAAQ4L,IAAM,CACxD,IAAI5M,EAAO6S,EAAGjG,GACdyI,KAAKw2C,iBAAiB7rD,EAAKqV,KAAKs4C,cAAe,OAInDt4C,KAAKw2C,qBAOjBR,EAAUxrD,UAAU01B,QAAU,WAC1B,OAAOlgB,KAAK5N,OAAOkiB,gBAAgB+L,YAAYhmB,aAAa2F,KAAK5N,OAAOkiB,gBAAgBzI,eAAc,KAE1GmqC,EAAUxrD,UAAUu7D,wBAA0B,WAC1C,IAAI1+B,EAAOrnB,KAAK5N,OAAO2jC,UACvB,GAAI1O,EAAK17B,OAAS,IAAMqU,KAAK5N,OAAO6lD,oBAAsBj4C,KAAK4lD,UAAW,CAEtE,IAAK,IADDr2B,KACKpiC,EAAI,EAAGA,EAAIk6B,EAAK17B,OAAQwB,IAAK,CAClC,IAAImqD,EAASt3C,KAAKu3C,UAAUlwB,EAAKl6B,IAC7B+uD,EAAO5E,EAASA,EAAO3sD,KAAKqV,KAAKs4C,YAAc,KACnD,GAAa,OAAT4D,EACA,OAEJ,IAAI+J,OAAa,EACb9J,EAAS90B,EAAKl6B,GAAGkB,cAAc,kBAC/B2R,KAAKw2C,iBAAiB0F,IAAuC,UAA7Bl8C,KAAK5N,OAAO02B,cAA4B9oB,KAAKy2C,aAAa/mD,QAAQwsD,GAAQ,GACzE,YAA7Bl8C,KAAK5N,OAAO02B,cAA8B9oB,KAAKy2C,aAAa/mD,QAAQwsD,GAAQ,GAC/C,iBAA7Bl8C,KAAK5N,OAAO02B,eAAoCj+B,oBAAkBmV,KAAK4lD,WAAatO,EAAO3sD,KAAKqV,KAAK4lD,WACzGr2B,EAAQ1jC,KAAKmzC,SAAS3X,EAAKl6B,GAAGukB,aAAa,iBAAkB,KAC7Du0C,GAAa,IAGbA,GAAa,EACTjmD,KAAKq8C,gBAAkBF,GAAUn8C,KAAK5N,OAAOy2B,qBAC7ChwB,EAAqBsjD,EAAOC,mBAAoB6J,IAGxDjmD,KAAK67C,wBAAwBx0B,EAAKl6B,GAAI84D,GAE1CjmD,KAAK66C,eAAiBtrB,EAAQ5jC,OAAS,EAAIqU,KAAKu4C,UAAUhpB,EAAQ,IAAI,GAAQvvB,KAAK06C,WAAWnrB,GAE9FvvB,KAAK5N,OAAOy2B,qBAAuB7oB,KAAKm4C,+BAA+BxsD,OAAS,GAChFqU,KAAKs8C,oBAGbtG,EAAUxrD,UAAUwa,YAAc,SAAU5Z,GACxC,GAAsB,SAAlBA,EAAEyU,aAA0BG,KAAK5N,OAAO6lD,mBAAoB,CAC5D,IAAIiO,EAAalmD,KAAK5N,OAAOK,QAAQpE,cAAc,uBACnD,IAAKxD,oBAAkBq7D,GAAa,CAChC,IAAIh5D,EAAMusC,UAAQysB,EAAY,gBAC9B,GAAIh5D,EAAK,CACiC,WAAlC8S,KAAK5N,OAAOiE,aAAaC,OACzBpJ,EAAM8S,KAAK5N,OAAOK,QAAQpE,cAAc,kBAE5C,IAAIipD,EAASt3C,KAAKu3C,UAAUrqD,GAC5B,IAAKoqD,EACD,OAEJt3C,KAAKw2C,iBAAiBc,EAAO3sD,KAAKqV,KAAKs4C,aAAehB,EAAO3uB,WAAau9B,EAAWptD,aAGrFkH,KAAK02C,eAAiBwP,EAAWptD,WAKjDk9C,EAAUxrD,UAAUya,eAAiB,SAAU7Z,GAC3C,IAAI+V,EAAQnB,KACZ,GAAsB,SAAlB5U,EAAEyU,aAA0BG,KAAK5N,OAAO6lD,mBAAoB,CAC5D,GAAiB,QAAb7sD,EAAEqL,QAAoBuJ,KAAK02C,eAAgB,CAC3C,IAAIY,EAASt3C,KAAK5N,OAAO8mD,oBAAoBl5C,KAAK5N,OAAO2jC,UAAU3qC,EAAEwtD,aAAalnC,aAAa,aAC/F1R,KAAKw2C,iBAAiBc,EAAO3sD,KAAKqV,KAAKs4C,aAAehB,EAAO3uB,WAAa3oB,KAAK02C,eAEnF12C,KAAK+lD,0BAEa,WAAlB36D,EAAEyU,aAA4BG,KAAK5N,OAAO6lD,qBAC1C7sD,EAAET,KAAKuI,QAAQ1D,QAAQ,SAAU7E,GACxBE,oBAAkBF,EAAKwW,EAAMm3C,cAC9Bn3C,EAAM86C,oBAAoBtxD,EAAKwW,EAAMm3C,eAG7Ct4C,KAAKs8C,mBACLt8C,KAAKskC,kBAAoBtkC,KAAK5N,OAAO6K,aAAaqnC,mBAEhC,WAAlBl5C,EAAEyU,cACFG,KAAKy5C,kBAAe1kD,EACpBiL,KAAKw9C,eAAYzoD,EACjBiL,KAAK29C,gBAAa5oD,IAG1BihD,EAAUxrD,UAAU27D,YAAc,YACzBnmD,KAAK5N,OAAO4J,sBAAwBgE,KAAK5N,OAAO6lD,oBACjDj4C,KAAK+lD,2BAGb/P,EAAUxrD,UAAUoyD,0BAA4B,SAAUqJ,GACtD,GAAIjmD,KAAK5N,OAAO6lD,mBAAoB,CAGhC,IAAK,IADD5wB,EAAOrnB,KAAK5N,OAAO2jC,UACdrqC,EAAI,EAAGA,EAAI27B,EAAK17B,OAAQD,IAC7BsU,KAAK67C,wBAAwBx0B,EAAK37B,GAAIu6D,GAET,YAA7BjmD,KAAK5N,OAAO02B,cACZ9oB,KAAKgmD,iBAAgB,GACrBhmD,KAAK22C,oBAAsB32C,KAAK5N,OAAOkiB,gBAAgBC,WAAavU,KAAK22C,wBAEvC,UAA7B32C,KAAK5N,OAAO02B,eACjB9oB,KAAKgmD,iBAAgB,GACrBhmD,KAAK22C,oBAAwB32C,KAAK5N,OAAOkiB,gBAAgBC,YACX,kBAAxCvU,KAAK5N,OAAOwH,WAAsB,YACXoG,KAAK22C,oBAA9B32C,KAAKkgB,UAAUhtB,WAI/B8iD,EAAUxrD,UAAU47D,qBAAuB,SAAUH,GACjD,IAAII,EAAYrmD,KAAKyjC,cACjB6iB,EAAWtmD,KAAK5N,OAAOK,QAAQpE,cAAc,eAajD,GAZA2R,KAAKq8C,cAAgBr8C,KAAKslD,iBACtBW,GAAcjmD,KAAKm4C,+BAA+BxsD,QAClDqU,KAAK5N,OAAO02B,aAAe,QAC3B9oB,KAAK48C,0BAA0BqJ,GAC/BjmD,KAAKw6C,kBAAkB6L,EAAUnuB,mBAAmB,GAAImuB,EAAUnuB,mBAAmBl4B,KAAKm4C,+BAA+BxsD,OAAS,MAGlIqU,KAAK5N,OAAO02B,aAAe,UAC3B9oB,KAAK48C,0BAA0BqJ,GAC/BjmD,KAAK43C,kBAET53C,KAAKy2C,iBACA5rD,oBAAkBy7D,GAAW,CAC9B,IAAIJ,EAAaI,EAASj4D,cAAc,uBACnCxD,oBAAkBq7D,IACnBrtD,EAAqBqtD,EAAW9J,mBAAoB6J,KAIhEjQ,EAAUxrD,UAAU+7D,eAAiB,SAAUpoC,GAC3C,IAAIhd,EAAQnB,KACRwmD,EAAWxmD,KAAK28C,kBAAkBx+B,GAClC9C,EAAqB,UAAbmrC,EACK,iBAAbA,IACAnrC,EAAQrb,KAAKm4C,+BAA+B59C,KAAK,SAAU5P,GACvD,OAAOA,EAAKwW,EAAMm3C,cAAen3C,EAAMq1C,oBAG/Cx2C,KAAKomD,sBAAsB/qC,GAC3Brb,KAAK1V,OAAS,KACV0V,KAAKm4C,+BAA+BxsD,OAAS,GAC7CqU,KAAKs8C,mBAETt8C,KAAKymD,sBAAsBtoC,GAAW9C,IAE1C26B,EAAUxrD,UAAUmyD,kBAAoB,SAAUjhD,GAC9C,IAAIquB,EAAUruB,EAAMA,EAAI0gD,mBAAmB9pD,UACvC0N,KAAKslD,iBAAiBlJ,mBAAmB9pD,UAc7C,OAZIy3B,EAAQx3B,SAAS,WACR,QAEJw3B,EAAQx3B,SAAS,aACb,UAEJw3B,EAAQx3B,SAAS,UACb,eAGA,QAIjByjD,EAAUxrD,UAAUk8D,YAAc,SAAUvoC,GACxC,IAAI7zB,EAASmvC,UAAQz5B,KAAKq8C,cAAe,cAErC3/C,EAAOsD,KAAK5N,OAChB4N,KAAKs2C,oBAAqB,EAC1B,IAAIzD,EAAS,EACb,GAAI92C,GAAgBW,GAAO,CACvB,IAAIjJ,EAAMnJ,EAAOyG,cAAc2gB,aAAa,YAC5CmhC,EAASn2C,EAAKq5B,UAAUtZ,IAAI,SAAUmY,GAAK,OAAOA,EAAEljB,aAAa,cAAgBhiB,QAAQ+D,QAGzFo/C,EAAS7T,SAAS10C,EAAOyG,cAAc2gB,aAAa,iBAAkB,IAEtE1R,KAAK5N,OAAO6lD,oBAAsBj4C,KAAK5N,OAAOK,QAAQtE,iBAAiB,eAAexC,OAAS,KAC7FknD,EAEN7yC,KAAK2mD,wBAAwB9T,EAAQ7T,SAAS10C,EAAOonB,aAAa,iBAAkB,KACpF1R,KAAK4mD,0BAA0BntB,UAAQnvC,EAAQ,WAC/C0V,KAAKs8C,mBACLt8C,KAAKs2C,oBAAqB,EAC1Bt2C,KAAKymD,sBAAsBtoC,EAAUA,EAASi+B,mBAAmB9pD,UAAUC,SAAS,aAExFyjD,EAAUxrD,UAAUo8D,0BAA4B,SAAU15D,GACtD,GAAiC,UAA7B8S,KAAK5N,OAAO02B,cAAyD,YAA7B9oB,KAAK5N,OAAO02B,aAA4B,CAChF,IAAIwuB,EAASt3C,KAAKu3C,UAAUrqD,GACxBgvD,EAAO5E,GAAUA,EAAO3sD,KAAO2sD,EAAO3sD,KAAKqV,KAAKs4C,YAAc,KAClE,IAAK4D,EACD,OAEAl8C,KAAKy2C,aAAa/mD,QAAQwsD,GAAQ,EAClCl8C,KAAKy2C,aAAa5qD,KAAKqwD,GAGvBl8C,KAAKy2C,aAAan2B,OAAOtgB,KAAKy2C,aAAa/mD,QAAQwsD,GAAO,KAItElG,EAAUxrD,UAAUi8D,sBAAwB,SAAUtoC,EAAU8nC,GAC5DjmD,KAAK5N,OAAO+d,QAAQ02C,IAChB/tD,QAASmtD,EAAYhQ,mBAAoBj2C,KAAK5N,OAAOw2B,wBACrDt+B,OAAQ6zB,IAEPne,KAAK5N,OAAOm2B,SACbvoB,KAAKq8C,cAAgB,OAG7BrG,EAAUxrD,UAAUs8D,uBAAyB,SAAUr3D,GACnD,GAAIuQ,KAAK5N,OAAOy2B,qBAAuB7oB,KAAK5N,OAAO4J,uBAAyBgE,KAAK5N,OAAOkiB,gBAAgBC,WACpG,GAAiC,UAA7BvU,KAAK5N,OAAO02B,aAA0B,CACtC9oB,KAAKi2C,sBACL,IAAK,IAAItrD,EAAO,EAAGA,EAAOqV,KAAKkgB,UAAUv0B,OAAQhB,IAC7CqV,KAAKi2C,mBAAmBpqD,KAAKlB,QAGhC,GAAiC,YAA7BqV,KAAK5N,OAAO02B,aACjB9oB,KAAKi2C,2BAGL,GAAIxmD,GAA4E,UAAnEuQ,KAAK5N,OAAO6lC,cAAcxoC,GAAOiiB,aAAa,iBAA8B,CACrF,IAAIq1C,EAAc/mD,KAAKi2C,mBAAmBvmD,QAAQD,GAClDuQ,KAAKi2C,mBAAmB31B,OAAOymC,EAAa,KAM5D/Q,EAAUxrD,UAAU8xD,iBAAmB,SAAU7sD,EAAOu3D,GACpD,GAAIhnD,KAAK5N,OAAOy2B,qBAAsE,oBAA/C7oB,KAAK5N,OAAOygC,kBAAkB4yB,aAAoC,CACrG,IAAIwB,EAAa33D,OAAOC,KAAKyQ,KAAKw2C,kBAAkB7qD,OAKpD,GAJKqU,KAAK5N,OAAO6lD,qBACbgP,EAAajnD,KAAKi2C,mBAAmBtqD,OACrCqU,KAAKskC,kBAAoBtkC,KAAKm4C,+BAA+BxsD,QAE7DqU,KAAKslD,iBAAkB,CACvB,IAAI4B,EAAUlnD,KAAKslD,iBAAiBlJ,mBACpCrjD,eAAamuD,IAAW,UAAW,SAAU,cACzCD,IAAejnD,KAAKskC,mBAAqBtkC,KAAKskC,mBAAsBtkC,KAAK5N,OAAO4J,uBAC5EgE,KAAK5N,OAAO2K,cAAgBiD,KAAK5N,OAAOkiB,gBAAgBC,YAAc0yC,IAAejnD,KAAKkgB,UAAUv0B,QACxGmD,YAAUo4D,IAAW,YACjBF,GACAhnD,KAAKyjC,cAAc3L,aAAa,MAAM,GAAM,GAEhD93B,KAAK5N,OAAO02B,aAAe,SAEP,IAAfm+B,GAAmE,IAA/CjnD,KAAKm4C,+BAA+BxsD,QAC7DmD,YAAUo4D,IAAW,cACjBF,GACAhnD,KAAKyjC,cAAc3L,aAAa,MAAM,GAAO,GAEjD93B,KAAK5N,OAAO02B,aAAe,UACR,IAAfm+B,GAAmE,IAA/CjnD,KAAKm4C,+BAA+BxsD,OACxDmD,YAAUo4D,EAAQn2D,gBAAiB,wBAGnCgI,eAAamuD,EAAQn2D,gBAAiB,0BAI1CjC,YAAUo4D,IAAW,WACrBlnD,KAAK5N,OAAO02B,aAAe,iBAE3B9oB,KAAK5N,OAAO4J,sBAAyBgE,KAAK5N,OAAO2K,aAAgBiD,KAAK5N,OAAOkiB,gBAAgBC,YAC7FvU,KAAK8mD,uBAAuBr3D,MAK5CumD,EAAUxrD,UAAU46D,eAAiB,SAAUh6D,IAEf,WAAvBysB,UAAQs3B,KAAKhP,OAAkD,KAAd/0C,EAAE+7D,SAAgC,KAAd/7D,EAAE+7D,UACjD,UAAtBtvC,UAAQs3B,KAAKhP,MAAkC,KAAd/0C,EAAE+7D,SAA0C,YAAtBtvC,UAAQs3B,KAAKhP,MAAoC,MAAd/0C,EAAE+7D,WAC7FnnD,KAAKg3C,eAAgB,IAG7BhB,EAAUxrD,UAAU66D,aAAe,SAAUj6D,IACb,WAAvBysB,UAAQs3B,KAAKhP,OAAkD,KAAd/0C,EAAE+7D,SAAgC,KAAd/7D,EAAE+7D,UACjD,UAAtBtvC,UAAQs3B,KAAKhP,MAAkC,KAAd/0C,EAAE+7D,SAA0C,YAAtBtvC,UAAQs3B,KAAKhP,MAAoC,MAAd/0C,EAAE+7D,WAC7FnnD,KAAKg3C,eAAgB,IAG7BhB,EAAUxrD,UAAU4oB,aAAe,SAAUhoB,GACzC,IAAId,EAASc,EAAEd,OACf0V,KAAK25C,aAAervD,EACpB0V,KAAK07C,cAAe,EACpB17C,KAAKs2C,mBAAqBlrD,EAAE01D,SAAW9gD,KAAKu2C,wBACvCv2C,KAAKklD,SAAWllD,KAAKg3C,cAC1Bh3C,KAAKq2C,oBAAsBjrD,EAAE21D,SAC7B/gD,KAAKonD,kBAAkBh8D,GACvB,IAAIi8D,GAAY,EAChBrnD,KAAKo2C,cAAe,EACpB,IAAIj4B,EACAwhB,EAAY3tC,EAAa1H,EAAQ,sBAQrC,GAPA0V,KAAK08C,yBAAwB/c,IAAaA,EAAUxxC,iBAAiB,sBACjEwxC,GAAaA,EAAUxxC,iBAAiB,oCAAoCxC,OAAS,IACrFwyB,EAAWwhB,EAAUtxC,cAAc,0BACnCg5D,GAAY,GAEhBrnD,KAAKyhD,eACLn3D,EAAS0H,EAAa1H,EAAQ,eACfA,EAAOyG,cAAcuB,UAAUC,SAAS,WAAayN,KAAK5N,OAAOygC,kBAAkBy0B,cAAiBD,EAAW,CAK1H,GAJIrnD,KAAK5N,OAAOy2B,sBACZ7oB,KAAKs2C,oBAAqB,GAE9Bt2C,KAAK1V,OAASA,EACTO,oBAAkBszB,GASlB,CACD,IAAIzhB,EAAOsD,KAAK5N,OACZygD,EAAS,EACb,GAAI92C,GAAgBW,GAAO,CACvB,IAAIjJ,EAAMnJ,EAAOyG,cAAc2gB,aAAa,YAC5CmhC,EAASn2C,EAAKq5B,UAAUtZ,IAAI,SAAUmY,GAAK,OAAOA,EAAEljB,aAAa,cAAgBhiB,QAAQ+D,QAGzFo/C,EAAS7T,SAAS10C,EAAOyG,cAAc2gB,aAAa,iBAAkB,IAEtE1R,KAAK5N,OAAO6lD,oBAAsBj4C,KAAK5N,OAAOK,QAAQtE,iBAAiB,eAAexC,OAAS,KAC7FknD,EAED7yC,KAAK0jD,WAAc1jD,KAAK0jD,UAAU/wD,YAAYrI,IAC/C0V,KAAK2mD,wBAAwB9T,EAAQ7T,SAAS10C,EAAOonB,aAAa,iBAAkB,KAEpF1R,KAAK5N,OAAOy2B,sBACZ7oB,KAAK4mD,0BAA0BntB,UAAQnvC,EAAQ,WAC/C0V,KAAKs8C,yBA1BTt8C,KAAKq8C,cAAgBl+B,EACjBA,EAAS7rB,UAAUC,SAAS,oBAC5ByN,KAAKumD,eAAepoC,GAGpBne,KAAK0mD,YAAYvoC,GAwBpBne,KAAK5N,OAAOy2B,sBAAuBhR,UAAQC,UAAa9X,KAAK66C,eAC9D76C,KAAKunD,UAAUn8D,GAGvB4U,KAAKs2C,oBAAqB,EAC1Bt2C,KAAKq2C,qBAAsB,EACvBxrD,oBAAkB4uC,UAAQruC,EAAEd,OAAQ,qBACpC0V,KAAKo2C,cAAe,IAG5BJ,EAAUxrD,UAAU48D,kBAAoB,SAAUh8D,GAC9C,IAAId,EAASc,EAAEd,OACXmvC,UAAQnvC,EAAQ,kBAAoBc,EAAEd,OAAOgI,UAAUC,SAAS,cAChEknC,UAAQnvC,EAAQ,gBACZA,EAAOgI,UAAUC,SAAS,iBACrBjI,EAAOgI,UAAUC,SAAS,kBAK3BjI,EAAOgI,UAAUc,OAAO,iBACxB4M,KAAKu2C,wBAAyB,EAC9Bv2C,KAAK5N,OAAOK,QAAQpE,cAAc,gBAAgB6C,MAAMC,QAAU,SANlE7G,EAAOgI,UAAUoE,IAAI,iBACrBsJ,KAAKu2C,wBAAyB,IAUtCv2C,KAAK5N,OAAOK,QAAQpE,cAAc,gBAAgB6C,MAAMC,QAAU,QAG1E6kD,EAAUxrD,UAAU+8D,UAAY,SAAUn8D,GACjC4U,KAAK6yB,kBAAkB4lB,+BACxBhoD,EAAkBuP,KAAK5N,OAAOK,QAAQpE,cAAc,gBAAiBjD,EAAG,yCAClE4U,KAAK66C,gBAAkB76C,KAAKm2C,gBAAgBxqD,QAAUqU,KAAK5N,OAAOg/B,mBAAqB,EAAI,IACtFpxB,KAAKk2C,uBAAuBvqD,OAAS,GAAK,iBAAmB,MAGhFqqD,EAAUxrD,UAAUm8D,wBAA0B,SAAUtpB,EAAUoS,GACnDzvC,KAAK5N,QACV4N,KAAKs2C,qBAAuBt2C,KAAKq2C,qBAAwBr2C,KAAK66C,eAC3D76C,KAAK0gD,WACN1gD,KAAKu4C,UAAUlb,EAAUr9B,KAAK6yB,kBAAkBwoB,cAEpDr7C,KAAKk9C,YAAa7f,SAAUA,EAAUoS,UAAWA,GAAazvC,KAAK6yB,kBAAkBwoB,cACjFr7C,KAAKk2C,uBAAuBvqD,QAC5BqU,KAAK2jD,yBAET3jD,KAAKyhD,eAEAzhD,KAAKq2C,qBACNr2C,KAAK5N,OAAOy2B,sBAAyB7oB,KAAK5N,OAAOy2B,sBAChD4Q,UAAQz5B,KAAK1V,OAAQ,cAAcgI,UAAUC,SAAS,gBACvDyN,KAAKw6C,kBAAkB+C,cAAYv9C,KAAKy5C,cAAgBpc,EAAWr9B,KAAKy5C,aAAcpc,GAGtFr9B,KAAK04C,oBAAoBrb,IAE7Br9B,KAAKu+C,mBAAmBhB,cAAYv9C,KAAKw9C,YAAengB,SAAUA,EAAUoS,UAAWA,GAAczvC,KAAKw9C,WAAangB,SAAUA,EAAUoS,UAAWA,IACtJzvC,KAAK2jD,yBACL3jD,KAAKyhD,gBAGLzhD,KAAK04C,oBAAoBrb,IACzBr9B,KAAKm/C,sBAAuB9hB,SAAUA,EAAUoS,UAAWA,KAC3DzvC,KAAKkgD,eAETlgD,KAAK0gD,WAAY,GAErB1K,EAAUxrD,UAAUo6D,cAAgB,SAAUx5D,GAC1C,GAAI4U,KAAK5N,OAAO2gC,YAAc3nC,EAAEmkD,UAAUhC,UAAYniD,EAAEsiD,MACpD,GAAyB,YAArBtiD,EAAE4iD,QAAQv3C,OACNuJ,KAAK5N,OAAOkP,eACZlW,EAAEkkD,OAA+B,UAAtBlkD,EAAEqH,QAAQgmB,QAGrBrtB,EAAEkkD,OAA+B,OAAtBlkD,EAAEqH,QAAQgmB,aAIzB,GAAyB,cAArBrtB,EAAE4iD,QAAQv3C,OAAwB,CAClC,IAAI4nD,EAAO53B,OAAOr7B,EAAEqH,QAAQ1B,cAAc2gB,aAAa,kBACvDtmB,EAAEkkD,OAAkB,IAAT+O,MAGc,aAArBjzD,EAAE4iD,QAAQv3C,SACVrL,EAAEkkD,QAAS,GAK3B,IAAInF,EAAQnqC,KAAK5N,OAAOg/B,oBAAwBhmC,EAAEmkD,UAAUhC,UAAkC,OAAtBniD,EAAEqH,QAAQgmB,SAAoBrtB,EAAEkkD,SAClGlkD,EAAEmkD,UAAUjC,WAAmC,OAAtBliD,EAAEqH,QAAQgmB,YAAuBrtB,EAAEmkD,UAAUyF,cAAsC,OAAtB5pD,EAAEqH,QAAQgmB,aAC7FrtB,EAAEsiD,OAA8B,UAArBtiD,EAAE4iD,QAAQv3C,SAAyBrL,EAAEmkD,UAAUhC,UAAYniD,EAAEkkD,QAC5ElkD,EAAEmkD,UAAUjC,YAAcliD,EAAEmkD,UAAUyF,iBAAoB5pD,EAAEsiD,OAA8B,UAArBtiD,EAAE4iD,QAAQv3C,QAChF+wD,EAAgBp8D,EAAEmkD,UAAUhC,UAAkC,OAAtBniD,EAAEqH,QAAQgmB,UAAqBghB,UAAQruC,EAAEqH,QAAS,iBACrFrH,EAAEsiD,OAA8B,UAArBtiD,EAAE4iD,QAAQv3C,QAC9B,GAAKrL,EAAEsiD,QAASvD,EAAhB,CAMA,IAAI3sC,EAAKpS,EAAEmkD,UAAUjC,UAAYliD,EAAEmkD,UAAUhgB,QAAUnkC,EAAEmkC,QAAS8N,EAAW7/B,EAAG,GAAIiyC,EAAYjyC,EAAG,GAC/F8wB,EAAOtuB,KAAK6U,MAAMm9B,iBACtB,GAAIhyC,KAAK5N,OAAO2gC,WACZ,GAAI3nC,EAAEmkD,UAAUhC,WAAmC,OAAtBniD,EAAEqH,QAAQgmB,SAAoBghB,UAAQruC,EAAEqH,QAAS,eAAgB,CAC1F,IAAIg1D,EAAQznD,KAAK5N,OAAOojC,iBAAiBnnC,cAAc,SAASyN,kBAChEuhC,GAAYoqB,EACZn5B,EAAK+O,SAAW/O,EAAK+O,SAAW/O,EAAK+O,SAAWoqB,EAAQ,UAGxDpqB,GAAYr9B,KAAK5N,OAAO2gC,WACxBzE,EAAK+O,SAA6B,IAAlB/O,EAAK+O,UAAmBxyC,oBAAkByjC,EAAK+O,UAAqD,KAAzC/O,EAAK+O,SAAWr9B,KAAK5N,OAAO2gC,WAG/G,GAAI/yB,KAAK5N,OAAOg/B,mBAAoB,CAChC,IAAIktB,EAAO73B,OAAOr7B,EAAEqH,QAAQif,aAAa,kBACzC4c,EAAKmhB,UAAYnhB,EAAKmhB,UAAanhB,EAAKmhB,YAAcA,EAAY6O,EAAOA,EAAO,EAAK,KACrF7O,EAAY6O,EAEhB,KAAIkJ,IAAwE,KAAtD,YAAa,UAAU93D,QAAQtE,EAAE4iD,QAAQv3C,SAAuC,UAArBrL,EAAE4iD,QAAQv3C,QACvF4mC,IAAa/O,EAAK+O,UAAYoS,IAAcnhB,EAAKmhB,WADrD,CAKA,OADAzvC,KAAKo2C,cAAe,EACZhrD,EAAE4iD,QAAQv3C,QACd,IAAK,YACL,IAAK,UACL,IAAK,QACL,IAAK,aACDuJ,KAAK0nD,eAAerqB,EAAUoS,GAC9B,MACJ,IAAK,aACL,IAAK,YACDzvC,KAAK2nD,kBAAkBtqB,EAAUoS,GACjC,MACJ,IAAK,YACL,IAAK,UACDzvC,KAAK4nD,aAAavqB,EAAUoS,GAC5B,MACJ,IAAK,YACL,IAAK,aACDzvC,KAAK6nD,uBAAuBxqB,EAAUoS,GACtC,MACJ,IAAK,OACL,IAAK,MACDA,EAAiC,QAArBrkD,EAAE4iD,QAAQv3C,OAAmBuJ,KAAK4+C,gBAAgBvhB,GAAY,EAC1Er9B,KAAK8nD,gBAAgBzqB,EAAUoS,GAC/B,MACJ,IAAK,WACL,IAAK,UACDzvC,KAAK+nD,oBAAoB1qB,EAAUoS,GACnC,MACJ,IAAK,SACDzvC,KAAK43C,iBACL,MACJ,IAAK,YACD53C,KAAKgoD,YACL,MACJ,IAAK,QACDhoD,KAAKioD,oBAAoB78D,EAAEqH,SAC3B,MACJ,IAAK,MACGuN,KAAK5N,OAAOiE,aAAa09C,kBACzB/zC,KAAKu4C,UAAUlb,GAI3Br9B,KAAKo2C,cAAe,EACpBp2C,KAAK2hD,kBACL3hD,KAAK2jD,+BAzEGxZ,IAAUnqC,KAAK5N,OAAOy2B,qBACtB7oB,KAAK43C,kBA+EjB5B,EAAUxrD,UAAUw9D,UAAY,WACxBhoD,KAAKm5C,cAAgBn5C,KAAK66C,eAC1B76C,KAAKw6C,kBAAkB,EAAGx6C,KAAK5N,OAAO2jC,UAAUpqC,OAAS,GAEzDqU,KAAKm9C,eAAiBn9C,KAAK66C,eAC3B76C,KAAKu+C,oBAAqBlhB,SAAU,EAAGoS,UAAW,IAAOpS,SAAUr9B,KAAK5N,OAAO2jC,UAAUpqC,OAAS,EAAG8jD,UAAWzvC,KAAK5N,OAAO+lB,aAAaxsB,OAAS,KAG1JqqD,EAAUxrD,UAAUy9D,oBAAsB,SAAU39D,GAC5CA,EAAOgI,UAAUC,SAAS,qBAC1ByN,KAAKq8C,cAAgB/xD,EACrB0V,KAAKumD,eAAevmD,KAAKq8C,gBAGrB/xD,EAAOgI,UAAUC,SAAS,mBAC1ByN,KAAKq8C,cAAgB/xD,EACrB0V,KAAK0mD,YAAY1mD,KAAKq8C,iBAIlCrG,EAAUxrD,UAAUk9D,eAAiB,SAAUrqB,EAAUoS,GACrD,IAAI/yC,EAAOsD,KAAK5N,OACZ4N,KAAK5N,OAAOy2B,qBAAoD,UAA7B7oB,KAAK5N,OAAO02B,eAA6B9oB,KAAK6yB,kBAAkB6M,mBACnG1/B,KAAKomD,sBAAqB,GAC1BpmD,KAAKq8C,cAAgB,MAErBr8C,KAAKm5C,cACDn5C,KAAK5N,OAAO2gC,WACZ/yB,KAAKu4C,UAAUlb,GAAU,GACzBr9B,KAAKkoD,YAAYxrD,EAAKgpD,mBAO1B1lD,KAAKm9C,cACLn9C,KAAKk9C,YAAa7f,SAAUA,EAAUoS,UAAWA,IAAa,IAGtEuG,EAAUxrD,UAAU09D,YAAc,SAAU7qB,GACxC,KAAIA,EAAW,GAAf,CAGKr9B,KAAK1V,SACN0V,KAAK1V,OAAS0V,KAAK5N,OAAO2jC,UAAU,GAAGpiC,SAASqM,KAAK5N,OAAO9F,cAAcC,QAAQZ,QAAU,IAEhG,IAAImnD,EAAS9T,SAASh/B,KAAK1V,OAAOonB,aAAa,iBAAkB,IAC7D/V,EAAUqE,KAAK5N,OAAOg/B,mBAGlBpxB,KAAK1V,OAFTqR,GACIm3C,GAAUn3C,EAENqE,KAAK0jC,gBAAgBvL,qBAAqBkF,GAAUlvC,iBAAiB,cAAc2kD,EAASn3C,GAOtFqE,KAAK0jC,gBAAgBzL,cAAcoF,GAAUlvC,iBAAiB,cAAc2kD,GAE9F9yC,KAAK6+C,aAAa7+C,KAAK1V,UAE3B0rD,EAAUxrD,UAAUm9D,kBAAoB,SAAUtqB,EAAUoS,GAC7CzvC,KAAK5N,OACZ4N,KAAKm9C,eACLn9C,KAAKk9C,YAAa7f,SAAUA,EAAUoS,UAAWA,IAAa,GAC9DzvC,KAAK6+C,aAAa7+C,KAAK1V,UAG/B0rD,EAAUxrD,UAAUs9D,gBAAkB,SAAUzqB,EAAUoS,GAClDzvC,KAAKm9C,aACLn9C,KAAKk9C,YAAa7f,SAAUA,EAAUoS,UAAWA,IAAa,GAG9DzvC,KAAK6+C,aAAa7+C,KAAK5N,OAAOirD,iBAAiBhgB,EAAUoS,KAQjEuG,EAAUxrD,UAAUo9D,aAAe,SAAUvqB,EAAUoS,GACxCzvC,KAAK5N,OAChB4N,KAAKq2C,qBAAsB,EACvBr2C,KAAKm5C,cAAgBn5C,KAAK66C,gBACrB0C,cAAYv9C,KAAKy5C,cAKlBz5C,KAAKu4C,UAAU,GAAG,IAJlBv4C,KAAKw6C,kBAAkBx6C,KAAKy5C,aAAcpc,GAC1Cr9B,KAAKkoD,YAAY7qB,KAMrBr9B,KAAKm9C,eAAiBn9C,KAAK66C,eAC3B76C,KAAKu+C,mBAAmBv+C,KAAKw9C,YAAengB,SAAU,EAAGoS,UAAW,IAAOpS,SAAUA,EAAUoS,UAAWA,IAE9GzvC,KAAKq2C,qBAAsB,GAE/BL,EAAUxrD,UAAUq9D,uBAAyB,SAAUxqB,EAAUoS,GAClDzvC,KAAK5N,OAChB4N,KAAKq2C,qBAAsB,EAC3Br2C,KAAKu+C,mBAAmBv+C,KAAKw9C,WAAangB,SAAUA,EAAUoS,UAAWA,IACzEzvC,KAAKq2C,qBAAsB,GAE/BL,EAAUxrD,UAAUu9D,oBAAsB,SAAU1qB,EAAUoS,GACtDzvC,KAAKm5C,cACLn5C,KAAKu4C,UAAUlb,GAAU,GACzBr9B,KAAK6+C,aAAa7+C,KAAK5N,OAAOirD,iBAAiBhgB,EAAUoS,KAEzDzvC,KAAKm9C,cACLn9C,KAAKk9C,YAAa7f,SAAUA,EAAUoS,UAAWA,IAAa,IAGtEuG,EAAUxrD,UAAUgxD,uBAAyB,SAAUtuD,EAAKi7D,EAAOnwB,GAE/D,IAAK,IADD1gC,KACKC,EAAK,EAAGA,EAAKC,UAAU7L,OAAQ4L,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,GAAIrK,EAAK,CACL,IAAImK,KAAWnE,MAAMC,KAAKjG,EAAIiB,iBAAiB,eAC3Ci6D,EAAmBl7D,EAAImB,cAAc,yBAA2BnB,EAAImB,cAAc,sBAClFg6D,EAAqBn7D,EAAImB,cAAc,kBACvC+5D,GACA/wD,EAAMxL,KAAKu8D,GAEXC,GACAhxD,EAAMxL,KAAKw8D,GAEfjxD,EAAuBm1B,WAAM,GAASl1B,EAAO8wD,GAAOjqD,OAAO5G,IAE/D0I,KAAKyjC,cAAc3L,aAAa5qC,EAAMA,EAAIwkB,aAAa,YAAc,KAAMy2C,EAAOnwB,IAEtFge,EAAUxrD,UAAU2uD,UAAY,WAC5B,MAAuC,QAAhCn5C,KAAK6yB,kBAAkBv8B,MAAkD,SAAhC0J,KAAK6yB,kBAAkBv8B,MAE3E0/C,EAAUxrD,UAAU2yD,WAAa,WAC7B,MAAuC,SAAhCn9C,KAAK6yB,kBAAkBv8B,MAAmD,SAAhC0J,KAAK6yB,kBAAkBv8B,MAE5E0/C,EAAUxrD,UAAUqwD,YAAc,WAC9B,MAAuC,WAAhC76C,KAAK6yB,kBAAkB9+B,MAElCiiD,EAAUxrD,UAAUi5C,YAAc,WAI9B,OAHI54C,oBAAkBmV,KAAK0jC,mBACvB1jC,KAAK0jC,gBAAkB1jC,KAAKi3C,QAAQxT,YAAYzxB,aAAW2xB,UAExD3jC,KAAK0jC,iBAMhBsS,EAAUxrD,UAAU25C,mBAAqB,WASrC,OAPKnkC,KAAK6yB,kBAAkB6M,iBAKT1/B,KAAK22C,oBAJL32C,KAAK5N,OAAOyK,gBAAgB8E,OAAO,SAAUzU,GAAO,OAAOA,EAAIy7B,aACzElM,IAAI,SAAUmY,GAAK,OAAOA,EAAEjqC,QAOzCqrD,EAAUxrD,UAAUw6D,0BAA4B,WAC5C,IAAI7jD,EAAQnB,KACZA,KAAK5N,OAAOqb,GAAGs5B,GAAkB/mC,KAAKuH,UAAWvH,MACjDA,KAAKsoD,oBAAsBtoD,KAAKmmD,YAAYr4C,KAAK9N,MACjDA,KAAK5N,OAAOwb,iBAAiB0jB,GAAkBtxB,KAAKsoD,qBACpDtoD,KAAK5N,OAAOqb,GAAGC,GAAqB1N,KAAKulD,yBAA0BvlD,MACnEA,KAAKuoD,mBAAqBvoD,KAAKwoD,sBAAsB16C,KAAK9N,MAC1DA,KAAK5N,OAAOwb,iBAAiBqP,GAAuBjd,KAAKuoD,oBACzDvoD,KAAK5N,OAAOqb,GAAGg7C,GAAczoD,KAAKoT,aAAcpT,MAChDA,KAAK0oD,YAAc,WACfvnD,EAAMwiD,yBACNxiD,EAAMsgD,eAEVzhD,KAAK0oD,YAAY56C,KAAK9N,MACtBA,KAAK5N,OAAOwb,iBAAiB+6C,GAAmB3oD,KAAK0oD,cAEzD1S,EAAUxrD,UAAUy6D,6BAA+B,WAC/CjlD,KAAK5N,OAAOyf,IAAIk1B,GAAkB/mC,KAAKuH,WACvCvH,KAAK5N,OAAO0f,oBAAoBwf,GAAkBtxB,KAAKsoD,qBACvDtoD,KAAK5N,OAAO0f,oBAAoBmL,GAAuBjd,KAAKuoD,oBAC5DvoD,KAAK5N,OAAOyf,IAAI42C,GAAczoD,KAAKoT,eAEvC4iC,EAAUxrD,UAAU+c,UAAY,SAAUnc,GAChB,kBAAlBA,EAAEyU,aAAoCG,KAAK5N,OAAO6lD,qBAClDj4C,KAAK82C,WAAY,EACjB92C,KAAK43C,iBACL53C,KAAK82C,WAAY,IAGzBd,EAAUxrD,UAAUg+D,sBAAwB,SAAUp9D,GAC5B,SAAlBA,EAAEyU,aAA0BG,KAAK5N,OAAO6lD,oBACxCj4C,KAAK+lD,2BAGb/P,EAAUxrD,UAAUyvD,eAAiB,SAAUxqD,GAC3CuQ,KAAK5N,OAAOw2D,4BAA6B,EACzC5oD,KAAK5N,OAAOszD,iBAAmBj2D,GAE5BumD,KCv6EP6S,GAAwB,WAKxB,SAASA,EAAOz2D,GACZ4N,KAAK5N,OAASA,EACd4N,KAAK4N,mBAsGT,OA7FAi7C,EAAOr+D,UAAU8vB,OAAS,SAAUwuC,GAChC,IAAIpsD,EAAOsD,KAAK5N,OAChB02D,EAAej+D,oBAAkBi+D,GAAgB,GAAKA,EAClD5yD,EAAgBwG,GAChBA,EAAKkT,OAAO2I,IAAuBC,SAAUxY,KAAMoU,QAASpU,KAAKsa,OAAQlB,KAAM0vC,IAG/EA,IAAiBpsD,EAAK6f,eAAe/iB,KACrCkD,EAAK6f,eAAe/iB,IAAMsvD,EAAajxD,WACvC6E,EAAKqhB,YAEA/d,KAAK+oD,eACVrsD,EAAKwrB,WAMb2gC,EAAOr+D,UAAUojB,iBAAmB,WAC5B5N,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOqb,GAAGg3C,GAA4BzkD,KAAK0kD,kBAAmB1kD,MACnEA,KAAK5N,OAAOqb,GAAGu7C,GAAuBhpD,KAAKipD,iBAAkBjpD,MAC7DA,KAAK5N,OAAOqb,GAAGqS,GAAgB9f,KAAKgJ,QAAShJ,MAC7CA,KAAKuoD,mBAAqBvoD,KAAKy3C,iBAAiB3pC,KAAK9N,MACrDA,KAAK5N,OAAOwb,iBAAiBqP,GAAuBjd,KAAKuoD,oBACzDvoD,KAAK5N,OAAOqb,GAAG22B,GAAoBpkC,KAAKkpD,iBAAkBlpD,QAK9D6oD,EAAOr+D,UAAUsnB,oBAAsB,WAC/B9R,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOyf,IAAI4yC,GAA4BzkD,KAAK0kD,mBACjD1kD,KAAK5N,OAAOyf,IAAIm3C,GAAuBhpD,KAAKipD,kBAC5CjpD,KAAK5N,OAAOyf,IAAIiO,GAAgB9f,KAAKgJ,SACrChJ,KAAK5N,OAAO0f,oBAAoBmL,GAAuBjd,KAAKuoD,oBAC5DvoD,KAAK5N,OAAOyf,IAAIuyB,GAAoBpkC,KAAKkpD,oBAO7CL,EAAOr+D,UAAUwe,QAAU,WACvBhJ,KAAK8R,uBAKT+2C,EAAOr+D,UAAUk6D,kBAAoB,SAAUt5D,GACvCA,EAAEgtC,SAAWp4B,KAAKgQ,kBAGjBnlB,oBAAkBO,EAAE4H,WAAWwG,KAMhCwG,KAAK5N,OAAOwd,OAAO83B,IACf7nC,YAAa,YAAa9L,KAAM8Z,KANpC7N,KAAK5N,OAAOwd,OAAO83B,IACf7nC,YAAa,YAAa9L,KAAM8Z,GAAoBi7C,aAAc9oD,KAAK5N,OAAOmqB,eAAe/iB,QAczGqvD,EAAOr+D,UAAUy+D,iBAAmB,SAAU79D,GAC1C4U,KAAK5N,OAAO+d,QAAQ8M,GAAuBjuB,SAAO5D,GAC9C09D,aAAc9oD,KAAK5N,OAAOmqB,eAAe/iB,IAAKqG,YAAa,YAAa9L,KAAMkpB,OAGtF4rC,EAAOr+D,UAAUitD,iBAAmB,SAAUrsD,GAC1C4U,KAAK+oD,cAAkC,cAAlB39D,EAAEyU,aAE3BgpD,EAAOr+D,UAAU0+D,iBAAmB,SAAU99D,GACpB,cAAlBA,EAAEyU,aACFG,KAAK5N,OAAOmJ,eAAgBghB,gBAAkB/iB,IAAK,MAAQ,IAOnEqvD,EAAOr+D,UAAUwlB,cAAgB,WAC7B,MAAO,UAEJ64C,KC7GPM,GAA0B,WAK1B,SAASA,EAAS/2D,GACd4N,KAAK5N,OAASA,EAsFlB,OA9EA+2D,EAAS3+D,UAAUitB,KAAO,SAAUnB,EAAY8yC,GAC5C,IAAI75D,EAAOyQ,KAAKqpD,gBAAgB/yC,GAC5B/pB,EAAUyT,KAAKmY,WAAW5oB,EAAM65D,GACpCppD,KAAK5N,OAAOwd,OAAOg3B,IAAyBxO,OAAQ,SACpD7rC,EAAQiD,QAAQ,SAAU/C,GACtBA,EAAM+D,SAAU,IAEpBwP,KAAK6xB,WAAWtlC,IAQpB48D,EAAS3+D,UAAU8+D,KAAO,SAAUhzC,EAAYizC,GAC5C,IAAIh6D,EAAOyQ,KAAKqpD,gBAAgB/yC,GAC5B/pB,EAAUyT,KAAKmY,WAAW5oB,EAAMg6D,GACpCvpD,KAAK5N,OAAOwd,OAAOg3B,IAAyBxO,OAAQ,SACpD7rC,EAAQiD,QAAQ,SAAU/C,GACtBA,EAAM+D,SAAU,IAEpBwP,KAAK6xB,WAAWtlC,IAEpB48D,EAAS3+D,UAAU6+D,gBAAkB,SAAU7vD,GAQ3C,MANmB,iBAARA,GACMA,GAGDA,GAIpB2vD,EAAS3+D,UAAU2tB,WAAa,SAAU5oB,EAAMi6D,GAC5C,IAAIroD,EAAQnB,KASZ,OARc1S,EAAqBiC,EAAM,SAAUiK,EAAK/J,GACpD,OAAOnC,EAAqB6T,EAAM/O,OAAOxC,YAAa,SAAUg4B,EAAMn4B,GAClE,GAAIm4B,EAAK4hC,KAAchwD,EACnB,OAAOouB,IAGZ,MAUXuhC,EAAS3+D,UAAUqnC,WAAa,SAAUtlC,GACtC,GAAI2J,EAAgB8J,KAAK5N,QACrB4N,KAAK5N,OAAOwd,OAAO2I,IACfC,SAAUxY,KAAMoU,QAASpU,KAAK6xB,WAC9BzY,KAAM7sB,QAHd,CAOA,IAAIk9D,EAAkBzpD,KAAK5N,OAAO+lB,aAKlC,GAJA5rB,EAAU1B,oBAAkB0B,GAAWk9D,EAAkBl9D,EACrDyT,KAAK5N,OAAOs3D,gBAAkB1pD,KAAK5N,OAAO+xC,qBAAqBx4C,QAC/DqU,KAAK5N,OAAOwlD,iBAEZ53C,KAAK5N,OAAOs0B,2BAA4B,CAChBn6B,EAAQoV,OAAO,SAAUgoD,GAAQ,OAAQF,EAAgBlvD,KAAK,SAAUqvD,GAAQ,OAAOD,EAAKj/D,QAAUk/D,EAAKl/D,UAC7GiB,QAClBqU,KAAK5N,OAAOwd,OAAOgiB,GAAgCrlC,QAIvDyT,KAAK5N,OAAOwd,OAAOgiB,GAAgCrlC,GAEnB,QAAhCyT,KAAK5N,OAAOsuB,iBACZ1gB,KAAK5N,OAAO81B,YAGbihC,KCzFPU,GAAwB,WAKxB,SAASA,EAAOz3D,GACZ4N,KAAK8pD,cAAgB,EAErB9pD,KAAK+pD,gBAAmBx4D,IAAK,EAAGC,KAAM,GACtCwO,KAAKgqD,cAAe,EACpBhqD,KAAK5N,OAASA,EACd4N,KAAKg6B,aAAe,IAAImP,GAAmB/2C,GAC3C4N,KAAK4N,mBAwWT,OAlWAi8C,EAAOr/D,UAAUwlB,cAAgB,WAC7B,MAAO,UAKX65C,EAAOr/D,UAAUs5C,SAAW,SAAUmmB,GAClCjqD,KAAK5N,OAAOK,QAAQvB,MAAMX,MAAQk6C,aAAWzqC,KAAK5N,OAAO7B,OACrD05D,GACAjqD,KAAKg6B,aAAawD,oBAElBx9B,KAAK5N,OAAO83D,eAAiBlqD,KAAK5N,OAAO83D,cAAcC,SACvDnqD,KAAK5N,OAAO83D,cAAcC,QAAQ13D,SAClCuN,KAAK5N,OAAO83D,cAAcC,QAAQC,mBAM1CP,EAAOr/D,UAAUu5C,UAAY,WACzB,IAAIsmB,EAAa,EACb1zC,EAAU3W,KAAK5N,OAAO8kC,aAAalkB,WACnChT,KAAK5N,OAAO2gC,YAAqC,SAAvB/yB,KAAK5N,OAAOkD,QACtC+0D,EACIrqD,KAAK5N,OAAO4gC,mBAAmB3kC,cAAc,SAASiD,aAC1DqlB,EAAQzlB,MAAMoE,OAASm1C,aAAWzqC,KAAK5N,OAAOkD,OAAS+0D,IAGvD1zC,EAAQzlB,MAAMoE,OAASm1C,aAAWzqC,KAAK5N,OAAOkD,QAElD0K,KAAKsqD,eAAe3zC,IAKxBkzC,EAAOr/D,UAAUw5C,WAAa,WAC1B,IAAIrtB,EAAU3W,KAAK5N,OAAO4gC,mBACtBz+B,EAAcs1D,EAAOv1D,oBAAsB0L,KAAKuqD,eAChD95C,EAAWzQ,KAAK0Q,mBACpBiG,EAAQ3D,WAAW9hB,MAAMuf,EAASO,QAAUzc,EAAc,EAAI,MAAQ,MACtEoiB,EAAQzlB,MAAMuf,EAASK,SAAWvc,EAAc,EAAIA,EAAc,KAAO,OAK7Es1D,EAAOr/D,UAAUggE,cAAgB,SAAUjrD,GACvC,IAAIkR,EAAWzQ,KAAK0Q,iBAAiBnR,GACrCS,KAAK5N,OAAO4gC,mBAAmBhgB,WAAW9hB,MAAMuf,EAASO,QAAU,GACnEhR,KAAK5N,OAAO4gC,mBAAmBhgB,WAAWjiB,cAAcG,MAAMuf,EAASK,SAAW,IAQtF+4C,EAAOr/D,UAAU09B,QAAU,WACvB,GAA2B,SAAvBloB,KAAK5N,OAAOkD,OAAhB,CAGA,IAAIqhB,EAAU3W,KAAK5N,OAAO8kC,aAC1Bl3B,KAAK5N,OAAOK,QAAQvB,MAAMoE,OAAS,OACnC,IAAIA,EAAS0K,KAAKg6B,aAAa6Q,kBAAkBl0B,GACjDA,EAAQzlB,MAAMoE,OAAS,eAAiBA,EAAS,QAErDu0D,EAAOr/D,UAAU+/D,aAAe,WAI5B,MAAgB,YADF1yC,UAAQs3B,KAAKhP,KAEhB,GAEJ,GAKX0pB,EAAOr/D,UAAUojB,iBAAmB,WAC5B5N,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOqb,GAAG/F,GAAS1H,KAAKkT,WAAYlT,MACzCA,KAAK5N,OAAOqb,GAAGjG,GAAcxH,KAAKkT,WAAYlT,MAC9CA,KAAK5N,OAAOqb,GAAGhG,GAAUzH,KAAK0kD,kBAAmB1kD,MACjDA,KAAK5N,OAAOqb,GAAGrB,GAAiBpM,KAAKkT,WAAYlT,MACjDA,KAAK5N,OAAOqb,GAAG3F,GAAiB9H,KAAKyqD,cAAezqD,QAKxD6pD,EAAOr/D,UAAUsnB,oBAAsB,WAC/B9R,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOyf,IAAInK,GAAS1H,KAAKkT,YAC9BlT,KAAK5N,OAAOyf,IAAIrK,GAAcxH,KAAKkT,YACnClT,KAAK5N,OAAOyf,IAAIpK,GAAUzH,KAAK0kD,mBAC/B1kD,KAAK5N,OAAOyf,IAAIzF,GAAiBpM,KAAKkT,YACtClT,KAAK5N,OAAOyf,IAAI/J,GAAiB9H,KAAKyqD,iBAE1CZ,EAAOr/D,UAAUigE,cAAgB,WACzBzqD,KAAK5N,OAAO0qC,gBACZ98B,KAAK5N,OAAOs4D,aAAaC,mBAAmBC,WAAa5qD,KAAK+pD,eAAev4D,OAGrFq4D,EAAOr/D,UAAUqgE,gBAAkB,SAAUC,GACzC,IAAI3pD,EAAQnB,KACRvN,EAAUq4D,EACVvd,EAAW96C,EAAQH,UAAUC,SAAS,mBAC1C,OAAO,SAAUnH,GACb,GAA6C,OAAzC+V,EAAMwV,QAAQtoB,cAAc,WAAqB8S,EAAM/O,OAAO24D,qBAAlE,CAGA,IAAIzgE,EAASc,EAAEd,OACXkH,EAAOlH,EAAOsgE,WAEdI,GADS1gE,EAAOiK,YACLjK,EAAOgI,UAAUC,SAAS,qBACrC4O,EAAM4oD,eAAev4D,OAASA,GAIlCiB,EAAQm4D,WAAap5D,EACjBw5D,IACA7pD,EAAMopC,OAAOqgB,WAAap5D,GAE9B2P,EAAM4oD,eAAev4D,KAAOA,EAC5B2P,EAAM/O,OAAOwd,OAAO1G,IAAU1X,KAAMA,KARhC2P,EAAM4oD,eAAex4D,IAAOg8C,EAAsCjjD,EAAOgqC,UAAlCnzB,EAAM4oD,eAAex4D,OAWxEs4D,EAAOr/D,UAAUygE,sBAAwB,SAAUH,GAC/C,IAAI3pD,EAAQnB,KACRvN,EAAUq4D,EACd,OAAO,SAAU1/D,GACb,GAA6C,OAAzC+V,EAAMwV,QAAQtoB,cAAc,SAAhC,CAGA,IACIkD,EADSnG,EAAEd,OACEgqC,UACbnzB,EAAM4oD,eAAex4D,MAAQA,IAGjCkB,EAAQ6hC,UAAY/iC,EACpB4P,EAAM4oD,eAAex4D,IAAMA,EACvB4P,EAAM/O,OAAOob,gBAKzBq8C,EAAOr/D,UAAU0gE,cAAgB,SAAUJ,GACvC,IAAI3pD,EAAQnB,KACRvN,EAAUq4D,EACd,OAAO,SAAU1/D,GACb,GAA6C,OAAzC+V,EAAMwV,QAAQtoB,cAAc,SAAhC,CAGA,IAAIkD,EAAMkB,EAAQ6hC,WAA6B,IAAhBlpC,EAAE+/D,UAA6B,GAAX//D,EAAEggE,OAAchgE,EAAEggE,QACjEjqD,EAAM4oD,eAAex4D,MAAQA,IAGjCnG,EAAEsjD,iBACFvtC,EAAM/O,OAAO8kC,aAAa7oC,cAAc,oBAAoBimC,UAAY/iC,EACxEkB,EAAQ6hC,UAAY/iC,EACpB4P,EAAM4oD,eAAex4D,IAAMA,MAGnCs4D,EAAOr/D,UAAU6gE,cAAgB,SAAUP,GACvC,IAAI3pD,EAAQnB,KACRvN,EAAUq4D,EACd,OAAO,SAAU1/D,GACb,GAAsB,UAAlBA,EAAEkgE,YAAN,CAGA,IAAIv3B,EACA2W,EACA6gB,EAASpqD,EAAMqqD,WAAWpgE,GAC1BmG,EAAMkB,EAAQ6hC,WAAanzB,EAAMoqD,OAAOj4D,EAAIi4D,EAAOj4D,GACnD9B,EAAOiB,EAAQm4D,YAAczpD,EAAMoqD,OAAO55D,EAAI45D,EAAO55D,GACzD,GAAIwP,EAAM/O,OAAO4gC,mBAAmBzgC,SAASnH,EAAEd,QAAS,CAGpD,GAFAogD,EAAOvpC,EAAM/O,OAAOg/B,mBAChBjwB,EAAM/O,OAAO4gC,mBAAmB3kC,cAAc,oBAAsB8S,EAAM/O,OAAO4gC,mBAAmBhgB,WACpG7R,EAAM4oD,eAAev4D,OAASA,GAASA,EAAO,GAAMk5C,EAAKn2C,YAAcm2C,EAAK91C,YAAepD,EAC3F,OAEJpG,EAAEsjD,iBACFhE,EAAKkgB,WAAap5D,EAClBiB,EAAQm4D,WAAap5D,EACrB2P,EAAMoqD,OAAO55D,EAAI45D,EAAO55D,EACxBwP,EAAM4oD,eAAev4D,KAAOA,MAE3B,CAED,GADAuiC,EAAO5yB,EAAM/O,OAAO8kC,aAAa7oC,cAAc,oBAC3C8S,EAAM4oD,eAAex4D,MAAQA,IAAQA,EAAM,GAAMwiC,EAAKrK,aAAeqK,EAAKkd,aAAgB1/C,IACtFA,EAAM,GAAMwiC,EAAKrK,aAAeqK,EAAKkd,aAAgB1/C,EACzD,OAEJnG,EAAEsjD,iBACF3a,EAAKO,UAAY/iC,EACjBkB,EAAQ6hC,UAAY/iC,EACpB4P,EAAMoqD,OAAOj4D,EAAIi4D,EAAOj4D,EACxB6N,EAAM4oD,eAAex4D,IAAMA,MAIvCs4D,EAAOr/D,UAAUihE,UAAY,WACzB,IAAItqD,EAAQnB,KACZ,OAAO,SAAU5U,GACS,UAAlBA,EAAEkgE,cAGNnqD,EAAMoqD,OAASpqD,EAAMqqD,WAAWpgE,MAGxCy+D,EAAOr/D,UAAUghE,WAAa,SAAUpgE,GACpC,IAAImgE,GAAW55D,EAAG,EAAG2B,EAAG,GASxB,OARIlI,EAAEsgE,SAAWtgE,EAAEsgE,QAAQ//D,QACvB4/D,EAAO55D,EAAIvG,EAAEsgE,QAAQ,GAAGC,MACxBJ,EAAOj4D,EAAIlI,EAAEsgE,QAAQ,GAAGE,QAGxBL,EAAO55D,EAAIvG,EAAEugE,MACbJ,EAAOj4D,EAAIlI,EAAEwgE,OAEVL,GAEX1B,EAAOr/D,UAAU0oB,WAAa,WAC1B,IAAI/R,EAAQnB,KACZ,GAAIA,KAAKgqD,aAAc,CACnB,IAAIruD,EAAUqE,KAAK5N,OAAOg/B,mBAC1BpxB,KAAK2W,QAAU3W,KAAK5N,OAAO8kC,aAAalkB,WACxChT,KAAKuqC,OAASvqC,KAAK5N,OAAO4gC,mBAAmBhgB,WAC7C,IAAI8gB,EAAQ9zB,KAAK2W,QAAQtoB,cAAc,qBACnCwlC,EAAQ7zB,KAAK2W,QAAQtoB,cAAc,oBACnCq8C,EAAO1qC,KAAKuqC,OAAOl8C,cAAc,oBACjC2R,KAAK5N,OAAO2gC,aACZ5f,eAAazc,IAAIiF,EAAU+uC,EAAO1qC,KAAKuqC,OAAQ,yBAA0BvqC,KAAKyrD,YAAazrD,MAC3FmT,eAAazc,IAAIiF,EAAU+uC,EAAO1qC,KAAKuqC,OAAQ,wBAAyBvqC,KAAKqrD,cAAc1vD,EAAUm4B,EAAQ9zB,KAAK2W,SAAU3W,OAE5HrE,GACAwX,eAAazc,IAAIo9B,EAAO,SAAU9zB,KAAK6qD,gBAAgBngB,GAAO1qC,MAC9DmT,eAAazc,IAAIo9B,EAAO,SAAU9zB,KAAKirD,sBAAsBp3B,GAAQ7zB,MACrEmT,eAAazc,IAAIm9B,EAAO,SAAU7zB,KAAKirD,sBAAsBn3B,GAAQ9zB,MACrEmT,eAAazc,IAAIg0C,EAAM,SAAU1qC,KAAK6qD,gBAAgB/2B,GAAQ9zB,MAC9DmT,eAAazc,IAAIm9B,EAAO,QAAS7zB,KAAKkrD,cAAcp3B,GAAQ9zB,MAC5DmT,eAAazc,IAAIm9B,EAAO,yBAA0B7zB,KAAKyrD,YAAazrD,MACpEmT,eAAazc,IAAIm9B,EAAO,wBAAyB7zB,KAAKqrD,cAAcv3B,GAAQ9zB,QAG5EmT,eAAazc,IAAIsJ,KAAK2W,QAAS,SAAU3W,KAAK6qD,gBAAgB7qD,KAAKuqC,QAASvqC,MAC5EmT,eAAazc,IAAIsJ,KAAKuqC,OAAQ,SAAUvqC,KAAK6qD,gBAAgB7qD,KAAK2W,SAAU3W,OAE5EA,KAAK5N,OAAOgC,WAAWzI,QACvBwnB,eAAazc,IAAIsJ,KAAK5N,OAAOy5D,mBAAmB74C,WAAY,SAAUhT,KAAK6qD,gBAAgB7qD,KAAK2W,SAAU3W,MAE9GA,KAAKkoB,UACLloB,KAAKgqD,cAAe,EAExB,IACI8B,EACAC,EACA9a,EAHAh8C,EAAQ+K,KAAK5N,OAAOie,kBAIxBrlB,EAAkB,WACd8gE,EAAQ3qD,EAAMopC,OAAOqgB,WACrBmB,EAAU92D,EAAMy0B,aAChBunB,EAAe9vC,EAAM/O,OAAO8kC,aAAa+Z,cAC1C,WACM9vC,EAAM/O,OAAO4J,uBACV+vD,EAAU9a,IACVniD,WAASmG,EAAM9G,iBAAiB,oBAAqB,iBACjDgT,EAAM/O,OAAOg/B,oBACbtiC,WAASqS,EAAM/O,OAAO8kC,aAAa7oC,cAAc,qBAAqBF,iBAAiB,oBAAqB,mBAG/GgT,EAAM/O,OAAO2gC,WAAa,GAAK5xB,EAAM/O,OAAO0qC,cAAgB,IAAM37B,EAAMopC,OAAOl8C,cAAc,oBAC9F8S,EAAMopC,OAAOl8C,cAAc,oBAAoBu8D,WAAazpD,EAAM4oD,eAAev4D,KAGjF2P,EAAMopC,OAAOqgB,WAAazpD,EAAM4oD,eAAev4D,KAEnD2P,EAAMwV,QAAQi0C,WAAazpD,EAAM4oD,eAAev4D,KAChD2P,EAAMwV,QAAQ2d,UAAYnzB,EAAM4oD,eAAex4D,KAE9C4P,EAAM/O,OAAOs0B,6BACdvlB,EAAMwV,QAAQi0C,WAAakB,GAE3B3qD,EAAM/O,OAAO0qC,eAAiB37B,EAAMopC,OAAOl8C,cAAc,sBACzD8S,EAAMopC,OAAOl8C,cAAc,oBAAoBu8D,WAC3CzpD,EAAMwV,QAAQtoB,cAAc,qBAAqBu8D,cAG7D5qD,KAAK5N,OAAO24D,sBAAuB,GAKvClB,EAAOr/D,UAAUkmB,iBAAmB,SAAUnR,GAC1C,IAAIysD,KACA7zD,EAAYtN,oBAAkB0U,GAAOS,KAAK5N,OAAO+F,UAAYoH,EAGjE,OAFAysD,EAAIh7C,OAAS7Y,EAAY,kBAAoB,mBAC7C6zD,EAAIl7C,QAAU3Y,EAAY,cAAgB,eACnC6zD,GAEXnC,EAAOr/D,UAAU8/D,eAAiB,SAAU3zC,GACpC3W,KAAK5N,OAAOg/B,oBACZza,EAAQtoB,cAAc,qBAAqB6C,MAAM2f,UAAmC,SAAvB7Q,KAAK5N,OAAOkD,OAAoB,OAAS,SACnC,WAA/DqhB,EAAQtoB,cAAc,qBAAqB6C,MAAM2f,WACjD7Q,KAAKgkC,cAITrtB,EAAQzlB,MAAM2f,UAAmC,SAAvB7Q,KAAK5N,OAAOkD,OAAoB,OAAS,UAG3Eu0D,EAAOr/D,UAAUk6D,kBAAoB,SAAUt5D,GAC3C,GAAIA,EAAEgtC,SAAWp4B,KAAKgQ,gBAAtB,CAGAhQ,KAAKgkC,aACLhkC,KAAKgqD,cAAe,EACO,SAAvBhqD,KAAK5N,OAAOkD,QACZ0K,KAAKwqD,gBAETxqD,KAAKkT,aACLlT,KAAK+jC,YAEL/jC,KAAK8jC,UAAUj5C,oBAAkBO,EAAE4H,WAAgB,UAKvD62D,EAAOr/D,UAAUwe,QAAU,WACvB,IAAI0uC,EAAc13C,KAAK5N,OAAOK,QACzBilD,IAAiBA,EAAYrpD,cAAc,kBAAqBqpD,EAAYrpD,cAAc,qBAG/F2R,KAAK8R,sBAEL9R,KAAKwqD,gBACLzxD,eAAaiH,KAAK5N,OAAO4gC,mBAAmBhgB,YAAa,mBACzDja,eAAaiH,KAAK5N,OAAO8kC,aAAalkB,YAAa,aAEnDhT,KAAK5N,OAAO8kC,aAAalkB,WAAW9hB,MAAMoE,OAAS,GAEnD0K,KAAK5N,OAAOK,QAAQvB,MAAMX,MAAQ,GAElC4iB,eAAa/f,OAAO4M,KAAK5N,OAAO8kC,aAAalkB,WAAY,SAAUhT,KAAK6qD,mBAO5EhB,EAAOv1D,kBAAoB,WACvB,OAAOA,KAEJu1D,KC7XPp+B,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAaxCrrB,GAA0C,SAAUC,EAAYpW,EAAQkP,EAAKmH,GAC7E,IAA2HC,EAAvH5Q,EAAIwH,UAAU7L,OAAQkV,EAAI7Q,EAAI,EAAI1F,EAAkB,OAATqW,EAAgBA,EAAOrR,OAAOwR,yBAAyBxW,EAAQkP,GAAOmH,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASN,EAAYpW,EAAQkP,EAAKmH,QACpH,IAAK,IAAIjV,EAAIgV,EAAW/U,OAAS,EAAGD,GAAK,EAAGA,KAASkV,EAAIF,EAAWhV,MAAImV,GAAK7Q,EAAI,EAAI4Q,EAAEC,GAAK7Q,EAAI,EAAI4Q,EAAEtW,EAAQkP,EAAKqH,GAAKD,EAAEtW,EAAQkP,KAASqH,GAChJ,OAAO7Q,EAAI,GAAK6Q,GAAKvR,OAAO2R,eAAe3W,EAAQkP,EAAKqH,GAAIA,GAU5DorD,GAAiC,SAAUj+B,GAE3C,SAASi+B,IACL,IAAI9qD,EAAmB,OAAX6sB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAEhE,OADAmB,EAAM0B,cACC1B,EAuEX,OA3EAsqB,GAAUwgC,EAAiBj+B,GAS3Bi+B,EAAgBzhE,UAAUmM,aAAe,SAAUoJ,GAC/C,IAAIwC,EAAiB,IAAIzC,GAAeC,GACpCC,KAAK/I,SAAW+I,KAAK/I,OAAOD,UAAYgJ,KAAK/I,OAAOA,UACpD+I,KAAKmE,SAAW5B,EAAexL,kBAAkBiJ,KAAK/I,UAM9Dg1D,EAAgBzhE,UAAU0Z,aAAe,WACrC,OAAOlE,KAAKmE,UAKhB8nD,EAAgBzhE,UAAUijC,YAAc,SAAUE,QAC/B,IAAXA,IAAqBA,WACG54B,IAAxBiL,KAAK2pB,iBACL3pB,KAAK6C,WAAW+lC,eAAa72B,WAAUA,WAAS+b,WAAclM,GAAIsqC,UAAQlsD,KAAK2pB,eAAgBgE,GAC3FmS,SAAU,wBAEe/qC,IAA7BiL,KAAKksB,sBACLlsB,KAAK6C,WAAW+lC,eAAa72B,WAAUA,WAASoc,gBAAmBvM,GAAIsqC,UAAQlsD,KAAKksB,oBAAqByB,GACrGmS,SAAU,6BAEgB/qC,IAA9BiL,KAAKmsB,uBACLnsB,KAAK6C,WAAW+lC,eAAa72B,WAAUA,WAAS0c,kBAAqB7M,GAAIsqC,UAAQlsD,KAAKmsB,qBAAsBwB,GACxGmS,SAAU,0BAMtBmsB,EAAgBzhE,UAAU2hE,YAAc,SAAUp4D,GAC9C,OAAOiM,KAAK6C,WAAW+lC,eAAa72B,WAAUhe,KAKlDk4D,EAAgBzhE,UAAU4hE,oBAAsB,SAAUvxC,GACtD7a,KAAKzE,cAAcsf,GAAM,IAE7Bpa,IACImE,cACDqnD,EAAgBzhE,UAAW,YAAQ,GACtCiW,IACImE,cACDqnD,EAAgBzhE,UAAW,aAAS,GACvCiW,IACImE,cACDqnD,EAAgBzhE,UAAW,kBAAc,GAC5CiW,IACImE,cACDqnD,EAAgBzhE,UAAW,cAAU,GACxCiW,IACImE,cACDqnD,EAAgBzhE,UAAW,sBAAkB,GAChDiW,IACImE,cACDqnD,EAAgBzhE,UAAW,2BAAuB,GACrDiW,IACImE,cACDqnD,EAAgBzhE,UAAW,4BAAwB,GACtDiW,IACImE,cACDqnD,EAAgBzhE,UAAW,uBAAmB,GAC1CyhE,GACTl6D,iBAKEs6D,GAA8B,SAAUr+B,GAExC,SAASq+B,IACL,OAAkB,OAAXr+B,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAK/D,OAPAyrB,GAAU4gC,EAAcr+B,GAIxBvtB,IACI6rD,gBAAeL,KAChBI,EAAa7hE,UAAW,eAAW,GAC/B6hE,GACTt6D,iBChHEw6D,GAA2B,WAK3B,SAASA,EAAUn6D,GACf4N,KAAKwsD,YAAc,GACnBxsD,KAAKysD,UAAW,EAChBzsD,KAAK5N,OAASA,EACd4N,KAAK4N,mBAoST,OA/RA2+C,EAAU/hE,UAAUojB,iBAAmB,WAC/B5N,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOqb,GAAGC,GAAqB1N,KAAKsH,WAAYtH,MACrDA,KAAK5N,OAAOqb,GAAGi/C,GAAmB1sD,KAAKolD,eAAgBplD,MACvDA,KAAK5N,OAAOqb,GAAGg7C,GAAczoD,KAAKoT,aAAcpT,MAChDmT,eAAazc,IAAIsJ,KAAK5N,OAAOK,QAAS,UAAWuN,KAAK2sD,aAAc3sD,QAKxEusD,EAAU/hE,UAAUsnB,oBAAsB,WAClC9R,KAAK5N,OAAOob,cAGhBxN,KAAK5N,OAAOyf,IAAI66C,GAAmB1sD,KAAKolD,gBACxCplD,KAAK5N,OAAOyf,IAAI42C,GAAczoD,KAAKoT,cACnCD,eAAa/f,OAAO4M,KAAK5N,OAAOK,QAAS,UAAWuN,KAAK2sD,gBAE7DJ,EAAU/hE,UAAU4oB,aAAe,SAAUhoB,GACzC,IAAId,EAASc,EAAEd,OACfA,EAAS0H,EAAa1H,EAAQ,cAElCiiE,EAAU/hE,UAAUmiE,aAAe,SAAUvhE,GACzC,IAAI+V,EAAQnB,KACZ,GAAkB,KAAd5U,EAAE+7D,SAAkB/7D,EAAE01D,UAAY9gD,KAAK5N,OAAOm2B,OAAQ,CACtD,IAAIqkC,EAAWnzB,UAAQvrC,SAAS0gD,cAAe,cAC/C,IAAKge,EACD,OAEJ5sD,KAAK4uC,cAAgB1gD,SAAS0gD,cAC9B5uC,KAAK6sD,kBAAkBpgE,MAAQ,GAC/B,IAAIqgE,EAAMx8D,OAAOy8D,QACbC,EAAM18D,OAAO28D,QACjBjtD,KAAK6sD,kBAAkBh4C,QACvBo6B,WAAW,WACP9tC,EAAMytC,cAAc/5B,QACpBvkB,OAAO48D,SAASJ,EAAKE,GACrB7rD,EAAMgsD,MAAMhsD,EAAM0rD,kBAAkBpgE,MAAOuyC,SAAS4tB,EAAS77D,cAAc2gB,aAAa,iBAAkB,IAAKstB,SAAS4tB,EAASl7C,aAAa,iBAAkB,MACjK,MASX66C,EAAU/hE,UAAU2iE,MAAQ,SAAUxiE,EAAM0yC,EAAUnE,GAClD,IAGIrjC,EACApJ,EACA2gE,EALA9hE,EAAO0U,KAAK5N,OACZksD,EAAOplB,EACPmlB,EAAOhhB,EAIX,GAAK/xC,EAAK+K,aAAaJ,cAA2C,UAA3B3K,EAAK+K,aAAaC,MACrB,SAAhChL,EAAKunC,kBAAkBv8B,MAAgE,SAA7ChL,EAAKunC,kBAAkB8rB,kBADrE,CAIA,IACIhiC,EAEA4Z,EAHAlP,EAAO18B,EAAK6K,MAAM,MAElB63D,EAAW/hE,EAAKsrC,cAEhBvF,EAAWrxB,KAAK5N,OAAOg/B,mBACvBC,IACAkF,EAAQjrC,EAAK6rC,sBAEjB,IAAK,IAAIt2B,EAAI,EAAGA,EAAIwmB,EAAK17B,OAAQkV,IAAK,CAGlC,GAFA8b,EAAO0K,EAAKxmB,GAAGrL,MAAM,MACrB8oD,EAAOplB,EACFr4B,IAAMwmB,EAAK17B,OAAS,GAAiB,KAAZ07B,EAAKxmB,IAAc08C,cAAYjyD,EAAK2sC,cAAcomB,IAAQ,CACpFC,IACA,MAEJ,IAAK,IAAItuD,EAAI,EAAGA,EAAI2sB,EAAKhxB,OAAQqE,IAAK,CAElC,GADAo9D,EAAU9hE,EAAK+xD,iBAAiBgB,EAAMC,GAClCjtB,EAAU,CACV,IAAIi8B,EAAMD,EAAShP,GACfkP,EAAMh3B,EAAM8nB,GAChB+O,IAAWE,EAAIj/D,cAAc,mBAAqBiwD,EAAO,OACrDiP,EAAIl/D,cAAc,mBAAqBiwD,EAAO,MAEtD,IAAK8O,EAAS,CACV9O,IACA,MAIJ,GAFAzoD,EAAMvK,EAAKqkD,iBAAiB2O,GAC5B7xD,EAAQoJ,EAAIuO,YAAcvO,EAAIuO,WAAJvO,CAAgB8mB,EAAK3sB,IAAM2sB,EAAK3sB,GACtD6F,EAAII,eAAiBJ,EAAIG,eAAiBH,EAAI5H,SAAU,CACxD,IAAIqJ,GACA1M,OAAQiL,EACRlL,KAAM8B,GAEVuT,KAAK5N,OAAO+d,QpCXP,coCWmC7Y,GACpChM,EAAKwsD,aACY,WAAbjiD,EAAI9B,KACJiM,KAAK5N,OAAO0lD,WAAWiL,WAAW1E,EAAMxoD,EAAInL,MAAOs0C,SAAS1nC,EAAK3M,KAAM,KAGvEW,EAAKwsD,WAAWiL,WAAW1E,EAAMxoD,EAAInL,MAAO4M,EAAK3M,OAI7D2zD,IAEJD,IAEJ/yD,EAAKkiE,gBAAgBjP,oBAAqBlhB,SAAUA,EAAUoS,UAAWvW,IAAcmE,SAAUghB,EAAO,EAAG5O,UAAW6O,EAAO,IAC7H,IAAIllD,EAAO4G,KAAK5N,OAAOirD,iBAAiBgB,EAAO,EAAGC,EAAO,GACrDllD,GACA9G,YAAU8G,GAAO,UAAW,mBAGpCmzD,EAAU/hE,UAAU8c,WAAa,WAC7BtH,KAAK5N,OAAOyf,IAAInE,GAAqB1N,KAAKsH,YAC1CtH,KAAK6sD,kBAAoB7sD,KAAK5N,OAAOqC,cAAc,YAC/C9D,UAAW,cACXuE,OAAQ,aACR6d,OAASwrB,SAAU,KAAMkvB,aAAc,eAE3CztD,KAAK5N,OAAOK,QAAQmB,YAAYoM,KAAK6sD,oBAEzCN,EAAU/hE,UAAU46D,eAAiB,SAAUh6D,GAC1B,cAAbA,EAAEqL,OACFuJ,KAAK0tD,OAEa,mBAAbtiE,EAAEqL,QACPuJ,KAAK0tD,MAAK,IAGlBnB,EAAU/hE,UAAUmjE,YAAc,SAAUC,GACxC,GAAyC,KAArCt9D,OAAOu9D,eAAeh2D,WAAmB,CACzC,IAAIw5B,EAAWrxB,KAAK5N,OAAOg/B,mBAC3BpxB,KAAK6sD,kBAAkBpgE,MAAQuT,KAAKwsD,YAAc,GAClD,IAAIj2B,OAAQ,EACRlP,EAAOrnB,KAAK5N,OAAO2jC,UAIvB,GAHI1E,IACAkF,EAAQv2B,KAAK5N,OAAO+kC,sBAEmB,SAAvCn3B,KAAK5N,OAAOygC,kBAAkBv8B,KAAiB,CAC/C,IAAIw3D,EAAkB9tD,KAAK5N,OAAOw2B,wBAAwB/J,KAAK,SAAU+O,EAAGjC,GAAK,OAAOiC,EAAIjC,IAC5F,GAAIiiC,EAAY,CAEZ,IAAK,IADDG,KACKriE,EAAI,EAAGA,EAAIsU,KAAK5N,OAAOu1B,oBAAoBh8B,OAAQD,IACxDqiE,EAAgBriE,GAAKsU,KAAK5N,OAAOu1B,oBAAoBj8B,GAAGwE,WAE5D8P,KAAKguD,YAAYD,GAAiB,EAAO,KAAMH,GAC/C5tD,KAAKwsD,aAAe,KAExB,IAAS9gE,EAAI,EAAGA,EAAIoiE,EAAgBniE,OAAQD,IAAK,CACzCA,EAAI,IACJsU,KAAKwsD,aAAe,MAExB,IAAIn1D,KAAWnE,MAAMC,KAAKk0B,EAAKymC,EAAgBpiE,IAAIyC,iBAAiB,eAChEkjC,GACAh6B,EAAMxL,KAAK0gC,MAAMl1B,KAAUnE,MAAMC,KAAKojC,EAAMu3B,EAAgBpiE,IAAIyC,iBAAiB,gBAErF6R,KAAKguD,YAAY32D,GAAO,EAAO,KAAMu2D,QAGxC,CACD,IAAI//D,EAAMmS,KAAKiuD,oBACf,GAAIpgE,EAAIqgE,OAAQ,CACZ,GAAIN,EAAY,CAEP,IADDO,KACJ,IAASziE,EAAI,EAAGA,EAAImC,EAAIugE,WAAWziE,OAAQD,IACvCyiE,EAAQtiE,KAAKmU,KAAK5N,OAAOi8D,uBAAuBxgE,EAAIugE,WAAW1iE,KAEnEsU,KAAKguD,YAAYG,GAAS,EAAO,KAAMP,GACvC5tD,KAAKwsD,aAAe,KAExB,IAAS9gE,EAAI,EAAGA,EAAImC,EAAI+sD,WAAWjvD,OAAQD,IAAK,CACxCA,EAAI,IACJsU,KAAKwsD,aAAe,MAEpBn1D,KAAWnE,MAAMC,KAAKk0B,EAAKx5B,EAAI+sD,WAAWlvD,IAC1CyC,iBAAiB,+BACjBkjC,GACAh6B,EAAMxL,KAAK0gC,MAAMl1B,KAAUnE,MAAMC,KAAKojC,EAAM1oC,EAAI+sD,WAAWlvD,IAAIyC,iBAAiB,gCAEpF6R,KAAKguD,YAAY32D,GAAO,EAAO,KAAMu2D,SAIzC5tD,KAAKguD,eAAe96D,MAAMC,KAAK6M,KAAK5N,OAAOK,QAAQtE,iBAAiB,gCAAgC,EAAM,KAAMy/D,GAGxH,IAAIt2D,GACA3M,KAAMqV,KAAKwsD,YACXl8C,QAAQ,GAGZ,GADAtQ,KAAK5N,OAAO+d,QpC/GA,aoC+G2B7Y,GACnCA,EAAKgZ,OACL,OAEJtQ,KAAK6sD,kBAAkBpgE,MAAQuT,KAAKwsD,YAAcl1D,EAAK3M,KAClDktB,UAAQstC,UAAUmJ,MAAM,qBAIzBtuD,KAAK6sD,kBAAkB0B,kBAAkB,EAAGvuD,KAAK6sD,kBAAkBpgE,MAAMd,QAHzEqU,KAAK6sD,kBAAkBlsC,SAK3B3gB,KAAKysD,UAAW,IAGxBF,EAAU/hE,UAAUwjE,YAAc,SAAU32D,EAAOm3D,EAAQvnC,EAAU2mC,GAEjE,IAAK,IADDa,EAAgC,iBAAbp3D,EAAM,GACpBlK,EAAI,EAAGA,EAAIkK,EAAM1L,OAAQwB,IAC1BygE,GAAcY,IACdxuD,KAAKwsD,aAAexsD,KAAK5N,OAAO+lB,aAAa6mB,SAAS3nC,EAAMlK,GAAGukB,aAAa,iBAAkB,KAAKxhB,WAAa,MAEhHu+D,EACKp3D,EAAMlK,GAAGmF,UAAUC,SAAS,YAC7ByN,KAAKwsD,aAAen1D,EAAMlK,GAAGurB,aAIjC1Y,KAAKwsD,aAAen1D,EAAMlK,GAE1BA,EAAIkK,EAAM1L,OAAS,IACnBqU,KAAKwsD,aAAevlC,IAQhCslC,EAAU/hE,UAAUkjE,KAAO,SAAUE,GAC7B1/D,SAASwgE,sBAAsB,UAC/B1uD,KAAK2tD,YAAYC,GACjB1/D,SAASygE,YAAY,QACrB3uD,KAAK6sD,kBAAkB+B,QAEvB5uD,KAAKysD,WACLn8D,OAAOu9D,eAAegB,kBACtB7uD,KAAKysD,UAAW,IAOxBF,EAAU/hE,UAAUwlB,cAAgB,WAChC,MAAO,aAOXu8C,EAAU/hE,UAAUwe,QAAU,WAC1BhJ,KAAK8R,sBACD9R,KAAK6sD,mBACLz5D,SAAO4M,KAAK6sD,oBAGpBN,EAAU/hE,UAAUyjE,kBAAoB,WACpC,IAAIlsB,EAAU/hC,KAAK5N,OACfvE,GAAQqgE,QAAQ,GACpB,GAAuC,SAAnCnsB,EAAQlP,kBAAkBv8B,KAAiB,CAC3C,IAAIw4D,EAAgB/sB,EAAQgtB,4BACxBjwB,OAAM,EAEN8b,KACAlvD,OAAI,EACR,IAAKA,EAAI,EAAGA,EAAIojE,EAAcnjE,SACtBmjE,EAAcpjE,GAAG8yD,YAAY7yD,QAC7BivD,EAAW/uD,KAAKijE,EAAcpjE,GAAG2xC,WAEjCyxB,EAAcpjE,GAAG8yD,YAAY7yD,SACxBmzC,IACDA,EAAM/iB,KAAKizC,UAAUF,EAAcpjE,GAAG8yD,YAAY3/B,SAElDigB,IAAQ/iB,KAAKizC,UAAUF,EAAcpjE,GAAG8yD,YAAY3/B,UAR1BnzB,KAatCkvD,EAAW/7B,KAAK,SAAU+O,EAAGjC,GAAK,OAAOiC,EAAIjC,IACzCjgC,IAAMojE,EAAcnjE,QAAUivD,EAAWA,EAAWjvD,OAAS,GAAKivD,EAAW,IAAOA,EAAWjvD,OAAS,IACxGkC,GAAQqgE,QAAQ,EAAMtT,WAAYA,EAAYwT,WAAYU,EAAc,GAAGtQ,cAGnF,OAAO3wD,GAEJ0+D,KCnTP9gC,GAAwC,WACxC,IAAIC,EAAgB,SAAU9qB,EAAG+qB,GAI7B,OAHAD,EAAgBp8B,OAAOs8B,iBAChBC,wBAA2B13B,OAAS,SAAUyM,EAAG+qB,GAAK/qB,EAAEirB,UAAYF,IACvE,SAAU/qB,EAAG+qB,GAAK,IAAK,IAAI1M,KAAK0M,EAAOA,EAAE54B,eAAeksB,KAAIre,EAAEqe,GAAK0M,EAAE1M,MACpDre,EAAG+qB,IAE5B,OAAO,SAAU/qB,EAAG+qB,GAEhB,SAASG,IAAO9rB,KAAK+rB,YAAcnrB,EADnC8qB,EAAc9qB,EAAG+qB,GAEjB/qB,EAAEpW,UAAkB,OAANmhC,EAAar8B,OAAO08B,OAAOL,IAAMG,EAAGthC,UAAYmhC,EAAEnhC,UAAW,IAAIshC,IAV3C,GAaxCrrB,GAA0C,SAAUC,EAAYpW,EAAQkP,EAAKmH,GAC7E,IAA2HC,EAAvH5Q,EAAIwH,UAAU7L,OAAQkV,EAAI7Q,EAAI,EAAI1F,EAAkB,OAATqW,EAAgBA,EAAOrR,OAAOwR,yBAAyBxW,EAAQkP,GAAOmH,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASN,EAAYpW,EAAQkP,EAAKmH,QACpH,IAAK,IAAIjV,EAAIgV,EAAW/U,OAAS,EAAGD,GAAK,EAAGA,KAASkV,EAAIF,EAAWhV,MAAImV,GAAK7Q,EAAI,EAAI4Q,EAAEC,GAAK7Q,EAAI,EAAI4Q,EAAEtW,EAAQkP,EAAKqH,GAAKD,EAAEtW,EAAQkP,KAASqH,GAChJ,OAAO7Q,EAAI,GAAK6Q,GAAKvR,OAAO2R,eAAe3W,EAAQkP,EAAKqH,GAAIA,GAkC5DouD,GAAgC,SAAUjhC,GAE1C,SAASihC,IACL,OAAkB,OAAXjhC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAW/D,OAbAyrB,GAAUwjC,EAAgBjhC,GAI1BvtB,IACImE,cACDqqD,EAAezkE,UAAW,aAAS,GACtCiW,IACImE,cACDqqD,EAAezkE,UAAW,iBAAa,GAC1CiW,IACImE,YAAS,IACVqqD,EAAezkE,UAAW,mBAAe,GACrCykE,GACTl9D,iBAKEm9D,GAA8B,SAAUlhC,GAExC,SAASkhC,IACL,OAAkB,OAAXlhC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAQ/D,OAVAyrB,GAAUyjC,EAAclhC,GAIxBvtB,IACI6rD,gBAAe2C,KAChBC,EAAa1kE,UAAW,eAAW,GACtCiW,IACImE,YAAS,IACVsqD,EAAa1kE,UAAW,mBAAe,GACnC0kE,GACTn9D,iBAKE+I,GAA2B,SAAUkzB,GAErC,SAASlzB,IACL,OAAkB,OAAXkzB,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAsC/D,OAxCAyrB,GAAU3wB,EAAWkzB,GAIrBvtB,IACImE,cACD9J,EAAUtQ,UAAW,aAAS,GACjCiW,IACImE,cACD9J,EAAUtQ,UAAW,gBAAY,GACpCiW,IACImE,cACD9J,EAAUtQ,UAAW,aAAS,GACjCiW,IACImE,cACD9J,EAAUtQ,UAAW,iBAAa,GACrCiW,IACImE,cACD9J,EAAUtQ,UAAW,oBAAgB,GACxCiW,IACImE,cACD9J,EAAUtQ,UAAW,iBAAa,GACrCiW,IACImE,gBACD9J,EAAUtQ,UAAW,yBAAqB,GAC7CiW,IACImE,gBACD9J,EAAUtQ,UAAW,sBAAkB,GAC1CiW,IACImE,cACD9J,EAAUtQ,UAAW,YAAQ,GAChCiW,IACImE,cACD9J,EAAUtQ,UAAW,mBAAe,GACvCiW,IACImE,cACD9J,EAAUtQ,UAAW,WAAO,GAC/BiW,IACImE,cACD9J,EAAUtQ,UAAW,oBAAgB,GACjCsQ,GACT/I,iBAKEo9D,GAAgC,SAAUnhC,GAE1C,SAASmhC,IACL,OAAkB,OAAXnhC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KA0B/D,OA5BAyrB,GAAU0jC,EAAgBnhC,GAI1BvtB,IACI6rD,gBAAexxD,KAChBq0D,EAAe3kE,UAAW,eAAW,GACxCiW,IACImE,WAAS,cACVuqD,EAAe3kE,UAAW,YAAQ,GACrCiW,IACImE,cACDuqD,EAAe3kE,UAAW,YAAQ,GACrCiW,IACImE,YAAS,IACVuqD,EAAe3kE,UAAW,2BAAuB,GACpDiW,IACImE,WAAS,OACVuqD,EAAe3kE,UAAW,0BAAsB,GACnDiW,IACImE,cACDuqD,EAAe3kE,UAAW,iBAAa,GAC1CiW,IACImE,YAAS,IACVuqD,EAAe3kE,UAAW,oBAAgB,GAC7CiW,IACImE,YAAS,IACVuqD,EAAe3kE,UAAW,6BAAyB,GAC/C2kE,GACTp9D,iBAKEq9D,GAAmC,SAAUphC,GAE7C,SAASohC,IACL,OAAkB,OAAXphC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KA0B/D,OA5BAyrB,GAAU2jC,EAAmBphC,GAI7BvtB,IACImE,WAAS,QACVwqD,EAAkB5kE,UAAW,YAAQ,GACxCiW,IACImE,WAAS,SACVwqD,EAAkB5kE,UAAW,yBAAqB,GACrDiW,IACImE,WAAS,WACVwqD,EAAkB5kE,UAAW,YAAQ,GACxCiW,IACImE,YAAS,IACVwqD,EAAkB5kE,UAAW,oBAAgB,GAChDiW,IACImE,YAAS,IACVwqD,EAAkB5kE,UAAW,wBAAoB,GACpDiW,IACImE,WAAS,YACVwqD,EAAkB5kE,UAAW,oBAAgB,GAChDiW,IACImE,YAAS,IACVwqD,EAAkB5kE,UAAW,qCAAiC,GACjEiW,IACImE,YAAS,IACVwqD,EAAkB5kE,UAAW,oBAAgB,GACzC4kE,GACTr9D,iBAKEs9D,GAAgC,SAAUrhC,GAE1C,SAASqhC,IACL,OAAkB,OAAXrhC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAiB/D,OAnBAyrB,GAAU4jC,EAAgBrhC,GAI1BvtB,IACImE,gBACDyqD,EAAe7kE,UAAW,cAAU,GACvCiW,IACImE,WAAS,KACVyqD,EAAe7kE,UAAW,WAAO,GACpCiW,IACImE,WAAS,aACVyqD,EAAe7kE,UAAW,gBAAY,GACzCiW,IACImE,YAAS,IACVyqD,EAAe7kE,UAAW,kBAAc,GAC3CiW,IACImE,YAAS,IACVyqD,EAAe7kE,UAAW,oBAAgB,GACtC6kE,GACTt9D,iBAKEu9D,GAAiC,SAAUthC,GAE3C,SAASshC,IACL,OAAkB,OAAXthC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAK/D,OAPAyrB,GAAU6jC,EAAiBthC,GAI3BvtB,IACImE,cACD0qD,EAAgB9kE,UAAW,gBAAY,GACnC8kE,GACTv9D,iBAKEw9D,GAAkC,SAAUvhC,GAE5C,SAASuhC,IACL,OAAkB,OAAXvhC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAK/D,OAPAyrB,GAAU8jC,EAAkBvhC,GAI5BvtB,IACImE,WAAS,SACV2qD,EAAiB/kE,UAAW,gBAAY,GACpC+kE,GACTx9D,iBAKEy9D,GAA+B,SAAUxhC,GAEzC,SAASwhC,IACL,OAAkB,OAAXxhC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAuB/D,OAzBAyrB,GAAU+jC,EAAexhC,GAIzBvtB,IACImE,YAAS,IACV4qD,EAAchlE,UAAW,oBAAgB,GAC5CiW,IACImE,YAAS,IACV4qD,EAAchlE,UAAW,wBAAoB,GAChDiW,IACImE,YAAS,IACV4qD,EAAchlE,UAAW,yBAAqB,GACjDiW,IACImE,YAAS,IACV4qD,EAAchlE,UAAW,yBAAqB,GACjDiW,IACImE,YAAS,IACV4qD,EAAchlE,UAAW,iCAA6B,GACzDiW,IACImE,gBACD4qD,EAAchlE,UAAW,eAAW,GACvCiW,IACImE,cACD4qD,EAAchlE,UAAW,uBAAmB,GACxCglE,GACTz9D,iBAKE09D,GAA8B,SAAUzhC,GAExC,SAASyhC,IACL,OAAkB,OAAXzhC,GAAmBA,EAAOzB,MAAMvsB,KAAMxI,YAAcwI,KAmC/D,OArCAyrB,GAAUgkC,EAAczhC,GAIxBvtB,IACImE,YAAS,IACV6qD,EAAajlE,UAAW,mBAAe,GAC1CiW,IACImE,YAAS,IACV6qD,EAAajlE,UAAW,oBAAgB,GAC3CiW,IACImE,YAAS,IACV6qD,EAAajlE,UAAW,qBAAiB,GAC5CiW,IACImE,WAAS,WACV6qD,EAAajlE,UAAW,YAAQ,GACnCiW,IACImE,YAAS,IACV6qD,EAAajlE,UAAW,2BAAuB,GAClDiW,IACImE,YAAS,IACV6qD,EAAajlE,UAAW,yBAAqB,GAChDiW,IACImE,YAAS,IACV6qD,EAAajlE,UAAW,+BAA2B,GACtDiW,IACImE,WAAS,KACV6qD,EAAajlE,UAAW,gBAAY,GACvCiW,IACImE,WAAS,QACV6qD,EAAajlE,UAAW,sBAAkB,GAC7CiW,IACImE,gBACD6qD,EAAajlE,UAAW,cAAU,GACrCiW,IACImE,YAAS,IACV6qD,EAAajlE,UAAW,wBAAoB,GACxCilE,GACT19D,iBAYEqd,GAAsB,SAAU4e,GAMhC,SAAS5e,EAAKlO,EAASzO,GACnB,IAAI0O,EAAQ6sB,EAAO76B,KAAK6M,KAAMkB,EAASzO,IAAYuN,KA4BnD,OA3BAmB,EAAM4pD,sBAAuB,EAC7B5pD,EAAMuuD,iBACNvuD,EAAMwuD,SACNxuD,EAAMyuD,cAAgBC,YAAUrlE,UAAU09B,QAE1C/mB,EAAMlF,mBAAoB,EAE1BkF,EAAM1V,SAEN0V,EAAMlV,UAENkV,EAAMuzB,iBAINvzB,EAAMqrB,mBAENrrB,EAAM46B,qBAAuB,EAE7B56B,EAAMojC,gBAAiB,EAEvBpjC,EAAM2uD,oBAAqB,EAE3B3uD,EAAM4uD,cAAe,EACrB5uD,EAAM6uD,SAAU,EAChBC,EAAOC,OAAOla,IACd/8C,WAAS,mBAAoBkI,EAAMgvD,qBAAsBhvD,GAClDA,EAlCXsqB,GAAUrc,EAAM4e,GAoChBiiC,EAAS7gD,EAMTA,EAAK5kB,UAAU4lE,eAAiB,WAC5B,IAAIjvD,EAAQnB,KACRqwD,GAAa,eAAgB,eAC7B,iBAAkB,gBAAiB,UAAW,iBAAkB,mBAAoB,kBACpFC,GACArzD,cAAe,WAAY,YAAa,oBAAqB,oBAAqB,aAClFkV,gBAAiB,OAAQ,OAAQ,sBAAuB,qBAAsB,gBAC9E7lB,eAAgB,eAAgB,mBAAoB,oBAAqB,oBACrE,4BAA6B,oBACjCiwB,gBAAiB,SAAU,WAAY,cACvChH,gBAAkBhpB,WAAam5D,oBAAsB6K,mBAazD,OAXAF,EAEU7gE,QAAQ,SAAU/C,GAExB,IAAK,IADD+jE,EAAgBrvD,EAAM1U,GACjB8K,EAAK,EAAGiG,EAAK8yD,EAAgB7jE,GAAQ8K,EAAKiG,EAAG7R,OAAQ4L,IAAM,QAEzDi5D,EADGhzD,EAAGjG,OAIrByI,KAAK/C,aAAahP,cAAW8G,EAC7BiL,KAAK8vD,oBAAsBjlE,oBAAkBmV,KAAKywD,eAC3CzwD,KAAK0wD,aAAaL,IAO7BjhD,EAAK5kB,UAAUmmE,gBAAkB,WAC7B,IAAInhD,KACJ,OAAIxP,KAAKwN,YACEgC,GAEPxP,KAAKsB,gBACLkO,EAAQ3jB,MACJ+kE,OAAQ,SACRt5D,MAAO0I,KAAMA,KAAKmS,eAAgBnS,KAAKpJ,kBAG3CoJ,KAAK6wD,kBACLrhD,EAAQ3jB,MACJ+kE,OAAQ,cACRt5D,MAAO0I,KAAMA,KAAKpJ,kBAGtBoJ,KAAK8wD,gBACLthD,EAAQ3jB,MACJ+kE,OAAQ,YACRt5D,MAAO0I,QAGXA,KAAKoB,cACLoO,EAAQ3jB,MACJ+kE,OAAQ,OACRt5D,MAAO0I,KAAMA,KAAKuV,aAAcvV,KAAKsV,cAAetV,KAAKpJ,kBAG7DoJ,KAAKjD,aACLyS,EAAQ3jB,MACJ+kE,OAAQ,QACRt5D,MAAO0I,KAAMA,KAAK/C,gBAGtB+C,KAAK0pD,gBACLl6C,EAAQ3jB,MACJ+kE,OAAQ,YACRt5D,MAAO0I,KAAMA,KAAK6yB,kBAAmB7yB,KAAKpJ,kBAGlD4Y,EAAQ3jB,MACJ+kE,OAAQ,SACRt5D,MAAO0I,QAEPA,KAAKwB,iBACLgO,EAAQ3jB,MACJ+kE,OAAQ,UACRt5D,MAAO0I,QAGXA,KAAKikD,qBACLz0C,EAAQ3jB,MACJ+kE,OAAQ,iBACRt5D,MAAO0I,QAGXA,KAAKuB,eACLiO,EAAQ3jB,MACJ+kE,OAAQ,QACRt5D,MAAO0I,KAAMA,KAAK1T,cAAe0T,KAAKsV,cAAetV,KAAKpJ,kBAG9DoJ,KAAK5L,WAAWzI,QAChB6jB,EAAQ3jB,MAAO+kE,OAAQ,YAAat5D,MAAO0I,KAAMA,KAAKpJ,kBAEtDoJ,KAAKo3B,YACL5nB,EAAQ3jB,MACJ+kE,OAAQ,YACRt5D,MAAO0I,KAAMA,KAAKpJ,mBAGtBoJ,KAAKmqD,SAAWnqD,KAAK8kC,kBACrBt1B,EAAQ3jB,MACJ+kE,OAAQ,UACRt5D,MAAO0I,KAAMA,KAAKpJ,mBAGtBoJ,KAAKhE,sBAAwBgE,KAAK0mB,6BAClClX,EAAQ3jB,MACJ+kE,OAAQ,gBACRt5D,MAAO0I,KAAMA,KAAKpJ,mBAGtBoJ,KAAKoxB,oBAAsBpxB,KAAK+yB,aAChCvjB,EAAQ3jB,MAAO+kE,OAAQ,SAAUt5D,MAAO0I,KAAMA,KAAKpJ,kBAEnDoJ,KAAK+wD,gBAAgB/wD,KAAKzT,UAC1BijB,EAAQ3jB,MACJ+kE,OAAQ,gBACRt5D,MAAO0I,KAAMA,KAAKpJ,mBAGtBoJ,KAAK3J,aAAa26D,aAAehxD,KAAK3J,aAAa46D,eAAiBjxD,KAAK3J,aAAaJ,eACtFuZ,EAAQ3jB,MACJ+kE,OAAQ,OACRt5D,MAAO0I,KAAMA,KAAKpJ,kBAG1BoJ,KAAKkxD,sBAAsB1hD,GACpBA,IAEXJ,EAAK5kB,UAAU0mE,sBAAwB,SAAU1hD,GACzCxP,KAAKmxD,kBACL3hD,EAAQ3jB,MACJ+kE,OAAQ,cACRt5D,MAAO0I,KAAMA,KAAKpJ,kBAGtBoJ,KAAKyB,gBACL+N,EAAQ3jB,MACJ+kE,OAAQ,aACRt5D,MAAO0I,KAAMA,KAAKpJ,kBAGtBoJ,KAAKoxD,mBACL5hD,EAAQ3jB,MACJ+kE,OAAQ,gBACRt5D,MAAO0I,KAAMA,KAAKpJ,kBAGtBoJ,KAAKqxD,oBAAoBrxD,KAAKzT,UAC9BijB,EAAQ3jB,MAAO+kE,OAAQ,aAAct5D,MAAO0I,KAAMA,KAAKpJ,kBAEvDoJ,KAAK+vD,cACLvgD,EAAQ3jB,MAAO+kE,OAAQ,SAAUt5D,MAAO0I,SAOhDoP,EAAK5kB,UAAU8mE,UAAY,WACvBtxD,KAAKpJ,eAAiB,IAAIiyC,GAC1B7oC,KAAKuxD,iBACLvxD,KAAKwxD,sBAETpiD,EAAK5kB,UAAU+mE,eAAiB,WAE5BvxD,KAAKic,WAAY,EACjBjc,KAAKsV,iBACLtV,KAAK0vD,iBACL1vD,KAAKyxD,YACLzxD,KAAK8mC,eAAgB,EACrB9mC,KAAKmnB,cACLnnB,KAAKuoB,QAAS,EACdvoB,KAAK8oB,aAAe,OACpB9oB,KAAK6oB,qBAAsB,EAC3B7oB,KAAKi4C,oBAAqB,EAC1Bj4C,KAAK4vD,cAAgBC,YAAUrlE,UAAU09B,QACzCloB,KAAK0xD,iBACDn/D,SAAU,WAAYo/D,SAAU,WAAYC,MAAO,QAASC,YAAa,cAAeC,mBAAoB,qBAC5GC,SAAU,WAAYC,gBAAiB,kBAAmBC,SAAU,WAAYC,WAAY,cAEhGlyD,KAAKmyD,eACDC,YAAa,wBACbC,KAAM,OACNC,MAAO,QACPC,qBAAsB,sBACtBC,cAAe,gDACfC,QAAS,wBACTC,aAAc,uCACdC,eAAgB,qBAChBC,qBAAsB,uHAEtBC,IAAK,MACLC,KAAM,OACNC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRx1D,MAAO,QACPy1D,UAAW,aACXC,YAAa,eACbC,WAAY,cACZC,UAAW,aACXxK,OAAQ,SACRyK,cAAe,UACfC,KAAM,OACNC,KAAM,OACNC,MAAO,QACPC,mBAAoB,yCACpBC,qBAAsB,2CACtBC,WAAY,OACZC,SAAU,KACVC,aAAc,SACdC,cAAe,cACfC,aAAc,iBACdC,iBAAkB,yCAClBC,qBAAsB,mEACtBC,cAAe,0CACfC,WAAY,+CACZC,cAAe,gBACfC,cAAe,iBACfC,OAAQ,mBACRC,aAAc,SACdC,YAAa,QACbC,WAAY,cACZC,SAAU,YACVC,SAAU,WACVC,MAAO,QACPC,SAAU,YACVC,SAAU,YACVC,gBAAiB,qBACjBC,YAAa,eACbC,mBAAoB,wBACpBC,WAAY,gBACZC,WAAY,kBACZC,KAAM,OACNC,MAAO,uBACPC,QAAS,yBACTC,WAAY,sBACZzzD,QAAS,sBACT0zD,OAAQ,SACRC,UAAW,aACXC,SAAU,YACVC,aAAc,gBACdC,SAAU,YACVC,cAAe,iBACfC,eAAgB,kBAChBC,WAAY,cACZC,aAAc,gBACdC,WAAY,SACZC,UAAW,aACXC,OAAQ,SACRC,WAAY,OACZC,YAAa,QACbC,SAAU,mBACVC,YAAa,eACbC,aAAc,iBACdC,WAAY,eACZC,WAAY,eACZC,eAAgB,mBAChBC,UAAW,aACXC,QAAS,UACTC,aAAc,gBACdC,wBAAyB,kBACzBC,4BAA6B,gBAC7BC,IAAK,MACLC,GAAI,KACJC,cAAe,oBAEnBp3D,KAAKq3D,YACDhkB,UAAW,YACXD,QAAS,UACTJ,WAAY,aACZE,UAAW,YACXK,UAAW,kBACXD,QAAS,gBACTE,WAAY,mBACZC,UAAW,kBACXtB,KAAM,OACN7lB,IAAK,MACLgrC,OAAQ,SACRllB,SAAU,YACVC,QAAS,WACTklB,OAAQ,SACRC,SAAU,WACVC,cAAe,kBACfC,gBAAiB,oBACjBC,UAAW,aACXC,YAAa,eACbC,aAAc,gBACdC,WAAY,cACZC,cAAe,iBACfC,YAAa,eACbhQ,UAAW,SACXiQ,UAAW,SACXz0C,OAAQ,SACR00C,OAAQ,SACRC,GAAI,KACJzkB,MAAO,QACP0kB,UAAW,aACXzkB,WAAY,cACZV,IAAK,MACLE,SAAU,YACVklB,MAAO,QACPC,UAAW,SACXC,eAAgB,iBAQxBnpD,EAAK5kB,UAAUg7B,OAAS,WACpBxlB,KAAK+P,KAAK,iBAAkB,kBAAmB,iBAAkB,6BACjE/P,KAAKixB,YAAYkB,WAAWnyB,KAAKvN,SAAWs1B,KAAM,SAC9CvR,cACAxW,KAAKw4D,iBAET9gD,iBAAgBptB,OAAQ0V,KAAKvN,SAAWuN,KAAKvL,eAC7CuL,KAAKy4D,aAAe,IAAIr1B,GAAOpjC,KAAMA,KAAKpJ,gBAC1CoJ,KAAK04D,aAAe,IAAI7P,GAAO7oD,MAC/BA,KAAKoN,aAAe,IAAIy8C,GAAO7pD,MAC/BA,KAAK4P,OAAO63B,QACgD,IAAxDznC,KAAKsU,gBAAgB+L,YAAYzmB,WAAW8qB,cAAwE3vB,IAApDiL,KAAKsU,gBAAgB+L,YAAYzmB,WAAWgiB,MAC5G5b,KAAK/D,mBAAoB,GAE7B+D,KAAKmQ,QrCrsBK,QqCssBVrgB,EAAekQ,KAAKzT,QAASyT,KAAK0mB,4BAClC1mB,KAAK24D,kBACLhpE,EAAeqQ,KAAKzT,SACpByT,KAAK44D,iBAAiB54D,KAAKzT,SAC3ByT,KAAKmY,aACLnY,KAAK64D,eACL74D,KAAK84D,aACL94D,KAAKkT,aACLlT,KAAK+4D,cACL/4D,KAAKy9B,sBACLz9B,KAAKg5D,sBACLh5D,KAAK2X,cACL3X,KAAK4P,OAAO00C,QAKhBl1C,EAAK5kB,UAAUmtB,YAAc,WACzBA,cAAY3X,KAAKvN,UAKrB2c,EAAK5kB,UAAUg0B,YAAc,WACzBA,cAAYxe,KAAKvN,UAErB2c,EAAK5kB,UAAUwuE,oBAAsB,WAC7Bh5D,KAAKsB,gBAA+C,cAA7BtB,KAAKmS,eAAepe,MAC3CiM,KAAKgzB,mBAAmB7kC,iBAAiB,wBAAwBxC,OACjEqU,KAAKgzB,mBAAmB1gC,UAAUoE,IAAI,mBAGtCsJ,KAAKgzB,mBAAmB1gC,UAAUc,OAAO,oBAGjDgc,EAAK5kB,UAAUmuE,gBAAkB,WAC7B,IAAK34D,KAAK0mB,2BAA4B,CAClC,IAAIuyC,EAAOj5D,KAAKmY,aAEhB,GADAnY,KAAKk5D,mBAAqBl5D,KAAKpJ,eAAeE,WAAW,oBACpDjM,oBAAkBouE,GACnB,IAAK,IAAIxpE,EAAQ,EAAGA,EAAQwpE,EAAKttE,OAAQ8D,IAChC5E,oBAAkBouE,EAAKxpE,GAAO8nC,eAAiB1sC,oBAAkBouE,EAAKxpE,GAAOe,WAAYyoE,EAAKxpE,GAAOe,SACtGwP,KAAKm5D,gBAAgBF,EAAKxpE,GAAQA,KAMtD2f,EAAK5kB,UAAU2uE,gBAAkB,SAAUtjE,EAAKpG,GAC5CuQ,KAAKyxD,SAAS5lE,KAAKgK,GACnBmK,KAAK2vD,MAAM95D,EAAIpC,KAAOnD,OAAO8oE,WAAWvjE,EAAI0hC,aAC5Cv3B,KAAKq5D,iBAAiB5pE,EAAOuQ,KAAK2vD,MAAM95D,EAAIpC,MAC5CuM,KAAK2vD,MAAM95D,EAAIpC,KAAKslE,YAAY/4D,KAAKq5D,iBAAiBvrD,KAAK9N,KAAMvQ,KAKrE2f,EAAK5kB,UAAUgtC,mBAAqB,SAAU3hC,GAC1C,IAAKmK,KAAK0mB,2BAA4B,CAElC,IAAK,IADDj3B,EAAQuQ,KAAKi9B,oBAAoBpnC,EAAIpC,KAChC/H,EAAI,EAAGA,EAAIsU,KAAKyxD,SAAS9lE,OAAQD,IACtC,GAAImK,EAAIpC,MAAQuM,KAAKyxD,SAAS/lE,GAAG+H,IAE7B,YADAuM,KAAKyxD,SAASnxC,OAAO50B,EAAG,GAIhCsU,KAAKm5D,gBAAgBtjE,EAAKpG,KAMlC2f,EAAK5kB,UAAU6uE,iBAAmB,SAAU9xC,EAAan8B,GACrD,IAAIyK,EAAMmK,KAAKmY,aAAaoP,GACxBvnB,KAAKyxD,SAASl3D,KAAK,SAAU++D,GAAe,OAAOA,EAAY7lE,MAAQoC,EAAIpC,QAC3EoC,EAAIrF,QAAUpF,EAAEmuE,QACZv5D,KAAK8mC,gBACL9mC,KAAKs3B,kBAAmB,EACpBzhC,EAAIrF,QACJwP,KAAKw5D,UAAU/hD,KAAK5hB,EAAI3F,WAAY,cAGpC8P,KAAKw5D,UAAUlQ,KAAKzzD,EAAI3F,WAAY,iBAKpDkf,EAAK5kB,UAAUivE,gBAAkB,WAE7B,GADAz5D,KAAK8mC,eAAgB,EACjB9mC,KAAK5L,WAAWzI,QAAUqU,KAAKvN,QAAQi3B,aAAe1pB,KAAK1K,OAAQ,CACnE,IAAIokE,EAAgB15D,KAAKvN,QAAQpE,cAAc,iBAC/CS,YAAU4qE,IAAiB,oBAEV15D,KAAKmY,aAAaxW,OAAO,SAAU9L,GAAO,MAAoB,aAAbA,EAAI9B,OACvDpI,QAAkD,oBAAxCqU,KAAK6yB,kBAAkB4yB,eAChDzlD,KAAK6oB,qBAAsB,EAC3B7oB,KAAK+kD,kBAOb31C,EAAK5kB,UAAUmvE,iBAAmB,aAQlCvqD,EAAK5kB,UAAUwe,QAAU,WACrB,IAAI0uC,EAAc13C,KAAKvN,QACvB,GAAKilD,EAAL,CAGA,IAAIkiB,KAAeliB,EAAYrpD,cAAc,mBACzCqpD,EAAYrpD,cAAc,mBAC1BurE,GACA55D,KAAK65D,eAET75D,KAAK85D,iBACL95D,KAAK4P,OAAOkQ,OACZ9f,KAAK+5D,0BACDH,GACA5rC,EAAOxjC,UAAUwe,QAAQ7V,KAAK6M,MAElCA,KAAKg6D,WAAWhxD,UAIhB,IAAK,IAHDwG,GAAW,eAAgB,eAAgB,gBAAiB,wBAC5D,iBAAkB,cAAe,iBAAkB,eAAgB,eAAgB,YACnF,eAAgB,cAAe,kBAAmB,eAC7C9jB,EAAI,EAAGA,EAAI8jB,EAAQ7jB,OAAQD,IAC5BsU,KAAKwP,EAAQ9jB,MACbsU,KAAKwP,EAAQ9jB,IAAM,MAG3BsU,KAAKvN,QAAQnE,UAAY,GACzBgE,YAAU0N,KAAKvN,YAAc,QAAS,cAAe,eAAgB,YAAa,WAAY,wBAElG2c,EAAK5kB,UAAUuvE,wBAA0B,WACrC,IAAIriB,EAAc13C,KAAKvN,QAClBilD,IAAiBA,EAAYrpD,cAAc,kBAAqBqpD,EAAYrpD,cAAc,qBAG/F2R,KAAKoN,aAAapE,UAClBhJ,KAAKi6D,eAAejxD,UACpBhJ,KAAKk6D,YAAYlxD,YAMrBoG,EAAK5kB,UAAUwlB,cAAgB,WAC3B,MAAO,QAEXZ,EAAK5kB,UAAU2vE,mBAAqB,WAC5Bn6D,KAAK8jD,iBACL9jD,KAAK6yB,kBAAkB8rB,kBAAoB,kBASnDvvC,EAAK5kB,UAAUk6D,kBAAoB,SAAU0V,EAASC,GAClD,IAGIC,EAHAC,GAAiB,EACjBC,GAAqB,EACrB5K,GAAgB,EAGpB,IAAI5vD,KAAKwN,YAAT,CAGAxN,KAAK+P,IAAI,kBACT,IAAI/c,EAAa1D,OAAOC,KAAK6qE,GACzBpnE,EAAWtD,QAAQ,YAAc,IACjCsQ,KAAKy6D,qBACLD,GAAqB,GAEzB,IAAK,IAAIjjE,EAAK,EAAGmjE,EAAe1nE,EAAYuE,EAAKmjE,EAAa/uE,OAAQ4L,IAAM,CACxE,IAAIsjB,EAAO6/C,EAAanjE,GACxB,OAAQsjB,GACJ,IAAK,cACD7a,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,QAASC,OAAQr4B,KAAKjD,cAC7Dw9D,GAAiB,EACjB,MACJ,IAAK,eACD,GAAIv6D,KAAK8vD,mBAAoB,CACzB9vD,KAAK8vD,oBAAqB,EAC1B,MAEJ9vD,KAAK4P,OAAO60C,IAA8BrsB,OAAQ,QAASplC,WAAYonE,EAAQn9D,gBAC3EpS,oBAAkBuvE,EAAQn9D,aAAaC,cAAgBrS,oBAAkBuvE,EAAQn9D,aAAaE,WAC3FtS,oBAAkBuvE,EAAQn9D,aAAaqnC,qBACtCz5C,oBAAkBwvE,EAAQp9D,eACxBm9D,EAAQn9D,aAAaC,cAAgBm9D,EAAQp9D,aAAaC,cACpD8C,KAAK0mB,6BAA+B1mB,KAAKhE,sBAC1CgE,KAAK/C,aAAaqnC,mBAAqBtkC,KAAK/C,aAAaE,YACpEo9D,GAAiB,GAErB,MACJ,IAAK,eACDv6D,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,OAAQC,OAAQr4B,KAAKoB,eAC5Dm5D,GAAiB,EACjBD,GAAc,EACd,MACJ,IAAK,iBACDt6D,KAAKg5D,sBACLh5D,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,SAAUC,OAAQr4B,KAAKsB,iBAC9Di5D,GAAiB,EACgB,cAA7Bv6D,KAAKmS,eAAepe,MACpBiM,KAAK+kD,gBAET,MACJ,IAAK,SACL,IAAK,QACD/kD,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,SAAUplC,YAAczC,MAAO6pE,EAAQ7pE,MAAO+E,OAAQ8kE,EAAQ9kE,UACrG,MACJ,IAAK,kBACD0K,KAAK0qD,aAAantB,YAClB+8B,GAAc,EACd,MACJ,IAAK,sBACDt6D,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,iBAAkBC,OAAQr4B,KAAKikD,sBACtE,MACJ,IAAK,iBACDjkD,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,YAAaC,OAAQr4B,KAAK0pD,iBACjE,MACJ,IAAK,iBACG1pD,KAAKwtD,kBACLxtD,KAAKm6D,qBACLn6D,KAAKwtD,gBAAgB7J,0BAEzB,MACJ,IAAK,cACD3jD,KAAK26D,cAAgB3sE,EAAiBgS,KAAKgoB,aAC3CuyC,GAAiB,EACjB,MACJ,IAAK,iBACDv6D,KAAK46D,iBAAmB5sE,EAAiBgS,KAAKypB,gBAC9C8wC,GAAiB,EACjB,MACJ,IAAK,gBACDv6D,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,QAASC,OAAQr4B,KAAKuB,gBAC7DvB,KAAK0qD,aAAantB,YAClBg9B,GAAiB,EACjBD,GAAc,EACd,MACJ,IAAK,YACDC,GAAiB,EACjB,MACJ,IAAK,UACDv6D,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,YACvC,MACJ,IAAK,gBACDp4B,KAAK4P,OAAO60C,IACRrsB,OAAQ,QAASplC,WAAYonE,EAAQ9tE,cACrCuuE,cAAeR,EAAQ/tE,gBAE3B,MACJ,IAAK,cACI0T,KAAK5L,WAAWzI,QAAUqU,KAAKuB,eAAiBvB,KAAK1T,cAAcC,QAAQZ,SAC5E4uE,GAAiB,GAErBv6D,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,YAAaplC,WAAYonE,IAChE,MACJ,IAAK,gBACL,IAAK,aACL,IAAK,uBACL,IAAK,eACL,IAAK,SACDp6D,KAAK+P,IAAI,uBACT6/C,GAAgB,EAChB4K,GAAqB,EACrB,MACJ,IAAK,QACDD,GAAiB,EACjB,MACJ,QACIv6D,KAAK86D,uBAAuBjgD,EAAMu/C,EAASI,IAGnDF,GACAt6D,KAAKy9B,sBAEL+8B,EACI5K,GAAiB5vD,KAAK88B,eAAiB98B,KAAK+yB,WAC5C/yB,KAAK4vD,gBAGL5vD,KAAKkoB,UAGJqyC,IACLv6D,KAAK4P,OAAO83B,IA7HH7nC,YAAa,YA8HtB06D,GAAiB,EACjBv6D,KAAK+6D,kBAAkBX,EAAQ1U,qBAIvCt2C,EAAK5kB,UAAUswE,uBAAyB,SAAUjgD,EAAMu/C,EAASI,GAC7D,OAAQ3/C,GACJ,IAAK,YACD7a,KAAKg7D,YACDh7D,KAAKjD,cACLiD,KAAKvN,QAAQpE,cAAc,gBAAgB4sE,cAAc,GAAG9iE,UAAYiiE,EAAQjiE,UAChF6H,KAAKvN,QAAQpE,cAAc,gBAAgB4sE,cAAc,GAAGl9C,YAE5C,SAAhB/d,KAAK1K,SACL0K,KAAKoN,aAAao9C,eAAe4P,EAAQjiE,WACzC6H,KAAKoN,aAAa42B,cAElBhkC,KAAKmqD,SAAWnqD,KAAKkqD,gBACrBlqD,KAAKkqD,cAAcgR,aAAaD,cAAc,GAAG9iE,UAAYiiE,EAAQjiE,UACrE6H,KAAKkqD,cAAcgR,aAAaD,cAAc,GAAGl9C,YAEjD/d,KAAKmxD,kBAAoBnxD,KAAKm7D,oBAC9Bn7D,KAAKm7D,kBAAkBC,iBAAiBH,cAAc,GAAG9iE,UAAYiiE,EAAQjiE,UAC7E6H,KAAKm7D,kBAAkBC,iBAAiBH,cAAc,GAAGl9C,YAEzD/d,KAAKyB,gBAAkBzB,KAAKq7D,mBAC5Br7D,KAAKq7D,iBAAiBC,gBAAgBL,cAAc,GAAG9iE,UAAYiiE,EAAQjiE,UAC3E6H,KAAKq7D,iBAAiBC,gBAAgBL,cAAc,GAAGl9C,YAE3D/d,KAAK4P,OAAO2rD,OACZ,MACJ,IAAK,eACDv7D,KAAKy4D,aAAavwC,UAClB,MACJ,IAAK,gBACDloB,KAAK0qD,aAAantB,YAClBv9B,KAAKw7D,oBACL,MACJ,IAAK,YACGx7D,KAAKhL,UACLlG,YAAUkR,KAAKvN,SAAU,qBAGzBsG,eAAaiH,KAAKvN,SAAU,qBAEhCuN,KAAKy4D,aAAavwC,UAClBloB,KAAK0qD,aAAantB,YAClB,MACJ,IAAK,YACDv9B,KAAKy7D,kBACL,MACJ,IAAK,iBACDz7D,KAAK0qD,aAAantB,YAClBv9B,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,aAAcC,QAAQ,IAC7D,MACJ,IAAK,kBACDr4B,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,aAAcC,OAAQr4B,KAAK07D,kBAClE,MACJ,IAAK,mBACD17D,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,cAAeC,OAAQr4B,KAAKmxD,mBACnE,MACJ,IAAK,oBACDnxD,KAAK4P,OAAOmiB,IAAmBqG,OAAQ,gBAAiBC,OAAQr4B,KAAKoxD,oBACrE,MACJ,IAAK,iBACDpxD,KAAKg5D,sBACLh5D,KAAK4P,OAAO60C,IAA8BrsB,OAAQ,SAAUplC,WAAYonE,EAAQjoD,iBAChF,MACJ,IAAK,iBACDnS,KAAK4P,OAAO60C,IAA8BrsB,OAAQ,SAAUplC,WAAYonE,EAAQ79C,iBAChF,MACJ,IAAK,eACDvc,KAAK4P,OAAO60C,IAA8BrsB,OAAQ,SAClD,MACJ,IAAK,oBACDp4B,KAAK4P,OAAO60C,IAA8BrsB,OAAQ,YAAaplC,WAAYonE,EAAQvnC,oBACnF,MACJ,IAAK,eACD7yB,KAAK4P,OAAO60C,IAA8BrsB,OAAQ,OAAQplC,WAAYonE,EAAQ/jE,eAC9E,MACJ,IAAK,gBACL,IAAK,mBACG2J,KAAKuxB,cACLvxB,KAAK27D,gBAGL37D,KAAK47D,iBAET57D,KAAK4P,OAAO4hB,IAAuBC,KAAM,WAAYoqC,UAAqB,qBAAThhD,IACjE,MACJ,IAAK,aACD,IAAIihD,EAAY97D,KAAKsU,gBAAgBqQ,WACrC,GAAIr1B,OAAO2O,eAAem8D,GAAS2B,UAE/B,IAAK,IADDC,EAAYh8D,KAAKgjB,0BAA0B,GACtCt3B,EAAI,EAAGuwE,EAAQ3sE,OAAOC,KAAK6qE,EAAQxgE,YAAalO,EAAIuwE,EAAMtwE,OAAQD,IACvEsU,KAAKk8D,WAAW7rE,WAAS2rE,EAAWh8D,KAAKpG,WAAWqiE,EAAMvwE,KAAMsU,KAAKpG,WAAWqiE,EAAMvwE,UAGzF,GAAIowE,EAAU18C,UAAW,CAC1B,IAAI+8C,EAAatxE,oBAAkBmV,KAAKpG,eAAcoG,KAAKpG,WAAWnM,QACrEquE,EAAUl9C,WAAapvB,QAAQ,SAAU2wC,GACtCg8B,EAAYrxE,WAAS8zB,MAAMu9C,EAAWh8B,EAAM27B,EAAU1nE,kBAE1D4L,KAAKpG,YACDnM,OAAQ0uE,EAAWhwE,MAAO6T,KAAKpG,WAAWzN,MAC1CiI,WAAY4L,KAAKpG,WAAWxF,YAEhC4L,KAAKsU,gBAAgBkQ,aACrBs3C,EAAUz8C,SAASrf,KAAKpG,iBAGxBoG,KAAKsU,gBAAgBkQ,UAAWM,eAAe,IAC/C9kB,KAAK4P,OAAOiQ,OACP26C,GACDx6D,KAAKy4D,aAAavwC,UAG1B,MACJ,IAAK,eACYkyC,EAAQgC,YAActtE,WAAWiK,gBACtCiH,KAAKvN,SAAU,eACvB,MACJ,IAAK,mBACIuN,KAAK4oD,4BACN5oD,KAAKu4C,UAAU6hB,EAAQ1U,kBAE3B1lD,KAAK4oD,4BAA6B,IAI9Cx5C,EAAK5kB,UAAUuwE,kBAAoB,SAAUtrE,GACzC,IAAI0R,EAAQnB,KACZ,IAAe,IAAXvQ,EAAc,CACd,IAAI4sE,EAAO,WACPl7D,EAAMo3C,UAAU9oD,GAChB0R,EAAM0Q,IAAInE,GAAqB2uD,IAEnCr8D,KAAKyN,GAAGC,GAAqB2uD,EAAMr8D,QAM3CoP,EAAK5kB,UAAU+Q,cAAgB,SAAUsf,EAAMyhD,GAC3CtuC,EAAOxjC,UAAU+Q,cAAcpI,KAAK6M,KAAM6a,EAAMyhD,GAE5CzhD,EAAmB,gBAAK7a,KAAKu8D,cAAgBD,GAC7Ct8D,KAAKu8D,aAAaC,iBAM1BptD,EAAK5kB,UAAUizC,oBAAsB,WAEjC,IAAK,IAAIlmC,EAAK,EAAGklE,KADGvpE,MAAMC,KAAK6M,KAAKvN,QAAQtE,iBAAiB,oBACjBoJ,EAAKklE,EAAa9wE,OAAQ4L,IAAM,CACxE,IAAIrK,EAAMuvE,EAAallE,GACnByI,KAAKoB,cAAiBpB,KAAKuB,eAAiBvB,KAAK1T,cAAcuxC,cAAiB79B,KAAKwB,gBACrFtU,EAAIoF,UAAUc,OAAO,mBAGrBlG,EAAIoF,UAAUoE,IAAI,qBAI9B0Y,EAAK5kB,UAAUkyE,kBAAoB,SAAUnwE,GACzC,IAAK,IAAIb,EAAI,EAAGmB,EAAMN,EAAQZ,OAAQD,EAAImB,EAAKnB,IACvCa,EAAQb,GAAGa,QACXyT,KAAK08D,kBAAkBnwE,EAAQb,GAAGa,SAGlCyT,KAAKpQ,YAAY/D,KAAKU,EAAQb,IAGtCsU,KAAK28D,sBACL38D,KAAK48D,yBAETxtD,EAAK5kB,UAAUmyE,oBAAsB,WAGjC,IAAK,IAFDhgD,EAAO3c,KAAKpQ,YACZzD,EAAQ,EACHT,EAAI,EAAGmB,EAAM8vB,EAAKhxB,OAAQD,EAAImB,EAAKnB,IACpCixB,EAAKjxB,GAAG2lC,WACR1U,EAAK2D,OAAOtgB,KAAK88B,cAAgB3wC,EAAO,EAAGwwB,EAAK2D,OAAO50B,EAAG,GAAG,IAC7DS,MAIZijB,EAAK5kB,UAAUoyE,sBAAwB,WAKnC,IAAK,IAJDjgD,EAAO3c,KAAKpQ,YACZitE,EAAc,EACdC,EAAe,EACfhgC,EAAgB98B,KAAKoxB,mBAChB1lC,EAAI,EAAGA,EAAIixB,EAAKhxB,OAAQD,IACzBixB,EAAKjxB,GAAGutC,aACJvtC,EAAIoxC,GACJngB,EAAK2D,OAAOu8C,EAAa,EAAGlgD,EAAK2D,OAAO50B,EAAG,GAAG,IAC9CmxE,MAGAlgD,EAAK2D,OAAOwc,EAAgBggC,EAAc,EAAGngD,EAAK2D,OAAO50B,EAAG,GAAG,IAC/DoxE,OAKhB1tD,EAAK5kB,UAAUouE,iBAAmB,SAAUj8C,GACxC,IAAK,IAAIjxB,EAAI,EAAGA,EAAIixB,EAAKhxB,OAAQD,IACzBixB,EAAKjxB,GAAGa,QACRyT,KAAK44D,iBAAiBj8C,EAAKjxB,GAAGa,SAEzBowB,EAAKjxB,GAAGutC,YACbj5B,KAAK+7B,wBAQjB3sB,EAAK5kB,UAAU2tB,WAAa,SAAU4kD,GAClC,IAAI57D,EAAQnB,KACRg9D,EAASh9D,KAAK0vD,cAAcjzC,IAAI,SAAUwR,GAAK,OAAOA,EAAI9sB,EAAM7U,cAAcC,QAAQZ,SAAWgW,OAAO,SAAUssB,GAAK,OAAOA,GAAK,IACnIgvC,EAAOD,EAAOrxE,SACbqU,KAAK0mB,4BAA8B77B,oBAAkBmV,KAAKpQ,cAA4C,IAA5BoQ,KAAKpQ,YAAYjE,QAAgBoxE,KAC5G/8D,KAAKpQ,eACLoQ,KAAK08D,kBAAkB18D,KAAKzT,UAIhC,OAFuB,IAAT0wE,EAAaj9D,KAAKpQ,YAC5BoQ,KAAKpQ,YAAYsD,MAAM8pE,EAAO,GAAIA,EAAOC,EAAO,GAAK,IAM7D7tD,EAAK5kB,UAAUsuC,mCAAqC,SAAUokC,EAAernE,GACzE,IAAK,IAAInK,EAAI,EAAGA,EAAImK,EAAIlK,OAAQD,IAAK,CACjC,IAAIyxE,EAAmBtnE,EAAInK,GAC3B,GAAIyxE,EAAiBzyE,QAAUwyE,GAAiBC,EAAiBjtE,aAAegtE,EAAe,CAC3Fl9D,KAAKo9D,cAAgBD,EACrB,MAEKA,EAAiB5wE,SACtByT,KAAK84B,mCAAmCokC,EAAeC,EAAiB5wE,SAGhF,OAAOyT,KAAKo9D,eAKhBhuD,EAAK5kB,UAAUk9B,uBAAyB,WACpC,OAAO1nB,KAAK0vD,eAKhBtgD,EAAK5kB,UAAU6kB,SAAW,WACtB,OAAOrP,KAAKvG,OAKhB2V,EAAK5kB,UAAU6yE,mBAAqB,WAChC,OAAOr9D,KAAKmyD,eAKhB/iD,EAAK5kB,UAAU8yE,uBAAyB,SAAU/tC,GAC9CvvB,KAAK0vD,cAAgBngC,GAMzBngB,EAAK5kB,UAAUm9B,kBAAoB,WAE/B,IAAK,IADDhL,KACKplB,EAAK,EAAGiG,EAAKwC,KAAKpQ,YAAa2H,EAAKiG,EAAG7R,OAAQ4L,IAAM,CAC1D,IAAI1B,EAAM2H,EAAGjG,GACT1B,EAAIrF,SACJmsB,EAAK9wB,KAAKgK,GAGlB,OAAO8mB,GAMXvN,EAAK5kB,UAAUwoC,iBAAmB,WAC9B,OAAOhzB,KAAK0qD,aAAav5B,YAO7B/hB,EAAK5kB,UAAU+yE,qBAAuB,SAAU9qE,GAC5CuN,KAAK0qD,aAAar4B,SAAS5/B,IAM/B2c,EAAK5kB,UAAU6lB,gBAAkB,WAC7B,OAAOrQ,KAAKw9D,cAAc7qC,YAO9BvjB,EAAK5kB,UAAUizE,oBAAsB,SAAUhrE,GAC3CuN,KAAKw9D,cAAc9qC,SAASjgC,IAMhC2c,EAAK5kB,UAAU0sC,WAAa,WACxB,OAAOl3B,KAAKw9D,cAAcrsC,YAO9B/hB,EAAK5kB,UAAUkzE,eAAiB,SAAUjrE,GACtCuN,KAAKw9D,cAAcnrC,SAAS5/B,IAMhC2c,EAAK5kB,UAAUgrC,eAAiB,WAC5B,OAAOx1B,KAAK0qD,aAAa/3B,YAO7BvjB,EAAK5kB,UAAUmzE,mBAAqB,SAAUlrE,GAC1CuN,KAAK0qD,aAAah4B,SAASjgC,IAM/B2c,EAAK5kB,UAAUqhE,iBAAmB,WAI9B,OAHIhhE,oBAAkBmV,KAAK49D,iBACvB59D,KAAK49D,cAAgB59D,KAAKvN,QAAQorE,uBAAuB,gBAAgB,IAEtE79D,KAAK49D,eAMhBxuD,EAAK5kB,UAAUszE,sBAAwB,WAInC,OAHIjzE,oBAAkBmV,KAAK49D,iBACvB59D,KAAK49D,cAAgB59D,KAAKvN,QAAQorE,uBAAuB,gBAAgB,IAEtE79D,KAAK49D,cAAc5qD,WAAWA,YAMzC5D,EAAK5kB,UAAUuzE,SAAW,WACtB,OAAO/9D,KAAKg+D,WAOhB5uD,EAAK5kB,UAAUyzE,aAAe,SAAUxrE,GACpCuN,KAAKg+D,UAAYvrE,GAOrB2c,EAAK5kB,UAAUytC,cAAgB,SAAUxoC,GACrC,OAAOuQ,KAAKw9D,cAAcvlC,cAAcxoC,IAO5C2f,EAAK5kB,UAAU2tC,qBAAuB,SAAU1oC,GAC5C,OAAOuQ,KAAKw9D,cAAcrlC,qBAAqB1oC,IAMnD2f,EAAK5kB,UAAUurC,QAAU,WACrB,OAAO/1B,KAAKw9D,cAAcvnC,kBAO9B7mB,EAAK5kB,UAAU0zE,WAAa,SAAU5zE,GAClC,IAAIoR,EAAMpR,EACNgN,GAAShN,OAAQA,GACrB,IAAKO,oBAAkBP,IAAWO,oBAAkBmH,EAAa0J,EAAK,wBAC/D7Q,oBAAkBmH,EAAa0J,EAAK,0BAA4BsE,KAAKuoB,OAAQ,CAChF,IAAInvB,EAAOqgC,UAAQ/9B,EAAK,cACxB,IAAKtC,EACD,OAAO9B,EAEX,IAAIm4C,EAAYzQ,SAAS5lC,EAAKsY,aAAa,iBAAkB,IAC7D,IAAK7mB,oBAAkBuO,KAAUymC,MAAM4P,GAAY,CAC/C,IAAI0uB,EAAQ1kC,UAAQrgC,EAAM,UACtBikC,EAAW2B,SAASm/B,EAAMzsD,aAAa,iBAAkB,IACzD/V,EAAUqE,KAAKoxB,mBACfiL,IAAY1gC,GAAU8zC,GAAa9zC,EAGnCyiE,GAFQ/hC,EACRr8B,KAAKw9D,cAAcxnC,iBAAmBh2B,KAAKw9D,cAAcznC,WACvCp0B,OAAO,SAAUd,GAAK,OAAOA,EAAEpN,MAAQ0qE,EAAMzsD,aAAa,cAC5EjS,KACA7U,OAAS,EACT0E,OAAOC,KAAK6uE,GAAYzyE,SACxB8T,EAAU2+D,EAAW,GAAGzzE,KACxBC,EAASwzE,EAAW,GAAG/mE,MAAMglC,EAAYoT,EAAY9zC,EAAU8zC,GAAW7kD,QAE9E0M,GAAS8B,KAAMA,EAAMq2C,UAAWA,EAAWviD,IAAKixE,EAAO9gC,SAAUA,EAAU59B,QAASA,EAAS7U,OAAQA,EAAQN,OAAQA,IAG7H,OAAOgN,GAMX8X,EAAK5kB,UAAUwrC,eAAiB,WAC5B,OAAOh2B,KAAKw9D,cAActnC,yBAM9B9mB,EAAK5kB,UAAUosC,YAAc,WACzB,IAAIvP,KAAUn0B,MAAMC,KAAK6M,KAAKqQ,kBAAkBhiB,cAAc,SAASsF,UACvE,GAAIqM,KAAK+yB,WAAY,CACjB,IAAIvC,KAAgBt9B,MAAMC,KAAK6M,KAAKw1B,iBAAiBnnC,cAAc,SAASsF,UAC5E0zB,EAAOrnB,KAAKmgD,eAAe3vB,EAAYnJ,GAG3C,OADernB,KAAKivB,iBAAiB5H,IAMzCjY,EAAK5kB,UAAU21D,eAAiB,SAAU7pB,EAAO+nC,GAC7C,IAAK,IAAI3yE,EAAI,EAAGmB,EAAMwxE,EAAM1yE,OAAQD,EAAImB,EAAKnB,IACzC4qC,EAAMzqC,KAAKwyE,EAAM3yE,IAErB,OAAO4qC,GAEXlnB,EAAK5kB,UAAUykC,iBAAmB,SAAU5H,GAExC,IAAK,IADDi3C,KACK5yE,EAAI,EAAGmB,EAAMw6B,EAAK17B,OAAQD,EAAImB,EAAKnB,IACpC27B,EAAK37B,GAAG4G,UAAUC,SAAS,WAAa80B,EAAK37B,GAAG4G,UAAUC,SAAS,gBACnE+rE,EAAMzyE,KAAKw7B,EAAK37B,IAGxB,OAAO4yE,GAMXlvD,EAAK5kB,UAAU2sC,mBAAqB,WAChC,IAAI9P,KAAUn0B,MAAMC,KAAK6M,KAAKk3B,aAAa7oC,cAAc,qBAAqBA,cAAc,SAASsF,UACrG,GAAIqM,KAAK+yB,WAAY,CACjB,IAAIvC,KAAgBt9B,MAAMC,KAAK6M,KAAKgzB,mBAAmB3kC,cAAc,oBAAoBA,cAAc,SAASsF,UAChH0zB,EAAOrnB,KAAKmgD,eAAe3vB,EAAYnJ,GAG3C,OADernB,KAAKivB,iBAAiB5H,IAUzCjY,EAAK5kB,UAAU+zE,aAAe,SAAU/kE,EAAK9O,EAAO+B,GAChD,IAII+xE,EACA3oE,EACAwyB,EACAklC,EACAkR,EAASz+D,KAAKgjB,0BAA0B,GACxC5pB,EAAO,IAAI+kC,GAAan+B,KAAMA,KAAKpJ,gBACnCgiD,KACA8lB,KACAC,EAAa3+D,KAAKw9D,cAAcznC,UAChC6oC,EAAoB5+D,KAAKw9D,cAAcxnC,iBAc3C,GAbAwoC,EAAWx+D,KAAKm5B,sBAAsBzuC,IAClCsV,KAAK1T,cAAcC,QAAQZ,OAAS,GAAKqU,KAAK1C,WAAa0C,KAAKypB,kBAChE+0C,GAAsB,GAE1B3oE,EAAMmK,KAAKf,iBAAiBvU,GAC5BkuD,EAAc+lB,EAAWh9D,OAAO,SAAUd,GACtC,OAAOxQ,WAASouE,EAAQ59D,EAAElW,QAAU6O,IACrC,GACHklE,EAAqBE,EAAkBj9D,OAAO,SAAUd,GACpD,OAAOxQ,WAASouE,EAAQ59D,EAAElW,QAAU6O,IACrC,GACH6uB,EAAMx9B,oBAAkB+tD,GAAsF,KAAvE54C,KAAKvN,QAAQpE,cAAc,aAAeuqD,EAAkB,IAAI,KACvG2U,EAAO1iE,oBAAkB6zE,GAAoG,KAA9E1+D,KAAKvN,QAAQpE,cAAc,aAAeqwE,EAAyB,IAAI,MACjH7zE,oBAAkBw9B,GAAvB,CACIpvB,WAASvO,EAAO+B,EAAOmsD,EAAmB,MAC1C,IAAIlzB,EAAM76B,oBAAkBw9B,EAAGzW,WAAW4sD,IACZjR,EAAI37C,WAAW4sD,EAAWx+D,KAAK88B,eAAzDzU,EAAGzW,WAAW4sD,GAClB,IAAK3zE,oBAAkB66B,GAAK,CACxB,IAAIm5C,EAAOjmB,EAAiB,MAAE4lB,GAC1BnkB,OAAO,EACPr6C,KAAK88B,gBACLud,EAAOqkB,EAAwB,MAAEF,EAAWx+D,KAAK88B,gBAErD1jC,EAAK+lC,UAAUzZ,EAAK76B,oBAAkBg0E,GAAexkB,EAAPwkB,EAAajmB,EAAmB,MAAKnpD,MAAOmpD,EAAkB,QACxG54C,KAAK5L,WAAWzI,OAAS,IACzBqU,KAAK4P,OAAOkvD,OACR9+D,KAAK1T,cAAcC,QAAQZ,OAAS,GACpCqU,KAAK4P,OAAOmvD,QAIfl0E,oBAAkB6zE,IAAwB7zE,oBAAkB6zE,EAA4B,WACzFA,EAA4B,QAAEh0E,GAAS+B,GAG3CuT,KAAKmQ,QAAQ6uD,IACT5lE,KAAMssB,EAAI96B,OAAQiL,EAAKlL,KAAMiuD,EAAmB,UAchExpC,EAAK5kB,UAAU0xE,WAAa,SAAU1iE,EAAKiG,GACvC,IAGIm5C,EADA+lB,EAAa3+D,KAAKw9D,cAAcznC,UAEhC0oC,EAASz+D,KAAKgjB,0BAA0B,GACxCsY,EAAc,IAAIzT,GAAY7nB,KAAKpJ,eAAgB,KAAMoJ,MACzDA,KAAK1T,cAAcC,QAAQZ,OAAS,GAAKqU,KAAK5L,WAAWzI,OAAS,IAClEgzE,EAAaA,EAAWh9D,OAAO,SAAUzU,GAAO,OAAOA,EAAItB,aAE/DgtD,EAAc+lB,EAAWh9D,OAAO,SAAUd,GACtC,OAAOxQ,WAASouE,EAAQ59D,EAAElW,QAAU6O,IACrC,IACE3O,oBAAkB+tD,IAAgB54C,KAAKvN,QAAQtE,iBAAiB,aAAeyqD,EAAkB,IAAI,KAAKjtD,SAC3GitD,EAAYz1B,QAAU1jB,EACtBzG,EAAmB4/C,EAAa54C,KAAKhB,uBAAwB45C,EAAYz1B,SACzEmY,EAAYpT,QAAQ0wB,EAAa54C,KAAKmY,cAAc,GAChDnY,KAAK5L,WAAWzI,OAAS,IACzBqU,KAAK4P,OAAOkvD,OACR9+D,KAAK1T,cAAcC,QAAQZ,OAAS,GACpCqU,KAAK4P,OAAOmvD,UAc5B3vD,EAAK5kB,UAAU6yD,iBAAmB,SAAUhgB,EAAU9V,GAClD,OAAOvnB,KAAK42B,cAAcyG,IAAar9B,KAAK42B,cAAcyG,GAAUlvC,iBAAiB,cAAco5B,IAQvGnY,EAAK5kB,UAAUwyD,wBAA0B,SAAU3f,EAAU9V,GACzD,OAAOvnB,KAAKm3B,qBAAqBkG,IAC7Br9B,KAAKm3B,qBAAqBkG,GAAUlvC,iBAAiB,cAAco5B,EAAcvnB,KAAKoxB,qBAO9FhiB,EAAK5kB,UAAU6jE,uBAAyB,SAAU5+D,GAC9C,OAAOuQ,KAAKw1B,iBAAiBrnC,iBAAiB,iBAAiBsB,IAKnE2f,EAAK5kB,UAAU0uD,oBAAsB,SAAUzlD,GAC3C,IAAI4zB,EAAOrnB,KAAKw9D,cAAcznC,UAC1B7oC,EAAM8S,KAAK+0B,UAAU1N,EAAM5zB,GAC/B,OAAIuM,KAAKoxB,qBACAlkC,EACDA,EAAM8S,KAAK+0B,UAAU/0B,KAAKw9D,cAAcxnC,iBAAkBviC,GAI3DvG,GAEXkiB,EAAK5kB,UAAUuqC,UAAY,SAAU1N,EAAM5zB,GACvC,IAAK,IAAI8D,EAAK,EAAGqF,EAASyqB,EAAM9vB,EAAKqF,EAAOjR,OAAQ4L,IAAM,CACtD,IAAIrK,EAAM0P,EAAOrF,GACjB,GAAIrK,EAAIuG,MAAQA,EACZ,OAAOvG,EAGf,OAAO,MAKXkiB,EAAK5kB,UAAUqS,cAAgB,WAC3B,OAAOmD,KAAKw9D,cAAcznC,WAK9B3mB,EAAK5kB,UAAU60D,qBAAuB,WAClC,OAAOr/C,KAAKw9D,cAAcxnC,kBAO9B5mB,EAAK5kB,UAAUy0E,uBAAyB,SAAUv0E,GAC9C,OAAOsV,KAAKk/D,qBAAqBl/D,KAAKf,iBAAiBvU,GAAO+I,MAOlE2b,EAAK5kB,UAAU00E,qBAAuB,SAAUzrE,GAC5C,OAAOuM,KAAKgzB,mBAAmB3kC,cAAc,iBAAmBoF,EAAM,KAAK1C,eAK/Eqe,EAAK5kB,UAAUmlD,iBAAmB,SAAUlgD,GACxC,IAAI7E,EAKJ,OAJAoV,KAAKmY,aAAa5d,KAAK,SAAU1E,EAAKnK,GAElC,OADAd,EAASiL,EACFnK,IAAM+D,IAEV7E,GAOXwkB,EAAK5kB,UAAUyU,iBAAmB,SAAUvU,GACxC,OAAO4C,EAAqB0S,KAAKmY,aAAc,SAAUyP,EAAMn4B,GAC3D,GAAIm4B,EAAKl9B,QAAUA,EACf,OAAOk9B,IAGZ,IAOPxY,EAAK5kB,UAAU2uC,sBAAwB,SAAUzuC,GAE7C,IAAK,IADDiyB,EAAO3c,KAAKmY,aACPzsB,EAAI,EAAGA,EAAIixB,EAAKhxB,OAAQD,IAC7B,GAAIixB,EAAKjxB,GAAGhB,QAAUA,EAClB,OAAOgB,EAGf,OAAQ,GAOZ0jB,EAAK5kB,UAAUwuC,eAAiB,SAAUvlC,GACtC,OAAOnG,EAAqB0S,KAAKmY,aAAaja,OAAO8B,KAAKm/D,kBAAkBn/D,KAAKzT,UAAW,SAAUq7B,EAAMn4B,GACxG,GAAIm4B,EAAKn0B,MAAQA,EACb,OAAOm0B,IAGZ,IAKPxY,EAAK5kB,UAAU20E,kBAAoB,SAAU5yE,EAAS6wE,QAC5B,IAAlBA,IAA4BA,MAChC,IAAK,IAAI7lE,EAAK,EAAG8qB,EAAY91B,EAASgL,EAAK8qB,EAAU12B,OAAQ4L,IAAM,CAC/D,IAAI3M,EAASy3B,EAAU9qB,GACnB3M,EAAO2B,UACP6wE,EAAcvxE,KAAKjB,GACnBoV,KAAKm/D,kBAAkBv0E,EAAO2B,QAAS6wE,IAG/C,OAAOA,GAOXhuD,EAAK5kB,UAAUyyC,oBAAsB,SAAUxpC,GAC3C,IAAIhE,EAAQnC,EAAqB0S,KAAKmY,aAAc,SAAUyP,EAAMn4B,GAChE,GAAIm4B,EAAKn0B,MAAQA,EACb,OAAOhE,IAGZ,GACH,OAAQ5E,oBAAkB4E,IAAkB,EAATA,GAOvC2f,EAAK5kB,UAAU40E,oBAAsB,SAAU10E,GAC3C,OAAO4C,EAAqB0S,KAAKmY,aAAc,SAAUyP,EAAMn4B,GAC3D,GAAIm4B,EAAKl9B,QAAUA,EACf,OAAOk9B,EAAKn0B,MAGjB,IAQP2b,EAAK5kB,UAAUusC,yBAA2B,SAAUtjC,GAChD,IAAIhE,EAAQuQ,KAAKi9B,oBAAoBxpC,GAcrC,OAbIuM,KAAKuB,gBACL9R,GAASuQ,KAAK1T,cAAcC,QAAQZ,QAEpCqU,KAAKo3B,YACL3nC,IAEAuQ,KAAKikD,qBAAuBjkD,KAAKqB,eACjC5R,IAMGA,GAMX2f,EAAK5kB,UAAU60E,oBAAsB,WAGjC,IAAK,IADDz0E,EADA00E,KAEK5zE,EAAI,EAAGmB,EAAMmT,KAAKmY,aAAaxsB,OAAQD,EAAImB,EAAKnB,KACrDd,EAASoV,KAAKmY,aAAazsB,IAChB8E,SACP8uE,EAAYzzE,KAAKjB,EAAOF,OAGhC,OAAO40E,GAOXlwD,EAAK5kB,UAAUyqC,eAAiB,WAC5B,OAAOj1B,KAAK26D,eAOhBvrD,EAAK5kB,UAAU+0E,kBAAoB,WAC/B,OAAOv/D,KAAK46D,kBAOhBxrD,EAAK5kB,UAAUyX,gBAAkB,WAC7B,OAAOjC,KAAKkC,gBAMhBkN,EAAK5kB,UAAUw4B,wBAA0B,WAErC,IAAK,IADDzzB,KACKw1C,EAAI,EAAGA,EAAI/kC,KAAKpQ,YAAYjE,OAAQo5C,IACrC/kC,KAAKpQ,YAAYm1C,GAAG/uC,cACpBzG,EAAK1D,KAAKmU,KAAKpQ,YAAYm1C,GAAGr6C,OAGtC,OAAO6E,GAKX6f,EAAK5kB,UAAU09B,QAAU,WACrBloB,KAAK0qD,aAAantB,YAClBv9B,KAAKg5D,sBACLh5D,KAAKy4D,aAAavwC,WAKtB9Y,EAAK5kB,UAAUu6D,cAAgB,WAC3B/kD,KAAK0qD,aAAantB,aAMtBnuB,EAAK5kB,UAAUg1E,gBAAkB,WAC7B,OAAOx/D,KAAKwtD,gBAAkBxtD,KAAKwtD,gBAAgBrX,oBAMvD/mC,EAAK5kB,UAAUo+B,sBAAwB,WACnC,OAAO5oB,KAAKwtD,gBAAkBxtD,KAAKwtD,gBAAgBvX,uBAMvD7mC,EAAK5kB,UAAUukE,0BAA4B,WACvC,OAAO/uD,KAAKwtD,gBAAkBxtD,KAAKwtD,gBAAgBtX,2BAOvD9mC,EAAK5kB,UAAU25C,mBAAqB,WAChC,OAAOnkC,KAAKwtD,gBAAkBxtD,KAAKwtD,gBAAgBrpB,yBAMvD/0B,EAAK5kB,UAAU8pB,cAAgB,WAC3B,OAAOtU,KAAKy4D,aAAa9tE,MAQ7BykB,EAAK5kB,UAAUi1E,YAAc,SAAUlwE,EAAM65D,GACzCA,EAASA,GAAkB,aAC3BppD,KAAKw5D,UAAU/hD,KAAKloB,EAAM65D,IAQ9Bh6C,EAAK5kB,UAAUk1E,YAAc,SAAUnwE,EAAMg6D,GACzCA,EAASA,GAAkB,aAC3BvpD,KAAKw5D,UAAUlQ,KAAK/5D,EAAMg6D,IAK9Bn6C,EAAK5kB,UAAU4mC,iBAAmB,WAC9B,OAAOpxB,KAAK88B,cAAgB98B,KAAK2/D,eAAe3/D,KAAKzT,QAAS,IAKlE6iB,EAAK5kB,UAAUo1E,wBAA0B,WACrC,OAAO5/D,KAAK6/D,+BAAiC7/D,KAAK8/D,sBAAsB9/D,KAAKzT,QAAS,IAE1F6iB,EAAK5kB,UAAUq1E,6BAA+B,WAG1C,IAAK,IAFDE,EAAuB,EACvBlqE,EAAMmK,KAAKzT,QACNb,EAAI,EAAGA,EAAIsU,KAAK88B,cAAepxC,IAChCmK,EAAInK,GAAG8E,SACPuvE,IAGR,OAAOA,GAEX3wD,EAAK5kB,UAAUs1E,sBAAwB,SAAUnjD,EAAMe,GACnD,IAAK,IAAIhyB,EAAI,EAAGmB,EAAM8vB,EAAKhxB,OAAQD,EAAImB,EAAKnB,IACpCixB,EAAKjxB,GAAGa,QACRmxB,EAAM1d,KAAK8/D,sBAAsBnjD,EAAKjxB,GAAGa,QAASmxB,GAG9Cf,EAAKjxB,GAAG2lC,UAAY1U,EAAKjxB,GAAG8E,SAC5BktB,IAIZ,OAAOA,GAEXtO,EAAK5kB,UAAUm1E,eAAiB,SAAUhjD,EAAMe,GAC5C,IAAK,IAAIhyB,EAAI,EAAGmB,EAAM8vB,EAAKhxB,OAAQD,EAAImB,EAAKnB,IACpCixB,EAAKjxB,GAAGa,QACRmxB,EAAM1d,KAAK2/D,eAAehjD,EAAKjxB,GAAGa,QAASmxB,GAGvCf,EAAKjxB,GAAG2lC,UACR3T,IAIZ,OAAOA,GAOXtO,EAAK5kB,UAAUw1E,SAAW,SAAUC,GAC5BjgE,KAAKwkC,aACLxkC,KAAKwkC,YAAYw7B,SAASC,IAQlC7wD,EAAK5kB,UAAU01E,sBAAwB,SAAUC,GACzCngE,KAAKwkC,aACLxkC,KAAKwkC,YAAY07B,sBAAsBC,IAU/C/wD,EAAK5kB,UAAU41E,WAAa,SAAU9pD,EAAYrS,EAAWo8D,GACrDrgE,KAAKsgE,YACLtgE,KAAKsgE,WAAWF,WAAW9pD,EAAYrS,EAAWo8D,IAO1DjxD,EAAK5kB,UAAU+1E,aAAe,WACtBvgE,KAAKsgE,YACLtgE,KAAKsgE,WAAWC,gBASxBnxD,EAAK5kB,UAAUg2E,iBAAmB,SAAU91E,GACpCsV,KAAKsgE,YACLtgE,KAAKsgE,WAAWE,iBAAiB91E,IAiBzC0kB,EAAK5kB,UAAUi2E,eAAiB,SAAUC,EAAWC,EAAgBC,EAAapzE,EAAW4M,EAAW+Z,EAAc0sD,EAAmBC,GACjI9gE,KAAKu8D,cACLv8D,KAAKu8D,aAAakE,eAAeC,EAAWC,EAAgBC,EAAapzE,EAAW4M,EAAW+Z,EAAc0sD,EAAmBC,IAOxI1xD,EAAK5kB,UAAUu2E,eAAiB,WACxB/gE,KAAKu8D,cACLv8D,KAAKu8D,aAAawE,kBAU1B3xD,EAAK5kB,UAAUw2E,0BAA4B,SAAUt2E,EAAOu2E,GACpDjhE,KAAKu8D,cACLv8D,KAAKu8D,aAAayE,0BAA0Bt2E,EAAOu2E,IAS3D7xD,EAAK5kB,UAAU+tD,UAAY,SAAU9oD,EAAO+oD,GACpCx4C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgBjV,UAAU9oD,EAAO+oD,IAQ9CppC,EAAK5kB,UAAUkwD,WAAa,SAAUE,GAC9B56C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgB9S,WAAWE,IAOxCxrC,EAAK5kB,UAAUotD,eAAiB,WACxB53C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgB5V,kBAS7BxoC,EAAK5kB,UAAU0yD,WAAa,SAAUzN,EAAW+I,GACzCx4C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgBtQ,WAAWzN,EAAW+I,IASnDppC,EAAK5kB,UAAU+zD,mBAAqB,SAAUn0B,EAAYqwB,GACtDz6C,KAAKwtD,gBAAgBjP,mBAAmBn0B,EAAYqwB,IASxDrrC,EAAK5kB,UAAU8vB,OAAS,SAAUwuC,GAC1B9oD,KAAK04D,cACL14D,KAAK04D,aAAap+C,OAAOwuC,IASjC15C,EAAK5kB,UAAUgkB,MAAQ,WACfxO,KAAKsO,aACLtO,KAAKsO,YAAYE,SASzBY,EAAK5kB,UAAU02E,aAAe,SAAUC,EAAWx2E,GAC3CqV,KAAK83C,YACL93C,KAAK83C,WAAWopB,aAAaC,EAAWx2E,IAQhDykB,EAAK5kB,UAAU42E,UAAY,WACnBphE,KAAK83C,YACL93C,KAAK83C,WAAWspB,aAMxBhyD,EAAK5kB,UAAU+5B,QAAU,WACjBvkB,KAAK83C,YACL93C,KAAK83C,WAAWvzB,WAMxBnV,EAAK5kB,UAAU62E,UAAY,WACnBrhE,KAAK83C,YACL93C,KAAK83C,WAAWupB,aASxBjyD,EAAK5kB,UAAU82E,UAAY,SAAU32E,EAAM8E,GACnCuQ,KAAK83C,YACL93C,KAAK83C,WAAWwpB,UAAU32E,EAAM8E,IAOxC2f,EAAK5kB,UAAU+2E,UAAY,SAAUl5C,GAC7BroB,KAAK83C,YACL93C,KAAK83C,WAAWypB,UAAUl5C,IAQlCjZ,EAAK5kB,UAAUg3E,SAAW,SAAU/xE,EAAO/E,GACnCsV,KAAK83C,YACL93C,KAAK83C,WAAW0pB,SAAS/xE,EAAO/E,IAMxC0kB,EAAK5kB,UAAUi3E,SAAW,WAClBzhE,KAAK83C,YACL93C,KAAK83C,WAAW2pB,YASxBryD,EAAK5kB,UAAUu4D,WAAa,SAAU1lB,EAAU3yC,EAAO+B,GAC/CuT,KAAK83C,YACL93C,KAAK83C,WAAWiL,WAAW1lB,EAAU3yC,EAAO+B,IAQpD2iB,EAAK5kB,UAAUylD,UAAY,SAAUxgD,EAAO9E,GACpCqV,KAAK83C,YACL93C,KAAK83C,WAAW7H,UAAUxgD,EAAO9E,IAOzCykB,EAAK5kB,UAAU6tD,gBAAkB,WAC7B,OAAIr4C,KAAK83C,WACE93C,KAAK83C,WAAWO,sBAU/BjpC,EAAK5kB,UAAUk3E,mBAAqB,SAAU1yC,EAAO2yC,GAC7C3hE,KAAKkqD,eACLlqD,KAAKkqD,cAAc0X,YAAY5yC,EAAO2yC,IAO9CvyD,EAAK5kB,UAAUkjE,KAAO,SAAUE,GACxB5tD,KAAK6hE,iBACL7hE,KAAK6hE,gBAAgBnU,KAAKE,IAMlCx+C,EAAK5kB,UAAUs3E,kBAAoB,WAC/B,GAAK9hE,KAAKw1B,iBAAiBnnC,cAAc,kBAGnC2R,KAAK1T,cAAcC,QAAQZ,QAAWqU,KAAKo3B,YAAep3B,KAAKwpB,mBACjExpB,KAAKw1B,iBAAiBnnC,cAAc,gBAAgBqjB,aAAa,oBAChE1R,KAAKqQ,kBAFV,CAKA,IAAI0xD,EAAc/hE,KAAKw1B,iBAAiBnnC,cAAc,gBAAgB0C,cAAcW,YAChF44C,KAAep3C,MAAMC,KAAK6M,KAAKw1B,iBAAiBnnC,cAAc,YAAYujB,YAC1E+4B,KAAgBz3C,MAAMC,KAAK6M,KAAKqQ,kBAAkBhiB,cAAc,YAAYujB,YAC5EowD,EAAWD,EAAc,GACzBr2E,EAAI,EAOR,IANIs2E,GAAY,IACZD,EAAe,GAAKC,GAEpBhiE,KAAK0mB,6BACLq7C,EAAc,IAEXr2E,EAAIsU,KAAK1T,cAAcC,QAAQZ,QAClC2+C,EAAU5+C,GAAGwF,MAAMX,MAAQwxE,EAAc,KACzCp3B,EAAWj/C,GAAGwF,MAAMX,MAAQwxE,EAAc,KAC1C/hE,KAAK4P,OAAOqyD,IAA6BxyE,MAAO/D,EAAG6E,MAAOwxE,IAC1Dr2E,IAEAsU,KAAKo3B,aACLkT,EAAU5+C,GAAGwF,MAAMX,MAAQwxE,EAAc,KACzCp3B,EAAWj/C,GAAGwF,MAAMX,MAAQwxE,EAAc,KAC1C/hE,KAAK4P,OAAOqyD,IAA6BxyE,MAAO/D,EAAG6E,MAAOwxE,IAC1Dr2E,KAEAsU,KAAKwpB,kBACL8gB,EAAU5+C,GAAGwF,MAAMX,MAAQwxE,EAAc,KACzCp3B,EAAWj/C,GAAGwF,MAAMX,MAAQwxE,EAAc,KAC1C/hE,KAAK4P,OAAOqyD,IAA6BxyE,MAAO/D,EAAG6E,MAAOwxE,KAE9D/hE,KAAKw1B,iBAAiBnnC,cAAc,gBAAgBoJ,aAAa,kBAAmB,UAKxF2X,EAAK5kB,UAAUg/B,cAAgB,WAC3B,OAAOxpB,KAAKikD,sBAAwBjkD,KAAKkiE,gBAAgBC,UAQ7D/yD,EAAK5kB,UAAU43E,eAAiB,SAAUC,EAAWC,GAC7CtiE,KAAKuiE,eACLviE,KAAKuiE,cAAcH,eAAeC,EAAWC,IAUrDlzD,EAAK5kB,UAAUg4E,qBAAuB,SAAUhiD,EAAWD,GACnDvgB,KAAKuiE,eACLviE,KAAKuiE,cAAcC,qBAAqBhiD,EAAWD,IAU3DnR,EAAK5kB,UAAUi4E,2BAA6B,SAAU/B,EAAWngD,GACzDvgB,KAAKuiE,eACLviE,KAAKuiE,cAAcE,2BAA2B/B,EAAWngD,IASjEnR,EAAK5kB,UAAUk1B,YAAc,SAAUgjD,EAAaniD,GAC5CvgB,KAAK2iE,sBACL3iE,KAAK2iE,qBAAqBjjD,YAAYgjD,EAAaniD,IAM3DnR,EAAK5kB,UAAUo4E,kBAAoB,SAAUx3E,EAAGkM,GAC5C0I,KAAK4P,OAAO,oBAAqBxkB,IAKrCgkB,EAAK5kB,UAAUq4E,aAAe,SAAUxqC,GACpC,IAAIoC,EAAcz6B,KAAKw1B,iBACnBM,EAAe91B,KAAKqQ,kBACpBytB,EAAarD,EAAYtsC,iBAAiB,uCAC1Ck5B,EAAOrnB,KAAK+1B,UACZ+sC,EAAWzqC,EAAS,OAAS,GACjCxpC,oBAAkB4rC,EAAYpsC,cAAc,YAAYujB,WAAW,IAAMzgB,QAAW2xE,IACpFj0E,oBAAkBinC,EAAaznC,cAAc,YAAYujB,WAAW,IAAMzgB,QAAW2xE,IACrF,IAAK,IAAIp3E,EAAI,EAAGA,EAAIsU,KAAK+1B,UAAUpqC,OAAQD,IAAK,CAC5C,IAAIgQ,EAAM2rB,EAAK37B,GAAGqlB,kBAClBsnB,EAASvpC,YAAU4M,GAAM,UAAY3C,eAAa2C,IAAO,WAE7D,IAAK,IAAIvO,EAAI,EAAGA,EAAIstC,EAAYtsC,iBAAiB,uCAAuCxC,OAAQwB,IAAK,CAC7FuO,EAAMoiC,EAAW3wC,GACrBkrC,EAASvpC,YAAU4M,GAAM,UAAY3C,eAAa2C,IAAO,aA0BjE0T,EAAK5kB,UAAUu4E,eAAiB,SAAUC,GAClChjE,KAAKijE,cACLjjE,KAAKijE,aAAaF,eAAeC,IAMzC5zD,EAAK5kB,UAAU04E,oBAAsB,SAAUvxE,EAAG2B,EAAGhJ,GAC7C0V,KAAKmjE,qBACLnjE,KAAKmjE,oBAAoBC,oBAAoBzxE,EAAG2B,EAAGhJ,IAG3D8kB,EAAK5kB,UAAUgnE,mBAAqB,WAChCxxD,KAAKpJ,eAAemyC,SAAS,eAAgB/oC,KAAKg6B,aAAe,IAAImP,GAAmBnpC,OACxFA,KAAKpJ,eAAemyC,SAAS,sBAAuB,IAAIL,IACxD1oC,KAAKpJ,eAAemyC,SAAS,kBAAmB,IAAIC,IACpDhpC,KAAKpJ,eAAemyC,SAAS,eAAgB/oC,KAAKgV,UAAY,IAAIquD,OAAKrjE,KAAKgQ,gBAAiBhQ,KAAKmyD,cAAenyD,KAAKyS,SACtHzS,KAAKpJ,eAAemyC,SAAS,iBAAkB/oC,KAAKsjE,sBAAwB,IAAIxjE,GAAeE,KAAKyS,SACpGzS,KAAKpJ,eAAemyC,SAAS,kBAAmB/oC,KAAKw5D,UAAY,IAAIrQ,GAASnpD,OAC9EA,KAAKpJ,eAAemyC,SAAS,cAAe/oC,KAAKixB,YAAc,IAAIiP,IACnElgC,KAAKpJ,eAAemyC,SAAS,QAAS/oC,KAAKk6D,YAAc,IAAItuB,GAAc5rC,QAE/EoP,EAAK5kB,UAAUquE,aAAe,WAC1B,IAGI0K,EACAp2E,EAJAgU,EAAQnB,KACRwjE,EAAQxjE,KAAK1T,cAAcC,QAC3Bk3E,EAAQzjE,KAAKuV,aAAahpB,QAG9B,GAAIyT,KAAKuB,cAgCL,IAAK,IA/BDzD,EAAU,SAAUpS,EAAGmB,GACvBM,EAAI,EACJ,IAAK,IAAIu2E,EAAOD,EAAM93E,OAAQwB,EAAIu2E,EAAMv2E,IACpC,GAAIs2E,EAAMt2E,GAAGzC,QAAU84E,EAAM93E,GAAI,CAC7B63E,GAAO,EACP,MAcR,GAXKA,EAIGp6C,EAAO/nB,aACP+nB,EAAO7T,cAAczpB,KAAK43E,EAAMt2E,GAAGzC,OAGnC+4E,EAAMt2E,GAAG8W,UAAY,YAPzBw/D,EAAM53E,MAAOnB,MAAO84E,EAAM93E,GAAIuY,UAAW,eAUxCklB,EAAO78B,cAAcq3E,kBAAmB,CACzC,IAAI/4E,EAASu+B,EAAOzC,2BAChByC,EAAO58B,QAAQoV,OAAO,SAAU3R,GAAK,OAAOA,EAAEtF,QAAU84E,EAAM93E,KAAO,GAAKy9B,EAAOlqB,iBAAiBukE,EAAM93E,IACxGd,EACAA,EAAO4F,SAAU,EAGjB24B,EAAOpZ,IAAI,kBAAoByR,WAAY,QAASlL,WAAYktD,EAAM93E,OAI9Ey9B,EAASnpB,KACJtU,EAAI,EAAGmB,EAAM22E,EAAM73E,OAAQD,EAAImB,EAAKnB,IACzCoS,EAAQpS,GAWhB,GARK83E,EAAM73E,QACP83E,EAAMj0E,QAAQ,SAAUqG,GACpBsL,EAAMmU,cAAczpB,KAAKgK,EAAInL,SAGrCsV,KAAK26D,cAAgB3sE,EAAiBgS,KAAKgoB,aAC3ChoB,KAAK46D,iBAAmB5sE,EAAiBgS,KAAKypB,gBAC9CzpB,KAAKkC,eAAiBlU,EAAiBgS,KAAK3J,aAAapI,WACpDpD,oBAAkBmV,KAAK4jE,eAAgB,CACxC,IAAIn3E,EAAQ5B,oBAAkBmV,KAAK4jE,cAAcC,qBAAuB,YACpE7jE,KAAK4jE,cAAcC,oBACvB7jE,KAAKvG,MAAMQ,MAAM+F,KAAK8jE,YAAa,QAASr3E,GAAO,GAEvDuT,KAAK+jE,qBAET30D,EAAK5kB,UAAUu5E,kBAAoB,WAC3B/jE,KAAKqxD,oBAAoBrxD,KAAKmY,eAC9BnY,KAAK4P,OAAOo0D,GAA6BhkE,KAAKhB,yBAGtDoQ,EAAK5kB,UAAUsuE,WAAa,WACxB94D,KAAKg7D,YACDh7D,KAAKo8D,aACLp8D,KAAKvN,QAAQH,UAAUoE,IAAI,eAE3BmhB,UAAQC,UACR9X,KAAKvN,QAAQH,UAAUoE,IAAI,YAE3BsJ,KAAKhL,WACLgL,KAAKvN,QAAQH,UAAUoE,IAAI,qBAE/BpE,YAAU0N,KAAKvN,SAAU,eAAgB,iBACzC,IAAIwxE,EAAkBjkE,KAAKpJ,eAAeE,WAAW,mBACrDkJ,KAAK0qD,aAAeuZ,EAAgBxgC,YAAYzxB,aAAWkpB,QAC3Dl7B,KAAKw9D,cAAgByG,EAAgBxgC,YAAYzxB,aAAW2xB,SAC5D3jC,KAAKsO,YAAc,IAAI7Q,GAAMuC,KAAMA,KAAKoN,cACxCpN,KAAK6hE,gBAAkB,IAAItV,GAAUvsD,MACrCA,KAAKy4D,aAAajzC,SAClBxlB,KAAK25D,mBACL35D,KAAKkkE,yBACLlkE,KAAKg6B,aAAawD,oBAClBx9B,KAAKy7D,kBACLz7D,KAAK27D,gBACL37D,KAAKmkE,gBACLnkE,KAAKm6D,sBAET/qD,EAAK5kB,UAAU+c,UAAY,WACvBvH,KAAKoN,aAAa02B,WAClB9jC,KAAKoN,aAAa22B,YACE,SAAhB/jC,KAAK1K,QACL0K,KAAKoN,aAAa42B,cAG1B50B,EAAK5kB,UAAUwwE,UAAY,WACnBh7D,KAAK7H,UACL6H,KAAKvN,QAAQH,UAAUoE,IAAI,SAG3BsJ,KAAKvN,QAAQH,UAAUc,OAAO,UAGtCgc,EAAK5kB,UAAU05E,uBAAyB,WACpC,IAAIzyE,EAAQuO,KAAKvL,cAAc,OAAS9D,UAAW,cAAeuE,OAAQ,kBACtEyhB,EAAU3W,KAAKvL,cAAc,OAAS9D,UAAW,YAAaoiB,OAASo6B,SAAU,QACrFi3B,UAAQztD,EAAS3W,KAAKvL,cAAc,OAAS9D,UAAW,qBAAuBc,GAC/EklB,EAAQ/iB,YAAYoM,KAAKvL,cAAc,SACvC2vE,UAAQztD,EAAS3W,KAAKvL,cAAc,OAAS9D,UAAW,uBAAyBc,GACjFuO,KAAKvN,QAAQmB,YAAYnC,IAE7B2d,EAAK5kB,UAAUixE,gBAAkB,WAE7B,OADAnpE,YAAU0N,KAAKvN,YAAc,kBAAmB,oBAAqB,cAAe,gBAC5EuN,KAAKqkE,WACT,IAAK,aACDrkE,KAAKvN,QAAQH,UAAUoE,IAAI,qBAC3B,MACJ,IAAK,WACDsJ,KAAKvN,QAAQH,UAAUoE,IAAI,mBAC3B,MACJ,IAAK,OACDsJ,KAAKvN,QAAQH,UAAUoE,IAAI,eAC3B,MACJ,IAAK,OACDsJ,KAAKvN,QAAQH,UAAUoE,IAAI,eAGnCsJ,KAAKw7D,qBAETpsD,EAAK5kB,UAAUgxE,kBAAoB,WAC3Bx7D,KAAKqB,eACgB,aAAnBrB,KAAKqkE,WAA+C,SAAnBrkE,KAAKqkE,UACxCrkE,KAAKvN,QAAQH,UAAUoE,IAAI,kBAG3BsJ,KAAKvN,QAAQH,UAAUc,OAAO,mBAQtCgc,EAAK5kB,UAAUmxE,cAAgB,WAC3B,GAAI37D,KAAKuxB,cAAe,CACpB,IAAIuM,KAAgB5qC,MAAMC,KAAK6M,KAAKvN,QAAQtE,iBAAiB,oBAC7D,OAAQ6R,KAAK29B,iBAAiBC,UAC1B,IAAK,SACDpnC,EAAKwJ,KAAKvN,SAAS,GACnB+D,EAAKwJ,KAAKk3B,cAAc,GACxB1gC,EAAKsnC,GAAY,GACjB,MACJ,IAAK,UACDtnC,EAAKwJ,KAAKk3B,cAAc,GACxB1gC,EAAKwJ,KAAKvN,SAAS,GACnB+D,EAAKsnC,GAAY,GACjB,MACJ,QACItnC,EAAKwJ,KAAKvN,SAAS,GACnB+D,EAAKwJ,KAAKk3B,cAAc,GACxB1gC,EAAKsnC,GAAY,MASjC1uB,EAAK5kB,UAAUoxE,eAAiB,WAC5BplE,EAAKwJ,KAAKvN,SAAS,GAEnB+D,KADoBtD,MAAMC,KAAK6M,KAAKvN,QAAQtE,iBAAiB,qBAC5C,GACjBqI,EAAKwJ,KAAKk3B,cAAc,IAO5B9nB,EAAK5kB,UAAU25E,cAAgB,WAC3BnkE,KAAKg6D,WAAa,IAAIsK,WAAUC,QAAS,SAAU5tD,QAAS,IAAM3W,KAAKvN,UAE3E2c,EAAK5kB,UAAUg6E,iBAAmB,SAAU/xE,GACxC,IAAIlC,EACAkqC,EAAcz6B,KAAKw1B,iBAInBivC,GAHezkE,KAAKqQ,kBAGXrQ,KAAK26B,YAAYF,EAFX,eAEsC,WACrDiqC,EAAS1kE,KAAK26B,YAAYF,EAHX,eAGsC,WAErDxlC,EAAQwlC,EAAYloC,SAASE,GAAWgyE,EAASC,EACjDhpE,EAAM++B,EAAYloC,SAASE,GAAW,KAAO,KAMjD,OALAwC,EAAM5G,cAAcqN,GAAK/K,UAAY8B,EAAQ9B,UAC7CsE,EAAM5G,cAAcqN,GAAKpN,UAAYmE,EAAQnE,UAC7CiC,EAAQ0E,EAAM5G,cAAcqN,GAAK1K,wBAAwBT,MACzDrC,SAASyG,KAAKE,YAAY4vE,GAC1Bv2E,SAASyG,KAAKE,YAAY6vE,GACtBn0E,EAAQkC,EAAQzB,wBAAwBT,OAKhD6e,EAAK5kB,UAAU41D,iBAAmB,SAAUh1D,GACxC,GAAI4U,KAAK2kE,oBAAqB,CAC1B,IAAIlyE,EAAUT,EAAa5G,EAAEd,OAAQ,qBACjC0V,KAAK4kE,cAAgBnyE,GAAsB,aAAXrH,EAAE2I,MAClCiM,KAAKg6D,WAAWpjD,QAEpB,IAAI6B,EAAUrtB,EAAEd,OAAOmuB,QAEvB,GAAIhmB,GAAsB,aAAXrH,EAAE2I,QAAyB8jB,UAAQC,WAA4C,KAD7E,IAAK,SAAU,SACwCpoB,QAAQ+oB,IAAkB,CAC9F,GAAIhmB,EAAQif,aAAa,oBACrB,OAEA1R,KAAKwkE,iBAAiB/xE,KAClBA,EAAQorE,uBAAuB,gBAAgBlyE,OAC/CqU,KAAKg6D,WAAWrjD,QAAUlkB,EAAQorE,uBAAuB,gBAAgB,GAAG9kC,UAG5E/4B,KAAKg6D,WAAWrjD,QAAUlkB,EAAQsmC,UAEtC/4B,KAAK4kE,YAAcnyE,EACnBuN,KAAKg6D,WAAWrrD,KAAKlc,OAKrC2c,EAAK5kB,UAAUm6E,kBAAoB,WAE/B,IAAK,IADDhoD,EAAO3c,KAAKmY,aACPzsB,EAAI,EAAGA,EAAIixB,EAAKhxB,OAAQD,IAC7B,GAAyB,wBAArBixB,EAAKjxB,GAAGs0C,SACR,OAAO,EAGf,OAAO,GAEX5wB,EAAK5kB,UAAUq6E,cAAgB,WACvB7kE,KAAK2kE,qBACL3kE,KAAKg6D,WAAWpjD,SAOxBxH,EAAK5kB,UAAUmwC,YAAc,SAAU1lC,EAAO6vE,EAAK/wE,GAC/C,IAAIgxE,EAAa/kE,KAAKvL,cAAc,OACpCswE,EAAWp0E,UAAYqP,KAAKvN,QAAQ9B,UACpCo0E,EAAW7zE,MAAMwD,QAAU,4DAC3B,IAAIswE,EAAWhlE,KAAKvL,cAAc,OAClCuwE,EAASr0E,UAAYm0E,EACrB,IAAIG,EAAUjlE,KAAKvL,cAAc,SACjCwwE,EAAQt0E,UAAYsE,EAAMtE,UAC1Bs0E,EAAQ/zE,MAAMwD,QAAU,iCACxB,IAAIgH,EAAgB,WAAT3H,EAAqB,KAAO,KACnCmxE,EAAOllE,KAAKvL,cAAc,MAC1B0wE,EAAOnlE,KAAKvL,cAAciH,GAM9B,OALAwpE,EAAKtxE,YAAYuxE,GACjBF,EAAQrxE,YAAYsxE,GACpBF,EAASpxE,YAAYqxE,GACrBF,EAAWnxE,YAAYoxE,GACvB92E,SAASyG,KAAKf,YAAYmxE,GACnBA,GAEX31D,EAAK5kB,UAAU46E,aAAe,SAAUh6E,GACnB,QAAbA,EAAEqL,QAAiC,aAAbrL,EAAEqL,QACxBuJ,KAAKg6D,WAAWpjD,SAOxBxH,EAAK5kB,UAAU0oB,WAAa,WACxBC,eAAazc,IAAIsJ,KAAKvN,QAAS,QAASuN,KAAKqlE,kBAAmBrlE,MAChEmT,eAAazc,IAAIsJ,KAAKvN,QAAS,WAAYuN,KAAKqlE,kBAAmBrlE,MACnEmT,eAAazc,IAAIsJ,KAAKvN,QAAS,WAAYuN,KAAKslE,gBAAiBtlE,MACjEmT,eAAazc,IAAIsJ,KAAKvN,QAAS,WAAYuN,KAAKulE,gBAAiBvlE,MACjEmT,eAAazc,IAAIsJ,KAAKvN,QAAS,UAAWuN,KAAKwlE,gBAAiBxlE,MAC5DA,KAAKylE,gBACLzlE,KAAKvN,QAAQ06C,UAAsC,IAA3BntC,KAAKvN,QAAQ06C,SAAkB,EAAIntC,KAAKvN,QAAQ06C,UAE5EntC,KAAKi6D,eAAiB,IAAIyL,iBAAe1lE,KAAKvN,SAC1CkzE,UAAW3lE,KAAK4lE,iBAAiB93D,KAAK9N,MACtCq3D,WAAYr3D,KAAKq3D,WACjBwO,UAAW,YAEf1yD,eAAazc,IAAIsJ,KAAKk3B,aAAanmB,kBAAmB,SAAU/Q,KAAK6kE,cAAe7kE,MACpFmT,eAAazc,IAAIsJ,KAAKvN,QAAS,YAAauN,KAAKogD,iBAAkBpgD,MACnEmT,eAAazc,IAAIsJ,KAAKvN,QAAS,WAAYuN,KAAKogD,iBAAkBpgD,OAMtEoP,EAAK5kB,UAAUqvE,aAAe,WAC1B1mD,eAAa/f,OAAO4M,KAAKvN,QAAS,QAASuN,KAAKqlE,mBAChDlyD,eAAa/f,OAAO4M,KAAKvN,QAAS,WAAYuN,KAAKqlE,mBACnDlyD,eAAa/f,OAAO4M,KAAKvN,QAAS,WAAYuN,KAAKslE,iBACnDnyD,eAAa/f,OAAO4M,KAAKk3B,aAAanmB,kBAAmB,SAAU/Q,KAAK6kE,eACxE1xD,eAAa/f,OAAO4M,KAAKvN,QAAS,YAAauN,KAAKogD,kBACpDjtC,eAAa/f,OAAO4M,KAAKvN,QAAS,WAAYuN,KAAKogD,kBACnDjtC,eAAa/f,OAAO4M,KAAKvN,QAAS,UAAWuN,KAAKwlE,kBAKtDp2D,EAAK5kB,UAAUuuE,YAAc,WACrB/4D,KAAKwN,cAGTxN,KAAKyN,GAAGs5B,GAAkB/mC,KAAKuH,UAAWvH,MAC1CA,KAAKyN,GAAGC,GAAqB1N,KAAK8hE,kBAAmB9hE,MACrDA,KAAKyN,GAAG8sB,GAAwBv6B,KAAK8hE,kBAAmB9hE,MACxDA,KAAK8lE,kBAAoB9lE,KAAKy5D,gBAAgB3rD,KAAK9N,MACnDA,KAAK4N,iBAAiB0jB,GAAkBtxB,KAAK8lE,mBAC7C9lE,KAAKyN,GAAGi/C,GAAmB1sD,KAAKolE,aAAcplE,MAC9CA,KAAKyN,GAAGC,GAAqB1N,KAAK+lE,eAAgB/lE,QAKtDoP,EAAK5kB,UAAUsvE,eAAiB,WACxB95D,KAAKwN,cAGTxN,KAAK6R,IAAIk1B,GAAkB/mC,KAAKuH,WAChCvH,KAAK6R,IAAInE,GAAqB1N,KAAK8hE,mBACnC9hE,KAAK6R,IAAI0oB,GAAwBv6B,KAAK8hE,mBACtC9hE,KAAK8R,oBAAoBwf,GAAkBtxB,KAAK8lE,mBAChD9lE,KAAK6R,IAAI66C,GAAmB1sD,KAAKolE,gBAErCh2D,EAAK5kB,UAAUu7E,eAAiB,WAC5B,GAAIvvD,aAAY,CACZ,IAAK,IAAI9qB,EAAI,EAAGA,EAAIsU,KAAKpQ,YAAYjE,OAAQD,IAAK,CAO9C,GANIsU,KAAKpQ,YAAYlE,GAAGuC,UACpB0nC,uBAAqB31B,KAAKvN,QAAQJ,GAAK2N,KAAKpQ,YAAYlE,GAAG+H,IAAK,WAAYuM,KAAKpQ,YAAYlE,IAAI,GAEjGsU,KAAKpQ,YAAYlE,GAAGoX,gBACpB6yB,uBAAqB31B,KAAKvN,QAAQJ,GAAK2N,KAAKpQ,YAAYlE,GAAG+H,IAAM,iBAAkB,iBAAkBuM,KAAKpQ,YAAYlE,IAAI,GAE9F,aAA5BsU,KAAKmS,eAAepe,MAAuBiM,KAAKpQ,YAAYlE,GAAGyX,eAAgB,CAI/E,IAAK,IAHDu9D,EAAY1gE,KAAKpQ,YAAYlE,GAAGhB,MAChCg4C,EAAS1iC,KAAKvN,QAAQJ,GAAK2N,KAAKpQ,YAAYlE,GAAG+H,IAAM,iBACrD4hB,EAAkBrV,KAAKmS,eAAe5lB,QACjCw4C,EAAI,EAAGA,EAAI1vB,EAAgB1pB,OAAQo5C,IACpC27B,GAAarrD,EAAgB0vB,GAAGr6C,QAChCk6C,kBAAgBlC,GAAQ,GAAGg+B,GAAarrD,EAAgB0vB,GAAGt4C,OAGnEkpC,uBAAqB31B,KAAKvN,QAAQJ,GAAK2N,KAAKpQ,YAAYlE,GAAG+H,IAAM,iBAAkB,iBAAkBuM,KAAKpQ,YAAYlE,IAAI,GAE9F,aAA5BsU,KAAKmS,eAAepe,MAAuBiM,KAAKpQ,YAAYlE,GAAGyX,gBAC/DwyB,uBAAqB31B,KAAKvN,QAAQJ,GAAK2N,KAAKpQ,YAAYlE,GAAG+H,IAAM,iBAAkB,iBAAkBuM,KAAKpQ,YAAYlE,IAG1HsU,KAAK1T,cAAcm2C,iBACnB9M,uBAAqB31B,KAAKvN,QAAQJ,GAAK,kBAAmB,kBAAmB2N,KAAK1T,eAGtF,IAASy4C,EAAI,EAAGA,EAAI/kC,KAAK5L,WAAWzI,OAAQo5C,IACxC,IAAK,IAAI53C,EAAI,EAAGA,EAAI6S,KAAK5L,WAAW2wC,GAAGx4C,QAAQZ,OAAQwB,IAC/C6S,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,GAAGw8B,gBAC9BgM,uBAAqB31B,KAAKvN,QAAQJ,GAAK2N,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,GAAO,KAAI,iBAAkB,iBAAkB6S,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,IAE5I6S,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,GAAG++B,qBAC9ByJ,uBAAqB31B,KAAKvN,QAAQJ,GAAK2N,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,GAAO,KAAI,sBAAuB,sBAAuB6S,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,IAEtJ6S,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,GAAGg/B,sBAC9BwJ,uBAAqB31B,KAAKvN,QAAQJ,GAAK2N,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,GAAO,KAAI,uBAAwB,uBAAwB6S,KAAK5L,WAAW2wC,GAAGx4C,QAAQY,MAY5KiiB,EAAK5kB,UAAU67C,sBAAwB,WACnC,OAAItqC,GAAgBiE,MACTnV,oBAAkBmV,KAAKwsB,gBAAgBhgC,SAC1CwT,KAAKwsB,gBAAkBxsB,KAAKwsB,gBAAgBhgC,QAE5CwT,KAAKuB,eAAiBvB,KAAK1T,cAAcC,QAAQZ,QAAUqU,KAAKwsB,gBAAgB7gC,OACpFqU,KAAKwsB,gBAAgBhgC,QAAUwT,KAAKwsB,iBAE5Cpd,EAAK5kB,UAAU66E,kBAAoB,SAAUj6E,GACrC4U,KAAKgmE,YAAY56E,IAAO4G,EAAa5G,EAAEd,OAAQ,gBAAkBc,EAAEsgE,SACnE1rD,KAAKvN,QAAQtE,iBAAiB,sBAAsBxC,QAAUqU,KAAKimE,UAAU76E,MAG1E4U,KAAKikD,sBAAwBjyD,EAAa5G,EAAEd,OAAQ,kBAClC,OAArBc,EAAEd,OAAOmuB,WAAyBzY,KAAKuB,gBAAiBvB,KAAKwB,iBAC7DxP,EAAa5G,EAAEd,OAAQ,kBAAqBc,EAAEsgE,UAG9C15D,EAAa5G,EAAEd,OAAQ,iBAAmB0V,KAAKikD,qBAC/C74D,EAAEsjD,iBAEN1uC,KAAK4P,OAAO64C,GAAcr9D,KAE9BgkB,EAAK5kB,UAAUy7E,UAAY,SAAU76E,GACjC,IAAIi9B,EAAKr2B,EAAa5G,EAAEd,OAAQ,SAC5Bi+B,EAAoC,UAA3BvoB,KAAK3J,aAAaC,MAC3B0J,KAAKuoB,QAAUF,IAAOA,EAAG/1B,UAAUC,SAAS,gBAAkB81B,EAAG/1B,UAAUC,SAAS,eACxF,OAAQP,EAAa5G,EAAEd,OAAQ,sBAAwBi+B,GAAWv2B,EAAa5G,EAAEd,OAAQ,cACrF0H,EAAa5G,EAAEd,OAAQ,aAAagI,UAAUC,SAAS,uBAE/D6c,EAAK5kB,UAAU+6E,gBAAkB,SAAUn6E,GACvC,IAAIE,EAAO0G,EAAa5G,EAAEd,OAAQ,UAClC,IAAIO,oBAAkBS,IAASA,EAAK+G,KAAO2N,KAAKvN,QAAQJ,KAAMonC,UAAQruC,EAAEd,OAAQ,qBAAhF,CAGA,IAAI47E,GAAU,EACV79C,EAAKoR,UAAQruC,EAAEd,OAAQ,MAC3B,GAAI+9B,GAAMA,EAAG3W,aAAa,YAAa,CACnC,IAAI4lC,EAASt3C,KAAKk5C,oBAAoB7wB,EAAG3W,aAAa,aACtDw0D,IAAU5uB,GAASA,EAAO1rD,UAE9B,IAAI0L,EAAO0I,KAAKk+D,WAAW9yE,EAAEd,QAC7BgN,EAAKhN,OAASc,EAAEd,OACZ47E,GACAlmE,KAAKmQ,QAAQg2D,GAA0B7uE,GAE3C0I,KAAK4P,OAAOw2D,GAAiBh7E,KAEjCgkB,EAAK5kB,UAAU86E,gBAAkB,SAAUl6E,GACvC,IAAI4U,KAAKgmE,YAAY56E,GAArB,CAGK4G,EAAa5G,EAAEd,OAAQ,YACxB0V,KAAKvN,QAAQpE,cAAc,gBAAgB6C,MAAMC,QAAU,QAE/D,IAAIk1E,EAAcrmE,KAAKvN,QAAQpE,cAAc,0BACzCg4E,GACAA,EAAY/zE,UAAUoE,IAAI,UAE9B,IAAIq2C,EAAgB3hD,EAAE2hD,cAClBu5B,EAAWv5B,EAAgBA,EAAcr7B,aAAa,aAAe,KACnEq7B,IAAmB/6C,EAAa+6C,EAAe,aAC/CliD,oBAAkBy7E,SACAl7E,EAAEd,OAAOonB,aAAa,eACtC1R,KAAKumE,WAAYvmE,KAAKuoB,QAAW1Q,UAAQC,WACd,UAA3B9X,KAAK3J,aAAaC,OAClB0J,KAAK83C,WAAW2pB,WAChBzhE,KAAK4P,OAAO42D,QAEe,WAA3BxmE,KAAK3J,aAAaC,MAClB0J,KAAK83C,WAAW2uB,oBAGxBzmE,KAAKumE,UAAW,IAEpBn3D,EAAK5kB,UAAUw7E,YAAc,SAAU56E,GACnC,IAAIssD,EAAc1lD,EAAa5G,EAAEd,OAAQ,UACzC,SAAIotD,GAAeA,EAAYrlD,KAAO2N,KAAKvN,QAAQJ,KAKvD+c,EAAK5kB,UAAU2lE,qBAAuB,WAClC,IAAIxlE,EAAO2F,OAAOo2E,aAAaC,QAAQ3mE,KAAKgQ,gBAAkBhQ,KAAKvN,QAAQJ,IAC3E,IAAMxH,oBAAkBF,IAAmB,KAATA,EAAe,CAC7C,IAAIi8E,EAAU7qD,KAAKC,MAAMrxB,GACrBqV,KAAKhE,uBACL4qE,EAAQ3pE,aAAaC,YAAc,GAEvC,IAAI3N,EAAOD,OAAOC,KAAKq3E,GACvB5mE,KAAK6mE,qBAAsB,EAC3B,IAAK,IAAItvE,EAAK,EAAGuvE,EAASv3E,EAAMgI,EAAKuvE,EAAOn7E,OAAQ4L,IAAM,CACtD,IAAIiC,EAAMstE,EAAOvvE,GACS,iBAAdyI,KAAKxG,IAAuB3O,oBAAkBmV,KAAKxG,IAW3DwG,KAAKxG,GAAOotE,EAAQptE,GAVhBrF,MAAMqK,QAAQwB,KAAKxG,KAAiB,YAARA,GAC5B7J,EAAeqQ,KAAKxG,IACpBwG,KAAK+mE,aAAaH,EAAQptE,GAAMwG,KAAKxG,IACrCwG,KAAKxG,GAAOotE,EAAQptE,IAGpBxK,SAAOgR,KAAKxG,GAAMotE,EAAQptE,IAOtCwG,KAAK6mE,qBAAsB,IAGnCz3D,EAAK5kB,UAAUu8E,aAAe,SAAUC,EAAcz6E,GAClD,IAAI4U,EAAQnB,KACZgnE,EAAax3E,QAAQ,SAAUqG,EAAKpG,EAAOw3E,GACvC,IAAIC,EAAW36E,EAAQoV,OAAO,SAAUwlE,GAAQ,OAAOA,EAAK13E,QAAUoG,EAAIpG,QAAU,GAC/E5E,oBAAkBq8E,KACfA,EAAS36E,SAAW26E,EAAS36E,QAAQZ,QACrCwV,EAAM4lE,aAAalxE,EAAItJ,QAAS26E,EAAS36E,SACzC06E,EAAIx3E,GAAST,SAAOk4E,EAAUrxE,GAAK,IAGnCoxE,EAAIx3E,GAAST,SAAOk4E,EAAUrxE,GAAK,OAQnDuZ,EAAK5kB,UAAU4sC,SAAW,WACtB,OAAQvsC,oBAAkBmV,KAAKypB,kBAAoB5+B,oBAAkBmV,KAAK1C,YAE9E8R,EAAK5kB,UAAUumE,gBAAkB,SAAUxkE,GACvC,IAAI4U,EAAQnB,KACZ,OAAOzT,EAAQgO,KAAK,SAAU1E,GAC1B,OAAIA,EAAItJ,QACG4U,EAAM4vD,gBAAgBl7D,EAAItJ,YAE3BsJ,EAAI6M,WAAY7M,EAAI+M,qBAGtCwM,EAAK5kB,UAAU6mE,oBAAsB,SAAU9kE,GAC3C,IAAI4U,EAAQnB,KACZ,OAAOzT,EAAQgO,KAAK,SAAU1E,GAC1B,OAAIA,EAAItJ,QACG4U,EAAMkwD,oBAAoBx7D,EAAItJ,YAE/BsJ,EAAI+D,aAAc/D,EAAI1F,oBAGxCif,EAAK5kB,UAAUg7E,gBAAkB,SAAUp6E,GACvC,IAAIg8E,EAAWp4E,SAAO5D,GAAKklB,QAAQ,IACnCtQ,KAAKmQ,QAAQ,aAAci3D,IACH,IAApBA,EAAS92D,QACTllB,EAAEi8E,4BAGVj4D,EAAK5kB,UAAUo7E,iBAAmB,SAAUx6E,GACxC4U,KAAKumE,SAAwB,UAAbn7E,EAAEqL,OACduJ,KAAKgmE,YAAY56E,IAChB4U,KAAKuoB,QAAuB,WAAbn9B,EAAEqL,QAAoC,UAAbrL,EAAEqL,QAAmC,eAAbrL,EAAEqL,QAC/C,QAAbrL,EAAEqL,QAAiC,aAAbrL,EAAEqL,QAG/BuJ,KAAKylE,gBACY,cAAbr6E,EAAEqL,SACFrL,EAAEsjD,iBACF1uC,KAAKwO,SAETxO,KAAK4P,OAAO88C,GAAmBthE,KAMvCgkB,EAAK5kB,UAAUmlB,mBAAqB,SAAUH,GAC1CxP,KAAKsnE,gBAAkB93D,GAE3BJ,EAAK5kB,UAAUiwE,mBAAqB,WAChC3qE,EAAekQ,KAAKzT,QAASyT,KAAK0mB,4BAClC/2B,EAAeqQ,KAAKzT,SACpByT,KAAK+jE,oBACL/jE,KAAK4P,OAAOuQ,QAMhB/Q,EAAK5kB,UAAUwU,qBAAuB,WAClC,OAAOgB,KAAKmY,aAAaxW,OAAO,SAAU9L,GACtC,OAAOA,EAAIuN,qBAMnBgM,EAAK5kB,UAAUsK,aAAe,WAC1B,OAAOkL,KAAKhL,UAAYgL,KAAKhL,UAAYF,EAAakL,KAAKvN,UAK/D2c,EAAK5kB,UAAU+8E,eAAiB,WAC5BvnE,KAAK+qD,sBAAuB,EAC5B/qD,KAAKy6D,qBACLz6D,KAAK44D,iBAAiB54D,KAAKmY,cAC3BnY,KAAKkoB,WAUT9Y,EAAK5kB,UAAUg9E,YAAc,SAAUC,EAAuBC,EAE9DC,EAAUC,GACN,OAAO5nE,KAAK6nE,kBACR7nE,KAAK6nE,kBAAkBC,IAAI9nE,KAAMynE,EAAuBC,EAAkBC,GAAU,EAAOC,GAAU,MAW7Gx4D,EAAK5kB,UAAUu9E,UAAY,SAAUN,EAErCC,EAAkBC,EAAUC,GACxB,OAAO5nE,KAAK6nE,kBACR7nE,KAAK6nE,kBAAkBC,IAAI9nE,KAAMynE,EAAuBC,EAAkBC,GAAU,EAAMC,GAAU,MAW5Gx4D,EAAK5kB,UAAUw9E,UAAY,SAAUC,EAErCP,EAAkBQ,EAAQN,GACtB,OAAO5nE,KAAKmoE,gBAAkBnoE,KAAKmoE,gBAAgBL,IAAI9nE,KAAMioE,EAAqBP,EAAkBQ,EAAQN,GAAU,MAO1Hx4D,EAAK5kB,UAAU49E,YAAc,SAAU9xD,GAC/BtW,KAAKqoE,aACLroE,KAAKqoE,YAAYD,YAAY9xD,IAOrClH,EAAK5kB,UAAU89E,eAAiB,WACxBtoE,KAAKqoE,aACLroE,KAAKqoE,YAAYE,aAOzBn5D,EAAK5kB,UAAUg+E,iBAAmB,WAC1BxoE,KAAKqoE,aACLroE,KAAKqoE,YAAYI,eAiBzBr5D,EAAK5kB,UAAUk+E,cAAgB,WACvB1oE,KAAKqoE,aACLroE,KAAKqoE,YAAYK,iBAQzBt5D,EAAK5kB,UAAUm+E,cAAgB,SAAUryD,GACjCtW,KAAKqoE,aACLroE,KAAKqoE,YAAYM,cAAcryD,IASvClH,EAAK5kB,UAAUo+E,kBAAoB,SAAUj3E,EAAG2B,GACxC0M,KAAKmjE,qBACLnjE,KAAKmjE,oBAAoByF,kBAAkBj3E,EAAG2B,IAiBtD8b,EAAK5kB,UAAUq+E,kBAAoB,WAC3B7oE,KAAK8oE,iBACL9oE,KAAK8oE,gBAAgBL,eAiB7Br5D,EAAK5kB,UAAUu+E,gBAAkB,WACzB/oE,KAAK8oE,iBACL9oE,KAAK8oE,gBAAgBP,aAO7Bn5D,EAAK5kB,UAAUgyD,mBAAqB,WAC5Bx8C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgBhR,sBAO7BptC,EAAK5kB,UAAUuuD,kBAAoB,WAC3B/4C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgBzU,qBAQ7B3pC,EAAK5kB,UAAUu0D,YAAc,SAAUC,GAC/Bh/C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgBzO,YAAYC,IASzC5vC,EAAK5kB,UAAUgwD,kBAAoB,SAAUpwB,EAAYqwB,GACjDz6C,KAAKwtD,iBACLxtD,KAAKwtD,gBAAgBhT,kBAAkBpwB,EAAYqwB,IAM3DrrC,EAAK5kB,UAAUw+E,kBAAoB,WAC/B,OAAOhpE,KAAKm7D,mBAAqBn7D,KAAKm7D,kBAAkB8N,QAK5D75D,EAAK5kB,UAAU0+E,qBAAuB,SAAU9wC,GAC5C,OAAOp4B,KAAKyP,qBAAqB/f,QAAQ0oC,IAAW,GAOxDhpB,EAAK5kB,UAAU4tB,gBAAkB,SAAU+wD,EAAe15E,GACtDuQ,KAAKopE,cAAcD,EAAe15E,IAMtC2f,EAAK5kB,UAAUulB,IAAM,SAAUhc,EAAMuD,GACjC0I,KAAKqpE,cAAerpE,KAAKqpE,aAAat5D,IAAIhc,EAAMuD,IAKpD8X,EAAK5kB,UAAU8+E,iBAAmB,SAAU72E,GACpCuN,KAAKvN,QAAQH,UAAUC,SAAS,aAChCE,EAAQH,UAAUoE,IAAI,aAM9B0Y,EAAK5kB,UAAU++E,mBAAqB,WAEhC,OADsBvpE,KAAKnD,gBAAgBmD,KAAK+1B,UAAUpqC,OAAS,GAAGhB,MAO1EykB,EAAK5kB,UAAUg/E,WAAa,WACxB,IAAI7yD,EAAU3W,KAAKk3B,aAAa7oC,cAAc,cAC1Co7E,EAAS9yD,EAAQtoB,cAAc,qBAAuBsoB,EAAQtoB,cAAc,qBAAuBsoB,EACnG+yD,EAAS/yD,EAAQtoB,cAAc,oBAAsBsoB,EAAQtoB,cAAc,oBAAsBsoB,EACjG8yD,EAAO//C,cAAgB+/C,EAAOx4B,cAAgBy4B,EAAOhgD,cAAgBggD,EAAOz4B,eAC5EjxC,KAAKoN,aAAao9C,gBAClBif,EAAOv4E,MAAM2f,UAAY,QAEzB7Q,KAAK88B,eAAiB2sC,EAAOl1E,aAAek1E,EAAO70E,cACnD60E,EAAOv4E,MAAM+f,UAAY,OACzBw4D,EAAOv4E,MAAM2f,UAAY,OACzB7Q,KAAK4P,OAAO+5D,GAAqB,KAQzCv6D,EAAK5kB,UAAUo/E,wBAA0B,SAAUn9E,GAC/C,IAAIgyE,EAASz+D,KAAKgjB,0BAA0B,GAC5Cv2B,EAAyB,iBAAVA,EAAqBA,EAAMgyE,GAAUhyE,EACpD,IAAK,IAAIf,EAAI,EAAGA,EAAIsU,KAAKnD,gBAAgBlR,OAAQD,IAC7C,GAAIsU,KAAKnD,gBAAgBnR,GAAGf,KAAK8zE,KAAYhyE,EACzC,OAAOuT,KAAKnD,gBAAgBnR,GAAG+D,MAGvC,OAAQ,GAOZ2f,EAAK5kB,UAAUk4B,6BAA+B,SAAUh4B,GACpD,IAAIE,EAQJ,OAPAoV,KAAKpQ,eACLoQ,KAAK08D,kBAAkB18D,KAAKzT,SAC5ByT,KAAKpQ,YAAYJ,QAAQ,SAAUq6E,GAC3Bn/E,IAAUm/E,EAAKn/E,QACfE,EAASi/E,KAGVj/E,GAMXwkB,EAAK5kB,UAAUo4B,2BAA6B,SAAUnvB,GAClD,IAAI7I,EAQJ,OAPAoV,KAAKpQ,eACLoQ,KAAK08D,kBAAkB18D,KAAKzT,SAC5ByT,KAAKpQ,YAAYJ,QAAQ,SAAUq6E,GAC3Bp2E,IAAQo2E,EAAKp2E,MACb7I,EAASi/E,KAGVj/E,GAEX,IAAIqlE,EAsWJ,OArWAxvD,IACImE,gBACDwK,EAAK5kB,UAAW,eAAW,GAC9BiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,mBAAe,GAClCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACIqpE,aAAYva,KACbngD,EAAK5kB,UAAW,wBAAoB,GACvCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIqpE,aAAYp0B,KACbtmC,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,4BAAwB,GAC3CiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,kCAA8B,GACjDiW,IACIqpE,aAAYza,KACbjgD,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,yBAAqB,GACxCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,wBAAoB,GACvCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIqpE,aAAY5a,KACb9/C,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACImE,YAAU,IACXwK,EAAK5kB,UAAW,wBAAoB,GACvCiW,IACIqpE,aAAY1a,KACbhgD,EAAK5kB,UAAW,yBAAqB,GACxCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,2BAAuB,GAC1CiW,IACIqpE,aAAYxa,KACblgD,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIqpE,aAAY3a,KACb//C,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIqpE,aAAYta,KACbpgD,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACIqpE,aAAYra,KACbrgD,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACI6rD,gBAAeD,KAChBj9C,EAAK5kB,UAAW,kBAAc,GACjCiW,IACImE,YAAS,IACVwK,EAAK5kB,UAAW,yBAAqB,GACxCiW,IACImE,WAAS,SACVwK,EAAK5kB,UAAW,cAAU,GAC7BiW,IACImE,WAAS,SACVwK,EAAK5kB,UAAW,aAAS,GAC5BiW,IACImE,WAAS,YACVwK,EAAK5kB,UAAW,iBAAa,GAChCiW,IACImE,cACDwK,EAAK5kB,UAAW,mBAAe,GAClCiW,IACImE,cACDwK,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACImE,cACDwK,EAAK5kB,UAAW,iBAAa,GAChCiW,IACImE,cACDwK,EAAK5kB,UAAW,mBAAe,GAClCiW,IACImE,WAAS,aACVwK,EAAK5kB,UAAW,iBAAa,GAChCiW,IACImE,WAAS,aACVwK,EAAK5kB,UAAW,0BAAsB,GACzCiW,IACImE,gBACDwK,EAAK5kB,UAAW,kBAAc,GACjCiW,IACImE,WAAS,OACVwK,EAAK5kB,UAAW,iBAAa,GAChCiW,IACImE,cACDwK,EAAK5kB,UAAW,aAAS,GAC5BiW,IACImE,WAAS,QACVwK,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACImE,cACDwK,EAAK5kB,UAAW,eAAW,GAC9BiW,IACImE,cACDwK,EAAK5kB,UAAW,wBAAoB,GACvCiW,IACImE,cACDwK,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACImE,cACDwK,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACImE,cACDwK,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACImE,WAAS,IACVwK,EAAK5kB,UAAW,kBAAc,GACjCiW,IACImE,WAAS,IACVwK,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACImE,WAAS,QACVwK,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,eAAW,GAC9BiW,IACIspE,WACD36D,EAAK5kB,UAAW,iBAAa,GAChCiW,IACIspE,WACD36D,EAAK5kB,UAAW,YAAQ,GAC3BiW,IACIspE,WACD36D,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACIspE,WACD36D,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACIspE,WACD36D,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIspE,WACD36D,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIspE,WACD36D,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIspE,WACD36D,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACIspE,WACD36D,EAAK5kB,UAAW,iBAAa,GAChCiW,IACIspE,WACD36D,EAAK5kB,UAAW,yBAAqB,GACxCiW,IACIspE,WACD36D,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACIspE,WACD36D,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIspE,WACD36D,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIspE,WACD36D,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACIspE,WACD36D,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACIspE,WACD36D,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,kBAAc,GACjCiW,IACIspE,WACD36D,EAAK5kB,UAAW,kBAAc,GACjCiW,IACIspE,WACD36D,EAAK5kB,UAAW,qBAAiB,GACpCiW,IACIspE,WACD36D,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIspE,WACD36D,EAAK5kB,UAAW,wBAAoB,GACvCiW,IACIspE,WACD36D,EAAK5kB,UAAW,8BAA0B,GAC7CiW,IACIspE,WACD36D,EAAK5kB,UAAW,6BAAyB,GAC5CiW,IACIspE,WACD36D,EAAK5kB,UAAW,0BAAsB,GACzCiW,IACIspE,WACD36D,EAAK5kB,UAAW,gCAA4B,GAC/CiW,IACIspE,WACD36D,EAAK5kB,UAAW,yBAAqB,GACxCiW,IACIspE,WACD36D,EAAK5kB,UAAW,2BAAuB,GAC1CiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,yBAAqB,GACxCiW,IACIspE,WACD36D,EAAK5kB,UAAW,0BAAsB,GACzCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACIspE,WACD36D,EAAK5kB,UAAW,eAAW,GAC9BiW,IACIspE,WACD36D,EAAK5kB,UAAW,eAAW,GAC9BiW,IACIspE,WACD36D,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACIspE,WACD36D,EAAK5kB,UAAW,+BAA2B,GAC9CiW,IACIspE,WACD36D,EAAK5kB,UAAW,gBAAY,GAC/BiW,IACIspE,WACD36D,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIspE,WACD36D,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIspE,WACD36D,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIspE,WACD36D,EAAK5kB,UAAW,yBAAqB,GACxCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,iBAAa,GAChCiW,IACIspE,WACD36D,EAAK5kB,UAAW,oBAAgB,GACnCiW,IACIspE,WACD36D,EAAK5kB,UAAW,gBAAY,GAC/BiW,IACIspE,WACD36D,EAAK5kB,UAAW,gBAAY,GAC/BiW,IACIspE,WACD36D,EAAK5kB,UAAW,iBAAa,GAChCiW,IACIspE,WACD36D,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIspE,WACD36D,EAAK5kB,UAAW,gBAAY,GAC/BiW,IACIspE,WACD36D,EAAK5kB,UAAW,kBAAc,GACjCiW,IACIspE,WACD36D,EAAK5kB,UAAW,kBAAc,GACjCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,wBAAoB,GACvCiW,IACIspE,WACD36D,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW,sBAAkB,GACrCiW,IACIspE,WACD36D,EAAK5kB,UAAW,kBAAc,GACjCiW,IACIspE,WACD36D,EAAK5kB,UAAW,mBAAe,GAClCiW,IACIspE,WACD36D,EAAK5kB,UAAW,uBAAmB,GACtCiW,IACIspE,WACD36D,EAAK5kB,UAAW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"}
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-svg-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-pdf-export")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-svg-base","@syncfusion/ej2-data","@syncfusion/ej2-pdf-export"],t):t(e.ej={},e.ej2Base,e.ej2SvgBase,e.ej2Data,e.ej2PdfExport)}(this,function(e,t,i,o,n){"use strict";function a(e,t){return null!==e&&void 0!==e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function l(e){var t=e.element.clientWidth,i=e.element.clientHeight,o=e.element.parentElement.clientHeight,n=e.element.parentElement.clientWidth;e.isBlazor&&(i=0!==(o=e.element.parentElement.style.height?e.element.parentElement.clientHeight:450)?o:0!==i?i:450,t=0!==n?n:0!==t?t:600),e.availableSize=new Ne(a(e.width,t)||t||600,a(e.height,i)||i||(e.isDevice?Math.min(window.innerWidth,window.innerHeight):450))}function r(e){e.renderer=new i.SvgRenderer(e.element.id),l(e),e.svgObject=e.renderer.createSvg({id:e.element.id+"_svg",width:e.availableSize.width,height:e.availableSize.height})}function s(e,t,i){var o=i.getBoundingClientRect(),n=i.ownerDocument.defaultView.pageXOffset,a=i.ownerDocument.defaultView.pageYOffset,l=i.ownerDocument.documentElement.clientTop,r=i.ownerDocument.documentElement.clientLeft,s=o.left+n-r,p=o.top+a-l;return new We(e-s,t-p)}function p(e){return e*(Math.PI/180)}function d(e){return e*(180/Math.PI)}function h(e,i,o,n,a){var l,r,s,h,c,f,b=new Ne(a.mapAreaRect.width,a.mapAreaRect.height),x=a.baseMapBounds.longitude,S=a.baseMapBounds.latitude,_=p(e),M=p(i),O=a.projectionType,C=a.isTileMap?256*Math.pow(2,1):t.isNullOrUndefined(o)?Math.min(b.width,b.height):Math.min(b.width,b.height)*o;if("Normal"===n.geometryType)l=t.isNullOrUndefined(o)?i:Math.abs((i-x.min)*o),r=t.isNullOrUndefined(o)?e:Math.abs((S.max-e)*o);else if("Geographic"===n.geometryType){switch(O){case"Mercator":var L=new Ae(C/2,C/2);l=L.x+i*(C/360);var w=v(Math.sin(p(e)),-.9999,.9999);r=L.y+.5*Math.log((1+w)/(1-w))*(-C/(2*Math.PI));break;case"Winkel3":c=((s=g(M,_)).x+M/(Math.PI/2))/2,h=(s.y+_)/2;break;case"Miller":c=M,h=1.25*Math.log(Math.tan(Math.PI/4+.4*_));break;case"Eckert3":c=2/(f=Math.sqrt(Math.PI*(4+Math.PI)))*M*(1+Math.sqrt(1-4*_*_/(Math.PI*Math.PI))),h=4/f*_;break;case"AitOff":c=(s=g(M,_)).x,h=s.y;break;case"Eckert5":c=M*(1+Math.cos(_))/Math.sqrt(2+Math.PI),h=2*_/Math.sqrt(2+Math.PI);break;case"Equirectangular":c=M,h=_;break;case"Eckert6":f=(1+Math.PI/2)*Math.sin(_);for(var P=1/0,I=0;I<10&&Math.abs(P)>1e-6;I++)_-=P=(_+Math.sin(_)-f)/(1+Math.cos(_));f=Math.sqrt(2+Math.PI),c=M*(1+Math.cos(_))/f,h=2*_/f}l="Mercator"===O?l:y(m(a,d(c)),3),r="Mercator"===O?r:-y(u(a,d(h)),3)}return new Ae(l,r)}function c(e,t,i,o){var n=256*Math.pow(2,t),a=(e.x+180)/360,l=Math.sin(e.y*Math.PI/180),r=.5-Math.log((1+l)/(1-l))/(4*Math.PI),s=e.x,p=e.y;return o&&(s=a*n+.5+i.x,p=r*n+.5+i.y),{x:s,y:p}}function m(e,i){var o=e.baseMapBounds.longitude,n=t.isNullOrUndefined(e.baseSize)?e.mapAreaRect.width:e.mapAreaRect.width+Math.abs(e.baseSize.width-e.mapAreaRect.width)/2;return Math.round(n*(i-o.min)/(o.max-o.min)*100)/100}function u(e,t){var i=e.baseMapBounds.latitude;return Math.round(e.mapAreaRect.height*(t-i.min)/(i.max-i.min)*100)/100}function g(e,t){var i=Math.cos(t),o=f(b(i*Math.cos(e/=2)));return new Ae(2*i*Math.sin(e)*o,Math.sin(t)*o)}function y(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}function f(e){return e/Math.sin(e)}function b(e){return Math.acos(e)}function v(e,i,o){return t.isNullOrUndefined(i)||(e=Math.max(e,i)),t.isNullOrUndefined(o)||(e=Math.min(e,o)),e}function x(e,i){var o=document.getElementById("mapsmeasuretext");return null===o&&(o=t.createElement("text",{id:"mapsmeasuretext"}),document.body.appendChild(o)),o.innerHTML=e,o.style.position="absolute",o.style.fontSize=i.size,o.style.fontWeight=i.fontWeight,o.style.fontStyle=i.fontStyle,o.style.fontFamily=i.fontFamily,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",new Ne(o.clientWidth,o.clientHeight)}function S(e,t,o,n,a){void 0===a&&(a=!1);var l,r,s={id:e.id,x:e.x,y:e.y,fill:o,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:t.opacity,"dominant-baseline":e.baseLine},p="string"==typeof e.text?e.text:a?e.text[e.text.length-1]:e.text[0],d=new i.SvgRenderer(""),h=d.createText(s,p);if(h.style["user-select"]="none",h.style["-moz-user-select"]="none",h.style["-webkit-touch-callout"]="none",h.style["-webkit-user-select"]="none",h.style["-khtml-user-select"]="none",h.style["-ms-user-select"]="none",h.style["-o-user-select"]="none","string"!=typeof e.text&&e.text.length>1)for(var c=1,m=e.text.length;c<m;c++)r=x(e.text[c],t).height,l=d.createTSpan({x:e.x,id:e.id,y:e.y+(a?-c*r:c*r)},a?e.text[e.text.length-(c+1)]:e.text[c]),h.appendChild(l);return n.appendChild(h),h}function _(e,i,o,n,a){for(var l=t.createElement("div",{id:i,styles:"position: absolute;pointer-events: auto;"}),r=e.length;r>0;)l.appendChild(e[0]),r--;for(var s=l.innerHTML,p=Object.keys(o),d=0;d<p.length;d++)"latitude"!==p[d].toLowerCase()&&"longitude"!==p[d].toLowerCase()&&(s=s.replace(new RegExp("{{:"+p[d]+"}}","g"),o[p[d].toString()]));return l.innerHTML=s,l}function M(e,i,o,n,a){for(var l=(t.isNullOrUndefined(e.childElementCount)?e[0]:e).outerHTML,r=Object.keys(o),s=0;s<r.length;s++)l=l.replace(new RegExp("{{:"+r[s]+"}}","g"),o[r[s].toString()]);return t.createElement("div",{id:i,innerHTML:l,styles:"position: absolute"})}function O(e,i,o,n,a,l,r){var s,p,d,h,c,m,u=a.size,g=a.borderColor,y=parseFloat(a.borderWidth),f=a.fill,b=a.dashArray,v={color:g,width:y},x=a.opacity;if(c=new je(n,f,y,g,x,b,""),"Circle"===e){var S=(u.width+u.height)/4;h=new De(n,f,v,x,o.x,o.y,S,b),s=r.renderer.drawCircle(h)}else"Rectangle"===e?(p=o.x-u.width/2,d=o.y-u.height/2,m=new Ue(n,f,v,x,new qe(p,d,u.width,u.height),null,null,"",b),s=r.renderer.drawRectangle(m)):"Image"===e?(p=o.x-u.width/2,d=o.y-u.height,t.merge(c,{href:i,height:u.height,width:u.width,x:p,y:d}),s=r.renderer.drawImage(c)):s=F(r,e,c,u,o,l);return s}function C(e,i){return e.fill=t.isNullOrUndefined(e.colorValuePath)||t.isNullOrUndefined(i[e.colorValuePath])?e.fill:i[e.colorValuePath],e}function L(e,i){return t.isNullOrUndefined(e.shapeValuePath)||t.isNullOrUndefined(i[e.shapeValuePath])?(e.shape=e.shape,e.imageUrl=e.imageUrl):(e.shape=i[e.shapeValuePath],"Image"==i[e.shapeValuePath]&&(e.imageUrl=t.isNullOrUndefined(e.imageUrlValuePath)||t.isNullOrUndefined(i[e.imageUrlValuePath])?e.imageUrl:i[e.imageUrlValuePath])),e}function w(e,i,o,n,a,l,r){for(var s,p,d=[],h=[],c=0,m=0,u=e.markerClusterSettings.labelStyle,g=0,y=[],f=e.markerClusterSettings,b=o.renderer.createGroup({id:o.element.id+"_LayerIndex_"+n+"_markerCluster"}),v=0;v<i.childElementCount;v++){var x=i.childNodes[v];d.push(x.getBoundingClientRect())}var _={cancel:!1,name:At,fill:f.fill,height:f.height,width:f.width,imageUrl:f.imageUrl,shape:f.shape,data:void 0,maps:o,cluster:f,border:f.border};if(t.isBlazor()){_.data,_.maps,_.cluster;var M=Ee(_,["data","maps","cluster"]);_=M}o.trigger("markerClusterRendering",_,function(f){for(var v=0;v<d.length;v++){if(!t.isNullOrUndefined(d[v])){for(var x=v+1;x<d.length;x++)t.isNullOrUndefined(d[x])||d[v].left>d[x].right||d[v].right<d[x].left||d[v].top>d[x].bottom||d[v].bottom<d[x].top||h.push(d[x]);c=d[v].left+d[v].width/2,m=d[v].top+d[v].height,y=[];for(var M=0;M<h.length;M++)for(var C=0;C<d.length;C++)if(!t.isNullOrUndefined(d[C])&&h[M].left===d[C].left){delete d[C];for(var L=0;L<i.childElementCount;L++){var w=i.childNodes[L];h[M].left===w.getBoundingClientRect().left&&(i.childNodes[L].style.visibility="hidden",i.childNodes[v].style.visibility="hidden",y.push(v),y.push(L))}}if(h.length>0){y=y.filter(function(e,t,i){return i.indexOf(e)===t});var P=o.element.getBoundingClientRect();c=Math.abs(P.left-c),m=Math.abs(P.top-m);var I=o.isTileMap?new Object:X(o,e,!1),T=o.isTileMap?{x:0,y:0}:0!==o.translatePoint.x?o.translatePoint:I.location,k=parseInt(i.childNodes[v].id.split("_dataIndex_")[1].split("_")[0],10),E=parseInt(i.childNodes[v].id.split("_MarkerIndex_")[1].split("_")[0],10),N=e.markerClusterSettings,A={size:new Ne(N.width,N.height),fill:N.fill,borderColor:N.border.color,borderWidth:N.border.width,opacity:N.opacity,dashArray:N.dashArray};A.fill=_.fill,A.size.width=_.width,A.size.height=_.height,A.imageUrl=_.imageUrl,A.shape=_.shape,A.borderColor=_.border.color,A.borderWidth=_.border.width,c=o.isTileMap?c:i.id.indexOf("_Markers_Group")>-1?c:(c+T.x)*o.mapScaleValue,m=o.isTileMap?m:i.id.indexOf("_Markers_Group")>-1?m:(m+T.y)*o.mapScaleValue;var B=o.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+E+"_dataIndex_"+k+"_cluster_"+g,z=o.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+E+"_dataIndex_"+k+"_cluster_"+g+"_datalabel_"+g;g++;var F="Image"===_.shape?_.height/2:0,j=O(_.shape,_.imageUrl,{x:0,y:F},B,A,a,o);j.setAttribute("transform","translate( "+c+" "+m+" )"),"Balloon"===_.shape?j.children[0].innerHTML=y.toString():j.innerHTML=y.toString(),s=new Fe(z,0,3.75,"middle",(h.length+1).toString(),"",""),(p=S(s,u,u.color,a)).setAttribute("transform","translate( "+c+" "+m+" )"),b.appendChild(p),b.appendChild(j)}}h=[]}for(;0<b.childNodes.length;)a.insertBefore(b.childNodes[0],a.firstChild);r?l.appendChild(a):(J(o.element.id+"_Secondary_Element").appendChild(a),l.appendChild(a))})}function P(e,t,i){var o=e[0].layerIndex,n=e[0].targetClusterIndex,a=e[0].markerIndex,l=t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+a,r=l+"_dataIndex_"+e[0].data[0].index+"_cluster_"+n,s=$(r),p=$(r+"_datalabel_"+n);s.setAttribute("visibility","visible"),p.setAttribute("visibility","visible");for(var d=e[0].data.length,h=0;h<d;h++)$(l+"_dataIndex_"+e[0].data[h].index).style.visibility="hidden";q(t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+a+"_markerClusterConnectorLine")}function I(e,t,i,o){var n=e[0].layerIndex,a=e[0].markerIndex,l=e[0].targetClusterIndex,r=e[0].data[0].index,s=o?$:i.querySelector.bind(i),p=o?"":"#",d=t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+a,h=d+"_dataIndex_"+r+"_cluster_"+l,c=s(p+""+h),m=s(p+""+h+"_datalabel_"+l);c.setAttribute("visibility","hidden"),m.setAttribute("visibility","hidden");var u=t.layers[n].markerSettings[a],g=s(p+""+d+"_dataIndex_"+r),y=u.height,f=u.width,b=+c.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],v=+c.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),x=f+5,S=6.28*x,_=0,M=Math.round(S/f);_+=M;for(var O=e[0].data.length,C=Math.round(y/S*100),L=(C=O<M?100/O:C)/100*360,w=O<M?45:0,P=1,I="M "+b+" "+v+" ",T="",k=0;k<O;k++){if(_===k||Math.round(w)>=360){for(w=0,S=6.28*(x=(f+5)*++P),M=Math.round(S/y),C=Math.round(y/S*100);C*M<100;)M++;L=C/100*360,_+=M}var E=b+x*Math.sin(2*Math.PI*w/360),N=v+x*Math.cos(2*Math.PI*w/360);T+=I+"L "+E+" "+N+" ",(g=s(p+""+d+"_dataIndex_"+e[0].data[k].index)).setAttribute("transform","translate( "+E+" "+N+")"),g.style.visibility="visible",w+=L}var A,B=t.layers[n].markerClusterSettings.connectorLineSettings;A={d:T,id:t.element.id+"_markerClusterConnectorLine",stroke:B.color,opacity:B.opacity,"stroke-width":B.width},i=o?s(t.element.id+"_Markers_Group"):i;var z=t.renderer.createGroup({id:t.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+a+"_markerClusterConnectorLine"});z.appendChild(t.renderer.drawPath(A)),i.insertBefore(z,i.querySelector("#"+d+"_dataIndex_0"))}function T(e,t,i,o,n,a,l,r,s,p,d){var h={size:new Ne(e.width,e.height),fill:e.fill,borderColor:e.border.color,borderWidth:e.border.width,opacity:t.opacity,dashArray:t.dashArray},c=O(e.shape,e.imageUrl,{x:0,y:0},l,h,d,p),m=(p.isTileMap?n.x:(n.x+a.x)*s)+r.x,u=(p.isTileMap?n.y:(n.y+a.y)*s)+r.y;c.setAttribute("transform","translate( "+m+" "+u+" )"),E(p.selectedMarkerElementId,p.markerSelectionClass,c,"MarkerselectionMapStyle"),d.appendChild(c);var g=i.length-1===o?"marker":null,y=new Ae(m,u);return t.animationDuration>0&&pe(c,t.animationDelay,t.animationDuration,y,p,g),d}function k(e,t,i,o,n,a,l,r,s,p){if((t=Q(e.template))&&(p.isBlazor||t(o,null,null,p.element.id+"_MarkerTemplate"+n,!1).length)){for(var d=_(t(o,null,null,p.element.id+"_MarkerTemplate"+n,!1),i,o),h=0;h<d.children.length;h++)d.children[h].style.pointerEvents="none";if(d.style.left=(p.isTileMap?l.x:Math.abs(p.baseMapRectBounds.min.x-l.x)*r)+s.x+"px",d.style.top=(p.isTileMap?l.y:Math.abs(p.baseMapRectBounds.min.y-l.y)*r)+s.y+"px",a.appendChild(d),"GoogleStaticMap"===p.layers[p.baseLayerIndex].layerType){var c=J(p.element.id+"_StaticGoogleMap").getBoundingClientRect(),m=d.getBoundingClientRect();(c.x>m.x||c.x+640<m.x+m.width)&&(c.y>m.y||c.y+c.height<m.y+m.height)&&(d.style.display="none")}}return a}function E(e,i,o,n){if(e)for(var a=0;a<e.length;a++)o.getAttribute("id")===e[a]&&((t.isNullOrUndefined($(i.id))||0===a)&&document.body.appendChild(i),o.setAttribute("class",n))}function N(e,i,o,n,a,l,r){if(!$(e)){var s=void 0;s=t.createElement("style",{id:e,innerHTML:"."+i+"{fill:"+o+";opacity:"+n+";stroke-width:"+l+";stroke:"+a+";}"}),r.shapeSelectionClass=s,document.body.appendChild(s)}}function A(e,t){return t&&t.appendChild(e),e}function B(e,t,i){return A(e.renderer.drawCircle(t),i)}function z(e,t,i){return A(e.renderer.drawRectangle(t),i)}function F(e,t,i,o,n,a){var l;switch(t){case"Balloon":l=j(e,i,o,n,a);break;case"Cross":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)+" M "+(n.x-o.width/2)+" "+n.y+" L "+(n.x+o.width/2)+" "+n.y;break;case"Diamond":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+n.y+" L "+n.x+" "+(n.y+o.height/2)+" L "+(n.x-o.width/2)+" "+n.y+" Z";break;case"Star":i.d="M "+(n.x+o.width/3)+" "+(n.y-o.height/2)+" L "+(n.x-o.width/2)+" "+(n.y+o.height/6)+" L "+(n.x+o.width/2)+" "+(n.y+o.height/6)+" L "+(n.x-o.width/3)+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)+" L "+(n.x+o.width/3)+" "+(n.y-o.height/2)+" Z";break;case"Triangle":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+(n.y+o.height/2)+" L "+(n.x-o.width/2)+" "+(n.y+o.height/2)+" Z";break;case"HorizontalLine":i.d=" M "+(n.x-o.width/2)+" "+n.y+" L "+(n.x+o.width/2)+" "+n.y;break;case"VerticalLine":i.d="M "+n.x+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2);break;case"InvertedTriangle":i.d="M "+(n.x-o.width/2)+" "+(n.y-o.height/2)+" L "+(n.x+o.width/2)+" "+(n.y-o.height/2)+" L "+n.x+" "+(n.y+o.height/2)+" Z";break;case"Pentagon":for(var r=void 0,s=void 0,p=0;p<5;p++)r=o.width/2*Math.cos(Math.PI/180*(72*p)),s=o.height/2*Math.sin(Math.PI/180*(72*p)),i.d+=(0==p?"M ":"L ")+(n.x+r)+" "+(n.y+s);i.d+=" Z"}return"Balloon"===t?l:e.renderer.drawPath(i)}function j(e,t,i,o,n){var a=i.width,l=i.height;o.x-=a/2,o.y-=l,t.d="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";var r=e.renderer.drawPath(t),s=i.width/30,p=i.height/30;r.setAttribute("transform","translate("+o.x+", "+o.y+") scale("+s+", "+p+")");var d=e.renderer.createGroup({id:t.id});return A(r,d),A(d,n)}function R(e,i,o,n){if(!t.isNullOrUndefined(i))for(var a=0;a<e.length;a++){var l=U(e[a][o],n,i);if(e[a][o]===i[l])return a}return null}function U(e,i,o){if(!t.isNullOrUndefined(e)&&!t.isNullOrUndefined(o)&&!t.isNullOrUndefined(i))for(var n="[object Array]"===Object.prototype.toString.call(i)?i:[i],a=0;a<n.length;a++)if(e===o[n[a]])return n[a];return null}function D(e,t,i){for(var o=[],n=0;n<e.length;n++){var a=e[n];t<=a.y&&i>=a.y&&o.push(a)}return o}function Z(e,t,i,o,n){var a=(t-e)/100*(100/(n-o)*(i-o))+e;return n===o&&(a=(t-e)/100+e),a}function H(e,t){if(!e.length)return null;for(var i,o,n,a,l=e.length,r=0,s=0,p=0,d=0;d<=l-1;d++)i=e[d].x,o="Mercator"===t?e[d].y:-e[d].y,d===l-1?(n=e[0].x,a="Mercator"===t?e[0].y:-e[0].y):(n=e[d+1].x,a="Mercator"===t?e[d+1].y:-e[d+1].y),r+=Math.abs(i*a-n*o),s+=Math.abs((i+n)*(i*a-n*o)),p+=Math.abs((o+a)*(i*a-n*o));s*=1/(4*(r*=.5)),p*=1/(4*r);var h={x:0,y:0},c={x:0,y:0},m={x:0,y:0},u={x:0,y:0},g={x:0,y:0},y={x:0,y:0},f={x:0,y:0},b={x:0,y:0},v=0;for(d=0;d<=l-1;d++){var x=e[d];x.y="Mercator"===t?x.y:-x.y,x.y>p?x.x<s&&s-x.x<s-g.x?g={x:x.x,y:x.y}:x.x>s&&(0===y.x||x.x-s<y.x-s)&&(y={x:x.x,y:x.y}):x.x<s&&s-x.x<s-f.x?f={x:x.x,y:x.y}:x.x>s&&(0===b.x||x.x-s<b.x-s)&&(b={x:x.x,y:x.y}),v=y.y-b.y+(y.y-b.y)/4,x.x>s?x.y<p&&p-x.y<p-h.y?h={x:x.x,y:x.y}:x.y>p&&(0===c.y||x.y-p<c.y-p)&&(c={x:x.x,y:x.y}):x.y<p&&p-x.y<p-m.y?m={x:x.x,y:x.y}:x.y>p&&(0===u.y||x.y-p<u.y-p)&&(u={x:x.x,y:x.y})}return{x:s,y:p,rightMin:h,rightMax:c,leftMin:m,leftMax:u,points:e,topMax:b,topMin:f,bottomMax:y,bottomMin:g,height:v}}function V(e){var i=!1;return"[object Array]"===Object.prototype.toString.call(e)&&Array.prototype.forEach.call(e,function(e,o){t.isNullOrUndefined(e.geometry)||"Path"!==e.geometry.type||(i=!0)}),i}function G(e,t,i){var o=t,n=x(t,i).width;if(n>e)for(var a=t.length-1;a>=0;--a)if(o=t.substring(0,a)+"...",(n=x(o,i).width)<=e||o.length<4)return o.length<4&&(o=" "),o;return o}function W(e,t,i,o){var n,a;switch(t){case"Near":n=e.x;break;case"Center":n="title"===o?e.width/2-i.width/2:e.x+e.width/2-i.width/2;break;case"Far":n="title"===o?e.width-e.y-i.width:e.x+e.width-i.width}return a="title"===o?e.y+i.height/2:e.y+e.height/2+i.height/2,new Ae(n,a)}function q(e){var i=document.getElementById(e);return i?t.remove(i):null}function X(e,i,o){var n,a=e.zoomSettings.zoomFactor;t.isNullOrUndefined(e.mapScaleValue)&&(e.mapScaleValue=a),e.zoomSettings.shouldZoomInitially&&(e.mapScaleValue=n=a=(e.zoomSettings.shouldZoomInitially||e.enablePersistence)&&1==e.scale?e.scale:t.isNullOrUndefined(e.markerZoomFactor)?1:e.markerZoomFactor,e.mapScaleValue===e.markerZoomFactor||e.enablePersistence||(e.mapScaleValue=a=e.markerZoomFactor));var l=e.centerPosition;t.isNullOrUndefined(e.centerLatOfGivenLocation)||t.isNullOrUndefined(e.centerLongOfGivenLocation)||!e.zoomNotApplied||(l.latitude=e.centerLatOfGivenLocation,l.longitude=e.centerLongOfGivenLocation,e.mapScaleValue=n=a=e.scaleOfGivenLocation);var r=e.baseMapRectBounds.min,s=e.baseMapRectBounds.max,p=o?1:e.mapScaleValue;t.isNullOrUndefined(e.currentShapeDataLength)&&(e.currentShapeDataLength=t.isNullOrUndefined(i.shapeData.features)?i.shapeData.geometries.length:i.shapeData.features.length);var d,c,m=e.totalRect?e.totalRect:e.mapAreaRect,u=(e.availableSize,Math.abs(s.x-r.x)),g=Math.abs(r.y-s.y),y=o?1:1===e.markerZoomFactor?e.mapScaleValue:a,f=x(e.titleSettings.text,e.titleSettings.textStyle);if(t.isNullOrUndefined(l.longitude)||t.isNullOrUndefined(l.latitude))if(t.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType)u*=n=parseFloat(Math.min(m.width/u,m.height/g).toFixed(2)),g*=n,d=m.x+(-r.x+(m.width/2-u/2)),c=m.y+(-r.y+(m.height/2-g/2));else if(e.zoomSettings.shouldZoomInitially||1!==e.markerZoomFactor||1!==e.mapScaleValue)if(n=e.mapScaleValue<1?e.mapScaleValue+1:e.mapScaleValue,e.currentShapeDataLength!==(t.isNullOrUndefined(i.shapeData.features)?i.shapeData.geometries.length:i.shapeData.features.length)){var b=parseFloat(Math.min(m.height/g,m.width/u).toFixed(2));g*=b,u*=b,c=m.y+(-r.y+(m.height/2-g/2)),n=b,d=m.x+(-r.x+(m.width/2-u/2))}else t.isNullOrUndefined(e.previousProjection)||1!==e.mapScaleValue?(d=e.zoomTranslatePoint.x,c=e.zoomTranslatePoint.y):(u*=n=parseFloat(Math.min(m.width/u,m.height/g).toFixed(2)),d=m.x+(-r.x+(m.width/2-u/2)),g*=n,c=m.y+(-r.y+(m.height/2-g/2)));else g*=n=parseFloat(Math.min(m.width/u,m.height/g).toFixed(2)),u*=n,c=m.y+(-r.y+(m.height/2-g/2)),d=m.x+(-r.x+(m.width/2-u/2));else{var v=(u+Math.abs(e.mapAreaRect.width-u))/2/y,S=(g+Math.abs(e.mapAreaRect.height-g))/2/y,_=h(l.latitude,l.longitude,e.mapLayerPanel.calculateFactor(i),i,e);t.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType?(d=-_.x+v,c=-_.y+S+f.height/2,n=p):(1!==Math.floor(e.scale)&&e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(d=-_.x+v,c=-_.y+S):e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(d=-_.x+v,c=-_.y+S,n=p):(d=e.zoomTranslatePoint.x,c=e.zoomTranslatePoint.y),n=e.mapScaleValue)}return t.isNullOrUndefined(e.translatePoint)||(d=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:d,c=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:c),n=e.enablePersistence?e.mapScaleValue>=1?e.mapScaleValue:1:n,{scale:n,location:new Ae(d,c)}}function Y(e,i,o){var n,a=e.zoomSettings.zoomFactor;t.isNullOrUndefined(e.mapScaleValue)&&(e.mapScaleValue=a),e.zoomSettings.shouldZoomInitially&&(e.mapScaleValue=a=n=(e.enablePersistence||e.zoomSettings.shouldZoomInitially)&&1==e.scale?e.scale:t.isNullOrUndefined(e.markerZoomFactor)?e.mapScaleValue:e.markerZoomFactor,a=e.mapScaleValue);var l=e.centerPosition;t.isNullOrUndefined(e.centerLatOfGivenLocation)||t.isNullOrUndefined(e.centerLongOfGivenLocation)||!e.zoomNotApplied||(l.latitude=e.centerLatOfGivenLocation,l.longitude=e.centerLongOfGivenLocation,e.mapScaleValue=n=a=e.scaleOfGivenLocation);var r,s,p=o?1:e.mapScaleValue,d=e.mapAreaRect,c=e.baseMapRectBounds.min,m=e.baseMapRectBounds.max,u=o?1:e.mapScaleValue,g=Math.abs(m.x-c.x),y=Math.abs(c.y-m.y);if(t.isNullOrUndefined(l.longitude)||t.isNullOrUndefined(l.latitude)){var f=0===e.zoomSettings.zoomFactor?1:e.zoomSettings.zoomFactor;n=f=f>10?10:f;var b=0===e.mapScaleValue?1:e.mapScaleValue>10?10:e.mapScaleValue;M=d.x+(-c.x+(d.width/2-g/2)),_=d.y+(-c.y+(d.height/2-y/2));if(!t.isNullOrUndefined(e.zoomTranslatePoint)||!t.isNullOrUndefined(e.previousProjection))if(e.previousProjection!==e.projectionType){var v=[],x={x:M,y:_};v.push(x);for(var S=1;S<10;S++){x={x:v[S-1].x-(d.width/S-d.width/(S+1))/2,y:v[S-1].y-(d.height/S-d.height/(S+1))/2},v.push(x)}M=v[f-1].x,_=v[f-1].y}else M=e.zoomTranslatePoint.x,_=e.zoomTranslatePoint.y,f!==b&&(n=b);t.isNullOrUndefined(e.translatePoint)||(r=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:M,s=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:_)}else{var _=(y+Math.abs(e.mapAreaRect.height-y))/2/u,M=(g+Math.abs(e.mapAreaRect.width-g))/2/u,O=h(l.latitude,l.longitude,e.mapLayerPanel.calculateFactor(i),i,e);t.isNullOrUndefined(e.zoomTranslatePoint)&&t.isNullOrUndefined(e.previousProjection)||e.zoomNotApplied?(r=-O.x+M,s=-O.y+_):e.previousProjection!==e.projectionType?(r=-O.x+M,s=-O.y+_):(r=e.zoomTranslatePoint.x,s=e.zoomTranslatePoint.y,a=p),t.isNullOrUndefined(e.translatePoint)||(s=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:s,r=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:r),n=0!==a?a:1}return n=e.enablePersistence?0==e.mapScaleValue?1:e.mapScaleValue:n,{scale:o?1:n,location:new Ae(r,s)}}function J(e){return document.getElementById(e)}function K(e,t){return e.formatFunction=e.intl.getNumberFormat({format:e.format,useGrouping:e.useGroupingSeparator}),e.formatFunction(t)}function Q(e){var i=null;try{document.querySelectorAll(e).length&&(i=t.compile(document.querySelector(e).innerHTML.trim()))}catch(o){i=t.compile(e)}return i}function $(e){return document.getElementById(e)}function ee(e,t){var i,o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),n=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),a=t.layers[o],l=a.layerData[n].property;return a.dataSource&&(i=a.dataSource[R(a.dataSource,l,a.shapeDataPath,a.shapePropertyPath)]),{shapeData:l,data:i}}function te(e,t,i,o){var n=ee(e,i),a={cancel:!1,name:o,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:n.shapeData,data:n.data,target:e,maps:i};if(i.isBlazor){a.maps,a.shapeData;a=Ee(a,["maps","shapeData"])}return i.trigger(o,a),a}function ie(e){return document.getElementsByClassName(e)}function oe(e,t){var i=null;return document.getElementById(t)&&(i=document.getElementById(t).querySelector("#"+e)),i}function ne(e,t,i,o){for(var n,a=o.layers[e].shapeData.features,l=0;l<a.length;l++)if(a[l].properties.name===t){n=o.element.id+"_LayerIndex_"+e+"_shapeIndex_"+l+"_dataIndex_undefined";break}return $(n)}function ae(e,i,o){return t.createElement("style",{id:e,innerHTML:"."+i+"{fill:"+o.fill+";opacity:"+o.opacity.toString()+";stroke-width:"+o.border.width.toString()+";stroke:"+o.border.color+";}"})}function le(e,t,i){$(e).innerHTML="."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+"}"}function re(e,t,i,o,n){var a={color:e.border.color,width:e.border.width/t.scale},l={opacity:e.opacity,fill:e.fill,border:a,name:Gt,target:i.id,cancel:!1,shapeData:o,data:n,maps:t};t.trigger("itemSelection",l,function(e){$("ShapeselectionMap")?le("ShapeselectionMap","ShapeselectionMapStyle",l):document.body.appendChild(ae("ShapeselectionMap","ShapeselectionMapStyle",l))})}function se(e){e.removeAttribute("class")}function pe(e,i,o,n,a,l,r){void 0===r&&(r=0);var s=n.x,p=n.y,d=0,h=e.getAttribute("transform")||"";new t.Animation({}).animate(e,{duration:o,delay:i,progress:function(t){t.timeStamp>t.delay&&(d=(t.timeStamp-t.delay)/t.duration,e.setAttribute("transform","translate( "+(s-r*d)+" "+(p-r*d)+" ) scale("+d+")"))},end:function(t){if(e.setAttribute("transform",h),l){var i={cancel:!1,name:Ht,element:l,maps:a.isBlazor?null:a};a.trigger(Ht,i)}}})}function de(e){q(e)}function he(e,i,o,n,a,l,r,s,p){for(var d=document.getElementById(r),h=x(e,{fontFamily:"Segoe UI",size:"8px",fontStyle:"Normal",fontWeight:"Regular"}).width,c=e.split(" "),m=c[0].length,u=1;u<c.length;u++)m<c[u].length&&(m=c[u].length);d||(d=t.createElement("div",{id:r,styles:'background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center'})),o<a-h?o=o:o>a-h&&o<a-8*m?h=a-o:o>=a-8*m&&(o>h?o-=h:(h=o,o=0));var g=i.split("px");ce(d,e,o,n,g,h,a,s);d.clientHeight+2*parseInt(g[0],10)>l&&(h=o,o=0),ce(d,e,o,n,g,h,a,s),p&&setTimeout(de,5e3,r)}function ce(e,t,i,o,n,a,l,r){e.innerHTML=t,e.style.top=(2*parseInt(n[0],10)).toString()+"px",e.style.left=i.toString()+"px",e.style.width=a.toString()+"px",e.style.maxWidth=l.toString()+"px",e.style.wordWrap="break-word",r.appendChild(e)}function me(e,i,o,n,a){var l=$(e),r="top:"+o.toString()+"px;left:"+n.toString()+"px;color: #000000; background:#FFFFFF;position:absolute;border:1px solid #707070;font-size:"+a+";border-radius:2px;";l?(l.setAttribute("innerHTML","&nbsp;"+i+"&nbsp;"),l.setAttribute("styles",r)):(l=t.createElement("div",{id:e,innerHTML:"&nbsp;"+i+"&nbsp;",styles:r}),document.body.appendChild(l))}function ue(e,t,o,n,a){var l=new i.SvgRenderer(""),r=ge(e,o,t,a,n);return l["draw"+r.functionName](r.renderOption)}function ge(e,i,o,n,a){var l,r="Path",s=i.width,p=i.height,d=e.x,h=e.y,c=e.x+-s/2,m=e.y+-p/2;switch(o){case"Circle":case"Bubble":r="Ellipse",t.merge(n,{rx:s/2,ry:p/2,cx:d,cy:h});break;case"VerticalLine":l="M "+d+" "+(h+p/2)+" L "+d+" "+(h+-p/2),t.merge(n,{d:l});break;case"Diamond":l="M "+c+" "+h+" L "+d+" "+(h+-p/2)+" L "+(d+s/2)+" "+h+" L "+d+" "+(h+p/2)+" L "+c+" "+h+" z",t.merge(n,{d:l});break;case"Rectangle":l="M "+c+" "+(h+-p/2)+" L "+(d+s/2)+" "+(h+-p/2)+" L "+(d+s/2)+" "+(h+p/2)+" L "+c+" "+(h+p/2)+" L "+c+" "+(h+-p/2)+" z",t.merge(n,{d:l});break;case"Triangle":l="M "+c+" "+(h+p/2)+" L "+d+" "+(h+-p/2)+" L "+(d+s/2)+" "+(h+p/2)+" L "+c+" "+(h+p/2)+" z",t.merge(n,{d:l});break;case"InvertedTriangle":l="M "+(d+s/2)+" "+(h-p/2)+" L "+d+" "+(h+p/2)+" L "+(d-s/2)+" "+(h-p/2)+" L "+(d+s/2)+" "+(h-p/2)+" z",t.merge(n,{d:l});break;case"Pentagon":for(var u=void 0,g=void 0,y=0;y<=5;y++)u=s/2*Math.cos(Math.PI/180*(72*y)),g=s/2*Math.sin(Math.PI/180*(72*y)),l=0===y?"M "+(d+u)+" "+(h+g)+" ":l.concat("L "+(d+u)+" "+(h+g)+" ");l=l.concat("Z"),t.merge(n,{d:l});break;case"Star":l="M "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" L "+(e.x-i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x+i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x-i.width/3)+" "+(e.y-i.height/2)+" L "+e.x+" "+(e.y+i.height/2)+" L "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" Z",t.merge(n,{d:l});break;case"Cross":l="M "+c+" "+h+" L "+(d+s/2)+" "+h+" M "+d+" "+(h+p/2)+" L "+d+" "+(h+-p/2),t.merge(n,{d:l});break;case"Image":r="Image",t.merge(n,{href:a,height:p,width:s,x:c,y:m})}return{renderOption:n,functionName:r}}function ye(e,t){var i,o;return t.appendChild(e),i=e.offsetWidth,o=e.offsetHeight,t.removeChild(e),new Ne(i,o)}function fe(e,t,i,o){for(var n,a=0;a<e.childElementCount;a++)if((n=e.childNodes[a]).id.indexOf("_NavigationGroup")>-1)be(n,t,i,o);else{var l=o.layersCollection[t].shapeSettings.border.width;n.setAttribute("stroke-width",(l/i).toString())}}function be(e,t,i,o){for(var n,a=0;a<e.childElementCount;a++)if("path"===(n=e.childNodes[a]).tagName){var l=o.layersCollection[t].navigationLineSettings[parseFloat(n.id.split("_NavigationIndex_")[1].split("_")[0])].width;n.setAttribute("stroke-width",(l/i).toString())}}function ve(e){for(var t=[],i=e.touches,o=0;o<i.length;o++)t.push({pageX:i[o].pageX,pageY:i[o].pageY});return t}function xe(e,t){var i=Se(e[0],e[1]);return Se(t[0],t[1])/i}function Se(e,t){var i=e.pageX-t.pageX,o=e.pageY-t.pageY;return Math.sqrt(i*i+o*o)}function _e(e,t){var i=t.element.getBoundingClientRect(),o=i.top+document.defaultView.pageXOffset,n=i.left+document.defaultView.pageYOffset;return Array.prototype.slice.call(e).map(function(e){return{x:e.pageX-n,y:e.pageY-o}})}function Me(e){return{x:e.map(function(e){return e.x}).reduce(Oe)/e.length,y:e.map(function(e){return e.y}).reduce(Oe)/e.length}}function Oe(e,t){return e+t}function Ce(e,t,i,o,n,a,l){var r=0,s=l.previousPoint,p=l.previousScale,d=n-p,h=new We(0,0),c=1;if(n!==p){var m=function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)}(s,o),u=function(e,t){return null===t?e.x:e.y-t*e.x}(s,m),g=o.x-s.x,y=o.y-s.y;Le(e,t,i,function(e){e.timeStamp>e.delay&&(r=(e.timeStamp-e.delay)/e.duration,c=p+r*d,h.x=s.x+r*g/(c/n),h.y=null==m?s.y+r*y:m*h.x+u,e.element.setAttribute("transform","scale( "+c+" ) translate( "+h.x+" "+h.y+" )"),l.translatePoint=h,l.scale=c,l.zoomModule.processTemplate(o.x,o.y,c,l))},function(){l.translatePoint=o,l.scale=n,e.setAttribute("transform","scale( "+n+" ) translate( "+o.x+" "+o.y+" )"),l.zoomModule.processTemplate(o.x,o.y,n,l)})}else e.setAttribute("transform","scale( "+n+" ) translate( "+o.x+" "+o.y+" )")}function Le(e,t,i,o,n){var a,l=this,r=null,s=function(t){r||(r=t);var p=t-r;p<i?(o.call(l,{element:e,delay:0,timeStamp:p,duration:i}),window.requestAnimationFrame(s)):(window.cancelAnimationFrame(a),n.call(l,{element:e}),e.setAttribute("style","visibility:visible"))};a=window.requestAnimationFrame(s)}function we(e,t,i,o){var n=0,a=e.getAttribute("transform").split(" ");2===a.length&&(a[2]=a[1].split(")")[0],a[1]=a[0].split("(")[1]);var l=new We(parseInt(a[1],10),parseInt(a[2],10)),r=o.x-l.x,s=o.y-l.y,p=new We(0,0);Le(e,0,i,function(e){e.timeStamp>e.delay&&(n=(e.timeStamp-e.delay)/e.duration,p.x=l.x+n*r,p.y=l.y+n*s,e.element.setAttribute("transform","translate( "+p.x+" "+p.y+" )"))},function(){e.setAttribute("transform","translate( "+o.x+" "+o.y+" )")})}function Pe(e,i){t.isNullOrUndefined(i.shouldZoomCurrentFactor)?!t.isNullOrUndefined(i.shouldZoomPreviousFactor)&&t.isNullOrUndefined(i.shouldZoomCurrentFactor)&&i.shouldZoomPreviousFactor!==e?i.shouldZoomCurrentFactor=e:i.shouldZoomPreviousFactor=e:(i.shouldZoomCurrentFactor=null,i.shouldZoomPreviousFactor=null)}function Ie(e,t,i,o,n,a,l){var r,s,p,d,h,c,m=Math.sin(t*Math.PI/180),u=Math.log((1+m)/(1-m))/2,g=Math.max(Math.min(u,Math.PI),-Math.PI)/2,y=Math.sin(e*Math.PI/180),f=Math.log((1+y)/(1-y))/2;r=(g-Math.max(Math.min(f,Math.PI),-Math.PI)/2)/Math.PI;var b=o-i;s=(b<0?b+360:b)/360;return d=Math.floor(Math.log(a/256/r)/Math.LN2),h=Math.floor(Math.log(n/256/s)/Math.LN2),c=Math.min(d,h),p=Math.min(c,9),l.isTileMap||this.compareZoomFactor(p,l),p}var Te,ke=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ee=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},Ne=function(){return function(e,t){this.width=e,this.height=t}}(),Ae=function(){return function(e,t){this.x=e,this.y=t}}(),Be=function(){return function(e,t){this.min=e,this.max=t}}(),ze=function(){return function(e,t){this.latitude=new Be(e.min,e.max),this.longitude=new Be(t.min,t.max)}}(),Fe=function(){return function(e,t,i,o,n,a,l){void 0===a&&(a=""),this.transform="",this.baseLine="auto",this.id=e,this.text=n,this.transform=a,this.anchor=o,this.x=t,this.y=i,this.baseLine=l}}(),je=function(){return function(e,t,i,o,n,a,l){this.id=e,this.opacity=n,this.fill=t,this.stroke=o,this["stroke-width"]=i,this["stroke-dasharray"]=a,this.d=l}}(),Re=function(){return function(e,t,i){this.r=e,this.g=t,this.b=i}}(),Ue=function(e){function t(t,i,o,n,a,l,r,s,p){var d=e.call(this,t,i,o.width,o.color,n,p)||this;return d.y=a.y,d.x=a.x,d.height=a.height,d.width=a.width,d.rx=l||0,d.ry=r||0,d.transform=s||"",d["stroke-dasharray"]=p,d}return ke(t,e),t}(je),De=function(e){function t(t,i,o,n,a,l,r,s){var p=e.call(this,t,i,o.width,o.color,n)||this;return p.cy=l,p.cx=a,p.r=r,p["stroke-dasharray"]=s,p}return ke(t,e),t}(je),Ze=function(e){function t(t,i,o,n,a,l,r){void 0===l&&(l=1),void 0===r&&(r="");var s=e.call(this,t,o,n,a,l,r)||this;return s.points=i,s}return ke(t,e),t}(je),He=function(e){function t(t,i,o,n,a,l,r){return void 0===l&&(l=1),void 0===r&&(r=""),e.call(this,t,i,o,n,a,l,r)||this}return ke(t,e),t}(Ze),Ve=function(e){function t(t,i,o,n,a,l,r){void 0===l&&(l=1),void 0===r&&(r="");var s=e.call(this,t,o,n,a,l,r)||this;return s.x1=i.x1,s.y1=i.y1,s.x2=i.x2,s.y2=i.y2,s}return ke(t,e),t}(je),Ge=function(){return function(e,t,i,o){this.x1=e,this.y1=t,this.x2=i,this.y2=o}}(),We=function(){return function(e,t){this.x=e,this.y=t}}(),qe=function(){return function(e,t,i,o){this.x=e,this.y=t,this.width=i,this.height=o}}(),Xe=function(){return function(e,t,i,o,n,a,l,r,s){void 0===a&&(a="userSpaceOnUse"),void 0===l&&(l="userSpaceOnUse"),void 0===r&&(r=""),void 0===s&&(s=""),this.id=e,this.x=t,this.y=i,this.width=o,this.height=n,this.patternUnits=a,this.patternContentUnits=l,this.patternTransform=r,this.href=s}}(),Ye=function(){return function(e,t,i,o,n){this.dataOptions=e,this.type=t||"GET",this.async=i||!0,this.contentType=o,this.sendData=n}}();!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Te||(Te={}));var Je;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"}}(Je||(Je={}));var Ke;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"}}(Ke||(Ke={}));var Qe;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#000000",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Qe||(Qe={}));var $e;!function(e){e.mapsTitleFont={fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",size:"14px",fontStyle:"Medium",color:"#FFFFFF"},e.mapsSubTitleFont={size:"13px",color:"#FFFFFF",fontWeight:"Medium",fontFamily:"Roboto, Noto, Sans-serif",fontStyle:"Medium"},e.tooltipLabelFont={size:"12px",color:"#282727",fontWeight:"Regular",fontFamily:"Roboto",fontStyle:"Regular"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",color:"#DADADA",fontStyle:"Medium"}}($e||($e={}));var et=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),tt=function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l},it=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("")],i.prototype,"content",void 0),tt([t.Property("0px")],i.prototype,"x",void 0),tt([t.Property("0px")],i.prototype,"y",void 0),tt([t.Property("None")],i.prototype,"verticalAlignment",void 0),tt([t.Property("None")],i.prototype,"horizontalAlignment",void 0),tt([t.Property("-1")],i.prototype,"zIndex",void 0),i}(t.ChildProperty),ot=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("Start")],i.prototype,"position",void 0),tt([t.Property("false")],i.prototype,"showArrow",void 0),tt([t.Property(2)],i.prototype,"size",void 0),tt([t.Property("black")],i.prototype,"color",void 0),tt([t.Property(0)],i.prototype,"offSet",void 0),i}(t.ChildProperty),nt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("12px")],i.prototype,"size",void 0),tt([t.Property(null)],i.prototype,"color",void 0),tt([t.Property("Roboto, Noto, Sans-serif")],i.prototype,"fontFamily",void 0),tt([t.Property("Medium")],i.prototype,"fontWeight",void 0),tt([t.Property("Medium")],i.prototype,"fontStyle",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),at=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("")],i.prototype,"color",void 0),tt([t.Property(0)],i.prototype,"width",void 0),i}(t.ChildProperty),lt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(null)],i.prototype,"latitude",void 0),tt([t.Property(null)],i.prototype,"longitude",void 0),i}(t.ChildProperty),rt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"visible",void 0),tt([t.Property("")],i.prototype,"template",void 0),tt([t.Property("")],i.prototype,"fill",void 0),tt([t.Complex({color:"transparent",width:1},at)],i.prototype,"border",void 0),tt([t.Complex(Te.tooltipLabelFont,nt)],i.prototype,"textStyle",void 0),tt([t.Property(null)],i.prototype,"format",void 0),tt([t.Property(null)],i.prototype,"valuePath",void 0),i}(t.ChildProperty),st=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(10)],i.prototype,"left",void 0),tt([t.Property(10)],i.prototype,"right",void 0),tt([t.Property(10)],i.prototype,"top",void 0),tt([t.Property(10)],i.prototype,"bottom",void 0),i}(t.ChildProperty),pt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("#000000")],i.prototype,"color",void 0),tt([t.Property(1)],i.prototype,"width",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),dt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"allowClustering",void 0),tt([t.Complex({color:"transparent",width:1},at)],i.prototype,"border",void 0),tt([t.Property("#D2691E")],i.prototype,"fill",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property("Rectangle")],i.prototype,"shape",void 0),tt([t.Property(12)],i.prototype,"width",void 0),tt([t.Property(12)],i.prototype,"height",void 0),tt([t.Property(new Ae(0,0))],i.prototype,"offset",void 0),tt([t.Property("")],i.prototype,"imageUrl",void 0),tt([t.Property("")],i.prototype,"dashArray",void 0),tt([t.Complex({},nt)],i.prototype,"labelStyle",void 0),tt([t.Property(!1)],i.prototype,"allowClusterExpand",void 0),tt([t.Complex({},pt)],i.prototype,"connectorLineSettings",void 0),i}(t.ChildProperty),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return et(t,e),t}(t.ChildProperty),ct=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(null)],i.prototype,"from",void 0),tt([t.Property(null)],i.prototype,"to",void 0),tt([t.Property(null)],i.prototype,"value",void 0),tt([t.Property(null)],i.prototype,"color",void 0),tt([t.Property(null)],i.prototype,"minOpacity",void 0),tt([t.Property(null)],i.prototype,"maxOpacity",void 0),tt([t.Property(null)],i.prototype,"label",void 0),tt([t.Property(!0)],i.prototype,"showLegend",void 0),i}(t.ChildProperty),mt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(null)],i.prototype,"shapePath",void 0),tt([t.Property(null)],i.prototype,"shapeValue",void 0),i}(t.ChildProperty),ut=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"enable",void 0),tt([t.Property(null)],i.prototype,"fill",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property(!1)],i.prototype,"enableMultiSelect",void 0),tt([t.Complex({color:"transparent",width:0},at)],i.prototype,"border",void 0),i}(t.ChildProperty),gt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(null)],i.prototype,"fill",void 0),tt([t.Property(!1)],i.prototype,"enable",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Complex({color:"transparent",width:0},at)],i.prototype,"border",void 0),i}(t.ChildProperty),yt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"visible",void 0),tt([t.Property(1)],i.prototype,"width",void 0),tt([t.Property(null)],i.prototype,"longitude",void 0),tt([t.Property(null)],i.prototype,"latitude",void 0),tt([t.Property("")],i.prototype,"dashArray",void 0),tt([t.Property("black")],i.prototype,"color",void 0),tt([t.Property(0)],i.prototype,"angle",void 0),tt([t.Complex({showArrow:!1,position:"Start",size:5,color:"black"},ot)],i.prototype,"arrowSettings",void 0),tt([t.Complex({},ut)],i.prototype,"selectionSettings",void 0),tt([t.Complex({},gt)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),ft=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Complex({},at)],i.prototype,"border",void 0),tt([t.Property(!1)],i.prototype,"visible",void 0),tt([t.Property([])],i.prototype,"dataSource",void 0),tt([t.Property(1e3)],i.prototype,"animationDuration",void 0),tt([t.Property(0)],i.prototype,"animationDelay",void 0),tt([t.Property("")],i.prototype,"fill",void 0),tt([t.Property(10)],i.prototype,"minRadius",void 0),tt([t.Property(20)],i.prototype,"maxRadius",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property(null)],i.prototype,"valuePath",void 0),tt([t.Property("Circle")],i.prototype,"bubbleType",void 0),tt([t.Property(null)],i.prototype,"colorValuePath",void 0),tt([t.Collection([],ct)],i.prototype,"colorMapping",void 0),tt([t.Complex({},rt)],i.prototype,"tooltipSettings",void 0),tt([t.Complex({},ut)],i.prototype,"selectionSettings",void 0),tt([t.Complex({},gt)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),bt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("")],i.prototype,"text",void 0),tt([t.Property("")],i.prototype,"description",void 0),i}(t.ChildProperty),vt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Complex({size:Te.mapsSubTitleFont.size},nt)],i.prototype,"textStyle",void 0),tt([t.Property("Center")],i.prototype,"alignment",void 0),i}(bt),xt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Complex({size:Te.mapsTitleFont.size},nt)],i.prototype,"textStyle",void 0),tt([t.Property("Center")],i.prototype,"alignment",void 0),tt([t.Complex({},vt)],i.prototype,"subtitleSettings",void 0),i}(bt),St=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"enable",void 0),tt([t.Property(!0)],i.prototype,"enablePanning",void 0),tt([t.Property("Horizontal")],i.prototype,"toolBarOrientation",void 0),tt([t.Property(null)],i.prototype,"color",void 0),tt([t.Property("#e61576")],i.prototype,"highlightColor",void 0),tt([t.Property("#e61576")],i.prototype,"selectionColor",void 0),tt([t.Property("Far")],i.prototype,"horizontalAlignment",void 0),tt([t.Property("Near")],i.prototype,"verticalAlignment",void 0),tt([t.Property(["ZoomIn","ZoomOut","Reset"])],i.prototype,"toolbars",void 0),tt([t.Property(!0)],i.prototype,"mouseWheelZoom",void 0),tt([t.Property(!1)],i.prototype,"doubleClickZoom",void 0),tt([t.Property(!1)],i.prototype,"pinchZooming",void 0),tt([t.Property(!1)],i.prototype,"zoomOnClick",void 0),tt([t.Property(1)],i.prototype,"zoomFactor",void 0),tt([t.Property(10)],i.prototype,"maxZoom",void 0),tt([t.Property(1)],i.prototype,"minZoom",void 0),tt([t.Property(!1)],i.prototype,"shouldZoomInitially",void 0),i}(t.ChildProperty),_t=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"enable",void 0),tt([t.Property(!0)],i.prototype,"applyShapeSettings",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property("")],i.prototype,"fill",void 0),tt([t.Complex({color:"",width:0},at)],i.prototype,"border",void 0),i}(t.ChildProperty),Mt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"toggleVisibility",void 0),tt([t.Property(!1)],i.prototype,"visible",void 0),tt([t.Property("transparent")],i.prototype,"background",void 0),tt([t.Property("Layers")],i.prototype,"type",void 0),tt([t.Property(!1)],i.prototype,"invertedPointer",void 0),tt([t.Property("After")],i.prototype,"labelPosition",void 0),tt([t.Property("None")],i.prototype,"labelDisplayMode",void 0),tt([t.Property("Circle")],i.prototype,"shape",void 0),tt([t.Property("")],i.prototype,"width",void 0),tt([t.Property("")],i.prototype,"height",void 0),tt([t.Complex({},nt)],i.prototype,"textStyle",void 0),tt([t.Property(15)],i.prototype,"shapeWidth",void 0),tt([t.Property(15)],i.prototype,"shapeHeight",void 0),tt([t.Property(10)],i.prototype,"shapePadding",void 0),tt([t.Complex({color:"#000000",width:0},at)],i.prototype,"border",void 0),tt([t.Complex({color:"#000000",width:0},at)],i.prototype,"shapeBorder",void 0),tt([t.Complex({},bt)],i.prototype,"title",void 0),tt([t.Complex({},nt)],i.prototype,"titleStyle",void 0),tt([t.Property("Bottom")],i.prototype,"position",void 0),tt([t.Property("Center")],i.prototype,"alignment",void 0),tt([t.Property("None")],i.prototype,"orientation",void 0),tt([t.Property({x:0,y:0})],i.prototype,"location",void 0),tt([t.Property(null)],i.prototype,"fill",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property("Default")],i.prototype,"mode",void 0),tt([t.Property(null)],i.prototype,"showLegendPath",void 0),tt([t.Property(null)],i.prototype,"valuePath",void 0),tt([t.Property(!1)],i.prototype,"removeDuplicateLegend",void 0),tt([t.Complex({},_t)],i.prototype,"toggleLegendSettings",void 0),i}(t.ChildProperty),Ot=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(!1)],i.prototype,"visible",void 0),tt([t.Complex({width:0,color:"transparent"},at)],i.prototype,"border",void 0),tt([t.Property("black")],i.prototype,"fill",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property(5)],i.prototype,"rx",void 0),tt([t.Property(5)],i.prototype,"ry",void 0),tt([t.Complex({},nt)],i.prototype,"textStyle",void 0),tt([t.Property("")],i.prototype,"labelPath",void 0),tt([t.Property("None")],i.prototype,"smartLabelMode",void 0),tt([t.Property("None")],i.prototype,"intersectionAction",void 0),tt([t.Property("")],i.prototype,"template",void 0),i}(t.ChildProperty),Ct=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property("#A6A6A6")],i.prototype,"fill",void 0),tt([t.Property([])],i.prototype,"palette",void 0),tt([t.Property(5)],i.prototype,"circleRadius",void 0),tt([t.Complex({width:0,color:"#000000"},at)],i.prototype,"border",void 0),tt([t.Property("")],i.prototype,"dashArray",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property(null)],i.prototype,"colorValuePath",void 0),tt([t.Property(null)],i.prototype,"valuePath",void 0),tt([t.Collection([],ct)],i.prototype,"colorMapping",void 0),tt([t.Property(!1)],i.prototype,"autofill",void 0),i}(t.ChildProperty),Lt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Complex({color:"transparent",width:1},at)],i.prototype,"border",void 0),tt([t.Property(null)],i.prototype,"dashArray",void 0),tt([t.Property(!1)],i.prototype,"visible",void 0),tt([t.Property("#FF471A")],i.prototype,"fill",void 0),tt([t.Property(10)],i.prototype,"height",void 0),tt([t.Property(10)],i.prototype,"width",void 0),tt([t.Property(1)],i.prototype,"opacity",void 0),tt([t.Property(null)],i.prototype,"colorValuePath",void 0),tt([t.Property(null)],i.prototype,"shapeValuePath",void 0),tt([t.Property(null)],i.prototype,"imageUrlValuePath",void 0),tt([t.Property("Balloon")],i.prototype,"shape",void 0),tt([t.Property("")],i.prototype,"legendText",void 0),tt([t.Property(new Ae(0,0))],i.prototype,"offset",void 0),tt([t.Property("")],i.prototype,"imageUrl",void 0),tt([t.Property(null)],i.prototype,"template",void 0),tt([t.Property([])],i.prototype,"dataSource",void 0),tt([t.Complex({},rt)],i.prototype,"tooltipSettings",void 0),tt([t.Property(1e3)],i.prototype,"animationDuration",void 0),tt([t.Property(0)],i.prototype,"animationDelay",void 0),tt([t.Complex({},ut)],i.prototype,"selectionSettings",void 0),tt([t.Complex({},gt)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),wt=function(e){function t(t,i,o,n){return e.call(this,t,i,o,n)||this}return et(t,e),t}(Lt),Pt=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBaseLayer=!1,t}return et(i,e),tt([t.Property(null)],i.prototype,"shapeData",void 0),tt([t.Property()],i.prototype,"query",void 0),tt([t.Complex({},Ct)],i.prototype,"shapeSettings",void 0),tt([t.Property([])],i.prototype,"dataSource",void 0),tt([t.Property("Layer")],i.prototype,"type",void 0),tt([t.Property("Geographic")],i.prototype,"geometryType",void 0),tt([t.Property("Aerial")],i.prototype,"bingMapType",void 0),tt([t.Property("RoadMap")],i.prototype,"staticMapType",void 0),tt([t.Property("")],i.prototype,"key",void 0),tt([t.Property("Geometry")],i.prototype,"layerType",void 0),tt([t.Property("https://a.tile.openstreetmap.org/level/tileX/tileY.png")],i.prototype,"urlTemplate",void 0),tt([t.Property(!0)],i.prototype,"visible",void 0),tt([t.Property("name")],i.prototype,"shapeDataPath",void 0),tt([t.Property("name")],i.prototype,"shapePropertyPath",void 0),tt([t.Property(0)],i.prototype,"animationDuration",void 0),tt([t.Collection([],wt)],i.prototype,"markerSettings",void 0),tt([t.Complex({},dt)],i.prototype,"markerClusterSettings",void 0),tt([t.Complex({},Ot)],i.prototype,"dataLabelSettings",void 0),tt([t.Collection([],ft)],i.prototype,"bubbleSettings",void 0),tt([t.Collection([],yt)],i.prototype,"navigationLineSettings",void 0),tt([t.Complex({},rt)],i.prototype,"tooltipSettings",void 0),tt([t.Complex({},ut)],i.prototype,"selectionSettings",void 0),tt([t.Complex({},gt)],i.prototype,"highlightSettings",void 0),tt([t.Complex({},_t)],i.prototype,"toggleLegendSettings",void 0),tt([t.Collection([],mt)],i.prototype,"initialShapeSelection",void 0),i}(t.ChildProperty),It=function(){return function(e,t,i,o,n,a,l){void 0===i&&(i=256),void 0===o&&(o=256),void 0===n&&(n=0),void 0===a&&(a=0),void 0===l&&(l=null),this.x=e,this.y=t,this.top=n,this.left=a,this.height=i,this.width=o,this.src=l}}(),Tt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),tt([t.Property(null)],i.prototype,"background",void 0),tt([t.Complex({color:"transparent",width:1},at)],i.prototype,"border",void 0),i}(t.ChildProperty),kt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},Et=function(){function e(e){this.maps=e,this.trackElements=[],this.sameMarkerData=[]}return e.prototype.markerRender=function(e,i,o,n){var a=this,l=0,r=0,s=this.maps.layersCollection[i];this.markerSVGObject=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",style:"pointer-events: auto;"});var p=t.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+i+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+this.maps.mapAreaRect.y+"px;left:"+this.maps.mapAreaRect.x+"px;height:"+this.maps.mapAreaRect.height+"px;width:"+this.maps.mapAreaRect.width+"px;"});s.markerSettings.map(function(d,m){var u=d.dataSource;Array.prototype.forEach.call(u,function(g,y){a.maps.markerNullCount=m>0&&0===y?0:a.maps.markerNullCount;var f={cancel:!1,name:Nt,fill:d.fill,height:d.height,width:d.width,imageUrl:d.imageUrl,shape:d.shape,template:d.template,data:g,maps:a.maps,marker:d,border:d.border,colorValuePath:d.colorValuePath,shapeValuePath:d.shapeValuePath,imageUrlValuePath:d.imageUrlValuePath};if(f=C(f,g),f=L(f,g),a.maps.isBlazor){f.maps,f.marker;var b=kt(f,["maps","marker"]);f=b}a.maps.trigger("markerRendering",f,function(b){d.colorValuePath!==f.colorValuePath&&(f=C(f,g)),d.shapeValuePath!==f.shapeValuePath&&(f=L(f,g));var v=parseFloat(g.longitude),x=parseFloat(g.latitude);if(a.maps.isBlazor){for(var S={},_=[],M=0,O=0;O<Object.keys(g).length;O++)"latitude"!==Object.keys(g)[O].toLowerCase()&&"longitude"!==Object.keys(g)[O].toLowerCase()&&"name"!==Object.keys(g)[O].toLowerCase()&&"blazortemplateid"!==Object.keys(g)[O].toLowerCase()&&"text"!==Object.keys(g)[O].toLowerCase()&&(_[M]=g[Object.keys(g)[O].toLowerCase()],S.text=_,M++);g.text=S.text}var P=d.offset;if(!f.cancel&&d.visible&&!t.isNullOrUndefined(v)&&!t.isNullOrUndefined(x)){var I=a.maps.element.id+"_LayerIndex_"+i+"_MarkerIndex_"+m+"_dataIndex_"+y,E=a.maps.isTileMap?c(new We(v,x),o,a.maps.tileTranslatePoint,!0):h(x,v,o,s,a.maps),N=0!==s.animationDuration||t.isNullOrUndefined(a.maps.zoomModule),A=a.maps.isTileMap?new Object:!t.isNullOrUndefined(a.maps.zoomModule)&&a.maps.zoomSettings.zoomFactor>1?Y(a.maps,s,N):X(a.maps,s,N),B="AddMarker"===n?a.maps.scale:A.scale,z="AddMarker"===n?a.maps.translatePoint:A.location;f.template?(r++,k(f,void 0,I,g,m,p,E,B,P,a.maps)):(l++,T(f,d,u,y,E,z,I,P,B,a.maps,a.markerSVGObject))}r+=f.cancel?1:0,l+=f.cancel?1:0,a.maps.markerNullCount=t.isNullOrUndefined(v)||t.isNullOrUndefined(x)?a.maps.markerNullCount+1:a.maps.markerNullCount;var F=u.length-a.maps.markerNullCount;a.markerSVGObject.childElementCount===F-r&&"Template"!==n&&(e.appendChild(a.markerSVGObject),s.markerClusterSettings.allowClustering&&(a.maps.svgObject.appendChild(a.markerSVGObject),a.maps.element.appendChild(a.maps.svgObject),w(s,a.markerSVGObject,a.maps,i,a.markerSVGObject,e,!0))),p.childElementCount===u.length-l&&J(a.maps.element.id+"_Secondary_Element")&&(J(a.maps.element.id+"_Secondary_Element").appendChild(p),s.markerClusterSettings.allowClustering&&w(s,p,a.maps,i,a.markerSVGObject,e,!1))})})})},e.prototype.calculateIndividualLayerMarkerZoomLevel=function(e,t,i){var o,n,a,l,r=Math.abs(this.maps.baseMapBounds.latitude.max-this.maps.baseMapBounds.latitude.min),s=Math.abs(this.maps.baseMapBounds.longitude.max-this.maps.baseMapBounds.longitude.min);return o=Math.floor(Math.log(t/r)),o=o>i?i:o,n=Math.floor(Math.log(e/s)),n=n>i?i:n,a=Math.min(o,n),l=Math.min(a,i-1),this.maps.isTileMap||Pe(l,this.maps),l},e.prototype.calculateZoomCenterPositionAndFactor=function(e){if(this.maps.zoomSettings.shouldZoomInitially&&this.maps.markerModule){var i,o,n,a,l=void 0,r=void 0,s=void 0,p=this.maps.mapAreaRect.width,d=this.maps.mapAreaRect.height;if(Array.prototype.forEach.call(e,function(e,l){0!==e.markerSettings.length&&Array.prototype.forEach.call(e.markerSettings,function(e,l){var r=e.dataSource;Array.prototype.forEach.call(r,function(e,l){var r=parseFloat(e.latitude),s=parseFloat(e.longitude);i=t.isNullOrUndefined(i)&&0===l?s:i,o=t.isNullOrUndefined(o)&&0===l?r:o,n=t.isNullOrUndefined(n)&&0===l?r:n,a=t.isNullOrUndefined(a)&&0===l?s:a,i>s&&(i=s),n>r&&(n=r),a<s&&(a=s),o<r&&(o=r)})})}),!(t.isNullOrUndefined(n)||t.isNullOrUndefined(i)||t.isNullOrUndefined(a)||t.isNullOrUndefined(o))){r=(n+o)/2,s=(i+a)/2,this.maps.centerPosition.latitude=r,this.maps.centerPosition.longitude=s;var h=void 0;this.maps.isTileMap||0===this.maps.baseMapRectBounds.min.x?(l=Ie(n,o,i,a,p,d,this.maps),this.maps.isTileMap?h=t.isNullOrUndefined(this.maps.markerZoomFactor)?l:t.isNullOrUndefined(this.maps.mapScaleValue)?l:this.maps.mapScaleValue>1&&1!==this.maps.markerZoomFactor?this.maps.mapScaleValue:l:(h=t.isNullOrUndefined(this.maps.mapScaleValue)?l:1!==Math.floor(this.maps.scale)&&this.maps.mapScaleValue!==l&&t.isNullOrUndefined(this.maps.shouldZoomCurrentFactor)?this.maps.mapScaleValue:l)!==this.maps.mapScaleValue||1!==this.maps.markerZoomFactor&&1!==this.maps.mapScaleValue||this.maps.enablePersistence||(h=l)):(l=this.calculateIndividualLayerMarkerZoomLevel(p,d,10),h=t.isNullOrUndefined(this.maps.mapScaleValue)?l:this.maps.mapScaleValue!==l?this.maps.mapScaleValue:l),this.maps.markerZoomFactor=h}}else this.maps.markerZoomFactor>1&&(this.maps.centerPosition.latitude=null,this.maps.centerPosition.longitude=null,this.maps.markerZoomFactor=1,this.maps.enablePersistence||(this.maps.mapScaleValue=1)),this.maps.isTileMap&&!this.maps.enablePersistence&&this.maps.mapScaleValue<=1&&(this.maps.tileZoomLevel=0===this.maps.mapScaleValue?1:this.maps.mapScaleValue,1===this.maps.mapScaleValue&&1===this.maps.markerZoomFactor&&(this.maps.tileTranslatePoint.x=0,this.maps.tileTranslatePoint.y=0))},e.prototype.markerClick=function(e){var i=e.target.id;if(!(-1===i.indexOf("_LayerIndex_")||i.indexOf("_cluster_")>0)){var o=this.getMarker(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Bt,data:o.data,maps:this.maps,marker:o.marker,target:i,x:e.clientX,y:e.clientY,latitude:o.data.latitude||o.data.Latitude,longitude:o.data.longitude||o.data.Longitude,value:o.data.name};if(this.maps.isBlazor){n.maps,n.marker,n.data;n=kt(n,["maps","marker","data"])}this.maps.trigger(Bt,n)}}},e.prototype.markerClusterClick=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")&&-1!==i.indexOf("_cluster_")){var o=this.getMarker(i);if(!t.isNullOrUndefined(o)){o.clusterCollection.length>0&&o.clusterCollection[0].isClusterSame&&($(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&q(this.maps.element.id+"_mapsTooltip"),this.sameMarkerData.length>0&&P(this.sameMarkerData,this.maps,this.markerSVGObject),this.sameMarkerData=o.clusterCollection,I(this.sameMarkerData,this.maps,this.markerSVGObject,!0));var n={cancel:!1,name:zt,data:o,maps:this.maps,target:i,x:e.clientX,y:e.clientY,latitude:o.data.latitude||o.data.Latitude,longitude:o.data.longitude||o.data.Longitude};if(this.maps.isBlazor){n.maps,n.data;n=kt(n,["maps","data"])}this.maps.trigger(zt,n)}}},e.prototype.getMarker=function(e){var t,i,o=e.split("_LayerIndex_"),n=parseInt(o[1].split("_")[0],10),a=this.maps.layers[n],l=[];if(e.indexOf("_MarkerIndex_")>-1){var r=parseInt(o[1].split("_MarkerIndex_")[1].split("_")[0],10),s=parseInt(o[1].split("_dataIndex_")[1].split("_")[0],10);if(i=a.markerSettings[r],!isNaN(r)){t=i.dataSource[s];var p=[];if(!i.template&&e.indexOf("_cluster_")>-1&&this.maps.layers[n].markerClusterSettings.allowClusterExpand&&Array.prototype.forEach.call(i.dataSource,function(e,i){e.latitude===t.latitude&&e.longitude===t.longitude&&p.push({data:t,index:i})}),e.indexOf("_cluster_")>-1){var d=!1;if(+document.getElementById(e.indexOf("_datalabel_")>-1?e:e+"_datalabel_"+e.split("_cluster_")[1]).textContent===p.length)d=!0;else{var h=document.getElementById(e.indexOf("_datalabel_")>-1?e.split("_datalabel_")[0]:e).innerHTML.split(",").map(Number);p=[];for(var c=0,m=h;c<m.length;c++){var u=m[c];p.push({data:i.dataSource[u],index:u})}d=!1}l.push({data:p,layerIndex:n,markerIndex:r,targetClusterIndex:+(e.split("_cluster_")[1].indexOf("_datalabel_")>-1?e.split("_cluster_")[1].split("_datalabel_")[0]:e.split("_cluster_")[1]),isClusterSame:d})}return{marker:i,data:t,clusterCollection:l}}}return null},e.prototype.markerMove=function(e){var i=e.target.id;if(!(-1===i.indexOf("_LayerIndex_")||i.indexOf("_cluster_")>0)){var o=this.getMarker(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Ft,data:o.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=kt(n,["maps"])}this.maps.trigger(Ft,n)}}},e.prototype.markerClusterMouseMove=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")&&-1!==i.indexOf("_cluster_")){var o=this.getMarker(i);if(o.clusterCollection[0].isClusterSame&&e.target.setAttribute("style","cursor: pointer"),!t.isNullOrUndefined(o)){var n={cancel:!1,name:jt,data:o.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=kt(n,["maps"])}this.maps.trigger(jt,n)}}},e.prototype.getModuleName=function(){return"Marker"},e.prototype.destroy=function(e){},e}(),Nt="markerRendering",At="markerClusterRendering",Bt="markerClick",zt="markerClusterClick",Ft="markerMouseMove",jt="markerClusterMouseMove",Rt="dataLabelRendering",Ut="bubbleRendering",Dt="bubbleClick",Zt="bubbleMouseMove",Ht="animationComplete",Vt="annotationRendering",Gt="itemSelection",Wt="itemHighlight",qt=function(){function e(e){this.maps=e}return e.prototype.getBingMap=function(e,t,i,o,n,a){for(var l,r="",s=Math.min(this.maps.tileZoomLevel,parseInt(this.maxZoom,10));s>0;s--){var p=0,d=1<<s-1;0!=(e.x&d)&&p++,0!=(e.y&d)&&(p+=2),r=r+""+p}return l=a[Math.min(parseInt(r.substr(r.length-1,1),10),a.length)],n=n.replace("{quadkey}",r).replace("{subdomain}",l),n+="&mkt="+o+"&ur=IN&Key="+t},e}(),Xt=function(){function e(e){this.maps=e}return e.prototype.getShapeColorMapping=function(e,t,i){var o=t[e.colorValuePath?e.colorValuePath:e.valuePath],n=Number(o),a=this.getColorByValue(e.colorMapping,n,o);return a||i},e.prototype.getColorByValue=function(e,i,o){if(isNaN(i)&&t.isNullOrUndefined(o))return null;for(var n,a="",l=0,r=e;l<r.length;l++){var s=r[l];(!t.isNullOrUndefined(s.from)&&!t.isNullOrUndefined(s.to)&&i>=s.from&&i<=s.to||s.value===o)&&(a="[object Array]"===Object.prototype.toString.call(s.color)?t.isNullOrUndefined(s.value)?this.getColor(s,i):s.color[0]:s.color),(i>=s.from&&i<=s.to||s.value===o)&&!t.isNullOrUndefined(s.minOpacity)&&!t.isNullOrUndefined(s.maxOpacity)&&a&&(n=this.deSaturationColor(s,a,i,o)),(""===a||t.isNullOrUndefined(a))&&t.isNullOrUndefined(s.from)&&t.isNullOrUndefined(s.to)&&t.isNullOrUndefined(s.minOpacity)&&t.isNullOrUndefined(s.maxOpacity)&&t.isNullOrUndefined(s.value)&&(a="[object Array]"===Object.prototype.toString.call(s.color)?s.color[0]:s.color)}return{fill:a||(e.length?null:o),opacity:n}},e.prototype.deSaturationColor=function(e,t,i,o){var n=1;if(i>=e.from&&i<=e.to||e.value===o){n=(isNaN(i)?e.from/(e.to-e.from):(i-e.from)/(e.to-e.from))*(e.maxOpacity-e.minOpacity)+e.minOpacity}return n},e.prototype.rgbToHex=function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},e.prototype.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.getColor=function(e,t){var i,o="";return Number(t)===e.from?o=e.color[0]:Number(t)===e.to?o=e.color[e.color.length-1]:(i=this.getGradientColor(Number(t),e),o=this.rgbToHex(i.r,i.g,i.b)),o},e.prototype.getGradientColor=function(e,t){var i=t.from,o=t.to,n=0,a=o-i;n=(e-i)/a;var l,r;if(t.color.length<=2)l="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),r="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{l="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),r="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);for(var s=a/(t.color.length-1),p=t.color.length-1,d=[],h={},c=1;c<p;c++)h={b:i+c*s,color:t.color[c]},d.push(h);for(var m=0;m<d.length;m++)i<=e&&e<=d[m].b&&0===m?(r="#"===d[m].color.charAt(0)?d[m].color:this._colorNameToHex(d[m].color),n=e<d[m].b?1-Math.abs((e-d[m].b)/s):(e-d[m].b)/s):d[m].b<=e&&e<=o&&m===d.length-1&&(l="#"===d[m].color.charAt(0)?d[m].color:this._colorNameToHex(d[m].color),n=e<d[m].b?1-Math.abs((e-d[m].b)/s):(e-d[m].b)/s),m!==d.length-1&&m<d.length&&d[m].b<=e&&e<=d[m+1].b&&(l="#"===d[m].color.charAt(0)?d[m].color:this._colorNameToHex(d[m].color),r="#"===d[m+1].color.charAt(0)?d[m+1].color:this._colorNameToHex(d[m+1].color),n=Math.abs(e-d[m+1].b)/s)}return this.getPercentageColor(n,l,r)},e.prototype.getPercentageColor=function(e,t,i){var o=i.split("#")[1],n=t.split("#")[1],a=this.getPercentage(e,parseInt(n.substr(0,2),16),parseInt(o.substr(0,2),16)),l=this.getPercentage(e,parseInt(n.substr(2,2),16),parseInt(o.substr(2,2),16)),r=this.getPercentage(e,parseInt(n.substr(4,2),16),parseInt(o.substr(4,2),16));return new Re(a,l,r)},e.prototype.getPercentage=function(e,t,i){var o=i-t;return Math.round(t+o*e)},e.prototype._colorNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"===Object.prototype.toString.call(e)?e:void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:e},e}(),Yt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},Jt=function(){function e(e){this.tileTranslatePoint=new We(0,0),this.isMapCoordinates=!0,this.ajaxProcessCount=0,this.mapObject=e,this.ajaxModule=new t.Ajax,this.ajaxResponse=[]}return e.prototype.measureLayerPanel=function(){var e=this,i=this.mapObject.layersCollection,o=this.mapObject.mapAreaRect,n=J(this.mapObject.element.id+"_Secondary_Element");if(this.mapObject.isTileMap&&n){this.tileSvgObject=this.mapObject.renderer.createSvg({id:this.mapObject.element.id+"_Tile_SVG",width:o.width,height:o.height});var a=t.createElement("div",{id:this.mapObject.element.id+"_Tile_SVG_Parent",styles:"position: absolute; height: "+o.height+"px; width: "+o.width+"px;"});a.appendChild(this.tileSvgObject),n.appendChild(a)}if(this.layerGroup=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_Layer_Collections","clip-path":"url(#"+this.mapObject.element.id+"_MapArea_ClipRect)"}),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType){this.clipRectElement=this.mapObject.renderer.drawClipPath(new Ue(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:(o.width-640)/2,y:0,width:640,height:o.height}))}else this.clipRectElement=this.mapObject.renderer.drawClipPath(new Ue(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:this.mapObject.isTileMap?0:o.x,y:this.mapObject.isTileMap?0:o.y,width:o.width,height:o.height}));this.layerGroup.appendChild(this.clipRectElement),this.mapObject.baseMapBounds=null,this.mapObject.baseMapRectBounds=null,this.mapObject.baseSize=null;i.length;Array.prototype.forEach.call(i,function(t,i){e.currentLayer=t,e.processLayers(t,i)})},e.prototype.renderTileLayer=function(e,i,o,n){e.currentFactor=e.calculateFactor(i),this.mapObject.isTileMap&&e.mapObject.markerModule&&e.mapObject.zoomSettings.enable&&e.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);var a=new Ae(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude),l=e.mapObject.zoomSettings.shouldZoomInitially&&1===e.mapObject.zoomSettings.zoomFactor?t.isNullOrUndefined(e.mapObject.markerZoomFactor)?1:e.mapObject.markerZoomFactor:e.mapObject.zoomSettings.zoomFactor;l=e.mapObject.enablePersistence?t.isNullOrUndefined(e.mapObject.mapScaleValue)?t.isNullOrUndefined(e.mapObject.markerZoomFactor)?e.mapObject.zoomSettings.zoomFactor:e.mapObject.markerZoomFactor:e.mapObject.mapScaleValue:l,t.isNullOrUndefined(e.mapObject.tileZoomLevel)?e.mapObject.tileZoomLevel=l:(1!==e.mapObject.zoomSettings.zoomFactor||e.mapObject.zoomSettings.shouldZoomInitially)&&(e.mapObject.tileZoomLevel=l,t.isNullOrUndefined(e.mapObject.tileTranslatePoint)||e.mapObject.markerZoomFactor===e.mapObject.mapScaleValue||(e.mapObject.tileTranslatePoint.x=0,e.mapObject.tileTranslatePoint.y=0)),t.isNullOrUndefined(e.mapObject.centerLatOfGivenLocation)||t.isNullOrUndefined(e.mapObject.centerLongOfGivenLocation)||!e.mapObject.zoomNotApplied||(a.y=e.mapObject.centerLatOfGivenLocation,a.x=e.mapObject.centerLongOfGivenLocation,e.mapObject.tileZoomLevel=e.mapObject.mapScaleValue=e.mapObject.scaleOfGivenLocation),e.mapObject.tileTranslatePoint=e.panTileMap(e.mapObject.availableSize.width,e.mapObject.availableSize.height,a),e.generateTiles(e.mapObject.tileZoomLevel,e.mapObject.tileTranslatePoint,n),e.mapObject.navigationLineModule&&e.layerObject.appendChild(e.mapObject.navigationLineModule.renderNavigation(e.currentLayer,e.mapObject.tileZoomLevel,o)),e.mapObject.markerModule&&e.mapObject.markerModule.markerRender(e.layerObject,o,e.mapObject.tileZoomLevel,null),e.translateLayerElements(e.layerObject,o),e.layerGroup.appendChild(e.layerObject)},e.prototype.processLayers=function(e,i){var o=this;if(this.layerObject=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+i}),!this.mapObject.enablePersistence){var n=this.mapObject.getModuleName()+this.mapObject.element.id;-1===navigator.userAgent.indexOf("Edge")&&!t.isNullOrUndefined(window.localStorage)&&window.localStorage.getItem(n)&&window.localStorage.removeItem(n)}var a={cancel:!1,name:"layerRendering",index:i,layer:e,maps:this.mapObject,visible:e.visible};if(this.mapObject.isBlazor){a.maps,a.layer;var l=Yt(a,["maps","layer"]);a=l}this.mapObject.trigger("layerRendering",a,function(n){if(!a.cancel&&a.visible)if("Geometry"!==e.layerType){if("Bing"!==e.layerType||o.bing)o.renderTileLayer(o,e,i);else if(e.key&&e.key.length>1){var l=o,r=new qt(o.mapObject),s="https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+e.bingMapType,p=new t.Ajax({url:s+"?output=json&include=ImageryProviders&key="+e.key});p.onSuccess=function(t){var o=JSON.parse(t).resourceSets[0].resources[0],n=o.imageUrl,a=o.imageUrlSubdomains,s=o.zoomMax;null!==n&&void 0!==n&&n!==r.imageUrl&&(r.imageUrl=n),null!==a&&void 0!==a&&a!==r.subDomains&&(r.subDomains=a),null!==s&&void 0!==s&&s!==r.maxZoom&&(r.maxZoom=s),l.mapObject.bingMap=r,l.renderTileLayer(l,e,i,r)},p.send()}}else if(!(t.isNullOrUndefined(e.shapeData)||t.isNullOrUndefined(e.shapeData.geometries)&&t.isNullOrUndefined(e.shapeData.features))){var d=!t.isNullOrUndefined(e.shapeData.geometries)&&e.shapeData.geometries.length>0?e.shapeData.geometries:e.shapeData.features;e.layerData=[];var h=e.shapeData.bbox;!t.isNullOrUndefined(h)&&e.isBaseLayer?o.mapObject.baseMapBounds=new ze({min:h[0][1],max:h[1][1]},{min:h[0][0],max:h[1][0]}):t.isNullOrUndefined(o.mapObject.baseMapBounds)&&!V(d)&&o.calculateRectBounds(d),o.calculatePathCollection(i,d)}}),this.mapObject.isTileMap?this.tileSvgObject&&this.tileSvgObject.appendChild(this.layerGroup):this.mapObject.svgObject.appendChild(this.layerGroup)},e.prototype.bubbleCalculation=function(e,t){if(null!=e.dataSource&&null!=e)for(var i=0;i<e.dataSource.length;i++){var o=parseFloat(e.dataSource[i][e.valuePath]);0!==i?o>t.max?t.max=o:o<t.min&&(t.min=o):t.max=t.min=o}},e.prototype.calculatePathCollection=function(e,i){var o=this;this.groupElements=[],V(i)||(this.currentFactor=this.calculateFactor(this.currentLayer)),this.rectBounds=null;var n=this.currentLayer.shapeSettings;this.currentLayer.bubbleSettings;Array.prototype.forEach.call(i,function(e,i){if(!t.isNullOrUndefined(e.geometry)||!t.isNullOrUndefined(e.coordinates)){var n=t.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,a=t.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates,l=e.geometry,r=e.properties;o.generatePoints(n,a,l,r)}}),this.currentLayer.rectBounds=this.rectBounds,t.isNullOrUndefined(this.mapObject.baseMapRectBounds)&&this.currentLayer.isBaseLayer&&(this.mapObject.baseMapRectBounds=this.rectBounds);var a=n.palette.length>1?n.palette:(this.mapObject.theme,["#B5E485","#7BC1E8","#DF819C","#EC9B79","#78D0D3","#D6D572","#9178E3","#A1E5B4","#87A4B4","#E4C16C"]),l=t.createElement("div",{id:this.mapObject.element.id+"_LayerIndex_"+e+"_Label_Template_Group",className:"template",styles:"pointer-events: none; overflow: hidden; position: absolute;top:"+this.mapObject.mapAreaRect.y+"px;left:"+this.mapObject.mapAreaRect.x+"px;height:"+this.mapObject.mapAreaRect.height+"px;width:"+this.mapObject.mapAreaRect.width+"px;"});if(0!==this.currentLayer.layerData.length)for(var r=function(r){var p,d,h,c,m,u=void 0,g=s.currentLayer.layerData[r],y="",f="",b=void 0,v=n.autofill?a[r%a.length]:n.fill;null===n.colorValuePath||t.isNullOrUndefined(g.property)||(null!==(u=R(s.currentLayer.dataSource,g.property,s.currentLayer.shapeDataPath,s.currentLayer.shapePropertyPath))&&0===n.colorMapping.length?v=s.currentLayer.dataSource[u][n.colorValuePath]:g.property[n.colorValuePath]&&0===s.currentLayer.dataSource.length&&0===n.colorMapping.length&&(v=g.property[n.colorValuePath]));var x=s.mapObject.element.id+"_LayerIndex_"+e+"_shapeIndex_"+r+"_dataIndex_"+u;b=s.getShapeColorMapping(s.currentLayer,g.property,v),v="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.fill)?v:b.fill,m="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.opacity)?n.opacity:b.opacity;var S={cancel:!1,name:"shapeRendering",index:r,data:s.currentLayer.dataSource?s.currentLayer.dataSource[u]:null,maps:s.mapObject,shape:n,fill:v,border:{width:n.border.width,color:n.border.color}};if(s.mapObject.isBlazor){S.maps;S=Yt(S,["maps"])}var _=function(s){var u=t.isNullOrUndefined(g._isMultiPolygon)?t.isNullOrUndefined(g.type)?g[0].type:g.type:"MultiPolygon";if(u="Polygon"===u||"MultiPolygon"===u?"Polygon":u,s.fill="#A6A6A6"===s.fill?s.shape.fill:s.fill,s.border.color="#000000"===s.border.color?s.shape.border.color:s.border.color,s.border.width=0===s.border.width?s.shape.border.width:s.border.width,o.mapObject.layers[e].shapeSettings.border=s.border,o.groupElements.length<1)c=o.mapObject.renderer.createGroup({id:o.mapObject.element.id+"_LayerIndex_"+e+"_"+u+"_Group",transform:""}),o.groupElements.push(c);else for(var b=0;b<o.groupElements.length;b++){var v=o.groupElements[b];if(v.id.indexOf(u)>-1){c=v;break}if(b>=o.groupElements.length-1){c=o.mapObject.renderer.createGroup({id:o.mapObject.element.id+"_LayerIndex_"+e+"_"+u+"_Group"}),o.groupElements.push(c);break}}var S;switch(u){case"Polygon":g._isMultiPolygon?y=o.generateMultiPolygonPath(g):(y+="M"+g[0].point.x+" "+g[0].point.y,g.map(function(e){y+=" L "+e.point.x+" "+e.point.y})),(y+=" z ").length>3&&(p=new je(x,s.fill,s.border.width,s.border.color,m,n.dashArray,y),S=o.mapObject.renderer.drawPath(p));break;case"LineString":g.map(function(e){f+=e.point.x+" , "+e.point.y+" "}),d=new He(x,f,s.fill,s.border.width,s.border.color,m,n.dashArray),S=o.mapObject.renderer.drawPolyline(d);break;case"Point":var _=g.point;h=new De(x,s.fill,s.border,m,_.x,_.y,n.circleRadius,null),S=o.mapObject.renderer.drawCircle(h);break;case"Path":y=g.point,p=new je(x,s.fill,s.border.width,s.border.color,m,n.dashArray,y),S=o.mapObject.renderer.drawPath(p)}if(!t.isNullOrUndefined(S)){for(var M="[object Array]"===Object.prototype.toString.call(o.currentLayer.shapePropertyPath)?o.currentLayer.shapePropertyPath:[o.currentLayer.shapePropertyPath],O=void 0,C=0;C<M.length;C++)if(!t.isNullOrUndefined(g.property)){O=M[C];break}if(S.setAttribute("aria-label",t.isNullOrUndefined(g.property)?"":g.property[O]),S.setAttribute("tabindex",(o.mapObject.tabIndex+r+2).toString()),E(o.mapObject.selectedElementId,o.mapObject.shapeSelectionClass,S,"ShapeselectionMapStyle"),o.mapObject.toggledShapeElementId)for(C=0;C<o.mapObject.toggledShapeElementId.length;C++){var L=o.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings?o.currentLayer.shapeSettings:o.mapObject.legendSettings.toggleLegendSettings;o.mapObject.toggledShapeElementId[C]===S.id&&(S.setAttribute("fill",L.fill),S.setAttribute("stroke",L.border.color),S.setAttribute("opacity",L.opacity.toString()),S.setAttribute("stroke-width",L.border.width.toString()))}c.appendChild(S)}r===o.currentLayer.layerData.length-1&&o.layerFeatures(e,a,i,l)};_.bind(s),s.mapObject.trigger("shapeRendering",S,_)},s=this,p=0;p<this.currentLayer.layerData.length;p++)r(p);else this.layerFeatures(e,a,i,l)},e.prototype.layerFeatures=function(e,t,i,o){var n,a=this;if(this.currentLayer.bubbleSettings.length&&this.mapObject.bubbleModule)for(var l,r=this.currentLayer.bubbleSettings.length,s=function(i){l=p.currentLayer.bubbleSettings[i],n=p.mapObject.renderer.createGroup({id:p.mapObject.element.id+"_LayerIndex_"+e+"_bubble_Group_"+i});var o={min:0,max:0};p.bubbleCalculation(l,o),l.dataSource.map(function(r,s){a.renderBubble(a.currentLayer,r,t[s%t.length],o,i,s,n,e,l)}),p.groupElements.push(n)},p=this,d=0;d<r;d++)s(d);this.mapObject.markerModule&&!this.mapObject.isTileMap&&this.mapObject.zoomSettings.enable&&this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);var h=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+e+"_dataLableIndex_Group",style:"pointer-events: none;"});if(this.mapObject.dataLabelModule&&this.currentLayer.dataLabelSettings.visible){var c=[];i.map(function(t,i){a.renderLabel(a.currentLayer,e,t,h,i,o,c)}),this.groupElements.push(h)}this.mapObject.navigationLineModule&&this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer,this.currentFactor,e)),this.groupElements.map(function(e){a.layerObject.appendChild(e)}),this.mapObject.markerModule&&this.mapObject.markerModule.markerRender(this.layerObject,e,this.currentFactor,null),this.translateLayerElements(this.layerObject,e),this.layerGroup.appendChild(this.layerObject)},e.prototype.renderLabel=function(e,t,i,o,n,a,l){this.mapObject.dataLabelModule.renderLabel(e,t,i,e.layerData,o,a,n,l)},e.prototype.generateMultiPolygonPath=function(e){for(var t="",i=0;i<e.length;i++)t+="M"+e[i][0].point.x+" "+e[i][0].point.y,e[i].map(function(e){t+=" L "+e.point.x+" "+e.point.y});return t},e.prototype.renderBubble=function(e,i,o,n,a,l,r,s,p){if(t.isNullOrUndefined(this.mapObject.bubbleModule)||!p.visible)return null;o=p.fill?p.fill:o,this.mapObject.bubbleModule.id=this.mapObject.element.id+"_LayerIndex_"+s+"_BubbleIndex_"+a+"_dataIndex_"+l,this.mapObject.bubbleModule.renderBubble(p,i,o,n,a,l,s,e,r,this.mapObject.bubbleModule.id)},e.prototype.getShapeColorMapping=function(e,i,o){if(o=o||e.shapeSettings.fill,0===e.shapeSettings.colorMapping.length&&t.isNullOrUndefined(e.dataSource))return o;var n=R(e.dataSource,i,e.shapeDataPath,e.shapePropertyPath),a=new Xt(this.mapObject);return t.isNullOrUndefined(e.dataSource[n])?o:a.getShapeColorMapping(e.shapeSettings,e.dataSource[n],o)},e.prototype.generatePoints=function(e,t,i,o){var n,a,l=this,r=[];switch(e.toLowerCase()){case"polygon":(r=this.calculatePolygonBox(t[0],i,o)).length>0&&(r.property=o,r.type=e,r._isMultiPolygon=!1,this.currentLayer.layerData.push(r));break;case"multipolygon":for(var s=[],p=0;p<t.length;p++)(r=this.calculatePolygonBox(t[p][0],i,o)).length>0&&s.push(r);s.property=o,s.type=e,s._isMultiPolygon=!0,this.currentLayer.layerData.push(s);break;case"linestring":t.map(function(e,t){n=e[1],a=e[0];var i=h(n,a,l.currentFactor,l.currentLayer,l.mapObject);r.push({point:i,lat:n,lng:a})}),r.property=o,r.type=e,this.currentLayer.layerData.push(r);break;case"point":var d=!1;if(t.map(function(t,i){if("[object Array]"===Object.prototype.toString.call(t)){n=t[1],a=t[0],d=!0;var r=h(n,a,l.currentFactor,l.currentLayer,l.mapObject);l.currentLayer.layerData.push({point:r,type:e,lat:n,lng:a,property:o})}}),!d){n=t[1],a=t[0];var c=h(n,a,this.currentFactor,this.currentLayer,this.mapObject);this.currentLayer.layerData.push({point:c,type:e,lat:n,lng:a,property:o})}break;case"path":this.currentLayer.layerData.push({point:i.d,type:e,property:o})}},e.prototype.calculateFactor=function(e){var t,i,o,n=1,a=this.mapObject.baseMapBounds,l=new Ne(this.mapObject.mapAreaRect.width,this.mapObject.mapAreaRect.height-5);if(a){var r=h(a.latitude.min,a.longitude.min,null,e,this.mapObject),s=h(a.latitude.max,a.longitude.max,null,e,this.mapObject);i=s.y-r.y,o=s.x-r.x}else i=o=500;return t=i<l.height?parseFloat(Math.abs(100*Number(l.height/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:l.height/i,n=o<l.width?parseFloat(Math.abs(100*Number(l.width/Number(o.toString()+"e+1"))).toString().split(".")[0])/10:l.width/o,Math.min(n,t)},e.prototype.translateLayerElements=function(e,i){var o;if(t.isNullOrUndefined(this.mapObject.baseMapRectBounds)){if(this.mapObject.isTileMap&&!t.isNullOrUndefined(this.mapObject.scale))for(var n=0;n<e.childElementCount;n++)if(!((o=e.childNodes[n]).id.indexOf("_Markers_Group")>-1||o.id.indexOf("_bubble_Group")>-1||o.id.indexOf("_dataLableIndex_Group")>-1||o.id.indexOf("_line_Group")>-1)){h="scale( "+this.mapObject.scale+" ) translate( "+this.mapObject.translatePoint.x+" "+this.mapObject.translatePoint.y+" ) ";o.setAttribute("transform",h)}}else{var a=this.currentLayer.animationDuration,l=0!==a||t.isNullOrUndefined(this.mapObject.zoomModule);this.mapObject.baseTranslatePoint=this.mapObject.zoomTranslatePoint;var r=void 0;r=this.mapObject.zoomSettings.zoomFactor>1&&!t.isNullOrUndefined(this.mapObject.zoomModule)?Y(this.mapObject,this.currentLayer,l):X(this.mapObject,this.currentLayer,l);var s=this.mapObject.previousScale=r.scale,p=this.mapObject.previousPoint=r.location;this.mapObject.baseTranslatePoint=this.mapObject.translatePoint=p,this.mapObject.baseScale=this.mapObject.scale=s;for(var d=0;d<e.childElementCount;d++)if(!((o=e.childNodes[d]).id.indexOf("_Markers_Group")>-1||o.id.indexOf("_bubble_Group")>-1||o.id.indexOf("_dataLableIndex_Group")>-1)){var h="scale( "+s+" ) translate( "+p.x+" "+p.y+" ) ";o.setAttribute("transform",h),a>0&&!t.isNullOrUndefined(this.mapObject.zoomModule)&&(r=this.mapObject.zoomSettings.zoomFactor>1?Y(this.mapObject,this.currentLayer):X(this.mapObject,this.currentLayer),this.mapObject.scale=r.scale,this.mapObject.zoomTranslatePoint=this.mapObject.translatePoint=r.location)}}},e.prototype.calculateRectBounds=function(e){var i=this;Array.prototype.forEach.call(e,function(e,o){if(!t.isNullOrUndefined(e.geometry)||!t.isNullOrUndefined(e.coordinates)){var n=t.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,a=t.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates;switch(n.toLowerCase()){case"polygon":i.calculateRectBox(a[0]);break;case"multipolygon":a.map(function(e,t){i.calculateRectBox(e[0])})}}})},e.prototype.calculatePolygonBox=function(e,i,o){var n=this,a=[],l=this.mapObject.baseMapBounds;return e.map(function(e,i){var o=e[1],r=e[0];if(r>=l.longitude.min&&r<=l.longitude.max&&o>=l.latitude.min&&o<=l.latitude.max){var s=h(o,r,n.currentFactor,n.currentLayer,n.mapObject);t.isNullOrUndefined(n.rectBounds)?n.rectBounds={min:{x:s.x,y:s.y},max:{x:s.x,y:s.y}}:(n.rectBounds.min.x=Math.min(n.rectBounds.min.x,s.x),n.rectBounds.min.y=Math.min(n.rectBounds.min.y,s.y),n.rectBounds.max.x=Math.max(n.rectBounds.max.x,s.x),n.rectBounds.max.y=Math.max(n.rectBounds.max.y,s.y)),a.push({point:s,lat:o,lng:r})}}),a},e.prototype.calculateRectBox=function(e){var i=this;Array.prototype.forEach.call(e,function(e){t.isNullOrUndefined(i.mapObject.baseMapBounds)?i.mapObject.baseMapBounds=new ze({min:e[1],max:e[1]},{min:e[0],max:e[0]}):(i.mapObject.baseMapBounds.latitude.min=Math.min(i.mapObject.baseMapBounds.latitude.min,e[1]),i.mapObject.baseMapBounds.latitude.max=Math.max(i.mapObject.baseMapBounds.latitude.max,e[1]),i.mapObject.baseMapBounds.longitude.min=Math.min(i.mapObject.baseMapBounds.longitude.min,e[0]),i.mapObject.baseMapBounds.longitude.max=Math.max(i.mapObject.baseMapBounds.longitude.max,e[0]))})},e.prototype.generateTiles=function(e,i,o){var n=this.mapObject.locale,a=this.mapObject.availableSize;this.tiles=[];var l,r;l=r=Math.pow(2,e);a.width,a.height;var s=this.mapObject.layers[this.mapObject.baseLayerIndex];this.urlTemplate=s.urlTemplate;var p=Math.min(r,(-i.y+a.height)/256+1),d=Math.min(l,(-i.x+a.width)/256+1),h=-(i.x+256)/256,c=-(i.y+256)/256;o=o||this.bing||this.mapObject.bingMap;for(var m=Math.round(h);m<Math.round(d);m++)for(var u=Math.round(c);u<Math.round(p);u++){var g=256*m+i.x,y=256*u+i.y;if(g>-256&&g<=a.width&&y>-256&&y<a.height&&m>=0&&u>=0){var f=new It(m,u);if(f.left=g,f.top=y,"Bing"===s.layerType){var b=s.key;f.src=o.getBingMap(f,b,s.bingMapType,n,o.imageUrl,o.subDomains)}else f.src=this.urlTemplate.replace("level",e.toString()).replace("tileX",f.x.toString()).replace("tileY",f.y.toString());this.tiles.push(f)}}for(var v=t.extend([],this.tiles,[],!0),x=0,S=this.mapObject.layers;x<S.length;x++){var _=S[x];if("SubLayer"===_.type&&_.visible&&("OSM"===_.layerType||"Bing"===_.layerType))for(var M=0,O=v;M<O.length;M++){var C=O[M],L=t.extend(C,{},{},!0);"Bing"===_.layerType?L.src=o.getBingMap(L,_.key,_.bingMapType,n,o.imageUrl,o.subDomains):L.src=_.urlTemplate.replace("level",e.toString()).replace("tileX",C.x.toString()).replace("tileY",C.y.toString()),this.tiles.push(L)}}this.arrangeTiles()},e.prototype.arrangeTiles=function(){if("GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType)this.renderGoogleMap(this.mapObject.layers[0].key,this.mapObject.staticMapZoom);else{var e=this.templateCompiler(this.tiles);J(this.mapObject.element.id+"_tile_parent")&&(document.getElementById(this.mapObject.element.id+"_tile_parent").innerHTML=e)}},e.prototype.templateCompiler=function(e){for(var t="",i=0,o=0,n=e;o<n.length;o++){var a=n[o];t+='<div><div id="tile'+i+'" style="position:absolute;left: '+a.left+"px;top: "+a.top+"px;height: "+a.height+"px;width: "+a.width+'px;"><img src="'+a.src+'"></img></div></div>',i++}return t},e.prototype.renderGoogleMap=function(e,i){var o,n=this.mapObject;i=this.mapObject.tileZoomLevel;var a,l,r=256*Math.pow(2,i);a=n.mapAreaRect.width/2-r/2,l=n.mapAreaRect.height/2-r/2;var s=0,p=0,d=c(new Ae(null,null),i,{x:a,y:l},this.isMapCoordinates);n.zoomModule&&n.zoomSettings.enable&&(s=n.zoomModule.mouseDownLatLong.x-n.zoomModule.mouseMoveLatLong.x,p=n.zoomModule.mouseDownLatLong.y-n.zoomModule.mouseMoveLatLong.y);var h=n.pointToLatLong(d.x-s,d.y-p);n.centerPosition.latitude=h.latitude,n.centerPosition.longitude=h.longitude;var m,u;m=t.isNullOrUndefined(parseInt(n.width,10))?parseInt(n.width,10)-22:Math.round(n.mapAreaRect.width),u=t.isNullOrUndefined(parseInt(n.height,10))?parseInt(n.height,10)-22:Math.round(n.mapAreaRect.height);var g=m>640?(m-640)/2:0,y=u>640?(u-640)/2:0,f=n.layers[n.layers.length-1].staticMapType.toString().toLowerCase();o="https://maps.googleapis.com/maps/api/staticmap?size="+m+"x"+u+"&zoom="+i+"&center="+(n.centerPosition.latitude&&n.centerPosition.longitude?n.centerPosition.latitude.toString()+","+n.centerPosition.longitude.toString():"0,0")+"&maptype="+f+"&key="+e,document.getElementById(this.mapObject.element.id+"_tile_parent").innerHTML='<div id="'+this.mapObject.element.id+'_StaticGoogleMap"style="position:absolute; left:'+g+"px; top:"+y+'px"><img src="'+o+'"></div>'},e.prototype.panTileMap=function(e,i,o){var n,a,l=this.mapObject.tileZoomLevel,r="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.layers.length-1].layerType?20:0,s=256*Math.pow(2,l),p=c(o,l,{x:n=e/2-s/2,y:a=i/2-s/2},this.isMapCoordinates);return n-=p.x-e/2,a=a-(p.y-i/2)+r,this.mapObject.scale=Math.pow(2,l-1),t.isNullOrUndefined(this.mapObject.tileTranslatePoint)||this.mapObject.zoomNotApplied||(0!==this.mapObject.tileTranslatePoint.x&&this.mapObject.tileTranslatePoint.x!==n&&(n=this.mapObject.tileTranslatePoint.x),0!==this.mapObject.tileTranslatePoint.y&&this.mapObject.tileTranslatePoint.y!==a&&(a=this.mapObject.tileTranslatePoint.y)),this.mapObject.translatePoint=new Ae((n-.01*this.mapObject.scale)/this.mapObject.scale,(a-.01*this.mapObject.scale)/this.mapObject.scale),new Ae(n,a)},e}(),Kt=function(){function e(e){this.map=e}return e.prototype.renderAnnotationElements=function(){var e=this,i=this.map.element.id+"_Secondary_Element",o=t.createElement("div",{id:this.map.element.id+"_Annotations_Group"});if(o.style.position="absolute",o.style.top="0px",o.style.left="0px",this.map.annotations.map(function(t,i){null!==t.content&&e.createAnnotationTemplate(o,t,i)}),o.childElementCount>0&&!t.isNullOrUndefined(J(i))){J(i).appendChild(o);for(var n=0;n<this.map.annotations.length;n++)t.updateBlazorTemplate(this.map.element.id+"_ContentTemplate_"+n,"ContentTemplate",this.map.annotations[n])}},e.prototype.createAnnotationTemplate=function(e,i,o){var n,a,l,r,s=this,p=this.map,d=p.availableSize,h=(p.element.id,t.createElement("div",{id:p.element.id+"_Annotation_"+o,styles:"position: absolute; z-index:"+i.zIndex+";"})),c={cancel:!1,name:Vt,content:i.content,annotation:i};this.map.trigger(Vt,c,function(e){if(!c.cancel){if((l=Q(c.content))&&(window.Blazor||l(s.map,null,null,s.map.element.id+"_ContentTemplate_"+o).length))for(var i=(r=Array.prototype.slice.call(l(window.Blazor?{}:s.map,null,null,s.map.element.id+"_ContentTemplate_"+o))).length,n=0;n<i;n++)h.appendChild(r[n]);else h.appendChild(t.createElement("div",{innerHTML:c.content}))}});var m=ye(h.cloneNode(!0),p.element),u=p.element.getBoundingClientRect(),g=p.svgObject.getBoundingClientRect();n=Math.abs(g.left-u.left),a=Math.abs(g.top-u.top);var y=i.x.indexOf("%")>-1?d.width/100*parseFloat(i.x):parseFloat(i.x),f=i.y.indexOf("%")>-1?d.height/100*parseFloat(i.y):parseFloat(i.y);switch(n="None"===i.horizontalAlignment?n+y:n,a="None"===i.verticalAlignment?a+f:a,i.verticalAlignment){case"Near":a+=f;break;case"Center":a=a+f+(g.height/2-m.height/2);break;case"Far":a=a+g.height+f-m.height}switch(i.horizontalAlignment){case"Near":n+=y;break;case"Center":n=n+y+(g.width/2-m.width/2);break;case"Far":n=n+g.width+y-m.width}h.style.left=n+"px",h.style.top=a+"px",e.appendChild(h)},e.prototype.getModuleName=function(){return"Annotations"},e.prototype.destroy=function(e){},e}(),Qt=function(){function e(e){this.control=e}return e.prototype.print=function(e){var i=this;this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight);var o={cancel:!1,htmlContent:this.getHTMLContent(e),name:"beforePrint"};this.control.trigger("beforePrint",o,function(e){o.cancel||t.print(o.htmlContent,i.printWindow)})},e.prototype.getHTMLContent=function(e){var i=t.createElement("div");return e?e instanceof Array?Array.prototype.forEach.call(e,function(e){i.appendChild($(e).cloneNode(!0))}):e instanceof Element?i.appendChild(e.cloneNode(!0)):i.appendChild($(e).cloneNode(!0)):i.appendChild(this.control.element.cloneNode(!0)),i},e.prototype.export=function(e,i,o){var a=this,l=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:this.control.availableSize.width.toString(),height:this.control.availableSize.height.toString()}}),r=!(t.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1);o=t.isNullOrUndefined(o)?n.PdfPageOrientation.Landscape:o;var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+this.control.svgObject.outerHTML+"</svg>",p=window.URL.createObjectURL(new Blob("SVG"===e?[s]:[(new XMLSerializer).serializeToString(this.control.svgObject)],{type:"image/svg+xml"}));if("SVG"===e)this.triggerDownload(i,e,p,r);else{var d=new Image,h=l.getContext("2d");d.onload=function(){if(h.drawImage(d,0,0),window.URL.revokeObjectURL(p),"PDF"===e){var t=new n.PdfDocument,s=l.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");t.pageSettings.orientation=o,s=s.slice(s.indexOf(",")+1),t.pages.add().graphics.drawImage(new n.PdfBitmap(s),0,0,a.control.availableSize.width-60,a.control.availableSize.height),r&&(t.save(i+".pdf"),t.destroy())}else a.triggerDownload(i,e,l.toDataURL("image/png").replace("image/png","image/octet-stream"),r)},d.src=p}},e.prototype.triggerDownload=function(e,i,o,n){t.createElement("a",{attrs:{download:e+"."+i.toLocaleLowerCase(),href:o}}).dispatchEvent(new MouseEvent(n?"click":"move",{view:window,bubbles:!1,cancelable:!0}))},e}(),$t=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ei=function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l},ti=function(e){function n(i,o){var n=e.call(this,i,o)||this;return n.isTileMap=!1,n.baseSize=new Ne(0,0),n.translatePoint=new Ae(0,0),n.baseTranslatePoint=new Ae(0,0),n.zoomTranslatePoint=new Ae(0,0),n.markerNullCount=0,n.tileTranslatePoint=new Ae(0,0),n.baseTileTranslatePoint=new Ae(0,0),n.isDevice=!1,n.staticMapZoom=n.zoomSettings.enable?n.zoomSettings.zoomFactor:0,n.zoomNotApplied=!1,n.dataLabelShape=[],n.zoomShapeCollection=[],n.zoomLabelPositions=[],n.mouseDownEvent={x:null,y:null},n.mouseClickEvent={x:null,y:null},n.selectedElementId=[],n.selectedMarkerElementId=[],n.selectedBubbleElementId=[],n.selectedNavigationElementId=[],n.selectedLegendElementId=[],n.legendSelectionCollection=[],n.shapeSelections=!0,n.legendSelection=!0,n.toggledLegendId=[],n.toggledShapeElementId=[],n.checkInitialRender=!0,t.setValue("mergePersistData",n.mergePersistMapsData,n),n}return $t(n,e),n.prototype.mergePersistMapsData=function(){var e;if(t.isNullOrUndefined(window.localStorage)||(e=window.localStorage.getItem(this.getModuleName()+this.element.id)),!t.isNullOrUndefined(e)&&""!==e){var i=JSON.parse(e),o=Object.keys(i);this.isProtectedOnChange=!0;for(var n=0,a=o;n<a.length;n++){var l=a[n];"object"!=typeof this[l]||t.isNullOrUndefined(this[l])?this[l]=i[l]:t.extend(this[l],i[l])}this.isProtectedOnChange=!1}},n.prototype.getLocalizedLabel=function(e){return this.localeObject.getConstant(e)},n.prototype.preRender=function(){this.isDevice=t.Browser.isDevice,this.isBlazor=t.isBlazor(),this.initPrivateVariable(),this.allowServerDataBinding=!1,this.unWireEVents(),this.wireEVents(),this.setCulture()},n.prototype.render=function(){this.trigger("load",this.isBlazor?{}:{maps:this}),this.createSVG(),this.findBaseAndSubLayers(),this.createSecondaryElement(),this.addTabIndex(),this.themeStyle=function(e){var t,i;switch(e.toLowerCase()){case"materialdark":i="#303030";break;case"fabricdark":i="#201F1F";break;case"bootstrapdark":i="#1A1A1A"}switch(e.toLowerCase()){case"materialdark":case"fabricdark":case"bootstrapdark":t={backgroundColor:i,areaBackgroundColor:i,titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#DADADA",legendTextColor:"#DADADA",dataLabelFontColor:"#DADADA",tooltipFontColor:"#ffffff",tooltipFillColor:"#363F4C",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"highcontrast":t={backgroundColor:"#000000",areaBackgroundColor:"#000000",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#000000",tooltipFontColor:"#000000",tooltipFillColor:"#ffffff",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"bootstrap4":t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#5B6269",fontFamily:"HelveticaNeue-Medium",titleFontSize:"16px",legendFontSize:"14px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"HelveticaNeue-Medium"};break;default:t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#424242",subTitleFontColor:"#424242",legendTitleFontColor:"#757575",legendTextColor:"#757575",dataLabelFontColor:"#000000",tooltipFontColor:"#ffffff",tooltipFillColor:"#000000",zoomFillColor:"#737373",labelFontFamily:"Roboto, Noto, Sans-serif"}}return t}(this.theme),this.renderBorder(),this.renderTitle(this.titleSettings,"title",null,null),this.renderArea(),this.processRequestJsonData(),this.renderComplete()},n.prototype.processRequestJsonData=function(){var e=this,i=this.layersCollection.length-1;this.serverProcess={request:0,response:0};var n,a;Array.prototype.forEach.call(this.layersCollection,function(l,r){if(l.shapeData instanceof o.DataManager){e.serverProcess.request++,a=l.shapeData,n=l.query instanceof o.Query?l.query:new o.Query;a.executeQuery(n).then(function(t){e.processResponseJsonData("DataManager",t,l,"ShapeData")})}else(l.shapeData instanceof Ye||l.shapeData)&&(t.isNullOrUndefined(l.shapeData.dataOptions)||e.processAjaxRequest(l,l.shapeData,"ShapeData"));(l.dataSource instanceof Ye||!t.isNullOrUndefined(l.dataSource.dataOptions))&&e.processAjaxRequest(l,l.dataSource,"DataSource"),e.serverProcess.request===e.serverProcess.response&&i===r&&e.processResponseJsonData(null)})},n.prototype.processAjaxRequest=function(e,i,o){var n,a=this;this.serverProcess.request++,(n=new t.Ajax(i.dataOptions,i.type,i.async,i.contentType)).onSuccess=function(t){a.processResponseJsonData("Ajax",t,e,o)},n.send(i.sendData)},n.prototype.processResponseJsonData=function(e,i,o,n){if(this.serverProcess.response++,e&&("ShapeData"===n?o.shapeData="DataManager"===e?t.isNullOrUndefined(i.result)?i.actual:i.result:JSON.parse(i):o.dataSource="DataManager"===e?t.isNullOrUndefined(i.result)?i.actual:i.result:JSON.parse("["+i+"]")[0]),t.isNullOrUndefined(e)||this.serverProcess.request!==this.serverProcess.response)t.isNullOrUndefined(e)&&this.renderMap();else{var a=this.layersCollection;this.layersCollection=[];for(var l=0;l<a.length;l++)a[l].isBaseLayer&&this.layersCollection.push(a[l]);for(var r=0;r<a.length;r++)a[r].isBaseLayer||this.layersCollection.push(a[r]);this.renderMap()}},n.prototype.renderMap=function(){!this.isTileMap&&this.legendModule&&this.legendSettings.visible&&this.legendModule.renderLegend(),this.createTile(),this.zoomSettings.enable&&this.zoomModule&&this.zoomModule.createZoomingToolbars(),t.isNullOrUndefined(this.dataLabelModule)||(this.dataLabelModule.dataLabelCollections=[],this.dataLabelShape=[]),this.mapLayerPanel.measureLayerPanel(),this.element.appendChild(this.svgObject);for(var e=0;e<this.layers.length;e++)if(this.layers[e].selectionSettings&&this.layers[e].selectionSettings.enable&&this.layers[e].initialShapeSelection.length>0&&this.checkInitialRender){var i=this.layers[e].selectionSettings.enableMultiSelect;this.layers[e].selectionSettings.enableMultiSelect=i||!0;for(var o=this.layers[e].initialShapeSelection,n=0;n<this.layers[e].initialShapeSelection.length;n++)this.shapeSelection(e,o[n].shapePath,o[n].shapeValue,!0);this.layers[e].selectionSettings.enableMultiSelect=i,e===this.layers.length-1&&(this.checkInitialRender=!1)}if(!t.isNullOrUndefined(document.getElementById(this.element.id+"_tile_parent"))){var a=this.svgObject.getBoundingClientRect(),l=document.getElementById(this.element.id),r=document.getElementById(this.element.id+"_tile_parent"),s=r.getBoundingClientRect(),p=a.bottom-s.bottom-l.offsetTop,d=parseFloat(r.style.left)+l.offsetLeft,h=parseFloat(r.style.top)+l.offsetTop;h=p<=11?h:2*h,d=p<=11?d:2*d,r.style.top=h+"px",r.style.left=d+"px"}this.arrangeTemplate();this.isBlazor&&this.blazorTemplates();this.annotationsModule&&this.annotationsModule.renderAnnotationElements(),this.zoomingChange(),this.trigger("loaded",this.isBlazor?{}:{maps:this})},n.prototype.blazorTemplates=function(){var e=this.layers.length-1,i=this.layers[e].markerSettings.length-1;if(i>=0&&(this.layers[e].dataLabelSettings.visible||this.layers[e].markerSettings[i].template)){t.updateBlazorTemplate(this.element.id+"_LabelTemplate","LabelTemplate",this.layers[e].dataLabelSettings);for(var o=0;o<this.layers.length;o++)for(var n=0;n<this.layers[o].markerSettings.length;n++)t.updateBlazorTemplate(this.element.id+"_MarkerTemplate"+n,"MarkerTemplate",this.layers[o].markerSettings[n])}},n.prototype.renderArea=function(){var e=this.mapsArea.border.width,t=this.mapsArea.background;if(e>0||t||this.themeStyle.areaBackgroundColor){var i=new Ue(this.element.id+"_MapAreaBorder",t||this.themeStyle.areaBackgroundColor,this.mapsArea.border,1,this.mapAreaRect);this.svgObject.appendChild(this.renderer.drawRectangle(i))}},n.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"Maps Element"),this.element.setAttribute("tabindex",this.tabIndex.toString())},n.prototype.zoomingChange=function(){var e,i;if(J(this.element.id+"_Layer_Collections")&&this.zoomModule&&(this.zoomModule.layerCollectionEle=J(this.element.id+"_Layer_Collections")),this.isTileMap&&J(this.element.id+"_Tile_SVG")&&J(this.element.id+"_tile_parent")){var o=J(this.element.id+"_tile_parent").getBoundingClientRect(),n=J(this.element.id+"_Tile_SVG").getBoundingClientRect();e=o.left-n.left,i=o.top-n.top,J(this.element.id+"_Tile_SVG_Parent").style.left=e+"px",J(this.element.id+"_Tile_SVG_Parent").style.top=i+"px";var a=document.getElementsByClassName("template");if(!t.isNullOrUndefined(a)&&a.length>0)for(var l=0;l<a.length;l++){var r=a[l];r.style.left=e+"px",r.style.top=i+"px"}}if(this.zoomSettings.zoomFactor>=1){this.zoomModule&&this.zoomModule.toolBarGroup&&this.zoomSettings.enable&&this.zoomModule.alignToolBar();var s=document.getElementById(this.element.id+"_Layer_Collections");if(!t.isNullOrUndefined(s)&&s.childElementCount>0)for(l=0;l<s.childNodes.length;l++){var p=s.childNodes[l];if("g"===p.tagName)for(var d=parseFloat(p.id.split("_LayerIndex_")[1].split("_")[0]),h=0;h<p.childNodes.length;h++){var c=p.childNodes[h];c.id.indexOf("_Markers_Group")>-1||c.id.indexOf("_bubble_Group")>-1||c.id.indexOf("_dataLableIndex_Group")>-1||fe(c,d,this.scale,this)}}this.zoomModule&&this.previousScale!==this.scale&&this.zoomModule.applyTransform(!0)}},n.prototype.createSecondaryElement=function(){if(t.isNullOrUndefined(document.getElementById(this.element.id+"_Secondary_Element"))){var e=t.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:1;"});this.element.appendChild(e)}},n.prototype.arrangeTemplate=function(){J(this.element.id+"_Secondary_Element");document.getElementById(this.element.id+"_Legend_Border")&&(document.getElementById(this.element.id+"_Legend_Border").style.pointerEvents="none");var e=document.getElementsByClassName("template");if(!t.isNullOrUndefined(e)&&e.length>0&&J(this.element.id+"_Layer_Collections"))for(var i=0;i<e.length;i++){var o=e[i];if(!t.isNullOrUndefined(o)&&o.childElementCount>0)for(var n=J(this.element.id+"_Layer_Collections").getBoundingClientRect(),a=J(o.id).getBoundingClientRect(),l=this.isTileMap?0:n.left<a.left?-Math.abs(a.left-n.left):Math.abs(a.left-n.left),r=this.isTileMap?0:n.top<a.top?-Math.abs(a.top-n.top):Math.abs(a.top-n.top),s=0;s<o.childElementCount;s++){var p=o.childNodes[s];p.style.left=parseFloat(p.style.left)+l+"px",p.style.top=parseFloat(p.style.top)+r+"px",p.style.transform="translate(-50%, -50%)"}}},n.prototype.createTile=function(){var e=this.layersCollection[0];if(e.isBaseLayer&&("OSM"===e.layerType||"Bing"===e.layerType||"GoogleStaticMap"===e.layerType)){q(this.element.id+"_tile_parent");var i=t.createElement("div",{id:this.element.id+"_tile_parent",styles:"position: absolute; left: "+this.mapAreaRect.x+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"});this.element.appendChild(i)}},n.prototype.initPrivateVariable=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-maps").length;this.element.id="maps_control_"+e}this.renderer=new i.SvgRenderer(this.element.id),this.mapLayerPanel=new Jt(this)},n.prototype.findBaseAndSubLayers=function(){var e=this,t=this.baseLayerIndex,i=[],o=[];this.layersCollection=[],Array.prototype.forEach.call(this.layers,function(e){"Layer"===e.type?i.push(e):o.push(e)});for(var n=0;n<i.length;n++){var a=i[n];if(a.visible&&t===n){a.isBaseLayer=!0,this.isTileMap="Geometry"!==a.layerType,this.layersCollection.push(a);break}if(n===i.length-1){this.layersCollection.push(i[0]);break}}o.map(function(t,i){t.visible&&e.layersCollection.push(t)})},n.prototype.renderBorder=function(){var e=this.border.width,i=this.svgObject.querySelector("#"+this.element.id+"_MapBorder");if((e>0||this.background||this.themeStyle.backgroundColor)&&t.isNullOrUndefined(i)){var o=new Ue(this.element.id+"_MapBorder",this.background||this.themeStyle.backgroundColor,this.border,1,new qe(e/2,e/2,this.availableSize.width-e,this.availableSize.height-e));this.svgObject.appendChild(this.renderer.drawRectangle(o))}else i.setAttribute("fill",this.background||this.themeStyle.backgroundColor)},n.prototype.renderTitle=function(e,i,o,n){var a,l=e.textStyle,r=Math.abs(this.margin.left+this.margin.right-this.availableSize.width);if(l.fontFamily=this.themeStyle.fontFamily||l.fontFamily,l.size=this.themeStyle.titleFontSize||l.size,e.text){t.isNullOrUndefined(n)&&(n=this.renderer.createGroup({id:this.element.id+"_Title_Group"}));var s=G(r,e.text,l),p=x(s,l),d=W(t.isNullOrUndefined(o)?new qe(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height):o,e.alignment,p,i),h=new Fe(this.element.id+"_Map_"+i,d.x,d.y,"start",s),c=new qe(d.x,d.y,p.width,p.height),m=S(h,l,l.color||("title"===i?this.themeStyle.titleFontColor:this.themeStyle.subTitleFontColor),n);m.setAttribute("aria-label",this.description||e.text),m.setAttribute("tabindex",(this.tabIndex+("title"===i?1:2)).toString()),("title"===i&&!e.subtitleSettings.text||"subtitle"===i)&&(a=Math.abs(c.y+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new qe(this.margin.left,c.y+10,r,a-10)),"subtitle"!==i&&e.subtitleSettings.text?this.renderTitle(e.subtitleSettings,"subtitle",c,n):this.svgObject.appendChild(n)}else a=Math.abs(this.margin.top+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new qe(this.margin.left,this.margin.top,r,a)},n.prototype.createSVG=function(){t.resetBlazorTemplate(this.element.id+"_LabelTemplate","LabelTemplate");for(var e=0;e<this.layers.length;e++)for(var i=0;i<this.layers[e].markerSettings.length;i++)t.resetBlazorTemplate(this.element.id+"_MarkerTemplate"+i,"MarkerTemplate");this.removeSvg(),r(this)},n.prototype.removeSvg=function(){for(var e=0;e<this.annotations.length;e++)t.resetBlazorTemplate(this.element.id+"_ContentTemplate_"+e,"ContentTemplate");if(q(this.element.id+"_Secondary_Element"),q(this.element.id+"_tile_parent"),document.getElementsByClassName("e-tooltip-wrap")[0]&&t.remove(document.getElementsByClassName("e-tooltip-wrap")[0]),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}},n.prototype.wireEVents=function(){t.EventHandler.add(this.element,"click",this.mapsOnClick,this),t.EventHandler.add(this.element,"dblclick",this.mapsOnDoubleClick,this),t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.mouseDownOnMap,this),t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnMap,this),t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEndOnMap,this),t.EventHandler.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap,this),window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize.bind(this))},n.prototype.unWireEVents=function(){t.EventHandler.remove(this.element,"click",this.mapsOnClick),t.EventHandler.remove(this.element,"dblclick",this.mapsOnDoubleClick),t.EventHandler.remove(this.element,t.Browser.touchStartEvent,this.mouseDownOnMap),t.EventHandler.remove(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnMap),t.EventHandler.remove(this.element,t.Browser.touchEndEvent,this.mouseEndOnMap),t.EventHandler.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap),window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize)},n.prototype.mouseLeaveOnMap=function(e){document.getElementsByClassName("highlightMapStyle").length>0&&this.legendModule&&(this.legendModule.removeShapeHighlightCollection(),se(document.getElementsByClassName("highlightMapStyle")[0]))},n.prototype.mapsOnClick=function(e){var t,i=this,o=e.target,n=o.id,a=0,l=null,r=null;if(this.mouseClickEvent={x:e.x,y:e.y},-1===o.id.indexOf("_ToolBar")){-1===o.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==this.mouseClickEvent.x||this.mouseDownEvent.y!==this.mouseClickEvent.y?this.isTileMap&&this.mouseDownEvent.x===this.mouseClickEvent.x&&this.mouseDownEvent.y===this.mouseClickEvent.y&&(l=(t=this.getTileGeoLocation(e)).latitude,r=t.longitude):(a=parseFloat(o.id.split("_LayerIndex_")[1].split("_")[0]),l=(t=this.getGeoLocation(a,e)).latitude,r=t.longitude);var s={cancel:!1,name:"click",target:n,x:e.clientX,y:e.clientY,latitude:l,longitude:r};this.trigger("click",s,function(t){if(-1!==o.id.indexOf("shapeIndex")){var a=parseInt(o.id.split("_LayerIndex_")[1].split("_")[0],10);te(n,i.layers[a].selectionSettings,i,"shapeSelected")}(o.id.indexOf("shapeIndex")>-1||o.id.indexOf("Tile")>-1)&&(i.markerModule&&i.markerModule.sameMarkerData.length>0&&(!i.zoomModule||i.zoomModule.isSingleClick)&&(P(i.markerModule.sameMarkerData,i,$(i.element.id+"_Markers_Group")),i.markerModule.sameMarkerData=[]),$(i.element.id+"_mapsTooltip")&&i.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&q(i.element.id+"_mapsTooltip")),i.markerModule&&(i.markerModule.markerClick(e),i.markerModule.markerClusterClick(e)),i.bubbleModule&&i.bubbleModule.bubbleClick(e),s.cancel||i.notify("click",o)})}},n.prototype.mouseEndOnMap=function(e){var i,o,n;e.target.id,this.element.getBoundingClientRect(),e.target;return-1!==e.type.indexOf("touch")?(this.isTouch=!0,i=(n=e).changedTouches[0].pageX,o=n.changedTouches[0].pageY,n.target):(this.isTouch="touch"===e.pointerType,i=e.pageX,o=e.pageY,e.target),this.isTouch&&this.titleTooltip(e,i,o,!0),this.notify(t.Browser.touchEndEvent,e),e.preventDefault(),!1},n.prototype.mouseDownOnMap=function(e){this.mouseDownEvent={x:e.x,y:e.y};this.element.getBoundingClientRect();var i=e.target;if(-1===i.id.indexOf("_ToolBar")){var o=this.markerModule;(i.id.indexOf("shapeIndex")>-1||i.id.indexOf("Tile")>-1)&&o&&o.sameMarkerData.length>0&&(!this.zoomModule||this.zoomModule.isSingleClick)&&(P(o.sameMarkerData,this,$(this.element.id+"_Markers_Group")),o.sameMarkerData=[]),o&&(o.markerClick(e),o.markerClusterClick(e)),this.bubbleModule&&this.bubbleModule.bubbleClick(e)}this.notify(t.Browser.touchStartEvent,e)},n.prototype.mapsOnDoubleClick=function(e){this.notify("dblclick",e)},n.prototype.mouseMoveOnMap=function(e){"touchmove"===e.type?e.target:e.target,this.markerModule&&(this.markerModule.markerMove(e),this.markerModule.markerClusterMouseMove(e)),this.bubbleModule&&this.bubbleModule.bubbleMove(e),this.onMouseMove(e),this.notify(t.Browser.touchMoveEvent,e)},n.prototype.onMouseMove=function(e){e.target;return this.isTouch||this.titleTooltip(e,e.pageX,e.pageY),!1},n.prototype.titleTooltip=function(e,t,i,o){e.target.id===this.element.id+"_Map_title"&&e.target.textContent.indexOf("...")>-1?he(this.titleSettings.text,this.titleSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Title_Tooltip",$(this.element.id+"_Secondary_Element"),o):q(this.element.id+"_EJ2_Title_Tooltip")},n.prototype.mapsOnResize=function(e){var t=this,i={name:"resize",previousSize:this.availableSize,currentSize:new Ne(0,0),maps:this.isBlazor?null:this};return this.resizeTo&&clearTimeout(this.resizeTo),this.element.classList.contains("e-maps")&&(this.resizeTo=setTimeout(function(){t.unWireEVents(),t.createSVG(),t.refreshing=!0,t.wireEVents(),i.currentSize=t.availableSize,t.trigger("resize",i),t.render()},500)),!1},n.prototype.zoomByPosition=function(e,i){var o,n=this.mapLayerPanel.calculateFactor(this.layersCollection[0]),a=this.mapAreaRect;if(!this.isTileMap&&this.zoomModule)if(t.isNullOrUndefined(e))o={x:a.width/2,y:a.height/2},this.zoomModule.performZooming(o,i,i>this.scale?"ZoomIn":"ZoomOut");else{o=h(e.latitude,e.longitude,n,this.layersCollection[0],this);var l=document.getElementById(this.element.id+"_Layer_Collections").getBoundingClientRect(),r=this.svgObject.getBoundingClientRect(),s=Math.abs(l.left-r.left)/this.scale,p=Math.abs(l.top-r.top)/this.scale,d=this.translatePoint.x+s,c=this.translatePoint.y+p;this.scale=i,this.translatePoint.x=((l.left<r.left?d:0)+a.width/2-o.x*i)/i,this.translatePoint.y=((l.top<r.top?c:0)+a.height/2-o.y*i)/i,this.zoomModule.applyTransform()}else this.zoomModule&&(this.tileZoomLevel=i,this.tileTranslatePoint=this.mapLayerPanel.panTileMap(this.availableSize.width,this.availableSize.height,{x:e.longitude,y:e.latitude}),this.mapLayerPanel.generateTiles(i,this.tileTranslatePoint,new qt(this)))},n.prototype.panByDirection=function(e){var t=0,i=0;switch(e){case"Left":t=-this.mapAreaRect.width/7;break;case"Right":t=this.mapAreaRect.width/7;break;case"Top":i=-this.mapAreaRect.height/7;break;case"Bottom":i=this.mapAreaRect.height/7}this.zoomModule&&this.zoomModule.panning(e,t,i)},n.prototype.addLayer=function(e){this.layers.push(new Pt(this.layers[0],"layers",e)),this.refresh()},n.prototype.removeLayer=function(e){this.layers.splice(e,1),this.refresh()},n.prototype.addMarker=function(e,t){var i=document.getElementById(this.element.id+"_LayerIndex_"+e);if(t.length>0&&i){for(var o=0,n=t;o<n.length;o++){var a=n[o];this.layersCollection[e].markerSettings.push(new wt(this,"markerSettings",a))}new Et(this).markerRender(i,e,this.mapLayerPanel.currentFactor,"AddMarker"),this.arrangeTemplate()}},n.prototype.shapeSelection=function(e,i,o,n){var a;t.isNullOrUndefined(n)&&(n=!0);var l=this.layers[e].selectionSettings;if(!l.enableMultiSelect&&this.legendSelection&&n&&this.removeShapeSelection(),l.enable)for(var r=void 0,s=void 0,p=void 0,d=void 0,h=void 0,c=this.layers[e].shapeData.features,m=0;m<c.length;m++)if(c[m].properties[i]===o){var u=R(this.layers[e].dataSource,c[m].properties,this.layers[e].shapeDataPath,this.layers[e].shapePropertyPath);if(r=this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+m+"_dataIndex_"+(u?u.toString():"undefined"),a=$(r),t.isNullOrUndefined(u)&&t.isNullOrUndefined(a)&&(a=$(r=this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+m+"_dataIndex_null")),p=parseInt(a.id.split("_shapeIndex_")[1].split("_")[0],10),d=this.layers[e].shapeData.features.length>p?this.layers[e].shapeData.features[p].properties:null,s=parseInt(a.id.split("_dataIndex_")[1].split("_")[0],10),h=t.isNullOrUndefined(s)?null:this.layers[e].dataSource[s],n){re(l,this,a,d,h),this.shapeSelectionClass=$("ShapeselectionMap"),this.legendSettings.visible&&-1===a.id.indexOf("_MarkerIndex_")&&this.legendModule.shapeHighLightAndSelection(a,h,l,"selection",e);if((!this.legendSettings.visible||this.legendModule.shapeToggled)&&(a.setAttribute("class","ShapeselectionMapStyle"),-1===this.selectedElementId.indexOf(a.getAttribute("id"))&&this.selectedElementId.push(a.getAttribute("id")),!l.enableMultiSelect))return}else{this.legendSelection=!l.enableMultiSelect&&!this.legendSelection||this.legendSelection,this.legendSettings.visible&&-1===a.id.indexOf("_MarkerIndex_")&&"ShapeselectionMapStyle"===a.getAttribute("class")&&this.legendModule.shapeHighLightAndSelection(a,h,l,"selection",e);if(!this.legendSettings.visible||this.legendModule.shapeToggled){se(a);var g=this.selectedElementId.indexOf(a.getAttribute("id"));-1!==g&&(this.selectedElementId.splice(g,1),!l.enableMultiSelect&&this.legendSelection&&this.selectedElementId.length>0&&this.removeShapeSelection())}}}},n.prototype.zoomToCoordinates=function(e,i,o,n){var a,l,r,s,p=!1;(t.isNullOrUndefined(o)&&t.isNullOrUndefined(n)||t.isNullOrUndefined(e)&&t.isNullOrUndefined(i))&&(o=t.isNullOrUndefined(o)?0:o,n=t.isNullOrUndefined(n)?0:n,e=t.isNullOrUndefined(e)?0:e,i=t.isNullOrUndefined(e)?0:i,p=!0),e>o&&(e=(a=[o,e])[0],o=a[1]),i>n&&(i=(l=[n,i])[0],n=l[1]),p?(r=e+o,s=i+n):(r=(e+o)/2,s=(i+n)/2),this.centerLatOfGivenLocation=r,this.centerLongOfGivenLocation=s,this.scaleOfGivenLocation=Ie(e,o,i,n,this.mapAreaRect.width,this.mapAreaRect.height,this),this.zoomNotApplied=!0,this.refresh()},n.prototype.removeShapeSelection=function(){for(var e=this.selectedElementId.length,t=0;t<e;t++)se(J(this.selectedElementId[0])),this.selectedElementId.splice(0,1)},n.prototype.setCulture=function(){this.intl=new t.Internationalization,this.setLocaleConstants(),this.localeObject=new t.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},n.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom In",Zoom:"Zoom",ZoomOut:"Zoom Out",Pan:"Pan",Reset:"Reset"}},n.prototype.destroy=function(){this.unWireEVents(),e.prototype.destroy.call(this)},n.prototype.getModuleName=function(){return"maps"},n.prototype.getPersistData=function(){return this.addOnPersist(["translatePoint","zoomSettings","mapScaleValue","tileTranslatePoint","baseTranslatePoint","scale"])},n.prototype.onPropertyChanged=function(i,o){for(var n=!1,a=!1,l=!1,r=Object.keys(i).length,s=document.getElementById(this.element.id+"_LayerIndex_"+(r-1)),p=0,d=Object.keys(i);p<d.length;p++){var h=d[p];switch(h){case"background":this.renderBorder();break;case"height":case"width":case"layers":case"projectionType":case"legendSettings":case"zoomSettings":case"baseLayerIndex":if("layers"===h)for(var c=Object.keys(i.layers).length,m=0;m<c;m++)if(!t.isNullOrUndefined(i.layers[m]))for(var u=0,g=Object.keys(i.layers[m]);u<g.length;u++){var y=g[u];"markerSettings"===y?a=!0:"staticMapType"===y&&(l=!0)}n=!0;break;case"locale":case"currencyCode":e.prototype.refresh.call(this)}}n&&(i.layers&&a?(q(this.element.id+"_Markers_Group"),this.isTileMap?this.mapLayerPanel.renderTileLayer(this.mapLayerPanel,this.layers.currentFactor,r-1):this.markerModule.markerRender(s,r-1,this.mapLayerPanel.currentFactor,"AddMarker")):i.layers&&l?this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length-1].key,this.staticMapZoom):(this.createSVG(),this.render()))},n.prototype.requiredModules=function(){var e=[],t=this.findVisibleLayers(this.layers),i=!1;return this.annotations.map(function(e,t){i=null!=e.content}),this.isBubbleVisible()&&e.push({member:"Bubble",args:[this]}),t.highlight&&e.push({member:"Highlight",args:[this]}),t.selection&&e.push({member:"Selection",args:[this]}),this.legendSettings.visible&&e.push({member:"Legend",args:[this]}),(this.zoomSettings.enable||this.zoomSettings.zoomFactor>this.zoomSettings.minZoom)&&e.push({member:"Zoom",args:[this]}),this.isMarkersVisible()&&e.push({member:"Marker",args:[this]}),this.isDataLabelVisible()&&e.push({member:"DataLabel",args:[this]}),this.isNavigationVisible()&&e.push({member:"NavigationLine",args:[this]}),t.tooltip&&e.push({member:"MapsTooltip",args:[this]}),i&&e.push({member:"Annotations",args:[this,Kt]}),e},n.prototype.isMarkersVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,function(t,i){for(var o=0;o<t.markerSettings.length;o++)if(t.markerSettings[o].visible){e=!0;break}}),e},n.prototype.isDataLabelVisible=function(){for(var e=!1,t=0;t<this.layers.length;t++)if(this.layers[t].dataLabelSettings.visible){e=!0;break}return e},n.prototype.isNavigationVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,function(t,i){for(var o=0;o<t.navigationLineSettings.length;o++)if(t.navigationLineSettings[o].visible){e=!0;break}}),e},n.prototype.isBubbleVisible=function(){for(var e=!1,t=0,i=this.layers;t<i.length;t++){var o=i[t];if(this.getBubbleVisible(o)){e=!0;break}}return e},n.prototype.getBubbleVisible=function(e){for(var t=!1,i=0,o=e.bubbleSettings;i<o.length;i++){if(o[i].visible){t=!0;break}}return t},n.prototype.print=function(e){new Qt(this).print(e)},n.prototype.export=function(e,t,i){new Qt(this).export(e,t,i)},n.prototype.findVisibleLayers=function(e,t,i,o,n,a){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===a&&(a=!1);for(var l,r,s=0,p=e;s<p.length;s++){var d=p[s];if(t=d.visible||t,d.visible){l=d.bubbleSettings,r=d.markerSettings;for(var h=0,c=d.navigationLineSettings;h<c.length;h++){var m=c[h];m.visible&&(n=m.highlightSettings.enable||n,a=m.selectionSettings.enable||a)}for(var u=0,g=r;u<g.length;u++){var y=g[u];if(y.visible&&(o=y.tooltipSettings.visible||o,n=y.selectionSettings.enable||n,a=y.highlightSettings.enable||a),o)break}for(var f=0,b=l;f<b.length;f++){var v=b[f];if(v.visible&&(o=v.tooltipSettings.visible||o,n=v.selectionSettings.enable||n,a=v.highlightSettings.enable||a),o)break}o=d.tooltipSettings.visible||o,n=d.selectionSettings.enable||n,a=d.highlightSettings.enable||a}if(t&&i&&o)break}return{layer:t,bubble:i,tooltip:o,selection:n,highlight:a}},n.prototype.getGeoLocation=function(e,t){var i=document.getElementById(this.element.id),o=t.layerX-i.offsetLeft,n=t.layerY-i.offsetTop,a=X(this,this.layersCollection[e],!1).location,l=a.x*this.scale,r=a.y*this.scale,s=Math.min(this.mapAreaRect.height,this.mapAreaRect.width)*this.mapLayerPanel.currentFactor*this.scale,p=this.clip(o-l,0,s-1)/s-.5,d=.5-this.clip(n-r,0,s-1)/s;return{latitude:90-360*Math.atan(Math.exp(2*-d*Math.PI))/Math.PI,longitude:360*p}},n.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},n.prototype.getTileGeoLocation=function(e){var t,i=document.getElementById(this.element.id),o=document.getElementById(this.element.id+"_tile_parent");this.mapLayerPanel.tiles[this.mapLayerPanel.tiles.length-1],this.mapLayerPanel.tiles[0];return t=this.pointToLatLong(e.layerX+this.mapAreaRect.x-(o.offsetLeft-i.offsetLeft),e.layerY+this.mapAreaRect.y-(o.offsetTop-i.offsetTop)),{latitude:t.latitude,longitude:t.longitude}},n.prototype.pointToLatLong=function(e,t){var i="GoogleStaticMap"===this.layers[this.layers.length-1].layerType?0:10;t=this.zoomSettings.enable?t+i:t;var o=256*Math.pow(2,this.tileZoomLevel),n=this.clip(e-this.translatePoint.x*this.scale,0,o-1)/o-.5,a=.5-this.clip(t-this.translatePoint.y*this.scale,0,o-1)/o;return{latitude:90-360*Math.atan(Math.exp(2*-a*Math.PI))/Math.PI,longitude:360*n}},ei([t.Property(null)],n.prototype,"background",void 0),ei([t.Property(!1)],n.prototype,"useGroupingSeparator",void 0),ei([t.Property(null)],n.prototype,"format",void 0),ei([t.Property(null)],n.prototype,"width",void 0),ei([t.Property(null)],n.prototype,"height",void 0),ei([t.Property("MouseMove")],n.prototype,"tooltipDisplayMode",void 0),ei([t.Complex({},xt)],n.prototype,"titleSettings",void 0),ei([t.Complex({},St)],n.prototype,"zoomSettings",void 0),ei([t.Complex({},Mt)],n.prototype,"legendSettings",void 0),ei([t.Collection([],Pt)],n.prototype,"layers",void 0),ei([t.Collection([],it)],n.prototype,"annotations",void 0),ei([t.Complex({},st)],n.prototype,"margin",void 0),ei([t.Complex({color:"#DDDDDD",width:0},at)],n.prototype,"border",void 0),ei([t.Property("Material")],n.prototype,"theme",void 0),ei([t.Property("Mercator")],n.prototype,"projectionType",void 0),ei([t.Property(0)],n.prototype,"baseLayerIndex",void 0),ei([t.Property(null)],n.prototype,"description",void 0),ei([t.Property(1)],n.prototype,"tabIndex",void 0),ei([t.Complex({latitude:null,longitude:null},lt)],n.prototype,"centerPosition",void 0),ei([t.Complex({},Tt)],n.prototype,"mapsArea",void 0),ei([t.Event()],n.prototype,"load",void 0),ei([t.Event()],n.prototype,"beforePrint",void 0),ei([t.Event()],n.prototype,"loaded",void 0),ei([t.Event()],n.prototype,"click",void 0),ei([t.Event()],n.prototype,"doubleClick",void 0),ei([t.Event()],n.prototype,"rightClick",void 0),ei([t.Event()],n.prototype,"resize",void 0),ei([t.Event()],n.prototype,"tooltipRender",void 0),ei([t.Event()],n.prototype,"legendRendering",void 0),ei([t.Event()],n.prototype,"tooltipRenderComplete",void 0),ei([t.Event()],n.prototype,"shapeSelected",void 0),ei([t.Event()],n.prototype,"itemSelection",void 0),ei([t.Event()],n.prototype,"itemHighlight",void 0),ei([t.Event()],n.prototype,"shapeHighlight",void 0),ei([t.Event()],n.prototype,"layerRendering",void 0),ei([t.Event()],n.prototype,"shapeRendering",void 0),ei([t.Event()],n.prototype,"markerRendering",void 0),ei([t.Event()],n.prototype,"markerClusterRendering",void 0),ei([t.Event()],n.prototype,"markerClick",void 0),ei([t.Event()],n.prototype,"markerClusterClick",void 0),ei([t.Event()],n.prototype,"markerClusterMouseMove",void 0),ei([t.Event()],n.prototype,"markerMouseMove",void 0),ei([t.Event()],n.prototype,"dataLabelRendering",void 0),ei([t.Event()],n.prototype,"bubbleRendering",void 0),ei([t.Event()],n.prototype,"bubbleClick",void 0),ei([t.Event()],n.prototype,"bubbleMouseMove",void 0),ei([t.Event()],n.prototype,"animationComplete",void 0),ei([t.Event()],n.prototype,"annotationRendering",void 0),ei([t.Event()],n.prototype,"zoom",void 0),ei([t.Event()],n.prototype,"pan",void 0),n=ei([t.NotifyPropertyChanges],n)}(t.Component),ii=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},oi=function(){function e(e){this.id="",this.maps=e,this.bubbleCollection=[]}return e.prototype.renderBubble=function(e,i,o,n,a,l,r,s,p,d){var h,c,m=this,u=s.layerData,g=e.colorValuePath,y=i[g],f=Number(i[g]),b=Number(i[e.valuePath]);if(isNaN(b)&&isNaN(f)&&t.isNullOrUndefined(y))return null;var v=Z(e.minRadius,e.maxRadius,b,n.min,n.max),x=new Xt(this.maps).getColorByValue(e.colorMapping,f,y);c="[object Object]"!==Object.prototype.toString.call(x)||t.isNullOrUndefined(x.fill)?o:x.fill,h="[object Object]"!==Object.prototype.toString.call(x)||t.isNullOrUndefined(x.opacity)?e.opacity:x.opacity;for(var S=[[]],_=0,M=0,O=0,C=0,L=u.length;C<L;C++){var w=u[C];w=w.property;var P=U(i[s.shapeDataPath],s.shapePropertyPath,w);if(i[s.shapeDataPath]===w[P])if("Point"===u[C].type)S.push(this.getPoints(u[C],[]));else if(u[C]._isMultiPolygon)for(var I=u[C],T=0;T<I.length;T++)S.push(this.getPoints(I[T],[])),M<(O=S[S.length-1].length)&&(M=O,_=S.length-1);else S.push(this.getPoints(u[C],[])),M<(O=S[S.length-1].length)&&(M=O,_=S.length-1)}var k,N,A=this.maps.projectionType,F=H(S[_],A);if(e.visible){if(t.isNullOrUndefined(F)){var j=S.length-1;if(!S[j].x||!S[j].y)return;if(N={cancel:!1,name:Ut,border:e.border,cx:S[j].x,cy:S[j].y,data:i,fill:c,maps:this.maps.isBlazor?null:this.maps,radius:v},this.maps.isBlazor){N.maps;var R=ii(N,["maps"]);N=R}}else k="Mercator"===this.maps.projectionType?F.y:-F.y,N={cancel:!1,name:Ut,border:e.border,cx:F.x,cy:k,data:i,fill:c,maps:this.maps.isBlazor?null:this.maps,radius:v};this.maps.trigger("bubbleRendering",N,function(i){if(!N.cancel){var o;if("Circle"===e.bubbleType){var n=new De(d,N.fill,N.border,h,0,0,N.radius,null);o=B(m.maps,n,p)}else{var c="Mercator"===m.maps.projectionType?N.cy-v:N.cy+v,u=new Ue(d,N.fill,N.border,h,new qe(0,0,2*v,2*v),2,2);N.cx-=v,N.cy=c,o=z(m.maps,u,p)}E(m.maps.selectedBubbleElementId,m.maps.bubbleSelectionClass,o,"BubbleselectionMapStyle"),m.bubbleCollection.push({LayerIndex:r,BubbleIndex:a,DataIndex:l,element:o,center:{x:N.cx,y:N.cy}});var g,y=0!==s.animationDuration||t.isNullOrUndefined(m.maps.zoomModule),f=(g=m.maps.zoomSettings.zoomFactor>1&&!t.isNullOrUndefined(m.maps.zoomModule)?Y(m.maps,s,y):X(m.maps,s,y)).scale,b=g.location,x=new We(m.maps.isTileMap?N.cx:(N.cx+b.x)*f,m.maps.isTileMap?N.cy:(N.cy+b.y)*f);o.setAttribute("transform","translate( "+x.x+" "+x.y+" )");var S=e.dataSource.length-1===l?"bubble":null;"Square"===e.bubbleType?(x.x+=v,x.y+=v*("Mercator"===m.maps.projectionType?1:-1)):v=0,e.animationDuration>0&&pe(o,e.animationDelay,e.animationDuration,x,m.maps,S,v)}})}},e.prototype.getPoints=function(e,i){return t.isNullOrUndefined(e.map)?i=e.point:e.map(function(e,t){i.push(new Ae(e.point.x,e.point.y))}),i},e.prototype.bubbleClick=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")){var o=this.getbubble(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Dt,data:o,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=ii(n,["maps"])}this.maps.trigger(Dt,n)}}},e.prototype.getbubble=function(e){var t=e.split("_LayerIndex_"),i=parseInt(t[1].split("_")[0],10),o=this.maps.layers[i];if(e.indexOf("_BubbleIndex_")>-1){var n=parseInt(t[1].split("_BubbleIndex_")[1],10),a=parseInt(t[1].split("_BubbleIndex_")[1].split("_dataIndex_")[1],10);if(!isNaN(n))return o.bubbleSettings[n].dataSource[a]}return null},e.prototype.bubbleMove=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")){var o=this.getbubble(i);if(!t.isNullOrUndefined(o)){var n={cancel:!1,name:Zt,data:o,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){n.maps;n=ii(n,["maps"])}this.maps.trigger(Zt,n)}}},e.prototype.getModuleName=function(){return"Bubble"},e.prototype.destroy=function(e){},e}(),ni=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},ai=function(){function e(e){this.value={rightWidth:0,leftWidth:0,heightTop:0,heightBottom:0},this.maps=e,this.dataLabelCollections=[]}return e.prototype.getDataLabel=function(e,t,i,o){for(var n,a=0;a<e.length;a++){var l=e[a];if(l[o]===i){n=l;break}}return n},e.prototype.renderLabel=function(e,i,o,n,a,l,r,s){var p,d,h,c,m,u,g,y,f=this,b=e.dataLabelSettings,v=e.dataLabelSettings.textStyle,_=e.dataLabelSettings,O=e.dataLabelSettings.labelPath,C=[[]],L=0,w=0,P=o,I="",T=0,k=!1,E=o.properties,N=this.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+r+"_LabelIndex_"+r,A=new Ae(0,0),B=n[r];v.fontFamily=this.maps.themeStyle.labelFontFamily,o=B.property;for(var z,F,j="[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)?e.shapePropertyPath:[e.shapePropertyPath],R=!1,U=0!==e.animationDuration||t.isNullOrUndefined(this.maps.zoomModule),Z=this.maps.isTileMap?new Object:X(this.maps,e,U),V=this.maps.isTileMap?this.maps.scale:Z.scale,W=this.maps.isTileMap?this.maps.translatePoint:Z.location,q=this.maps.zoomTranslatePoint,Y=t.isNullOrUndefined(this.maps.scale)?1:Math.floor(this.maps.scale),J=this.maps.zoomSettings.enable?!t.isNullOrUndefined(this.maps.zoomShapeCollection)&&this.maps.zoomShapeCollection.length>0:this.maps.zoomSettings.enable,$=0;$<j.length&&!(E[j[$]]&&(z=j[$],c=this.getDataLabel(e.dataSource,O,P.properties[z],e.shapeDataPath)));$++);if(c=this.getDataLabel(e.dataSource,O,P.properties[z],e.shapeDataPath),!t.isNullOrUndefined(B.property)&&(E[O]||c))if(C=[[]],n[r]._isMultiPolygon||"Point"===n[r].type){var ee=n[r];if("Point"===ee.type){R=!0;var te=[];te.push(this.getPoint(n,[])),w<(T=(C=te)[C.length-1].length)&&(w=T,L=C.length-1)}for($=0;$<ee.length;$++)C.push(this.getPoint(ee[$],[])),w<(T=C[C.length-1].length)&&(w=T,L=C.length-1)}else C.push(this.getPoint(n[r],[])),w<(T=C[C.length-1].length)&&(w=T,L=C.length-1);var ie=I=t.isNullOrUndefined(c)?P.properties[O]:c[O].toString(),oe=this.maps.projectionType,ne=u=R?{x:C[L][r].x,y:C[L][r].y,rightMin:0,rightMax:0,leftMin:0,leftMax:0,points:C[L][r],topMax:0,topMin:0,bottomMax:0,bottomMin:0,height:0}:H(C[L],oe);if(!t.isNullOrUndefined(I)&&!t.isNullOrUndefined(u)){if(J&&Y>1){if(i>0)for(var ae=0;ae<this.maps.zoomLabelPositions.length;ae++)if(this.maps.zoomLabelPositions[ae].dataLabelText===I){m=r,r=ae,k=!0;break}g=u.x,y=u.y,u.x=(u.x+q.x)*V,u.y=(u.y+q.y)*V}u.y="Mercator"===this.maps.projectionType?u.y:-u.y,t.isNullOrUndefined(this.maps.format)||isNaN(parseFloat(I))||this.maps.useGroupingSeparator&&(I=K(this.maps,parseFloat(I)),t.isNullOrUndefined(c)||(c[O]=I));var le={name:Rt,maps:this.maps,cancel:!1,border:b.border,datalabel:b,fill:b.fill,template:b.template,text:I};if(this.maps.isBlazor){le.maps;var re=ni(le,["maps"]);le=re}this.maps.trigger("dataLabelRendering",le,function(e){if(!le.cancel){var o=[],n=u.rightMax.x-u.leftMax.x;t.isNullOrUndefined(f.maps.dataLabelShape)||(F=ne.rightMax.x-ne.leftMax.x,f.maps.dataLabelShape.push(F)),le.text===I||le.cancel||(I=le.text);var b=x(I,v),O=I,w=b,T=u.y-b.height/4,E=u.y+b.height/4,B=u.y-b.height/4,z=u.y+b.height/4;if(o=D(C[L],T,E),!R&&o.length>5&&"MultiPolygon"!==P.geometry.type&&"MultiPolygon"!==P.type){var j=H(o,oe);J&&Y>1&&(j.x=(f.maps.zoomLabelPositions[r].location.x+q.x)*V,j.y=(f.maps.zoomLabelPositions[r].location.y+q.y)*V),g=j.x,u.x=j.x,n=J&&Y>1?f.maps.zoomShapeCollection[r].width:j.rightMax.x-j.leftMax.x}var U=u.x+b.width/2,Z=u.x-b.width/2;f.value[r]={rightWidth:U,leftWidth:Z,heightTop:B,heightBottom:z};var X;if(""!==le.template){var K=(p=Q(le.template))?p(t.isNullOrUndefined(c)?P.properties:c,null,null,f.maps.element.id+"_LabelTemplate",!1):document.createElement("div");K.innerHTML=p?"":le.template,(X=M(K,N,t.isNullOrUndefined(c)?P.properties:c,0,f.maps)).style.left=Math.abs(f.maps.baseMapRectBounds.min.x-u.x)*V+"px",X.style.top=Math.abs(f.maps.baseMapRectBounds.min.y-u.y)*V+"px",l.appendChild(X)}else{if("Trim"===_.smartLabelMode&&(w=x(O=G(n,I,v),v),d=new Fe(N,A.x,A.y,"middle",O,"","")),"None"===_.smartLabelMode&&(d=new Fe(N,A.x,A.y,"middle",I,"","")),"Hide"===_.smartLabelMode&&(I=n>=b.width?I:"",d=new Fe(N,A.x,A.y,"middle",I,"","")),I=d.text,"Hide"===_.intersectionAction){for(var $=0;$<s.length;$++)if(!t.isNullOrUndefined(s[$])){if(!(f.value[r].leftWidth>s[$].rightWidth||f.value[r].rightWidth<s[$].leftWidth||f.value[r].heightTop>s[$].heightBottom||f.value[r].heightBottom<s[$].heightTop)){I="";break}I=I}s.push(f.value[r]),d=new Fe(N,A.x,A.y,"middle",I,"","")}if("Trim"===_.intersectionAction){for(var ee=0;ee<s.length;ee++)if(!t.isNullOrUndefined(s[ee]))if(s[ee].rightWidth<f.value[r].leftWidth||s[ee].leftWidth>f.value[r].rightWidth||s[ee].heightBottom<f.value[r].heightTop||s[ee].heightTop>f.value[r].heightBottom)O=I,0;else{if(f.value[r].leftWidth>s[ee].leftWidth){O=G((n=s[ee].rightWidth-f.value[r].leftWidth)-(f.value[r].rightWidth-f.value[r].leftWidth),I,v);break}if(f.value[r].leftWidth<s[ee].leftWidth){n=f.value[r].rightWidth-s[ee].leftWidth,O=G(Math.abs(n-(f.value[r].rightWidth-f.value[r].leftWidth)),I,v);break}}w=x(O,v),s.push(f.value[r]),d=new Fe(N,A.x,A.y,"middle",O,"","")}if("None"===_.intersectionAction&&(d=new Fe(N,A.x,A.y,"middle",I,"","")),O.length>1){var te=le.border;if(te.width>1){var ae=le.fill,re=_.opacity,se=_.rx,pe=_.ry,de=void 0,he=void 0;J&&Y>1?(de=u.x-b.width/2,he=u.y-b.height/2-5):(de=(u.x+W.x)*V-b.width/2,he=(u.y+W.y)*V-b.height/2);var ce=new Ue(f.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+r+"_rectIndex_"+r,ae,te,re,new qe(de,he,b.width,b.height),se,pe),me=f.maps.renderer.drawRectangle(ce);a.appendChild(me)}}h=S(d,v,v.color||f.maps.themeStyle.dataLabelFontColor,a),J&&Y>1?(h.setAttribute("transform","translate( "+u.x+" "+u.y+" )"),u.x=g,u.y=y):(h.setAttribute("transform","translate( "+(u.x+W.x)*V+" "+((u.y+W.y)*V+w.height/4)+" )"),u.y=u.y+w.height/4),a.appendChild(h)}f.dataLabelCollections.push({location:{x:u.x,y:u.y},element:t.isNullOrUndefined(X)?h:X,layerIndex:i,shapeIndex:k?m:r,labelIndex:k?m:r,dataLabelText:ie}),l.childElementCount>0&&!f.maps.element.contains(l)&&document.getElementById(f.maps.element.id+"_Secondary_Element").appendChild(l)}})}},e.prototype.getPoint=function(e,t){return e.map(function(e,i){t.push(new Ae(e.point.x,e.point.y))}),t},e.prototype.getModuleName=function(){return"DataLabel"},e.prototype.destroy=function(e){},e}(),li=function(){function e(e){this.maps=e}return e.prototype.renderNavigation=function(e,i,o){var n,a;a=e.navigationLineSettings;for(var l,r,s,p,d,m,u,g,y,f,b,v,x,S,_,M,O,C,L,w,P=[],I=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+o+"_line_Group"}),T=0;T<a.length;T++){if(r=a[T].properties.latitude,l=a[T].properties.longitude,s=a[T].properties.visible,p=a[T].angle,d=a[T].width||1,m=a[T].color,u=a[T].properties.dashArray,x=a[T].properties.arrowSettings,f=!t.isNullOrUndefined(x)&&x.properties.showArrow,l.length===r.length&&s)for(var k=0;k<l.length;k++){var N=this.maps.isTileMap?c(new Ae(l[k],r[k]),i,this.maps.tileTranslatePoint,!0):h(r[k],l[k],i,e,this.maps);P.push(N)}L=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+o+"_NavigationGroup"+T});for(var A=0;A<P.length-1;A++){p=1<(p=-1>p?-1:p)?1:p;var B=this.maps.element.id+"_LayerIndex_"+o+"_NavigationIndex_"+T+"_Line"+A,z=this.convertRadius(P[A],P[A+1]);if(p<=1&&p>0&&(y=0,P[A].x>P[A+1].x&&(y=1)),p>=-1&&p<0&&(y=1,P[A].x>P[A+1].x&&(y=0)),P[A].x!==P[A+1].x){if(f){b=x.properties.color,v=x.properties.size,C=void 0===x.properties.offSet?0:x.properties.offSet;var F=Math.round(v/2);_="Start"===(S=x.properties.position)?"url(#triangle"+T+")":null,M="End"===S?"url(#triangle"+T+")":null,0!==O&&0===p&&(O="Start"===S?C:-C),O=t.isNullOrUndefined(O)?0:O;var j=this.maps.element.id+"_triangle",R=this.maps.renderer.createDefs();R.innerHTML+='<marker id="triangle'+T+'"></marker>';var U=R.querySelector("#triangle"+T);U.setAttribute("markerWidth",v.toString()),U.setAttribute("markerHeight",v.toString()),U.setAttribute("refX",(F-O).toString()),U.setAttribute("refY",F.toString()),U.setAttribute("orient","auto");g=new je(j,b,d,m,1,u,"M 0,0  L 0,"+v+" L "+F+", "+F+" Z"),n=this.maps.renderer.drawPath(g),U.appendChild(n),R.appendChild(U),L.appendChild(R)}w=0===(p=Math.abs(p))?"M "+P[A].x+","+P[A].y+"L "+P[A+1].x+","+P[A+1].y+" ":"M "+P[A].x+","+P[A].y+" A "+(z/2+(1-p)*z/(10*p))+" "+(z/2+(1-p)*z/(10*p))+" 0,0,"+y+" , "+P[A+1].x+","+P[A+1].y+" ",g=new je(B,"none",d,m,1,u,w),n=this.maps.renderer.drawPath(g),t.isNullOrUndefined(S)||("Start"===S?n.setAttribute("marker-start",_):n.setAttribute("marker-end",M)),E(this.maps.selectedNavigationElementId,this.maps.navigationSelectionClass,n,"navigationlineselectionMapStyle"),L.appendChild(n),I.appendChild(L)}}P=[]}return I},e.prototype.convertRadius=function(e,t){var i=t.x-e.x,o=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))},e.prototype.getModuleName=function(){return"NavigationLine"},e.prototype.destroy=function(e){},e}(),ri=function(){function e(e){this.legendBorderRect=new qe(0,0,0,0),this.totalPages=[],this.page=0,this.currentPage=0,this.legendItemRect=new qe(0,0,0,0),this.heightIncrement=0,this.widthIncrement=0,this.textMaxWidth=0,this.shapeHighlightCollection=[],this.legendHighlightCollection=[],this.shapePreviousColor=[],this.selectedNonLegendShapes=[],this.shapeToggled=!0,this.legendElement=null,this.maps=e,this.addEventListener()}return e.prototype.renderLegend=function(){this.legendRenderingCollections=[],this.legendCollection=[],this.totalPages=[],this.widthIncrement=0,this.heightIncrement=0,this.defsElement=this.maps.renderer.createDefs(),this.maps.svgObject.appendChild(this.defsElement),this.calculateLegendBounds(),this.drawLegend()},e.prototype.calculateLegendBounds=function(){var e=this,i=this.maps,o=i.legendSettings;this.legendCollection=[];var n=i.mapAreaRect.y;if(this.legendRenderingCollections=[],Array.prototype.forEach.call(i.layersCollection,function(i,n){if(!t.isNullOrUndefined(i.shapeData)){var a=i.shapeData.features,l=i.shapeDataPath,r=i.shapePropertyPath,s=i.dataSource,p=void 0,d=void 0;if("Layers"===o.type&&i.visible)p=i.shapeSettings.colorValuePath,d=i.shapeSettings.colorMapping,e.getLegends(n,a,d,s,l,p,r);else if("Bubbles"===o.type)for(var h=0,c=i.bubbleSettings;h<c.length;h++){var m=c[h];m.visible&&(p=m.colorValuePath,d=m.colorMapping,s=m.dataSource,e.getLegends(n,a,d,s,l,p,r))}else e.getMarkersLegendCollections(n,i.markerSettings)}}),this.legendCollection.length>0)for(var a=0;a<this.legendCollection.length;a++){var l={name:"legendRendering",cancel:!1,fill:(V=this.legendCollection[a]).fill,shape:o.shape,shapeBorder:o.shapeBorder,text:"number"==typeof V.text?V.text.toString():V.text};i.trigger("legendRendering",l),V.fill=l.fill,V.shape=l.shape,V.shapeBorder=l.shapeBorder,V.text=l.text,l.cancel&&(this.legendCollection.splice(a,1),a--)}var r=i.legendSettings.title.text,s=i.legendSettings.titleStyle;if(this.legendCollection.length>0){var p,d,h=o.mode,c=0,m=0,u=0,g=0,y=o.shapePadding,f=o.shapeHeight,b=o.shapeWidth,v=[],S=[],_=o.position,M=o.labelDisplayMode,O="None"===o.orientation?"Top"===_||"Bottom"===_?"Horizontal":"Vertical":o.orientation,C=o.width.length>1?o.width.indexOf("%")>-1?i.availableSize.width/100*parseInt(o.width,10):parseInt(o.width,10):null,L=o.height.length>1?o.height.indexOf("%")>-1?i.availableSize.height/100*parseInt(o.height,10):parseInt(o.height,10):null,w=0,P=0,I=x(r,s);if("Interactive"===h){var T=o.textStyle,k=void 0,E=void 0,N=this.legendCollection.length;k="Horizontal"===O?t.isNullOrUndefined(C)?i.mapAreaRect.width/N:C/N:t.isNullOrUndefined(C)?25:C,E="Horizontal"===O?t.isNullOrUndefined(L)?25:L:t.isNullOrUndefined(L)?i.mapAreaRect.height/N:L/N,w=0,P=I.height+10;var A=o.labelPosition,B=0,z=0,F=0,j=0,R=0,U=0;for(a=0;a<this.legendCollection.length;a++){w="Horizontal"===O?w+k:w,P="Horizontal"===O?P:P+E;var D=this.legendCollection[a].text,Z=new Ne(0,0);"None"===M?Z=x(D,T):"Trim"===M?Z=x(D=G("Horizontal"===O?k:E,D,T),T):D="",R=Math.max(R,Z.height),U=Math.max(U,Z.width),Z.width>0&&Z.height>0&&("Horizontal"===O?(B=w+k/2,z="After"===A?P+E+Z.height/2+10:P-10):(B="After"===A?w-Z.width/2-10:w+k+Z.width/2+10,z=P+E/2+Z.height/4)),0===a?(F="Horizontal"===O?w:"After"===A?B-Z.width/2:w,j="Horizontal"===O?"After"===A?P:z-Z.height/2:P,1===this.legendCollection.length&&(C="Horizontal"===O?Math.abs(w+k-F):k+U+10,L="Horizontal"===O?E+R/2+10:Math.abs(P+E-j))):a===this.legendCollection.length-1&&(C="Horizontal"===O?Math.abs(w+k-F):k+U+10,L="Horizontal"===O?E+R/2+10:Math.abs(P+E-j)),this.legendRenderingCollections.push({fill:this.legendCollection[a].fill,x:w,y:P,width:k,height:E,text:D,textX:B,textY:z,textWidth:Z.width,textHeight:Z.height,shapeBorder:this.legendCollection[a].shapeBorder})}1===this.legendCollection.length&&(L=E,C=k),this.legendItemRect={x:F,y:j,width:C,height:L}}else{C=t.isNullOrUndefined(C)?i.mapAreaRect.width:C,L=t.isNullOrUndefined(L)?i.mapAreaRect.height:L;var H=0;this.page=0;for(a=0;a<this.legendCollection.length;a++){var V=this.legendCollection[a];t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]});var W=x(V.text,o.textStyle);if(this.textMaxWidth=Math.max(this.textMaxWidth,W.width),0===a)w=c=10+b/2,P=m=n+I.height+(f>W.height?f/2:W.height/4);else{var q=W.height>f?W.height:f;if("Horizontal"===O){var X=S[H-1].x+S[H-1].width+10+b;if(X+y+W.width>C){var Y=(S[H-1].y>v[H-1].y+f/2?S[H-1].y:v[H-1].y+f/2)+n;Y+q>L?(this.getPageChanged(),H=0,v=[],S=[],c=w,m=P):(c=v[0].x,m=Y+q/2)}else c=X-b/2,m=v[H-1].y}else{var J=S[H-1].y>v[H-1].y+f/2?S[H-1].y:v[H-1].y+f/2;if(J+n+q>L){var K=S[H-1].x+this.textMaxWidth+10;K+y+W.width>C?(c=w,m=P,S=[],v=[],this.getPageChanged(),H=0):(c=K+b/2,m=v[0].y)}else c=v[H-1].x,m=J+n+f/2}}u=c+b/2+y,g=m+W.height/4,v.push({x:c,y:m}),S.push({x:u,y:g,width:W.width,height:W.height/2}),this.totalPages[this.page].Collection.push({DisplayText:V.text,ImageSrc:V.imageSrc,Shape:{x:c,y:m},Text:{x:u,y:g},Fill:V.fill,legendShape:V.shape,shapeBorder:V.shapeBorder,idIndex:a,Rect:{x:v[H].x-b/2,y:v[H].y-f/2<g-W.height?v[H].y-f/2:g-W.height,width:Math.abs(v[H].x-b/2-(u+W.width)),height:f>W.height?f:W.height}}),H++}var Q=this.totalPages[0].Collection;Array.prototype.forEach.call(Q,function(t,i){var o=new qe(t.Rect.x,t.Rect.y,t.Rect.width,t.Rect.height);0===i&&(p=o.x,d=o.y),e.widthIncrement=Math.max(e.widthIncrement,Math.abs(p-(o.x+o.width))),e.heightIncrement=Math.max(e.heightIncrement,Math.abs(d-(o.y+o.height)))}),C=this.widthIncrement<C?this.widthIncrement:C,L=this.heightIncrement<L?this.heightIncrement:L,this.legendItemRect={x:Q[0].Rect.x,y:Q[0].Rect.y,width:C,height:L}}}},e.prototype.getLegends=function(e,t,i,o,n,a,l){this.getRangeLegendCollection(e,t,i,o,n,a,l),this.getEqualLegendCollection(e,t,i,o,n,a,l),this.getDataLegendCollection(e,t,i,o,n,a,l)},e.prototype.getPageChanged=function(){this.page++,t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},e.prototype.drawLegend=function(){var e,t=this.maps,i=t.legendSettings,o=t.renderer,n=i.textStyle;if(this.legendGroup=o.createGroup({id:t.element.id+"_Legend_Group"}),"Interactive"===i.mode)for(var a=0;a<this.legendRenderingCollections.length;a++){var l=t.element.id+"_Legend_Index_"+a,r=t.element.id+"_Legend_Index_"+a+"_Text",s=this.legendRenderingCollections[a],p=new qe(s.x,s.y,s.width,s.height),d=new Ae(s.textX,s.textY);n.color=null!==n.color?n.color:this.maps.themeStyle.legendTextColor;var h=new Ue(l,s.fill,s.shapeBorder,i.opacity,p);e=new Fe(r,d.x,d.y,"middle",s.text,"",""),n.fontFamily=t.themeStyle.fontFamily||n.fontFamily,n.size=t.themeStyle.legendFontSize||n.size,S(e,n,n.color,this.legendGroup),this.legendGroup.appendChild(o.drawRectangle(h)),a===this.legendRenderingCollections.length-1&&this.renderLegendBorder()}else this.drawLegendItem(this.currentPage)},e.prototype.drawLegendItem=function(e){var i,o=this.maps,n=o.legendSettings,a=new Ne(n.shapeWidth,n.shapeHeight),l=o.renderer;if(e>=0&&e<this.totalPages.length){oe(this.legendGroup.id,this.maps.element.id)&&t.remove(oe(this.legendGroup.id,this.maps.element.id));for(var r=0;r<this.totalPages[e].Collection.length;r++){var s=this.totalPages[e].Collection[r],p=s.shapeBorder,d=l.createGroup({id:o.element.id+"_Legend_Index_"+s.idIndex}),h=s.DisplayText,c="Markers"===n.type?t.isNullOrUndefined(s.ImageSrc)?n.shape:"Image":s.legendShape,m="HorizontalLine"===n.shape||"VerticalLine"===n.shape||"Cross"===n.shape?t.isNullOrUndefined(n.fill)?"#000000":n.fill:p.color,u=("HorizontalLine"===n.shape||"VerticalLine"===n.shape||"Cross"===n.shape)&&0===p.width?1:p.width,g=o.element.id+"_Legend_Shape_Index_"+s.idIndex,y=o.element.id+"_Legend_Text_Index_"+s.idIndex,f=s.Shape,b=s.Text,v=(t.isNullOrUndefined(s.ImageSrc)?n.shape:s.ImageSrc,new je(g,s.Fill,u,m,n.opacity,""));if(n.textStyle.color=null!==n.textStyle.color?n.textStyle.color:this.maps.themeStyle.legendTextColor,n.textStyle.fontFamily=o.themeStyle.fontFamily||n.textStyle.fontFamily,n.textStyle.size=o.themeStyle.legendFontSize||n.textStyle.size,d.appendChild(ue(f,c,a,s.ImageSrc,v)),i=new Fe(y,b.x,b.y,"start",h,"",""),S(i,n.textStyle,n.textStyle.color,d),this.legendGroup.appendChild(d),r===this.totalPages[e].Collection.length-1){var _=void 0;if(0!==this.page){var M=e+1+"/"+this.totalPages.length,O=n.textStyle,C=x(M,O),L=this.legendItemRect.x+this.legendItemRect.width-C.width-20-10,w=this.legendItemRect.x+this.legendItemRect.width,P=this.legendItemRect.y+this.legendItemRect.height+2.5+10,I=w-10-C.width/2-5;_=l.createGroup({id:o.element.id+"_Legend_Paging_Group"});var T=l.createGroup({id:o.element.id+"_Legend_Left_Paging_Group"}),k=l.createGroup({id:o.element.id+"_Legend_Right_Paging_Group"}),E=" M "+w+" "+P+" L "+(w-10)+" "+(P-5)+" L "+(w-10)+" "+(P+5)+" z ",N=" M "+L+" "+P+" L "+(L+10)+" "+(P-5)+" L "+(L+10)+" "+(P+5)+" z ",A=new je(o.element.id+"_Left_Page","#a6a6a6",0,"#a6a6a6",1,"",N);T.appendChild(l.drawPath(A));var B=new Ue(o.element.id+"_Left_Page_Rect","transparent",{},1,new qe(L-5,P-10,20,20),null,null,"","");T.appendChild(l.drawRectangle(B)),this.wireEvents(T);var z=new je(o.element.id+"_Right_Page","#a6a6a6",0,"#a6a6a6",1,"",E);k.appendChild(l.drawPath(z));var F=new Ue(o.element.id+"_Right_Page_Rect","transparent",{},1,new qe(w-10,P-5,10,10),null,null,"","");k.appendChild(l.drawRectangle(F)),this.wireEvents(k),_.appendChild(T),_.appendChild(k);var j={id:o.element.id+"_Paging_Text",x:I,y:P+C.height/4,fill:"#a6a6a6","font-size":"14px","font-style":O.fontStyle,"font-family":O.fontFamily,"font-weight":O.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""};_.appendChild(l.createText(j,M)),this.legendGroup.appendChild(_)}this.renderLegendBorder()}}}},e.prototype.legendHighLightAndSelection=function(e,i){var o,n,a,l;l="Default"===this.maps.legendSettings.mode?document.getElementById(e.id.replace("Shape","Text")):document.getElementById(e.id+"_Text");var r,s=this.maps.legendModule.legendCollection,p=0,d=!0,h=parseFloat(e.id.charAt(e.id.length-1));this.updateLegendElement();var c=this.maps.toggledLegendId.indexOf(h);if(this.maps.legendSettings.toggleLegendSettings.enable&&"highlight"===i&&-1!==c){var m=this.getIndexofLegend(this.legendHighlightCollection,e);return-1!==m&&this.legendHighlightCollection.splice(m,1),this.removeLegendHighlightCollection(),null}if("selection"===i){var u=this.maps.layers[s[0].data[0].layerIndex].selectionSettings.enableMultiSelect;if(this.shapeHighlightCollection=[],this.maps.shapeSelections||u||(this.removeAllSelections(),this.maps.shapeSelections=!0),this.maps.legendSelectionCollection.length>0&&(u||this.maps.shapeSelections))for(var g=0;g<this.maps.legendSelectionCollection.length;g++)if(e===this.maps.legendSelectionCollection[g].legendElement){this.maps.legendSelectionCollection[g].legendElement=e,d=!1,this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[g].legendElement),this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(h),1),this.maps.legendSelectionCollection.splice(g,1),this.maps.legendSelection=!(this.maps.legendSelectionCollection.length>0);break}}else{if(this.maps.legendSelectionCollection.length>0)for(g=0;g<this.maps.legendSelectionCollection.length;g++){if((e.id.indexOf("_Legend_Shape")>-1||e.id.indexOf("_Legend_Index"))&&e===this.maps.legendSelectionCollection[g].legendElement){d=!1;break}this.removeLegendHighlightCollection()}this.removeLegendHighlightCollection()}if(d)for(var y=0;y<s.length;y++)if(l.textContent===s[y].text&&s[y].data.length>0){var f=this.maps.layers[s[y].data[0].layerIndex],b=void 0,v=void 0,x=void 0;if(t.isNullOrUndefined(f)||(b="selection"===i?f.selectionSettings.enable:f.highlightSettings.enable,v=void 0,v="selection"===i?f.selectionSettings:f.highlightSettings,x=s[y].data),b)for(var S=0;S<x.length;S++){o=x[S].shapeIndex,n=x[S].layerIndex,a=x[S].dataIndex;var _=document.getElementById(this.maps.element.id+"_LayerIndex_"+n+"_shapeIndex_"+o+"_dataIndex_"+a);if(null!==_){var M=!0;if(null!==this.maps.legendSelectionCollection)for(var O=0;O<this.maps.legendSelectionCollection.length;O++)if(this.maps.legendSelectionCollection[O].legendElement===e){M=!1;break}if("highlight"===i&&M){0===S&&(this.legendHighlightCollection=[],this.pushCollection(e,this.legendHighlightCollection,s[y],f.shapeSettings)),r=this.legendHighlightCollection.length;var C=this.legendHighlightCollection[r-1].legendOldFill;this.legendHighlightCollection[r-1].MapShapeCollection.Elements.push(_);var L=this.legendHighlightCollection[r-1].MapShapeCollection.Elements.length-1,w=_.getAttribute("fill");this.legendHighlightCollection[r-1].shapeOldFillColor.push(w);var P=this.legendHighlightCollection[r-1].shapeOldFillColor[L];this.shapePreviousColor=this.legendHighlightCollection[r-1].shapeOldFillColor,this.setColor(_,t.isNullOrUndefined(v.fill)?P:v.fill,v.opacity.toString(),v.border.color,v.border.width.toString(),"highlight"),this.setColor(e,t.isNullOrUndefined(v.fill)?C:v.fill,v.opacity.toString(),v.border.color,v.border.width.toString(),"highlight")}else if("selection"===i){this.legendHighlightCollection=[],this.maps.legendSelectionClass=v,0===S&&(this.pushCollection(e,this.maps.legendSelectionCollection,s[y],f.shapeSettings),this.maps.selectedLegendElementId.push(y)),p=this.maps.legendSelectionCollection.length;var I=void 0;I=this.maps.legendSelectionCollection[p-1].legendOldFill,this.maps.legendSelectionCollection[p-1].MapShapeCollection.Elements.push(_),this.maps.legendSelectionCollection[p-1].shapeOldFillColor=this.shapePreviousColor,this.setColor(e,t.isNullOrUndefined(v.fill)?I:v.fill,v.opacity.toString(),v.border.color,v.border.width.toString(),"selection"),this.setColor(_,t.isNullOrUndefined(v.fill)?I:v.fill,v.opacity.toString(),v.border.color,v.border.width.toString(),"selection"),-1===this.maps.selectedElementId.indexOf(_.getAttribute("id"))&&this.maps.selectedElementId.push(_.getAttribute("id")),S===x.length-1&&(this.maps.legendSelection=!1,this.removeLegend(this.maps.legendSelectionCollection))}}}}},e.prototype.setColor=function(e,t,i,o,n,a){"selection"===a?(N("ShapeselectionMap","ShapeselectionMapStyle",t,i,o,n,this.maps),e.setAttribute("class","ShapeselectionMapStyle")):(e.setAttribute("fill",t),e.setAttribute("opacity",i),e.setAttribute("stroke",o),e.setAttribute("stroke-width",(Number(n)/this.maps.scale).toString()))},e.prototype.pushCollection=function(e,t,i,o){t.push({legendElement:e,legendOldFill:i.fill,legendOldOpacity:i.opacity,legendOldBorderColor:i.borderColor,legendOldBorderWidth:i.borderWidth,shapeOpacity:o.opacity,shapeOldBorderColor:o.border.color,shapeOldBorderWidth:o.border.width}),length=t.length,t[length-1].MapShapeCollection={Elements:[]},t[length-1].shapeOldFillColor=[]},e.prototype.removeLegend=function(e){for(var t=0;t<e.length;t++){var i=e[t];this.setColor(i.legendElement,i.legendOldFill,i.legendOldOpacity,i.legendOldBorderColor,i.legendOldBorderWidth,"highlight");for(var o=i.MapShapeCollection.Elements.length,n=0;n<o;n++){var a=-1!==i.legendOldFill.indexOf("url")?i.shapeOldFillColor[n]:i.legendOldFill;this.setColor(i.MapShapeCollection.Elements[n],a,i.shapeOpacity,i.shapeOldBorderColor,i.shapeOldBorderWidth,"highlight")}}},e.prototype.removeLegendHighlightCollection=function(){this.legendHighlightCollection.length>0&&(this.removeLegend(this.legendHighlightCollection),this.legendHighlightCollection=[])},e.prototype.removeLegendSelectionCollection=function(e){if(this.maps.legendSelectionCollection.length>0){se(e);for(var t=this.shapesOfLegend(e),i=t.length,o=0;o<i;o++){var n=$(t[o]);if("ShapeselectionMapStyle"===n.getAttribute("class")){se(n);var a=void 0;-1!==(a=this.maps.selectedElementId.indexOf(n.id))&&this.maps.selectedElementId.splice(a,1)}}}},e.prototype.removeShapeHighlightCollection=function(){if(this.shapeHighlightCollection.length>0)for(var e=0;e<this.shapeHighlightCollection.length;e++){for(var t=this.shapeHighlightCollection[e],i=!0,o=0;o<this.maps.legendSelectionCollection.length;o++)this.maps.legendSelectionCollection[o].legendElement===t.legendElement&&(i=!1);i&&this.setColor(t.legendElement,t.legendOldFill,t.legendOldOpacity,t.legendOldBorderColor,t.legendOldBorderWidth,"highlight")}},e.prototype.shapeHighLightAndSelection=function(e,i,o,n,a){if(void 0!==i){this.updateLegendElement(),this.shapeToggled=!0;var l=this.maps.legendModule.legendCollection,r=this.legendIndexOnShape(i,a),s=this.shapeDataOnLegend(e),p=this.maps.toggledLegendId.indexOf(r.actualIndex);if(this.maps.legendSettings.toggleLegendSettings.enable&&-1!==p){this.shapeToggled=!1,this.legendHighlightCollection=[];var d=this.getIndexofLegend(this.shapeHighlightCollection,s.LegendEle);return-1!==d&&this.shapeHighlightCollection.splice(d,1),this.removeShapeHighlightCollection(),null}if(void 0===r.currentIndex&&void 0===r.actualIndex)return this.removeShapeHighlightCollection(),null;if(void 0!==r.currentIndex||"selection"!==n||this.maps.layers[a].selectionSettings.enableMultiSelect||"ShapeselectionMapStyle"===e.getAttribute("class")||(this.maps.legendSelection=!1),"selection"!==n||this.maps.layers[a].selectionSettings.enableMultiSelect||this.maps.legendSelection||(this.removeAllSelections(),this.maps.legendSelection=!0),void 0===r.currentIndex){if("selection"===n&&void 0!==r.actualIndex){for(var h=0,c=0;c<s.Elements.length;c++)"ShapeselectionMapStyle"===s.Elements[c].getAttribute("class")&&h++;var m=this.maps.selectedLegendElementId.indexOf(r.actualIndex);-1===m?(this.maps.selectedLegendElementId.push(r.actualIndex),this.maps.legendSelectionClass=o):h<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&(this.maps.layers[a].selectionSettings.enableMultiSelect?h<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&this.maps.selectedLegendElementId.splice(m,1):this.maps.selectedLegendElementId.splice(m,1))}return this.removeShapeHighlightCollection(),null}var u=l[r.actualIndex].text,g=void 0,y=void 0;"Default"===this.maps.legendSettings.mode?void 0!==r.currentIndex&&(g=document.getElementById(this.maps.element.id+"_Legend_Text_Index_"+r.actualIndex).textContent,y=document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+r.actualIndex)):(g=document.getElementById(this.maps.element.id+"_Legend_Index_"+r.actualIndex+"_Text").textContent,y=document.getElementById(this.maps.element.id+"_Legend_Index_"+r.actualIndex)),this.oldShapeElement=s.LegendEle;var f=this.maps.legendSelectionCollection.length;if(u===g){var b=!0;if(this.maps.legendSelectionCollection)for(c=0;c<this.maps.legendSelectionCollection.length;c++)if(this.maps.legendSelectionCollection[c].legendElement===s.LegendEle){b=!1;break}if("highlight"===n&&b){(void 0===(x=this.isTargetSelected(s,this.shapeHighlightCollection))||x&&!x.IsSelected)&&this.pushCollection(y,this.shapeHighlightCollection,l[r.actualIndex],this.maps.layers[a].shapeSettings);for(var v=0;v<this.shapeHighlightCollection.length;v++)s.LegendEle.id===this.shapeHighlightCollection[v].legendElement.id&&(this.shapeHighlightCollection[v].legendElement=s.LegendEle);if(f>0)for(v=0;v<f;v++){if(s.LegendEle===this.maps.legendSelectionCollection[v].legendElement){this.maps.legendSelectionCollection[v].legendElement=s.LegendEle,this.removeShapeHighlightCollection();break}v===f-1&&(this.removeShapeHighlightCollection(),this.setColor(y,t.isNullOrUndefined(o.fill)?y.getAttribute("fill"):o.fill,o.opacity.toString(),o.border.color,o.border.width.toString(),"highlight"))}else this.removeShapeHighlightCollection(),this.setColor(y,t.isNullOrUndefined(o.fill)?y.getAttribute("fill"):o.fill,o.opacity.toString(),o.border.color,o.border.width.toString(),"highlight")}else if("selection"===n){var x=this.isTargetSelected(s,this.maps.legendSelectionCollection);if(f>0)for(v=0;v<this.maps.legendSelectionCollection.length;)if(s.LegendEle===this.maps.legendSelectionCollection[v].legendElement||o.enableMultiSelect)v++;else{var S=this.maps.legendSelectionCollection[v],_=this.maps.selectedLegendElementId.indexOf(r.actualIndex);this.maps.selectedLegendElementId.splice(_,1),this.maps.legendSelectionCollection.splice(v,1),se(S.legendElement),this.maps.shapeSelections=!0,v=0}if(x&&x.IsSelected&&"ShapeselectionMapStyle"===e.getAttribute("class")){S=this.maps.legendSelectionCollection[x.SelectionIndex];var M=0;if(o.enableMultiSelect)for(c=0;c<s.Elements.length;c++)e.getAttribute("class")===s.Elements[c].getAttribute("class")&&M++;M<=1&&(o.enableMultiSelect||this.maps.legendSelection)&&(this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(r.actualIndex),1),t.isNullOrUndefined(s.LegendEle)||se(s.LegendEle),this.maps.legendSelectionCollection.splice(x.SelectionIndex,1),this.maps.shapeSelections=!0)}else{if((void 0===x||x&&!x.IsSelected)&&!t.isNullOrUndefined(y)){-1===(C=this.getIndexofLegend(this.maps.legendSelectionCollection,y))&&this.pushCollection(y,this.maps.legendSelectionCollection,l[r.actualIndex],this.maps.layers[a].shapeSettings)}var O=!0;for(c=0;c<this.maps.selectedLegendElementId.length;c++)r.actualIndex===this.maps.selectedLegendElementId[c]&&(O=!1);if(O&&this.maps.selectedLegendElementId.push(r.actualIndex),this.maps.legendSelectionClass=o,this.removeLegend(this.shapeHighlightCollection),!t.isNullOrUndefined(y)){this.setColor(y,t.isNullOrUndefined(o.fill)?y.getAttribute("fill"):o.fill,o.opacity.toString(),o.border.color,o.border.width.toString(),"selection");var C=this.getIndexofLegend(this.maps.legendSelectionCollection,y);this.maps.legendSelectionCollection[C].MapShapeCollection.Elements.push(e)}this.maps.shapeSelections=!1}}else document.getElementsByClassName("highlightMapStyle").length>0&&(this.removeShapeHighlightCollection(),se(document.getElementsByClassName("highlightMapStyle")[0]))}}else this.removeShapeHighlightCollection()},e.prototype.isTargetSelected=function(e,i){for(var o,n=0;n<i.length;n++)t.isNullOrUndefined(e.LegendEle.getAttribute("id"))||e.LegendEle.getAttribute("id")!==i[n].legendElement.getAttribute("id")||(o={IsSelected:!0,SelectionIndex:n});return o},e.prototype.updateLegendElement=function(){for(var e=0;e<this.maps.legendSelectionCollection.length;e++)document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id)&&(this.maps.legendSelectionCollection[e].legendElement=document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id))},e.prototype.getIndexofLegend=function(e,t){return e.map(function(e){return e.legendElement}).indexOf(t)},e.prototype.removeAllSelections=function(){for(var e=0;e<this.maps.selectedElementId.length;e++){se(o=document.getElementById(this.maps.selectedElementId[e]))}for(var i=0;i<this.maps.selectedLegendElementId.length;i++){var o=("Interactive"===this.maps.legendSettings.mode?"container_Legend_Index_":"container_Legend_Shape_Index_")+this.maps.selectedLegendElementId[i],n=document.getElementById(o);t.isNullOrUndefined(n)||se(document.getElementById(o))}this.maps.legendSelectionCollection=[],this.maps.selectedLegendElementId=[],this.maps.selectedElementId=[]},e.prototype.legendIndexOnShape=function(e,i){var o,n,a,l=e[this.maps.layers[i].shapeDataPath],r=this.maps.legendSettings.mode,s=this.maps.legendModule.legendCollection;"Default"!==r||t.isNullOrUndefined(this.maps.legendModule.totalPages)||(a=this.maps.legendModule.totalPages[this.maps.legendModule.currentPage].Collection);for(var p="Default"===r?a.length:1,d=0;d<s.length;d++){for(var h=s[d].data,c=0;c<p;c++)if("Default"!==r||s[d].text===a[c].DisplayText)for(var m=0;m<h.length;m++)l===h[m].name&&(o=c);for(m=0;m<h.length;m++)l===h[m].name&&(n=d)}return{currentIndex:o,actualIndex:n}},e.prototype.shapeDataOnLegend=function(e){for(var i,o,n,a=this.maps.legendModule.legendCollection,l=this.maps.legendSettings,r=0;r<a.length;r++){for(var s=a[r].data,p=!1,d=[],h={Elements:[]},c=0;c<s.length;c++){i=s[c].shapeIndex,o=s[c].layerIndex,n=s[c].dataIndex;var m=document.getElementById(this.maps.element.id+"_LayerIndex_"+o+"_shapeIndex_"+i+"_dataIndex_"+n);e===m&&(p=!0),d.push(m)}if(p)return t.isNullOrUndefined(h.LegendEle)&&(h.LegendEle="Default"===l.mode?document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+r):document.getElementById(this.maps.element.id+"_Legend_Index_"+r)),h.Elements=d,h}return null},e.prototype.shapesOfLegend=function(e){for(var i,o,n,a=parseFloat(e.id.charAt(e.id.length-1)),l=this.maps.legendModule.legendCollection[a].data,r=[],s=0;s<l.length;s++){i=l[s].shapeIndex,o=l[s].layerIndex,n=l[s].dataIndex;var p=document.getElementById(this.maps.element.id+"_LayerIndex_"+o+"_shapeIndex_"+i+"_dataIndex_"+n);t.isNullOrUndefined(p)||r.push(p.id)}return r},e.prototype.renderLegendBorder=function(){var e=this.maps,i=e.legendSettings,o=i.title.text,n=i.titleStyle,a=G(this.legendItemRect.width+20,o,n),l=x(a,n);this.legendBorderRect=new qe(this.legendItemRect.x-10,this.legendItemRect.y-10-l.height,this.legendItemRect.width+20,this.legendItemRect.height+20+l.height+("Interactive"===i.mode?0:0!==this.page?10:0)),o&&(n.color=null!==n.color?n.color:this.maps.themeStyle.legendTextColor,S(new Fe(e.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-l.height/2-5,"middle",a,""),n,n.color,this.legendGroup));var r=new Ue(e.element.id+"_Legend_Border",i.background,i.border,1,this.legendBorderRect,null,null,"","");if(this.legendGroup.appendChild(e.renderer.drawRectangle(r)),this.getLegendAlignment(e,this.legendBorderRect.width,this.legendBorderRect.height,i),this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )"),e.svgObject.appendChild(this.legendGroup),this.maps.selectedLegendElementId)for(var s=0;s<this.maps.selectedLegendElementId.length;s++){var p="Interactive"===i.mode?this.maps.element.id+"_Legend_Index_":this.maps.element.id+"_Legend_Shape_Index_",d=e.svgObject.querySelector("#"+p+this.maps.selectedLegendElementId[s]);if(!t.isNullOrUndefined(d)){var h=t.isNullOrUndefined(this.maps.legendSelectionClass.fill)?d.getAttribute("fill"):this.maps.legendSelectionClass.fill;this.setColor(d,h,this.maps.legendSelectionClass.opacity.toString(),this.maps.legendSelectionClass.border.color,this.maps.legendSelectionClass.border.width.toString(),"selection");for(var c=0;c<this.maps.legendSelectionCollection.length;c++)this.maps.legendSelectionCollection[c].legendElement.id===d.id&&(this.maps.legendSelectionCollection[c].legendElement=d);if(-1===this.getIndexofLegend(this.maps.legendSelectionCollection,d)){var m=this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[s]].data[s].layerIndex;this.pushCollection(d,this.maps.legendSelectionCollection,this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[s]],this.maps.layers[m].shapeSettings)}}}if(this.maps.toggledLegendId)for(s=0;s<this.maps.toggledLegendId.length;s++){var u="Interactive"===i.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[s]+"_Text":"#"+this.maps.element.id+"_Legend_Text_Index_"+this.maps.toggledLegendId[s],g=e.svgObject.querySelector(u);t.isNullOrUndefined(g)||g.setAttribute("fill","#E5E5E5");var y="Interactive"===i.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[s]:"#"+this.maps.element.id+"_Legend_Shape_Index_"+this.maps.toggledLegendId[s],f=e.svgObject.querySelector(y);t.isNullOrUndefined(f)||f.setAttribute("fill","#E5E5E5")}},e.prototype.changeNextPage=function(e){this.currentPage=e.target.id.indexOf("_Left_Page_")>-1?this.currentPage-1:this.currentPage+1,this.legendGroup=this.maps.renderer.createGroup({id:this.maps.element.id+"_Legend_Group"}),this.drawLegendItem(this.currentPage),oe(this.maps.element.id+"_Legend_Border",this.maps.element.id)&&(oe(this.maps.element.id+"_Legend_Border",this.maps.element.id).style.pointerEvents="none")},e.prototype.getLegendAlignment=function(e,i,o,n){var a,l,r,s=(r=t.extend({},e.mapAreaRect,r,!0)).x,p=r.y,d=r.height,h=r.width,c=e.availableSize.width,m=e.availableSize.height;if("Float"===n.position)this.translate=n.location;else{switch(n.position){case"Top":case"Bottom":r.height=d-o,a=c/2-i/2,l="Top"===n.position?p:p+r.height,r.y="Top"===n.position?p+o+10:p;break;case"Left":case"Right":r.width=h-i,a="Left"===n.position?s:s+r.width-10,l=m/2-o/2,r.x="Left"===n.position?s+i:s}switch(n.alignment){case"Near":"Top"===n.position||"Bottom"===n.position?a=r.x:l=r.y;break;case"Far":"Top"===n.position||"Bottom"===n.position?a=c-i-10:l=m-o}n.height&&n.width&&"Interactive"!==n.mode?e.totalRect=r:e.mapAreaRect=r,this.translate=new Ae(a,l)}},e.prototype.getMarkersLegendCollections=function(e,i){var o=this;Array.prototype.forEach.call(i,function(i,n){var a=i.dataSource,l=i.legendText;Array.prototype.forEach.call(a,function(a,r){var s=null,p=!!t.isNullOrUndefined(a[o.maps.legendSettings.showLegendPath])||a[o.maps.legendSettings.showLegendPath];if(i.visible&&p&&!t.isNullOrUndefined(a.latitude)&&!t.isNullOrUndefined(a.longitude)){if(i.template){var d=Q(i.template)(o.maps);s=(t.isNullOrUndefined(d.childElementCount)?d[0]:d).querySelector("img").src}var h=t.isNullOrUndefined(a[l])?"":a[l];!!o.maps.legendSettings.removeDuplicateLegend&&o.removeDuplicates(o.legendCollection,h)||o.legendCollection.push({layerIndex:e,markerIndex:n,dataIndex:r,fill:i.fill,text:h,imageSrc:s})}})})},e.prototype.getRangeLegendCollection=function(e,i,o,n,a,l,r){for(var s,p=this,d=0,h=this.maps.legendSettings.fill,c=[],m=function(o){if(!t.isNullOrUndefined(o.from)&&!t.isNullOrUndefined(o.to)){s=t.isNullOrUndefined(o.label)?o.from+" - "+o.to:o.label,c=[];var m=!1;Array.prototype.forEach.call(n,function(t,n){var s=parseFloat(t[l]);s>=o.from&&s<=o.to&&(m=!0,c.push(p.getLegendData(e,n,t,a,i,r,s)))}),m||c.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var g=t.isNullOrUndefined(h)?"[object Array]"===Object.prototype.toString.call(o.color)?t.isNullOrUndefined(o.value)?u.legendGradientColor(o,d):o.color[0]:o.color:h;d++,u.getOverallLegendItemsCollection(s,g,c,o.showLegend)}},u=this,g=0,y=o;g<y.length;g++){m(y[g])}},e.prototype.getOverallLegendItemsCollection=function(e,t,i,o){var n=[],a=this.maps.legendSettings;if(i.length>0&&o){for(var l=0;l<i.length;l++){var r=i[l];if(r.length>0)for(var s=0;s<r.length;s++)n.push(r[s]);else n.push(i[l]);n._isVisible=!0}!!this.maps.legendSettings.removeDuplicateLegend&&this.removeDuplicates(this.legendCollection,e)||this.legendCollection.push({text:e,fill:t,data:n,opacity:a.opacity,borderColor:a.shapeBorder.color,borderWidth:a.shapeBorder.width})}},e.prototype.removeDuplicates=function(e,t){for(var i=!1,o=0;o<e.length;o++)if(e[o].text===t){i=!0;break}return i},e.prototype.getEqualLegendCollection=function(e,i,o,n,a,l,r){for(var s,p=this,d=this.maps.legendSettings.fill,h=[],c=[],m=[],u=[],g=function(g){if(t.isNullOrUndefined(g.value)){if(t.isNullOrUndefined(g.minOpacity)&&t.isNullOrUndefined(g.maxOpacity)&&t.isNullOrUndefined(g.value)&&t.isNullOrUndefined(g.from)&&t.isNullOrUndefined(g.to)&&!t.isNullOrUndefined(g.color)){if(Array.prototype.forEach.call(n,function(t,o){for(var n=t[l],s=0;s<m.length;s++)n===m[s]&&u.push(p.getLegendData(e,o,t,a,i,r,n))}),0===m.length){var f=!1;Array.prototype.forEach.call(n,function(n,s){f=!1;for(var d=n[l],h=0;h<o.length;h++)t.isNullOrUndefined(d)||0===d?f||(f=!1):d>=o[h].from&&d<=o[h].to&&(f=!0);f||u.push(p.getLegendData(e,s,n,a,i,r,d))})}s=t.isNullOrUndefined(g.label)?"Others":g.label;var b="[object Array]"===Object.prototype.toString.call(g.color)?g.color[0]:g.color;y.getOverallLegendItemsCollection(s,b,u,g.showLegend)}}else{s=t.isNullOrUndefined(g.label)?g.value:g.label,c=[];var v=!1;Array.prototype.forEach.call(n,function(t,o){var n=t[l];n===g.value?(v=!0,-1===h.indexOf(n)&&h.push(n),c.push(p.getLegendData(e,o,t,a,i,r,n))):-1===m.indexOf(n)&&m.push(n)});for(var x=0;x<h.length;x++)for(var S=0;S<m.length;S++)if(h[x]===m[S]){var _=m.indexOf(h[x]);m.splice(_,1)}v||c.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var M=t.isNullOrUndefined(d)?"[object Array]"===Object.prototype.toString.call(g.color)?g.color[0]:g.color:d;y.getOverallLegendItemsCollection(s,M,c,g.showLegend)}},y=this,f=0,b=o;f<b.length;f++){g(b[f])}},e.prototype.getDataLegendCollection=function(e,i,o,n,a,l,r){var s,p=this,d=this.maps.legendSettings.fill,h=this.maps.legendSettings.valuePath;t.isNullOrUndefined(l)||t.isNullOrUndefined(n)||Array.prototype.forEach.call(n,function(n,c){var m=!!t.isNullOrUndefined(p.maps.legendSettings.showLegendPath)||!t.isNullOrUndefined(n[p.maps.legendSettings.showLegendPath])&&n[p.maps.legendSettings.showLegendPath],u=n[l],g=[],y=t.isNullOrUndefined(d)?u:d;t.isNullOrUndefined(u)||0!==o.length||(s=t.isNullOrUndefined(n[h])?n[a]:n[h],g.push(p.getLegendData(e,c,n,a,i,r,u))),p.getOverallLegendItemsCollection(s,y,g,m)})},e.prototype.interactiveHandler=function(e){var i=e.target,o=this.maps.legendSettings,n=this.maps.element.id+"_Interactive_Legend",a="Layers"===o.type?"_shapeIndex_":"Markers"===o.type?"_MarkerIndex_":"_BubbleIndex_";if(i.id.indexOf(a)>1){var l=parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),r=parseFloat(i.id.split(/_dataIndex_/i)[1].split("_")[0]),s=void 0,p=void 0,d=void 0;t.isNullOrUndefined(oe(n,this.maps.element.id))||t.remove(oe(n,this.maps.element.id));var h=this.maps.layersCollection[l],c="Layers"===o.type?h.visible:"Markers"===o.type?h.markerSettings[parseFloat(i.id.split("_MarkerIndex_")[1].split("_")[0])].visible:this.maps.getBubbleVisible(this.maps.layersCollection[l]);if(o.visible&&this.legendRenderingCollections.length>0&&"Interactive"===o.mode&&c)for(var m=this.maps.svgObject.getBoundingClientRect(),u=0;u<this.legendCollection.length;u++){var g=this.legendCollection[u],y=oe(this.maps.element.id+"_Legend_Index_"+u,this.maps.element.id),f=y.getBoundingClientRect(),b=new qe(Math.abs(f.left-m.left),Math.abs(f.top-m.top),f.width,f.height);if(s=y.getAttribute("fill"),p=o.shapeBorder.color,d=o.shapeBorder.width,!t.isNullOrUndefined(g.data))for(var v=g.data,x=0;x<v.length;x++)if(r===v[x].dataIndex&&l===v[x].layerIndex){this.renderInteractivePointer(o,s,p,n,d,b);break}}}else t.isNullOrUndefined(oe(n,this.maps.element.id))||t.remove(oe(n,this.maps.element.id))},e.prototype.renderInteractivePointer=function(e,t,i,o,n,a){var l,r,s,p;l="Horizontal"===("None"===e.orientation?"Top"===e.position||"Bottom"===e.position?"Horizontal":"Vertical":e.orientation)?e.invertedPointer?" M "+(s=a.x+a.width/2)+" "+(p=a.y+a.height)+" L "+(s-10)+" "+(p+10)+" L "+(s+10)+" "+(p+10)+" Z ":" M "+(s=a.x+a.width/2)+" "+(p=a.y)+" L "+(s-10)+" "+(p-10)+" L "+(s+10)+" "+(p-10)+" Z ":e.invertedPointer?" M "+(s=a.x)+" "+(p=a.y+a.height/2)+" L "+(s-10)+" "+(p-10)+" L "+(s-10)+" "+(p+10)+" z ":" M "+(s=a.x+a.width)+" "+(p=a.y+a.height/2)+" L "+(s+10)+" "+(p-10)+" L "+(s+10)+" "+(p+10)+" z ",r=new je(o,t,n,i,1,"",l),this.maps.svgObject.appendChild(this.maps.renderer.drawPath(r))},e.prototype.wireEvents=function(e){t.EventHandler.add(e,t.Browser.touchStartEvent,this.changeNextPage,this)},e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(t.Browser.touchMoveEvent,this.interactiveHandler,this),this.maps.on(t.Browser.touchEndEvent,this.interactiveHandler,this),this.maps.on("click",this.legendClick,this))},e.prototype.legendClick=function(e){var i=this.maps.legendSettings.toggleLegendSettings.fill,o=this.maps.legendSettings.toggleLegendSettings.opacity,n=this.maps.legendSettings.toggleLegendSettings.border.color,a=this.maps.legendSettings.toggleLegendSettings.border.width;if(e.parentNode.id.indexOf(this.maps.element.id+"_Legend_Index_")>-1){var l=void 0,r=parseFloat(e.parentElement.id.substr((this.maps.element.id+"_Legend_Index_").length)),s=(y=this.legendCollection[r].data)._isVisible,p=void 0;if(this.maps.legendSettings.toggleLegendSettings.enable&&"Bubbles"===this.maps.legendSettings.type)for(var d=0;d<this.maps.layers.length;d++)for(var h=0;h<this.maps.layers[d].bubbleSettings.length;h++){for(var c=0;c<y.length;c++)p=this.legendCollection[r].data[c],l=oe(this.maps.element.id+"_LayerIndex_"+p.layerIndex+"_BubbleIndex_"+h+"_dataIndex_"+p.dataIndex,this.maps.element.id),s&&null!==l?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(l.setAttribute("fill",this.maps.layers[d].shapeSettings.fill),l.setAttribute("stroke",this.maps.layers[d].shapeSettings.border.color),l.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString()),l.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString())):(l.setAttribute("fill",i),l.setAttribute("opacity",o.toString()),l.setAttribute("stroke",n),l.setAttribute("stroke-width",a.toString())),null!==e&&(oe(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),oe(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(l.setAttribute("fill",this.legendCollection[r].fill),l.setAttribute("stroke",this.maps.layers[d].bubbleSettings[h].border.color),l.setAttribute("opacity",this.maps.layers[d].bubbleSettings[h].opacity.toString()),l.setAttribute("stroke-width",this.maps.layers[d].bubbleSettings[h].border.width.toString()),null!==e&&(oe(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill),oe(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#757575")));y._isVisible=!s}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var m=void 0;this.removeCollections(e,r);var u=this.maps.toggledLegendId.indexOf(r);-1!==u&&(s=!1);for(h=0;h<this.maps.layers.length;h++)for(c=0;c<y.length;c++)if(p=this.legendCollection[r].data[c],null!==(m=oe(this.maps.element.id+"_LayerIndex_"+p.layerIndex+"_shapeIndex_"+p.shapeIndex+"_dataIndex_"+p.dataIndex,this.maps.element.id))){var g=this.maps.toggledShapeElementId.indexOf(m.id);s?(0===c&&this.maps.toggledLegendId.push(r),-1===g&&this.maps.toggledShapeElementId.push(m.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(m.setAttribute("fill",this.maps.layers[h].shapeSettings.fill),m.setAttribute("opacity",this.maps.layers[h].shapeSettings.opacity.toString()),m.setAttribute("stroke",this.maps.layers[h].shapeSettings.border.color),m.setAttribute("stroke-width",this.maps.layers[h].shapeSettings.border.width.toString())):(m.setAttribute("fill",i),m.setAttribute("opacity",o.toString()),m.setAttribute("stroke",n),m.setAttribute("stroke-width",a.toString())),null!==e&&(oe(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),oe(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==u&&0===c&&this.maps.toggledLegendId.splice(u,1),-1!==g&&this.maps.toggledShapeElementId.splice(g,1),m.setAttribute("fill",this.legendCollection[r].fill),m.setAttribute("opacity",this.maps.layers[h].shapeSettings.opacity.toString()),m.setAttribute("stroke",this.maps.layers[h].shapeSettings.border.color),m.setAttribute("stroke-width",this.maps.layers[h].shapeSettings.border.width.toString()),null!==e&&(oe(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#757575"),oe(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill)))}y._isVisible=!s}}else if(!t.isNullOrUndefined(e.id)&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendSettings.visible&&-1===e.id.indexOf("_Text")){var y,f=void 0,b=(r=parseFloat(e.id.substr((this.maps.element.id+"_Legend_Index_").length)),void 0);s=(y=this.legendCollection[r].data)._isVisible;if("Bubbles"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable)for(d=0;d<this.maps.layers.length;d++)for(h=0;h<this.maps.layers[d].bubbleSettings.length;h++){for(c=0;c<y.length;c++)b=this.legendCollection[r].data[c],f=oe(this.maps.element.id+"_LayerIndex_"+b.layerIndex+"_BubbleIndex_"+h+"_dataIndex_"+b.dataIndex,this.maps.element.id),s&&null!==f?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(f.setAttribute("fill",this.maps.layers[d].shapeSettings.fill),f.setAttribute("stroke",this.maps.layers[d].shapeSettings.border.color),f.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString()),f.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString())):(f.setAttribute("fill",i),f.setAttribute("opacity",o.toString()),f.setAttribute("stroke",n),f.setAttribute("stroke-width",a.toString())),null!==e&&(oe(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"),oe(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(f.setAttribute("fill",this.legendCollection[r].fill),f.setAttribute("stroke",this.maps.layers[d].bubbleSettings[h].border.color),f.setAttribute("stroke-width",this.maps.layers[d].bubbleSettings[h].border.width.toString()),f.setAttribute("opacity",this.maps.layers[d].bubbleSettings[h].opacity.toString()),null!==e&&(oe(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill),oe(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#757575")));y._isVisible=!s}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var v=void 0;this.removeCollections(e,r);var x=this.maps.toggledLegendId.indexOf(r);-1!==x&&(s=!1);for(d=0;d<this.maps.layers.length;d++)for(c=0;c<y.length;c++)if(b=this.legendCollection[r].data[c],null!==(v=oe(this.maps.element.id+"_LayerIndex_"+b.layerIndex+"_shapeIndex_"+b.shapeIndex+"_dataIndex_"+b.dataIndex,this.maps.element.id))){g=this.maps.toggledShapeElementId.indexOf(v.id);s?(0===c&&this.maps.toggledLegendId.push(r),-1===g&&this.maps.toggledShapeElementId.push(v.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(v.setAttribute("fill",this.maps.layers[0].shapeSettings.fill),v.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),v.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString()),v.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString())):(v.setAttribute("fill",i),v.setAttribute("opacity",o.toString()),v.setAttribute("stroke",n),v.setAttribute("stroke-width",a.toString())),null!==e&&(oe(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),oe(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==x&&0===c&&this.maps.toggledLegendId.splice(x,1),-1!==g&&this.maps.toggledShapeElementId.splice(g,1),v.setAttribute("fill",this.legendCollection[r].fill),v.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),v.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString()),v.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString()),null!==e&&(oe(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#757575"),oe(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill)))}y._isVisible=!s}}},e.prototype.removeCollections=function(e,t){this.removeLegendSelectionCollection(e);var i=this.getIndexofLegend(this.maps.legendSelectionCollection,e);-1!==i&&this.maps.legendSelectionCollection.splice(i,1);-1!==this.getIndexofLegend(this.legendHighlightCollection,e)&&this.legendHighlightCollection.splice(i,1);var o=this.getIndexofLegend(this.shapeHighlightCollection,e);-1!==o&&this.shapeHighlightCollection.splice(o,1);var n=this.maps.selectedLegendElementId.indexOf(t);-1!==n&&this.maps.selectedLegendElementId.splice(n,1)},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(t.Browser.touchMoveEvent,this.interactiveHandler),this.maps.off(t.Browser.touchEndEvent,this.interactiveHandler),this.maps.off("click",this.legendClick))},e.prototype.getLegendData=function(e,t,i,o,n,a,l){var r=[];if("[object Array]"===Object.prototype.toString.call(n))for(var s=0;s<n.length;s++){var p=n[s],d=U(i[o],a,p.properties);p.properties[d]===i[o]&&r.push({layerIndex:e,shapeIndex:s,dataIndex:t,name:i[o],value:l})}return r},e.prototype.legendGradientColor=function(e,i){var o,n="http://www.w3.org/2000/svg";if(!t.isNullOrUndefined(e.color)&&"object"==typeof e.color){var a=document.createElementNS(n,"linearGradient"),l=this.maps.legendSettings.position,r=void 0,s=void 0;r="Top"===l||"Bottom"===l?"100":"0",s="Top"===l||"Bottom"===l?"0":"100",a.setAttribute("id","linear_"+i+"_"+this.maps.element.id),a.setAttribute("x1","0%"),a.setAttribute("y1","0%"),a.setAttribute("x2",r+"%"),a.setAttribute("y2",s+"%");for(var p=0;p<e.color.length;p++){var d=100/(e.color.length-1),h=document.createElementNS(n,"stop");h.setAttribute("offset",p*d+"%"),h.setAttribute("stop-color",e.color[p]),h.setAttribute("stop-opacity",1..toString()),a.appendChild(h)}this.legendLinearGradient=a;var c="url(#linear_"+i+"_"+this.maps.element.id+")";this.defsElement.appendChild(a),o=c}return o},e.prototype.getModuleName=function(){return"Legend"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),si=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},pi=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.maps.on(t.Browser.touchStartEvent,this.mouseMove,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(t.Browser.touchMoveEvent,this.mouseMove),this.maps.off(t.Browser.touchStartEvent,this.mouseMove))},e.prototype.addHighlight=function(e,t,i){var o=ne(e,t,0,this.maps);i?this.mapHighlight(o,null,null):se(o)},e.prototype.mouseMove=function(e){var i,o=e.target,n="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1;if((-1!==o.id.indexOf("LayerIndex")||o.id.indexOf("NavigationIndex")>-1)&&"ShapeselectionMapStyle"!==o.getAttribute("class")&&!n&&"MarkerselectionMapStyle"!==o.getAttribute("class")&&"BubbleselectionMapStyle"!==o.getAttribute("class")&&"navigationlineselectionMapStyle"!==o.getAttribute("class")){i=parseInt(o.id.split("_LayerIndex_")[1].split("_")[0],10);var a=void 0,l=void 0,r=void 0,s=void 0;if(o.id.indexOf("shapeIndex")>-1)r=parseInt(o.id.split("_shapeIndex_")[1].split("_")[0],10),a=this.maps.layers[i].shapeData.features?this.maps.layers[i].shapeData.features[r].properties:null,s=parseInt(o.id.split("_dataIndex_")[1].split("_")[0],10),l=t.isNullOrUndefined(s)?null:this.maps.layers[i].dataSource[s],this.highlightSettings=this.maps.layers[i].highlightSettings;else if(o.id.indexOf("BubbleIndex")>-1){var p=parseInt(o.id.split("_BubbleIndex_")[1].split("_")[0],10);s=parseInt(o.id.split("_dataIndex_")[1].split("_")[0],10),l=this.maps.layers[i].bubbleSettings[p].dataSource[s],this.highlightSettings=this.maps.layers[i].bubbleSettings[p].highlightSettings}else if(o.id.indexOf("MarkerIndex")>-1){var d=parseInt(o.id.split("_MarkerIndex_")[1].split("_")[0],10);s=parseInt(o.id.split("_dataIndex_")[1].split("_")[0],10),l=this.maps.layers[i].markerSettings[d].dataSource[s],this.highlightSettings=this.maps.layers[i].markerSettings[d].highlightSettings}else{var h=parseInt(o.id.split("_NavigationIndex_")[1].split("_")[0],10);i=parseInt(o.id.split("_LayerIndex_")[1].split("_")[0],10),a=null,l={latitude:this.maps.layers[i].navigationLineSettings[h].latitude,longitude:this.maps.layers[i].navigationLineSettings[h].longitude},this.highlightSettings=this.maps.layers[i].navigationLineSettings[h].highlightSettings}if(this.highlightSettings.enable){this.maps.legendSettings.visible&&-1===o.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(o,l,this.highlightSettings,"highlight",i);(!(o.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.mapHighlight(o,a,l)}else{var c=document.getElementsByClassName("highlightMapStyle")[0];if(!t.isNullOrUndefined(c)&&(se(c),c.id.indexOf("NavigationIndex")>-1)){h=parseInt(c.id.split("_NavigationIndex_")[1].split("_")[0],10);var m=parseInt(c.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);c.setAttribute("stroke-width",this.maps.layers[m].navigationLineSettings[h].width.toString()),c.setAttribute("stroke",this.maps.layers[m].navigationLineSettings[h].color)}}}else if(ie("highlightMapStyle").length>0){if((o=ie("highlightMapStyle")[0]).id.indexOf("NavigationIndex")>-1){h=parseInt(o.id.split("_NavigationIndex_")[1].split("_")[0],10);i=parseInt(o.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),o.setAttribute("stroke-width",this.maps.layers[i].navigationLineSettings[h].width.toString()),o.setAttribute("stroke",this.maps.layers[i].navigationLineSettings[h].color)}se(o),this.maps.legendSettings.visible&&this.maps.legendModule.removeShapeHighlightCollection()}else-1===o.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")&&-1===o.id.indexOf(this.maps.element.id+"_Legend_Index")||!this.maps.legendSettings.visible||-1!==o.id.indexOf("_Text")?this.maps.legendSettings.visible&&this.maps.legendModule.removeLegendHighlightCollection():this.maps.legendModule.legendHighLightAndSelection(o,"highlight")},e.prototype.mapHighlight=function(e,i,o){var n=this,a=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),l=!1;if(e.id.indexOf("MarkerIndex")>-1){var r=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);l=this.maps.layers[a].markerSettings[r].highlightSettings.enable}var s={color:this.highlightSettings.border.color,width:this.highlightSettings.border.width/(l?1:this.maps.scale)},p={opacity:this.highlightSettings.opacity,fill:-1===e.id.indexOf("NavigationIndex")?t.isNullOrUndefined(this.highlightSettings.fill)?e.getAttribute("fill"):this.highlightSettings.fill:"none",border:s,name:Wt,target:e.id,cancel:!1,shapeData:i,data:o,maps:this.maps};if(this.maps.isBlazor){p.shapeData,p.maps;var d=si(p,["shapeData","maps"]);p=d}this.maps.trigger(Wt,p,function(){n.highlightMap(e,p)})},e.prototype.highlightMap=function(e,t){if("highlightMapStyle"!==e.getAttribute("class")){if(ie("highlightMapStyle").length>0){var i=ie("highlightMapStyle")[0];if(se(i),i.id.indexOf("NavigationIndex")>-1){var o=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);i.setAttribute("stroke-width",this.maps.layers[n].navigationLineSettings[o].width.toString()),i.setAttribute("stroke",this.maps.layers[n].navigationLineSettings[o].color)}}$("highlightMap")?le("highlightMap","highlightMapStyle",t):document.body.appendChild(ae("highlightMap","highlightMapStyle",t)),e.setAttribute("class","highlightMapStyle")}},e.prototype.getModuleName=function(){return"Highlight"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),di=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},hi=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on("click",this.mouseClick,this),this.maps.on(t.Browser.touchEndEvent,this.mouseClick,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off("click",this.mouseClick),this.maps.off(t.Browser.touchEndEvent,this.mouseClick))},e.prototype.mouseClick=function(e){if(!t.isNullOrUndefined(e.type)&&-1!==e.type.indexOf("touch")&&t.isNullOrUndefined(e.id)&&(e=e.target),!t.isNullOrUndefined(e.id)&&(e.id.indexOf("LayerIndex")>-1||e.id.indexOf("NavigationIndex")>-1)){var i=void 0,o=void 0,n=void 0,a=void 0,l=void 0;if(i=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),e.id.indexOf("shapeIndex")>-1)a=parseInt(e.id.split("_shapeIndex_")[1].split("_")[0],10),o=this.maps.layers[i].shapeData.features.length>a?this.maps.layers[i].shapeData.features[a].properties:null,l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),n=t.isNullOrUndefined(l)?null:this.maps.layers[i].dataSource[l],this.selectionsettings=this.maps.layers[i].selectionSettings,this.selectionType="Shape";else if(e.id.indexOf("BubbleIndex")>-1){var r=parseInt(e.id.split("_BubbleIndex_")[1].split("_")[0],10);l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),n=this.maps.layers[i].bubbleSettings[r].dataSource[l],this.selectionsettings=this.maps.layers[i].bubbleSettings[r].selectionSettings,this.selectionType="Bubble"}else if(e.id.indexOf("MarkerIndex")>-1){var s=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),n=this.maps.layers[i].markerSettings[s].dataSource[l],this.selectionsettings=this.maps.layers[i].markerSettings[s].selectionSettings,this.selectionType="Marker"}else{var p=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10);o=null,n={latitude:this.maps.layers[i].navigationLineSettings[p].latitude,longitude:this.maps.layers[i].navigationLineSettings[p].longitude},this.selectionsettings=this.maps.layers[i].navigationLineSettings[p].selectionSettings,this.selectionType="navigationline"}if(this.selectionsettings.enable){this.maps.legendSettings.visible&&-1===e.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(e,n,this.selectionsettings,"selection",i);(!(e.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.selectMap(e,o,n)}}else this.maps.legendSettings.visible&&!this.maps.legendSettings.toggleLegendSettings.enable&&!t.isNullOrUndefined(e.id)&&-1===e.id.indexOf("_Text")&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendModule.legendHighLightAndSelection(e,"selection")},e.prototype.addSelection=function(e,t,i){var o=ne(e,t,0,this.maps);i?this.selectMap(o,null,null):se(o)},e.prototype.selectMap=function(e,t,i){var o=this,n=(this.selectionsettings,{color:this.selectionsettings.border.color,width:this.selectionsettings.border.width/("Marker"===this.selectionType?1:this.maps.scale)}),a={opacity:this.selectionsettings.opacity,fill:"navigationline"!==this.selectionType?this.selectionsettings.fill:"none",border:n,name:Gt,target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps};if(this.maps.isBlazor){a.shapeData,a.maps;var l=di(a,["shapeData","maps"]);a=l}this.maps.trigger("itemSelection",a,function(t){if(e.getAttribute("class")===o.selectionType+"selectionMapStyle"){if(se(e),o.removedSelectionList(e),e.id.indexOf("NavigationIndex")>-1){var i=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);e.setAttribute("stroke-width",o.maps.layers[n].navigationLineSettings[i].width.toString()),e.setAttribute("stroke",o.maps.layers[n].navigationLineSettings[i].color)}}else{var l=J(o.maps.element.id+"_Layer_Collections");if(!o.selectionsettings.enableMultiSelect&&l.getElementsByClassName(o.selectionType+"selectionMapStyle").length>0){var r=l.getElementsByClassName(o.selectionType+"selectionMapStyle")[0];if(se(r),o.removedSelectionList(r),"Shape"===o.selectionType)for(var s=o.maps.selectedElementId.length,p=0;p<s;p++){se(r=l.getElementsByClassName(o.selectionType+"selectionMapStyle")[0]);var d=o.maps.selectedElementId.indexOf(r.getAttribute("id"));o.maps.selectedElementId.splice(d,1)}if(r.id.indexOf("NavigationIndex")>-1){i=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),n=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);r.setAttribute("stroke-width",o.maps.layers[n].navigationLineSettings[i].width.toString()),r.setAttribute("stroke",o.maps.layers[n].navigationLineSettings[i].color)}}$(o.selectionType+"selectionMap")?le(o.selectionType+"selectionMap",o.selectionType+"selectionMapStyle",a):document.body.appendChild(ae(o.selectionType+"selectionMap",o.selectionType+"selectionMapStyle",a)),e.setAttribute("class",o.selectionType+"selectionMapStyle"),"ShapeselectionMapStyle"===e.getAttribute("class")&&(o.maps.shapeSelectionClass=$(o.selectionType+"selectionMap"),o.maps.selectedElementId.push(e.getAttribute("id"))),"MarkerselectionMapStyle"===e.getAttribute("class")&&(o.maps.markerSelectionClass=$(o.selectionType+"selectionMap"),o.maps.selectedMarkerElementId.push(e.getAttribute("id"))),"BubbleselectionMapStyle"===e.getAttribute("class")&&(o.maps.bubbleSelectionClass=$(o.selectionType+"selectionMap"),o.maps.selectedBubbleElementId.push(e.getAttribute("id"))),"navigationlineselectionMapStyle"===e.getAttribute("class")&&(o.maps.navigationSelectionClass=$(o.selectionType+"selectionMap"),o.maps.selectedNavigationElementId.push(e.getAttribute("id")))}})},e.prototype.removedSelectionList=function(e){"Shape"===this.selectionType&&this.maps.selectedElementId.splice(this.maps.selectedElementId.indexOf(e.getAttribute("id")),1),"Bubble"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1),"Marker"===this.selectionType&&this.maps.selectedMarkerElementId.splice(this.maps.selectedMarkerElementId.indexOf(e.getAttribute("id")),1),"navigationline"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1)},e.prototype.getModuleName=function(){return"Selection"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),ci=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},mi=function(){function e(e){this.maps=e,this.tooltipId=this.maps.element.id+"_mapsTooltip",this.addEventListener()}return e.prototype.renderTooltip=function(e){var o,n,a,l,r,p=this;-1!==e.type.indexOf("touch")?(this.isTouch=!0,o=(l=e).changedTouches[0].pageX,n=l.changedTouches[0].pageY,a=l.target):(this.isTouch="touch"===e.pointerType,o=e.pageX,n=e.pageY,a=e.target);var d,h,c,m="",u=a.id,g=[],y=u.indexOf("_LayerIndex_")>-1&&parseFloat(u.split("_LayerIndex_")[1].split("_")[0]),f=this.maps.layersCollection[y];c=s(o,n,this.maps.svgObject),this.tooltipTargetID=u;if(u.indexOf("_shapeIndex_")>-1||u.indexOf("_MarkerIndex_")>-1||u.indexOf("_BubbleIndex_")>-1){if(u.indexOf("_shapeIndex_")>-1){(d=f.tooltipSettings).textStyle.fontFamily=this.maps.themeStyle.fontFamily||d.textStyle.fontFamily,d.textStyle.opacity=this.maps.themeStyle.tooltipTextOpacity||d.textStyle.opacity;var b=parseInt(u.split("_shapeIndex_")[1].split("_")[0],10);if(t.isNullOrUndefined(f.layerData)||t.isNullOrUndefined(f.layerData[b]))return;var v=f.layerData[b].property,x=!1,S="[object Array]"===Object.prototype.toString.call(f.shapePropertyPath)?f.shapePropertyPath:[f.shapePropertyPath];if(!t.isNullOrUndefined(S)){for(var _=0;_<S.length;_++)for(var M=0;M<f.dataSource.length;M++){if(f.dataSource[M][f.shapeDataPath]===v[S[_]]){x=!0,y=M,_=S.length;break}}y=x?y:null,g=f.dataSource[y]}if(d.visible&&(!t.isNullOrUndefined(y)&&!isNaN(y)||!t.isNullOrUndefined(v)))if(f.tooltipSettings.format)m=this.formatter(f.tooltipSettings.format,f.dataSource[y]);else{var O=U(f.shapeDataPath,f.shapePropertyPath,v);m=t.isNullOrUndefined(f.dataSource)||t.isNullOrUndefined(y)?v[O]:this.formatValue(f.dataSource[y][d.valuePath],this.maps),t.isNullOrUndefined(m)&&(m=v[d.valuePath])}}else if(u.indexOf("_MarkerIndex_")>-1){var C=parseInt(u.split("_MarkerIndex_")[1].split("_")[0],10),L=parseInt(u.split("_MarkerIndex_")[1].split("_")[2],10),w=f.markerSettings[C];d=w.tooltipSettings,g=w.dataSource[L],d.visible&&!isNaN(C)&&(m=w.tooltipSettings.format?this.formatter(w.tooltipSettings.format,w.dataSource[L]):this.formatValue(w.dataSource[L][w.tooltipSettings.valuePath],this.maps))}else if(u.indexOf("_BubbleIndex_")>-1){var P=parseInt(u.split("_BubbleIndex_")[1].split("_")[0],10),I=(L=parseInt(u.split("_BubbleIndex_")[1].split("_")[2],10),f.bubbleSettings[P]);d=I.tooltipSettings,g=I.dataSource[L],d.visible&&!isNaN(L)&&(m=I.tooltipSettings.format?this.formatter(I.tooltipSettings.format,I.dataSource[L]):this.formatValue(I.dataSource[L][I.tooltipSettings.valuePath],this.maps))}document.getElementById(this.tooltipId)?h=document.getElementById(this.tooltipId):(h=t.createElement("div",{id:this.maps.element.id+"_mapsTooltip",className:"EJ2-maps-Tooltip",styles:"position: absolute;pointer-events:none;"}),document.getElementById(this.maps.element.id+"_Secondary_Element").appendChild(h)),null!==d.template&&1===Object.keys("object"==typeof d.template?d.template:{}).length&&(d.template=d.template[Object.keys(d.template)[0]]);var T={location:c,text:[],data:g=this.setTooltipContent(d,g),textStyle:d.textStyle,template:d.template};if(r={cancel:!1,name:"tooltipRender",options:T,fill:d.fill,maps:this.maps,element:a,eventArgs:e},this.maps.isBlazor){r.maps,r.eventArgs;var k=ci(r,["maps","eventArgs"]);r=k}this.maps.trigger("tooltipRender",r,function(e){if(r.cancel||!d.visible||t.isNullOrUndefined(m)||-1!==u.indexOf("_cluster_")||-1!==u.indexOf("_dataLabel_"))p.removeTooltip();else{var o=void 0;o=u.indexOf("MarkerIndex")>0?"MarkerTooltipTemplate":u.indexOf("BubbleIndex")>0?"BubbleTooltipTemplate":"LayerTooltipTemplate",p.maps.isProtectedOnChange=!0,r.options.textStyle.color=p.maps.themeStyle.tooltipFontColor||r.options.textStyle.color,p.svgTooltip=new i.Tooltip({enable:!0,header:"",data:r.options.data,template:r.options.template,content:[m.toString()],shapes:[],location:r.options.location,palette:[void 0],areaBounds:p.maps.mapAreaRect,textStyle:r.options.textStyle,availableSize:p.maps.availableSize,fill:r.fill||p.maps.themeStyle.tooltipFillColor,blazorTemplate:{name:o,parent:d}}),p.svgTooltip.opacity=p.maps.themeStyle.tooltipFillOpacity||p.svgTooltip.opacity,p.svgTooltip.appendTo(h)}}),this.svgTooltip&&this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:T,element:this.svgTooltip.element})}else this.removeTooltip()},e.prototype.setTooltipContent=function(e,i){var o=t.extend({},i,null,!0);return this.maps.format&&!isNaN(Number(o[e.valuePath]))?o[e.valuePath]=K(this.maps,Number(o[e.valuePath])):o=Object.keys(o).length?o:void 0,o},e.prototype.formatValue=function(e,t){return t.format&&!isNaN(Number(e))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(e)):e},e.prototype.formatter=function(e,t){void 0===t&&(t={});for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];e=e.split("${"+n+"}").join(this.formatValue(t[n],this.maps))}return e},e.prototype.mouseUpHandler=function(e){this.renderTooltip(e),"MouseMove"===this.maps.tooltipDisplayMode&&(clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3))},e.prototype.removeTooltip=function(){document.getElementsByClassName("EJ2-maps-Tooltip").length>0&&t.remove(document.getElementsByClassName("EJ2-maps-Tooltip")[0])},e.prototype.addEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.on("dblclick",this.renderTooltip,this):"Click"===this.maps.tooltipDisplayMode?this.maps.on(t.Browser.touchEndEvent,this.mouseUpHandler,this):this.maps.on(t.Browser.touchMoveEvent,this.renderTooltip,this),this.maps.on(t.Browser.touchCancelEvent,this.removeTooltip,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.off("dblclick",this.removeTooltip):"Click"===this.maps.tooltipDisplayMode?this.maps.off(t.Browser.touchEndEvent,this.mouseUpHandler):this.maps.off(t.Browser.touchMoveEvent,this.renderTooltip),this.maps.off(t.Browser.touchCancelEvent,this.removeTooltip))},e.prototype.getModuleName=function(){return"MapsTooltip"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),ui=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(i[o[n]]=e[o[n]])}return i},gi=function(){function e(e){this.isPanning=!1,this.mouseEnter=!1,this.isTouch=!1,this.rectZoomingStart=!1,this.pinchRect=new qe(0,0,0,0),this.browserName=t.Browser.info.name,this.isPointer=t.Browser.isPointer,this.handled=!1,this.pinchFactor=1,this.startTouches=[],this.shapeZoomLocation=[],this.intersect=[],this.mouseDownLatLong={x:0,y:0},this.mouseMoveLatLong={x:0,y:0},this.isSingleClick=!1,this.maps=e,this.wheelEvent="mozilla"===this.browserName?this.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",this.cancelEvent=this.isPointer?"pointerleave":"mouseleave",this.selectionColor=this.maps.zoomSettings.selectionColor,this.fillColor=this.maps.zoomSettings.color,this.addEventListener(),this.groupElements=[]}return e.prototype.performZooming=function(e,t,i){var o=this.maps;o.previousProjection=o.projectionType;var n=o.tileZoomLevel,a=o.previousScale=o.scale,l=o.zoomSettings.maxZoom,r=o.zoomSettings.minZoom;t=r>t&&"ZoomIn"===i?r+1:t;o.previousPoint=o.translatePoint;var s=o.tileTranslatePoint;if(!o.isTileMap&&("ZoomIn"===i?t>=r&&t<=l:t>=r)){var p=o.mapAreaRect,d=o.baseMapRectBounds.min,h=o.baseMapRectBounds.max,c=Math.abs(d.x-h.x),m=Math.abs(d.y-h.y),u=o.translatePoint,g=u.x-(p.width/a-p.width/t)/(p.width/e.x),y=u.y-(p.height/a-p.height/t)/(p.height/e.y),f=Math.abs(o.baseMapRectBounds.max.y-o.baseMapRectBounds.min.y)*t;g=f<o.mapAreaRect.height?p.x+(-d.x+(p.width/2-c/2)):g,y=f<o.mapAreaRect.height?p.y+(-d.y+(p.height/2-m/2)):y,o.translatePoint=new Ae(g,y),o.scale=t,this.triggerZoomEvent(s,n)}else o.isTileMap&&t>=r&&t<=l&&(this.getTileTranslatePosition(n,t,e),o.tileZoomLevel=t,o.scale=Math.pow(2,t-1),o.translatePoint.x=(o.tileTranslatePoint.x-.01*o.scale)/o.scale,o.translatePoint.y=(o.tileTranslatePoint.y-.01*o.scale)/o.scale,this.triggerZoomEvent(s,n),o.mapLayerPanel.generateTiles(t,o.tileTranslatePoint));this.applyTransform(),this.maps.zoomNotApplied=!1},e.prototype.triggerZoomEvent=function(e,t){var i,o=this.maps;i=o.isTileMap?{cancel:!1,name:"zoom",type:o.tileZoomLevel>t?"zoomIn":"zoomOut",maps:o.isBlazor?null:o,tileTranslatePoint:{previous:e,current:o.tileTranslatePoint},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{previous:t,current:o.tileZoomLevel},scale:{previous:o.previousScale,current:o.scale}}:{cancel:!1,name:"zoom",type:o.scale>o.previousScale?"zoomIn":"zoomOut",maps:o.isBlazor?null:o,tileTranslatePoint:{},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{},scale:{previous:o.previousScale,current:o.scale}},o.trigger("zoom",i)},e.prototype.getTileTranslatePosition=function(e,t,i){var o=this.maps,n=J(this.maps.element.id).getBoundingClientRect(),a=256*Math.pow(2,e),l=256*Math.pow(2,t),r=(i.x-o.tileTranslatePoint.x)/a*100,s=(i.y-o.tileTranslatePoint.y)/a*100;o.tileTranslatePoint.x=1===t?n.width/2-256:i.x-r*l/100,o.tileTranslatePoint.y=1===t?n.height/2-256:i.y-s*l/100},e.prototype.performRectZooming=function(){var e=this.maps,t=e.availableSize,i=e.tileZoomLevel,o=this.zoomingRect;if(o.height>0&&o.width>0){var n=this.zoomingRect.x+this.zoomingRect.width/2,a=this.zoomingRect.y+this.zoomingRect.height/2,l=void 0;if(e.isTileMap)l=i+Math.round(i+(t.width/o.width+t.height/o.height)/2),this.getTileTranslatePosition(i,l,{x:n,y:a}),e.tileZoomLevel=l,e.mapLayerPanel.generateTiles(l,e.tileTranslatePoint),e.translatePoint.x=(e.tileTranslatePoint.x-.5*Math.pow(2,l))/Math.pow(2,l),e.translatePoint.y=(e.tileTranslatePoint.y-.5*Math.pow(2,l))/Math.pow(2,l),e.scale=Math.pow(2,l);else{var r=e.previousScale=e.scale;l=r+Math.round((t.width/o.width+t.height/o.height)/2);var s=e.previousPoint=e.translatePoint,p=s.x-(t.width/r-t.width/l)/(t.width/n),d=s.y-(t.height/r-t.height/l)/(t.height/a);e.translatePoint=new Ae(p,d),e.scale=l}this.applyTransform(!0),this.maps.zoomNotApplied=!1,this.zoomingRect=null}},e.prototype.setInteraction=function(e){this.lastScale=1,this.interaction=e},e.prototype.updateInteraction=function(){2===this.fingers?this.setInteraction("zoom"):this.setInteraction(null)},e.prototype.performPinchZooming=function(e){var t=this.maps,i=t.tileZoomLevel,o=t.mapAreaRect;t.previousScale=t.scale,t.previousPoint=t.translatePoint;var n=t.tileTranslatePoint,a=xe(this.touchStartList,this.touchMoveList),l=Me(_e(this.touchMoveList,this.maps)),r=a/this.lastScale;this.lastScale=a,this.pinchFactor*=r,this.pinchFactor=Math.min(this.maps.zoomSettings.maxZoom,Math.max(this.pinchFactor,this.maps.zoomSettings.minZoom));var s=this.pinchFactor;if(t.isTileMap){var p=s;this.getTileTranslatePosition(i,p,{x:l.x,y:l.y}),t.tileZoomLevel=p,t.translatePoint.x=(t.tileTranslatePoint.x-.5*Math.pow(2,p))/Math.pow(2,p),t.translatePoint.y=(t.tileTranslatePoint.y-.5*Math.pow(2,p))/Math.pow(2,p),t.scale=Math.pow(2,p),this.triggerZoomEvent(n,i),t.mapLayerPanel.generateTiles(p,t.tileTranslatePoint)}else{var d=t.baseMapRectBounds.min,h=t.baseMapRectBounds.max,c=Math.abs(d.x-h.x),m=Math.abs(d.y-h.y),u=t.translatePoint,g=Math.abs(t.baseMapRectBounds.max.y-t.baseMapRectBounds.min.y)*s,y=u.x-(o.width/t.scale-o.width/s)/(o.width/l.x),f=u.y-(o.height/t.scale-o.height/s)/(o.height/l.y);y=g<t.mapAreaRect.height?o.x+(-d.x+(o.width/2-c/2)):y,f=g<t.mapAreaRect.height?o.y+(-d.y+(o.height/2-m/2)):f,t.translatePoint=new Ae(y,f),t.scale=s,this.triggerZoomEvent(n,i)}this.applyTransform()},e.prototype.drawZoomRectangle=function(){var e,t,i,o,n=this.maps,a=this.mouseDownPoints,l=this.mouseMovePoints;i=Math.abs(l.x-a.x),o=Math.abs(l.y-a.y),e=l.x>a.x?a.x:a.x-i,t=l.y>a.y?a.y:a.y-o;J(n.element.id).getBoundingClientRect();if(e>n.mapAreaRect.x&&e<n.mapAreaRect.x+n.mapAreaRect.width&&t>n.mapAreaRect.y&&t<n.mapAreaRect.y+n.mapAreaRect.height){this.zoomingRect=new qe(e,t,i,o);var r=n.renderer.createSvg({id:n.element.id+"_Selection_Rect_Zooming",width:n.availableSize.width,height:n.availableSize.height}),s=new Ue(n.element.id+"_ZoomRect","#d3d3d3",{width:1,color:"#009900"},.5,this.zoomingRect,0,0,"","3");r.appendChild(n.renderer.drawRectangle(s)),J(n.element.id+"_Secondary_Element").appendChild(r)}},e.prototype.animateTransform=function(e,t,i,o,n){var a=this.currentLayer.animationDuration;t&&0!==a?Ce(e,0,a,new We(i,o),n,this.maps.mapAreaRect,this.maps):e.setAttribute("transform","scale("+n+") translate( "+i+" "+o+" )")},e.prototype.applyTransform=function(e){var i;this.templateCount=0;var o,n=this.maps.scale,a=this.maps.translatePoint.x,l=this.maps.translatePoint.y;if(this.maps.zoomShapeCollection=[],this.layerCollectionEle){for(var r=0;r<this.layerCollectionEle.childElementCount;r++){var s=this.layerCollectionEle.childNodes[r];if("g"===s.tagName){this.templateCount++,this.index=s.id.indexOf("_LayerIndex_")>-1&&parseFloat(s.id.split("_LayerIndex_")[1].split("_")[0]),this.currentLayer=this.maps.layersCollection[this.index];for(var p=this.maps.mapLayerPanel.calculateFactor(this.currentLayer),d=0;d<s.childElementCount;d++){var h=s.childNodes[d];if(h.id.indexOf("_Markers_Group")>-1||h.id.indexOf("_bubble_Group")>-1||h.id.indexOf("_dataLableIndex_Group")>-1){if(h.id.indexOf("_Markers_Group")>-1){if(this.markerTranslates(h.childNodes[0],p,a,l,n,"Marker",s,e),h=s.childNodes[d],!t.isNullOrUndefined(h)){for(var c=0;c<h.childElementCount;c++)this.markerTranslate(h.childNodes[c],p,a,l,n,"Marker",e),!this.maps.isTileMap&&this.currentLayer.animationDuration>0&&(o="visibility:hidden",h.setAttribute("style",o));if(this.isPanning&&this.maps.markerModule.sameMarkerData.length>0?I(this.maps.markerModule.sameMarkerData,this.maps,h,!0):this.maps.markerModule.sameMarkerData.length>0&&(this.maps.markerModule.sameMarkerData=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&q(this.maps.element.id+"_mapsTooltip")),document.getElementById(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")){var m=this.maps.mapsTooltipModule,u=h.querySelector("#"+m.tooltipTargetID);if(!t.isNullOrUndefined(u))if("hidden"===u.style.visibility)q(this.maps.element.id+"_mapsTooltip");else{var g=parseFloat(u.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[1]),y=parseFloat(u.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[2]);this.maps.isTileMap&&(g+=+$(this.maps.element.id+"_tile_parent").style.left.split("px")[0],y+=+$(this.maps.element.id+"_tile_parent").style.top.split("px")[0]),m.svgTooltip.location.x=g,m.svgTooltip.location.y=y,m.svgTooltip.enableAnimation=!1}}}}else if(h.id.indexOf("_bubble_Group")>-1){var f=void 0;for(c=0;c<h.childElementCount;c++){(f=h.childNodes[c]).getAttribute("transform");i=parseFloat(f.id.split("_LayerIndex_")[1].split("_")[0]);for(var b=parseFloat(f.id.split("_BubbleIndex_")[1].split("_")[0]),v=parseFloat(f.id.split("_BubbleIndex_")[1].split("_")[2]),S=0;S<this.maps.bubbleModule.bubbleCollection.length;S++){var _=this.maps.bubbleModule.bubbleCollection[S];if(_.LayerIndex===i&&_.BubbleIndex===b&&_.DataIndex===v){var M=(_.center.x+a)*n,O=(_.center.y+l)*n,C=this.currentLayer.animationDuration;e&&0!==C?we(f,0,C,new We(M,O)):f.setAttribute("transform","translate( "+M+" "+O+" )");break}}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1){this.intersect=[],this.maps.zoomLabelPositions=[],this.maps.zoomLabelPositions=this.maps.dataLabelModule.dataLabelCollections;for(c=0;c<h.childElementCount;c++)if(h.childNodes[c].id.indexOf("_LabelIndex_")>-1){var L=parseFloat(h.childNodes[c].id.split("_LabelIndex_")[1].split("_")[0]);this.zoomshapewidth=this.shapeZoomLocation[L].getBoundingClientRect(),this.maps.zoomShapeCollection.push(this.zoomshapewidth),this.dataLabelTranslate(h.childNodes[c],p,a,l,n,"DataLabel",e);var w=this.maps.layers[this.index].dataLabelSettings.border;if(c>0&&w.width>1&&h.childNodes[c-1].id.indexOf("_rectIndex_")>-1){var P=(this.maps.zoomLabelPositions[L].location.x+a)*n,T=(this.maps.zoomLabelPositions[L].location.y+l)*n,k=x(h.childNodes[c].innerHTML,this.maps.layers[this.index].dataLabelSettings.textStyle),E=h.childNodes[c-1],N=P-k.width/2,A=T-k.height/2-5;E.setAttribute("x",N),E.setAttribute("y",A)}}}}else this.maps.isTileMap&&h.id.indexOf("_line_Group")>-1?(h.remove(),s.children.length>0&&s.children[0]?s.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index),s.children[0]):s.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index))):(fe(h,this.index,n,this.maps),this.maps.zoomTranslatePoint=this.maps.translatePoint,this.animateTransform(h,e,a,l,n),this.shapeZoomLocation=h.childNodes)}}}t.isNullOrUndefined(this.currentLayer)||e&&0!==this.currentLayer.animationDuration||this.processTemplate(a,l,n,this.maps)}},e.prototype.markerTranslates=function(e,i,o,n,a,l,r,s){var p=this;void 0===s&&(s=!1);var d,m=0,u=0,g=parseInt((e||r).id.split("_LayerIndex_")[1].split("_")[0],10);d=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",style:"pointer-events: auto;"}),document.getElementById(d.id)&&q(d.id);var y=this.maps.mapAreaRect,f=t.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+g+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+y.y+"px;left:"+y.x+"px;height:"+y.height+"px;width:"+y.width+"px;"});document.getElementById(f.id)&&q(f.id);var b=this.maps.layersCollection[g];b.markerSettings.map(function(e,s){var y=e.dataSource;Array.prototype.forEach.call(y,function(v,x){p.maps.markerNullCount=s>0&&0===x?0:p.maps.markerNullCount;var S={template:e.template,data:v,maps:p.maps,marker:e,cancel:!1,name:Nt,fill:e.fill,colorValuePath:e.colorValuePath,shapeValuePath:e.shapeValuePath,height:e.height,width:e.width,imageUrl:e.imageUrl,shape:e.shape,border:e.border};if(S=L(S,v),S=C(S,v),p.maps.isBlazor){S.maps,S.marker;var _=ui(S,["maps","marker"]);S=_}p.maps.trigger("markerRendering",S,function(_){e.shapeValuePath!==S.shapeValuePath&&(S=L(S,v)),e.colorValuePath!==S.colorValuePath&&(S=C(S,v));var M=parseFloat(v.latitude),O=parseFloat(v.longitude),P=e.offset;if(!S.cancel&&e.visible&&!t.isNullOrUndefined(O)&&!t.isNullOrUndefined(M)){var I=p.maps.element.id+"_LayerIndex_"+g+"_MarkerIndex_"+s+"_dataIndex_"+x,E=p.maps.isTileMap?c(new We(O,M),p.maps.tileZoomLevel,p.maps.tileTranslatePoint,!0):h(M,O,i,b,p.maps),N=(0!==b.animationDuration||t.isNullOrUndefined(p.maps.zoomModule),{x:o,y:n});S.template?(u++,k(S,void 0,I,v,s,f,E,a,P,p.maps)):(m++,T(S,e,y,x,E,N,I,P,a,p.maps,d))}u+=S.cancel?1:0,m+=S.cancel?1:0,p.maps.markerNullCount=t.isNullOrUndefined(M)&&t.isNullOrUndefined(O)?p.maps.markerNullCount+1:p.maps.markerNullCount;var A=y.length-p.maps.markerNullCount;d.childElementCount===A-u&&"Template"!==l&&(r.appendChild(d),b.markerClusterSettings.allowClustering&&(p.maps.svgObject.appendChild(d),p.maps.element.appendChild(p.maps.svgObject),w(b,d,p.maps,g,d,r,!0))),f.childElementCount===y.length-m&&J(p.maps.element.id+"_Secondary_Element")&&(J(p.maps.element.id+"_Secondary_Element").appendChild(f),b.markerClusterSettings.allowClustering&&w(b,f,p.maps,g,d,r,!1))})})})},e.prototype.processTemplate=function(e,i,o,n){for(var a=0;a<this.templateCount;a++){this.currentLayer=n.layersCollection[a];var l=n.mapLayerPanel.calculateFactor(this.currentLayer),r=J(n.element.id+"_LayerIndex_"+a+"_Markers_Template_Group"),s=J(n.element.id+"_LayerIndex_"+a+"_Label_Template_Group");if(!t.isNullOrUndefined(r)&&r.childElementCount>0)for(var p=0;p<r.childElementCount;p++)this.markerTranslate(r.childNodes[p],l,e,i,o,"Template");if(!t.isNullOrUndefined(s)&&s.childElementCount>0)for(p=0;p<s.childElementCount;p++)this.dataLabelTranslate(s.childNodes[p],l,e,i,o,"Template")}},e.prototype.dataLabelTranslate=function(e,i,o,n,a,l,r){void 0===r&&(r=!1);var s,p,d,h,c,m=this.maps.dataLabelModule.dataLabelCollections,u=(e.getBoundingClientRect(),this.maps.layers[this.index].dataLabelSettings.textStyle),g=(this.maps.layers[this.index].dataLabelSettings.labelPath,parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0])),y=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);e.id.indexOf("_LabelIndex_")>-1&&(c=parseFloat(e.id.split("_LabelIndex_")[1].split("_")[0]));for(var f=this.currentLayer.animationDuration,b=0;b<m.length;b++){var v=m[b];if(v.layerIndex===g&&v.shapeIndex===y&&v.labelIndex===c){var S=v.location.x,_=v.location.y;if("Template"===l){var M=J(this.maps.element.id+"_Layer_Collections");S=Math.abs(this.maps.baseMapRectBounds.min.x-S)*a,_=Math.abs(this.maps.baseMapRectBounds.min.y-_)*a;var O=e.getBoundingClientRect(),C=M.getBoundingClientRect(),L=e.parentElement.getBoundingClientRect(),w=S+(C.left-L.left)-O.width/2,P=_+(C.top-L.top)-O.height/2;e.style.left=w+"px",e.style.top=P+"px"}else{S=(S+o)*a;var I=(_=(_+n)*a)-(h=x(d=v.dataLabelText,u)).height/4,T=_+h.height/4,k={rightWidth:S+h.width/2,leftWidth:S-h.width/2,heightTop:I,heightBottom:T};if(r&&0!==f||e.setAttribute("transform","translate( "+S+" "+_+" )"),"Hide"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(a>1?(s=this.zoomshapewidth.width>=h.width?d:"",e.innerHTML=s):(s=this.maps.dataLabelShape[b]>=h.width?d:"",e.innerHTML=s)),"Trim"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(a>1?(s=G(this.zoomshapewidth.width,d,u),e.innerHTML=s):(s=G(this.maps.dataLabelShape[b],d,u),e.innerHTML=s)),"Hide"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var E=0;E<this.intersect.length;E++)if(!t.isNullOrUndefined(this.intersect[E])){if(!(k.leftWidth>this.intersect[E].rightWidth||k.rightWidth<this.intersect[E].leftWidth||k.heightTop>this.intersect[E].heightBottom||k.heightBottom<this.intersect[E].heightTop)){s="",e.innerHTML=s;break}s=t.isNullOrUndefined(s)?d:s,e.innerHTML=s}this.intersect.push(k)}if("Trim"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var N=0;N<this.intersect.length;N++)if(!t.isNullOrUndefined(this.intersect[N]))if(k.rightWidth<this.intersect[N].leftWidth||k.leftWidth>this.intersect[N].rightWidth||k.heightBottom<this.intersect[N].heightTop||k.heightTop>this.intersect[N].heightBottom)p=t.isNullOrUndefined(s)?d:s,a>1&&(p=G(this.zoomshapewidth.width,p,u)),e.innerHTML=p;else{if(k.leftWidth>this.intersect[N].leftWidth){p=G((A=this.intersect[N].rightWidth-k.leftWidth)-(k.rightWidth-k.leftWidth),s=t.isNullOrUndefined(s)?d:s,u),e.innerHTML=p;break}if(k.leftWidth<this.intersect[N].leftWidth){var A=k.rightWidth-this.intersect[N].leftWidth;p=G(Math.abs(A-(k.rightWidth-k.leftWidth)),s=t.isNullOrUndefined(s)?d:s,u),e.innerHTML=p;break}}this.intersect.push(k),t.isNullOrUndefined(p)&&(p=G(this.zoomshapewidth.width,d,u),e.innerHTML=p)}else we(e,0,f,new We(S,_))}}}},e.prototype.markerTranslate=function(e,i,o,n,a,l,r){void 0===r&&(r=!1);var s=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),p=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),m=this.maps.layersCollection[s],u=m.markerSettings[p];if(!t.isNullOrUndefined(u)&&!t.isNullOrUndefined(u.dataSource)&&!t.isNullOrUndefined(u.dataSource[d])){var g=parseFloat(u.dataSource[d].longitude),y=parseFloat(u.dataSource[d].latitude),f=this.currentLayer.animationDuration,b=this.maps.isTileMap?c(new Ae(g,y),this.maps.tileZoomLevel,this.maps.tileTranslatePoint,!0):h(y,g,i,m,this.maps);if(this.maps.isTileMap)if("Template"===l){var v=e.getBoundingClientRect();if(e.style.left=b.x-v.width/2+u.offset.x+"px",e.style.top=b.y-v.height/2+u.offset.y+"px","GoogleStaticMap"===this.maps.layers[this.maps.baseLayerIndex].layerType){var x=J(this.maps.element.id+"_StaticGoogleMap").getBoundingClientRect();"none"!==e.style.display&&((x.x>v.x||x.x+640<v.x+v.width)&&(x.y>v.y||x.y+x.height<v.y+v.height)?e.style.display="none":(x.x>v.x||x.x+640<v.x+v.width)&&(e.style.display="none"))}}else b.x+=u.offset.x,b.y+=u.offset.y,e.setAttribute("transform","translate( "+b.x+" "+b.y+" )");else if("Template"===l){b.x=Math.abs(this.maps.baseMapRectBounds.min.x-b.x)*a,b.y=Math.abs(this.maps.baseMapRectBounds.min.y-b.y)*a;var S=J(this.maps.element.id+"_Layer_Collections").getBoundingClientRect(),_=e.parentElement.getBoundingClientRect();e.style.left=b.x+(S.left-_.left)+u.offset.x+"px",e.style.top=b.y+(S.top-_.top)+u.offset.y+"px",e.style.transform="translate(-50%, -50%)"}else b.x=(b.x+o)*a+u.offset.x,b.y=(b.y+n)*a+u.offset.y,r&&0!==f?we(e,0,f,b):e.setAttribute("transform","translate( "+b.x+" "+b.y+" )")}},e.prototype.panning=function(e,i,o){var n,a,l,r=this.maps,s=this.mouseDownPoints,p=this.mouseMovePoints,d=r.scale,h=r.translatePoint,c=r.tileTranslatePoint;if(i=t.isNullOrUndefined(i)?s.x-p.x:i,o=t.isNullOrUndefined(o)?s.y-p.y:o,r.isTileMap)this.maps.tileZoomLevel>1&&(a=r.tileTranslatePoint.x-i,l=r.tileTranslatePoint.y-o,this.distanceX=a-r.tileTranslatePoint.x,this.distanceY=l-r.tileTranslatePoint.y,r.tileTranslatePoint.x=a,r.tileTranslatePoint.y=l,r.translatePoint.x=(r.tileTranslatePoint.x-i)/r.scale,r.translatePoint.y=(r.tileTranslatePoint.y-o)/r.scale,n={cancel:!1,name:"pan",maps:r.isBlazor?null:r,tileTranslatePoint:{previous:c,current:r.tileTranslatePoint},translatePoint:{previous:h,current:r.translatePoint},scale:r.scale,tileZoomLevel:r.tileZoomLevel},r.trigger("pan",n),r.mapLayerPanel.generateTiles(r.tileZoomLevel,r.tileTranslatePoint),this.applyTransform());else{a=h.x-i/d,l=h.y-o/d;var m=J(r.element.id+"_Layer_Collections").getBoundingClientRect(),u=J(r.element.id+"_svg").getBoundingClientRect(),g=i<0?m.left<=u.left+r.mapAreaRect.x:m.left+m.width>=u.left+u.width+r.mapAreaRect.x+r.margin.left,y=o<0?m.top<=u.top+r.mapAreaRect.y:m.top+m.height+r.margin.top>=u.top+u.height;n={cancel:!1,name:"pan",maps:r.isBlazor?null:r,tileTranslatePoint:{},translatePoint:{previous:h,current:new Ae(a,l)},scale:r.scale,tileZoomLevel:r.tileZoomLevel},r.trigger("pan",n),g&&y?(r.translatePoint=new Ae(a,l),this.applyTransform()):g?(r.translatePoint=new Ae(a,r.translatePoint.y),this.applyTransform()):y&&(r.translatePoint=new Ae(r.translatePoint.x,l),this.applyTransform()),this.maps.zoomNotApplied=!1}r.zoomTranslatePoint=r.translatePoint,this.mouseDownPoints=this.mouseMovePoints,this.maps.zoomNotApplied=!1,this.isSingleClick=!1},e.prototype.toAlignSublayer=function(){this.maps.translatePoint.x=t.isNullOrUndefined(this.distanceX)?this.maps.translatePoint.x:this.maps.translatePoint.x-this.distanceX/this.maps.scale,this.maps.translatePoint.y=t.isNullOrUndefined(this.distanceY)?this.maps.translatePoint.y:this.maps.translatePoint.y-this.distanceY/this.maps.scale,this.applyTransform(!1)},e.prototype.toolBarZooming=function(e,t){var i=this.maps,o=i.tileZoomLevel,n=i.previousScale=i.scale;i.mapScaleValue=e;var a=i.zoomSettings.maxZoom,l=i.zoomSettings.minZoom,r=i.mapAreaRect,s=i.previousPoint=i.translatePoint,p=i.tileTranslatePoint;if(i.previousProjection=i.projectionType,e="ZoomOut"===t&&1===Math.round(e)?1:e,e=l>e&&"ZoomIn"===t?l+1:e,!i.isTileMap&&("ZoomIn"===t?e>=l&&e<=a:e>=l)){var d=i.baseMapRectBounds.min,h=i.baseMapRectBounds.max,c=Math.abs(h.x-d.x),m=Math.abs(d.y-h.y),u=s.x-(r.width/n-r.width/e)/2,g=s.y-(r.height/n-r.height/e)/2,y=Math.abs(i.baseMapRectBounds.max.y-i.baseMapRectBounds.min.y)*e;u=y<i.mapAreaRect.height?r.x+(-d.x+(r.width/2-c/2)):u,g=y<i.mapAreaRect.height?r.y+(-d.y+(r.height/2-m/2)):g,i.translatePoint=new Ae(u,g),i.zoomTranslatePoint=i.translatePoint,i.scale=e,this.triggerZoomEvent(p,o)}else if(i.isTileMap&&e>=l&&e<=a){var f=e;i.scale=Math.pow(2,f-1),i.tileZoomLevel=f;var b={x:i.availableSize.width/2,y:i.availableSize.height/2};this.getTileTranslatePosition(o,f,b),i.translatePoint.x=(i.tileTranslatePoint.x-.01*i.scale)/i.scale,i.translatePoint.y=(i.tileTranslatePoint.y-.01*i.scale)/i.scale,this.triggerZoomEvent(p,o),i.mapLayerPanel.generateTiles(f,i.tileTranslatePoint)}this.applyTransform(!0),this.maps.zoomNotApplied=!1},e.prototype.createZoomingToolbars=function(){var e=this.maps;this.toolBarGroup=e.renderer.createGroup({id:e.element.id+"_Zooming_KitCollection",opacity:.3});var t=15,i=15,o=e.zoomSettings.toolBarOrientation,n=e.zoomSettings.toolbars,a='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/>';a+='<feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/>',a+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var l=e.zoomSettings.toolbars.length,r="Horizontal"===e.zoomSettings.toolBarOrientation?16*l+20*l:32,s="Horizontal"===e.zoomSettings.toolBarOrientation?32:16*l+20*l;this.toolBarGroup.appendChild(e.renderer.drawRectangle(new Ue(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},1,new qe(0,0,r,s),0,0)));var p=e.renderer.createDefs();p.innerHTML=a,this.toolBarGroup.appendChild(p);var d=e.renderer.drawRectangle(new Ue(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},.1,new qe(0,0,r,s),0,0));d.setAttribute("filter","url(#chart_shadow)"),this.toolBarGroup.appendChild(d);for(var h=0;h<n.length;h++){var c=n[h];this.currentToolbarEle=e.renderer.createGroup({id:e.element.id+"_Zooming_ToolBar_"+c+"_Group",transform:"translate( "+t+" "+i+" ) "}),this.currentToolbarEle.setAttribute("class","e-maps-toolbar");var m="transparent",u="";switch(c.toLowerCase()){case"zoom":var g=void 0,y=void 0;u="M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,",u+="5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571",u+="L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,",this.maps.zoomSettings.enablePanning?(g=m,y=this.maps.themeStyle.zoomFillColor):(g=this.selectionColor,y=this.selectionColor),this.currentToolbarEle.appendChild(e.renderer.drawPath(new je(e.element.id+"_Zooming_ToolBar_"+c,g,1,y,1,null,u+"4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z"))),this.zoomElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomin":u="M 8, 0 L 8, 16 M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new je(e.element.id+"_Zooming_ToolBar_"+c+"_Path",m,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomInElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomout":u="M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new je(e.element.id+"_Zooming_ToolBar_"+c,m,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomOutElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"pan":var f=void 0;u="M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,",u+="11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z",this.maps.zoomSettings.enablePanning?f=this.selectionColor:(f="#737373",this.currentToolbarEle.setAttribute("class","")),this.currentToolbarEle.appendChild(e.renderer.drawPath(new je(e.element.id+"_Zooming_ToolBar_"+c,f,1,f,1,null,u))),this.panColor=f,this.panElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"reset":u="M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,",u+="1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,",u+="13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,",this.currentToolbarEle.appendChild(e.renderer.drawPath(new je(e.element.id+"_Zooming_ToolBar_"+c,this.fillColor,null,this.maps.themeStyle.zoomFillColor,1,null,u+"3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"))),this.wireEvents(this.currentToolbarEle,this.performToolBarAction)}this.currentToolbarEle.appendChild(e.renderer.drawCircle(new De(e.element.id+"_Zooming_ToolBar_"+c+"_Rect",m,{color:this.maps.themeStyle.zoomFillColor,width:1},1,8,8,16,""))),t="Horizontal"===o?t+36:t,i="Horizontal"===o?i:i+36,this.toolBarGroup.appendChild(this.currentToolbarEle)}},e.prototype.performToolBarAction=function(e){var t=e.target;e.stopImmediatePropagation();var i="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1,o=t.id.split("_Zooming_ToolBar_")[1].split("_")[0];i?(this.handled=!0,this.performZoomingByToolBar(o)):"mousedown"!==e.type&&"pointerdown"!==e.type||this.handled?this.handled=!1:(this.handled=!1,this.performZoomingByToolBar(o))},e.prototype.performZoomingByToolBar=function(e){var t=this.maps;switch(e.toLowerCase()){case"zoom":this.panColor=this.fillColor,this.zoomColor=this.selectionColor,this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.fillColor);break;case"pan":this.maps.zoomSettings.enablePanning?this.panColor=this.selectionColor:this.panColor="#737373",this.zoomColor=this.fillColor,this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.panColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.panColor));break;case"zoomin":t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)+1,"ZoomIn");break;case"zoomout":t.staticMapZoom=t.tileZoomLevel,t.centerPosition.latitude=null,t.centerPosition.longitude=null,this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)-1,"ZoomOut");break;case"reset":t.staticMapZoom=t.zoomSettings.enable?t.zoomSettings.zoomFactor:0,t.centerPosition.latitude=null,t.centerPosition.longitude=null,this.toolBarZooming(1,"ZoomOut"),this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.selectionColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,"#737373"))}this.panningStyle(e.toLowerCase())},e.prototype.panningStyle=function(e){var t=J(this.maps.element.id+"_svg");"pan"===e||this.isPanning?t.setAttribute("class","e-maps-panning"):t.setAttribute("class","")},e.prototype.applySelection=function(e,t){if(e)for(var i,o=0;o<e.childElementCount;o++)"circle"!==(i=e.childNodes[o]).tagName&&(i.setAttribute("fill",t),i.setAttribute("stroke",t))},e.prototype.showTooltip=function(e){var t=e.target.id.split("_Zooming_ToolBar_")[1].split("_")[0];this.isTouch||me("EJ2_Map_Toolbar_Tip",this.maps.getLocalizedLabel(t),e.pageY+10,e.pageX+10,"10px")},e.prototype.removeTooltip=function(){J("EJ2_Map_Toolbar_Tip")&&t.remove(J("EJ2_Map_Toolbar_Tip"))},e.prototype.alignToolBar=function(){var e=this.maps,i=t.createElement("div",{id:e.element.id+"_ToolBar",styles:"position:absolute;z-index:2"}),o=e.renderer.createSvg({id:e.element.id+"_Zooming_ToolBar",width:10,height:10});o.appendChild(this.toolBarGroup),i.appendChild(o),J(e.element.id+"_Secondary_Element")&&J(e.element.id+"_Secondary_Element").appendChild(i);var n=this.toolBarGroup.getBoundingClientRect();o.setAttribute("height",(n.height+5).toString()),o.setAttribute("width",(n.width+5).toString());var a=e.mapAreaRect,l=0,r=0;switch(e.zoomSettings.verticalAlignment){case"Near":r=a.y;break;case"Center":r=a.height/2-n.height/2;break;case"Far":r=a.height-n.height-10}switch(e.zoomSettings.horizontalAlignment){case"Near":l=a.x;break;case"Center":l=a.width/2-n.width/2;break;case"Far":l=a.width-n.width-10}i.style.left=l+"px",i.style.top=r+"px";var s=this.maps.zoomSettings.highlightColor,p=" .e-maps-toolbar:hover > circle { stroke:"+s+"; } .e-maps-toolbar:hover > path { fill: "+s+" ;  stroke: "+s+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",d=document.createElement("style");d.appendChild(document.createTextNode(p)),i.appendChild(d)},e.prototype.wireEvents=function(e,i){t.EventHandler.add(e,t.Browser.touchStartEvent,i,this),t.EventHandler.add(e,"mouseover",this.showTooltip,this),t.EventHandler.add(e,"mouseout",this.removeTooltip,this)},e.prototype.mapMouseWheel=function(e){if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.mouseWheelZoom){var t=this.maps,i=(t.availableSize,this.getMousePosition(e.pageX,e.pageY)),o=t.tileZoomLevel,n=t.scale,a=t.isTileMap?o:n;if(i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height){e.preventDefault();var l="mozilla"!==this.browserName||this.isPointer?e.wheelDelta/120>0?"ZoomIn":"ZoomOut":-e.detail/3>0?"ZoomIn":"ZoomOut";"ZoomIn"===l?(t.mapScaleValue=a+1,t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.performZooming(i,a+1,l)):(t.mapScaleValue=a-1,t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>1&&t.staticMapZoom<22&&(t.staticMapZoom-=1),this.performZooming(i,a-1,l))}}},e.prototype.doubleClick=function(e){var t=e.pageX,i=e.pageY;e.target;if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.doubleClickZoom&&!(e.target.id.indexOf("_Zooming_")>-1)){var o=this.getMousePosition(t,i),n=this.maps,a=(n.availableSize,n.tileZoomLevel),l=n.scale;n.mapScaleValue=n.mapScaleValue+1;var r=n.isTileMap?a:l;o.x>n.mapAreaRect.x&&o.x<n.mapAreaRect.x+n.mapAreaRect.width&&o.y>n.mapAreaRect.y&&o.y<n.mapAreaRect.y+n.mapAreaRect.height&&this.performZooming(o,r+1,"ZoomIn")}},e.prototype.mouseDownHandler=function(e){var t,i,o=null;e.target;"touchstart"===e.type?(this.isTouch=!0,o=e.touches,e.target,t=o[0].clientX,i=o[0].clientY):(t=e.pageX,i=e.pageY,e.target),this.maps.zoomSettings.enablePanning?this.isPanning=this.panColor===this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor!==this.selectionColor:this.isPanning=this.panColor!==this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor===this.selectionColor,this.mouseDownLatLong={x:t,y:i},this.rectZoomingStart=!this.isPanning&&this.maps.zoomSettings.enable,this.mouseDownPoints=this.getMousePosition(t,i),this.isTouch&&(this.firstMove=!0,this.pinchFactor=this.maps.scale,this.fingers=o.length),this.isSingleClick=!0},e.prototype.mouseMoveHandler=function(e){var t,i,o,n=this.maps,a=null,l=this.maps.zoomSettings;"touchmove"===e.type?(this.isTouch=!0,o=e.target,t=(a=e.touches)[0].clientX,i=a[0].clientY):(t=e.pageX,i=e.pageY,o=e.target),J(n.element.id+"_Zooming_KitCollection")&&(o.id.indexOf("_Zooming_")>-1?(J(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),document.getElementById(n.element.id+"_Zooming_ToolBar_Pan_Group")&&(this.maps.zoomSettings.enablePanning||(o.id.indexOf("_Zooming_ToolBar")>-1||o.id.indexOf("_Zooming_Rect")>-1)&&(J(n.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","0.3"),J(n.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","0.3")))):(J(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"),!this.maps.zoomSettings.enablePanning&&document.getElementById(n.element.id+"_Zooming_ToolBar_Pan_Group")&&(J(n.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","1"),J(n.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","1")))),this.isTouch&&this.maps.zoomSettings.pinchZooming&&(this.firstMove&&2===a.length?(this.rectZoomingStart=!1,this.updateInteraction(),this.touchStartList=ve(e)):2===this.touchStartList.length&&2===a.length&&(this.touchMoveList=ve(e),e.preventDefault(),this.rectZoomingStart=!1,this.performPinchZooming(e)),this.firstMove=!1),this.mouseMovePoints=this.getMousePosition(t,i);e.target.id,e.target;l.enable&&this.isPanning&&(e.preventDefault(),this.maps.element.style.cursor="pointer",this.mouseMoveLatLong={x:t,y:i},this.mouseDownLatLong.x!==this.mouseMoveLatLong.x&&this.mouseDownLatLong.y!==this.mouseMoveLatLong.y&&(this.maps.zoomSettings.enablePanning&&this.panning("None",null,null),this.mouseDownLatLong.x=t,this.mouseDownLatLong.y=i)),(this.isTouch?1===a.length&&this.rectZoomingStart:this.rectZoomingStart)&&(e.preventDefault(),this.drawZoomRectangle())},e.prototype.mouseUpHandler=function(e){this.maps;this.rectZoomingStart=!1,this.isPanning=!1,this.isSingleClick=!!this.isSingleClick,this.isTouch=!1,this.touchStartList=[],this.touchMoveList=[],this.lastScale=1,this.maps.element.style.cursor="auto",t.isNullOrUndefined(this.distanceX)&&t.isNullOrUndefined(this.distanceY)||t.isNullOrUndefined(this.currentLayer)||"SubLayer"!==this.currentLayer.type||(this.toAlignSublayer(),this.distanceX=this.distanceY=null);var i=J(this.maps.element.id+"_Selection_Rect_Zooming");i&&this.maps.zoomSettings.enable&&(t.remove(i),this.performRectZooming()),this.mouseMoveLatLong={x:0,y:0},this.mouseDownLatLong={x:0,y:0}},e.prototype.mouseCancelHandler=function(e){this.isPanning=!1,this.isTouch=!1,this.rectZoomingStart=!1;var i=J(this.maps.element.id+"_Selection_Rect_Zooming");i&&this.maps.zoomSettings.enable&&(t.remove(i),this.performRectZooming())},e.prototype.click=function(e){var t=this.maps;if(t.markerModule&&t.markerModule.sameMarkerData.length>0||e.target.id.indexOf("MarkerIndex")>-1&&-1==e.target.id.indexOf("cluster"))return null;if(this.isSingleClick&&t.zoomSettings.zoomOnClick&&!(e.target.id.indexOf("_Zooming_")>-1)&&!t.zoomSettings.doubleClickZoom&&this.zoomColor!==this.selectionColor){var i=e.pageX,o=e.pageY,n=this.getMousePosition(i,o),a=t.tileZoomLevel,l=t.scale;t.mapScaleValue=t.mapScaleValue+1;var r=t.isTileMap?a:l;n.x>t.mapAreaRect.x&&n.x<t.mapAreaRect.x+t.mapAreaRect.width&&n.y>t.mapAreaRect.y&&n.y<t.mapAreaRect.y+t.mapAreaRect.height&&this.performZooming(n,r+1,"ZoomIn")}},e.prototype.getMousePosition=function(e,t){var i=this.maps,o=i.element.getBoundingClientRect(),n=i.element.ownerDocument.defaultView.pageXOffset,a=i.element.ownerDocument.defaultView.pageYOffset,l=i.element.ownerDocument.documentElement.clientTop,r=i.element.ownerDocument.documentElement.clientLeft,s=o.left+n-r,p=o.top+a-l;return new Ae(e-s,t-p)},e.prototype.addEventListener=function(){this.maps.isDestroyed||(t.EventHandler.add(this.maps.element,this.wheelEvent,this.mapMouseWheel,this),t.EventHandler.add(this.maps.element,"click",this.click,this),t.EventHandler.add(this.maps.element,"dblclick",this.doubleClick,this),this.maps.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.maps.on(t.Browser.touchStartEvent,this.mouseDownHandler,this),this.maps.on(t.Browser.touchEndEvent,this.mouseUpHandler,this),t.EventHandler.add(this.maps.element,this.cancelEvent,this.mouseCancelHandler,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(t.EventHandler.remove(this.maps.element,this.wheelEvent,this.mapMouseWheel),t.EventHandler.remove(this.maps.element,"click",this.click),t.EventHandler.remove(this.maps.element,"dblclick",this.doubleClick),this.maps.off(t.Browser.touchMoveEvent,this.mouseMoveHandler),this.maps.off(t.Browser.touchStartEvent,this.mouseDownHandler),this.maps.off(t.Browser.touchEndEvent,this.mouseUpHandler),this.maps.off(this.cancelEvent,this.mouseCancelHandler))},e.prototype.getModuleName=function(){return"Zoom"},e.prototype.destroy=function(e){this.removeEventListener()},e}();e.Maps=ti,e.load="load",e.loaded="loaded",e.click="click",e.rightClick="rightClick",e.doubleClick="doubleClick",e.resize="resize",e.tooltipRender="tooltipRender",e.shapeSelected="shapeSelected",e.shapeHighlight="shapeHighlight",e.mousemove="mousemove",e.mouseup="mouseup",e.mousedown="mousedown",e.layerRendering="layerRendering",e.shapeRendering="shapeRendering",e.markerRendering=Nt,e.markerClusterRendering=At,e.markerClick=Bt,e.markerClusterClick=zt,e.markerMouseMove=Ft,e.markerClusterMouseMove=jt,e.dataLabelRendering=Rt,e.bubbleRendering=Ut,e.bubbleClick=Dt,e.bubbleMouseMove=Zt,e.animationComplete=Ht,e.legendRendering="legendRendering",e.annotationRendering=Vt,e.itemSelection=Gt,e.itemHighlight=Wt,e.beforePrint="beforePrint",e.zoomIn="zoomIn",e.zoomOut="zoomOut",e.pan="pan",e.Annotation=it,e.Arrow=ot,e.Font=nt,e.Border=at,e.CenterPosition=lt,e.TooltipSettings=rt,e.Margin=st,e.ConnectorLineSettings=pt,e.MarkerClusterSettings=dt,e.MarkerClusterData=ht,e.ColorMappingSettings=ct,e.InitialShapeSelectionSettings=mt,e.SelectionSettings=ut,e.HighlightSettings=gt,e.NavigationLineSettings=yt,e.BubbleSettings=ft,e.CommonTitleSettings=bt,e.SubTitleSettings=vt,e.TitleSettings=xt,e.ZoomSettings=St,e.ToggleLegendSettings=_t,e.LegendSettings=Mt,e.DataLabelSettings=Ot,e.ShapeSettings=Ct,e.MarkerBase=Lt,e.MarkerSettings=wt,e.LayerSettings=Pt,e.Tile=It,e.MapsAreaSettings=Tt,e.Size=Ne,e.stringToNumber=a,e.calculateSize=l,e.createSvg=r,e.getMousePosition=s,e.degreesToRadians=p,e.radiansToDegrees=d,e.convertGeoToPoint=h,e.convertTileLatLongToPoint=c,e.xToCoordinate=m,e.yToCoordinate=u,e.aitoff=g,e.roundTo=y,e.sinci=f,e.acos=b,e.calculateBound=v,e.Point=Ae,e.MinMax=Be,e.GeoLocation=ze,e.measureText=x,e.TextOption=Fe,e.PathOption=je,e.ColorValue=Re,e.RectOption=Ue,e.CircleOption=De,e.PolygonOption=Ze,e.PolylineOption=He,e.LineOption=Ve,e.Line=Ge,e.MapLocation=We,e.Rect=qe,e.PatternOptions=Xe,e.renderTextElement=S,e.convertElement=_,e.convertElementFromLabel=M,e.drawSymbols=O,e.markerColorChoose=C,e.markerShapeChoose=L,e.clusterTemplate=w,e.mergeSeparateCluster=P,e.clusterSeparate=I,e.marker=T,e.markerTemplate=k,e.maintainSelection=E,e.maintainStyleClass=N,e.appendShape=A,e.drawCircle=B,e.drawRectangle=z,e.drawPath=function(e,t,i){return A(e.renderer.drawPath(t),i)},e.drawPolygon=function(e,t,i){return A(e.renderer.drawPolygon(t),i)},e.drawPolyline=function(e,t,i){return A(e.renderer.drawPolyline(t),i)},e.drawLine=function(e,t,i){return A(e.renderer.drawLine(t),i)},e.calculateShapes=F,e.drawDiamond=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+(o.x+i.width/2)+" "+o.y+" L "+o.x+" "+(o.y+i.height/2)+" L "+(o.x-i.width/2)+" "+o.y+" Z",A(e.renderer.drawPath(t),n)},e.drawTriangle=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+(o.x+i.width/2)+" "+(o.y+i.height/2)+" L "+(o.x-i.width/2)+" "+(o.y+i.height/2)+" Z",A(e.renderer.drawPath(t),n)},e.drawCross=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2)+" M "+(o.x-i.width/2)+" "+o.y+" L "+(o.x+i.width/2)+" "+o.y,A(e.renderer.drawPath(t),n)},e.drawHorizontalLine=function(e,t,i,o,n){return t.d=" M "+(o.x-i.width/2)+" "+o.y+" L "+(o.x+i.width/2)+" "+o.y,A(e.renderer.drawPath(t),n)},e.drawVerticalLine=function(e,t,i,o,n){return t.d="M "+o.x+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2),A(e.renderer.drawPath(t),n)},e.drawStar=function(e,t,i,o,n){return t.d="M "+(o.x+i.width/3)+" "+(o.y-i.height/2)+" L "+(o.x-i.width/2)+" "+(o.y+i.height/6)+" L "+(o.x+i.width/2)+" "+(o.y+i.height/6)+" L "+(o.x-i.width/3)+" "+(o.y-i.height/2)+" L "+o.x+" "+(o.y+i.height/2)+" L "+(o.x+i.width/3)+" "+(o.y-i.height/2)+" Z",A(e.renderer.drawPath(t),n)},e.drawBalloon=j,e.drawPattern=function(e,t,i,o){for(var n=e.renderer.createPattern(t,"pattern"),a=0,l=i;a<l.length;a++)A(l[a],n);return A(n,o)},e.getFieldData=function(e,t){for(var i,o=[],n=0,a=e;n<a.length;n++){var l=a[n];i={};for(var r=0,s=t;r<s.length;r++){var p=s[r];l[p]&&(i[p]=l[p])}o.push(i)}return o},e.checkShapeDataFields=R,e.checkPropertyPath=U,e.filter=D,e.getRatioOfBubble=Z,e.findMidPointOfPolygon=H,e.isCustomPath=V,e.textTrim=G,e.findPosition=W,e.removeElement=q,e.getTranslate=X,e.getZoomTranslate=Y,e.getElementByID=J,e.Internalize=K,e.getTemplateFunction=Q,e.getElement=$,e.getShapeData=ee,e.triggerShapeEvent=te,e.getElementsByClassName=ie,e.querySelector=oe,e.getTargetElement=ne,e.createStyle=ae,e.customizeStyle=le,e.triggerItemSelectionEvent=re,e.removeClass=se,e.elementAnimate=pe,e.timeout=de,e.showTooltip=he,e.wordWrap=ce,e.createTooltip=me,e.drawSymbol=ue,e.renderLegendShape=ge,e.getElementOffset=ye,e.changeBorderWidth=fe,e.changeNavaigationLineWidth=be,e.targetTouches=ve,e.calculateScale=xe,e.getDistance=Se,e.getTouches=_e,e.getTouchCenter=Me,e.sum=Oe,e.zoomAnimate=Ce,e.animate=Le,e.MapAjax=Ye,e.smoothTranslate=we,e.compareZoomFactor=Pe,e.calculateZoomLevel=Ie,e.LayerPanel=Jt,e.Bubble=oi,e.BingMap=qt,e.Marker=Et,e.ColorMapping=Xt,e.DataLabel=ai,e.NavigationLine=li,e.Legend=ri,e.Highlight=pi,e.Selection=hi,e.MapsTooltip=mi,e.Zoom=gi,e.Annotations=Kt,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-maps.umd.min.js.map

this.ej=this.ej||{},this.ej.dropdowns=function(e,t,i,s,l,n,o){"use strict";function r(e,t,i,s){g+=String.fromCharCode(e),setTimeout(function(){g=""},1e3);var l;if(g=s?g.toLowerCase():g,C===g){for(a=0;a<b.length;a++)if(b[a].classList.contains(E)){l=a;break}return l+=1,b[l]}var n=t,o=g.length,r=void 0,a=i=i?i+1:0;b=[];do{a===n.length&&(a=-1),r=n[l=-1===a?0:a],(s?r.innerText.toLowerCase():r.innerText).substr(0,o)===g&&b.push(n[l]),a++}while(a!==i);return C=g,b[0]}function a(e,t,i,s){var l=t;s=void 0===s||null===s||s;var n={item:null,index:null};if(e&&e.length){for(var o=e.length,r=s?e.toLocaleLowerCase():e,a=0,h=l;a<h.length;a++){var p=h[a],u=(s?p.textContent.toLocaleLowerCase():p.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===i&&u===r||"StartsWith"===i&&u.substr(0,o)===r)return n.item=p,n.index=a,{item:p,index:a}}return n}return n}function h(e,t,i,s){if(""!==t){var l=i?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var n="StartsWith"===s?"^("+t+")":"EndsWith"===s?"("+t+")$":"("+t+")";p(e,new RegExp(n,l))}}function p(e,t){for(var i=0;e.childNodes&&i<e.childNodes.length;i++){if(3===e.childNodes[i].nodeType){e.innerHTML=e.innerHTML.replace(t,'<span class="e-highlight">$1</span>');break}p(e.childNodes[i],t)}}function u(e){for(var t=e.querySelectorAll(".e-highlight"),i=t.length-1;i>=0;i--){var s=t[i].parentNode,l=document.createTextNode(t[i].textContent);s.replaceChild(l,t[i])}}function c(e,i,s,l,n,o,r){var a,h;a=t.createElement("span",{className:V}),h=t.createElement("label",{className:M}),t.isNullOrUndefined(s.id)||""===s.id||(h.id="label_"+s.id.replace(/ /g,"_"),t.attributes(s,{"aria-labelledby":h.id})),t.isNullOrUndefined(l.placeholder)||""===l.placeholder||(h.innerHTML=l.placeholder,l.removeAttribute("placeholder")),h.innerHTML=r,i.appendChild(a),i.appendChild(h),e.classList.add("e-float-input"),d(n,h),"Always"===o&&(h.classList.contains(j)&&t.removeClass([h],j),t.addClass([h],q))}function d(e,i){e&&e.length>0?(t.addClass([i],q),t.removeClass([i],j)):(t.removeClass([i],q),t.addClass([i],j))}function m(e,i,s,l,n,o,r){var a,h=i.querySelector("."+M),p=i.querySelector("."+V);t.isNullOrUndefined(h)?f(n,l,a=null!==r?r:""):(a=h.innerText,t.detach(s.querySelector("."+M)),f(n,l,a),t.isNullOrUndefined(p)||t.detach(s.querySelector("."+V))),e.classList.remove("e-float-input")}function f(e,t,i){e&&e.length?t.placeholder="":t.placeholder=i}function v(e,i){e.classList.add("e-input-focus");var s=i.querySelector("."+M);t.isNullOrUndefined(s)||(t.addClass([s],q),s.classList.contains(j)&&t.removeClass([s],j))}function y(e,i,s,l,n){e.classList.remove("e-input-focus");var o=i.querySelector("."+M);s&&s.length<=0&&"Auto"===l&&!t.isNullOrUndefined(o)&&(o.classList.contains(q)&&t.removeClass([o],q),t.addClass([o],j))}var g="",C="",b=[],E="e-active",S=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),x=function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},w=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return S(i,e),x([t.Property()],i.prototype,"text",void 0),x([t.Property()],i.prototype,"value",void 0),x([t.Property()],i.prototype,"iconCss",void 0),x([t.Property()],i.prototype,"groupBy",void 0),x([t.Property()],i.prototype,"htmlAttributes",void 0),i}(t.ChildProperty),k={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:s.cssClass.li,group:s.cssClass.group,disabled:s.cssClass.disabled,grouping:"e-dd-group"},A=function(e){function l(t,i){return e.call(this,t,i)||this}return S(l,e),l.prototype.getPropObject=function(e,t,i){var s=new Object,l=new Object,n=function(e){return e};s[n(e)]=t[n(e)],l[n(e)]=i[n(e)];var o=new Object;return o.newProperty=s,o.oldProperty=l,o},l.prototype.getValueByText=function(e,i,s){var l=null;return t.isNullOrUndefined(this.listData)||(l=i?this.checkValueCase(e,!0,s):this.checkValueCase(e,!1,s)),l},l.prototype.checkValueCase=function(e,i,s,l){var n=this,o=null;l&&(o=e);var r=this.listData,a=this.fields,h=this.typeOfData(r).typeof;if("string"===h||"number"===h||"boolean"===h)for(var p=0,u=r;p<u.length;p++){var c=u[p];t.isNullOrUndefined(c)||(s?o=this.checkingAccent(String(c),e,i):i?this.checkIgnoreCase(String(c),e)&&(o=this.getItemValue(String(c),e,i)):this.checkNonIgnoreCase(String(c),e)&&(o=this.getItemValue(String(c),e,i,l)))}else i?r.filter(function(i){var s=t.getValue(a.value,i);!t.isNullOrUndefined(s)&&n.checkIgnoreCase(t.getValue(a.text,i).toString(),e)&&(o=t.getValue(a.value,i))}):l?r.filter(function(e){var i=t.getValue(a.value,e);t.isNullOrUndefined(i)||t.isNullOrUndefined(o)||i.toString()!==o.toString()||(o=t.getValue(a.text,e))}):r.filter(function(i){n.checkNonIgnoreCase(t.getValue(a.text,i),e)&&(o=t.getValue(a.value,i))});return o},l.prototype.checkingAccent=function(e,t,s){var l=i.DataUtil.ignoreDiacritics(String(e)),n=i.DataUtil.ignoreDiacritics(t.toString()),o=null;return s?this.checkIgnoreCase(l,n)&&(o=this.getItemValue(String(e),t,s)):this.checkNonIgnoreCase(String(e),t)&&(o=this.getItemValue(String(e),t,s)),o},l.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},l.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},l.prototype.getItemValue=function(e,t,i,s){var l=this.listData,n=this.typeOfData(l).typeof;return s?e.toString():i?"string"===n?String(e):this.getFormattedValue(String(e)):"string"===n?t:this.getFormattedValue(t)},l.prototype.l10nUpdate=function(e){var i="listbox"===this.getModuleName()?this.ulElement:this.list;if("No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0);var s=e?this.actionFailureTemplate:this.noRecordsTemplate,l=void 0,n=e?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";for(var o=0,r=(l=t.compile(s))({},null,null,n,this.isStringTemplate);o<r.length;o++){var a=r[o];i.appendChild(a)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!e,e)}else{var h={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},p=new t.L10n(this.getLocaleName(),{},this.locale);""!==p.getConstant("actionFailureTemplate")?this.l10n=p:this.l10n=new t.L10n("listbox"===this.getModuleName()?"listbox":"dropdowns",h,this.locale),i.innerHTML=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}},l.prototype.getLocaleName=function(){return"drop-down-base"},l.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},l.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var i=this.typeOfData(this.listData);if("number"==typeof t.getValue(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseInt(e,10);if("boolean"==typeof t.getValue(this.fields.value?this.fields.value:"value",i.item)||"boolean"===i.typeof)return"true"===e}return e},l.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?t.addClass(this.enableRtlElements,k.rtl):t.removeClass(this.enableRtlElements,k.rtl)},l.prototype.initialize=function(){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var e=s.ListBase.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!t.isNullOrUndefined(this.dataSource))||this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)},l.prototype.DropDownBaseupdateBlazorTemplates=function(e,i,s,l,n,o,r,a){this.isStringTemplate||(this.itemTemplate&&e&&t.updateBlazorTemplate(this.itemTemplateId,"ItemTemplate",this),this.groupTemplate&&i&&t.updateBlazorTemplate(this.groupTemplateId,"GroupTemplate",this),this.noRecordsTemplate&&s&&t.updateBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate",this),this.actionFailureTemplate&&l&&t.updateBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate",this),n&&t.updateBlazorTemplate(this.valueTemplateId,"ValueTemplate",this,a),o&&t.updateBlazorTemplate(this.headerTemplateId,"HeaderTemplate",this),r&&t.updateBlazorTemplate(this.footerTemplateId,"FooterTemplate",this))},l.prototype.DropDownBaseresetBlazorTemplates=function(e,i,s,l,n,o,r){this.isStringTemplate||(this.itemTemplate&&e&&t.resetBlazorTemplate(this.itemTemplateId,"ItemTemplate"),this.groupTemplate&&i&&t.resetBlazorTemplate(this.groupTemplateId,"GroupTemplate"),this.noRecordsTemplate&&s&&t.resetBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate"),this.actionFailureTemplate&&l&&t.resetBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate"),n&&t.resetBlazorTemplate(this.valueTemplateId,"ValueTemplate"),o&&t.resetBlazorTemplate(this.headerTemplateId,"HeaderTemplate"),r&&t.resetBlazorTemplate(this.footerTemplateId,"FooterTemplate"))},l.prototype.getPersistData=function(){return this.addOnPersist([])},l.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},l.prototype.updateDataAttribute=function(e){for(var i=["class","style","id","type"],s={},l=0;l<this.element.attributes.length;l++)-1!==i.indexOf(this.element.attributes[l].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[l].name||(s[this.element.attributes[l].name]=this.element.getAttribute(this.element.attributes[l].name));t.extend(s,e,s),this.setProperties({htmlAttributes:s},!0)},l.prototype.renderItemsBySelect=function(){var e=this.element,t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),l=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,l,t),s.length){for(var n=0;n<s.length;n++){var o=s[n],r={};r[t.text]=o.label,r.isHeader=!0;var a=o.querySelectorAll("option");i.push(r),this.getJSONfromOption(i,a,t)}e.querySelectorAll("select>option")}this.fields.text=t.text,this.fields.value=t.value,this.resetList(i,t)},l.prototype.getJSONfromOption=function(e,t,i){for(var s=0,l=t;s<l.length;s++){var n=l[s],o={};o[i.text]=n.innerText,o[i.value]=n.getAttribute(i.value)?n.getAttribute(i.value):n.innerText,e.push(o)}},l.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},l.prototype.setListData=function(e,t,s){var l=this;t=t||this.fields;var n;this.isActive=!0;var o={cancel:!1,data:e,query:s};this.trigger("actionBegin",o,function(s){if(!s.cancel)if(l.showSpinner(),e instanceof i.DataManager){if(l.isRequested=!0,l.isDataFetched)return void l.emptyDataRequest(t);s.data.executeQuery(l.getQuery(s.query)).then(function(e){l.trigger("actionComplete",e,function(e){if(!e.cancel){var i=e.result;0===i.length&&(l.isDataFetched=!0),n=l.renderItems(i,t),l.onActionComplete(n,i,e),l.groupTemplate&&l.renderGroupTemplate(n),l.isRequested=!1,l.bindChildItems(i,n,t,e)}})}).catch(function(e){l.isRequested=!1,l.onActionFailure(e),l.hideSpinner()})}else{var o=new i.DataManager(s.data),r={cancel:!1,result:l.getQuery(s.query).executeLocal(o)};l.trigger("actionComplete",r,function(e){e.cancel||(n=l.renderItems(e.result,t),l.onActionComplete(n,e.result),l.groupTemplate&&l.renderGroupTemplate(n),l.bindChildItems(e.result,n,t))})}})},l.prototype.bindChildItems=function(e,i,s,l){var n=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){var o=n.remainingItems(n.sortedData,s);t.append(o,i),n.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),n.liCollections=n.list.querySelectorAll("."+k.li),n.updateListValues(),n.raiseDataBound(e,l)},0):this.raiseDataBound(e,l)},l.prototype.updateListValues=function(){},l.prototype.findListElement=function(e,t,i,s){for(var l=null,n=[].slice.call(e.querySelectorAll(t)),o=0;o<n.length;o++)if(n[o].getAttribute(i)===s+""){l=n[o];break}return l},l.prototype.raiseDataBound=function(e,t){this.hideSpinner();var i={items:e,e:t};this.trigger("dataBound",i)},l.prototype.remainingItems=function(e,t){var l=new i.DataManager(e).executeLocal((new i.Query).skip(100));if(this.itemTemplate){var n=this.templateListItem(l,t);return[].slice.call(n.childNodes)}var o=this.typeOfData(l).typeof;return"string"===o||"number"===o||"boolean"===o?s.ListBase.createListItemFromArray(this.createElement,l,!0,this.listOption(l,t)):s.ListBase.createListItemFromJson(this.createElement,l,this.listOption(l,t),1,!0)},l.prototype.emptyDataRequest=function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()},l.prototype.showSpinner=function(){},l.prototype.hideSpinner=function(){},l.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),t.addClass([this.list],k.noData)},l.prototype.onActionComplete=function(e,t,i){this.listData=t,this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+k.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)},l.prototype.postRender=function(e,i,s){var l=e.querySelector("."+k.li),n=e.querySelector("."+k.selected);l&&!n&&l.classList.add(k.focus),i.length<=0?(this.l10nUpdate(),t.addClass([e],k.noData)):e.classList.remove(k.noData)},l.prototype.getQuery=function(e){return e||(this.query?this.query:new i.Query)},l.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+k.group)){var t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},l=e.querySelectorAll("."+k.group);s.ListBase.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,l,i);this.DropDownBaseupdateBlazorTemplates(!1,!0,!1,!1)}},l.prototype.createListItems=function(e,l){e&&l.groupBy||this.element.querySelector("optgroup")?(l.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=s.ListBase.groupDataSource(e,l.properties,this.sortOrder)),t.addClass([this.list],k.grouping)):e=this.getSortedDataSource(e);var n=this.listOption(e,l),o=e.length>100?new i.DataManager(e).executeLocal((new i.Query).take(100)):e;return this.sortedData=e,s.ListBase.createList(this.createElement,"autocomplete"===this.getModuleName()?o:e,n,!0)},l.prototype.listOption=function(e,i){var s=!t.isNullOrUndefined(i.iconCss),l=t.isNullOrUndefined(i.properties)?i:i.properties,n=null!==i.text||null!==i.value?{fields:l,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return t.extend({},n,i,!0)},l.prototype.setFloatingHeader=function(e){t.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:k.fixedHead}),this.list.querySelector("li").classList.contains(k.group)||(this.fixedHeaderElement.style.display="none"),t.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),t.isNullOrUndefined(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)},l.prototype.scrollStop=function(e){for(var i=e.target,s=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),l=Math.round(i.scrollTop/s),n=this.ulElement.querySelectorAll("li"),o=l;o>-1;o--){if(!t.isNullOrUndefined(n[o])&&n[o].classList.contains(k.group)){var r=n[o];this.fixedHeaderElement.innerHTML=r.innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},l.prototype.renderItems=function(e,t){var l;if(this.itemTemplate&&e){var n=e;n&&t.groupBy?("None"!==this.sortOrder&&(n=this.getSortedDataSource(n)),n=s.ListBase.groupDataSource(n,t.properties,this.sortOrder)):n=this.getSortedDataSource(n),this.sortedData=n;var o=n.length>100?new i.DataManager(n).executeLocal((new i.Query).take(100)):n;l=this.templateListItem("autocomplete"===this.getModuleName()?o:n,t),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1)}else l=this.createListItems(e,t);return l},l.prototype.templateListItem=function(e,t){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var i=this.listOption(e,t);return i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,s.ListBase.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i)},l.prototype.typeOfData=function(e){for(var i={typeof:null,item:null},s=0;!t.isNullOrUndefined(e)&&s<e.length;s++)if(!t.isNullOrUndefined(e[s]))return i={typeof:typeof e[s],item:e[s]};return i},l.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=this.liCollections[0].offsetWidth;this.fixedHeaderElement.style.width=e.toString()+"px",t.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+k.group);this.fixedHeaderElement.innerHTML=i.innerHTML},l.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var t=this.fields.text?this.fields.text:"text";e=s.ListBase.getDataSource(e,s.ListBase.addSorting(this.sortOrder,t))}return e},l.prototype.getIndexByValue=function(e){for(var i,s=this.getItems(),l=0;l<s.length;l++)if(!t.isNullOrUndefined(e)&&s[l].getAttribute("data-value")===e.toString()){i=l;break}return i},l.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)},l.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!this.fields.value&&this.fields.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")},l.prototype.resetList=function(e,t,i){this.list&&this.setListData(e,t,i)},l.prototype.updateSelection=function(){},l.prototype.renderList=function(){this.render()},l.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},l.prototype.setUpdateInitial=function(e,t){this.isDataFetched=!1;for(var i={},s=0;e.length>s;s++)t[e[s]]&&"fields"===e[s]?this.setFields():t[e[s]]&&(i[e[s]]=t[e[s]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))},l.prototype.onPropertyChanged=function(e,i){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var s=0,l=Object.keys(e);s<l.length;s++)switch(l[s]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var n=this.ulElement.querySelector("."+k.group);this.fixedHeaderElement.innerHTML=n.innerHTML}break;case"locale":this.list&&!t.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}},l.prototype.render=function(e){this.list=this.createElement("div",{className:k.content,attrs:{tabindex:"0"}}),this.list.classList.add(k.root),this.setFields();var i={duration:300,selector:"."+k.li};this.rippleFun=t.rippleEffect(this.list,i);var s=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&t.isNullOrUndefined(s)||this.isGroupChecking||t.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),t.removeClass([this.element],k.root),this.element.style.display="none";var l=this.createElement("div");this.element.parentElement.insertBefore(l,this.element),l.appendChild(this.element),l.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()},l.prototype.getModuleName=function(){return"dropdownbase"},l.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+k.li)},l.prototype.addItem=function(e,i){this.list&&this.list.textContent!==this.noRecordsTemplate||this.renderList(),this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var l=this.getItems().length,n=this.list.querySelector("."+k.selected);e=e instanceof Array?e:[e];var o;o=t.isNullOrUndefined(i)||i<0||i>l-1?l:i;var r=this.fields;e&&r.groupBy&&(e=s.ListBase.groupDataSource(e,r.properties));for(var a=[],h=0;h<e.length;h++){var p=e[h],u=p.isHeader,c=this.createElement("li",{className:u?k.group:k.li,id:"option-add-"+h}),d=p instanceof Object?t.getValue(r.text,p):p;if(u&&(c.innerText=d),this.itemTemplate&&!u){var m=t.compile(this.itemTemplate);t.append(m(p,null,null,this.itemTemplateId,this.isStringTemplate),c),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1)}else u||c.appendChild(document.createTextNode(d));c.setAttribute("data-value",p instanceof Object?t.getValue(r.value,p):p),c.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:c}),a.push(c),this.listData.push(p),this.updateActionCompleteData(c,p)}if(0===l&&t.isNullOrUndefined(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove(k.noData),this.list.appendChild(this.ulElement),t.append(a,this.ulElement);else for(h=0;h<e.length;h++){this.liCollections[o]?this.liCollections[o].parentNode.insertBefore(a[h],this.liCollections[o]):this.ulElement.appendChild(a[h]);var f=[].slice.call(this.liCollections);f.splice(o,0,a[h]),this.liCollections=f,o+=1}(n||0===i)&&this.updateSelection()},l.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],l=0;l<s.length;l++)if(e.getAttribute(s[l])){var n=e.getAttribute(s[l]);t.setAttribute(s[l],n),e.removeAttribute(s[l])}},l.prototype.setZIndex=function(){},l.prototype.updateActionCompleteData=function(e,t){},l.prototype.getDataByValue=function(e){if(!t.isNullOrUndefined(this.listData)){var i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i||"boolean"===i)for(var s=0,l=this.listData;s<l.length;s++){r=l[s];if(!t.isNullOrUndefined(r)&&r===e)return r}else for(var n=0,o=this.listData;n<o.length;n++){var r=o[n];if(!t.isNullOrUndefined(r)&&t.getValue(this.fields.value?this.fields.value:"value",r)===e)return r}}return null},l.prototype.destroy=function(){document.body.contains(this.list)&&(t.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),t.isNullOrUndefined(this.rippleFun)||this.rippleFun(),t.detach(this.list)),e.prototype.destroy.call(this)},x([t.Complex({text:null,value:null,iconCss:null,groupBy:null},w)],l.prototype,"fields",void 0),x([t.Property(!1)],l.prototype,"enablePersistence",void 0),x([t.Property(null)],l.prototype,"itemTemplate",void 0),x([t.Property(null)],l.prototype,"groupTemplate",void 0),x([t.Property("No Records Found")],l.prototype,"noRecordsTemplate",void 0),x([t.Property("The Request Failed")],l.prototype,"actionFailureTemplate",void 0),x([t.Property("None")],l.prototype,"sortOrder",void 0),x([t.Property(!0)],l.prototype,"enabled",void 0),x([t.Property([])],l.prototype,"dataSource",void 0),x([t.Property(null)],l.prototype,"query",void 0),x([t.Property("StartsWith")],l.prototype,"filterType",void 0),x([t.Property(!0)],l.prototype,"ignoreCase",void 0),x([t.Property(1e3)],l.prototype,"zIndex",void 0),x([t.Property(!1)],l.prototype,"ignoreAccent",void 0),x([t.Property()],l.prototype,"locale",void 0),x([t.Event()],l.prototype,"actionBegin",void 0),x([t.Event()],l.prototype,"actionComplete",void 0),x([t.Event()],l.prototype,"actionFailure",void 0),x([t.Event()],l.prototype,"select",void 0),x([t.Event()],l.prototype,"dataBound",void 0),x([t.Event()],l.prototype,"created",void 0),x([t.Event()],l.prototype,"destroyed",void 0),l=x([t.NotifyPropertyChanges],l)}(t.Component),L=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),I=function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},B={root:"e-dropdownlist",hover:k.hover,selected:k.selected,rtl:k.rtl,li:k.li,disable:k.disabled,base:k.root,focus:k.focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},O={container:null,buttons:[]},D=function(e){function s(t,i){var s=e.call(this,t,i)||this;return s.previousValue=null,s}return L(s,e),s.prototype.preRender=function(){this.element.style.opacity="0",this.initializeData(),e.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},s.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},s.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},s.prototype.renderList=function(t){e.prototype.render.call(this,t),this.wireListEvents()},s.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?t.classList(e,["e-label-top"],["e-label-bottom"]):t.classList(e,["e-label-bottom"],["e-label-top"])}},s.prototype.resetHandler=function(e){e.preventDefault(),this.clear(e)},s.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()){var e=this.ulElement.querySelector("."+B.li);e&&e.classList.add(B.focus)}},s.prototype.clear=function(e,s){!t.isNullOrUndefined(s)&&(t.isNullOrUndefined(s)||!t.isNullOrUndefined(s.dataSource)&&(s.dataSource instanceof i.DataManager||0!==s.dataSource.length))||(this.isActive=!0,this.resetSelection(s));var l=this.getItemData();this.previousValue!==l.value&&this.onChangeEvent(e)},s.prototype.resetSelection=function(e){this.list&&(t.isNullOrUndefined(e)||!t.isNullOrUndefined(e.dataSource)&&(e.dataSource instanceof i.DataManager||0!==e.dataSource.length)?(!this.allowFiltering||"autocomplete"===this.getModuleName()||t.isNullOrUndefined(this.actionCompleteData.ulElement)||t.isNullOrUndefined(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(t.detach(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},s.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if("class"===s)this.inputWrapper.container.classList.add(this.htmlAttributes[s]);else if("disabled"===s&&"disabled"===this.htmlAttributes[s])this.enabled=!1,this.setEnable();else if("readonly"!==s||t.isNullOrUndefined(this.htmlAttributes[s]))if("style"===s)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[s]);else{var l=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],o=["name","required"];0===s.indexOf("data")||o.indexOf(s)>-1?this.hiddenElement.setAttribute(s,this.htmlAttributes[s]):l.indexOf(s)>-1?"placeholder"===s?n.Input.setPlaceholder(this.htmlAttributes[s],this.inputElement):this.inputElement.setAttribute(s,this.htmlAttributes[s]):this.inputWrapper.container.setAttribute(s,this.htmlAttributes[s])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")},s.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}},s.prototype.setEnableRtl=function(){n.Input.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},s.prototype.setEnable=function(){n.Input.setEnabled(this.enabled,this.inputElement),this.enabled?(t.removeClass([this.inputWrapper.container],B.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),t.addClass([this.inputWrapper.container],B.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},s.prototype.getPersistData=function(){return this.addOnPersist(["value"])},s.prototype.getLocaleName=function(){return"drop-down-list"},s.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},s.prototype.targetElement=function(){return this.inputWrapper.container},s.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},s.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},s.prototype.getElementByValue=function(e){for(var t,i=0,s=this.getItems();i<s.length;i++){var l=s[i];if(this.getFormattedValue(l.getAttribute("data-value"))===e){t=l;break}}return t},s.prototype.initValue=function(){this.renderList(),this.dataSource instanceof i.DataManager?this.initRemoteRender=!0:this.updateValues()},s.prototype.updateValues=function(){if(t.isNullOrUndefined(this.value))if(this.text&&t.isNullOrUndefined(this.value)){var e=this.getElementByText(this.text);if(t.isNullOrUndefined(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},s.prototype.onBlur=function(e){if(this.enabled){var i=e.relatedTarget,s=e.target,l=this.isPreventBlur;if(this.isPreventBlur=!1,l&&!this.isDocumentClick&&this.isPopupOpen&&(!t.isNullOrUndefined(s)||!this.isFilterLayout()&&t.isNullOrUndefined(i)))return void("dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus());if(this.isDocumentClick||!t.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(B.mobileFilter))return void(this.beforePopupOpen||(this.isDocumentClick=!1));("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&s.classList.contains(B.inputFocus))||t.isNullOrUndefined(i)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&s!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)}},s.prototype.focusOutAction=function(){this.isInteracted=!1,this.focusOut(),this.onFocusOut()},s.prototype.onFocusOut=function(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&t.addClass([this.inputWrapper.clearButton],B.clearIconHide),this.trigger("blur"))},s.prototype.onFocus=function(e){if(!this.isInteracted){this.isInteracted=!0;var t={isInteracted:!!e,event:e};this.trigger("focus",t)}this.updateIconState()},s.prototype.resetValueHandler=function(e){var i=t.closest(this.inputElement,"form");if(i&&e.target===i){var s=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=s}},s.prototype.wireEvent=function(){t.EventHandler.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),t.EventHandler.add(this.inputWrapper.container,"focus",this.focusIn,this),t.EventHandler.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},s.prototype.bindCommonEvent=function(){t.EventHandler.add(this.targetElement(),"blur",this.onBlur,this);var e=t.closest(this.inputElement,"form");e&&t.EventHandler.add(e,"reset",this.resetValueHandler,this),t.Browser.isDevice||(this.keyboardModule=new t.KeyboardEvents(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})),this.bindClearEvent()},s.prototype.bindClearEvent=function(){this.showClearButton&&t.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},s.prototype.unBindCommonEvent=function(){t.EventHandler.remove(this.targetElement(),"blur",this.onBlur);var e=t.closest(this.inputElement,"form");e&&t.EventHandler.remove(e,"reset",this.resetValueHandler),t.Browser.isDevice||this.keyboardModule.destroy(),this.showClearButton&&t.EventHandler.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},s.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?t.addClass([this.inputWrapper.clearButton],B.clearIconHide):t.removeClass([this.inputWrapper.clearButton],B.clearIconHide))},s.prototype.wireListEvents=function(){t.EventHandler.add(this.list,"click",this.onMouseClick,this),t.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),t.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},s.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.isRequested||t.isNullOrUndefined(this.list.querySelector("li"))||!this.enabled||this.incrementalSearch(e))},s.prototype.onMouseClick=function(e){var i=e.target,s=(i.classList,t.closest(i,"."+k.li));if(this.isValidLI(s))if(this.setSelection(s,e),t.Browser.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100)}},s.prototype.onMouseOver=function(e){var i=t.closest(e.target,"."+k.li);this.setHover(i)},s.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(k.hover)&&(this.removeHover(),t.addClass([e],k.hover))},s.prototype.onMouseLeave=function(e){this.removeHover()},s.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+k.hover);e&&e.length&&t.removeClass(e,k.hover)},s.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},s.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var i=r(e.charCode,this.liCollections,this.activeIndex,!0);t.isNullOrUndefined(i)||(this.setSelection(i,e),this.setScrollPosition())}},s.prototype.hideSpinner=function(){t.isNullOrUndefined(this.spinnerElement)||(l.hideSpinner(this.spinnerElement),t.removeClass([this.spinnerElement],B.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},s.prototype.showSpinner=function(){t.isNullOrUndefined(this.spinnerElement)&&(this.spinnerElement=t.Browser.isDevice&&!t.isNullOrUndefined(this.filterInputObj)&&this.filterInputObj.buttons[1]||!t.isNullOrUndefined(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],t.addClass([this.spinnerElement],B.disableIcon),l.createSpinner({target:this.spinnerElement,width:t.Browser.isDevice?"16px":"14px"},this.createElement),l.showSpinner(this.spinnerElement))},s.prototype.keyActionHandler=function(e){if(this.enabled){var i="pageUp"===e.action||"pageDown"===e.action,s="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var l="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||i||s)||this.isPopupOpen)&&!this.readonly){var n="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||n||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),t.isNullOrUndefined(this.list)||!t.isNullOrUndefined(this.liCollections)&&l&&0===this.liCollections.length||this.isRequested)return;switch((n&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!l&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":var o=this.list.querySelector("."+B.focus);if(this.isSelectFocusItem(o))this.setSelection(o,e);else{var r=void 0,a="down"===e.action?this.activeIndex+1:this.activeIndex-1,h=0;"autocomplete"===this.getModuleName()&&(h="down"===e.action&&t.isNullOrUndefined(this.activeIndex)?0:this.liCollections.length-1,a=a<0?this.liCollections.length-1:a===this.liCollections.length?0:a),r=t.isNullOrUndefined(this.activeIndex)?this.liCollections[h]:this.liCollections[a],this.setSelection(r,e)}e.preventDefault();break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":if("dropdownlist"===this.getModuleName()){if(e.preventDefault(),0===this.activeIndex)return;this.setSelection(this.liCollections[0],e)}break;case"end":if("dropdownlist"===this.getModuleName()){e.preventDefault();var p=this.getItems().length-1;if(this.activeIndex===p)return;this.setSelection(this.liCollections[p],e)}break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"escape":case"tab":case"close":this.isPopupOpen&&(this.hidePopup(),this.focusDropDown(e))}}}},s.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+B.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()},s.prototype.isSelectFocusItem=function(e){return!t.isNullOrUndefined(e)},s.prototype.getPageCount=function(){var e=this.list.classList.contains(k.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},s.prototype.pageUpSelection=function(e,t){var i=e>=0?this.liCollections[e+1]:this.liCollections[0];this.setSelection(i,t)},s.prototype.pageDownSelection=function(e,t){var i=this.getItems(),s=e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1];this.setSelection(s,t)},s.prototype.unWireEvent=function(){t.EventHandler.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),t.EventHandler.remove(this.inputWrapper.container,"keypress",this.onSearch),t.EventHandler.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},s.prototype.unWireListEvents=function(){t.EventHandler.remove(this.list,"click",this.onMouseClick),t.EventHandler.remove(this.list,"mouseover",this.onMouseOver),t.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},s.prototype.onDocumentClick=function(e){var i=e.target;if(!t.isNullOrUndefined(this.popupObj)&&t.closest(i,"#"+this.popupObj.element.id)||this.inputWrapper.container.contains(e.target))i===this.inputElement||this.allowFiltering&&i===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&t.Browser.isDevice&&i===this.inputWrapper.buttons[0]||(this.isPreventBlur=(t.Browser.isIE||"edge"===t.Browser.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(B.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var s=this.isRequested;this.isInteracted=!1,this.hidePopup(),s||(this.onFocusOut(),this.inputWrapper.container.classList.remove(B.inputFocus))}},s.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(B.inputFocus))},s.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},s.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(B.disable)&&this.inputWrapper.clearButton!==e.target){var i=e.target;if(i===this.inputElement||this.allowFiltering&&i===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());var s=this,l=t.isBlazor()?1e3:100;this.isSecondClick||setTimeout(function(){s.cloneElements(),s.isSecondClick=!0},l)}}},s.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},s.prototype.updateSelectedItem=function(e,i,s,l){var n=this;this.removeSelection(),e.classList.add(k.selected),this.removeHover();var o=this.getFormattedValue(e.getAttribute("data-value")),r=this.getDataByValue(o);if(this.initial||s||t.isNullOrUndefined(i))this.selectEventCallback(e,i,s,r,o),l&&this.setSelectOptions(e,i);else{var a=this.detachChanges(r);this.isSelected=!0;var h={e:i,item:e,itemData:a,isInteracted:!!i,cancel:!1};this.trigger("select",h,function(t){t.cancel?e.classList.remove(k.selected):(n.selectEventCallback(e,i,s,r,o),l&&n.setSelectOptions(e,i))})}},s.prototype.selectEventCallback=function(e,i,s,l,n){this.previousItemData=t.isNullOrUndefined(this.itemData)?null:this.itemData,this.item=e,this.itemData=l;var o=this.list.querySelector("."+k.focus);o&&t.removeClass([o],k.focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(n)},s.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(k.selected)&&(this.removeSelection(),e.classList.add(k.selected),this.removeHover(),e.setAttribute("aria-selected","true"))},s.prototype.setValue=function(e){var i=this.getItemData();return null===i.value?n.Input.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):n.Input.setValue(i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!0),this.setValueTemplate()):this.inputElement.previousSibling===this.valueTempElement&&(t.detach(this.valueTempElement),this.inputElement.style.display="block"),this.previousValue===i.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},s.prototype.setSelection=function(e,t){this.isValidLI(e)&&!e.classList.contains(k.selected)?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)},s.prototype.setSelectOptions=function(e,i){this.list&&this.removeHover(),this.previousSelectedLI=t.isNullOrUndefined(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(i)||(this.isPopupOpen&&(t.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&t.attributes(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!t.isNullOrUndefined(e)||this.isPopupOpen&&!t.isNullOrUndefined(i)&&("keydown"!==i.type||"keydown"===i.type&&"enter"===i.action))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),!this.isPopupOpen||t.isNullOrUndefined(this.selectedLI)||null===this.itemData||i&&"click"===i.type||this.setScrollPosition(i))},s.prototype.setValueTemplate=function(){var e;this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:B.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="";for(var i=t.isBlazor()?JSON.parse(JSON.stringify(this.itemData)):this.itemData,s=0,l=(e=t.compile(this.valueTemplate))(i,null,null,this.valueTemplateId,this.isStringTemplate);s<l.length;s++){var n=l[s];this.valueTempElement.appendChild(n)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!0,!0)},s.prototype.removeSelection=function(){var e=this.list.querySelectorAll("."+k.selected);e.length&&(t.removeClass(e,k.selected),e[0].removeAttribute("aria-selected"))},s.prototype.getItemData=function(){var e=this.fields,i=null;i=this.itemData;var s,l;return t.isNullOrUndefined(i)||(s=t.getValue(e.value,i),l=t.getValue(e.text,i)),{value:t.isNullOrUndefined(i)||t.isUndefined(s)?i:s,text:t.isNullOrUndefined(i)||t.isUndefined(s)?i:l}},s.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({index:i,text:t.text,value:t.value},!0),this.detachChangeEvent(e)},s.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},s.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=t.isNullOrUndefined(this.text)?"":this.text,!this.initial){var i=this.detachChanges(this.itemData),s=void 0;s="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var l={e:e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:s,isInteracted:!!e,value:this.value,element:this.element};this.trigger("change",l)}},s.prototype.setHiddenValue=function(){t.isNullOrUndefined(this.value)?this.hiddenElement.innerHTML="":(this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString()))},s.prototype.onFilterUp=function(e){if(this.isValidKey||40===e.keyCode||38===e.keyCode)switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}else this.isValidKey=!1},s.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},s.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},s.prototype.getQuery=function(e){var t;if(!this.isCustomFilter&&this.allowFiltering){t=e?e.clone():this.query?this.query.clone():new i.Query;var s=""===this.typedString?"contains":this.filterType,l=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof i.DataManager||"string"!==l)&&"number"!==l){var n=this.fields.text?this.fields.text:"";t.where(n,s,this.typedString,this.ignoreCase,this.ignoreAccent)}else t.where("",s,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new i.Query);return t},s.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},s.prototype.searchLists=function(e){var t=this;if(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+B.clearIcon)&&(this.filterInput.parentElement.querySelector("."+B.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,s,l){i.cancel||(t.isCustomFilter=!0,t.filteringAction(e,s,l))},baseEventArgs:e,cancel:!1};this.trigger("filtering",i,function(e){e.cancel||t.isCustomFilter||e.preventDefaultAction||t.filteringAction(t.dataSource,null,t.fields)})}},s.prototype.filteringAction=function(e,i,s){t.isNullOrUndefined(this.filterInput)||(this.beforePopupOpen=!0,""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!t.isNullOrUndefined(e))&&this.listData.length>0&&(e=this.listData),i=""===this.filterInput.value.trim()?null:i,this.resetList(e,s,i)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,t.isNullOrUndefined(this.actionCompleteData.ulElement)||t.isNullOrUndefined(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,t.isNullOrUndefined(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0))},s.prototype.setSearchBox=function(e){if(this.isFiltering()){var i=this.createElement("span",{className:B.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:B.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var s=!1;return t.Browser.isDevice&&(s=!0),this.filterInputObj=n.Input.createInput({element:this.filterInput,buttons:s?[B.backIcon,B.filterBarClearIcon]:[B.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),t.append([this.filterInputObj.container],i),t.prepend([i],e),t.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+B.clearIcon),!t.Browser.isDevice&&this.clearIconElement&&(t.EventHandler.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),t.Browser.isDevice||(this.searchKeyModule=new t.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})),t.EventHandler.add(this.filterInput,"input",this.onInput,this),t.EventHandler.add(this.filterInput,"keyup",this.onFilterUp,this),t.EventHandler.add(this.filterInput,"keydown",this.onFilterDown,this),t.EventHandler.add(this.filterInput,"blur",this.onBlur,this),this.filterInputObj}return O},s.prototype.onInput=function(){this.isValidKey=!0},s.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},s.prototype.onActionComplete=function(s,l,n,o){var r=this;if(this.isNotSearchList)return void(this.isNotSearchList=!1);if(this.isActive){var a=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(e.prototype.onActionComplete.call(this,s,l,n),this.isRequested&&!t.isNullOrUndefined(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!t.isNullOrUndefined(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,t.isNullOrUndefined(s)||t.attributes(s,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof i.DataManager)){var h=t.isNullOrUndefined(this.fields.value)?this.fields.text:this.fields.value;l.some(function(e){return e[h]===r.value})||this.dataSource.executeQuery(this.getQuery(this.query).where(new i.Predicate(h,"equal",this.value))).then(function(e){e.result.length>0&&(r.addItem(e.result,l.length),r.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&(this.actionCompleteData.isUpdated&&(this.isCustomFilter||this.isFilterFocus||!(this.dataSource instanceof i.DataManager||!t.isNullOrUndefined(this.dataSource)&&!t.isNullOrUndefined(this.dataSource.length)&&0!==this.dataSource.length))||(this.actionCompleteData={ulElement:s.cloneNode(!0),list:l,isUpdated:!0}),this.addNewItem(l,a),t.isNullOrUndefined(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}},s.prototype.addNewItem=function(e,i){var s=this;if(!t.isNullOrUndefined(this.itemData)&&!t.isNullOrUndefined(i)){var l=this.getItemData().value;e.some(function(e){return("string"==typeof e||"number"==typeof e)&&e===l||t.getValue(s.fields.value,e)===l})||this.addItem(this.itemData)}},s.prototype.updateActionCompleteData=function(e,t){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)>0&&this.actionCompleteData.list.push(t))},s.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()},s.prototype.updateSelection=function(){var e=this.list.querySelector("."+k.selected);e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+k.li).classList.add(B.focus))},s.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+B.focus);e&&e.length&&t.removeClass(e,B.focus)},s.prototype.renderPopup=function(){var e=this;if(this.popupObj&&document.body.contains(this.popupObj.element))return void this.refreshPopup();var i={cancel:!1};this.trigger("beforeOpen",i,function(i){if(!i.cancel){var s=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(null!=e.cssClass?e.cssClass:"")}),l=e.setSearchBox(s);if(e.listHeight=t.formatUnit(e.popupHeight),e.headerTemplate&&e.setHeaderTemplate(s),t.append([e.list],s),e.footerTemplate&&e.setFooterTemplate(s),document.body.appendChild(s),s.style.visibility="hidden","auto"!==e.popupHeight){if(e.searchBoxHeight=0,t.isNullOrUndefined(l.container)||(e.searchBoxHeight=l.container.parentElement.getBoundingClientRect().height,e.listHeight=(parseInt(e.listHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate){n=Math.round(e.header.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(n+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate){var n=Math.round(e.footer.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(n+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listHeight,10)-2).toString()+"px",s.style.maxHeight=t.formatUnit(e.popupHeight)}else s.style.height="auto";var o=0,r=void 0;if(!t.isNullOrUndefined(e.selectedLI)&&!t.isNullOrUndefined(e.activeIndex)&&e.activeIndex>=0?e.setScrollPosition():e.list.scrollTop=0,t.Browser.isDevice&&!e.allowFiltering&&("dropdownlist"===e.getModuleName()||e.isDropDownClick&&"combobox"===e.getModuleName())){o=e.getOffsetValue(s);var a=e.isEmptyList()?e.list:e.liCollections[0];r=-(parseInt(getComputedStyle(a).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10))}e.getFocusElement(),e.createPopup(s,o,r),e.checkCollision(s),t.Browser.isDevice&&(e.popupObj.element.classList.add(B.device),("dropdownlist"===e.getModuleName()||"combobox"===e.getModuleName()&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&(e.popupObj.element.classList.add(B.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),t.attributes(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),t.addClass([document.body,e.popupObj.element],B.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=l.container.querySelector(".e-back-icon"),e.clearIconElement=l.container.querySelector("."+B.clearIcon),t.EventHandler.add(e.backIconElement,"click",e.clickOnBackIcon,e),t.EventHandler.add(e.clearIconElement,"click",e.clearText,e))),s.style.visibility="visible",t.addClass([s],"e-popup-close");for(var h=0,p=e.popupObj.getScrollableParent(e.inputWrapper.container);h<p.length;h++){var u=p[h];t.EventHandler.add(u,"scroll",e.scrollHandler,e)}t.Browser.isDevice&&e.isFilterLayout()&&t.EventHandler.add(e.list,"scroll",e.listScroll,e),t.attributes(e.targetElement(),{"aria-expanded":"true"});var c=e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container;t.addClass([c],[B.inputFocus]);var d={name:"FadeIn",duration:100};e.beforePopupOpen=!0;var m={popup:e.popupObj,cancel:!1,animation:d};e.trigger("open",m,function(i){i.cancel||(t.addClass([e.inputWrapper.container],[B.iconAnimation]),e.popupObj.show(new t.Animation(i.animation),1e3===e.zIndex?e.element:null))})}})},s.prototype.checkCollision=function(e){(!t.Browser.isDevice||t.Browser.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&l.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px")},s.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTop,10),s=parseInt(t.borderBottom,10);return this.setPopupPosition(i+s)},s.prototype.createPopup=function(e,i,s){var n=this;this.popupObj=new l.Popup(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:s,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown();var e="autocomplete"===n.getModuleName();n.DropDownBaseresetBlazorTemplates(e,e,!0,!0,!1,!0,!0),n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup();var i=t.closest(n.inputElement,"form");n.isFiltering()&&i&&n.actionCompleteData.list&&n.actionCompleteData.list[0]&&(n.isActive=!0,n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0))},open:function(){t.EventHandler.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0,n.isFilterLayout()&&(t.removeClass([n.inputWrapper.container],[B.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&t.addClass([n.inputWrapper.clearButton],B.clearIconHide)),n.activeStateChange()}})},s.prototype.isEmptyList=function(){return!t.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},s.prototype.getFocusElement=function(){},s.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},s.prototype.scrollHandler=function(){t.Browser.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},s.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector("."+B.clearIcon);t.detach(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},s.prototype.setPopupPosition=function(e){var i,s=e,l=this.list.querySelector("."+B.focus)||this.selectedLI,n=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=n.getBoundingClientRect().height,a=this.list.offsetHeight/2,h=t.isNullOrUndefined(l)?n.offsetTop:l.offsetTop;if(o.offsetTop-a<h&&!t.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!t.isNullOrUndefined(l)){var p=this.list.offsetHeight/r,u=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(p-(this.liCollections.length-this.activeIndex))*r-s+u,this.list.scrollTop=l.offsetTop}else h>a?(i=a-r/2,this.list.scrollTop=h-a+r/2):i=h;return-(i=i+r+s-(r-this.inputWrapper.container.offsetHeight)/2)},s.prototype.setWidth=function(){var e=t.formatUnit(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),t.Browser.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var i=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(i).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},s.prototype.scrollBottom=function(e){if(!t.isNullOrUndefined(this.selectedLI)){var i=this.list.offsetHeight,s=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,l=this.list.scrollTop+s-i;l=e?l+2*parseInt(getComputedStyle(this.list).paddingTop,10):l;var n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;n=this.fields.groupBy&&!t.isNullOrUndefined(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n,0===this.activeIndex?this.list.scrollTop=0:(s>i||!(n>0&&this.list.offsetHeight>n))&&(this.list.scrollTop=l)}},s.prototype.scrollTop=function(){if(!t.isNullOrUndefined(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop;e=this.fields.groupBy&&!t.isNullOrUndefined(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!t.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},s.prototype.isEditTextBox=function(){return!1},s.prototype.isFiltering=function(){return this.allowFiltering},s.prototype.isPopupButton=function(){return!0},s.prototype.setScrollPosition=function(e){if(t.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},s.prototype.clearText=function(){this.filterInput.value="",this.searchLists(null)},s.prototype.listScroll=function(){this.filterInput.blur()},s.prototype.closePopup=function(e){var i=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){t.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var s=0,l=this.popupObj.getScrollableParent(this.inputWrapper.container);s<l.length;s++){var n=l[s];t.EventHandler.remove(n,"scroll",this.scrollHandler)}t.Browser.isDevice&&this.isFilterLayout()&&(t.removeClass([document.body,this.popupObj.element],B.popupFullScreen),t.EventHandler.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(t.Browser.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&t.EventHandler.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(t.EventHandler.remove(this.backIconElement,"click",this.clickOnBackIcon),t.EventHandler.remove(this.clearIconElement,"click",this.clearText)),t.EventHandler.remove(this.filterInput,"input",this.onInput),t.EventHandler.remove(this.filterInput,"keyup",this.onFilterUp),t.EventHandler.remove(this.filterInput,"keydown",this.onFilterDown),t.EventHandler.remove(this.filterInput,"blur",this.onBlur),this.filterInput=null),t.attributes(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(B.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1;var o={name:"FadeOut",duration:100,delay:e||0},r={popup:this.popupObj,cancel:!1,animation:o};this.trigger("close",r,function(e){e.cancel||("autocomplete"===i.getModuleName()&&i.rippleFun(),i.isPopupOpen?i.popupObj.hide(new t.Animation(e.animation)):i.destroyPopup())})}},s.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),t.detach(this.popupObj.element)},s.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},s.prototype.render=function(){"INPUT"===this.element.tagName?(this.inputElement=this.element,t.isNullOrUndefined(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),t.isNullOrUndefined(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement)),this.inputWrapper=n.Input.createInput({element:this.inputElement,buttons:this.isPopupButton()?[B.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:this.cssClass,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:B.hiddenElement}}),t.prepend([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setFields(),this.inputWrapper.container.style.width=t.formatUnit(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id")?this.element.getAttribute("id"):t.getUniqueID("ej2_dropdownlist");if(this.element.id=e,this.hiddenElement.id=e+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),t.attributes(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=i.options[i.selectedIndex].value,this.text=t.isNullOrUndefined(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(e){e.stopImmediatePropagation()},this.inputElement.onchange=function(e){e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),t.isNullOrUndefined(this.text)||this.inputElement.setAttribute("value",this.text),this.renderComplete()},s.prototype.setFooterTemplate=function(e){var i;this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),t.addClass([this.footer],B.footer));for(var s=0,l=(i=t.compile(this.footerTemplate))({},null,null,this.footerTemplateId,this.isStringTemplate);s<l.length;s++){var n=l[s];this.footer.appendChild(n)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),t.append([this.footer],e)},s.prototype.setHeaderTemplate=function(e){var i;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),t.addClass([this.header],B.header));for(var s=0,l=(i=t.compile(this.headerTemplate))({},null,null,this.headerTemplateId,this.isStringTemplate);s<l.length;s++){var n=l[s];this.header.appendChild(n)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1);var o=e.querySelector("div.e-content");e.insertBefore(this.header,o)},s.prototype.setOldText=function(e){this.text=e},s.prototype.setOldValue=function(e){this.value=e},s.prototype.refreshPopup=function(){t.isNullOrUndefined(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||t.Browser.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(t.removeClass([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container))},s.prototype.checkDatasource=function(e){e.dataSource&&!t.isNullOrUndefined(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1})},s.prototype.updateDataSource=function(e){""===this.inputElement.value&&(t.isNullOrUndefined(e)||!t.isNullOrUndefined(e.dataSource)&&(e.dataSource instanceof i.DataManager||0!==e.dataSource.length))||this.clear(null,e),(t.isNullOrUndefined(e)||!t.isNullOrUndefined(e.dataSource)&&(e.dataSource instanceof i.DataManager||0!==e.dataSource.length))&&this.resetList(this.dataSource),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},s.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({value:e.value,text:e.text})},s.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},s.prototype.onPropertyChanged=function(s,l){"dropdownlist"===this.getModuleName()&&(this.checkDatasource(s),this.setUpdateInitial(["fields","query","dataSource"],s));for(var o=0,r=Object.keys(s);o<r.length;o++){var a=r[o];switch(a){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":t.setStyleAttribute(this.inputWrapper.container,{width:t.formatUnit(s.width)});break;case"placeholder":n.Input.setPlaceholder(s.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&n.Input.setPlaceholder(s.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&n.Input.setReadonly(s.readonly,this.inputElement);break;case"cssClass":this.setCssClass(s,l);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===s.text){this.clear();break}if(this.list||(this.dataSource instanceof i.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var h=this.getElementByText(s.text);this.checkValidLi(h)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(s.text,l.text,"text"):this.setOldText(l.text)),this.updateInputFields()}break;case"value":if(null===s.value){this.clear();break}if(this.notify("beforeValueChange",{newProp:s}),this.list||(this.dataSource instanceof i.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var p=this.getElementByValue(s.value);this.checkValidLi(p)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(s.value,l.value,"value"):this.setOldValue(l.value)),this.updateInputFields()}break;case"index":if(null===s.index){this.clear();break}if(this.list||(this.dataSource instanceof i.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var u=this.liCollections[s.index];this.checkValidLi(u)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(s.index,l.index,"index"):this.index=l.index),this.updateInputFields()}break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":t.isNullOrUndefined(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0});break;case"floatLabelType":n.Input.removeFloating(this.inputWrapper),n.Input.addFloating(this.inputElement,s.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":n.Input.setClearButton(s.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:var c=void 0;c=this.getPropObject(a,s,l),e.prototype.onPropertyChanged.call(this,c.newProperty,c.oldProperty)}}},s.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},s.prototype.setSelectionData=function(e,t,i){var s,l=this;this.updateListValues=function(){"text"===i?(s=l.getElementByText(e),l.checkValidLi(s)||l.setOldText(t)):"value"===i?(s=l.getElementByValue(e),l.checkValidLi(s)||l.setOldValue(t)):"index"===i&&(s=l.liCollections[e],l.checkValidLi(s)||(l.index=t))}},s.prototype.setCssClass=function(e,t){this.inputWrapper.container.classList.remove(t.cssClass),n.Input.setCssClass(e.cssClass,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.element.classList.remove(t.cssClass),this.popupObj.element.classList.add(e.cssClass))},s.prototype.getModuleName=function(){return"dropdownlist"},s.prototype.showPopup=function(){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();if(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(t.isNullOrUndefined(this.list)||!t.isUndefined(this.list)&&this.list.classList.contains(k.noData))&&this.renderList(),t.Browser.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}t.isNullOrUndefined(this.list.children[0])&&!this.list.classList.contains(k.noData)||this.renderPopup(),t.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}},s.prototype.hidePopup=function(){var e=!!this.headerTemplate,i=!!this.headerTemplate;this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!1,e,i),this.isEscapeKey&&"dropdownlist"===this.getModuleName()&&(n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,t.isNullOrUndefined(this.index)?this.resetSelection():(this.selectedLI=this.liCollections[this.index],this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())),this.closePopup();var s=this.getItemData();""!==this.inputElement.value.trim()||this.isInteracted||!this.isSelectCustom&&(t.isNullOrUndefined(this.selectedLI)||this.inputElement.value===s.text)||(this.isSelectCustom=!1,this.clear())},s.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(B.disable)){var i=!1;this.preventFocus&&t.Browser.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),t.addClass([this.inputWrapper.container],[B.inputFocus]),this.onFocus(e)}},s.prototype.focusOut=function(){this.enabled&&(this.isTyped=!0,this.hidePopup(),this.targetElement().blur(),t.removeClass([this.inputWrapper.container],[B.inputFocus]))},s.prototype.destroy=function(){var i=this;this.isActive=!1,this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),this.element&&!this.element.classList.contains("e-"+this.getModuleName())||(["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete"].forEach(function(e){i.inputElement.removeAttribute(e)}),this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),n.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?t.detach(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),t.detach(this.inputWrapper.container)),e.prototype.destroy.call(this))},s.prototype.getItems=function(){return this.list||(this.dataSource instanceof i.DataManager&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?e.prototype.getItems.call(this):[]},I([t.Property(null)],s.prototype,"cssClass",void 0),I([t.Property("100%")],s.prototype,"width",void 0),I([t.Property("300px")],s.prototype,"popupHeight",void 0),I([t.Property("100%")],s.prototype,"popupWidth",void 0),I([t.Property(null)],s.prototype,"placeholder",void 0),I([t.Property(null)],s.prototype,"filterBarPlaceholder",void 0),I([t.Property({})],s.prototype,"htmlAttributes",void 0),I([t.Property(null)],s.prototype,"query",void 0),I([t.Property(null)],s.prototype,"valueTemplate",void 0),I([t.Property(null)],s.prototype,"headerTemplate",void 0),I([t.Property(null)],s.prototype,"footerTemplate",void 0),I([t.Property(!1)],s.prototype,"allowFiltering",void 0),I([t.Property(!1)],s.prototype,"readonly",void 0),I([t.Property(null)],s.prototype,"text",void 0),I([t.Property(null)],s.prototype,"value",void 0),I([t.Property(null)],s.prototype,"index",void 0),I([t.Property("Never")],s.prototype,"floatLabelType",void 0),I([t.Property(!1)],s.prototype,"showClearButton",void 0),I([t.Event()],s.prototype,"filtering",void 0),I([t.Event()],s.prototype,"change",void 0),I([t.Event()],s.prototype,"beforeOpen",void 0),I([t.Event()],s.prototype,"open",void 0),I([t.Event()],s.prototype,"close",void 0),I([t.Event()],s.prototype,"blur",void 0),I([t.Event()],s.prototype,"focus",void 0),s=I([t.NotifyPropertyChanges],s)}(A),T=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),N=function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};B.root="e-combobox";var P={container:null,buttons:[]},F=function(e){function i(t,i){return e.call(this,t,i)||this}return T(i,e),i.prototype.preRender=function(){e.prototype.preRender.call(this)},i.prototype.getLocaleName=function(){return"combo-box"},i.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(t.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),t.EventHandler.add(this.inputWrapper.container,"blur",this.onBlur,this)),t.isNullOrUndefined(this.inputWrapper.buttons[0])||t.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),t.EventHandler.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(t.EventHandler.add(this.inputElement,"input",this.onInput,this),t.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),t.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this)),this.bindCommonEvent()},i.prototype.preventBlur=function(e){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(B.input)||!t.Browser.isDevice)&&t.Browser.isDevice||e.preventDefault()},i.prototype.onBlur=function(i){var s=""===this.inputElement.value?null:this.inputElement.value;t.isNullOrUndefined(this.listData)||t.isNullOrUndefined(s)||s===this.text||this.customValue(),e.prototype.onBlur.call(this,i)},i.prototype.targetElement=function(){return this.inputElement},i.prototype.setOldText=function(e){n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},i.prototype.setOldValue=function(e){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},i.prototype.valueMuteChange=function(e){var i=t.isNullOrUndefined(e)?null:e.toString();n.Input.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var s=this.fields,l={};l[s.text]=t.isNullOrUndefined(e)?null:e.toString(),l[s.value]=t.isNullOrUndefined(e)?null:e.toString(),this.itemData=l,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},i.prototype.updateValues=function(){if(t.isNullOrUndefined(this.value))if(this.text&&t.isNullOrUndefined(this.value)){var e=this.getElementByText(this.text);e?this.setSelection(e,null):(n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null);this.setHiddenValue(),n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},i.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?t.addClass([this.inputWrapper.clearButton],B.clearIconHide):t.removeClass([this.inputWrapper.clearButton],B.clearIconHide))},i.prototype.getAriaAttributes=function(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},i.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(e.prototype.searchLists.call(this,t),""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+B.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+B.li)),this.incrementalSearch(t))},i.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},i.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:P},i.prototype.onActionComplete=function(t,i,s,l){e.prototype.onActionComplete.call(this,t,i,s),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&this.inlineSearch()},i.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),i=this.list.querySelector("."+B.selected);if(e.text===this.inputElement.value&&!t.isNullOrUndefined(i))return i;if((t.Browser.isDevice&&!this.isDropDownClick||!t.Browser.isDevice)&&!t.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0){var s=a(this.inputElement.value,this.liCollections,"StartsWith",!0).item;if(t.isNullOrUndefined(s))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var l=this.getIndexByValue(s.getAttribute("data-value"))-1,n=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(n)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var o=this.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=l*n+o,t.addClass([s],B.focus)}}return s}return null},i.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):e.prototype.setValue.call(this,t)},i.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&t.isNullOrUndefined(e.value)&&t.isNullOrUndefined(e.text)||this.setProperties({value:e.value,text:e.text})},i.prototype.showSpinner=function(){t.isNullOrUndefined(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||n.Input.appendSpan("e-input-group-icon e-atc-spinner-icon",this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,t.addClass([this.spinnerElement],B.disableIcon),l.createSpinner({target:this.spinnerElement,width:t.Browser.isDevice?"16px":"14px"},this.createElement),l.showSpinner(this.spinnerElement))},i.prototype.hideSpinner=function(){t.isNullOrUndefined(this.spinnerElement)||(l.hideSpinner(this.spinnerElement),t.removeClass([this.spinnerElement],B.disableIcon),this.spinnerElement.classList.contains("e-atc-spinner-icon")?t.detach(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},i.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}},i.prototype.isAndroidAutoFill=function(e){if(t.Browser.isAndroid){var i=this.getSelectionPoints(),s=this.prevSelectPoints.end,l=i.end,n=this.prevSelectPoints.start,o=i.start;return 0!==s&&(s===e.length&&n===e.length||n>o&&s>l||s===l&&n===o)}return!1},i.prototype.clear=function(i,s){(t.isNullOrUndefined(s)||!t.isNullOrUndefined(s)&&t.isNullOrUndefined(s.dataSource))&&e.prototype.clear.call(this,i)},i.prototype.isSelectFocusItem=function(e){return!t.isNullOrUndefined(e)},i.prototype.inlineSearch=function(e){var i=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),s=i?this.liCollections[this.activeIndex]:this.getFocusElement();if(t.isNullOrUndefined(s))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var l=this.list.querySelector("."+B.li);this.setHoverList(l)}else this.activeIndex=null,this.removeSelection(),this.removeFocus();else{if(!i){var n=this.getFormattedValue(s.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.activeIndex=t.isNullOrUndefined(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(s,i)}},i.prototype.incrementalSearch=function(e){this.showPopup(),t.isNullOrUndefined(this.listData)||(this.inlineSearch(e),e.preventDefault())},i.prototype.setAutoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var s=i+e.substr(i.length,e.length);n.Input.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)}else n.Input.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)},i.prototype.getValueByText=function(t){return e.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},i.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(t.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),t.EventHandler.remove(this.inputWrapper.container,"blur",this.onBlur)),t.isNullOrUndefined(this.inputWrapper.buttons[0])||t.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),t.EventHandler.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(t.EventHandler.remove(this.inputElement,"input",this.onInput),t.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),t.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)),this.unBindCommonEvent()},i.prototype.setSelection=function(i,s){e.prototype.setSelection.call(this,i,s),t.isNullOrUndefined(i)||this.autofill||this.isDropDownClick||this.removeFocus()},i.prototype.selectCurrentItem=function(e){var i;this.isPopupOpen&&((i=this.list.querySelector("."+B.focus))&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clear(e):this.isTyped&&!this.isSelected&&t.isNullOrUndefined(i)&&this.customValue(),this.hidePopup()},i.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(B.selected)&&(this.removeFocus(),e.classList.add(B.focus))},i.prototype.targetFocus=function(e){t.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus()},i.prototype.dropDownClick=function(i){i.preventDefault(),t.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.dropDownClick.call(this,i)},i.prototype.customValue=function(){var e=this,i=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var s=this.value;if(t.isNullOrUndefined(i)){var l=""===this.inputElement.value?null:this.inputElement.value,o=void 0;o={text:l,item:{}},this.initial?this.updateCustomValueCallback(l,o,s):this.trigger("customValueSpecifier",o,function(t){e.updateCustomValueCallback(l,t,s)})}else this.isSelectCustom=!1,this.setProperties({value:i}),s!==this.value&&this.onChangeEvent(null)}else this.allowCustom&&(this.isSelectCustom=!0);else{var r=this.previousValue,a=this.value;this.setProperties({value:i}),t.isNullOrUndefined(this.value)&&n.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&r===this.value&&a!==this.value&&this.onChangeEvent(null)}},i.prototype.updateCustomValueCallback=function(e,i,s){var l=this.fields,n=i.item,o={};n&&t.getValue(l.text,n)&&t.getValue(l.value,n)?o=n:(t.setValue(l.text,e,o),t.setValue(l.value,e,o)),this.itemData=o;var r={text:t.getValue(l.text,this.itemData),value:t.getValue(l.value,this.itemData),index:null};this.setProperties(r,!0),this.setSelection(null,null),this.isSelectCustom=!0,s!==this.value&&this.onChangeEvent(null)},i.prototype.onPropertyChanged=function(i,s){"combobox"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],i);for(var l=0,o=Object.keys(i);l<o.length;l++){var r=o[l];switch(r){case"readonly":n.Input.setReadonly(this.readonly,this.inputElement),this.readonly?(t.EventHandler.remove(this.inputElement,"input",this.onInput),t.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),t.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)):(t.EventHandler.add(this.inputElement,"input",this.onInput,this),t.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),t.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this));break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&t.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this);break;case"allowCustom":break;default:var a=void 0;a=this.getPropObject(r,i,s),e.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty)}}},i.prototype.render=function(){e.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&t.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this),this.renderComplete()},i.prototype.getModuleName=function(){return"combobox"},i.prototype.hidePopup=function(){var i=""===this.inputElement.value?null:this.inputElement.value;if(!t.isNullOrUndefined(this.listData)){var s=this.isEscapeKey;this.isEscapeKey&&(n.Input.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var l=this.isSelectCustom?{text:""}:this.getItemData(),o=this.list.querySelector("."+B.selected);if(l.text===this.inputElement.value&&!t.isNullOrUndefined(o))return this.isSelected&&(this.onChangeEvent(null),this.isSelectCustom=!1),void e.prototype.hidePopup.call(this);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var r=a(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=r.item,t.isNullOrUndefined(r.index)&&(r.index=a(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=r.index,t.isNullOrUndefined(this.selectedLI)?s&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue()}t.isNullOrUndefined(this.listData)&&this.allowCustom&&!t.isNullOrUndefined(i)&&i!==this.value&&this.customValue(),e.prototype.hidePopup.call(this)},i.prototype.focusIn=function(){this.enabled&&(t.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.focusIn.call(this))},N([t.Property(!1)],i.prototype,"autofill",void 0),N([t.Property(!0)],i.prototype,"allowCustom",void 0),N([t.Property({})],i.prototype,"htmlAttributes",void 0),N([t.Property(!1)],i.prototype,"allowFiltering",void 0),N([t.Property(null)],i.prototype,"query",void 0),N([t.Property(null)],i.prototype,"index",void 0),N([t.Property(!0)],i.prototype,"showClearButton",void 0),N([t.Event()],i.prototype,"customValueSpecifier",void 0),N([t.Event()],i.prototype,"filtering",void 0),N([t.Property(null)],i.prototype,"valueTemplate",void 0),N([t.Property("Never")],i.prototype,"floatLabelType",void 0),N([t.Property(null)],i.prototype,"filterBarPlaceholder",void 0),i=N([t.NotifyPropertyChanges],i)}(D),H=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),U=function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};B.root="e-autocomplete",B.icon="e-input-group-icon e-ddl-icon e-search-icon";var W=function(e){function s(t,i){var s=e.call(this,t,i)||this;return s.isFiltered=!1,s}return H(s,e),s.prototype.preRender=function(){e.prototype.preRender.call(this)},s.prototype.getLocaleName=function(){return"auto-complete"},s.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},s.prototype.getQuery=function(e){var s=e?e.clone():this.query?this.query.clone():new i.Query,l=""!==this.queryString||t.isNullOrUndefined(this.value)?this.filterType:"equal",n=""!==this.queryString||t.isNullOrUndefined(this.value)?this.queryString:this.value;if(this.isFiltered)return s;if(null!==this.queryString){var o=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof i.DataManager||"string"!==o)&&"number"!==o){var r=t.isNullOrUndefined(this.fields.value)?"":this.fields.value;s.where(r,l,n,this.ignoreCase,this.ignoreAccent)}else s.where("",l,n,this.ignoreCase,this.ignoreAccent)}return t.isNullOrUndefined(this.suggestionCount)||s.take(this.suggestionCount),s},s.prototype.searchLists=function(i){var s=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,t.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this,!0),this.queryString=this.filterInput.value,40===i.keyCode||38===i.keyCode)return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;var l={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,t,i){l.cancel||(s.isFiltered=!0,s.filterAction(e,t,i))},cancel:!1};this.trigger("filtering",l,function(e){e.cancel||s.isFiltered||e.preventDefaultAction||s.filterAction(s.dataSource,null,s.fields)})},s.prototype.filterAction=function(e,t,i){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,i,t):this.hidePopup()},s.prototype.clear=function(i,s){(t.isNullOrUndefined(s)||!t.isNullOrUndefined(s)&&t.isNullOrUndefined(s.dataSource))&&e.prototype.clear.call(this,i),this.beforePopupOpen&&this.hidePopup()},s.prototype.onActionComplete=function(i,s,l,n){this.fixedHeaderElement=null,e.prototype.onActionComplete.call(this,i,s,l);var o=this.list.querySelector("."+B.li);t.isNullOrUndefined(o)||t.removeClass([o],B.focus),this.postBackAction()},s.prototype.postBackAction=function(){if(this.autofill&&!t.isNullOrUndefined(this.liCollections[0])){var i=[this.liCollections[0]],s=a(this.inputElement.value,i,"StartsWith",this.ignoreCase);t.isNullOrUndefined(s.item)||e.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},s.prototype.setSelection=function(i,s){if(this.isValidLI(i))if(!t.isNullOrUndefined(s)&&"keydown"===s.type&&"enter"!==s.action&&this.isValidLI(i)){var l=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(l),this.setHoverList(i),this.selectedLI=i,this.setScrollPosition(s),this.autofill&&(this.preventAutoFill=!1,e.prototype.setAutoFill.call(this,i)),t.attributes(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else e.prototype.setSelection.call(this,i,s)},s.prototype.listOption=function(i,s){var l=this,n=e.prototype.listOption.call(this,i,s);if(t.isNullOrUndefined(n.itemCreated))n.itemCreated=function(e){l.highlight&&h(e.item,l.queryString,l.ignoreCase,l.filterType)};else{var o=n.itemCreated;n.itemCreated=function(e){l.highlight&&h(e.item,l.queryString,l.ignoreCase,l.filterType),o.apply(l,[e])}}return n},s.prototype.isFiltering=function(){return!0},s.prototype.renderPopup=function(){this.list.scrollTop=0,e.prototype.renderPopup.call(this)},s.prototype.isEditTextBox=function(){return""!==this.inputElement.value.trim()},s.prototype.isPopupButton=function(){return this.showPopupButton},s.prototype.isSelectFocusItem=function(e){return!1},s.prototype.showPopup=function(){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,t.isNullOrUndefined(this.list)?this.renderList():this.resetList(this.dataSource,this.fields)}},s.prototype.hidePopup=function(){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1),e.prototype.hidePopup.call(this),this.activeIndex=-1},s.prototype.onPropertyChanged=function(i,s){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],i);for(var l=0,o=Object.keys(i);l<o.length;l++){var r=o[l];switch(r){case"showPopupButton":if(this.showPopupButton){var a=n.Input.appendSpan(B.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=a,t.EventHandler.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else t.detach(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:var h=void 0;h=this.getPropObject(r,i,s),e.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty)}}},s.prototype.getModuleName=function(){return"autocomplete"},s.prototype.render=function(){e.prototype.render.call(this)},U([t.Complex({value:null,iconCss:null,groupBy:null},w)],s.prototype,"fields",void 0),U([t.Property(!0)],s.prototype,"ignoreCase",void 0),U([t.Property(!1)],s.prototype,"showPopupButton",void 0),U([t.Property(!1)],s.prototype,"highlight",void 0),U([t.Property(20)],s.prototype,"suggestionCount",void 0),U([t.Property({})],s.prototype,"htmlAttributes",void 0),U([t.Property(null)],s.prototype,"query",void 0),U([t.Property(1)],s.prototype,"minLength",void 0),U([t.Property("Contains")],s.prototype,"filterType",void 0),U([t.Event()],s.prototype,"filtering",void 0),U([t.Property(null)],s.prototype,"index",void 0),U([t.Property("Never")],s.prototype,"floatLabelType",void 0),U([t.Property(null)],s.prototype,"valueTemplate",void 0),U([t.Property(null)],s.prototype,"filterBarPlaceholder",void 0),U([t.Property(!1)],s.prototype,"allowFiltering",void 0),U([t.Property(null)],s.prototype,"text",void 0),s=U([t.NotifyPropertyChanges],s)}(F),V="e-float-line",M="e-float-text",q="e-label-top",j="e-label-bottom",R=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),z=function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},K="e-input-focus",_="e-hide-listitem",G="e-chips",Q=function(e){function s(t,i){var s=e.call(this,t,i)||this;return s.isValidKey=!1,s.selectAllEventData=[],s.selectAllEventEle=[],s.scrollFocusStatus=!1,s.keyDownStatus=!1,s}return R(s,e),s.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},s.prototype.requiredModules=function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},s.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":this.overAllWrapper.classList.add(this.htmlAttributes[i]),this.popupWrapper.classList.add(this.htmlAttributes[i]);break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:var s=["name","required","aria-required","form"],l=["title","role","style","class"];["id"].indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[i]):0===i.indexOf("data")||s.indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):l.indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[i]):this.inputElement.setAttribute(i,this.htmlAttributes[i])}}},s.prototype.updateReadonly=function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},s.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))},s.prototype.updateCssClass=function(){this.cssClass&&(this.popupWrapper.classList.add(this.cssClass),this.overAllWrapper.classList.add(this.cssClass))},s.prototype.onPopupShown=function(){var e=this;if(t.Browser.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var i=this;window.onpopstate=function(){i.hidePopup(),i.inputElement.focus()},history.pushState({},"")}var s={name:"FadeIn",duration:100},l={popup:this.popupObj,cancel:!1,animation:s};this.trigger("open",l,function(i){i.cancel||(e.focusAtFirstListItem(),document.body.appendChild(e.popupObj.element),("CheckBox"===e.mode||e.showDropDownIcon)&&t.addClass([e.overAllWrapper],["e-icon-anim"]),e.refreshPopup(),e.popupObj.show(i.animation,1e3===e.zIndex?e.element:null),t.attributes(e.inputElement,{"aria-expanded":"true"}),e.isFirstClick&&e.loadTemplate())})},s.prototype.updateListItems=function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i])},s.prototype.loadTemplate=function(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})},s.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!t.isNullOrUndefined(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);t.isNullOrUndefined(e)||this.scrollBottom(e)}},s.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+k.li)){var e=void 0;if("CheckBox"===this.mode)return void this.removeFocus();null!==(e=this.ulElement.querySelector("li."+k.li+":not(."+_+")"))&&(this.removeFocus(),this.addListFocus(e))}},s.prototype.focusAtLastListItem=function(e){var t;e?t=a(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?a(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))},s.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"textbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}},s.prototype.updateListARIA=function(){t.attributes(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});var e=!!this.inputElement.disabled;t.attributes(this.inputElement,this.getAriaAttributes()),e&&t.attributes(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},s.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var i=this.htmlAttributes;t.extend(i,{"aria-disabled":e},i),this.setProperties({htmlAttributes:i},!0)}},s.prototype.removelastSelection=function(e){var i,s=(i=this.chipCollectionWrapper.querySelectorAll("span."+G))[i.length-1].getAttribute("data-value");t.isNullOrUndefined(this.value)||(this.tempValues=this.value.slice()),this.removeValue(s,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},s.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.renderPopup(),this.onPopupShown()},s.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},s.prototype.getForQuery=function(e){for(var s,l=t.isNullOrUndefined(this.fields.value)?this.fields.text:this.fields.value,n=0;n<e.length;n++)s=0===n?new i.Predicate(l,"equal",e[n]):s.or(l,"equal",e[n]);return this.getQuery(this.query).where(s)},s.prototype.onActionComplete=function(s,l,n,o){e.prototype.onActionComplete.call(this,s,l,n);var r=this,a=[];if(!t.isNullOrUndefined(this.value)&&!this.allowCustomValue)for(var h=0;h<this.value.length;h++)this.findListElement(this.allowFiltering&&!t.isNullOrUndefined(this.mainList)?this.mainList:s,"li","data-value",r.value[h])||a.push(r.value[h]);a.length>0&&this.dataSource instanceof i.DataManager&&!t.isNullOrUndefined(this.value)?this.dataSource.executeQuery(this.getForQuery(a)).then(function(e){r.addItem(e.result,l.length),r.updateActionList(s,l,e)}):this.updateActionList(s,l,n)},s.prototype.updateActionList=function(e,i,s,l){if("CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?t.isNullOrUndefined(this.mainData)||0!==this.mainData.length||(this.mainData=i):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=i,this.mainListCollection=this.liCollections),(this.remoteCustomValue||i.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering)return void this.checkForCustomValue(this.tempQuery,this.fields);this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value||"CheckBox"===this.mode)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),t.isNullOrUndefined(this.setInitialValue)||this.setInitialValue(),t.isNullOrUndefined(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(t.isNullOrUndefined(this.text)||!t.isNullOrUndefined(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown())},s.prototype.refreshSelection=function(){var e,i,s=this.hideSelectedItem?_:k.selected;if(!t.isNullOrUndefined(this.value))for(var l=0;!t.isNullOrUndefined(this.value[l]);l++)if(e=this.value[l],i=this.findListElement(this.list,"li","data-value",e)){if(t.addClass([i],s),this.hideSelectedItem&&i.previousSibling&&i.previousElementSibling.classList.contains(k.group)&&(!i.nextElementSibling||i.nextElementSibling.classList.contains(k.group))&&t.addClass([i.previousElementSibling],s),this.hideSelectedItem&&this.fields.groupBy&&!i.previousElementSibling.classList.contains(_)&&this.hideGroupItem(e),this.hideSelectedItem&&i.classList.contains(k.focus)){t.removeClass([i],k.focus);var n=i.parentElement.querySelectorAll("."+k.li+":not(."+_+")");n.length>0?t.addClass([n[0]],k.focus):(this.ulElement=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement,this.l10nUpdate(),t.addClass([this.list],k.noData))}if(i.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&i.classList.contains("e-active")){var o=i.firstElementChild.getAttribute("aria-checked");if(t.isNullOrUndefined(o)||"false"===o){var r={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:i,e:null};this.notify("updatelist",r)}}}this.checkSelectAll(),this.checkMaxSelection()},s.prototype.hideGroupItem=function(e){var i,s,l=this.hideSelectedItem?_:k.selected;s=i=this.findListElement(this.ulElement,"li","data-value",e);var n=0,o=0,r=!0,a=!0;do{i&&i.previousElementSibling&&!i.previousElementSibling.classList.contains(_)&&i.previousElementSibling.classList.contains(k.li)&&(r=!1),!r||!i||i.previousElementSibling&&i.previousElementSibling.classList.contains(k.group)?n=10:i=i.previousElementSibling,s&&s.nextElementSibling&&!s.nextElementSibling.classList.contains(_)&&s.nextElementSibling.classList.contains(k.li)&&(a=!1),!a||!s||s.nextElementSibling&&s.nextElementSibling.classList.contains(k.group)?o=10:s=s.nextElementSibling}while(n<10||o<10);r&&a&&!i.previousElementSibling.classList.contains(_)?t.addClass([i.previousElementSibling],l):r&&a&&i.previousElementSibling.classList.contains(_)&&t.removeClass([i.previousElementSibling],l)},s.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,i=this.list.querySelectorAll("li.e-list-item"),s=this.list.querySelectorAll("li."+k.li).length,l=this.list.querySelectorAll("li."+k.selected).length;if(this.enableGroupCheckBox&&!t.isNullOrUndefined(this.fields.groupBy)&&(l-=e),s===l&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),s!==l&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder)for(var n=0;n<i.length;n++)this.findGroupStart(i[n])},s.prototype.openClick=function(e){this.openOnClick||"CheckBox"===this.mode?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()},s.prototype.KeyUp=function(e){var s=this;if("CheckBox"===this.mode&&!this.openOnClick){var l=String.fromCharCode(e.keyCode).match(/\w/);t.isNullOrUndefined(l)||(this.isValidKey=!0)}if(this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey)switch(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode){default:if(!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&8!==e.keyCode)this.focusAtFirstListItem();else{var n=this.targetElement();if(this.keyCode=e.keyCode,this.allowFiltering){var o={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,t,i){o.cancel||(s.isFiltered=!0,s.remoteFilterAction=!0,s.dataUpdater(e,t,i))},event:e,cancel:!1};this.trigger("filtering",o,function(e){e.cancel||s.isFiltered||e.preventDefaultAction||(s.filterAction=!0,s.dataUpdater(s.dataSource,null,s.fields))})}else{if(this.allowCustomValue){var r=new i.Query;r=""!==n?r.where(this.fields.text,"startswith",n,this.ignoreCase,this.ignoreAccent):r,this.dataUpdater(this.mainData,r,this.fields);break}var h=void 0;h=this.list.querySelectorAll("li."+k.li+":not(.e-hide-listitem)");var p=a(this.targetElement(),h,"StartsWith",this.ignoreCase);p&&null!==p.item?(this.addListFocus(p.item),this.list.scrollTop=p.item.offsetHeight*p.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}}},s.prototype.getQuery=function(e){var s=e?e.clone():this.query?this.query.clone():new i.Query;if(this.filterAction){if(null!==this.targetElement()){var l=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof i.DataManager||"string"!==l)&&"number"!==l){var n=this.fields;s.where(t.isNullOrUndefined(n.text)?"":n.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else s.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return s}return e||(this.query?this.query:new i.Query)},s.prototype.dataUpdater=function(e,t,s){if(this.isDataFetched=!1,""===this.targetElement().trim()){var l=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.onActionComplete(l,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,s,t),this.allowCustomValue&&(e instanceof i.DataManager?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,s));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()},s.prototype.checkForCustomValue=function(e,i){var s=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&s){var l=this.inputElement.value,n=i||this.fields;if("string"!=typeof(!t.isNullOrUndefined(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData)){var o={};t.setValue(n.text,l,o),t.setValue(n.value,l,o),(r=JSON.parse(JSON.stringify(this.listData))).splice(0,0,o),this.resetList(r,n,e)}else{var r=[this.inputElement.value];this.resetList(r,n)}}this.value&&this.value.length&&this.refreshSelection()},s.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},s.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.enabled){if(e.target===this.overAllClear)return void e.preventDefault();if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf("e-chips-close"))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&"e-input-group-icon e-ddl-icon"===e.target.className)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(K)||this.overAllWrapper.classList.add(K)))}e.preventDefault()}},s.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),t.attributes(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),t.attributes(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},s.prototype.onBlur=function(e){var i;return t.isNullOrUndefined(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i)?void("CheckBox"!==this.mode&&this.inputElement.focus()):"CheckBox"===this.mode&&t.Browser.isIE&&!t.isNullOrUndefined(e)?(this.inputFocus=!1,void this.overAllWrapper.classList.remove(K)):this.scrollFocusStatus?(t.isNullOrUndefined(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1)):(this.inputFocus=!1,this.overAllWrapper.classList.remove(K),"Box"!==this.mode&&"CheckBox"!==this.mode&&(this.refreshListItems(null),this.updateDelimView()),this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change"),this.overAllClear.style.display="none",this.isPopupOpen()&&(this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0,!1,!0,!0),this.hidePopup()),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,t.Browser.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),y(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!t.isNullOrUndefined(this.mainList)&&(this.ulElement=this.mainList),void this.checkPlaceholderSize())},s.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}},s.prototype.setPlaceholderSize=function(e){t.isNullOrUndefined(this.value)||0===this.value.length?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":t.isNullOrUndefined(this.value)||this.searchWrapper.removeAttribute("style")},s.prototype.refreshInputHight=function(){this.value&&this.value.length||!t.isNullOrUndefined(this.text)&&""!==this.text?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size")},s.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},s.prototype.updateValueState=function(e,t,i){var s=t||[],l=i||[];if(this.initStatus&&this.validateValues(s,l)){var n={e:e,oldValue:i,value:t,isInteracted:!!e,element:this.element};this.trigger("change",n),this.updateTempValue()}},s.prototype.updateTempValue=function(){this.value?this.tempValues=this.value.slice():this.tempValues=this.value},s.prototype.getPagingCount=function(){var e=this.list.classList.contains(k.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))},s.prototype.pageUpSelection=function(e){var t,i=this.list.querySelectorAll("li."+k.li+":not(."+_+"):not(.e-reorder-hide)");t=e>=0?i[e+1]:i[0],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},s.prototype.pageDownSelection=function(e){this.getItems();var t,i=this.list.querySelectorAll("li."+k.li+":not(."+_+"):not(.e-reorder-hide)");t=e<=i.length?i[e-1]:i[i.length-1],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},s.prototype.getItems=function(){return this.list||e.prototype.render.call(this),this.ulElement?this.ulElement.querySelectorAll("."+k.li).length>0&&this.ulElement.querySelectorAll("."+k.li+":not(."+_+")"):null},s.prototype.focusInHandler=function(e){if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove("e-zero-size"),this.checkPlaceholderSize(),this.focused){var t={isInteracted:!!e,event:e};this.trigger("focus",t),this.focused=!1}return this.overAllWrapper.classList.contains(K)||this.overAllWrapper.classList.add(K),v(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0}return!1},s.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")},s.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")},s.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},s.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},s.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper))},s.prototype.checkTextLength=function(){return this.targetElement().length<1},s.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}},s.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+k.focus);t.isNullOrUndefined(e)||this.inputElement.setAttribute("aria-activedescendant",e.id)},s.prototype.homeNavigation=function(e){this.removeFocus();var t=this.ulElement.querySelectorAll("li."+k.li+":not(."+_+"):not(.e-reorder-hide)");if(t.length>0){var i=t[e?0:t.length-1];i.classList.add(k.focus),this.scrollBottom(i)}},s.prototype.onKeyDown=function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey)return void this.popupKeyActions(e);if(this.isPopupOpen()){var t=this.list.querySelector("."+k.focus);switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add(K)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),this.refreshPopup()}},s.prototype.arrowDown=function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains("e-input-filter")||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&(this.list.focus(),t.EventHandler.add(this.list,"keydown",this.onKeyDown,this)),this.updateAriaAttribute()},s.prototype.arrowUp=function(e){e.preventDefault(),this.keyAction=!0;var i=this.list.querySelectorAll("li."+k.li+":not(."+_+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!t.isNullOrUndefined(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+k.li+",li."+k.group+":not(."+_+"):not(.e-reorder-hide)"));var s=this.list.querySelector("li."+k.focus);Array.prototype.slice.call(i).indexOf(s)<=0&&"CheckBox"===this.mode&&this.allowFiltering?(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})):this.list.focus(),this.moveByList(-1),this.updateAriaAttribute()},s.prototype.spaceKeySelection=function(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains("e-input-filter")||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()},s.prototype.checkBackCommand=function(e){8===e.keyCode&&""===this.targetElement()?this.backCommand=!1:this.backCommand=!0},s.prototype.keyNavigation=function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar),this.focusAtLastListItem(t)}},s.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},s.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},s.prototype.scrollBottom=function(e,i){var s=this.list.offsetHeight,l=e.offsetTop+e.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+l-s,o=e.offsetTop+e.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!t.isUndefined(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===i?this.list.scrollTop=0:l>s?this.list.scrollTop=n:o>0&&this.list.offsetHeight>o||(this.list.scrollTop=n)},s.prototype.scrollTop=function(e,i){var s=e.offsetTop-this.list.scrollTop;e.offsetTop,e.offsetHeight,this.list.scrollTop;s=this.fields.groupBy&&!t.isUndefined(this.fixedHeaderElement)?s-this.fixedHeaderElement.offsetHeight:s;var l=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===i?this.list.scrollTop=0:s<0?this.list.scrollTop=this.list.scrollTop+s:l>0&&this.list.offsetHeight>l||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!t.isUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},s.prototype.selectListByKey=function(e){var i,s=this.list.querySelector("li."+k.focus),l=this.value&&this.value.length?this.value.length:0;null!==s&&(s.classList.contains("e-active")&&(l-=1),this.isValidLI(s)&&l<this.maximumSelectionLength?(this.updateListSelection(s,e),this.addListFocus(s),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar),this.refreshInputHight(),this.enableGroupCheckBox&&!t.isNullOrUndefined(this.fields.groupBy)&&(i=s.firstElementChild.lastElementChild,this.findGroupStart(i))):this.updateDelimeter(this.delimiterChar),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(s.textContent),this.refreshPopup()):!this.isValidLI(s)&&l<this.maximumSelectionLength&&((i=s.firstElementChild.lastElementChild).classList.contains("e-check")?this.selectAllItem(!1,e,s):this.selectAllItem(!0,e,s)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()},s.prototype.refreshListItems=function(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var t=void 0;t="Descending"===this.sortOrder||"Ascending"===this.sortOrder?this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement:this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList,this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}},s.prototype.removeSelectedChip=function(e){var i,s=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==s&&(t.isNullOrUndefined(this.value)||(this.tempValues=this.value.slice()),null!==(i=s.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(i,e)),this.removeValue(s.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()},s.prototype.moveByTop=function(e){var t,i=this.list.querySelectorAll("li."+k.li);i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()},s.prototype.moveByList=function(e){if(this.list){var i=this.list.querySelectorAll("li."+k.li+":not(."+_+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!t.isNullOrUndefined(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+k.li+",li."+k.group+":not(."+_+"):not(.e-reorder-hide)"));var s=this.list.querySelector("li."+k.focus),l=-1;if(i.length){for(var n=0;n<i.length;n++)if(i[n]===s){l=n;break}e>0?l<i.length-1&&(this.removeFocus(),this.addListFocus(i[++l]),this.updateCheck(i[l]),this.scrollBottom(i[l],l)):l>0&&(this.removeFocus(),this.addListFocus(i[--l]),this.updateCheck(i[l]),this.scrollTop(i[l],l))}}},s.prototype.updateCheck=function(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!t.isNullOrUndefined(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))},s.prototype.moveBy=function(e,t){var i,s,l;i=this.chipCollectionWrapper.querySelectorAll("span."+G),null===(s=this.chipCollectionWrapper.querySelector("span.e-chip-selected"))?e<0&&this.addChipSelection(i[i.length-1],t):e<0?null!==(l=s.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(l,t)):(l=s.nextElementSibling,this.removeChipSelection(),null!==l&&this.addChipSelection(l,t))},s.prototype.chipClick=function(e){if(this.enabled){var i=t.closest(e.target,"."+G);this.removeChipSelection(),this.addChipSelection(i,e)}},s.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},s.prototype.addChipSelection=function(e,i){t.addClass([e],"e-chip-selected"),this.trigger("chipSelection",i)},s.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var i=e.target.parentElement.getAttribute("data-value"),s=this.getFormattedValue(i);if(this.allowCustomValue&&("false"!==i&&!1===s||!t.isNullOrUndefined(s)&&"NaN"===s.toString())&&(s=i),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),t.isNullOrUndefined(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){var l=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(l,this.mainData)}this.updateDelimeter(this.delimiterChar),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},s.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},s.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.value&&this.value.length||!t.isNullOrUndefined(this.text)&&""!==this.text?this.inputElement.placeholder="":this.inputElement.placeholder=this.placeholder:this.setFloatLabelType(),this.expandTextbox()},s.prototype.removeValue=function(e,i,s,l){var n=this,o=this.value.indexOf(this.getFormattedValue(e));-1===o&&this.allowCustomValue&&!t.isNullOrUndefined(e)&&(o=this.value.indexOf(e.toString()));var r=this.hideSelectedItem?_:k.selected;if(-1!==o){var a=this.findListElement(this.list,"li","data-value",e),h=this.getDataByValue(e),p={e:i,item:a,itemData:h,isInteracted:!!i,cancel:!1};this.trigger("removing",p,function(p){if(p.cancel)n.removeIndex++;else{var u=n.value.slice(0);if(u.splice(o,1),n.setProperties({value:[].concat([],u)},!0),null!==a){var c=n.findListElement(n.mainList,"li","data-value",e);a.setAttribute("aria-selected","false"),t.removeClass([a],r),c&&(c.setAttribute("aria-selected","false"),t.removeClass([a,c],r)),n.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,li:a,e:n,index:o}),n.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,li:a,e:i}),t.attributes(n.inputElement,{"aria-activedescendant":a.id}),n.value.length!==n.mainData.length&&"CheckBox"===n.mode&&n.showSelectAll&&n.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,value:"uncheck"})}if(n.hideSelectedItem&&n.fields.groupBy&&n.hideGroupItem(e),n.updateMainList(!0,e),n.removeChip(e),n.updateChipStatus(),(n.value&&n.value.length?n.value.length:0)<n.maximumSelectionLength){var d=n.list.querySelectorAll("li."+k.li+":not(.e-active)");t.removeClass(d,"e-disable")}if(n.trigger("removed",p),s&&(n.selectAllEventData.push(h),n.selectAllEventEle.push(a)),1===s){var m={event:i,items:n.selectAllEventEle,itemData:n.selectAllEventData,isInteracted:!!i,isChecked:!1};n.trigger("selectedAll",m),n.selectAllEventData=[],n.selectAllEventEle=[]}l&&n.clearAllCallback(i)}})}},s.prototype.updateMainList=function(e,i){if(this.allowFiltering||"CheckBox"===this.mode){var s=this.findListElement(this.mainList,"li","data-value",i);s&&(e?(s.setAttribute("aria-selected","false"),t.removeClass([s],this.hideSelectedItem?_:k.selected),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","false"),t.removeClass([s.firstElementChild.lastElementChild],"e-check"))):(s.setAttribute("aria-selected","true"),t.addClass([s],this.hideSelectedItem?_:k.selected),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","true"),t.addClass([s.firstElementChild.lastElementChild],"e-check"))))}},s.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var i=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);i&&t.remove(i)}},s.prototype.updateChipStatus=function(){this.value.length?(t.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(t.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),t.isNullOrUndefined(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},s.prototype.addValue=function(e,t,i){this.value||(this.value=[]),this.setProperties({value:[].concat([],this.value,[e])},!0);var s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},s.prototype.checkMaxSelection=function(){if((this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength){var e=this.list.querySelectorAll("li."+k.li+":not(.e-active)");t.addClass(e,"e-disable")}},s.prototype.dispatchSelect=function(e,t,i,s,l){var n=this;if(this.initStatus&&!s){var o=this.getDataByValue(e),r={e:t,item:i,itemData:o,isInteracted:!!t,cancel:!1};this.trigger("select",r,function(s){if(!s.cancel){if(l&&(n.selectAllEventData.push(o),n.selectAllEventEle.push(i)),1===l){var r={event:t,items:n.selectAllEventEle,itemData:n.selectAllEventData,isInteracted:!!t,isChecked:!0};n.trigger("selectedAll",r),n.selectAllEventData=[]}n.updateListSelectEventCallback(e,i,t)}})}},s.prototype.addChip=function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)},s.prototype.removeChipFocus=function(){var e,i;if(e=this.chipCollectionWrapper.querySelectorAll("span."+G),i=this.chipCollectionWrapper.querySelectorAll("span."+"e-chips-close".split(" ")[0]),t.removeClass(e,"e-chip-selected"),t.Browser.isDevice)for(var s=0;s<i.length;s++)i[s].style.display="none"},s.prototype.onMobileChipInteraction=function(e){var i=t.closest(e.target,"."+G),s=i.querySelector("span."+"e-chips-close".split(" ")[0]);this.enabled&&!this.readonly&&(i.classList.contains("e-chip-selected")||(this.removeChipFocus(),s.style.display="",i.classList.add("e-chip-selected")),this.refreshPopup(),e.preventDefault())},s.prototype.getChip=function(e,i,s){var l=this,n={text:i,value:i},o=this.createElement("span",{className:G,attrs:{"data-value":i,title:e}}),r=this.createElement("span",{className:"e-chipcontent"}),a=this.createElement("span",{className:"e-chips-close"});if(this.mainData&&(n=this.getDataByValue(i)),this.valueTemplate&&!t.isNullOrUndefined(n)){for(var h=0,p=t.compile(this.valueTemplate)(n,null,null,this.valueTemplateId,this.isStringTemplate);h<p.length;h++){var u=p[h];r.appendChild(u)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!1,!1,!1)}else r.innerHTML=e;o.appendChild(r);var c={isInteracted:!!s,itemData:n,e:s,setClass:function(e){t.addClass([o],e)},cancel:!1};this.trigger("tagging",c,function(e){e.cancel||(t.Browser.isDevice?(o.classList.add("e-mob-chip"),t.append([a],o),a.style.display="none",t.EventHandler.add(o,"click",l.onMobileChipInteraction,l)):(t.EventHandler.add(o,"mousedown",l.chipClick,l),l.showClearButton&&o.appendChild(a)),t.EventHandler.add(a,"mousedown",l.onChipRemove,l),l.chipCollectionWrapper.appendChild(o))})},s.prototype.calcPopupWidth=function(){var e=t.formatUnit(this.popupWidth);return e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e},s.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},s.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},s.prototype.listOption=function(e,i){var s=!t.isNullOrUndefined(i.iconCss),l=t.isNullOrUndefined(i.properties)?i:i.properties;return this.listCurrentOptions=null!==i.text||null!==i.value?{fields:l,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},t.extend(this.listCurrentOptions,this.listCurrentOptions,i,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:l}),this.listCurrentOptions},s.prototype.renderPopup=function(){var i=this;if(this.list||e.prototype.render.call(this),!this.popupObj){var s={cancel:!1};this.trigger("beforeOpen",s,function(e){if(!e.cancel){document.body.appendChild(i.popupWrapper);var s=i.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===i.mode&&!i.allowFiltering&&s&&i.filterParent&&(s.remove(),i.filterParent=null);var n=parseInt(i.popupHeight,10);if(i.popupWrapper.style.visibility="hidden",i.headerTemplate&&(i.setHeaderTemplate(),n-=i.header.offsetHeight),t.append([i.list],i.popupWrapper),i.footerTemplate&&(i.setFooterTemplate(),n-=i.footer.offsetHeight),"CheckBox"===i.mode&&i.showSelectAll?(i.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode}),n-=i.selectAllHeight):"CheckBox"!==i.mode||i.showSelectAll||i.headerTemplate&&i.footerTemplate?"CheckBox"!==i.mode||i.showSelectAll||(i.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode}),n=parseInt(i.popupHeight,10),i.headerTemplate&&i.header&&(n-=i.header.offsetHeight),i.footerTemplate&&i.footer&&(n-=i.footer.offsetHeight)):(i.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode}),n=parseInt(i.popupHeight,10)),"CheckBox"===i.mode){var o={module:"CheckBoxSelection",enable:"CheckBox"===i.mode,popupElement:i.popupWrapper};i.allowFiltering&&(i.notify("searchBox",o),n-=i.searchBoxHeight),t.addClass([i.popupWrapper],"e-checkbox")}"auto"!==i.popupHeight?(i.list.style.maxHeight=t.formatUnit(n),i.popupWrapper.style.maxHeight=t.formatUnit(i.popupHeight)):i.list.style.maxHeight=t.formatUnit(i.popupHeight),i.popupObj=new l.Popup(i.popupWrapper,{width:i.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:i.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:i.enableRtl,zIndex:i.zIndex,close:function(){i.popupObj.element.parentElement&&(i.popupObj.unwireScrollEvents(),t.detach(i.popupObj.element))},open:function(){if(!i.isFirstClick){var e=i.list.querySelector("ul");if(e){var t=Object.keys(window).indexOf("Blazor")>=0;i.itemTemplate&&"CheckBox"===i.mode&&t?setTimeout(function(){i.mainList=i.ulElement},0):i.mainList=e.cloneNode?e.cloneNode(!0):e}i.isFirstClick=!0}i.popupObj.wireScrollEvents(),i.loadTemplate(),i.setScrollPosition(),i.allowFiltering&&i.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode,value:"focus"})}}),i.popupObj.close(),i.popupWrapper.style.visibility="","CheckBox"===i.mode&&t.Browser.isDevice&&i.allowFiltering&&i.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode})}})}},s.prototype.setHeaderTemplate=function(){var e;this.header&&this.header.remove(),this.header=this.createElement("div"),t.addClass([this.header],"e-ddl-header");for(var i=(e=t.compile(this.headerTemplate))({},null,null,this.headerTemplateId,this.isStringTemplate),s=0;s<i.length;s++)this.header.appendChild(i[s]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1),"CheckBox"===this.mode&&this.showSelectAll?t.prepend([this.header],this.popupWrapper):t.append([this.header],this.popupWrapper),t.EventHandler.add(this.header,"mousedown",this.onListMouseDown,this)},s.prototype.setFooterTemplate=function(){var e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),t.addClass([this.footer],"e-ddl-footer");for(var i=(e=t.compile(this.footerTemplate))({},null,null,this.footerTemplateId,this.isStringTemplate),s=0;s<i.length;s++)this.footer.appendChild(i[s]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),t.append([this.footer],this.popupWrapper),t.EventHandler.add(this.footer,"mousedown",this.onListMouseDown,this)},s.prototype.ClearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.value)for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0);else this.clearAllCallback(e)}},s.prototype.clearAllCallback=function(e){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&this.allowFiltering){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),this.makeTextBoxEmpty(),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight()),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!t.isNullOrUndefined(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},s.prototype.windowResize=function(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()},s.prototype.resetValueHandler=function(e){var i=t.closest(this.inputElement,"form");if(i&&e.target===i){var s=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=s}},s.prototype.wireEvent=function(){t.EventHandler.add(this.componentWrapper,"mousedown",this.wrapperClick,this),t.EventHandler.add(window,"resize",this.windowResize,this),t.EventHandler.add(this.inputElement,"focus",this.focusInHandler,this),t.EventHandler.add(this.inputElement,"keydown",this.onKeyDown,this),t.EventHandler.add(this.inputElement,"keyup",this.KeyUp,this),"CheckBox"!==this.mode&&t.EventHandler.add(this.inputElement,"input",this.onInput,this),t.EventHandler.add(this.inputElement,"blur",this.onBlur,this),t.EventHandler.add(this.componentWrapper,"mousemove",this.mouseIn,this);var e=t.closest(this.inputElement,"form");e&&t.EventHandler.add(e,"reset",this.resetValueHandler,this),t.EventHandler.add(this.componentWrapper,"mouseout",this.mouseOut,this),t.EventHandler.add(this.overAllClear,"mouseup",this.ClearAll,this)},s.prototype.onInput=function(){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1},s.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),e.prototype.preRender.call(this)},s.prototype.getLocaleName=function(){return"multi-select"},s.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0},s.prototype.updateData=function(e){var i,s="",l="Delimiter"===this.mode||"CheckBox"===this.mode,n=[],o=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!t.isNullOrUndefined(this.value))for(var r=0;!t.isNullOrUndefined(this.value[r]);r++)s+=(i=this.listData?this.getTextByValue(this.value[r]):this.value[r])+e+" ",n.push(i),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[r]+'">'+r+"</option>";this.setProperties({text:n.toString()},!0),l&&(this.delimiterWrapper.innerHTML=s),this.listData=o},s.prototype.initialTextUpdate=function(){if(t.isNullOrUndefined(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),i=[],s=0;e.length>s;s++){var l=this.getValueByText(e[s]);t.isNullOrUndefined(l)?this.allowCustomValue&&i.push(e[s]):i.push(l)}i&&i.length&&this.setProperties({value:i},!0)}},s.prototype.renderList=function(t){e.prototype.render.call(this,t),this.wireListEvents()},s.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,i=void 0,s=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!t.isNullOrUndefined(this.value))for(var l=0;!t.isNullOrUndefined(this.value[l]);l++)if(s=this.value[l],i=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",s),e=this.getTextByValue(s),i&&"true"!==i.getAttribute("aria-selected")||i&&"true"===i.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,s),this.addListSelection(i);else if(s&&this.allowCustomValue){var n=this.listData.length,o={};t.setValue(this.fields.text,s,o),t.setValue(this.fields.value,s,o);var r=this.popupWrapper.querySelector("."+k.noData);this.addItem(o,n),this.popupWrapper.contains(r)&&(this.list.setAttribute("style",r.getAttribute("style")),this.popupWrapper.replaceChild(this.list,r),this.wireListEvents()),this.addChip(e,s),this.addListSelection(i)}"CheckBox"===this.mode?(this.updateDelimView(),this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"!==this.mode||!this.showSelectAll||!t.isNullOrUndefined(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),this.inputFocus||("Box"===this.mode?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper())}},s.prototype.updateActionCompleteData=function(e,i){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,t.addClass([e],_))},s.prototype.isValidLI=function(e){return e&&!e.classList.contains(k.disabled)&&!e.classList.contains(k.group)&&e.classList.contains(k.li)},s.prototype.updateListSelection=function(e,i,s){var l=e.getAttribute("data-value"),n=this.getFormattedValue(l);this.allowCustomValue&&("false"!==l&&!1===n||!t.isNullOrUndefined(n)&&"NaN"===n.toString())&&(n=l);this.getTextByValue(n);this.removeHover(),this.value&&-1!==this.value.indexOf(n)?this.removeValue(n,i,s):this.dispatchSelect(n,i,e,"true"===e.getAttribute("aria-selected"),s)},s.prototype.updateListSelectEventCallback=function(e,i,s){var l=this,n=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,n,s);else{var o=i.cloneNode(!0),r=this.getDataByValue(e),a={newData:r,cancel:!1};this.trigger("customValueSelection",a,function(i){i.cancel||(t.append([o],l.mainList),l.mainData.push(r),l.remoteCustomValue=!1,l.addValue(e,n,s))})}},s.prototype.removeListSelection=function(){var e=this.hideSelectedItem?_:k.selected,i=this.list.querySelectorAll("."+e),s=i.length;if(i&&i.length)for(t.removeClass(i,e);s>0;)i[s-1].setAttribute("aria-selected","false"),s--;if(!t.isNullOrUndefined(this.mainList)){var l=this.mainList.querySelectorAll("."+e),n=l.length;if(l&&l.length)for(t.removeClass(l,e);n>0;)l[n-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(i&&i.length>n-1&&(i[n-1].firstElementChild.setAttribute("aria-checked","false"),t.removeClass([i[n-1].firstElementChild.lastElementChild],"e-check")),l[n-1].firstElementChild.setAttribute("aria-checked","false"),t.removeClass([l[n-1].firstElementChild.lastElementChild],"e-check")),n--}},s.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+k.hover);e&&e.length&&t.removeClass(e,k.hover)},s.prototype.removeFocus=function(){if(this.list){var e=this.list.querySelectorAll("."+k.focus),i=this.mainList.querySelectorAll("."+k.focus);e&&e.length&&(t.removeClass(e,k.focus),t.removeClass(i,k.focus))}},s.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)?(this.removeHover(),t.addClass([e],k.hover)):null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!t.isNullOrUndefined(this.fields.groupBy)&&(this.removeHover(),t.addClass([e],k.hover))},s.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),t.addClass([e],k.focus)):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!t.isNullOrUndefined(this.fields.groupBy)&&t.addClass([e],k.focus)},s.prototype.addListSelection=function(e){var i=this.hideSelectedItem?_:k.selected;if(this.isValidLI(e)&&!e.classList.contains(k.hover)){if(t.addClass([e],i),this.updateMainList(!1,e.getAttribute("data-value")),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var s=e.firstElementChild.getAttribute("aria-checked");("false"===s||t.isNullOrUndefined(s))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),null!==this.chipCollectionWrapper&&this.removeChipSelection(),t.attributes(this.inputElement,{"aria-activedescendant":e.id})}},s.prototype.updateDelimeter=function(e){this.updateData(e)},s.prototype.onMouseClick=function(e){this.scrollFocusStatus=!1;var i=e.target,s=t.closest(i,"."+k.li);if(!s&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(i=i.classList.contains("e-list-group-item")?i.firstElementChild.lastElementChild:e.target).classList.contains("e-check")?(this.selectAllItem(!1,e),i.classList.remove("e-check"),i.classList.remove("e-stop"),i.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),i.classList.remove("e-stop"),i.classList.add("e-check"),i.setAttribute("aria-selected","true")),this.refreshSelection();else{if(this.isValidLI(s)){var l=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(l-=1),l<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?("CheckBox"!==this.mode&&this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty()}else e.preventDefault();"CheckBox"!==this.mode&&this.refreshListItems(t.isNullOrUndefined(s)?null:s.textContent),this.refreshPlaceHolder(),this.checkPlaceholderSize(),this.findGroupStart(i)}},s.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!t.isNullOrUndefined(this.fields.groupBy)){var i=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),i=this.findGroupAttrtibutes(e,0,0,0,0),i=this.findGroupAttrtibutes(e,i[0],i[1],i[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,i[0],i[1],i[2])}},s.prototype.findGroupAttrtibutes=function(e,t,i,s,l){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++,null!=(e=l?e.nextElementSibling:e.previousElementSibling)););return[t,i,s]},s.prototype.updateCheckBox=function(e,t,i,s){if(null!==e){var l=e.getElementsByClassName("e-frame")[0];s===t?(l.classList.remove("e-stop"),l.classList.add("e-check"),e.setAttribute("aria-selected","true")):s===i?(l.classList.remove("e-check"),l.classList.remove("e-stop"),e.setAttribute("aria-selected","false")):(l.classList.remove("e-check"),l.classList.add("e-stop"),e.setAttribute("aria-selected","false"))}},s.prototype.onMouseOver=function(e){var i=t.closest(e.target,"."+k.li);null===i&&"CheckBox"===this.mode&&!t.isNullOrUndefined(this.fields.groupBy)&&this.enableGroupCheckBox&&(i=t.closest(e.target,"."+k.group)),this.addListHover(i)},s.prototype.onMouseLeave=function(e){this.removeHover()},s.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},s.prototype.onDocumentClick=function(e){if("CheckBox"!==this.mode){var i=e.target;!t.isNullOrUndefined(this.popupObj)&&t.closest(i,"#"+this.popupObj.element.id)||this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=(t.Browser.isIE||"edge"===t.Browser.info.name)&&document.activeElement===this.inputElement:this.scrollFocusStatus=!1}},s.prototype.wireListEvents=function(){t.EventHandler.add(document,"mousedown",this.onDocumentClick,this),t.EventHandler.add(this.list,"mousedown",this.onListMouseDown,this),t.EventHandler.add(this.list,"mouseup",this.onMouseClick,this),t.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),t.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},s.prototype.unwireListEvents=function(){t.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.list&&(t.EventHandler.remove(this.list,"mousedown",this.onListMouseDown),t.EventHandler.remove(this.list,"mouseup",this.onMouseClick),t.EventHandler.remove(this.list,"mouseover",this.onMouseOver),t.EventHandler.remove(this.list,"mouseout",this.onMouseLeave))},s.prototype.hideOverAllClear=function(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")},s.prototype.showOverAllClear=function(){(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?this.overAllClear.style.display="":this.overAllClear.style.display="none"},s.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},s.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},s.prototype.showSpinner=function(){t.isNullOrUndefined(this.spinnerElement)&&("none"!==this.overAllClear.style.display?this.spinnerElement=this.overAllClear:(this.spinnerElement=this.createElement("span",{className:"e-chips-close e-close-hooker e-ms-spinner-icon"}),this.componentWrapper.appendChild(this.spinnerElement)),l.createSpinner({target:this.spinnerElement,width:t.Browser.isDevice?"16px":"14px"},this.createElement),t.addClass([this.spinnerElement],"e-ddl-disable-icon"),l.showSpinner(this.spinnerElement))},s.prototype.hideSpinner=function(){t.isNullOrUndefined(this.spinnerElement)||(l.hideSpinner(this.spinnerElement),t.removeClass([this.spinnerElement],"e-ddl-disable-icon"),this.spinnerElement.classList.contains("e-ms-spinner-icon")?t.detach(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},s.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove("e-delim-total"),this.value&&this.value.length){var e="",i=void 0,s=void 0,l=1,n=void 0,o=void 0,r=0,a=void 0;this.viewWrapper.innerHTML="";var h={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},p=new t.L10n(this.getLocaleName(),{},this.locale);""===p.getConstant("actionFailureTemplate")&&(p=new t.L10n("dropdowns",h,this.locale));var u=p.getConstant("overflowCountTemplate"),c=this.createElement("span",{className:"e-remain"}),d=t.compile(u),m=t.compile(p.getConstant("totalCountTemplate"));c.appendChild(d({count:this.value.length})[0]),this.viewWrapper.appendChild(c);var f=c.offsetWidth;if(t.remove(c),this.showDropDownIcon&&(r=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),!t.isNullOrUndefined(this.value))for(var v=0;!t.isNullOrUndefined(this.value[v]);v++){if(e+=0===v?"":this.delimiterChar+" ",i=this.getOverflowVal(v),e+=i,i=this.viewWrapper.innerHTML,this.viewWrapper.innerHTML=e,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),n+r>a){for(void 0!==s&&""!==s&&(i=s,v=l+1),this.viewWrapper.innerHTML=i,o=this.value.length-v,n=this.viewWrapper.offsetWidth;n+f+r>a&&0!==n&&""!==this.viewWrapper.innerHTML;){var y=this.viewWrapper.innerHTML.split(this.delimiterChar);y.pop(),this.viewWrapper.innerHTML=y.join(this.delimiterChar),o++,n=this.viewWrapper.offsetWidth}break}n+f+r<=a?(s=e,l=v):0===v&&(s="",l=-1)}if(o>0){var g=a-r;this.viewWrapper.appendChild(this.updateRemainTemplate(c,this.viewWrapper,o,d,m,g)),this.updateRemainWidth(this.viewWrapper,g),this.updateRemainingText(c,r,o,d,m)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},s.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},s.prototype.updateRemainTemplate=function(e,t,i,s,l,n){return t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="",e.appendChild(t.firstChild&&3===t.firstChild.nodeType?s({count:i})[0]:l({count:i})[0]),t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),this.updateRemainWidth(t,n)),e},s.prototype.updateRemainingText=function(e,t,i,s,l){var n=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(o+t>=n&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;o+t>n&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var r=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);r.pop(),this.viewWrapper.firstChild.nodeValue=r.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,o=this.viewWrapper.offsetWidth}var a=n-t;this.updateRemainTemplate(e,this.viewWrapper,i,s,l,a)}},s.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t},s.prototype.unWireEvent=function(){t.EventHandler.remove(this.componentWrapper,"mousedown",this.wrapperClick),t.EventHandler.remove(window,"resize",this.windowResize),t.EventHandler.remove(this.inputElement,"focus",this.focusInHandler),t.EventHandler.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&t.EventHandler.remove(this.inputElement,"input",this.onInput),t.EventHandler.remove(this.inputElement,"keyup",this.KeyUp);var e=t.closest(this.inputElement,"form");e&&t.EventHandler.remove(e,"reset",this.resetValueHandler),t.EventHandler.remove(this.inputElement,"blur",this.onBlur),t.EventHandler.remove(this.componentWrapper,"mousemove",this.mouseIn),t.EventHandler.remove(this.componentWrapper,"mouseout",this.mouseOut),t.EventHandler.remove(this.overAllClear,"mousedown",this.ClearAll)},s.prototype.selectAllItem=function(e,i,s){var l;if(l=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!t.isNullOrUndefined(this.fields.groupBy)){var n=i.target;if(n=32===i.keyCode?s:n,(n=n.classList.contains("e-frame")?n.parentElement.parentElement:n).classList.contains("e-list-group-item")){var o=n.nextElementSibling;if(t.isNullOrUndefined(o))return;for(;o.classList.contains("e-list-item")&&(e?o.firstElementChild.lastElementChild.classList.contains("e-check")||this.updateListSelection(o,i):o.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(o,i),null!=(o=o.nextElementSibling)););if(n.classList.contains("e-list-group-item")){var r=this.list.getElementsByClassName("e-item-focus")[0];r&&r.classList.remove("e-item-focus"),e?n.classList.add("e-active"):n.classList.remove("e-active"),n.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize()}else(n.classList.contains("e-selectall-parent")||n.parentElement.classList.contains("e-selectall-parent"))&&this.updateValue(i,l)}else this.updateValue(i,l)},s.prototype.updateValue=function(e,t){var i=this,s=t.length;if(t&&t.length){for(var l=0;l<s&&l<=50;)this.updateListSelection(t[l],e,s-l),this.findGroupStart(t[l]),l++;s>50&&setTimeout(function(){for(;l<s;)i.updateListSelection(t[l],e,s-l),i.findGroupStart(t[l]),l++;i.textboxValueUpdate()},0)}this.textboxValueUpdate(),this.checkPlaceholderSize()},s.prototype.textboxValueUpdate=function(){"Box"===this.mode||this.isPopupOpen()?this.searchWrapper.classList.remove("e-zero-size"):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),this.refreshPlaceHolder()},s.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},s.prototype.updateDataSource=function(e){t.isNullOrUndefined(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},s.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},s.prototype.selectAllItems=function(i,s){var l=this;if(t.isNullOrUndefined(this.list))this.selectAllAction=function(){if("CheckBox"===l.mode&&l.showSelectAll){var e={module:"CheckBoxSelection",enable:"CheckBox"===l.mode,value:i?"check":"uncheck"};l.notify("checkSelectAll",e)}l.selectAllItem(i,s),l.selectAllAction=null},e.prototype.render.call(this);else{if(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll){var n={value:i?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"};this.notify("checkSelectAll",n)}this.selectAllItem(i,s)}},s.prototype.getPersistData=function(){return this.addOnPersist(["value"])},s.prototype.onPropertyChanged=function(i,s){i.dataSource&&!t.isNullOrUndefined(Object.keys(i.dataSource))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1),"multiselect"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],i);for(var l=0,n=Object.keys(i);l<n.length;l++){var o=n[l];switch(o){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(t.isNullOrUndefined(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(i.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,s.value,"value");break;case"width":t.setStyleAttribute(this.overAllWrapper,{width:t.formatUnit(i.width)}),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:i.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(i.delimiterChar);break;case"cssClass":this.popupWrapper.classList.remove(s.cssClass),this.overAllWrapper.classList.remove(s.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(i.enableRtl),e.prototype.onPropertyChanged.call(this,i,s);break;case"readonly":this.updateReadonly(i.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(i.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup();break;default:var r=void 0;r=this.getPropObject(o,i,s),e.prototype.onPropertyChanged.call(this,r.newProperty,r.oldProperty)}}},s.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},s.prototype.updateVal=function(e,t,i){this.list?this.inputFocus||("text"===i&&(this.initialTextUpdate(),e=this.value),this.initialValueUpdate(),"Box"!==this.mode&&this.updateDelimView(),this.refreshInputHight(),this.refreshPlaceHolder(),this.updateValueState(null,e,t),this.checkPlaceholderSize()):this.onLoadSelect()},s.prototype.hidePopup=function(){var e=this;if(this.isPopupOpen()){var i={name:"FadeOut",duration:100,delay:100},s={popup:this.popupObj,cancel:!1,animation:i};this.trigger("close",s,function(i){i.cancel||(e.beforePopupOpen=!1,e.overAllWrapper.classList.remove("e-icon-anim"),e.popupObj.hide(new t.Animation(i.animation)),t.attributes(e.inputElement,{"aria-expanded":"false"}),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"clear"}),e.popupObj.hide(),t.removeClass([document.body,e.popupObj.element],"e-popup-full-page"),t.EventHandler.remove(e.list,"keydown",e.onKeyDown))})}},s.prototype.showPopup=function(){if(this.enabled){if(!this.ulElement)return this.beforePopupOpen=!0,void e.prototype.render.call(this);var t=this.ulElement.querySelectorAll("li.e-list-item").length,i=this.ulElement.querySelectorAll("li."+k.li+"."+_).length;if(t>0&&t===i&&i===this.mainData.length)return void(this.beforePopupOpen=!1);this.onPopupShown()}},s.prototype.selectAll=function(e){this.selectAllItems(e)},s.prototype.getModuleName=function(){return"multiselect"},s.prototype.render=function(){this.setDynValue=this.initStatus=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:"e-chips-close e-close-hooker",styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group"}),"CheckBox"===this.mode&&t.addClass([this.overAllWrapper],"e-checkbox"),t.Browser.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.overAllWrapper.style.width=t.formatUnit(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!t.Browser.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?c(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):t.getUniqueID("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.renderComplete()},s.prototype.checkInitialValue=function(){var e=this,s=this.dataSource instanceof Array?this.dataSource.length>0:!t.isNullOrUndefined(this.dataSource);if((!this.value||!this.value.length)&&t.isNullOrUndefined(this.text)&&!s&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var l=this.element.options,n=[],o="",r=0,a=l.length;r<a;r++){var h=l[r];t.isNullOrUndefined(h.getAttribute("selected"))||(h.getAttribute("value")?n.push(h.getAttribute("value")):o+=h.text+this.delimiterChar)}n.length>0?this.setProperties({value:n},!0):""!==o&&this.setProperties({text:o},!0),(n.length>0||""!==o)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!t.isNullOrUndefined(this.text))&&this.renderPopup(),t.isNullOrUndefined(this.text)||!t.isNullOrUndefined(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length?this.dataSource instanceof i.DataManager?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),t.isNullOrUndefined(this.text)||this.element.setAttribute("data-initial-value",this.text)},s.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},s.prototype.setFloatLabelType=function(){m(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),"Never"!==this.floatLabelType&&c(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},s.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),t.addClass([this.componentWrapper],["e-down-icon"])):t.isNullOrUndefined(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),t.removeClass([this.componentWrapper],["e-down-icon"]))},s.prototype.initialUpdate=function(){"Box"!==this.mode&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},s.prototype.destroy=function(){this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,e.prototype.destroy.call(this);for(var i=["readonly","aria-disabled","aria-placeholder","placeholder"],s=i.length;s>0;)this.inputElement.removeAttribute(i[s-1]),s--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?t.remove(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),t.remove(this.overAllWrapper)))},z([t.Property(!1)],s.prototype,"enableGroupCheckBox",void 0),z([t.Property(null)],s.prototype,"cssClass",void 0),z([t.Property("100%")],s.prototype,"width",void 0),z([t.Property("300px")],s.prototype,"popupHeight",void 0),z([t.Property("100%")],s.prototype,"popupWidth",void 0),z([t.Property(null)],s.prototype,"placeholder",void 0),z([t.Property(null)],s.prototype,"filterBarPlaceholder",void 0),z([t.Property({})],s.prototype,"htmlAttributes",void 0),z([t.Property(null)],s.prototype,"valueTemplate",void 0),z([t.Property(null)],s.prototype,"headerTemplate",void 0),z([t.Property(null)],s.prototype,"footerTemplate",void 0),z([t.Property(null)],s.prototype,"itemTemplate",void 0),z([t.Property(null)],s.prototype,"allowFiltering",void 0),z([t.Property(!1)],s.prototype,"allowCustomValue",void 0),z([t.Property(!0)],s.prototype,"showClearButton",void 0),z([t.Property(1e3)],s.prototype,"maximumSelectionLength",void 0),z([t.Property(!1)],s.prototype,"readonly",void 0),z([t.Property(null)],s.prototype,"text",void 0),z([t.Property(null)],s.prototype,"value",void 0),z([t.Property(!0)],s.prototype,"hideSelectedItem",void 0),z([t.Property(!0)],s.prototype,"closePopupOnSelect",void 0),z([t.Property("Default")],s.prototype,"mode",void 0),z([t.Property(",")],s.prototype,"delimiterChar",void 0),z([t.Property(!0)],s.prototype,"ignoreCase",void 0),z([t.Property(!1)],s.prototype,"showDropDownIcon",void 0),z([t.Property("Never")],s.prototype,"floatLabelType",void 0),z([t.Property(!1)],s.prototype,"showSelectAll",void 0),z([t.Property("Select All")],s.prototype,"selectAllText",void 0),z([t.Property("Unselect All")],s.prototype,"unSelectAllText",void 0),z([t.Property(!0)],s.prototype,"enableSelectionOrder",void 0),z([t.Property(!0)],s.prototype,"openOnClick",void 0),z([t.Event()],s.prototype,"change",void 0),z([t.Event()],s.prototype,"removing",void 0),z([t.Event()],s.prototype,"removed",void 0),z([t.Event()],s.prototype,"selectedAll",void 0),z([t.Event()],s.prototype,"beforeOpen",void 0),z([t.Event()],s.prototype,"open",void 0),z([t.Event()],s.prototype,"close",void 0),z([t.Event()],s.prototype,"blur",void 0),z([t.Event()],s.prototype,"focus",void 0),z([t.Event()],s.prototype,"chipSelection",void 0),z([t.Event()],s.prototype,"filtering",void 0),z([t.Event()],s.prototype,"tagging",void 0),z([t.Event()],s.prototype,"customValueSelection",void 0),s=z([t.NotifyPropertyChanges],s)}(A),J="e-check",X=function(){function e(e){this.activeLi=[],this.activeEle=[],this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"CheckBoxSelection"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlur,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),t.EventHandler.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlur),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),t.EventHandler.remove(document,"mousedown",this.onDocumentClick))},e.prototype.listOption=function(e){var i=this;if(t.isNullOrUndefined(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(e){i.checboxCreate(e)};else{var s=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(e){i.checboxCreate(e),s.apply(i,[e])}}},e.prototype.setPlaceholder=function(e){n.Input.setPlaceholder(e.filterBarPlaceholder,this.filterInput)},e.prototype.checboxCreate=function(e){var i;if(i=t.isNullOrUndefined(e.item)?e:e.item,this.parent.enableGroupCheckBox||"e-list-group-item "!==i.className&&"e-list-group-item"!==i.className){var s=o.createCheckBox(this.parent.createElement,!0),l=t.select("div.e-icons",i);i.getAttribute("data-uid");i.insertBefore(s,i.childNodes[t.isNullOrUndefined(l)?0:1]),t.select(".e-frame",s);t.select(".e-frame",s);return this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),i}return i},e.prototype.setSelectAll=function(){this.parent.showSelectAll?(t.isNullOrUndefined(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:"e-selectall-parent"}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(t.isNullOrUndefined(this.parent.filterParent)?t.append([this.checkAllParent],this.parent.popupWrapper):t.append([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(t.isNullOrUndefined(this.parent.filterParent)?t.prepend([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),t.EventHandler.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):t.isNullOrUndefined(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.listSelection=function(e){var i;if(i=t.isNullOrUndefined(e.e)?e.li.lastElementChild.childNodes[1]:t.isNullOrUndefined(e.e.target)?e.li.querySelector(".e-checkbox-wrapper").childNodes[1]:e.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(e.e.target))?e.e.target:e.li.querySelector(".e-checkbox-wrapper").childNodes[1],(this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(i=e.li.firstElementChild.childNodes[1]),t.isNullOrUndefined(i)||(this.checkWrapper=t.closest(i,".e-checkbox-wrapper")),!t.isNullOrUndefined(this.checkWrapper)){var s=t.select(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,s.classList.contains(J),e.li,e.e,!1)}},e.prototype.validateCheckNode=function(e,t,i,s,l){this.changeState(e,t?"uncheck":"check",s,!0,l)},e.prototype.clickHandler=function(e){var i;i=e.currentTarget.classList.contains(this.checkAllParent.className)?e.currentTarget.firstElementChild.lastElementChild:e.currentTarget,this.checkWrapper=t.closest(i,".e-checkbox-wrapper");if(!t.isNullOrUndefined(this.checkWrapper)){var s=t.select(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,s.classList.contains(J),null,e,!0)}e.preventDefault()},e.prototype.changeState=function(e,i,s,l,n){var o,r=e.getElementsByClassName("e-frame")[0];"check"!==i||r.classList.contains(J)?"uncheck"===i&&(r.classList.contains(J)||r.classList.contains("e-stop"))&&(t.removeClass([r],[J,"e-stop"]),o="false",n&&(this.parent.selectAllItems(!1,s),this.setLocale())):(r.classList.remove("e-stop"),r.classList.add(J),o="true",n&&(this.parent.selectAllItems(!0,s),this.setLocale(!0))),o="check"===i?"true":"uncheck"===i?"false":o,t.isNullOrUndefined(o)||e.setAttribute("aria-checked",o)},e.prototype.setSearchBox=function(e){if(t.isNullOrUndefined(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:"e-filter-parent"}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:"e-input-filter"}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var i=!1;return t.Browser.isDevice&&(i=!0,this.parent.mobFilter=!1),this.filterInputObj=n.Input.createInput({element:this.filterInput,buttons:i?["e-input-group-icon e-back-icon e-icons","e-input-group-icon e-clear-icon e-icons"]:["e-input-group-icon e-clear-icon e-icons"],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),t.append([this.filterInputObj.container],this.parent.filterParent),t.prepend([this.parent.filterParent],e.popupElement),t.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.parent.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector(".e-clear-icon"),!t.Browser.isDevice&&this.clearIconElement&&(t.EventHandler.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),t.EventHandler.add(this.filterInput,"input",this.parent.onInput,this.parent),t.EventHandler.add(this.filterInput,"keyup",this.parent.KeyUp,this.parent),t.EventHandler.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),t.EventHandler.add(this.filterInput,"blur",this.onBlur,this),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},e.prototype.clickOnBackIcon=function(e){this.parent.hidePopup(),t.removeClass([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.inputElement.focus()},e.prototype.clearText=function(e){this.parent.targetInputElement.value="",this.parent.refreshPopup(),this.parent.refreshListItems(null),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),this.setReorder(e),e.preventDefault()},e.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add("e-ddl-device"),this.parent.popupObj.element.classList.add("e-ddl-device-filter"),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),t.attributes(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),t.addClass([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector(".e-clear-icon"),this.clearIconElement.style.visibility="hidden",t.EventHandler.add(this.backIconElement,"click",this.clickOnBackIcon,this),t.EventHandler.add(this.clearIconElement,"click",this.clearText,this)},e.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-e+"px",this.parent.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector(".e-clear-icon");t.detach(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},e.prototype.targetElement=function(){return this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=""===this.parent.targetInputElement.value?"hidden":"visible",this.parent.targetInputElement.value},e.prototype.onBlur=function(e){if(!this.parent.element.classList.contains("e-listbox")){var i=void 0;if(this.parent.keyAction)return;if(t.Browser.isIE&&(i=!t.isNullOrUndefined(e)&&e.target),t.Browser.isIE||(i=!t.isNullOrUndefined(e)&&e.relatedTarget),document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(i)&&!t.Browser.isIE&&this.filterInput)return void this.filterInput.focus();if(this.parent.scrollFocusStatus&&this.filterInput)return e.preventDefault(),this.filterInput.focus(),void(this.parent.scrollFocusStatus=!1);document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(e,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.trigger("blur"),this.parent.focused=!0),!document.body.contains(this.parent.popupObj.element)||this.parent.popupObj.element.classList.contains("e-popup-close")||t.Browser.isDevice||this.parent.hidePopup()}},e.prototype.onDocumentClick=function(e){if(!this.parent.element.classList.contains("e-listbox")){var i=e.target;!t.isNullOrUndefined(this.parent.popupObj)&&t.closest(i,"#"+this.parent.popupObj.element.id)&&e.preventDefault(),!t.isNullOrUndefined(this.parent.popupObj)&&t.closest(i,"#"+this.parent.popupObj.element.id)||this.parent.overAllWrapper.contains(e.target)?this.parent.scrollFocusStatus=(t.Browser.isIE||"edge"===t.Browser.info.name)&&document.activeElement===this.filterInput:(this.parent.overAllWrapper.classList.contains(k.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlur(),this.parent.focused=!0),this.parent.overAllWrapper.contains(e.target)||!this.parent.overAllWrapper.classList.contains("e-input-focus")||this.parent.isPopupOpen()||(t.Browser.isIE?this.parent.onBlur():this.parent.onBlur(e)),this.filterInput===i&&this.filterInput.focus()}},e.prototype.getFocus=function(e){if(this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.keyAction&&"clear"!==e.value)return void(this.parent.keyAction=!1);"focus"===e.value&&(this.filterInput.focus(),this.parent.removeFocus(),t.EventHandler.remove(this.parent.list,"keydown",this.parent.onKeyDown)),"clear"===e.value&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden")},e.prototype.checkSelectAll=function(e){"check"===e.value&&"true"!==this.checkAllParent.getAttribute("aria-checked")&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale(!0)),"uncheck"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale())},e.prototype.setLocale=function(e){if("Select All"!==this.parent.selectAllText||"Unselect All"!==this.parent.unSelectAllText){var i=e?this.parent.unSelectAllText:this.parent.selectAllText,s=void 0;this.selectAllSpan.textContent="";for(var l=0,n=(s=t.compile(i))({});l<n.length;l++){var o=n[l];this.selectAllSpan.textContent=o.textContent}}else{var r={selectAllText:"Select All",unSelectAllText:"Unselect All"},a=new t.L10n(this.parent.getLocaleName(),{},this.parent.locale);""===a.getConstant("selectAllText")&&(a=new t.L10n("dropdowns",r,this.parent.locale)),this.selectAllSpan.textContent=e?a.getConstant("unSelectAllText"):a.getConstant("selectAllText")}},e.prototype.getActiveList=function(e){e.li.classList.contains("e-active")?this.activeLi.push(e.li.cloneNode(!0)):this.activeLi.splice(e.index,1)},e.prototype.setReorder=function(e){if(this.parent.enableSelectionOrder&&!t.isNullOrUndefined(this.parent.value)){var i=this.parent.ulElement.querySelectorAll("li.e-active").length,s=void 0,l=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});this.parent.createElement("div");i>0&&(t.append(this.parent.ulElement.querySelectorAll("li.e-active"),l),s=this.parent.ulElement.querySelectorAll("li.e-active"),t.addClass(s,"e-reorder-hide"),t.prepend([l],this.parent.list)),this.parent.focusAtFirstListItem()}},e}(),Y=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),$=function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},Z=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Y(i,e),$([t.Property("Multiple")],i.prototype,"mode",void 0),$([t.Property(!1)],i.prototype,"showCheckbox",void 0),$([t.Property(!1)],i.prototype,"showSelectAll",void 0),$([t.Property("Left")],i.prototype,"checkboxPosition",void 0),i}(t.ChildProperty),ee=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Y(i,e),$([t.Property([])],i.prototype,"items",void 0),$([t.Property("Right")],i.prototype,"position",void 0),i}(t.ChildProperty),te=function(e){function i(t,i){var s=e.call(this,t,i)||this;return s.isValidKey=!1,s.keyDownStatus=!1,s}return Y(i,e),i.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},i.prototype.render=function(){this.initLoad=!0,this.initialSelectedOptions=this.value,e.prototype.render.call(this),this.renderComplete()},i.prototype.initWrapper=function(){var e=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});if(this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-listbox-wrapper"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(e,this.list.firstChild),this.list.getElementsByClassName(s.cssClass.li)[0]&&this.list.getElementsByClassName(s.cssClass.li)[0].classList.remove(k.focus),t.removeClass([this.list],[k.content,k.root]),this.validationAttribute(this.element,e),this.list.setAttribute("role","listbox"),t.attributes(this.list,{role:"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var i=new t.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=i.getConstant("selectAllText"),this.unSelectAllText=i.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},i.prototype.initDraggable=function(){var e=this;this.allowDragAndDrop&&new s.Sortable(this.ulElement,{scope:this.scope,itemClass:s.cssClass.li,dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return e.createElement("span",{className:"e-placeholder"})},helper:function(t){var i=t.sender.cloneNode(!0);return i.style.width=e.getItems()[0].offsetWidth+"px",e.value.length>1&&e.isSelected(i)&&i.appendChild(e.createElement("span",{className:"e-list-badge",innerHTML:e.value.length+""})),i}})},i.prototype.initToolbar=function(){var e,i=this.toolbarSettings.position;if(this.toolbarSettings.items.length){var s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),l=this.createElement("div",{className:"e-listboxtool-wrapper e-"+i.toLowerCase()});this.list.parentElement.insertBefore(l,this.list),l.appendChild("Right"===i?this.list:s),l.appendChild("Right"===i?s:this.list),this.createButtons(s),this.element.id||(this.element.id=t.getUniqueID("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}(e=this.element.getAttribute("data-value"))&&(this.tBListBox=t.getComponent(document.getElementById(e),this.getModuleName()),this.tBListBox.updateToolBarState())},i.prototype.createButtons=function(e){var i,s,l,n=this,r=new t.L10n(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(function(t){l=r.getConstant(t),s=n.createElement("button",{attrs:{type:"button","data-value":t,title:l,"aria-label":l}}),e.appendChild(s),(i=new o.Button({iconCss:"e-icons e-"+t.toLowerCase()},s)).createElement=n.createElement})},i.prototype.validationAttribute=function(t,i){e.prototype.validationAttribute.call(this,t,i),i.required=t.required,t.required=!1},i.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=t.formatUnit(this.height)},i.prototype.setCssClass=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.cssClass&&t.addClass([e],this.cssClass.split(" ")),this.enableRtl&&t.addClass([e],"e-rtl")},i.prototype.setEnable=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?t.removeClass([e],s.cssClass.disabled):t.addClass([e],s.cssClass.disabled)},i.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper",styles:"height:"+t.formatUnit(this.height)})),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),l.createSpinner({target:this.spinner},this.createElement),l.showSpinner(this.spinner)},i.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&l.hideSpinner(this.spinner),this.spinner.parentElement&&t.detach(this.spinner)},i.prototype.onInput=function(){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1},i.prototype.onActionComplete=function(i,s,l){var n;this.allowFiltering&&(n=this.list.getElementsByClassName("e-filter-parent")[0]),e.prototype.onActionComplete.call(this,i,s,l),this.allowFiltering&&!t.isNullOrUndefined(n)&&this.list.insertBefore(n,this.list.firstElementChild),this.initWrapper(),this.setSelection(),this.initDraggable(),this.initLoad&&(this.initToolbarAndStyles(),this.wireEvents(),this.mainList=this.ulElement,this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering()),this.initLoad=!1},i.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},i.prototype.triggerDragStart=function(e){var i,s=this;e=t.extend(this.getDragArgs(e),{dragSelected:!0}),t.Browser.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",e,function(e){s.allowDragAll=e.dragSelected,s.allowDragAll||(i=s.ulElement.getElementsByClassName("e-list-badge")[0])&&t.detach(i)})},i.prototype.triggerDrag=function(e){this.trigger("drag",this.getDragArgs(e));var t=this.getComponent(e.target);t&&0===t.listData.length&&(t.ulElement.innerHTML="")},i.prototype.dragEnd=function(e){var i,s,l=this,n=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),o=this.getComponent(e.droppedElement),r=t.extend({},this.getDragArgs({target:e.droppedElement},!0),{target:e.target});if(t.Browser.isIos&&(this.list.style.overflow=""),o===this){var a=this.ulElement;i=[].slice.call(this.listData);var h=e.currentIndex=this.getCurIdx(this,e.currentIndex);i.splice(h,0,i.splice(i.indexOf(this.getDataByValue(n)),1)[0]),this.allowDragAll&&(Array.prototype.indexOf.call(this.value,n)>-1?this.value:[n]).forEach(function(e){if(e!==n){var t=i.indexOf(l.getDataByValue(e));t>h&&h++,i.splice(h,0,i.splice(t,1)[0]),a.insertBefore(l.getItems()[l.getIndexByValue(e)],a.getElementsByClassName("e-placeholder")[0])}}),this.listData=i,this.setProperties({dataSource:i},!0)}else{var p,u=e.currentIndex=this.getCurIdx(o,e.currentIndex),c=o.ulElement;if(i=[].slice.call(o.listData),(Array.prototype.indexOf.call(this.value,n)>-1&&this.allowDragAll?this.value:[n]).forEach(function(t){s=l.getDataByValue(t),l.listData.splice(l.listData.indexOf(s),1),i.splice(t===n?e.currentIndex:u,0,s),p=l.getItems()[l.getIndexByValue(t)],l.removeSelected(l,t===n?[e.droppedElement]:[p]),c.insertBefore(p,c.getElementsByClassName("e-placeholder")[0]),u++}),this.updateSelectedOptions(),this.fields.groupBy&&(this.ulElement.innerHTML=this.renderItems(this.listData,this.fields).innerHTML,this.setSelection()),"None"!==o.sortOrder||this.selectionSettings.showCheckbox!==o.selectionSettings.showCheckbox||o.fields.groupBy){var d=t.getComponent(c,"sortable");c.innerHTML=o.renderItems(i,o.fields).innerHTML,c.appendChild(d.placeHolderElement),c.appendChild(e.helper),o.setSelection()}this.setProperties({dataSource:this.listData},!0),o.listData=i,o.setProperties({dataSource:o.listData},!0),0===this.listData.length&&this.l10nUpdate()}this.trigger("drop",r)},i.prototype.removeSelected=function(e,i){e.selectionSettings.showCheckbox?i.forEach(function(e){e.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):t.removeClass(i,s.cssClass.selected)},i.prototype.getCurIdx=function(e,t){return e.fields.groupBy&&(t-=[].slice.call(e.ulElement.children).slice(0,t).filter(function(e){return e.classList.contains(s.cssClass.group)}).length),t},i.prototype.getComponent=function(e){var i,s="EJS-LISTBOX"===this.element.tagName?t.closest(e,".e-listbox"):t.closest(e,".e-listbox-wrapper")&&t.closest(e,".e-listbox-wrapper").querySelector(".e-listbox");return s&&(i=t.getComponent(s,this.getModuleName())),i},i.prototype.listOption=function(i,s){return this.listCurrentOptions=e.prototype.listOption.call(this,i,s),this.listCurrentOptions=t.extend({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},i.prototype.triggerBeforeItemRender=function(e){e.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:e.item,item:e.curData})},i.prototype.requiredModules=function(){var e=[];return this.selectionSettings.showCheckbox&&e.push({member:"CheckBoxSelection",args:[this]}),e},i.prototype.enableItems=function(e,i){var l=this;void 0===i&&(i=!0);var n;e.forEach(function(e){n=l.findListElement(l.list,"li","data-value",l.getValueByText(e)),i?(t.removeClass([n],s.cssClass.disabled),n.removeAttribute("aria-disabled")):(t.addClass([n],s.cssClass.disabled),n.setAttribute("aria-disabled","true"))})},i.prototype.selectItems=function(e,t){void 0===t&&(t=!0),this.setSelection(e,t,!0),this.updateSelectedOptions()},i.prototype.selectAll=function(e){void 0===e&&(e=!0),this.selectAllItems(e)},i.prototype.addItems=function(t,i){e.prototype.addItem.call(this,t,i)},i.prototype.selectAllItems=function(e,t){var i=this;if([].slice.call(this.getItems()).forEach(function(t){if(!t.classList.contains(s.cssClass.disabled))if(i.selectionSettings.showCheckbox){var l=t.getElementsByClassName("e-check")[0];(!l&&e||l&&!e)&&(i.notify("updatelist",{li:t}),i.maximumSelectionLength>=i.list.querySelectorAll(".e-list-item span.e-check").length&&i.checkMaxSelection())}else e?t.classList.add(s.cssClass.selected):t.classList.remove(s.cssClass.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var l=this.list.getElementsByTagName("li"),n=0;if(e){var o=this;for(n=0;n<l.length;n++)!function(){var e=o.getFormattedValue(l[n].getAttribute("data-value"));o.value.some(function(t){return t===e})||o.value.push(o.getFormattedValue(l[n].getAttribute("data-value")))}()}else{var r=this;for(n=0;n<l.length;n++)!function(){var e=r.getFormattedValue(l[n].getAttribute("data-value"));r.value=r.value.filter(function(t){return t!==e})}()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),t)},i.prototype.updateMainList=function(){var e=this.mainList.childElementCount,t=this.ulElement.childElementCount;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||e!==t){var i=0,s=0,l=0;for(i;i<this.mainList.childElementCount;){for(s;s<this.value.length;s++)this.mainList.getElementsByTagName("li")[i].getAttribute("data-value")===this.value[s]&&l++;!l&&this.selectionSettings.showCheckbox&&this.mainList.getElementsByTagName("li")[i].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&l&&e!==t?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[i]),i=0):i++,l=0,s=0}}},i.prototype.wireEvents=function(){var e=t.closest(this.element,"form"),i="EJS-LISTBOX"===this.element.tagName?this.element:this.list;t.EventHandler.add(this.list,"click",this.clickHandler,this),t.EventHandler.add(i,"keydown",this.keyDownHandler,this),t.EventHandler.add(i,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&t.EventHandler.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&t.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),e&&t.EventHandler.add(e,"reset",this.formResetHandler,this)},i.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&t.EventHandler.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},i.prototype.unwireEvents=function(){var e=t.closest(this.element,"form"),i="EJS-LISTBOX"===this.element.tagName?this.element:this.list;t.EventHandler.remove(this.list,"click",this.clickHandler),t.EventHandler.remove(i,"keydown",this.keyDownHandler),t.EventHandler.remove(i,"focusout",this.focusOutHandler),this.toolbarSettings.items.length&&t.EventHandler.remove(this.getToolElem(),"click",this.toolbarClickHandler),e&&t.EventHandler.remove(e,"reset",this.formResetHandler)},i.prototype.clickHandler=function(e){this.selectHandler(e)},i.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li."+k.li).length,t=this.getSelectedItems().length;this.showSelectAll&&e&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:e===t?"check":"uncheck"})},i.prototype.setFiltering=function(){if(t.isNullOrUndefined(this.filterParent)){this.filterParent=this.createElement("span",{className:"e-filter-parent"});var e=this.createElement("input",{attrs:{type:"text"},className:"e-input-filter"});this.element.parentNode.insertBefore(e,this.element);var i=n.Input.createInput({element:e},this.createElement);return t.append([i.container],this.filterParent),t.prepend([this.filterParent],this.list),t.attributes(e,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),t.EventHandler.add(e,"input",this.onInput,this),t.EventHandler.add(e,"keyup",this.KeyUp,this),t.EventHandler.add(e,"keydown",this.onKeyDown,this),i}},i.prototype.selectHandler=function(e,i){var l,n=!0,o=t.closest(e.target,"."+s.cssClass.li),r=[o];if(o){if(l=[].slice.call(o.parentElement.children).indexOf(o),this.selectionSettings.showCheckbox?n=!o.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(e.ctrlKey||t.Browser.isDevice)&&this.isSelected(o)?(o.classList.remove(s.cssClass.selected),o.removeAttribute("aria-selected"),n=!1):"Multiple"===this.selectionSettings.mode&&(e.ctrlKey||t.Browser.isDevice)||(this.getSelectedItems().forEach(function(e){e.removeAttribute("aria-selected")}),t.removeClass(this.getSelectedItems(),s.cssClass.selected)),e.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?r=[].slice.call(o.parentElement.children).slice(Math.min(l,this.prevSelIdx),Math.max(l,this.prevSelIdx)+1).filter(function(e){return e.classList.contains(s.cssClass.li)}):this.prevSelIdx=[].slice.call(o.parentElement.children).indexOf(o),n&&(this.selectionSettings.showCheckbox||t.addClass(r,s.cssClass.selected),r.forEach(function(e){e.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",o.id)),i||!(this.maximumSelectionLength>this.value.length)&&n||!(this.maximumSelectionLength>=this.value.length)&&n||this.maximumSelectionLength<this.value.length||this.notify("updatelist",{li:o,e:e}),this.allowFiltering&&!i){var a=this.getFormattedValue(o.getAttribute("data-value"));n?this.value.push(a):this.value=this.value.filter(function(e){return e!==a}),document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),e),this.checkMaxSelection()}},i.prototype.triggerChange=function(e,t){this.trigger("change",{elements:e,items:this.getDataByElems(e),value:this.value,event:t})},i.prototype.getDataByElems=function(e){var t=this,i=[];return e.forEach(function(e){i.push(t.getDataByValue(e.getAttribute("data-value")))}),i},i.prototype.checkMaxSelection=function(){var e=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){var t=0,i=void 0;for(i=this.list.getElementsByClassName("e-list-item"),t;t<i.length;t++)i[t].querySelector(".e-frame.e-check")||(e===this.maximumSelectionLength?i[t].classList.add("e-disable"):i[t].classList.contains("e-disable")&&i[t].classList.remove("e-disable"))}},i.prototype.toolbarClickHandler=function(e){var i=t.closest(e.target,"button");if(i)switch(i.getAttribute("data-value")){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveTo();break;case"moveFrom":this.moveFrom();break;case"moveAllTo":this.moveAllTo();break;case"moveAllFrom":this.moveAllFrom()}},i.prototype.moveUpDown=function(e,t){var i=this,l=this.getSelectedItems();e&&this.isSelected(this.ulElement.firstElementChild)||!e&&this.isSelected(this.ulElement.lastElementChild)||((e?l:l.reverse()).forEach(function(t){var l=Array.prototype.indexOf.call(i.ulElement.children,t);s.moveTo(i.ulElement,i.ulElement,[l],e?l-1:l+2),i.changeData(l,e?l-1:l+1)}),l[0].focus(),!t&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(e?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())},i.prototype.moveTo=function(){this.moveData(this,this.getScopedListBox())},i.prototype.moveFrom=function(){this.moveData(this.getScopedListBox(),this)},i.prototype.moveData=function(e,i,l){var n=0,o=[],r=[],a=[].slice.call(e.listData),h=[].slice.call(i.listData),p=[],u=e.getSelectedItems(),c="None"!==i.sortOrder||i.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||i.fields.groupBy;if(e.getSelectedItems().length!==e.value.length){var d=0;for(e.value=[],d;d<e.getSelectedItems().length;d++)e.value[d]=e.getSelectedItems()[d].getAttribute("data-value")}if(u.length){this.removeSelected(e,u),e.allowFiltering&&(e.sortedData=e.dataSource),u.forEach(function(t,i){o.push(Array.prototype.indexOf.call(e.ulElement.children,t)),r.push(Array.prototype.indexOf.call(a,e.sortedData[o[i]]))}),0===i.listData.length&&(i.ulElement.innerHTML=""),r.sort().reverse().forEach(function(e){a.splice(e,1)[0]}),o.slice().reverse().forEach(function(t){if(e.mainList.childElementCount===e.ulElement.childElementCount)p.push(e.sortedData.splice(t,1)[0]);else if(e.sortedData=e.sortedData.filter(function(i){return!(i.Country===e.ulElement.getElementsByTagName("li")[t].getAttribute("data-value"))}),0===n){var s,l;for(s=0;s<e.sortedData.length;s++)for(l=0;l<e.value.length;l++)e.sortedData[s].text===e.value[l]&&(i.dataSource.push(e.sortedData[s]),e.sortedData=e.sortedData.filter(function(t){return!(t.text===e.value[l])}));n++}e.setProperties({dataSource:e.sortedData},!0)}),i.sortedData.length!==i.dataSource.length&&(i.setProperties({sortedData:i.dataSource},!0),h=i.dataSource),c?e.fields.groupBy?e.ulElement.innerHTML=e.renderItems(a,e.fields).innerHTML:u.forEach(function(e){t.detach(e)}):s.moveTo(e.ulElement,i.ulElement,o),i.mainList.childElementCount!==i.dataSource.length&&(i.mainList=i.ulElement),e.updateMainList();var m=e.ulElement.childElementCount,f=void 0,v=void 0;1===u.length&&m&&!e.selectionSettings.showCheckbox&&(v=m<=o[0]?m-1:o[0],f=e.ulElement.children[v],e.ulElement.children[e.getValidIndex(f,v,m===o[0]?38:40)].classList.add(s.cssClass.selected)),l&&this.list.focus(),a=e.dataSource,e.listData=a,e.setProperties({dataSource:a},!0),h=h.concat(p.reverse()),i.listData=h,i.setProperties({dataSource:h},!0),c?(i.ulElement.innerHTML=i.renderItems(h,i.fields).innerHTML,i.setSelection()):i.sortedData=h,e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}1===e.value.length&&e.getSelectedItems().length&&(e.value[0]=e.getSelectedItems()[0].innerHTML)},i.prototype.moveAllTo=function(){this.moveAllData(this,this.getScopedListBox())},i.prototype.moveAllFrom=function(){this.moveAllData(this.getScopedListBox(),this)},i.prototype.moveAllData=function(e,t,i){var l=[].slice.call(t.listData),n="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy;this.removeSelected(e,e.getSelectedItems()),0===t.listData.length&&(t.ulElement.innerHTML=""),n?e.ulElement.innerHTML="":s.moveTo(e.ulElement,t.ulElement,Array.apply(null,{length:e.ulElement.childElementCount}).map(Number.call,Number)),i&&this.list.focus(),l=l.concat(e.sortedData.filter(function(e){return!0!==e.isHeader})),t.listData=l,e.listData=e.sortedData=[],t.setProperties({dataSource:l},!0),e.setProperties({dataSource:[]},!0),n?t.ulElement.innerHTML=t.renderItems(l,t.fields).innerHTML:t.sortedData=l,e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()},i.prototype.changeData=function(e,t){var i=[].slice.call(this.listData);i.splice(t,0,i.splice(e,1)[0]),this.listData=i,this.setProperties({dataSource:i},!0)},i.prototype.getSelectedItems=function(){var e=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(function(i){e.push(t.closest(i,"."+s.cssClass.li))}):e=[].slice.call(this.ulElement.getElementsByClassName(s.cssClass.selected)),e},i.prototype.getScopedListBox=function(){var e,i=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(function(s){t.getComponent(s,i.getModuleName())&&(e=t.getComponent(s,i.getModuleName()))}),e},i.prototype.getDragArgs=function(e,t){var i=this.getSelectedItems();return i.length?(i.pop(),t&&i.push(e.target)):i=[e.target],{elements:i,items:this.getDataByElems(i)}},i.prototype.onKeyDown=function(e){this.keyDownHandler(e)},i.prototype.keyDownHandler=function(e){if([32,35,36,37,38,39,40,65].indexOf(e.keyCode)>-1&&!this.allowFiltering)if(e.preventDefault(),32===e.keyCode)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey});else if(65===e.keyCode&&e.ctrlKey)this.selectAll();else if((38===e.keyCode||40===e.keyCode)&&e.ctrlKey&&e.shiftKey)this.moveUpDown(38===e.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==e.keyCode&&37!==e.keyCode||!e.ctrlKey)37!==e.keyCode&&39!==e.keyCode&&this.upDownKeyHandler(e);else{var t=this.tBListBox||this.getScopedListBox();39===e.keyCode?e.shiftKey?this.moveAllData(this,t,!0):this.moveData(this,t,!0):e.shiftKey?this.moveAllData(t,this,!0):this.moveData(t,this,!0)}},i.prototype.upDownKeyHandler=function(e){var i=this.ulElement,l=40===e.keyCode||36===e.keyCode?0:i.childElementCount-1,n=i.getElementsByClassName("e-focused")[0]||i.getElementsByClassName(s.cssClass.selected)[0];if(n){if(35!==e.keyCode&&36!==e.keyCode&&(l=Array.prototype.indexOf.call(i.children,n),40===e.keyCode?l++:l--,l<0||l>i.childElementCount-1))return;t.removeClass([n],"e-focused")}var o=i.children[l];if(-1===(l=this.getValidIndex(o,l,e.keyCode)))return void t.addClass([n],"e-focused");i.children[l].focus(),i.children[l].classList.add("e-focused"),e.ctrlKey||this.selectHandler({target:i.children[l],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},!0)},i.prototype.KeyUp=function(e){var i=this,s=String.fromCharCode(e.keyCode).match(/\w/);if(t.isNullOrUndefined(s)||(this.isValidKey=!0),this.isValidKey=8===e.keyCode||this.isValidKey,this.isValidKey){this.isValidKey=!1,e.keyCode;this.targetElement(),e.keyCode;if(this.allowFiltering){var l={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,t,s){l.cancel||(i.isFiltered=!0,i.remoteFilterAction=!0,i.dataUpdater(e,t,s))},event:e,cancel:!1};if(this.trigger("filtering",l),l.cancel)return;this.isFiltered||l.preventDefaultAction||this.dataUpdater(this.dataSource,null,this.fields),this.list.getElementsByClassName("e-input-filter")[0].focus()}}},i.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value},i.prototype.dataUpdater=function(e,t,i){this.isDataFetched=!1;if(""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(s,this.dataSource),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(e,i,t)},i.prototype.focusOutHandler=function(){var e=this.list.getElementsByClassName("e-focused")[0];e&&e.classList.remove("e-focused")},i.prototype.getValidIndex=function(e,t,i){var l=this.ulElement;return(e.classList.contains("e-disabled")||e.classList.contains(s.cssClass.group))&&(40===i||36===i?t++:t--),t<0||t===l.childElementCount?-1:(((e=l.children[t]).classList.contains("e-disabled")||e.classList.contains(s.cssClass.group))&&(t=this.getValidIndex(e,t,i)),t)},i.prototype.updateSelectedOptions=function(){var e=this,t=[];this.getSelectedItems().forEach(function(i){i.classList.contains("e-grabbed")||t.push(e.getFormattedValue(i.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount&&this.setProperties({value:t},!0),this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState(),this.allowFiltering&&this.list.getElementsByClassName("e-input-filter")[0].focus()},i.prototype.clearSelection=function(e){var t=this;if(void 0===e&&(e=this.value),this.selectionSettings.showCheckbox){var i;this.getSelectedItems().forEach(function(s){i=t.getFormattedValue(s.getAttribute("data-value")),e.indexOf(i)<0&&(s.getElementsByClassName("e-check")[0].classList.remove("e-check"),s.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),s.removeAttribute("aria-selected"))})}},i.prototype.setSelection=function(e,t,i){var l=this;void 0===e&&(e=this.value),void 0===t&&(t=!0),void 0===i&&(i=!1);var n,o;e&&e.forEach(function(e){(n=l.list.querySelector('[data-value="'+(i?l.getValueByText(e):e)+'"]'))&&(o=l.selectionSettings.showCheckbox?n.getElementsByClassName("e-frame")[0].classList.contains("e-check"):n.classList.contains("e-selected"),(!t&&o||t&&!o&&n)&&(l.selectionSettings.showCheckbox?l.notify("updatelist",{li:n}):t?(n.classList.add(s.cssClass.selected),n.setAttribute("aria-selected","true")):(n.classList.remove(s.cssClass.selected),n.removeAttribute("aria-selected"))))}),this.updateSelectTag()},i.prototype.updateSelectTag=function(){var e=this.getSelectTag();e.innerHTML="",this.value&&Array.prototype.forEach.call(this.value,function(t){e.innerHTML+='<option selected value="'+t+'"></option>'}),this.checkSelectAll()},i.prototype.updateToolBarState=function(){var e=this;if(this.toolbarSettings.items.length){var t=this.getScopedListBox(),i=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(function(s){var l=i.querySelector('[data-value="'+s+'"]');switch(s){case"moveAllTo":l.disabled=!e.ulElement.childElementCount;break;case"moveAllFrom":l.disabled=!t.ulElement.childElementCount;break;case"moveFrom":l.disabled=!t.value||!t.value.length;break;case"moveUp":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[0]));break;case"moveDown":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[e.ulElement.childElementCount-1]));break;default:l.disabled=!e.value||!e.value.length}})}},i.prototype.setCheckboxPosition=function(){var e=this.list;this.initLoad||"Left"!==this.selectionSettings.checkboxPosition||e.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&e.classList.add("e-right")},i.prototype.showCheckbox=function(e){var i=0,s=this.list.lastElementChild.querySelectorAll("li"),l=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(e){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll){var n=new t.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=n.getConstant("selectAllText"),this.unSelectAllText=n.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.selectionSettings.showSelectAll&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]),i;i<l;i++)s[i].removeChild(s[i].getElementsByClassName("e-checkbox-wrapper")[0]),s[i].hasAttribute("aria-selected")&&s[i].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},i.prototype.isSelected=function(e){return!t.isNullOrUndefined(e)&&(e.classList.contains(s.cssClass.selected)||null!==e.querySelector(".e-check"))},i.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},i.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},i.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},i.prototype.getModuleName=function(){return"listbox"},i.prototype.getPersistData=function(){return this.addOnPersist(["value"])},i.prototype.getLocaleName=function(){return"listbox"},i.prototype.destroy=function(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),t.detach(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),e.prototype.destroy.call(this)},i.prototype.onPropertyChanged=function(i,l){var n=this.toolbarSettings.items.length?this.list.parentElement:this.list;e.prototype.onPropertyChanged.call(this,i,l),this.setUpdateInitial(["fields","query","dataSource"],i);for(var o=0,r=Object.keys(i);o<r.length;o++)switch(r[o]){case"cssClass":l.cssClass&&t.removeClass([n],l.cssClass.split(" ")),i.cssClass&&t.addClass([n],i.cssClass.split(" "));break;case"enableRtl":i.enableRtl?n.classList.add("e-rtl"):n.classList.remove("e-rtl");break;case"value":t.removeClass(this.list.querySelectorAll("."+s.cssClass.selected),s.cssClass.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":i.allowDragAndDrop?this.initDraggable():t.getComponent(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null);break;case"scope":this.allowDragAndDrop&&(t.getComponent(this.ulElement,"sortable").scope=i.scope),this.toolbarSettings.items.length&&(l.scope&&(t.getComponent(document.querySelector(l.scope),this.getModuleName()).tBListBox=null),i.scope&&(t.getComponent(document.querySelector(i.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var a=void 0,h=i.toolbarSettings.position,p=this.getToolElem();h&&(t.removeClass([n],["e-right","e-left"]),n.classList.add("e-"+h.toLowerCase()),"Left"===h?n.insertBefore(p,this.list):n.appendChild(p)),i.toolbarSettings.items&&(l.toolbarSettings.items.length&&((a=this.list.parentElement).parentElement.insertBefore(this.list,a),t.detach(a)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var u=i.selectionSettings.showSelectAll,c=i.selectionSettings.showCheckbox;if(!t.isNullOrUndefined(u)){if(this.showSelectAll=u,this.showSelectAll){var d=new t.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=d.getConstant("selectAllText"),this.unSelectAllText=d.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}t.isNullOrUndefined(c)||this.showCheckbox(c),this.selectionSettings.showCheckbox&&this.setCheckboxPosition()}},$([t.Property("")],i.prototype,"cssClass",void 0),$([t.Property([])],i.prototype,"value",void 0),$([t.Property("")],i.prototype,"height",void 0),$([t.Property(!1)],i.prototype,"allowDragAndDrop",void 0),$([t.Property(1e3)],i.prototype,"maximumSelectionLength",void 0),$([t.Property(!1)],i.prototype,"allowFiltering",void 0),$([t.Property("")],i.prototype,"scope",void 0),$([t.Property("StartsWith")],i.prototype,"filterType",void 0),$([t.Property(!0)],i.prototype,"ignoreCase",void 0),$([t.Event()],i.prototype,"beforeItemRender",void 0),$([t.Event()],i.prototype,"filtering",void 0),$([t.Event()],i.prototype,"select",void 0),$([t.Event()],i.prototype,"change",void 0),$([t.Event()],i.prototype,"dragStart",void 0),$([t.Event()],i.prototype,"drag",void 0),$([t.Event()],i.prototype,"drop",void 0),$([t.Event()],i.prototype,"dataBound",void 0),$([t.Property(null)],i.prototype,"groupTemplate",void 0),$([t.Property("No Records Found")],i.prototype,"noRecordsTemplate",void 0),$([t.Property("The Request Failed")],i.prototype,"actionFailureTemplate",void 0),$([t.Property(1e3)],i.prototype,"zIndex",void 0),$([t.Property(!1)],i.prototype,"ignoreAccent",void 0),$([t.Complex({},ee)],i.prototype,"toolbarSettings",void 0),$([t.Complex({},Z)],i.prototype,"selectionSettings",void 0),i=$([t.NotifyPropertyChanges],i)}(A);return Q.Inject(X),te.Inject(X),e.incrementalSearch=r,e.Search=a,e.highlightSearch=h,e.revertHighlightSearch=u,e.FieldSettings=w,e.dropDownBaseClasses=k,e.DropDownBase=A,e.dropDownListClasses=B,e.DropDownList=D,e.ComboBox=F,e.AutoComplete=W,e.MultiSelect=Q,e.CheckBoxSelection=X,e.SelectionSettings=Z,e.ToolbarSettings=ee,e.ListBox=te,e}({},ej.base,ej.data,ej.lists,ej.popups,ej.inputs,ej.buttons),this.ejs=ej;
//# sourceMappingURL=ej2-dropdowns.min.js.map

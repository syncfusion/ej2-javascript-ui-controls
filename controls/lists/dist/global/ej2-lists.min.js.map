{"version":3,"file":"ej2-lists.min.js","sources":["../../src/common/list-base.js","../../src/list-view/list-view.js","../../src/list-view/virtualization.js"],"sourcesContent":["import { extend, merge, isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { attributes, prepend, isVisible, append, addClass } from '@syncfusion/ej2-base';\nimport { compile } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nexport var cssClass = {\n    li: 'e-list-item',\n    ul: 'e-list-parent e-ul',\n    group: 'e-list-group-item',\n    icon: 'e-list-icon',\n    text: 'e-list-text',\n    check: 'e-list-check',\n    checked: 'e-checked',\n    selected: 'e-selected',\n    expanded: 'e-expanded',\n    textContent: 'e-text-content',\n    hasChild: 'e-has-child',\n    level: 'e-level',\n    url: 'e-list-url',\n    collapsible: 'e-icon-collapsible',\n    disabled: 'e-disabled',\n    image: 'e-list-img',\n    iconWrapper: 'e-icon-wrapper'\n};\n/**\n * Base List Generator\n */\nexport var ListBase;\n(function (ListBase) {\n    /**\n     * Default mapped fields.\n     */\n    ListBase.defaultMappedFields = {\n        id: 'id',\n        text: 'text',\n        url: 'url',\n        value: 'value',\n        isChecked: 'isChecked',\n        enabled: 'enabled',\n        expanded: 'expanded',\n        selected: 'selected',\n        iconCss: 'iconCss',\n        child: 'child',\n        isVisible: 'isVisible',\n        hasChildren: 'hasChildren',\n        tooltip: 'tooltip',\n        htmlAttributes: 'htmlAttributes',\n        urlAttributes: 'urlAttributes',\n        imageAttributes: 'imageAttributes',\n        imageUrl: 'imageUrl',\n        groupBy: null\n    };\n    var defaultAriaAttributes = {\n        level: 1,\n        listRole: 'presentation',\n        itemRole: 'presentation',\n        groupItemRole: 'group',\n        itemText: 'list-item',\n        wrapperRole: 'presentation'\n    };\n    var defaultListBaseOptions = {\n        showCheckBox: false,\n        showIcon: false,\n        expandCollapse: false,\n        fields: ListBase.defaultMappedFields,\n        ariaAttributes: defaultAriaAttributes,\n        listClass: '',\n        itemClass: '',\n        processSubChild: false,\n        sortOrder: 'None',\n        template: null,\n        groupTemplate: null,\n        headerTemplate: null,\n        expandIconClass: 'e-icon-collapsible',\n        moduleName: 'list',\n        expandIconPosition: 'Right'\n    };\n    /**\n     * Function helps to created and return the UL Li element based on your data.\n     * @param  {{[key:string]:Object}[]|string[]} dataSource - Specifies an array of JSON or String data.\n     * @param  {ListBaseOptions} options? - Specifies the list options that need to provide.\n     */\n    function createList(createElement, dataSource, options, isSingleLevel) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n        var type = typeofData(dataSource).typeof;\n        if (type === 'string' || type === 'number') {\n            return createListFromArray(createElement, dataSource, isSingleLevel, options);\n        }\n        else {\n            return createListFromJson(createElement, dataSource, options, ariaAttributes.level, isSingleLevel);\n        }\n    }\n    ListBase.createList = createList;\n    /**\n     * Function helps to created an element list based on string array input .\n     * @param  {string[]} dataSource - Specifies an array of string data\n     */\n    function createListFromArray(createElement, dataSource, isSingleLevel, options) {\n        var subChild = createListItemFromArray(createElement, dataSource, isSingleLevel, options);\n        return generateUL(createElement, subChild, null, options);\n    }\n    ListBase.createListFromArray = createListFromArray;\n    /**\n     * Function helps to created an element list based on string array input .\n     * @param  {string[]} dataSource - Specifies an array of string data\n     */\n    function createListItemFromArray(createElement, dataSource, isSingleLevel, options) {\n        var subChild = [];\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        cssClass = getModuleClass(curOpt.moduleName);\n        var id = generateId(); // generate id for drop-down-list option.\n        for (var i = 0; i < dataSource.length; i++) {\n            if (isNullOrUndefined(dataSource[i])) {\n                continue;\n            }\n            var li = void 0;\n            if (curOpt.itemCreating && typeof curOpt.itemCreating === 'function') {\n                var curData = {\n                    dataSource: dataSource,\n                    curData: dataSource[i],\n                    text: dataSource[i],\n                    options: curOpt\n                };\n                curOpt.itemCreating(curData);\n            }\n            if (isSingleLevel) {\n                li = generateSingleLevelLI(createElement, dataSource[i], undefined, null, null, [], null, id, i, options);\n            }\n            else {\n                li = generateLI(createElement, dataSource[i], undefined, null, null, options);\n            }\n            if (curOpt.itemCreated && typeof curOpt.itemCreated === 'function') {\n                var curData = {\n                    dataSource: dataSource,\n                    curData: dataSource[i],\n                    text: dataSource[i],\n                    item: li,\n                    options: curOpt\n                };\n                curOpt.itemCreated(curData);\n            }\n            subChild.push(li);\n        }\n        return subChild;\n    }\n    ListBase.createListItemFromArray = createListItemFromArray;\n    /**\n     * Function helps to created an element list based on array of JSON input .\n     * @param  {{[key:string]:Object}[]} dataSource - Specifies an array of JSON data.\n     * @param  {ListBaseOptions} options? - Specifies the list options that need to provide.\n     */\n    // tslint:disable-next-line:max-func-body-length\n    function createListItemFromJson(createElement, dataSource, options, level, isSingleLevel) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        cssClass = getModuleClass(curOpt.moduleName);\n        var fields = extend({}, ListBase.defaultMappedFields, curOpt.fields);\n        var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n        var id;\n        if (level) {\n            ariaAttributes.level = level;\n        }\n        var child = [];\n        var li;\n        if (dataSource && dataSource.length && !isNullOrUndefined(typeofData(dataSource).item) &&\n            !typeofData(dataSource).item.hasOwnProperty(fields.id)) {\n            id = generateId(); // generate id for drop-down-list option.\n        }\n        for (var i = 0; i < dataSource.length; i++) {\n            var fieldData = getFieldValues(dataSource[i], fields);\n            if (isNullOrUndefined(dataSource[i])) {\n                continue;\n            }\n            if (curOpt.itemCreating && typeof curOpt.itemCreating === 'function') {\n                var curData = {\n                    dataSource: dataSource,\n                    curData: dataSource[i],\n                    text: fieldData[fields.text],\n                    options: curOpt,\n                    fields: fields\n                };\n                curOpt.itemCreating(curData);\n            }\n            var curItem = dataSource[i];\n            if (curOpt.itemCreating && typeof curOpt.itemCreating === 'function') {\n                fieldData = getFieldValues(dataSource[i], fields);\n            }\n            if (fieldData.hasOwnProperty(fields.id) && !isNullOrUndefined(fieldData[fields.id])) {\n                id = fieldData.id;\n            }\n            var innerEle = [];\n            if (curOpt.showCheckBox) {\n                innerEle.push(createElement('input', { className: cssClass.check, attrs: { type: 'checkbox' } }));\n            }\n            if (isSingleLevel === true) {\n                if (curOpt.showIcon && fieldData.hasOwnProperty(fields.iconCss) && !isNullOrUndefined(fieldData[fields.iconCss])) {\n                    innerEle.push(createElement('span', { className: cssClass.icon + ' ' + fieldData[fields.iconCss] }));\n                }\n                li = generateSingleLevelLI(createElement, curItem, fieldData, fields, curOpt.itemClass, innerEle, (curItem.hasOwnProperty('isHeader') &&\n                    curItem.isHeader) ? true : false, id, i, options);\n            }\n            else {\n                li = generateLI(createElement, curItem, fieldData, fields, curOpt.itemClass, options);\n                li.classList.add(cssClass.level + '-' + ariaAttributes.level);\n                li.setAttribute('aria-level', ariaAttributes.level.toString());\n                if (fieldData.hasOwnProperty(fields.tooltip)) {\n                    li.setAttribute('title', fieldData[fields.tooltip]);\n                }\n                if (fieldData.hasOwnProperty(fields.htmlAttributes) && fieldData[fields.htmlAttributes]) {\n                    setAttribute(li, fieldData[fields.htmlAttributes]);\n                }\n                if (fieldData.hasOwnProperty(fields.enabled) && fieldData[fields.enabled] === false) {\n                    li.classList.add(cssClass.disabled);\n                }\n                if (fieldData.hasOwnProperty(fields.isVisible) && fieldData[fields.isVisible] === false) {\n                    li.style.display = 'none';\n                }\n                if (fieldData.hasOwnProperty(fields.imageUrl) && !isNullOrUndefined(fieldData[fields.imageUrl])\n                    && !curOpt.template) {\n                    var attr = { src: fieldData[fields.imageUrl] };\n                    merge(attr, fieldData[fields.imageAttributes]);\n                    prepend([createElement('img', { className: cssClass.image, attrs: attr })], li.firstElementChild);\n                }\n                if (curOpt.showIcon && fieldData.hasOwnProperty(fields.iconCss) &&\n                    !isNullOrUndefined(fieldData[fields.iconCss]) && !curOpt.template) {\n                    prepend([createElement('div', { className: cssClass.icon + ' ' + fieldData[fields.iconCss] })], li.firstElementChild);\n                }\n                if (innerEle.length) {\n                    prepend(innerEle, li.firstElementChild);\n                }\n                processSubChild(createElement, fieldData, fields, dataSource, curOpt, li, ariaAttributes.level);\n            }\n            if (curOpt.itemCreated && typeof curOpt.itemCreated === 'function') {\n                var curData = {\n                    dataSource: dataSource,\n                    curData: dataSource[i],\n                    text: fieldData[fields.text],\n                    item: li,\n                    options: curOpt,\n                    fields: fields\n                };\n                curOpt.itemCreated(curData);\n            }\n            child.push(li);\n        }\n        return child;\n    }\n    ListBase.createListItemFromJson = createListItemFromJson;\n    /**\n     * Function helps to created an element list based on array of JSON input .\n     * @param  {{[key:string]:Object}[]} dataSource - Specifies an array of JSON data.\n     * @param  {ListBaseOptions} options? - Specifies the list options that need to provide.\n     */\n    function createListFromJson(createElement, dataSource, options, level, isSingleLevel) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        var li = createListItemFromJson(createElement, dataSource, options, level, isSingleLevel);\n        return generateUL(createElement, li, curOpt.listClass, options);\n    }\n    ListBase.createListFromJson = createListFromJson;\n    /**\n     * Return the next or previous visible element.\n     * @param  {Element[]|NodeList} elementArray - An element array to find next or previous element.\n     * @param  {Element} li - An element to find next or previous after this element.\n     * @param  {boolean} isPrevious? - Specify when the need get previous element from array.\n     */\n    function getSiblingLI(elementArray, element, isPrevious) {\n        cssClass = getModuleClass(defaultListBaseOptions.moduleName);\n        if (!elementArray || !elementArray.length) {\n            return void 0;\n        }\n        var siblingLI;\n        var liIndex;\n        var liCollections = Array.prototype.slice.call(elementArray);\n        if (element) {\n            liIndex = indexOf(element, liCollections);\n        }\n        else {\n            liIndex = (isPrevious === true ? liCollections.length : -1);\n        }\n        siblingLI = liCollections[liIndex + (isPrevious === true ? -1 : 1)];\n        while (siblingLI && (!isVisible(siblingLI) || siblingLI.classList.contains(cssClass.disabled))) {\n            liIndex = liIndex + (isPrevious === true ? -1 : 1);\n            siblingLI = liCollections[liIndex];\n        }\n        return siblingLI;\n    }\n    ListBase.getSiblingLI = getSiblingLI;\n    /**\n     * Return the index of the li element\n     * @param  {Element} item - An element to find next or previous after this element.\n     * @param  {Element[]|NodeList} elementArray - An element array to find index of given li.\n     */\n    function indexOf(item, elementArray) {\n        if (!elementArray || !item) {\n            return void 0;\n        }\n        else {\n            var liCollections = elementArray;\n            liCollections = Array.prototype.slice.call(elementArray);\n            return liCollections.indexOf(item);\n        }\n    }\n    ListBase.indexOf = indexOf;\n    /**\n     * Returns the grouped data from given dataSource.\n     * @param  {{[key:string]:Object}[]} dataSource - The JSON data which is necessary to process.\n     * @param  {FieldsMapping} fields - Fields that are mapped from the data source.\n     * @param  {SortOrder='None'} sortOrder- Specifies final result sort order.\n     */\n    function groupDataSource(dataSource, fields, sortOrder) {\n        if (sortOrder === void 0) { sortOrder = 'None'; }\n        var curFields = extend({}, ListBase.defaultMappedFields, fields);\n        var cusQuery = new Query().group(curFields.groupBy);\n        // need to remove once sorting issues fixed in DataManager\n        cusQuery = addSorting(sortOrder, 'key', cusQuery);\n        var ds = getDataSource(dataSource, cusQuery);\n        dataSource = [];\n        for (var j = 0; j < ds.length; j++) {\n            var itemObj = ds[j].items;\n            var grpItem = {};\n            var hdr = 'isHeader';\n            grpItem[curFields.text] = ds[j].key;\n            grpItem[hdr] = true;\n            grpItem.id = 'group-list-item-' + (ds[j].key ?\n                ds[j].key.toString().trim() : 'undefined');\n            grpItem.items = itemObj;\n            dataSource.push(grpItem);\n            for (var k = 0; k < itemObj.length; k++) {\n                dataSource.push(itemObj[k]);\n            }\n        }\n        return dataSource;\n    }\n    ListBase.groupDataSource = groupDataSource;\n    /**\n     * Returns a sorted query object.\n     * @param  {SortOrder} sortOrder - Specifies that sort order.\n     * @param  {string} sortBy - Specifies sortBy fields.\n     * @param  {Query=new Query()} query - Pass if any existing query.\n     */\n    function addSorting(sortOrder, sortBy, query) {\n        if (query === void 0) { query = new Query(); }\n        if (sortOrder === 'Ascending') {\n            query.sortBy(sortBy, 'ascending', true);\n        }\n        else if (sortOrder === 'Descending') {\n            query.sortBy(sortBy, 'descending', true);\n        }\n        else {\n            for (var i = 0; i < query.queries.length; i++) {\n                if (query.queries[i].fn === 'onSortBy') {\n                    query.queries.splice(i, 1);\n                }\n            }\n        }\n        return query;\n    }\n    ListBase.addSorting = addSorting;\n    /**\n     * Return an array of JSON Data that processed based on queries.\n     * @param  {{[key:string]:Object}[]} dataSource - Specifies local JSON data source.\n     * @param  {Query} query - Specifies query that need to process.\n     */\n    function getDataSource(dataSource, query) {\n        // tslint:disable-next-line\n        return new DataManager(dataSource)\n            .executeLocal(query);\n    }\n    ListBase.getDataSource = getDataSource;\n    /**\n     * Created JSON data based the UL and LI element\n     * @param  {HTMLElement|Element} element - UL element that need to convert as a JSON\n     * @param  {ListBaseOptions} options? - Specifies listbase option for fields.\n     */\n    function createJsonFromElement(element, options) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        var fields = extend({}, ListBase.defaultMappedFields, curOpt.fields);\n        var curEle = element.cloneNode(true);\n        var jsonAr = [];\n        curEle.classList.add('json-parent');\n        var childs = curEle.querySelectorAll('.json-parent>li');\n        curEle.classList.remove('json-parent');\n        for (var i = 0; i < childs.length; i++) {\n            var li = childs[i];\n            var anchor = li.querySelector('a');\n            var ul = li.querySelector('ul');\n            var json = {};\n            var childNodes = anchor ? anchor.childNodes : li.childNodes;\n            var keys = Object.keys(childNodes);\n            for (var i_1 = 0; i_1 < childNodes.length; i_1++) {\n                if (!(childNodes[Number(keys[i_1])]).hasChildNodes()) {\n                    json[fields.text] = childNodes[Number(keys[i_1])].textContent;\n                }\n            }\n            var attributes_1 = getAllAttributes(li);\n            if (attributes_1.id) {\n                json[fields.id] = attributes_1.id;\n                delete attributes_1.id;\n            }\n            else {\n                json[fields.id] = generateId();\n            }\n            if (Object.keys(attributes_1).length) {\n                json[fields.htmlAttributes] = attributes_1;\n            }\n            if (anchor) {\n                attributes_1 = getAllAttributes(anchor);\n                if (Object.keys(attributes_1).length) {\n                    json[fields.urlAttributes] = attributes_1;\n                }\n            }\n            if (ul) {\n                json[fields.child] = createJsonFromElement(ul, options);\n            }\n            jsonAr.push(json);\n        }\n        return jsonAr;\n    }\n    ListBase.createJsonFromElement = createJsonFromElement;\n    function typeofData(data) {\n        var match = { typeof: null, item: null };\n        for (var i = 0; i < data.length; i++) {\n            if (!isNullOrUndefined(data[i])) {\n                return match = { typeof: typeof data[i], item: data[i] };\n            }\n        }\n        return match;\n    }\n    function setAttribute(element, elementAttributes) {\n        var attr = {};\n        merge(attr, elementAttributes);\n        if (attr.class) {\n            addClass([element], attr.class.split(' '));\n            delete attr.class;\n        }\n        attributes(element, attr);\n    }\n    function getAllAttributes(element) {\n        var attributes = {};\n        var attr = element.attributes;\n        for (var index = 0; index < attr.length; index++) {\n            attributes[attr[index].nodeName] = attr[index].nodeValue;\n        }\n        return attributes;\n    }\n    /**\n     * Created UL element from content template.\n     * @param  {string} template - that need to convert and generate li element.\n     * @param  {{[key:string]:Object}[]} dataSource - Specifies local JSON data source.\n     * @param  {ListBaseOptions} options? - Specifies listbase option for fields.\n     */\n    function renderContentTemplate(createElement, template, dataSource, fields, options) {\n        cssClass = getModuleClass(defaultListBaseOptions.moduleName);\n        var ulElement = createElement('ul', { className: cssClass.ul, attrs: { role: 'presentation' } });\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        var curFields = extend({}, ListBase.defaultMappedFields, fields);\n        var compiledString = compile(template);\n        var liCollection = [];\n        var id = generateId(); // generate id for drop-down-list option.\n        for (var i = 0; i < dataSource.length; i++) {\n            var fieldData = getFieldValues(dataSource[i], curFields);\n            var curItem = dataSource[i];\n            var isHeader = curItem.isHeader;\n            var value = fieldData[curFields.value];\n            if (curOpt.itemCreating && typeof curOpt.itemCreating === 'function') {\n                var curData = {\n                    dataSource: dataSource,\n                    curData: curItem,\n                    text: value,\n                    options: curOpt,\n                    fields: curFields\n                };\n                curOpt.itemCreating(curData);\n            }\n            if (curOpt.itemCreating && typeof curOpt.itemCreating === 'function') {\n                fieldData = getFieldValues(dataSource[i], curFields);\n                value = fieldData[curFields.value];\n            }\n            var li = createElement('li', {\n                id: id + '-' + i,\n                className: isHeader ? cssClass.group : cssClass.li, attrs: { role: 'presentation' }\n            });\n            if (isHeader) {\n                li.innerText = fieldData[curFields.text];\n            }\n            else {\n                append(compiledString(curItem), li);\n                li.setAttribute('data-value', value);\n                li.setAttribute('role', 'option');\n            }\n            if (curOpt.itemCreated && typeof curOpt.itemCreated === 'function') {\n                var curData = {\n                    dataSource: dataSource,\n                    curData: curItem,\n                    text: value,\n                    item: li,\n                    options: curOpt,\n                    fields: curFields\n                };\n                curOpt.itemCreated(curData);\n            }\n            liCollection.push(li);\n        }\n        append(liCollection, ulElement);\n        return ulElement;\n    }\n    ListBase.renderContentTemplate = renderContentTemplate;\n    /**\n     * Created header items from group template.\n     * @param  {string} template - that need to convert and generate li element.\n     * @param  {{[key:string]:Object}[]} dataSource - Specifies local JSON data source.\n     * @param  {FieldsMapping} fields - Specifies fields for mapping the dataSource.\n     * @param  {Element[]} headerItems? - Specifies listbase header items.\n     */\n    function renderGroupTemplate(groupTemplate, groupDataSource, fields, headerItems) {\n        var compiledString = compile(groupTemplate);\n        var curFields = extend({}, ListBase.defaultMappedFields, fields);\n        var category = curFields.groupBy;\n        for (var _i = 0, headerItems_1 = headerItems; _i < headerItems_1.length; _i++) {\n            var header = headerItems_1[_i];\n            var headerData = {};\n            headerData[category] = header.textContent;\n            header.innerHTML = '';\n            append(compiledString(headerData), header);\n        }\n        return headerItems;\n    }\n    ListBase.renderGroupTemplate = renderGroupTemplate;\n    function generateId() {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    }\n    ListBase.generateId = generateId;\n    function processSubChild(createElement, fieldData, fields, ds, options, element, level) {\n        // Get SubList\n        var subDS = fieldData[fields.child] || [];\n        var hasChildren = fieldData[fields.hasChildren];\n        //Create Sub child\n        if (subDS.length) {\n            hasChildren = true;\n            element.classList.add(cssClass.hasChild);\n            if (options.processSubChild) {\n                var subLi = createListFromJson(createElement, subDS, options, ++level);\n                element.appendChild(subLi);\n            }\n        }\n        // Create expand and collapse node\n        if (!!options.expandCollapse && hasChildren && !options.template) {\n            element.firstElementChild.classList.add(cssClass.iconWrapper);\n            var expandElement = options.expandIconPosition === 'Left' ? prepend : append;\n            expandElement([createElement('div', { className: 'e-icons ' + options.expandIconClass })], element.querySelector('.' + cssClass.textContent));\n        }\n    }\n    function generateSingleLevelLI(createElement, item, fieldData, fields, className, innerElements, grpLI, id, index, options) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n        var text = item;\n        var value = item;\n        var dataSource;\n        if (typeof item !== 'string' && typeof item !== 'number' && typeof item !== 'boolean') {\n            dataSource = item;\n            text = (typeof fieldData[fields.text] === 'boolean' || typeof fieldData[fields.text] === 'number') ?\n                fieldData[fields.text] : (fieldData[fields.text] || '');\n            value = fieldData[fields.value];\n        }\n        var elementID;\n        if (!isNullOrUndefined(dataSource) && !isNullOrUndefined(fieldData[fields.id])\n            && fieldData[fields.id] !== '') {\n            elementID = id;\n        }\n        else {\n            elementID = id + '-' + index;\n        }\n        var li = createElement('li', {\n            className: (grpLI === true ? cssClass.group : cssClass.li) + ' ' + (isNullOrUndefined(className) ? '' : className),\n            id: elementID, attrs: (ariaAttributes.groupItemRole !== '' && ariaAttributes.itemRole !== '' ?\n                { role: (grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole) } : {})\n        });\n        if (dataSource && fieldData.hasOwnProperty(fields.enabled) && fieldData[fields.enabled].toString() === 'false') {\n            li.classList.add(cssClass.disabled);\n        }\n        if (grpLI) {\n            li.innerText = text;\n        }\n        else {\n            if (!isNullOrUndefined(value)) {\n                li.setAttribute('data-value', value);\n            }\n            li.setAttribute('role', 'option');\n            if (dataSource && fieldData.hasOwnProperty(fields.htmlAttributes) && fieldData[fields.htmlAttributes]) {\n                setAttribute(li, fieldData[fields.htmlAttributes]);\n            }\n            if (innerElements.length) {\n                append(innerElements, li);\n            }\n            if (dataSource && (fieldData[fields.url] || (fieldData[fields.urlAttributes] &&\n                fieldData[fields.urlAttributes].href))) {\n                li.appendChild(anchorTag(createElement, dataSource, fields, text));\n            }\n            else {\n                li.appendChild(document.createTextNode(text));\n            }\n        }\n        return li;\n    }\n    function getModuleClass(moduleName) {\n        var moduleClass;\n        return moduleClass = {\n            li: \"e-\" + moduleName + \"-item\",\n            ul: \"e-\" + moduleName + \"-parent e-ul\",\n            group: \"e-\" + moduleName + \"-group-item\",\n            icon: \"e-\" + moduleName + \"-icon\",\n            text: \"e-\" + moduleName + \"-text\",\n            check: \"e-\" + moduleName + \"-check\",\n            checked: 'e-checked',\n            selected: 'e-selected',\n            expanded: 'e-expanded',\n            textContent: 'e-text-content',\n            hasChild: 'e-has-child',\n            level: 'e-level',\n            url: \"e-\" + moduleName + \"-url\",\n            collapsible: 'e-icon-collapsible',\n            disabled: 'e-disabled',\n            image: \"e-\" + moduleName + \"-img\",\n            iconWrapper: 'e-icon-wrapper'\n        };\n    }\n    function anchorTag(createElement, dataSource, fields, text) {\n        var fieldData = getFieldValues(dataSource, fields);\n        var attr = { href: fieldData[fields.url] };\n        if (fieldData.hasOwnProperty(fields.urlAttributes) && fieldData[fields.urlAttributes]) {\n            merge(attr, fieldData[fields.urlAttributes]);\n            attr.href = fieldData[fields.url] ? fieldData[fields.url] :\n                fieldData[fields.urlAttributes].href;\n        }\n        var anchorTag = createElement('a', { className: cssClass.text + ' ' + cssClass.url, innerHTML: text });\n        setAttribute(anchorTag, attr);\n        return anchorTag;\n    }\n    /* tslint:disable:align */\n    function generateLI(createElement, item, fieldData, fields, className, options) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n        var text = item;\n        var uID;\n        var grpLI;\n        var dataSource;\n        if (typeof item !== 'string' && typeof item !== 'number') {\n            dataSource = item;\n            text = fieldData[fields.text] || '';\n            uID = fieldData[fields.id];\n            grpLI = (item.hasOwnProperty('isHeader') && item.isHeader)\n                ? true : false;\n        }\n        var li = createElement('li', {\n            className: (grpLI === true ? cssClass.group : cssClass.li) + ' ' + (isNullOrUndefined(className) ? '' : className),\n            attrs: (ariaAttributes.groupItemRole !== '' && ariaAttributes.itemRole !== '' ?\n                { role: (grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole) } : {})\n        });\n        !isNullOrUndefined(uID) ? li.setAttribute('data-uid', uID) : li.setAttribute('data-uid', generateId());\n        if (grpLI && options && options.groupTemplate) {\n            var compiledString = compile(options.groupTemplate);\n            append(compiledString(item), li);\n        }\n        else if (!grpLI && options && options.template) {\n            var compiledString = compile(options.template);\n            append(compiledString(item), li);\n        }\n        else {\n            var innerDiv = createElement('div', {\n                className: cssClass.textContent,\n                attrs: (ariaAttributes.wrapperRole !== '' ? { role: ariaAttributes.wrapperRole } : {})\n            });\n            if (dataSource && (fieldData[fields.url] || (fieldData[fields.urlAttributes] &&\n                fieldData[fields.urlAttributes].href))) {\n                innerDiv.appendChild(anchorTag(createElement, dataSource, fields, text));\n            }\n            else {\n                innerDiv.appendChild(createElement('span', {\n                    className: cssClass.text, innerHTML: text,\n                    attrs: (ariaAttributes.itemText !== '' ? { role: ariaAttributes.itemText } : {})\n                }));\n            }\n            li.appendChild(innerDiv);\n        }\n        return li;\n    }\n    /**\n     * Returns UL element based on the given LI element.\n     * @param  {HTMLElement[]} liElement - Specifies array of LI element.\n     * @param  {string} className? - Specifies class name that need to be added in UL element.\n     * @param  {ListBaseOptions} options? - Specifies ListBase options.\n     */\n    function generateUL(createElement, liElement, className, options) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n        cssClass = getModuleClass(curOpt.moduleName);\n        var ulElement = createElement('ul', {\n            className: cssClass.ul + ' ' + (isNullOrUndefined(className) ? '' : className),\n            attrs: (ariaAttributes.listRole !== '' ? { role: ariaAttributes.listRole } : {})\n        });\n        append(liElement, ulElement);\n        return ulElement;\n    }\n    ListBase.generateUL = generateUL;\n    /**\n     * Returns LI element with additional DIV tag based on the given LI element.\n     * @param  {liElement} liElement - Specifies LI element.\n     * @param  {string} className? - Specifies class name that need to be added in created DIV element.\n     * @param  {ListBaseOptions} options? - Specifies ListBase options.\n     */\n    function generateIcon(createElement, liElement, className, options) {\n        var curOpt = extend({}, defaultListBaseOptions, options);\n        cssClass = getModuleClass(curOpt.moduleName);\n        var expandElement = curOpt.expandIconPosition === 'Left' ? prepend : append;\n        expandElement([createElement('div', {\n                className: 'e-icons ' + curOpt.expandIconClass + ' ' +\n                    (isNullOrUndefined(className) ? '' : className)\n            })], liElement.querySelector('.' + cssClass.textContent));\n        return liElement;\n    }\n    ListBase.generateIcon = generateIcon;\n})(ListBase || (ListBase = {}));\n/**\n * Used to get dataSource item from complex data using fields.\n * @param {{[key:string]:Object}|string[]|string} dataSource - Specifies an  JSON or String data.\n * @param {FieldsMapping} fields - Fields that are mapped from the dataSource.\n */\nexport function getFieldValues(dataItem, fields) {\n    var fieldData = {};\n    if (isNullOrUndefined(dataItem) || typeof (dataItem) === 'string' || typeof (dataItem) === 'number'\n        || !isNullOrUndefined(dataItem.isHeader)) {\n        return dataItem;\n    }\n    else {\n        for (var _i = 0, _a = Object.keys(fields); _i < _a.length; _i++) {\n            var field = _a[_i];\n            var dataField = fields[field];\n            var value = !isNullOrUndefined(dataField) &&\n                typeof (dataField) === 'string' ? getValue(dataField, dataItem) : undefined;\n            if (!isNullOrUndefined(value)) {\n                fieldData[dataField] = value;\n            }\n        }\n    }\n    return fieldData;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { merge, formatUnit, isNullOrUndefined, append, detach } from '@syncfusion/ej2-base';\nimport { attributes, addClass, removeClass, prepend, closest, remove } from '@syncfusion/ej2-base';\nimport { Component, EventHandler, Property, Complex, Event } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty } from '@syncfusion/ej2-base';\nimport { compile } from '@syncfusion/ej2-base';\nimport { Animation, rippleEffect, Touch } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { ListBase, getFieldValues } from '../common/list-base';\n// Effect Configuration Effect[] =  [fromViewBackward,fromViewForward,toViewBackward,toviewForward];\nvar effectsConfig = {\n    'None': [],\n    'SlideLeft': ['SlideRightOut', 'SlideLeftOut', 'SlideLeftIn', 'SlideRightIn'],\n    'SlideDown': ['SlideTopOut', 'SlideBottomOut', 'SlideBottomIn', 'SlideTopIn'],\n    'Zoom': ['FadeOut', 'FadeZoomOut', 'FadeZoomIn', 'FadeIn'],\n    'Fade': ['FadeOut', 'FadeOut', 'FadeIn', 'FadeIn']\n};\nvar effectsRTLConfig = {\n    'None': [],\n    'SlideLeft': ['SlideLeftOut', 'SlideRightOut', 'SlideRightIn', 'SlideLeftIn'],\n    'SlideDown': ['SlideBottomOut', 'SlideTopOut', 'SlideTopIn', 'SlideBottomIn'],\n    'Zoom': ['FadeZoomOut', 'FadeOut', 'FadeIn', 'FadeZoomIn'],\n    'Fade': ['FadeOut', 'FadeOut', 'FadeIn', 'FadeIn']\n};\n// don't use space in classnames.\nexport var classNames = {\n    root: 'e-listview',\n    hover: 'e-hover',\n    selected: 'e-active',\n    focused: 'e-focused',\n    parentItem: 'e-list-parent',\n    listItem: 'e-list-item',\n    listIcon: 'e-list-icon',\n    textContent: 'e-text-content',\n    listItemText: 'e-list-text',\n    groupListItem: 'e-list-group-item',\n    hasChild: 'e-has-child',\n    view: 'e-view',\n    header: 'e-list-header',\n    headerText: 'e-headertext',\n    headerTemplateText: 'e-headertemplate-text',\n    text: 'e-text',\n    disable: 'e-disabled',\n    content: 'e-content',\n    icon: 'e-icons',\n    backIcon: 'e-icon-back',\n    checkboxWrapper: 'e-checkbox-wrapper',\n    checkbox: 'e-checkbox',\n    checked: 'e-check',\n    checklist: 'e-checklist',\n    checkboxIcon: 'e-frame',\n    checkboxRight: 'e-checkbox-right',\n    checkboxLeft: 'e-checkbox-left',\n    listviewCheckbox: 'e-listview-checkbox',\n    itemCheckList: 'e-checklist'\n};\nvar FieldSettings = /** @class */ (function (_super) {\n    __extends(FieldSettings, _super);\n    function FieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('id')\n    ], FieldSettings.prototype, \"id\", void 0);\n    __decorate([\n        Property('text')\n    ], FieldSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property('isChecked')\n    ], FieldSettings.prototype, \"isChecked\", void 0);\n    __decorate([\n        Property('isVisible')\n    ], FieldSettings.prototype, \"isVisible\", void 0);\n    __decorate([\n        Property('enabled')\n    ], FieldSettings.prototype, \"enabled\", void 0);\n    __decorate([\n        Property('iconCss')\n    ], FieldSettings.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('child')\n    ], FieldSettings.prototype, \"child\", void 0);\n    __decorate([\n        Property('tooltip')\n    ], FieldSettings.prototype, \"tooltip\", void 0);\n    __decorate([\n        Property('groupBy')\n    ], FieldSettings.prototype, \"groupBy\", void 0);\n    __decorate([\n        Property('text')\n    ], FieldSettings.prototype, \"sortBy\", void 0);\n    __decorate([\n        Property('htmlAttributes')\n    ], FieldSettings.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('tableName')\n    ], FieldSettings.prototype, \"tableName\", void 0);\n    return FieldSettings;\n}(ChildProperty));\nexport { FieldSettings };\n/**\n * Represents the EJ2 ListView control.\n * ```html\n * <div id=\"listview\">\n * <ul>\n * <li>Favourite</li>\n * <li>Documents</li>\n * <li>Downloads</li>\n * </ul>\n * </div>\n * ```\n * ```typescript\n *   var lvObj = new ListView({});\n *   lvObj.appendTo(\"#listview\");\n * ```\n */\nvar ListView = /** @class */ (function (_super) {\n    __extends(ListView, _super);\n    /**\n     * Constructor for creating the widget\n     */\n    function ListView(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    ListView.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'htmlAttributes':\n                    this.setHTMLAttribute();\n                    break;\n                case 'cssClass':\n                    this.setCSSClass(oldProp.cssClass);\n                    break;\n                case 'enable':\n                    this.setEnable();\n                    break;\n                case 'width':\n                case 'height':\n                    this.setSize();\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL();\n                    break;\n                case 'fields':\n                    this.listBaseOption.fields = this.fields.properties;\n                    if (this.enableVirtualization) {\n                        this.virtualizationModule.reRenderUiVirtualization();\n                    }\n                    else {\n                        this.reRender();\n                    }\n                    break;\n                case 'headerTitle':\n                    if (!this.curDSLevel.length) {\n                        this.header(this.headerTitle, false);\n                    }\n                    break;\n                case 'showHeader':\n                    this.header(this.headerTitle, false);\n                    break;\n                case 'enableVirtualization':\n                    detach(this.contentContainer);\n                    this.refresh();\n                    break;\n                case 'showCheckBox':\n                case 'checkBoxPosition':\n                    if (this.enableVirtualization) {\n                        this.virtualizationModule.reRenderUiVirtualization();\n                    }\n                    else {\n                        this.setCheckbox();\n                    }\n                    break;\n                case 'dataSource':\n                    if (this.enableVirtualization) {\n                        this.virtualizationModule.reRenderUiVirtualization();\n                    }\n                    else {\n                        this.reRender();\n                    }\n                    break;\n                case 'sortOrder':\n                case 'showIcon':\n                    if (this.enableVirtualization) {\n                        this.virtualizationModule.reRenderUiVirtualization();\n                    }\n                    else {\n                        this.listBaseOption.showIcon = this.showIcon;\n                        this.curViewDS = this.getSubDS();\n                        this.resetCurrentList();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n    };\n    // Model Changes\n    ListView.prototype.setHTMLAttribute = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            attributes(this.element, this.htmlAttributes);\n        }\n    };\n    ListView.prototype.setCSSClass = function (oldCSSClass) {\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.split(' ').filter(function (css) { return css; }));\n        }\n        if (oldCSSClass) {\n            removeClass([this.element], oldCSSClass.split(' ').filter(function (css) { return css; }));\n        }\n    };\n    ListView.prototype.setSize = function () {\n        this.element.style.height = formatUnit(this.height);\n        this.element.style.width = formatUnit(this.width);\n        this.isWindow = this.element.clientHeight ? false : true;\n    };\n    ListView.prototype.setEnable = function () {\n        this.enableElement(this.element, this.enable);\n    };\n    ListView.prototype.setEnableRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    ListView.prototype.enableElement = function (element, isEnabled) {\n        if (isEnabled) {\n            element.classList.remove(classNames.disable);\n        }\n        else {\n            element.classList.add(classNames.disable);\n        }\n    };\n    //Suport Component Functions\n    ListView.prototype.header = function (text, showBack) {\n        if (this.headerEle === undefined && this.showHeader) {\n            this.headerEle = this.createElement('div', { className: classNames.header });\n            var innerHeaderEle = this.createElement('span', { className: classNames.headerText, innerHTML: this.headerTitle });\n            var textEle = this.createElement('div', { className: classNames.text, innerHTML: innerHeaderEle.outerHTML });\n            var hedBackButton = this.createElement('div', {\n                className: classNames.icon + ' ' + classNames.backIcon + ' e-but-back',\n                attrs: { style: 'display:none;' }\n            });\n            this.headerEle.appendChild(hedBackButton);\n            this.headerEle.appendChild(textEle);\n            if (this.headerTemplate) {\n                var compiledString = compile(this.headerTemplate);\n                var headerTemplateEle = this.createElement('div', { className: classNames.headerTemplateText });\n                append(compiledString({}), headerTemplateEle);\n                append([headerTemplateEle], this.headerEle);\n            }\n            if (this.headerTemplate && this.headerTitle) {\n                textEle.classList.add('header');\n            }\n            this.element.classList.add('e-has-header');\n            prepend([this.headerEle], this.element);\n        }\n        else if (this.headerEle) {\n            if (this.showHeader) {\n                this.headerEle.style.display = '';\n                var textEle = this.headerEle.querySelector('.' + classNames.headerText);\n                var hedBackButton = this.headerEle.querySelector('.' + classNames.backIcon);\n                textEle.innerHTML = text;\n                if (this.headerTemplate && showBack) {\n                    textEle.parentElement.classList.remove('header');\n                    this.headerEle.querySelector('.' + classNames.headerTemplateText).classList.add('nested-header');\n                }\n                if (this.headerTemplate && !showBack) {\n                    textEle.parentElement.classList.add('header');\n                    this.headerEle.querySelector('.' + classNames.headerTemplateText).classList.remove('nested-header');\n                    this.headerEle.querySelector('.' + classNames.headerTemplateText).classList.add('header');\n                }\n                if (showBack === true) {\n                    hedBackButton.style.display = '';\n                }\n                else {\n                    hedBackButton.style.display = 'none';\n                }\n            }\n            else {\n                this.headerEle.style.display = 'none';\n            }\n        }\n    };\n    // Animation Related Functions\n    ListView.prototype.switchView = function (fromView, toView, reverse) {\n        var _this = this;\n        if (fromView && toView) {\n            var fPos_1 = fromView.style.position;\n            var overflow_1 = (this.element.style.overflow !== 'hidden') ? this.element.style.overflow : '';\n            fromView.style.position = 'absolute';\n            fromView.classList.add('e-view');\n            var anim = void 0;\n            var duration = this.animation.duration;\n            if (this.animation.effect) {\n                anim = (this.enableRtl ? effectsRTLConfig[this.animation.effect] : effectsConfig[this.animation.effect]);\n            }\n            else {\n                var slideLeft = 'SlideLeft';\n                anim = effectsConfig[slideLeft];\n                reverse = this.enableRtl;\n                duration = 0;\n            }\n            this.element.style.overflow = 'hidden';\n            this.aniObj.animate(fromView, {\n                name: (reverse === true ? anim[0] : anim[1]),\n                duration: duration,\n                timingFunction: this.animation.easing,\n                end: function (model) {\n                    fromView.style.display = 'none';\n                    _this.element.style.overflow = overflow_1;\n                    fromView.style.position = fPos_1;\n                    fromView.classList.remove('e-view');\n                }\n            });\n            toView.style.display = '';\n            this.aniObj.animate(toView, {\n                name: (reverse === true ? anim[2] : anim[3]),\n                duration: duration,\n                timingFunction: this.animation.easing,\n                end: function () {\n                    _this.trigger('actionComplete');\n                }\n            });\n            this.curUL = toView;\n        }\n    };\n    ListView.prototype.preRender = function () {\n        this.listBaseOption = {\n            template: this.template,\n            headerTemplate: this.headerTemplate,\n            groupTemplate: this.groupTemplate, expandCollapse: true, listClass: '',\n            ariaAttributes: {\n                itemRole: 'listitem', listRole: 'list', itemText: '',\n                groupItemRole: 'group', wrapperRole: 'presentation'\n            },\n            fields: this.fields.properties, sortOrder: this.sortOrder, showIcon: this.showIcon,\n            itemCreated: this.renderCheckbox.bind(this)\n        };\n        this.initialization();\n    };\n    ListView.prototype.initialization = function () {\n        this.curDSLevel = [];\n        this.animateOptions = {};\n        this.curViewDS = [];\n        this.currentLiElements = [];\n        this.isNestedList = false;\n        this.selectedData = [];\n        this.selectedId = [];\n        this.aniObj = new Animation(this.animateOptions);\n    };\n    ListView.prototype.renderCheckbox = function (args) {\n        if (args.item.classList.contains(classNames.hasChild)) {\n            this.isNestedList = true;\n        }\n        if (this.showCheckBox && this.isValidLI(args.item)) {\n            var checkboxElement = void 0;\n            var fieldData = void 0;\n            checkboxElement = createCheckBox(this.createElement, false, {\n                checked: false, enableRtl: this.enableRtl,\n                cssClass: classNames.listviewCheckbox\n            });\n            checkboxElement.setAttribute('role', 'checkbox');\n            var frameElement_1 = checkboxElement.querySelector('.' + classNames.checkboxIcon);\n            args.item.classList.add(classNames.itemCheckList);\n            args.item.firstElementChild.classList.add(classNames.checkbox);\n            if (typeof this.dataSource[0] !== 'string' && typeof this.dataSource[0] !== 'number') {\n                fieldData = getFieldValues(args.curData, this.listBaseOption.fields);\n                if (fieldData[this.listBaseOption.fields.isChecked]) {\n                    this.checkInternally(args, checkboxElement);\n                }\n            }\n            else if (((typeof this.dataSource[0] === 'string' ||\n                typeof this.dataSource[0] === 'number') && this.selectedData.indexOf(args.text) !== -1)) {\n                this.checkInternally(args, checkboxElement);\n            }\n            checkboxElement.setAttribute('aria-checked', frameElement_1.classList.contains(classNames.checked) ? 'true' : 'false');\n            if (this.checkBoxPosition === 'Left') {\n                checkboxElement.classList.add(classNames.checkboxLeft);\n                args.item.firstElementChild.classList.add(classNames.checkboxLeft);\n                args.item.firstElementChild.insertBefore(checkboxElement, args.item.firstElementChild.childNodes[0]);\n            }\n            else {\n                checkboxElement.classList.add(classNames.checkboxRight);\n                args.item.firstElementChild.classList.add(classNames.checkboxRight);\n                args.item.firstElementChild.appendChild(checkboxElement);\n            }\n            this.currentLiElements.push(args.item);\n        }\n    };\n    ListView.prototype.checkInternally = function (args, checkboxElement) {\n        args.item.classList.add(classNames.selected);\n        args.item.setAttribute('aria-selected', 'true');\n        checkboxElement.querySelector('.' + classNames.checkboxIcon).classList.add(classNames.checked);\n        checkboxElement.setAttribute('aria-checked', 'true');\n    };\n    /**\n     * It is used to check the checkbox of an item.\n     * @param  {Fields | HTMLElement | Element} item - It accepts Fields or HTML list element as an argument.\n     */\n    ListView.prototype.checkItem = function (item) {\n        this.toggleCheckBase(item, true);\n    };\n    ListView.prototype.toggleCheckBase = function (item, checked) {\n        if (this.showCheckBox) {\n            var liElement = item;\n            if (item instanceof Object && item.constructor !== HTMLLIElement) {\n                liElement = this.getLiFromObjOrElement(item);\n            }\n            if (!isNullOrUndefined(liElement)) {\n                var checkboxIcon = liElement.querySelector('.' + classNames.checkboxIcon);\n                checked ? liElement.classList.add(classNames.selected) : liElement.classList.remove(classNames.selected);\n                liElement.setAttribute('aria-selected', checked ? 'true' : 'false');\n                checked ? checkboxIcon.classList.add(classNames.checked) : checkboxIcon.classList.remove(classNames.checked);\n                checkboxIcon.parentElement.setAttribute('aria-checked', checked ? 'true' : 'false');\n            }\n            this.setSelectedItemData(liElement);\n        }\n    };\n    /**\n     * It is used to uncheck the checkbox of an item.\n     * @param  {Fields | HTMLElement | Element} item - It accepts Fields or HTML list element as an argument.\n     */\n    ListView.prototype.uncheckItem = function (item) {\n        this.toggleCheckBase(item, false);\n    };\n    /**\n     * It is used to check all the items in ListView.\n     */\n    ListView.prototype.checkAllItems = function () {\n        this.toggleAllCheckBase(true);\n    };\n    /**\n     * It is used to un-check all the items in ListView.\n     */\n    ListView.prototype.uncheckAllItems = function () {\n        this.toggleAllCheckBase(false);\n    };\n    ListView.prototype.toggleAllCheckBase = function (checked) {\n        if (this.showCheckBox) {\n            for (var i = 0; i < this.liCollection.length; i++) {\n                var checkIcon = this.liCollection[i].querySelector('.' + classNames.checkboxIcon);\n                if (checkIcon) {\n                    if (checked) {\n                        if (!checkIcon.classList.contains(classNames.checked)) {\n                            this.checkItem(this.liCollection[i]);\n                        }\n                    }\n                    else {\n                        if (checkIcon.classList.contains(classNames.checked)) {\n                            this.uncheckItem(this.liCollection[i]);\n                        }\n                    }\n                }\n            }\n            if (this.enableVirtualization) {\n                this.virtualizationModule.checkedItem(checked);\n            }\n        }\n    };\n    ListView.prototype.setCheckbox = function () {\n        var _this = this;\n        if (this.showCheckBox) {\n            var liCollection = Array.prototype.slice.call(this.element.querySelectorAll('.' + classNames.listItem));\n            var args_1 = {\n                item: undefined, curData: undefined, dataSource: undefined, fields: undefined,\n                options: undefined, text: ''\n            };\n            liCollection.forEach(function (element) {\n                args_1.item = element;\n                args_1.curData = _this.getItemData(element);\n                if (element.querySelector('.' + classNames.checkboxWrapper)) {\n                    _this.removeElement(element.querySelector('.' + classNames.checkboxWrapper));\n                }\n                _this.renderCheckbox(args_1);\n                if (args_1.item.classList.contains(classNames.selected)) {\n                    _this.checkInternally(args_1, args_1.item.querySelector('.' + classNames.checkboxWrapper));\n                }\n            });\n        }\n        else {\n            var liCollection = Array.prototype.slice.call(this.element.querySelectorAll('.' + classNames.itemCheckList));\n            liCollection.forEach(function (element) {\n                element.classList.remove(classNames.selected);\n                element.firstElementChild.classList.remove(classNames.checkbox);\n                _this.removeElement(element.querySelector('.' + classNames.checkboxWrapper));\n            });\n            if (this.selectedItems) {\n                this.selectedItems.item.classList.add(classNames.selected);\n            }\n        }\n    };\n    /**\n     * It is used to refresh the UI list item height\n     */\n    ListView.prototype.refreshItemHeight = function () {\n        this.virtualizationModule.refreshItemHeight();\n    };\n    ListView.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var classList = target.classList;\n        if (classList.contains(classNames.backIcon) || classList.contains(classNames.headerText)) {\n            if (this.showCheckBox && this.curDSLevel[this.curDSLevel.length - 1]) {\n                this.uncheckAllItems();\n            }\n            this.back();\n        }\n        else {\n            var li = closest(target.parentNode, '.' + classNames.listItem);\n            if (li === null) {\n                li = target;\n            }\n            this.removeFocus();\n            if (this.enable && this.showCheckBox && this.isValidLI(li)) {\n                if (e.target.classList.contains(classNames.checkboxIcon)) {\n                    li.classList.add(classNames.focused);\n                    if (isNullOrUndefined(li.querySelector('.' + classNames.checked))) {\n                        var args = {\n                            curData: undefined, dataSource: undefined, fields: undefined, options: undefined,\n                            text: undefined, item: li\n                        };\n                        this.checkInternally(args, args.item.querySelector('.' + classNames.checkboxWrapper));\n                    }\n                    else {\n                        this.uncheckItem(li);\n                        li.classList.add(classNames.focused);\n                    }\n                    if (e) {\n                        var eventArgs = this.selectEventData(li, e);\n                        var checkIcon = li.querySelector('.' + classNames.checkboxIcon);\n                        merge(eventArgs, { isChecked: checkIcon.classList.contains(classNames.checked) });\n                        this.trigger('select', eventArgs);\n                    }\n                }\n                else if (li.classList.contains(classNames.hasChild)) {\n                    this.removeHover();\n                    this.removeSelect();\n                    this.removeSelect(li);\n                    this.setSelectLI(li, e);\n                    li.classList.remove(classNames.selected);\n                }\n                else {\n                    this.setCheckboxLI(li, e);\n                }\n            }\n            else {\n                this.setSelectLI(li, e);\n            }\n        }\n    };\n    ListView.prototype.removeElement = function (element) {\n        return element && element.parentNode && element.parentNode.removeChild(element);\n    };\n    ListView.prototype.hoverHandler = function (e) {\n        var curLi = closest(e.target.parentNode, '.' + classNames.listItem);\n        this.setHoverLI(curLi);\n    };\n    ListView.prototype.leaveHandler = function (e) {\n        this.removeHover();\n    };\n    ;\n    ListView.prototype.homeKeyHandler = function (e, end) {\n        if (Object.keys(this.dataSource).length && this.curUL) {\n            var li = this.curUL.querySelectorAll('.' + classNames.listItem);\n            var focusedElement = this.curUL.querySelector('.' + classNames.focused) ||\n                this.curUL.querySelector('.' + classNames.selected);\n            if (focusedElement) {\n                focusedElement.classList.remove(classNames.focused);\n                if (!this.showCheckBox) {\n                    focusedElement.classList.remove(classNames.selected);\n                }\n            }\n            var index = !end ? 0 : li.length - 1;\n            if (li[index].classList.contains(classNames.hasChild) || this.showCheckBox) {\n                li[index].classList.add(classNames.focused);\n            }\n            else {\n                this.setSelectLI(li[index], e);\n            }\n        }\n    };\n    ListView.prototype.onArrowKeyDown = function (e, prev) {\n        var siblingLI;\n        var li;\n        var hasChild = !isNullOrUndefined(this.curUL.querySelector('.' + classNames.hasChild)) ? true : false;\n        if (hasChild || this.showCheckBox) {\n            li = this.curUL.querySelector('.' + classNames.focused) || this.curUL.querySelector('.' + classNames.selected);\n            siblingLI = ListBase.getSiblingLI(this.curUL.querySelectorAll('.' + classNames.listItem), li, prev);\n            if (!isNullOrUndefined(siblingLI)) {\n                if (li) {\n                    li.classList.remove(classNames.focused);\n                    if (!this.showCheckBox) {\n                        li.classList.remove(classNames.selected);\n                    }\n                }\n                if (siblingLI.classList.contains(classNames.hasChild) || this.showCheckBox) {\n                    siblingLI.classList.add(classNames.focused);\n                }\n                else {\n                    this.setSelectLI(siblingLI, e);\n                }\n            }\n        }\n        else {\n            li = this.curUL.querySelector('.' + classNames.selected);\n            siblingLI = ListBase.getSiblingLI(this.curUL.querySelectorAll('.' + classNames.listItem), li, prev);\n            this.setSelectLI(siblingLI, e);\n        }\n        return siblingLI;\n    };\n    ListView.prototype.arrowKeyHandler = function (e, prev) {\n        var _this = this;\n        if (Object.keys(this.dataSource).length && this.curUL) {\n            var siblingLI = this.onArrowKeyDown(e, prev);\n            var elementTop = this.element.getBoundingClientRect().top;\n            var elementHeight = this.element.getBoundingClientRect().height;\n            var firstItemBounds = this.curUL.querySelector('.' + classNames.listItem).getBoundingClientRect();\n            var heightDiff = void 0;\n            var groupItemBounds = void 0;\n            if (this.fields.groupBy) {\n                groupItemBounds = this.curUL.querySelector('.' + classNames.groupListItem).getBoundingClientRect();\n            }\n            if (siblingLI) {\n                var siblingTop = siblingLI.getBoundingClientRect().top;\n                var siblingHeight = siblingLI.getBoundingClientRect().height;\n                if (!prev) {\n                    var height = this.isWindow ? window.innerHeight : elementHeight;\n                    heightDiff = this.isWindow ? (siblingTop + siblingHeight) :\n                        ((siblingTop - elementTop) + siblingHeight);\n                    if (heightDiff > height) {\n                        this.isWindow ? window.scrollTo(0, pageYOffset + (heightDiff - height)) :\n                            this.element.scrollTo(0, this.element.scrollTop + (heightDiff - height));\n                    }\n                }\n                else {\n                    heightDiff = this.isWindow ? siblingTop : (siblingTop - elementTop);\n                    if (heightDiff < 0) {\n                        this.isWindow ? window.scrollTo(0, pageYOffset + heightDiff) :\n                            this.element.scrollTo(0, this.element.scrollTop + heightDiff);\n                    }\n                }\n            }\n            else if (this.enableVirtualization && prev && this.virtualizationModule.uiFirstIndex) {\n                this.onUIScrolled = function () {\n                    _this.onArrowKeyDown(e, prev);\n                    _this.onUIScrolled = undefined;\n                };\n                heightDiff = this.virtualizationModule.listItemHeight;\n                this.isWindow ? window.scrollTo(0, pageYOffset - heightDiff) :\n                    this.element.scrollTo(0, this.element.scrollTop - heightDiff);\n            }\n            else if (prev) {\n                if (this.showHeader && this.headerEle) {\n                    var topHeight = groupItemBounds ? groupItemBounds.top : firstItemBounds.top;\n                    var headerBounds = this.headerEle.getBoundingClientRect();\n                    heightDiff = headerBounds.top < 0 ? (headerBounds.height - topHeight) : 0;\n                    this.isWindow ? window.scrollTo(0, pageYOffset - heightDiff)\n                        : this.element.scrollTo(0, 0);\n                }\n                else if (this.fields.groupBy) {\n                    heightDiff = this.isWindow ? (groupItemBounds.top < 0 ? groupItemBounds.top : 0) :\n                        (elementTop - firstItemBounds.top) + groupItemBounds.height;\n                    this.isWindow ? window.scrollTo(0, pageYOffset + heightDiff) :\n                        this.element.scrollTo(0, this.element.scrollTop - heightDiff);\n                }\n            }\n        }\n    };\n    ListView.prototype.enterKeyHandler = function (e) {\n        if (Object.keys(this.dataSource).length && this.curUL) {\n            var hasChild = !isNullOrUndefined(this.curUL.querySelector('.' + classNames.hasChild)) ? true : false;\n            var li = this.curUL.querySelector('.' + classNames.focused);\n            if (hasChild && li) {\n                li.classList.remove(classNames.focused);\n                if (this.showCheckBox) {\n                    this.removeSelect();\n                    this.removeSelect(li);\n                    this.removeHover();\n                }\n                this.setSelectLI(li, e);\n            }\n        }\n    };\n    ListView.prototype.spaceKeyHandler = function (e) {\n        if (this.enable && this.showCheckBox && Object.keys(this.dataSource).length && this.curUL) {\n            var li = this.curUL.querySelector('.' + classNames.focused);\n            if (!isNullOrUndefined(li) && isNullOrUndefined(li.querySelector('.' + classNames.checked))) {\n                var args = {\n                    curData: undefined, dataSource: undefined, fields: undefined, options: undefined,\n                    text: undefined, item: li\n                };\n                this.checkInternally(args, args.item.querySelector('.' + classNames.checkboxWrapper));\n            }\n            else {\n                this.uncheckItem(li);\n            }\n        }\n    };\n    ListView.prototype.keyActionHandler = function (e) {\n        if (e.keyCode !== 9) {\n            e.preventDefault();\n        }\n        switch (e.keyCode) {\n            case 36:\n                this.homeKeyHandler(e);\n                break;\n            case 35:\n                this.homeKeyHandler(e, true);\n                break;\n            case 40:\n                this.arrowKeyHandler(e);\n                break;\n            case 38:\n                this.arrowKeyHandler(e, true);\n                break;\n            case 13:\n                this.enterKeyHandler(e);\n                break;\n            case 8:\n                if (this.showCheckBox && this.curDSLevel[this.curDSLevel.length - 1]) {\n                    this.uncheckAllItems();\n                }\n                this.back();\n                break;\n            case 9:\n                this.tabFocus(e);\n                break;\n            case 32:\n                this.spaceKeyHandler(e);\n                break;\n        }\n    };\n    ListView.prototype.swipeActionHandler = function (e) {\n        if (e.swipeDirection === 'Right') {\n            if (this.showCheckBox && this.curDSLevel[this.curDSLevel.length - 1]) {\n                this.uncheckAllItems();\n            }\n            this.back();\n        }\n    };\n    ListView.prototype.focusout = function () {\n        if (Object.keys(this.dataSource).length && this.curUL) {\n            var focusedElement = this.curUL.querySelector('.' + classNames.focused);\n            var activeElement = this.curUL.querySelector('[aria-selected = true]');\n            if (focusedElement) {\n                focusedElement.classList.remove(classNames.focused);\n                if (activeElement && !this.showCheckBox) {\n                    activeElement.classList.add(classNames.selected);\n                }\n            }\n        }\n    };\n    ListView.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'keydown', this.keyActionHandler, this);\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        if (!this.enableVirtualization) {\n            EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n            EventHandler.add(this.element, 'mouseout', this.leaveHandler, this);\n        }\n        EventHandler.add(this.element, 'focusout', this.focusout, this);\n        this.touchModule = new Touch(this.element, { swipe: this.swipeActionHandler.bind(this) });\n    };\n    ListView.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        if (!this.enableVirtualization) {\n            EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n            EventHandler.remove(this.element, 'mouseout', this.leaveHandler);\n        }\n        EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.element, 'mouseout', this.leaveHandler);\n        this.touchModule.destroy();\n    };\n    ListView.prototype.tabFocus = function (e) {\n        if (this.curUL && ((!this.curUL.querySelector('.' + classNames.focused) && this.showCheckBox) ||\n            (!this.curUL.querySelector('.' + classNames.selected) && !this.showCheckBox &&\n                !this.curUL.querySelector('.' + classNames.hasChild)) ||\n            (this.curUL.querySelector('.' + classNames.hasChild) &&\n                !this.curUL.querySelector('.' + classNames.focused) &&\n                !this.curUL.querySelector('.' + classNames.selected)))) {\n            e.preventDefault();\n        }\n        if (Object.keys(this.dataSource).length && this.curUL) {\n            var selectedList = this.curUL.querySelector('.' + classNames.selected);\n            if ((!selectedList && this.curUL) || this.showCheckBox) {\n                var li = selectedList || this.curUL.querySelector('.' + classNames.listItem);\n                if (li.classList.contains(classNames.hasChild) || this.showCheckBox) {\n                    var focusedElement = this.curUL.querySelector('.' + classNames.focused);\n                    if (isNullOrUndefined(focusedElement)) {\n                        li.classList.add(classNames.focused);\n                    }\n                }\n                else {\n                    this.setSelectLI(li, e);\n                }\n            }\n        }\n    };\n    ListView.prototype.removeFocus = function () {\n        var focusedLI = this.element.querySelectorAll('.' + classNames.focused);\n        for (var _i = 0, focusedLI_1 = focusedLI; _i < focusedLI_1.length; _i++) {\n            var ele = focusedLI_1[_i];\n            ele.classList.remove(classNames.focused);\n        }\n    };\n    ListView.prototype.removeHover = function () {\n        var hoverLI = this.element.querySelector('.' + classNames.hover);\n        if (hoverLI) {\n            hoverLI.classList.remove(classNames.hover);\n        }\n    };\n    ListView.prototype.removeSelect = function (li) {\n        if (isNullOrUndefined(li)) {\n            var selectedLI = this.element.querySelectorAll('.' + classNames.selected);\n            for (var _i = 0, selectedLI_1 = selectedLI; _i < selectedLI_1.length; _i++) {\n                var ele = selectedLI_1[_i];\n                if (this.showCheckBox && ele.querySelector('.' + classNames.checked)) {\n                    continue;\n                }\n                else {\n                    ele.setAttribute('aria-selected', 'false');\n                    ele.classList.remove(classNames.selected);\n                }\n            }\n        }\n        else {\n            li.classList.remove(classNames.selected);\n            li.setAttribute('aria-selected', 'false');\n        }\n    };\n    ListView.prototype.isValidLI = function (li) {\n        return (li && li.classList.contains(classNames.listItem)\n            && !li.classList.contains(classNames.groupListItem)\n            && !li.classList.contains(classNames.disable));\n    };\n    ListView.prototype.setCheckboxLI = function (li, e) {\n        if (this.isValidLI(li) && this.enable && this.showCheckBox) {\n            if (this.curUL.querySelector('.' + classNames.focused)) {\n                this.curUL.querySelector('.' + classNames.focused).classList.remove(classNames.focused);\n            }\n            li.classList.add(classNames.focused);\n            var checkboxElement = li.querySelector('.' + classNames.checkboxWrapper);\n            var checkIcon = checkboxElement.querySelector('.' + classNames.checkboxIcon + '.' + classNames.icon);\n            this.removeHover();\n            if (!checkIcon.classList.contains(classNames.checked)) {\n                checkIcon.classList.add(classNames.checked);\n                li.classList.add(classNames.selected);\n                li.setAttribute('aria-selected', 'true');\n            }\n            else {\n                checkIcon.classList.remove(classNames.checked);\n                li.classList.remove(classNames.selected);\n                li.setAttribute('aria-selected', 'false');\n            }\n            checkboxElement.setAttribute('aria-checked', checkIcon.classList.contains(classNames.checked) ?\n                'true' : 'false');\n            var eventArgs = this.selectEventData(li, e);\n            merge(eventArgs, { isChecked: checkIcon.classList.contains(classNames.checked) });\n            if (this.enableVirtualization) {\n                this.virtualizationModule.setCheckboxLI(li, e);\n            }\n            this.trigger('select', eventArgs);\n            this.setSelectedItemData(li);\n            this.renderSubList(li);\n        }\n    };\n    ListView.prototype.selectEventData = function (li, e) {\n        var data = this.getItemData(li);\n        var fieldData = getFieldValues(data, this.listBaseOption.fields);\n        var selectedItem;\n        if (!isNullOrUndefined(data)\n            && typeof this.dataSource[0] === 'string' || typeof this.dataSource[0] === 'number') {\n            selectedItem = { item: li, text: li && li.innerText.trim(), data: this.dataSource };\n        }\n        else {\n            selectedItem = { item: li, text: fieldData && fieldData[this.listBaseOption.fields.text], data: data };\n        }\n        var eventArgs = {};\n        merge(eventArgs, selectedItem);\n        if (e) {\n            merge(eventArgs, { isInteracted: true, event: e, index: Array.prototype.indexOf.call(this.curUL.children, li) });\n        }\n        return eventArgs;\n    };\n    ListView.prototype.setSelectedItemData = function (li) {\n        var data = this.getItemData(li);\n        var fieldData = getFieldValues(data, this.listBaseOption.fields);\n        if (!isNullOrUndefined(data) && ((typeof this.dataSource[0] === 'string') ||\n            (typeof this.dataSource[0] === 'number'))) {\n            this.selectedItems = {\n                item: li,\n                text: li && li.innerText.trim(),\n                data: this.dataSource\n            };\n        }\n        else {\n            this.selectedItems = {\n                item: li,\n                text: fieldData && fieldData[this.listBaseOption.fields.text],\n                data: data\n            };\n        }\n    };\n    ListView.prototype.setSelectLI = function (li, e) {\n        if (this.isValidLI(li) && !li.classList.contains(classNames.selected) && this.enable) {\n            if (!this.showCheckBox) {\n                this.removeSelect();\n            }\n            li.classList.add(classNames.selected);\n            li.setAttribute('aria-selected', 'true');\n            this.removeHover();\n            this.setSelectedItemData(li);\n            if (this.enableVirtualization) {\n                this.virtualizationModule.setSelectLI(li, e);\n            }\n            var eventArgs = this.selectEventData(li, e);\n            this.trigger('select', eventArgs);\n            this.selectedLI = li;\n            this.renderSubList(li);\n        }\n    };\n    ListView.prototype.setHoverLI = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(classNames.hover) && this.enable) {\n            var lastLi = this.element.querySelectorAll('.' + classNames.hover);\n            if (lastLi && lastLi.length) {\n                removeClass(lastLi, classNames.hover);\n            }\n            if (!li.classList.contains(classNames.selected) || this.showCheckBox) {\n                li.classList.add(classNames.hover);\n            }\n        }\n    };\n    //Data Source Related Functions\n    ListView.prototype.getSubDS = function () {\n        var levelKeys = this.curDSLevel;\n        if (levelKeys.length) {\n            var ds = this.localData;\n            for (var _i = 0, levelKeys_1 = levelKeys; _i < levelKeys_1.length; _i++) {\n                var key = levelKeys_1[_i];\n                var field = {};\n                field[this.fields.id] = key;\n                this.curDSJSON = this.findItemFromDS(ds, field);\n                var fieldData = getFieldValues(this.curDSJSON, this.listBaseOption.fields);\n                ds = this.curDSJSON ? fieldData[this.fields.child] : ds;\n            }\n            return ds;\n        }\n        return this.localData;\n    };\n    ListView.prototype.getItemData = function (li) {\n        var dataSource = this.dataSource instanceof DataManager ?\n            this.localData : this.dataSource;\n        var fields = this.getElementUID(li);\n        var curDS;\n        if (isNullOrUndefined(this.element.querySelector('.' + classNames.hasChild)) && this.fields.groupBy) {\n            curDS = this.curViewDS;\n        }\n        else {\n            curDS = dataSource;\n        }\n        return this.findItemFromDS(curDS, fields);\n    };\n    ListView.prototype.findItemFromDS = function (dataSource, fields, parent) {\n        var _this = this;\n        var resultJSON;\n        if (dataSource && dataSource.length && fields) {\n            dataSource.some(function (data) {\n                var fieldData = getFieldValues(data, _this.listBaseOption.fields);\n                //(!(fid) || id === fid) && (!(ftext) || text === ftext) && (!!fid || !!ftext)\n                if ((fields[_this.fields.id] || fields[_this.fields.text]) &&\n                    (!fields[_this.fields.id] || (!isNullOrUndefined(fieldData[_this.fields.id]) &&\n                        fieldData[_this.fields.id].toString()) === fields[_this.fields.id].toString()) &&\n                    (!fields[_this.fields.text] || fieldData[_this.fields.text] === fields[_this.fields.text])) {\n                    resultJSON = (parent ? dataSource : data);\n                }\n                else if (typeof data !== 'object' && dataSource.indexOf(data) !== -1) {\n                    resultJSON = (parent ? dataSource : data);\n                }\n                else if (!isNullOrUndefined(fields[_this.fields.id]) && isNullOrUndefined(fieldData[_this.fields.id])) {\n                    var li = _this.element.querySelector('[data-uid=\"'\n                        + fields[_this.fields.id] + '\"]');\n                    if (li && li.innerText.trim() === fieldData[_this.fields.text]) {\n                        resultJSON = data;\n                    }\n                }\n                else if (fieldData.hasOwnProperty(_this.fields.child) && fieldData[_this.fields.child].length) {\n                    resultJSON = _this.findItemFromDS(fieldData[_this.fields.child], fields, parent);\n                }\n                return !!resultJSON;\n            });\n        }\n        else {\n            resultJSON = dataSource;\n        }\n        return resultJSON;\n    };\n    ListView.prototype.getQuery = function () {\n        var columns = [];\n        var query = (this.query ? this.query : new Query());\n        if (!this.query) {\n            for (var _i = 0, _a = Object.keys(this.fields.properties); _i < _a.length; _i++) {\n                var column = _a[_i];\n                if (column !== 'tableName' && !!(this.fields[column]) &&\n                    this.fields[column] !==\n                        ListBase.defaultMappedFields[column]\n                    && columns.indexOf(this.fields[column]) === -1) {\n                    columns.push(this.fields[column]);\n                }\n            }\n            query.select(columns);\n            if (this.fields.properties.hasOwnProperty('tableName')) {\n                query.from(this.fields.tableName);\n            }\n        }\n        return query;\n    };\n    ListView.prototype.setViewDataSource = function (dataSource) {\n        if (dataSource === void 0) { dataSource = this.localData; }\n        if (dataSource && this.fields.groupBy) {\n            if (this.sortOrder !== 'None') {\n                this.curViewDS = ListBase.groupDataSource(ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, this.fields.sortBy)), this.listBaseOption.fields, this.sortOrder);\n            }\n            else {\n                this.curViewDS = ListBase.groupDataSource(dataSource, this.listBaseOption.fields, this.sortOrder);\n            }\n        }\n        else if (dataSource && this.sortOrder !== 'None') {\n            this.curViewDS = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, this.fields.sortBy));\n        }\n        else {\n            this.curViewDS = dataSource;\n        }\n    };\n    ListView.prototype.isInAnimation = function () {\n        return this.curUL.classList.contains('.e-animate');\n    };\n    ListView.prototype.setLocalData = function () {\n        var _this = this;\n        this.trigger('actionBegin');\n        if (this.dataSource instanceof DataManager) {\n            this.dataSource.executeQuery(this.getQuery()).then(function (e) {\n                if (_this.isDestroyed) {\n                    return;\n                }\n                _this.localData = e.result;\n                _this.renderList();\n                _this.trigger('actionComplete', e);\n            }).catch(function (e) {\n                if (_this.isDestroyed) {\n                    return;\n                }\n                _this.trigger('actionFailure', e);\n            });\n        }\n        else if (!this.dataSource || !this.dataSource.length) {\n            var ul = this.element.querySelector('ul');\n            if (ul) {\n                remove(ul);\n                this.setProperties({ dataSource: ListBase.createJsonFromElement(ul) }, true);\n                this.localData = this.dataSource;\n                this.renderList();\n                this.trigger('actionComplete', { data: this.localData });\n            }\n        }\n        else {\n            this.localData = this.dataSource;\n            this.renderList();\n            this.trigger('actionComplete', { data: this.localData });\n        }\n    };\n    ListView.prototype.reRender = function () {\n        this.element.innerHTML = '';\n        this.headerEle = this.ulElement = this.liCollection = undefined;\n        this.setLocalData();\n        this.header();\n    };\n    ListView.prototype.resetCurrentList = function () {\n        this.setViewDataSource(this.curViewDS);\n        this.contentContainer.innerHTML = '';\n        this.createList();\n        this.renderIntoDom(this.curUL);\n    };\n    ListView.prototype.createList = function () {\n        this.currentLiElements = [];\n        this.isNestedList = false;\n        this.ulElement = this.curUL = ListBase.createList(this.createElement, this.curViewDS, this.listBaseOption);\n        this.liCollection = this.curUL.querySelectorAll('.' + classNames.listItem);\n    };\n    ListView.prototype.renderSubList = function (li) {\n        var uID = li.getAttribute('data-uid');\n        if (li.classList.contains(classNames.hasChild) && uID) {\n            var ul = closest(li.parentNode, '.' + classNames.parentItem);\n            var ele = this.element.querySelector('[pid=\\'' + uID + '\\']');\n            this.curDSLevel.push(uID);\n            this.setViewDataSource(this.getSubDS());\n            if (!ele) {\n                var data = this.curViewDS;\n                ele = ListBase.createListFromJson(this.createElement, data, this.listBaseOption, this.curDSLevel.length);\n                ele.setAttribute('pID', uID);\n                ele.style.display = 'none';\n                this.renderIntoDom(ele);\n            }\n            this.switchView(ul, ele);\n            this.liCollection = this.curUL.querySelectorAll('.' + classNames.listItem);\n            if (this.selectedItems) {\n                var fieldData = getFieldValues(this.selectedItems.data, this.listBaseOption.fields);\n                this.header((fieldData[this.listBaseOption.fields.text]), true);\n            }\n            this.selectedLI = undefined;\n        }\n    };\n    ListView.prototype.renderIntoDom = function (ele) {\n        this.contentContainer.appendChild(ele);\n    };\n    ListView.prototype.renderList = function (data) {\n        this.setViewDataSource(data);\n        if (this.enableVirtualization && Object.keys(this.dataSource).length) {\n            if ((this.template || this.groupTemplate) && !this.virtualizationModule.isNgTemplate()) {\n                this.listBaseOption.template = null;\n                this.listBaseOption.groupTemplate = null;\n                this.listBaseOption.itemCreated = this.virtualizationModule.createUIItem.bind(this.virtualizationModule);\n            }\n            this.virtualizationModule.uiVirtualization();\n        }\n        else {\n            this.createList();\n            this.contentContainer = this.createElement('div', { className: classNames.content });\n            this.element.appendChild(this.contentContainer);\n            this.renderIntoDom(this.ulElement);\n        }\n    };\n    ListView.prototype.getElementUID = function (obj) {\n        var fields = {};\n        if (obj instanceof Element) {\n            fields[this.fields.id] = obj.getAttribute('data-uid');\n        }\n        else {\n            fields = obj;\n        }\n        return fields;\n    };\n    /**\n     * It is used to Initialize the control rendering.\n     */\n    ListView.prototype.render = function () {\n        this.element.classList.add(classNames.root);\n        attributes(this.element, { role: 'list', tabindex: '0' });\n        this.setCSSClass();\n        this.setEnableRTL();\n        this.setEnable();\n        this.setSize();\n        this.wireEvents();\n        this.header();\n        this.setLocalData();\n        this.setHTMLAttribute();\n        this.rippleFn = rippleEffect(this.element, {\n            selector: '.' + classNames.listItem\n        });\n    };\n    /**\n     * It is used to destroy the ListView component.\n     */\n    ListView.prototype.destroy = function () {\n        this.unWireEvents();\n        var classAr = [classNames.root, classNames.disable, 'e-rtl',\n            'e-has-header', 'e-lib'].concat(this.cssClass.split(' ').filter(function (css) { return css; }));\n        removeClass([this.element], classAr);\n        this.rippleFn();\n        this.element.removeAttribute('role');\n        this.element.removeAttribute('tabindex');\n        this.element.innerHTML = '';\n        this.curUL = this.ulElement = this.liCollection = this.headerEle = undefined;\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * It helps to switch back from navigated sub list.\n     */\n    ListView.prototype.back = function () {\n        var pID = this.curDSLevel[this.curDSLevel.length - 1];\n        if (pID === undefined || this.isInAnimation()) {\n            return;\n        }\n        this.curDSLevel.pop();\n        this.setViewDataSource(this.getSubDS());\n        var toUL = this.element.querySelector('[data-uid=\\'' + pID + '\\']');\n        var fromUL = this.curUL;\n        if (!toUL) {\n            this.createList();\n            this.renderIntoDom(this.ulElement);\n            toUL = this.curUL;\n        }\n        else {\n            toUL = toUL.parentElement;\n        }\n        var fieldData = getFieldValues(this.curDSJSON, this.listBaseOption.fields);\n        var text = fieldData[this.fields.text];\n        this.switchView(fromUL, toUL, true);\n        this.removeFocus();\n        var li = this.element.querySelector('[data-uid=\\'' + pID + '\\']');\n        li.classList.add(classNames.focused);\n        if (this.showCheckBox && li.querySelector('.' + classNames.checkboxIcon).classList.contains(classNames.checked)) {\n            li.setAttribute('aria-selected', 'true');\n        }\n        else {\n            li.classList.remove(classNames.selected);\n            li.setAttribute('aria-selected', 'false');\n        }\n        this.liCollection = this.curUL.querySelectorAll('.' + classNames.listItem);\n        this.header((this.curDSLevel.length ? text : this.headerTitle), (this.curDSLevel.length ? true : false));\n    };\n    /**\n     * It is used to select the list item from the ListView.\n     * @param  {Fields | HTMLElement | Element} obj - We can pass element Object or Fields as Object with ID and Text fields.\n     */\n    ListView.prototype.selectItem = function (obj) {\n        if (this.enableVirtualization) {\n            this.virtualizationModule.selectItem(obj);\n        }\n        else if (this.showCheckBox) {\n            this.setCheckboxLI(this.getLiFromObjOrElement(obj));\n        }\n        else {\n            isNullOrUndefined(obj) ? this.removeSelect() : this.setSelectLI(this.getLiFromObjOrElement(obj));\n        }\n    };\n    ListView.prototype.getLiFromObjOrElement = function (obj) {\n        var li;\n        var dataSource = this.dataSource instanceof DataManager ?\n            this.localData : this.dataSource;\n        if (!isNullOrUndefined(obj)) {\n            if (typeof dataSource[0] === 'string' || typeof dataSource[0] === 'number') {\n                if (obj instanceof Element) {\n                    var uid = obj.getAttribute('data-uid').toString();\n                    for (var i = 0; i < this.liCollection.length; i++) {\n                        if (this.liCollection[i].getAttribute('data-uid').toString() === uid) {\n                            li = this.liCollection[i];\n                            break;\n                        }\n                    }\n                }\n                else {\n                    Array.prototype.some.call(this.curUL.querySelectorAll('.' + classNames.listItem), function (item) {\n                        if (item.innerText.trim() === obj.toString()) {\n                            li = item;\n                            return true;\n                        }\n                        else {\n                            return false;\n                        }\n                    });\n                }\n            }\n            else {\n                var resultJSON = this.getItemData(obj);\n                var fieldData = getFieldValues(resultJSON, this.listBaseOption.fields);\n                if (resultJSON) {\n                    li = this.element.querySelector('[data-uid=\"'\n                        + fieldData[this.fields.id] + '\"]');\n                    if (!this.enableVirtualization && isNullOrUndefined(li)) {\n                        var curLi = this.element.querySelectorAll('.' + classNames.listItem);\n                        for (var i = 0; i < curLi.length; i++) {\n                            if (curLi[i].innerText.trim() === fieldData[this.fields.text]) {\n                                li = curLi[i];\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return li;\n    };\n    /**\n     * It is used to select multiple list item from the ListView.\n     * @param  {Fields[] | HTMLElement[] | Element[]} obj - We can pass array of elements or array of field Object with ID and Text fields.\n     */\n    ListView.prototype.selectMultipleItems = function (obj) {\n        if (!isNullOrUndefined(obj)) {\n            for (var i = 0; i < obj.length; i++) {\n                if (!isNullOrUndefined(obj[i])) {\n                    this.selectItem(obj[i]);\n                }\n            }\n        }\n    };\n    ListView.prototype.getParentId = function () {\n        var parentId = [];\n        if (this.isNestedList) {\n            for (var i = this.curDSLevel.length - 1; i >= 0; i--) {\n                parentId.push(this.curDSLevel[i]);\n            }\n        }\n        return parentId;\n    };\n    /**\n     * It is used to get the currently [here](./api-selectedItem)\n     *  item details from the list items.\n     */\n    ListView.prototype.getSelectedItems = function () {\n        this.selectedId = [];\n        var dataSource = this.dataSource instanceof DataManager ?\n            this.localData : this.dataSource;\n        if (this.enableVirtualization) {\n            return this.virtualizationModule.getSelectedItems();\n        }\n        else if (this.showCheckBox) {\n            var liCollection = this.curUL.getElementsByClassName(classNames.selected);\n            var liTextCollection = [];\n            var liDataCollection = [];\n            this.selectedId = [];\n            var dataParent = [];\n            for (var i = 0; i < liCollection.length; i++) {\n                if (typeof dataSource[0] === 'string' || typeof dataSource[0] === 'number') {\n                    liTextCollection.push(liCollection[i].innerText.trim());\n                }\n                else {\n                    var tempData = this.getItemData(liCollection[i]);\n                    var fieldData = getFieldValues(tempData, this.listBaseOption.fields);\n                    if (this.isNestedList) {\n                        dataParent.push({ data: tempData, parentId: this.getParentId() });\n                    }\n                    else {\n                        liDataCollection.push(tempData);\n                    }\n                    if (fieldData) {\n                        liTextCollection.push(fieldData[this.listBaseOption.fields.text]);\n                        this.selectedId.push(fieldData[this.listBaseOption.fields.id]);\n                    }\n                    else {\n                        liTextCollection.push(undefined);\n                        this.selectedId.push(undefined);\n                    }\n                }\n            }\n            if (typeof dataSource[0] === 'string' || typeof dataSource[0] === 'number') {\n                return { item: liCollection, data: dataSource, text: liTextCollection };\n            }\n            if (this.isNestedList) {\n                return { item: liCollection, data: dataParent, text: liTextCollection };\n            }\n            else {\n                return { item: liCollection, data: liDataCollection, text: liTextCollection };\n            }\n        }\n        else {\n            var liElement = this.element.getElementsByClassName(classNames.selected)[0];\n            var fieldData = getFieldValues(this.getItemData(liElement), this.listBaseOption.fields);\n            if (typeof dataSource[0] === 'string' || typeof dataSource[0] === 'number') {\n                return (!isNullOrUndefined(liElement)) ? {\n                    item: liElement, data: dataSource,\n                    text: liElement.innerText.trim()\n                } : undefined;\n            }\n            else {\n                if (isNullOrUndefined(fieldData) || isNullOrUndefined(liElement)) {\n                    return undefined;\n                }\n                else {\n                    this.selectedId.push(fieldData[this.listBaseOption.fields.id]);\n                    return {\n                        text: fieldData[this.listBaseOption.fields.text], item: liElement,\n                        data: this.getItemData(liElement)\n                    };\n                }\n            }\n        }\n    };\n    /**\n     * It is used to find out an item details from the current list.\n     * @param  {Fields | HTMLElement | Element} obj - We can pass element Object or Fields as Object with ID and Text fields.\n     */\n    ListView.prototype.findItem = function (obj) {\n        return this.getItemData(obj);\n    };\n    /**\n     * A function that used to enable the disabled list items based on passed element.\n     * @param  {Fields | HTMLElement | Element} obj - We can pass element Object or Fields as Object with ID and Text fields.\n     */\n    ListView.prototype.enableItem = function (obj) {\n        this.setItemState(obj, true);\n        if (this.enableVirtualization) {\n            this.virtualizationModule.enableItem(obj);\n        }\n    };\n    /**\n     * It is used to disable the list items based on passed element.\n     * @param  {Fields | HTMLElement | Element} obj - We can pass element Object or Fields as Object with ID and Text fields.\n     */\n    ListView.prototype.disableItem = function (obj) {\n        this.setItemState(obj, false);\n        if (this.enableVirtualization) {\n            this.virtualizationModule.disableItem(obj);\n        }\n    };\n    //A function that used to set state of the list item like enable, disable.\n    ListView.prototype.setItemState = function (obj, isEnable) {\n        var resultJSON = this.getItemData(obj);\n        var fieldData = getFieldValues(resultJSON, this.listBaseOption.fields);\n        if (resultJSON) {\n            var li = this.element.querySelector('[data-uid=\"' + fieldData[this.fields.id] + '\"]');\n            if (isEnable) {\n                if (li) {\n                    li.classList.remove(classNames.disable);\n                }\n                delete resultJSON[this.fields.enabled];\n            }\n            else if (!isEnable) {\n                if (li) {\n                    li.classList.add(classNames.disable);\n                }\n                resultJSON[this.fields.enabled] = false;\n            }\n        }\n    };\n    /**\n     * It is used to show an list item from the ListView.\n     * @param  {Fields | HTMLElement | Element} obj - We can pass element Object or Fields as Object with ID and Text fields.\n     */\n    ListView.prototype.showItem = function (obj) {\n        this.showHideItem(obj, false, '');\n        if (this.enableVirtualization) {\n            this.virtualizationModule.showItem(obj);\n        }\n    };\n    /**\n     * It is used to hide an item from the ListView.\n     * @param  {Fields | HTMLElement | Element} obj - We can pass element Object or Fields as Object with ID and Text fields.\n     */\n    ListView.prototype.hideItem = function (obj) {\n        this.showHideItem(obj, true, 'none');\n        if (this.enableVirtualization) {\n            this.virtualizationModule.hideItem(obj);\n        }\n    };\n    ListView.prototype.showHideItem = function (obj, isHide, display) {\n        var resultJSON = this.getItemData(obj);\n        var fieldData = getFieldValues(resultJSON, this.listBaseOption.fields);\n        if (resultJSON) {\n            var li = this.element.querySelector('[data-uid=\"' + fieldData[this.fields.id] + '\"]');\n            if (li) {\n                li.style.display = display;\n            }\n            if (isHide) {\n                resultJSON[this.fields.isVisible] = false;\n            }\n            else {\n                delete resultJSON[this.fields.isVisible];\n            }\n        }\n    };\n    /**\n     * It adds new item to current ListView.\n     * To add a new item in the list view, we need to pass data as array or object and fields as object.\n     * For example fields: { text: 'Name', tooltip: 'Name', id:'id'}\n     * @param  {{[key:string]:Object}[]} data - Array JSON Data that need to add.\n     * @param  {Fields} fields - Fields as an Object with ID and Text fields.\n     */\n    ListView.prototype.addItem = function (data, fields) {\n        var _this = this;\n        if (fields === void 0) { fields = undefined; }\n        if (!(this.dataSource instanceof DataManager)) {\n            if (data instanceof Array) {\n                if (this.enableVirtualization) {\n                    this.virtualizationModule.addItem(data, fields);\n                }\n                else {\n                    var ds = this.findItemFromDS(this.dataSource, fields);\n                    var fieldData = getFieldValues(ds, this.listBaseOption.fields);\n                    var child = fieldData[this.fields.child];\n                    if (!child) {\n                        child = [];\n                    }\n                    child = child.concat(data);\n                    if (ds instanceof Array) {\n                        data.forEach(function (dataSource) {\n                            _this.dataSource.push(dataSource);\n                            _this.setViewDataSource(_this.dataSource);\n                            if (_this.ulElement) {\n                                var index = _this.curViewDS.indexOf(dataSource);\n                                _this.addListItem(dataSource, index);\n                                var curViewDS = _this.curViewDS[index - 1];\n                                if (curViewDS && curViewDS.isHeader && curViewDS.items.length === 1) {\n                                    _this.addListItem(curViewDS, (index - 1));\n                                }\n                            }\n                            else {\n                                _this.reRender();\n                            }\n                        });\n                        this.liCollection = this.curUL.querySelectorAll('.' + classNames.listItem);\n                    }\n                    else {\n                        ds[this.fields.child] = child;\n                        this.reRender();\n                    }\n                }\n            }\n        }\n    };\n    ListView.prototype.addListItem = function (dataSource, index) {\n        var target = this.getLiFromObjOrElement(this.curViewDS[index + 1]) ||\n            this.getLiFromObjOrElement(this.curViewDS[index + 2]) || null;\n        var li = ListBase.createListItemFromJson(this.createElement, [dataSource], this.listBaseOption);\n        this.ulElement.insertBefore(li[0], target);\n    };\n    /**\n     * A function that removes the item from data source based on passed element like fields: { text: 'Name', tooltip: 'Name', id:'id'}\n     * @param  {Fields | HTMLElement | Element} obj - We can pass element Object or Fields as Object with ID and Text fields.\n     */\n    ListView.prototype.removeItem = function (obj) {\n        if (!(this.dataSource instanceof DataManager)) {\n            if (this.enableVirtualization) {\n                this.virtualizationModule.removeItem(obj);\n            }\n            else {\n                this.removeItemFromList(obj);\n            }\n        }\n    };\n    ListView.prototype.removeItemFromList = function (obj) {\n        var fields = obj instanceof Element ? this.getElementUID(obj) : obj;\n        var dataSource;\n        dataSource = this.findItemFromDS(this.dataSource, fields, true);\n        if (dataSource) {\n            var data = void 0;\n            data = this.findItemFromDS(dataSource, fields);\n            var index = this.curViewDS.indexOf(data);\n            var li = this.getLiFromObjOrElement(obj);\n            var groupLi = void 0;\n            if (this.fields.groupBy && this.curViewDS[index - 1] &&\n                this.curViewDS[index - 1].isHeader &&\n                (this.curViewDS[index - 1])\n                    .items.length === 1) {\n                if (li && li.previousElementSibling.classList.contains(classNames.groupListItem) &&\n                    (isNullOrUndefined(li.nextElementSibling) || (li.nextElementSibling &&\n                        li.nextElementSibling.classList.contains(classNames.groupListItem)))) {\n                    groupLi = li.previousElementSibling;\n                }\n            }\n            if (li) {\n                detach(li);\n            }\n            if (groupLi) {\n                detach(groupLi);\n            }\n            var dsIndex = dataSource.indexOf(data);\n            dataSource.splice(dsIndex, 1);\n            this.setViewDataSource(this.dataSource);\n            this.liCollection = Array.prototype.slice.call(this.element.querySelectorAll('.' + classNames.listItem));\n        }\n    };\n    /**\n     * A function that removes multiple item from list view based on given input.\n     * @param  {Fields[] | HTMLElement[] | Element[]} obj - We can pass array of elements or array of field Object with ID and Text fields.\n     */\n    ListView.prototype.removeMultipleItems = function (obj) {\n        if (!(this.dataSource instanceof DataManager)) {\n            if (obj.length) {\n                for (var i = 0; i < obj.length; i++) {\n                    if (this.enableVirtualization) {\n                        this.removeItem(obj[i]);\n                    }\n                    else {\n                        this.removeItemFromList(obj[i]);\n                    }\n                }\n            }\n        }\n    };\n    // Module Required function\n    ListView.prototype.getModuleName = function () {\n        return 'listview';\n    };\n    ListView.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableVirtualization) {\n            modules.push({ args: [this], member: 'virtualization' });\n        }\n        return modules;\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     */\n    ListView.prototype.getPersistData = function () {\n        return this.addOnPersist(['cssClass', 'enableRtl', 'htmlAttributes',\n            'enable', 'fields', 'animation', 'headerTitle',\n            'sortOrder', 'showIcon', 'height', 'width', 'showCheckBox', 'checkBoxPosition']);\n    };\n    __decorate([\n        Property('')\n    ], ListView.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ListView.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property({})\n    ], ListView.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property(true)\n    ], ListView.prototype, \"enable\", void 0);\n    __decorate([\n        Property([])\n    ], ListView.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], ListView.prototype, \"query\", void 0);\n    __decorate([\n        Complex(ListBase.defaultMappedFields, FieldSettings)\n    ], ListView.prototype, \"fields\", void 0);\n    __decorate([\n        Property({ effect: 'SlideLeft', duration: 400, easing: 'ease' })\n    ], ListView.prototype, \"animation\", void 0);\n    __decorate([\n        Property('None')\n    ], ListView.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property(false)\n    ], ListView.prototype, \"showIcon\", void 0);\n    __decorate([\n        Property(false)\n    ], ListView.prototype, \"showCheckBox\", void 0);\n    __decorate([\n        Property('Left')\n    ], ListView.prototype, \"checkBoxPosition\", void 0);\n    __decorate([\n        Property('')\n    ], ListView.prototype, \"headerTitle\", void 0);\n    __decorate([\n        Property(false)\n    ], ListView.prototype, \"showHeader\", void 0);\n    __decorate([\n        Property('')\n    ], ListView.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], ListView.prototype, \"width\", void 0);\n    __decorate([\n        Property(null)\n    ], ListView.prototype, \"template\", void 0);\n    __decorate([\n        Property(null)\n    ], ListView.prototype, \"headerTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], ListView.prototype, \"groupTemplate\", void 0);\n    __decorate([\n        Event()\n    ], ListView.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], ListView.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], ListView.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], ListView.prototype, \"actionFailure\", void 0);\n    ListView = __decorate([\n        NotifyPropertyChanges\n    ], ListView);\n    return ListView;\n}(Component));\nexport { ListView };\n","import { classNames } from './list-view';\nimport { EventHandler, append, isNullOrUndefined, detach, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ListBase } from '../common/list-base';\nvar Virtualization = /** @class */ (function () {\n    function Virtualization(instance) {\n        this.listViewInstance = instance;\n    }\n    /**\n     * For internal use only.\n     * @private\n     */\n    Virtualization.prototype.isNgTemplate = function () {\n        return !isNullOrUndefined(this.listViewInstance.templateRef) && typeof this.listViewInstance.templateRef !== 'string'\n            && isNullOrUndefined(this.listViewInstance.fields.groupBy);\n    };\n    /**\n     * For internal use only.\n     * @private\n     */\n    Virtualization.prototype.uiVirtualization = function () {\n        var curViewDS = this.listViewInstance.curViewDS;\n        var firstDs = curViewDS.slice(0, 1);\n        this.listViewInstance.ulElement = this.listViewInstance.curUL = ListBase.createList(this.listViewInstance.createElement, firstDs, this.listViewInstance.listBaseOption);\n        this.listViewInstance.contentContainer = this.listViewInstance.createElement('div', { className: classNames.content });\n        this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer);\n        this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement);\n        this.listItemHeight = this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height;\n        this.expectedDomItemCount = this.ValidateItemCount(10000);\n        this.domItemCount = this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length);\n        this.uiFirstIndex = 0;\n        this.uiLastIndex = this.domItemCount - 1;\n        this.wireScrollEvent(false);\n        var otherDs = curViewDS.slice(1, this.domItemCount);\n        var listItems = ListBase.createListItemFromJson(this.listViewInstance.createElement, otherDs, this.listViewInstance.listBaseOption);\n        append(listItems, this.listViewInstance.ulElement);\n        this.listViewInstance.liCollection = this.listViewInstance.curUL.querySelectorAll('li');\n        this.topElement = this.listViewInstance.createElement('div');\n        this.listViewInstance.ulElement.insertBefore(this.topElement, this.listViewInstance.ulElement.firstElementChild);\n        this.bottomElement = this.listViewInstance.createElement('div');\n        this.listViewInstance.ulElement.insertBefore(this.bottomElement, null);\n        this.totalHeight = (Object.keys(curViewDS).length * this.listItemHeight) - (this.domItemCount * this.listItemHeight);\n        this.topElement.style.height = 0 + 'px';\n        this.bottomElement.style.height = this.totalHeight + 'px';\n        this.topElementHeight = 0;\n        this.bottomElementHeight = this.totalHeight;\n        this.listDiff = 0;\n        this.uiIndicesInitialization();\n    };\n    Virtualization.prototype.wireScrollEvent = function (destroy) {\n        if (!destroy) {\n            if (this.listViewInstance.isWindow) {\n                this.onVirtualScroll = this.onVirtualUiScroll.bind(this);\n                window.addEventListener('scroll', this.onVirtualScroll);\n            }\n            else {\n                EventHandler.add(this.listViewInstance.element, 'scroll', this.onVirtualUiScroll, this);\n            }\n        }\n        else {\n            this.listViewInstance.isWindow ? window.removeEventListener('scroll', this.onVirtualScroll) :\n                EventHandler.remove(this.listViewInstance.element, 'scroll', this.onVirtualUiScroll);\n        }\n    };\n    Virtualization.prototype.ValidateItemCount = function (dataSourceLength) {\n        var itemCount = this.listViewInstance.isWindow ? Math.round((window.innerHeight / this.listItemHeight) * 3) :\n            Math.round((this.listViewInstance.height / this.listItemHeight) * 1.5);\n        if (itemCount > dataSourceLength) {\n            itemCount = dataSourceLength;\n        }\n        return itemCount;\n    };\n    Virtualization.prototype.uiIndicesInitialization = function () {\n        var _this = this;\n        this.uiIndices = { 'activeIndices': [], 'disabledItemIndices': [], 'hiddenItemIndices': [] };\n        this.listViewInstance.curViewDS.forEach(function (ds, index) {\n            if (_this.listViewInstance.showCheckBox && ds[_this.listViewInstance.fields.isChecked]) {\n                _this.uiIndices.activeIndices.push(index);\n            }\n            if (!isNullOrUndefined(ds[_this.listViewInstance.fields.enabled]) && !ds[_this.listViewInstance.fields.enabled]) {\n                _this.uiIndices.disabledItemIndices.push(index);\n            }\n        });\n        if (this.isNgTemplate()) {\n            Array.prototype.forEach.call(this.listViewInstance.element.querySelectorAll('.' + classNames.listItem), function (item, index) {\n                item.context = _this.listViewInstance.viewContainerRef._embeddedViews[index].context;\n            });\n        }\n    };\n    Virtualization.prototype.refreshItemHeight = function () {\n        if (this.listViewInstance.curViewDS.length) {\n            var curViewDS = this.listViewInstance.curViewDS;\n            this.listItemHeight = this.topElement.nextSibling.getBoundingClientRect().height;\n            this.totalHeight = (Object.keys(curViewDS).length * this.listItemHeight) - (this.domItemCount * this.listItemHeight);\n            this.bottomElementHeight = this.totalHeight;\n            this.bottomElement.style.height = this.totalHeight + 'px';\n        }\n    };\n    Virtualization.prototype.getscrollerHeight = function (startingHeight) {\n        return this.listViewInstance.isWindow ? (((pageYOffset - startingHeight) <= 0) ? 0 :\n            (pageYOffset - startingHeight)) : ((this.listViewInstance.element.scrollTop - startingHeight) <= 0) ? 0 :\n            (this.listViewInstance.element.scrollTop - startingHeight);\n    };\n    Virtualization.prototype.onVirtualUiScroll = function () {\n        var _a;\n        var startingHeight;\n        if (this.listViewInstance.isWindow) {\n            startingHeight = this.listViewInstance.ulElement.getBoundingClientRect().top -\n                document.documentElement.getBoundingClientRect().top;\n        }\n        else {\n            startingHeight = this.listViewInstance.headerEle ? this.listViewInstance.headerEle.getBoundingClientRect().height : 0;\n        }\n        this.scrollPosition = isNullOrUndefined(this.scrollPosition) ? 0 : this.scrollPosition;\n        var scroll = this.getscrollerHeight(startingHeight);\n        this.topElementHeight = this.listItemHeight * Math.floor(scroll / this.listItemHeight);\n        this.bottomElementHeight = this.totalHeight - this.topElementHeight;\n        _a = scroll <= this.totalHeight ?\n            [this.topElementHeight, this.bottomElementHeight] : [this.totalHeight, 0], this.topElementHeight = _a[0], this.bottomElementHeight = _a[1];\n        if (this.topElementHeight !== parseFloat(this.topElement.style.height)) {\n            this.topElement.style.height = this.topElementHeight + 'px';\n            this.bottomElement.style.height = this.bottomElementHeight + 'px';\n            if (scroll > this.scrollPosition) {\n                var listDiff = ((this.topElementHeight / this.listItemHeight) - this.listDiff);\n                if (listDiff > (this.expectedDomItemCount + 5)) {\n                    this.onLongScroll(listDiff, true);\n                }\n                else {\n                    this.onNormalScroll(listDiff, true);\n                }\n            }\n            else {\n                var listDiff = (this.listDiff - (this.topElementHeight / this.listItemHeight));\n                if (listDiff > (this.expectedDomItemCount + 5)) {\n                    this.onLongScroll(listDiff, false);\n                }\n                else {\n                    this.onNormalScroll(listDiff, false);\n                }\n            }\n            this.listDiff = this.topElementHeight / this.listItemHeight;\n            if (typeof this.listViewInstance.onUIScrolled === 'function') {\n                this.listViewInstance.onUIScrolled();\n            }\n        }\n        this.scrollPosition = scroll;\n    };\n    Virtualization.prototype.onLongScroll = function (listDiff, isScrollingDown) {\n        var _this = this;\n        var index = isScrollingDown ? (this.uiFirstIndex + listDiff) : (this.uiFirstIndex - listDiff);\n        Array.prototype.forEach.call(this.listViewInstance.ulElement.querySelectorAll('li'), function (element) {\n            _this.updateUI(element, index);\n            index++;\n        });\n        this.uiLastIndex = isScrollingDown ? (this.uiLastIndex + listDiff) : (this.uiLastIndex - listDiff);\n        this.uiFirstIndex = isScrollingDown ? (this.uiFirstIndex + listDiff) : (this.uiFirstIndex - listDiff);\n    };\n    Virtualization.prototype.onNormalScroll = function (listDiff, isScrollingDown) {\n        if (isScrollingDown) {\n            for (var i = 0; i < listDiff; i++) {\n                var index = ++this.uiLastIndex;\n                this.updateUI(this.topElement.nextElementSibling, index, this.bottomElement);\n                this.uiFirstIndex++;\n            }\n        }\n        else {\n            for (var i = 0; i < listDiff; i++) {\n                var index = --this.uiFirstIndex;\n                var target = this.topElement.nextSibling;\n                this.updateUI(this.bottomElement.previousElementSibling, index, target);\n                this.uiLastIndex--;\n            }\n        }\n    };\n    Virtualization.prototype.updateUiContent = function (element, index) {\n        var curViewDs = this.listViewInstance.curViewDS;\n        if (typeof this.listViewInstance.dataSource[0] === 'string' ||\n            typeof this.listViewInstance.dataSource[0] === 'number') {\n            element.dataset.uid = ListBase.generateId();\n            element.getElementsByClassName(classNames.listItemText)[0].innerHTML =\n                this.listViewInstance.curViewDS[index].toString();\n        }\n        else {\n            element.dataset.uid = curViewDs[index][this.listViewInstance.fields.id] ?\n                curViewDs[index][this.listViewInstance.fields.id].toString() : ListBase.generateId();\n            element.getElementsByClassName(classNames.listItemText)[0].innerHTML =\n                curViewDs[index][this.listViewInstance.fields.text].toString();\n        }\n        if (this.listViewInstance.showIcon) {\n            if (element.querySelector('.' + classNames.listIcon)) {\n                detach(element.querySelector('.' + classNames.listIcon));\n            }\n            if (this.listViewInstance.curViewDS[index][this.listViewInstance.fields.iconCss]) {\n                var textContent = element.querySelector('.' + classNames.textContent);\n                var target = this.listViewInstance.createElement('div', {\n                    className: classNames.listIcon + ' ' +\n                        this.listViewInstance.curViewDS[index][this.listViewInstance.fields.iconCss]\n                });\n                textContent.insertBefore(target, element.querySelector('.' + classNames.listItemText));\n            }\n        }\n        if (this.listViewInstance.showCheckBox && this.listViewInstance.fields.groupBy) {\n            if (!this.checkListWrapper) {\n                this.checkListWrapper = this.listViewInstance.curUL.querySelector('.' + classNames.checkboxWrapper).cloneNode(true);\n            }\n            var textContent = element.querySelector('.' + classNames.textContent);\n            if (this.listViewInstance.curViewDS[index].isHeader) {\n                if (element.querySelector('.' + classNames.checkboxWrapper)) {\n                    element.classList.remove(classNames.checklist);\n                    textContent.classList.remove(classNames.checkbox);\n                    detach(element.querySelector('.' + classNames.checkboxWrapper));\n                }\n            }\n            else {\n                if (!element.querySelector('.' + classNames.checkboxWrapper)) {\n                    element.classList.add(classNames.checklist);\n                    textContent.classList.add(classNames.checkbox);\n                    textContent.insertBefore(this.checkListWrapper.cloneNode(true), element.querySelector('.' + classNames.listItemText));\n                }\n            }\n        }\n    };\n    Virtualization.prototype.changeElementAttributes = function (element, index) {\n        element.classList.remove(classNames.disable);\n        if (this.uiIndices.disabledItemIndices.length && this.uiIndices.disabledItemIndices.indexOf(index) !== -1) {\n            element.classList.add(classNames.disable);\n        }\n        element.style.display = '';\n        if (this.uiIndices.hiddenItemIndices.length && this.uiIndices.hiddenItemIndices.indexOf(index) !== -1) {\n            element.style.display = 'none';\n        }\n        if (this.listViewInstance.showCheckBox) {\n            var checklistElement = element.querySelector('.' + classNames.checkboxWrapper);\n            element.classList.remove(classNames.selected);\n            element.classList.remove(classNames.focused);\n            if (checklistElement) {\n                checklistElement.removeAttribute('aria-checked');\n                checklistElement.firstElementChild.classList.remove(classNames.checked);\n            }\n            if (this.uiIndices.activeIndices.length && this.uiIndices.activeIndices.indexOf(index) !== -1 &&\n                !this.listViewInstance.curUL.querySelector(classNames.selected)) {\n                element.classList.add(classNames.selected);\n                checklistElement.firstElementChild.classList.add(classNames.checked);\n                checklistElement.setAttribute('aria-checked', 'true');\n                if (this.activeIndex === index) {\n                    element.classList.add(classNames.focused);\n                }\n            }\n        }\n        else {\n            element.classList.remove(classNames.selected);\n            element.removeAttribute('aria-selected');\n            if (!isNullOrUndefined(this.activeIndex) && this.activeIndex === index &&\n                !this.listViewInstance.curUL.querySelector(classNames.selected)) {\n                element.classList.add(classNames.selected);\n                element.setAttribute('aria-selected', 'true');\n            }\n        }\n        if (this.listViewInstance.fields.groupBy) {\n            if (this.listViewInstance.curViewDS[index].isHeader) {\n                if (element.classList.contains(classNames.listItem)) {\n                    element.classList.remove(classNames.listItem);\n                    element.setAttribute('role', 'group');\n                    element.classList.add(classNames.groupListItem);\n                }\n            }\n            else {\n                if (element.classList.contains(classNames.groupListItem)) {\n                    element.classList.remove(classNames.groupListItem);\n                    element.setAttribute('role', 'listitem');\n                    element.classList.add(classNames.listItem);\n                }\n            }\n        }\n    };\n    Virtualization.prototype.findDSAndIndexFromId = function (ds, fields) {\n        var _this = this;\n        var resultJSON = {};\n        fields = this.listViewInstance.getElementUID(fields);\n        if (!isNullOrUndefined(fields)) {\n            ds.some(function (data, index) {\n                if ((fields[_this.listViewInstance.fields.id] &&\n                    fields[_this.listViewInstance.fields.id].toString()\n                        === (data[_this.listViewInstance.fields.id] && data[_this.listViewInstance.fields.id].toString())) || fields === data) {\n                    resultJSON.index = index;\n                    resultJSON.data = data;\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            });\n        }\n        return resultJSON;\n    };\n    Virtualization.prototype.getSelectedItems = function () {\n        var _this = this;\n        if (!isNullOrUndefined(this.activeIndex) || (this.listViewInstance.showCheckBox && this.uiIndices.activeIndices.length)) {\n            var dataCollection_1 = [];\n            var textCollection_1 = [];\n            if (typeof this.listViewInstance.dataSource[0] === 'string' ||\n                typeof this.listViewInstance.dataSource[0] === 'number') {\n                var curViewDS_1 = this.listViewInstance.curViewDS;\n                if (this.listViewInstance.showCheckBox) {\n                    this.uiIndices.activeIndices.forEach(function (index) {\n                        dataCollection_1.push(curViewDS_1[index]);\n                    });\n                    return {\n                        text: dataCollection_1,\n                        data: dataCollection_1,\n                        index: this.uiIndices.activeIndices.map(function (index) {\n                            return _this.listViewInstance.dataSource.indexOf(curViewDS_1[index]);\n                        })\n                    };\n                }\n                else {\n                    return {\n                        text: curViewDS_1[this.activeIndex],\n                        data: curViewDS_1[this.activeIndex],\n                        index: this.listViewInstance.dataSource.indexOf(curViewDS_1[this.activeIndex])\n                    };\n                }\n            }\n            else {\n                var curViewDS_2 = this.listViewInstance.curViewDS;\n                var text_1 = this.listViewInstance.fields.text;\n                if (this.listViewInstance.showCheckBox) {\n                    this.uiIndices.activeIndices.forEach(function (index) {\n                        textCollection_1.push(curViewDS_2[index][text_1]);\n                        dataCollection_1.push(curViewDS_2[index]);\n                    });\n                    return {\n                        text: textCollection_1,\n                        data: dataCollection_1,\n                        index: this.uiIndices.activeIndices.map(function (index) {\n                            return (_this.listViewInstance.dataSource).indexOf(curViewDS_2[index]);\n                        })\n                    };\n                }\n                else {\n                    return {\n                        text: curViewDS_2[this.activeIndex][this.listViewInstance.fields.text],\n                        data: curViewDS_2[this.activeIndex],\n                        index: this.listViewInstance.dataSource.indexOf(curViewDS_2[this.activeIndex])\n                    };\n                }\n            }\n        }\n        else {\n            return undefined;\n        }\n    };\n    Virtualization.prototype.selectItem = function (obj) {\n        var resutJSON = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, obj);\n        if (Object.keys(resutJSON).length) {\n            var isSelected = this.activeIndex === resutJSON.index;\n            var isChecked = void 0;\n            this.activeIndex = resutJSON.index;\n            if (this.listViewInstance.showCheckBox) {\n                if (this.uiIndices.activeIndices.indexOf(resutJSON.index) === -1) {\n                    isChecked = true;\n                    this.uiIndices.activeIndices.push(resutJSON.index);\n                }\n                else {\n                    isChecked = false;\n                    this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(resutJSON.index), 1);\n                }\n                if (this.listViewInstance.curUL.querySelector('.' + classNames.focused)) {\n                    this.listViewInstance.curUL.querySelector('.' + classNames.focused).classList.remove(classNames.focused);\n                }\n            }\n            if (this.listViewInstance.getLiFromObjOrElement(obj)) {\n                if (this.listViewInstance.showCheckBox) {\n                    this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(obj));\n                }\n                else {\n                    this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(obj));\n                }\n            }\n            else {\n                var eventArgs = void 0;\n                if (typeof this.listViewInstance.dataSource[0] === 'string' ||\n                    typeof this.listViewInstance.dataSource[0] === 'number') {\n                    eventArgs = {\n                        text: this.listViewInstance.curViewDS[this.activeIndex],\n                        data: this.listViewInstance.curViewDS[this.activeIndex],\n                        index: this.activeIndex\n                    };\n                }\n                else {\n                    var curViewDS = this.listViewInstance.curViewDS;\n                    eventArgs = {\n                        text: curViewDS[this.activeIndex][this.listViewInstance.fields.text],\n                        data: curViewDS[this.activeIndex],\n                        index: this.activeIndex\n                    };\n                }\n                if (this.listViewInstance.showCheckBox) {\n                    eventArgs.isChecked = isChecked;\n                    this.listViewInstance.trigger('select', eventArgs);\n                }\n                else if (!isSelected) {\n                    this.listViewInstance.removeSelect();\n                    this.listViewInstance.trigger('select', eventArgs);\n                }\n            }\n        }\n        else if (isNullOrUndefined(obj) && !this.listViewInstance.showCheckBox) {\n            this.listViewInstance.removeSelect();\n            this.activeIndex = undefined;\n        }\n    };\n    Virtualization.prototype.enableItem = function (obj) {\n        var resutJSON = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, obj);\n        if (Object.keys(resutJSON).length) {\n            this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(resutJSON.index), 1);\n        }\n    };\n    Virtualization.prototype.disableItem = function (obj) {\n        var resutJSON = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, obj);\n        if (Object.keys(resutJSON).length && this.uiIndices.disabledItemIndices.indexOf(resutJSON.index) === -1) {\n            this.uiIndices.disabledItemIndices.push(resutJSON.index);\n        }\n    };\n    Virtualization.prototype.showItem = function (obj) {\n        var resutJSON = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, obj);\n        if (Object.keys(resutJSON).length) {\n            this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(resutJSON.index), 1);\n        }\n    };\n    Virtualization.prototype.hideItem = function (obj) {\n        var resutJSON = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, obj);\n        if (Object.keys(resutJSON).length && this.uiIndices.hiddenItemIndices.indexOf(resutJSON.index) === -1) {\n            this.uiIndices.hiddenItemIndices.push(resutJSON.index);\n        }\n    };\n    Virtualization.prototype.removeItem = function (obj) {\n        var dataSource;\n        var resutJSON = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, obj);\n        if (Object.keys(resutJSON).length) {\n            dataSource = resutJSON.data;\n            if (this.listViewInstance.curViewDS[resutJSON.index - 1] &&\n                this.listViewInstance.curViewDS[resutJSON.index - 1].isHeader &&\n                (this.listViewInstance.curViewDS[resutJSON.index - 1])\n                    .items.length === 1) {\n                this.removeUiItem(resutJSON.index - 1);\n                this.removeUiItem(resutJSON.index - 1);\n            }\n            else {\n                this.removeUiItem(resutJSON.index);\n            }\n        }\n        var index = this.listViewInstance.dataSource.indexOf(dataSource);\n        if (index !== -1) {\n            this.listViewInstance.dataSource.splice(index, 1);\n            this.listViewInstance.setViewDataSource(this.listViewInstance.dataSource);\n        }\n    };\n    Virtualization.prototype.setCheckboxLI = function (li, e) {\n        var index = Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll('li'), li) + this.uiFirstIndex;\n        this.activeIndex = Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll('li'), li) + this.uiFirstIndex;\n        if (li.classList.contains(classNames.selected)) {\n            if (this.uiIndices.activeIndices.indexOf(index) === -1) {\n                this.uiIndices.activeIndices.push(index);\n            }\n        }\n        else {\n            this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(index), 1);\n        }\n    };\n    Virtualization.prototype.setSelectLI = function (li, e) {\n        this.activeIndex = Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll('li'), li) + this.uiFirstIndex;\n    };\n    Virtualization.prototype.checkedItem = function (checked) {\n        var _this = this;\n        if (checked) {\n            this.uiIndices.activeIndices = [];\n            this.activeIndex = undefined;\n            this.listViewInstance.curViewDS.forEach(function (ds, index) {\n                if (!ds.isHeader) {\n                    _this.uiIndices.activeIndices.push(index);\n                }\n            });\n        }\n        else {\n            this.activeIndex = undefined;\n            this.uiIndices.activeIndices = [];\n        }\n    };\n    Virtualization.prototype.addUiItem = function (index) {\n        var curViewDs = this.listViewInstance.curViewDS;\n        this.changeUiIndices(index, true);\n        if (this.activeIndex && this.activeIndex >= index) {\n            this.activeIndex++;\n        }\n        if (this.listViewInstance.showCheckBox &&\n            curViewDs[index][this.listViewInstance.fields.isChecked]) {\n            this.uiIndices.activeIndices.push(index);\n        }\n        if (!parseFloat(this.bottomElement.style.height) && !parseFloat(this.topElement.style.height)) {\n            this.bottomElement.style.height = parseFloat(this.bottomElement.style.height) + this.listItemHeight + 'px';\n        }\n        if (parseFloat(this.bottomElement.style.height)) {\n            var liItem = this.listViewInstance.curUL.lastElementChild.previousSibling;\n            var target = this.listViewInstance.getLiFromObjOrElement(curViewDs[index + 1]) ||\n                this.listViewInstance.getLiFromObjOrElement(curViewDs[index + 2]);\n            if (target) {\n                this.bottomElement.style.height = parseFloat(this.bottomElement.style.height) + this.listItemHeight + 'px';\n                this.updateUI(liItem, index, target);\n            }\n        }\n        else {\n            var liItem = this.listViewInstance.curUL.firstElementChild.nextSibling;\n            var target = void 0;\n            if ((Object.keys(this.listViewInstance.curViewDS).length - 1) === index) {\n                target = this.listViewInstance.curUL.lastElementChild;\n            }\n            else {\n                target = this.listViewInstance.getLiFromObjOrElement(curViewDs[index + 1]) ||\n                    this.listViewInstance.getLiFromObjOrElement(curViewDs[index + 2]);\n            }\n            this.topElement.style.height = parseFloat(this.topElement.style.height) + this.listItemHeight + 'px';\n            this.uiFirstIndex++;\n            this.uiLastIndex++;\n            if (target) {\n                this.updateUI(liItem, index, target);\n                this.listViewInstance.isWindow ? window.scrollTo(0, (pageYOffset + this.listItemHeight)) :\n                    this.listViewInstance.element.scrollTop += this.listItemHeight;\n            }\n        }\n        this.totalHeight += this.listItemHeight;\n        this.listDiff = parseFloat(this.topElement.style.height) / this.listItemHeight;\n    };\n    Virtualization.prototype.removeUiItem = function (index) {\n        this.totalHeight -= this.listItemHeight;\n        var curViewDS = this.listViewInstance.curViewDS[index];\n        var liItem = this.listViewInstance.getLiFromObjOrElement(curViewDS);\n        this.listViewInstance.curViewDS.splice(index, 1);\n        if (this.activeIndex && this.activeIndex >= index) {\n            this.activeIndex--;\n        }\n        if (liItem) {\n            if (this.domItemCount > Object.keys(this.listViewInstance.curViewDS).length) {\n                detach(liItem);\n                this.domItemCount--;\n                this.uiLastIndex--;\n                this.totalHeight = 0;\n            }\n            else {\n                if (liItem.classList.contains(classNames.disable)) {\n                    liItem.classList.remove(classNames.disable);\n                    this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(index), 1);\n                }\n                if (liItem.style.display === 'none') {\n                    liItem.style.display = '';\n                    this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(index), 1);\n                }\n                if (this.listViewInstance.showCheckBox && liItem.classList.contains(classNames.selected)) {\n                    this.listViewInstance.removeSelect();\n                    this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(index), 1);\n                    var checklistElement = liItem.querySelector('.' + classNames.checkboxWrapper);\n                    checklistElement.removeAttribute('aria-checked');\n                    checklistElement.firstElementChild.classList.remove(classNames.checked);\n                    if (liItem.classList.contains(classNames.focused)) {\n                        liItem.classList.remove(classNames.focused);\n                        this.activeIndex = undefined;\n                    }\n                }\n                else if (liItem.classList.contains(classNames.selected)) {\n                    this.listViewInstance.removeSelect();\n                    this.activeIndex = undefined;\n                }\n                if (!parseFloat(this.bottomElement.style.height) && !parseFloat(this.topElement.style.height)) {\n                    this.updateUI(liItem, this.uiLastIndex, this.bottomElement);\n                }\n                else if (parseFloat(this.bottomElement.style.height)) {\n                    this.bottomElement.style.height = parseFloat(this.bottomElement.style.height) - this.listItemHeight + 'px';\n                    this.updateUI(liItem, this.uiLastIndex, this.bottomElement);\n                }\n                else {\n                    this.topElement.style.height = parseFloat(this.topElement.style.height) - this.listItemHeight + 'px';\n                    this.updateUI(liItem, (this.uiFirstIndex - 1), this.topElement.nextSibling);\n                    this.uiLastIndex--;\n                    this.uiFirstIndex--;\n                }\n            }\n        }\n        this.changeUiIndices(index, false);\n        this.listDiff = parseFloat(this.topElement.style.height) / this.listItemHeight;\n    };\n    Virtualization.prototype.changeUiIndices = function (index, increment) {\n        var _this = this;\n        Object.keys(this.uiIndices).forEach(function (key) {\n            _this.uiIndices[key] = _this.uiIndices[key].map(function (i) {\n                if (i >= index) {\n                    return increment ? ++i : --i;\n                }\n                else {\n                    return i;\n                }\n            });\n        });\n    };\n    Virtualization.prototype.addItem = function (data, fields) {\n        var _this = this;\n        data.forEach(function (dataSource) {\n            _this.listViewInstance.dataSource.push(dataSource);\n            _this.listViewInstance.setViewDataSource(_this.listViewInstance.dataSource);\n            if (!_this.domItemCount) {\n                _this.uiVirtualization();\n            }\n            else if (_this.domItemCount < _this.expectedDomItemCount) {\n                _this.wireScrollEvent(true);\n                detach(_this.listViewInstance.contentContainer);\n                _this.uiVirtualization();\n            }\n            else {\n                var index = _this.listViewInstance.curViewDS.indexOf(dataSource);\n                _this.addUiItem(index);\n                var curViewDS = _this.listViewInstance.curViewDS[index - 1];\n                if (curViewDS && curViewDS.isHeader && curViewDS.items.length === 1) {\n                    _this.addUiItem(index - 1);\n                }\n            }\n        });\n    };\n    Virtualization.prototype.createUIItem = function (args) {\n        var template = this.listViewInstance.createElement('div');\n        var commonTemplate = '<div class=\"e-text-content\" role=\"presentation\"> ' +\n            '<span class=\"e-list-text\"> ${' + this.listViewInstance.fields.text + '} </span></div>';\n        template.innerHTML = this.listViewInstance.template || commonTemplate;\n        var templateElements = template.getElementsByTagName('*');\n        var groupTemplate = this.listViewInstance.createElement('div');\n        if (this.listViewInstance.fields.groupBy) {\n            groupTemplate.innerHTML = this.listViewInstance.groupTemplate || commonTemplate;\n        }\n        var groupTemplateElements = groupTemplate.getElementsByTagName('*');\n        if (args.curData.isHeader) {\n            this.headerData = args.curData;\n        }\n        this.templateData = args.curData.isHeader ? args.curData.items[0] :\n            args.curData;\n        args.item.innerHTML = '';\n        args.item.context = { data: args.curData, nodes: { flatTemplateNodes: [], groupTemplateNodes: [] } };\n        for (var i = 0; i < templateElements.length; i++) {\n            this.compileTemplate(templateElements[i], args.item, false);\n        }\n        for (var i = 0; i < groupTemplateElements.length; i++) {\n            this.compileTemplate(groupTemplateElements[i], args.item, true);\n        }\n        args.item.context.template = args.curData.isHeader ? template.firstElementChild :\n            groupTemplate.firstElementChild;\n        args.item.context.type = args.curData.isHeader ? 'flatList' : 'groupList';\n        var element = args.curData.isHeader ? groupTemplate : template;\n        args.item.insertBefore(element.firstElementChild, null);\n    };\n    Virtualization.prototype.compileTemplate = function (element, item, isHeader) {\n        this.textProperty(element, item, isHeader);\n        this.classProperty(element, item, isHeader);\n        this.attributeProperty(element, item, isHeader);\n    };\n    Virtualization.prototype.onChange = function (newData, listElement) {\n        listElement.context.data = newData;\n        var groupTemplateNodes = listElement.context.nodes.groupTemplateNodes;\n        var flatTemplateNodes = listElement.context.nodes.flatTemplateNodes;\n        if (!isNullOrUndefined(newData.isHeader) && newData.isHeader && listElement.context.type === 'groupList') {\n            var element = listElement.firstElementChild;\n            detach(listElement.firstElementChild);\n            listElement.insertBefore(listElement.context.template, null);\n            listElement.context.template = element;\n            listElement.context.type = 'flatList';\n            groupTemplateNodes.forEach(function (node) { return node.onChange(newData); });\n        }\n        else if (!newData.isHeader && listElement.context.type === 'flatList') {\n            var element = listElement.firstElementChild;\n            detach(listElement.firstElementChild);\n            listElement.insertBefore(listElement.context.template, null);\n            listElement.context.template = element;\n            listElement.context.type = 'groupList';\n            flatTemplateNodes.forEach(function (node) { return node.onChange(newData); });\n        }\n        else if (!newData.isHeader) {\n            flatTemplateNodes.forEach(function (node) { return node.onChange(newData); });\n        }\n        else {\n            groupTemplateNodes.forEach(function (node) { return node.onChange(newData); });\n        }\n    };\n    Virtualization.prototype.updateContextData = function (listElement, node, isHeader) {\n        if (isHeader) {\n            listElement.context.nodes.groupTemplateNodes.push(node);\n        }\n        else {\n            listElement.context.nodes.flatTemplateNodes.push(node);\n        }\n    };\n    Virtualization.prototype.classProperty = function (element, listElement, isHeader) {\n        var _this = this;\n        var regex = new RegExp('\\\\${([^}]*)}', 'g');\n        var resultantOutput = [];\n        var regexMatch;\n        while (regexMatch !== null) {\n            var match = regex.exec(element.className);\n            resultantOutput.push(match);\n            regexMatch = match;\n            if (regexMatch === null) {\n                resultantOutput.pop();\n            }\n        }\n        if (resultantOutput && resultantOutput.length) {\n            resultantOutput.forEach(function (classNameMatch) {\n                var classFunction;\n                if (classNameMatch[1].indexOf('?') !== -1 && classNameMatch[1].indexOf(':') !== -1) {\n                    // tslint:disable-next-line:no-function-constructor-with-string-args\n                    classFunction = new Function('data', 'return ' + classNameMatch[1].replace(/\\$/g, 'data.'));\n                }\n                else {\n                    // tslint:disable-next-line:no-function-constructor-with-string-args\n                    classFunction = new Function('data', 'return ' + 'data.' + classNameMatch[1]);\n                }\n                var subNode = {};\n                if (isHeader) {\n                    subNode.bindedvalue = classFunction(_this.headerData);\n                }\n                else {\n                    subNode.bindedvalue = classFunction(_this.templateData);\n                }\n                subNode.onChange = function (value) {\n                    if (subNode.bindedvalue) {\n                        removeClass([element], subNode.bindedvalue.split(' ').filter(function (css) { return css; }));\n                    }\n                    var newCss = classFunction(value);\n                    if (newCss) {\n                        addClass([element], (newCss).split(' ').filter(function (css) { return css; }));\n                    }\n                    subNode.bindedvalue = newCss;\n                };\n                classNameMatch[0].split(' ').forEach(function (className) {\n                    element.classList.remove(className);\n                });\n                if (subNode.bindedvalue) {\n                    addClass([element], subNode.bindedvalue.split(' ').filter(function (css) { return css; }));\n                }\n                _this.updateContextData(listElement, subNode, isHeader);\n            });\n        }\n    };\n    Virtualization.prototype.attributeProperty = function (element, listElement, isHeader) {\n        var _this = this;\n        var attributeNames = [];\n        for (var i = 0; i < element.attributes.length; i++) {\n            attributeNames.push(element.attributes[i].nodeName);\n        }\n        if (attributeNames.indexOf('class') !== -1) {\n            attributeNames.splice(attributeNames.indexOf('class'), 1);\n        }\n        attributeNames.forEach(function (attributeName) {\n            var attrNameMatch = new RegExp('\\\\${([^}]*)}', 'g').exec(attributeName) || [];\n            var attrValueMatch = new RegExp('\\\\${([^}]*)}', 'g').exec(element.getAttribute(attributeName))\n                || [];\n            var attributeNameFunction;\n            var attributeValueFunction;\n            if (attrNameMatch.length || attrValueMatch.length) {\n                if (attrNameMatch[1]) {\n                    // tslint:disable-next-line:no-function-constructor-with-string-args\n                    attributeNameFunction = new Function('data', 'return ' + 'data.' + attrNameMatch[1]);\n                }\n                if (attrValueMatch[1]) {\n                    if (attrValueMatch[1].indexOf('?') !== -1 && attrValueMatch[1].indexOf(':') !== -1) {\n                        // tslint:disable-next-line:no-function-constructor-with-string-args\n                        attributeValueFunction = new Function('data', 'return ' + attrValueMatch[1].replace(/\\$/g, 'data.'));\n                    }\n                    else {\n                        // tslint:disable-next-line:no-function-constructor-with-string-args\n                        attributeValueFunction = new Function('data', 'return ' + 'data.' + attrValueMatch[1]);\n                    }\n                }\n                var subNode_1 = {};\n                if (isHeader) {\n                    subNode_1.bindedvalue = [attrNameMatch[1] === undefined ? undefined : attributeNameFunction(_this.headerData),\n                        attrValueMatch[1] === undefined ? undefined : attributeValueFunction(_this.headerData)];\n                }\n                else {\n                    subNode_1.bindedvalue = [attrNameMatch[1] === undefined ? undefined : attributeNameFunction(_this.templateData),\n                        attrValueMatch[1] === undefined ? undefined : attributeValueFunction(_this.templateData)];\n                }\n                subNode_1.attrName = subNode_1.bindedvalue[0] === undefined ?\n                    attributeName : subNode_1.bindedvalue[0];\n                subNode_1.onChange = function (value) {\n                    var bindedvalue = subNode_1.bindedvalue[1] === undefined ?\n                        element.getAttribute(subNode_1.attrName) : attributeValueFunction(value);\n                    element.removeAttribute(subNode_1.attrName);\n                    subNode_1.attrName = subNode_1.bindedvalue[0] === undefined ? subNode_1.attrName : attributeNameFunction(value);\n                    element.setAttribute(subNode_1.attrName, bindedvalue);\n                    subNode_1.bindedvalue = [subNode_1.bindedvalue[0] === undefined ? undefined : attributeNameFunction(value),\n                        subNode_1.bindedvalue[1] === undefined ? undefined : attributeValueFunction(value)];\n                };\n                var attributeValue = subNode_1.bindedvalue[1] === undefined ? element.getAttribute(attributeName) :\n                    subNode_1.bindedvalue[1];\n                element.removeAttribute(attributeName);\n                element.setAttribute(subNode_1.attrName, attributeValue);\n                _this.updateContextData(listElement, subNode_1, isHeader);\n            }\n        });\n    };\n    Virtualization.prototype.textProperty = function (element, listElement, isHeader) {\n        var _this = this;\n        var regex = new RegExp('\\\\${([^}]*)}', 'g');\n        var resultantOutput = [];\n        var regexMatch;\n        while (regexMatch !== null) {\n            var match = regex.exec(element.innerText);\n            resultantOutput.push(match);\n            regexMatch = match;\n            if (regexMatch === null) {\n                resultantOutput.pop();\n            }\n        }\n        var isChildHasTextContent = Array.prototype.some.call(element.children, function (element) {\n            if (new RegExp('\\\\${([^}]*)}', 'g').exec(element.innerText)) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        });\n        if (resultantOutput && resultantOutput.length && !isChildHasTextContent) {\n            resultantOutput.forEach(function (textPropertyMatch) {\n                var subNode = {};\n                var textFunction;\n                if (textPropertyMatch[1].indexOf('?') !== -1 && textPropertyMatch[1].indexOf(':') !== -1) {\n                    // tslint:disable-next-line:no-function-constructor-with-string-args\n                    textFunction = new Function('data', 'return ' + textPropertyMatch[1].replace(/\\$/g, 'data.'));\n                }\n                else {\n                    // tslint:disable-next-line:no-function-constructor-with-string-args\n                    textFunction = new Function('data', 'return ' + 'data.' + textPropertyMatch[1]);\n                }\n                if (isHeader) {\n                    subNode.bindedvalue = textFunction(_this.headerData);\n                }\n                else {\n                    subNode.bindedvalue = textFunction(_this.templateData);\n                }\n                subNode.onChange = function (value) {\n                    element.innerText = element.innerText.replace(subNode.bindedvalue, textFunction(value));\n                    subNode.bindedvalue = textFunction(value);\n                };\n                element.innerText = element.innerText.replace(textPropertyMatch[0], subNode.bindedvalue);\n                _this.updateContextData(listElement, subNode, isHeader);\n            });\n        }\n    };\n    Virtualization.prototype.reRenderUiVirtualization = function () {\n        this.wireScrollEvent(true);\n        if (this.listViewInstance.contentContainer) {\n            detach(this.listViewInstance.contentContainer);\n        }\n        this.listViewInstance.preRender();\n        this.listViewInstance.localData = this.listViewInstance.dataSource;\n        this.listViewInstance.renderList();\n    };\n    Virtualization.prototype.updateUI = function (element, index, targetElement) {\n        var onChange = this.isNgTemplate() ? this.onNgChange : this.onChange;\n        if (this.listViewInstance.template || this.listViewInstance.groupTemplate) {\n            var curViewDS = this.listViewInstance.curViewDS[index];\n            element.dataset.uid = curViewDS[this.listViewInstance.fields.id] ?\n                curViewDS[this.listViewInstance.fields.id].toString() : ListBase.generateId();\n            onChange(curViewDS, element);\n        }\n        else {\n            this.updateUiContent(element, index);\n        }\n        this.changeElementAttributes(element, index);\n        if (targetElement) {\n            this.listViewInstance.ulElement.insertBefore(element, targetElement);\n        }\n    };\n    Virtualization.prototype.onNgChange = function (newData, listElement) {\n        listElement.context.$implicit = newData;\n    };\n    Virtualization.prototype.getModuleName = function () {\n        return 'virtualization';\n    };\n    Virtualization.prototype.destroy = function () {\n        this.wireScrollEvent(true);\n    };\n    return Virtualization;\n}());\nexport { Virtualization };\n"],"names":["getFieldValues","dataItem","fields","fieldData","isNullOrUndefined","isHeader","_i","_a","Object","keys","length","dataField","value","undefined","getValue","cssClass","li","ul","group","icon","text","check","checked","selected","expanded","textContent","hasChild","level","url","collapsible","disabled","image","iconWrapper","ListBase","createList","createElement","dataSource","options","isSingleLevel","curOpt","extend","defaultListBaseOptions","ariaAttributes","defaultAriaAttributes","type","typeofData","typeof","createListFromArray","createListFromJson","generateUL","createListItemFromArray","subChild","getModuleClass","moduleName","id","generateId","i","itemCreating","curData","generateSingleLevelLI","generateLI","itemCreated","item","push","createListItemFromJson","defaultMappedFields","child","hasOwnProperty","curItem","innerEle","showCheckBox","className","attrs","showIcon","iconCss","itemClass","classList","add","setAttribute","toString","tooltip","htmlAttributes","enabled","isVisible","style","display","imageUrl","template","attr","src","merge","imageAttributes","prepend","firstElementChild","processSubChild","listClass","getSiblingLI","elementArray","element","isPrevious","siblingLI","liIndex","liCollections","Array","prototype","slice","call","indexOf","contains","groupDataSource","sortOrder","curFields","cusQuery","Query","groupBy","ds","getDataSource","addSorting","j","itemObj","items","grpItem","key","trim","k","sortBy","query","queries","fn","splice","DataManager","executeLocal","createJsonFromElement","curEle","cloneNode","jsonAr","childs","querySelectorAll","remove","anchor","querySelector","json","childNodes","i_1","Number","hasChildNodes","attributes_1","getAllAttributes","urlAttributes","data","match","elementAttributes","class","addClass","split","attributes","index","nodeName","nodeValue","renderContentTemplate","ulElement","role","compiledString","compile","liCollection","innerText","append","renderGroupTemplate","groupTemplate","headerItems","category","headerItems_1","header","headerData","innerHTML","Math","floor","random","substring","subDS","hasChildren","subLi","appendChild","expandCollapse","expandIconPosition","expandIconClass","innerElements","grpLI","elementID","groupItemRole","itemRole","href","anchorTag","document","createTextNode","uID","innerDiv","wrapperRole","itemText","liElement","listRole","generateIcon","isChecked","headerTemplate","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","__","this","constructor","create","__decorate","decorators","target","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","effectsConfig","None","SlideLeft","SlideDown","Zoom","Fade","effectsRTLConfig","classNames","root","hover","focused","parentItem","listItem","listIcon","listItemText","groupListItem","view","headerText","headerTemplateText","disable","content","backIcon","checkboxWrapper","checkbox","checklist","checkboxIcon","checkboxRight","checkboxLeft","listviewCheckbox","itemCheckList","FieldSettings","_super","apply","Property","ChildProperty","ListView","onPropertyChanged","newProp","oldProp","setHTMLAttribute","setCSSClass","setEnable","setSize","setEnableRTL","listBaseOption","properties","enableVirtualization","virtualizationModule","reRenderUiVirtualization","reRender","curDSLevel","headerTitle","detach","contentContainer","refresh","setCheckbox","curViewDS","getSubDS","resetCurrentList","oldCSSClass","filter","css","removeClass","height","formatUnit","width","isWindow","clientHeight","enableElement","enable","enableRtl","isEnabled","showBack","headerEle","showHeader","innerHeaderEle","textEle","outerHTML","hedBackButton","headerTemplateEle","parentElement","switchView","fromView","toView","reverse","_this","fPos_1","position","overflow_1","overflow","anim","duration","animation","effect","aniObj","animate","name","timingFunction","easing","end","model","trigger","curUL","preRender","renderCheckbox","bind","initialization","animateOptions","currentLiElements","isNestedList","selectedData","selectedId","Animation","args","isValidLI","checkboxElement","createCheckBox","frameElement_1","checkInternally","checkBoxPosition","insertBefore","checkItem","toggleCheckBase","HTMLLIElement","getLiFromObjOrElement","setSelectedItemData","uncheckItem","checkAllItems","toggleAllCheckBase","uncheckAllItems","checkIcon","checkedItem","args_1","forEach","getItemData","removeElement","selectedItems","refreshItemHeight","clickHandler","e","back","closest","parentNode","removeFocus","eventArgs","selectEventData","removeHover","removeSelect","setSelectLI","setCheckboxLI","removeChild","hoverHandler","curLi","setHoverLI","leaveHandler","homeKeyHandler","focusedElement","onArrowKeyDown","prev","arrowKeyHandler","elementTop","getBoundingClientRect","top","elementHeight","firstItemBounds","heightDiff","groupItemBounds","siblingTop","siblingHeight","window","scrollTo","pageYOffset","scrollTop","innerHeight","uiFirstIndex","onUIScrolled","listItemHeight","topHeight","headerBounds","enterKeyHandler","spaceKeyHandler","keyActionHandler","keyCode","preventDefault","tabFocus","swipeActionHandler","swipeDirection","focusout","activeElement","wireEvents","EventHandler","touchModule","Touch","swipe","unWireEvents","destroy","selectedList","focusedLI_1","hoverLI","selectedLI_1","ele","renderSubList","selectedItem","isInteracted","event","children","selectedLI","lastLi","levelKeys","localData","levelKeys_1","field","curDSJSON","findItemFromDS","curDS","getElementUID","parent","resultJSON","some","getQuery","columns","column","select","from","tableName","setViewDataSource","isInAnimation","setLocalData","executeQuery","then","isDestroyed","result","renderList","catch","setProperties","renderIntoDom","getAttribute","isNgTemplate","createUIItem","uiVirtualization","obj","Element","render","tabindex","rippleFn","rippleEffect","selector","classAr","concat","removeAttribute","pID","pop","toUL","fromUL","selectItem","uid","selectMultipleItems","getParentId","parentId","getSelectedItems","getElementsByClassName","liTextCollection","liDataCollection","dataParent","tempData","findItem","enableItem","setItemState","disableItem","isEnable","showItem","showHideItem","hideItem","isHide","addItem","addListItem","removeItem","removeItemFromList","groupLi","previousElementSibling","nextElementSibling","dsIndex","removeMultipleItems","getModuleName","requiredModules","modules","member","getPersistData","addOnPersist","Complex","Event","NotifyPropertyChanges","Component","Virtualization","instance","listViewInstance","templateRef","firstDs","expectedDomItemCount","ValidateItemCount","domItemCount","uiLastIndex","wireScrollEvent","otherDs","listItems","topElement","bottomElement","totalHeight","topElementHeight","bottomElementHeight","listDiff","uiIndicesInitialization","removeEventListener","onVirtualScroll","onVirtualUiScroll","addEventListener","dataSourceLength","itemCount","round","uiIndices","activeIndices","disabledItemIndices","hiddenItemIndices","context","viewContainerRef","_embeddedViews","nextSibling","getscrollerHeight","startingHeight","documentElement","scrollPosition","scroll","parseFloat","onLongScroll","onNormalScroll","isScrollingDown","updateUI","updateUiContent","curViewDs","dataset","checkListWrapper","changeElementAttributes","checklistElement","activeIndex","findDSAndIndexFromId","dataCollection_1","textCollection_1","curViewDS_1","map","curViewDS_2","text_1","resutJSON","isSelected","removeUiItem","addUiItem","changeUiIndices","liItem","lastElementChild","previousSibling","increment","commonTemplate","templateElements","getElementsByTagName","groupTemplateElements","templateData","nodes","flatTemplateNodes","groupTemplateNodes","compileTemplate","textProperty","classProperty","attributeProperty","onChange","newData","listElement","node","updateContextData","regexMatch","regex","RegExp","resultantOutput","exec","classNameMatch","classFunction","Function","replace","subNode","bindedvalue","newCss","attributeNames","attributeName","attributeNameFunction","attributeValueFunction","attrNameMatch","attrValueMatch","subNode_1","attrName","attributeValue","isChildHasTextContent","textPropertyMatch","textFunction","targetElement","onNgChange","$implicit"],"mappings":"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"}
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-buttons"),require("@syncfusion/ej2-navigations")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-popups","@syncfusion/ej2-data","@syncfusion/ej2-buttons","@syncfusion/ej2-navigations"],t):t(e.ej={},e.ej2Base,e.ej2Popups,e.ej2Data,e.ej2Buttons,e.ej2Navigations)}(this,function(e,t,n,r,a,i){"use strict";var o="actionBegin",l="actionComplete",s="actionFailure",d="cardDoubleClick",c="cardRendered",p="columnRendered",h="dataBinding",u="content-ready",g="data-ready",m=function(){function e(e){this.parent=e,this.initDataManager(e.dataSource,e.query),this.refreshDataManager()}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof r.DataManager?e:new r.DataManager(e),this.query=t instanceof r.Query?t:new r.Query},e.prototype.generateQuery=function(){return this.query.clone()},e.prototype.getData=function(e){return this.dataManager.executeQuery(e)},e.prototype.refreshDataManager=function(){var e=this;this.getData(this.generateQuery()).then(function(t){return e.dataManagerSuccess(t)}).catch(function(t){return e.dataManagerFailure(t)})},e.prototype.dataManagerSuccess=function(e){var n=this;this.parent.isDestroyed||this.parent.trigger(h,e,function(e){var r=t.extend([],e.result,null,!0);n.parent.kanbanData=r,n.parent.notify(g,{processedData:r}),n.parent.trigger("dataBound",null,function(){return n.parent.hideSpinner()})})},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger(s,{error:e},function(){return t.parent.hideSpinner()})},e}(),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},v=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return y(n,e),f([t.Property()],n.prototype,"keyField",void 0),f([t.Property()],n.prototype,"textField",void 0),f([t.Property(!1)],n.prototype,"showEmptyRow",void 0),f([t.Property(!0)],n.prototype,"showItemCount",void 0),f([t.Property(!1)],n.prototype,"allowDragAndDrop",void 0),f([t.Property()],n.prototype,"template",void 0),f([t.Property("Ascending")],n.prototype,"sortBy",void 0),n}(t.ChildProperty),C=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},b=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return C(n,e),w([t.Property(!0)],n.prototype,"showHeader",void 0),w([t.Property()],n.prototype,"headerField",void 0),w([t.Property()],n.prototype,"contentField",void 0),w([t.Property()],n.prototype,"template",void 0),w([t.Property()],n.prototype,"priority",void 0),w([t.Property("Single")],n.prototype,"selectionType",void 0),n}(t.ChildProperty),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},k=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return S(n,e),E([t.Property()],n.prototype,"keyField",void 0),E([t.Property()],n.prototype,"headerText",void 0),E([t.Property()],n.prototype,"template",void 0),E([t.Property(!1)],n.prototype,"allowToggle",void 0),E([t.Property(!0)],n.prototype,"isExpanded",void 0),E([t.Property()],n.prototype,"minCount",void 0),E([t.Property()],n.prototype,"maxCount",void 0),E([t.Property(!1)],n.prototype,"showItemCount",void 0),n}(t.ChildProperty),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},M=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return O(n,e),A([t.Property()],n.prototype,"text",void 0),A([t.Property()],n.prototype,"keyFields",void 0),n}(t.ChildProperty),x="e-kanban",j="e-device",D="e-icons",T="e-template",R="e-kanban-table",P="e-kanban-header",F="e-header-cells",q="e-header-wrap",L="e-header-text",H="e-header-icon",N="e-stacked-header-cell",_="e-content-cells",I="e-kanban-content",B="e-toggle-header",U="e-content-row",K="e-swimlane-row",W="e-swimlane-row-expand",V="e-swimlane-row-collapse",Y="e-card-wrapper",Q="e-card",X="e-column-expand",z="e-column-collapse",G="e-collapse-header-text",Z="e-collapsed",J="e-target-dragged-clone",$="e-cloned-card",ee="e-kanban-dragged-card",te="e-dropping",ne="e-toggle-visible",re="e-multi-card-wrapper",ae="e-target-multi-clone",ie="e-column-key",oe="e-selection",le="e-tooltip-text",se="e-swimlane-header",de="e-toolbar-swimlane-name",ce="e-swimlane-content",pe="e-swimlane-resource",he="e-popup-content",ue=function(){function e(e){this.parent=e,this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[]}return e.prototype.clickHandler=function(e){var n=t.closest(e.target,".e-card,.e-header-icon,.e-content-row.e-swimlane-row");n&&(n.classList.contains(Q)?this.cardClick(e):n.classList.contains(H)?this.columnExpandCollapse(e):n.classList.contains(U)&&n.classList.contains(K)&&this.rowExpandCollapse(e))},e.prototype.doubleClickHandler=function(e){t.closest(e.target,"."+Q)&&this.cardDoubleClick(e)},e.prototype.cardClick=function(e){var n=this,r=t.closest(e.target,"."+Q),a=this.parent.getCardDetails(r);this.parent.activeCardData={data:a,element:r};var i={data:a,element:r,cancel:!1,event:e};this.parent.trigger("cardClick",i,function(a){if(!a.cancel){if(r.classList.contains(oe))t.removeClass([r],oe);else{var i=e.ctrlKey;n.parent.isAdaptive&&n.parent.touchModule&&(i=n.parent.touchModule.tabHold||e.ctrlKey),n.cardSelection(r,i,e.shiftKey)}n.parent.isAdaptive&&n.parent.touchModule&&n.parent.touchModule.updatePopupContent()}})},e.prototype.cardDoubleClick=function(e){var n=t.closest(e.target,"."+Q),r=this.parent.getCardDetails(n);this.parent.activeCardData={data:r,element:n};var a={data:r,element:n,cancel:!1,event:e};this.parent.trigger(d,a)},e.prototype.rowExpandCollapse=function(e){var n=this,r=e instanceof HTMLElement?e:e.target,a={cancel:!1,target:r,requestType:"rowExpandCollapse"};this.parent.trigger(o,a,function(e){if(!e.cancel){var a=t.closest(r,"."+K),i=n.parent.element.querySelector("."+U+":nth-child("+(a.rowIndex+2)+")"),o=a.querySelector("."+W+",."+V);a.classList.contains(Z)?(t.removeClass([i,a],Z),t.classList(o,[W],[V]),n.parent.swimlaneToggleArray.splice(n.parent.swimlaneToggleArray.indexOf(a.getAttribute("data-key")),1)):(t.addClass([i,a],Z),t.classList(o,[V],[W]),n.parent.swimlaneToggleArray.push(a.getAttribute("data-key"))),n.parent.notify(u,{}),n.parent.trigger(l,{target:r,requestType:"rowExpandCollapse"})}})},e.prototype.columnExpandCollapse=function(e){var n=this,r=e instanceof HTMLElement?e:e.target,a={cancel:!1,target:r,requestType:"columnExpandCollapse"};this.parent.trigger(o,a,function(e){if(!e.cancel){var a=t.closest(r,"."+F),i=a.cellIndex;n.columnToggle(a);var o=n.parent.element.querySelectorAll("."+F+"."+Z).length;if(o===n.parent.columns.length-n.hideColumnKeys.length){var s="."+F+":not(."+N+"):nth-child("+(i+1===o?1:i+2)+")",d=n.parent.element.querySelector(s);t.addClass([d],Z),n.columnToggle(d)}n.parent.notify(u,{}),n.parent.trigger(l,{target:r,requestType:"columnExpandCollapse"})}})},e.prototype.columnToggle=function(e){var n=this,r=e.cellIndex,a=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),i="."+R+" col:nth-child("+(r+1)+")",o=e.querySelector("."+X+",."+z),l=[].slice.call(this.parent.element.querySelectorAll(i));if(e.classList.contains(Z)){t.removeClass(l,Z),this.parent.isAdaptive&&l.forEach(function(e){return e.style.width=t.formatUnit(n.parent.layoutModule.getWidth())}),t.classList(o,[X],[z]);for(var s=0,d=a;s<d.length;s++){var c=(u=d[s]).querySelector("."+_+":nth-child("+(r+1)+")");t.removeClass([c,e],Z),t.remove(c.querySelector("."+G))}this.columnToggleArray.splice(this.columnToggleArray.indexOf(e.getAttribute("data-key")),1),this.parent.columns[r].setProperties({isExpanded:!0},!0)}else{t.addClass(l,Z),this.parent.isAdaptive&&l.forEach(function(e){return e.style.width=t.formatUnit(50)}),t.classList(o,[z],[X]);for(var p=0,h=a;p<h.length;p++){var u=h[p],g=e.getAttribute("data-key"),m=(c=u.querySelector("."+_+'[data-key="'+g+'"]')).cellIndex;c.appendChild(t.createElement("div",{className:G,innerHTML:this.parent.columns[m].headerText})),t.addClass([c,e],Z)}this.columnToggleArray.push(e.getAttribute("data-key")),this.parent.columns[r].setProperties({isExpanded:!1},!0)}},e.prototype.cardSelection=function(e,n,r){var a=this;if(e){var i=this.parent.getSelectedCards();if("None"!==this.parent.cardSettings.selectionType){var o=t.closest(e,"."+U);if((t.isNullOrUndefined(this.lastSelectionRow)?o.rowIndex:this.lastSelectionRow.rowIndex)!==o.rowIndex&&(n||r)&&"Multiple"===this.parent.cardSettings.selectionType)return;if(0===i.length||n&&"Single"!==this.parent.cardSettings.selectionType||(t.removeClass(i,oe),i.forEach(function(e){a.selectionArray.splice(a.selectionArray.indexOf(e.getAttribute("data-id")),1),a.selectedCardsElement.splice(a.selectedCardsElement.indexOf(e),1),a.selectedCardsData.splice(a.selectedCardsData.indexOf(a.parent.getCardDetails(e),1))})),i.length>0&&r&&"Multiple"===this.parent.cardSettings.selectionType){var l=[],s=void 0,d=void 0,c=void 0,p=[].slice.call(o.querySelectorAll("."+Q));p.forEach(function(e){return l.push(e.getAttribute("data-id"))});var h=e.getAttribute("data-id"),u=this.lastCard.getAttribute("data-id"),g=d=l.indexOf(h),m=s=l.indexOf(u),y=g>m?"next":"prev";for("prev"===y&&(s=g,d=m),c=s;c<=d;c++){var f=p[c];t.addClass([f],oe),this.selectionArray.push(f.getAttribute("data-id")),this.selectedCardsElement.push(f),this.selectedCardsData.push(this.parent.getCardDetails(f)),this.lastCardSelection=f,"prev"===y&&(this.lastCardSelection=p[s])}}else if(t.addClass([e],oe),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.selectedCardsData.push(this.parent.getCardDetails(e)),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=t.closest(e,"."+U),this.lastSelectionRow.previousElementSibling){var v=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse");v&&v.classList.contains(V)&&this.rowExpandCollapse(v)}}}},e.prototype.addColumn=function(e,t){this.parent.columns.splice(t,0,e),this.parent.notify(g,{processedData:this.parent.kanbanData})},e.prototype.deleteColumn=function(e){var t=this.parent.element.querySelectorAll("."+F).item(e);t&&t.classList.contains(B)&&this.columnToggleArray.splice(this.columnToggleArray.indexOf(t.getAttribute("data-key"),0)),this.parent.columns.splice(e,1),0===this.parent.columns.length?this.parent.destroy():this.parent.notify(g,{processedData:this.parent.kanbanData})},e.prototype.showColumn=function(e){var t=this.hideColumnKeys.indexOf(e);-1!==t&&(this.hideColumnKeys.splice(t,1),this.parent.notify(g,{processedData:this.parent.kanbanData}))},e.prototype.hideColumn=function(e){this.hideColumnKeys.push(e),this.parent.notify(g,{processedData:this.parent.kanbanData})},e}(),ge=function(){function e(e){this.parent=e,this.keyField=this.parent.cardSettings.headerField}return e.prototype.getQuery=function(){return this.parent.dataModule.generateQuery()},e.prototype.getTable=function(){if(this.parent.query){return this.parent.query.clone().fromTable}return null},e.prototype.refreshData=function(e){var t=this,n={requestType:e.requestType,cancel:!1,addedRecords:e.addedRecords,changedRecords:e.changedRecords,deletedRecords:e.deletedRecords};this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger(l,n,function(e){e.cancel||t.parent.dataModule.refreshDataManager()}):e.promise.then(function(e){t.parent.isDestroyed||t.parent.trigger(l,n,function(e){e.cancel||t.parent.dataModule.refreshDataManager()})}).catch(function(e){t.parent.isDestroyed||t.parent.trigger(s,{error:e})})},e.prototype.addCard=function(e){var t=this,n={cancel:!1,requestType:"cardCreate",addedRecords:e instanceof Array?e:[e],changedRecords:[],deletedRecords:[]};this.parent.trigger(o,n,function(n){if(!n.cancel){var r=[];t.parent.cardSettings.priority&&(e instanceof Array?r=e:r.push(e),r=t.priorityOrder(r,n));var a={addedRecords:e instanceof Array?e:[e],changedRecords:t.parent.cardSettings.priority?r:[],deletedRecords:[]},i={requestType:"cardCreated",cancel:!1,promise:e instanceof Array||r.length>0?t.parent.dataModule.dataManager.saveChanges(a,t.keyField,t.getTable(),t.getQuery()):t.parent.dataModule.dataManager.insert(e,t.getTable(),t.getQuery()),addedRecords:a.addedRecords,changedRecords:a.changedRecords,deletedRecords:a.deletedRecords};t.refreshData(i)}})},e.prototype.updateCard=function(e){var t=this,n={requestType:"cardChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};this.parent.trigger(o,n,function(n){if(!n.cancel){if(t.parent.cardSettings.priority){var r=[];e instanceof Array?r=e:r.push(e),e=t.priorityOrder(r,n)}var a={addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]},i={requestType:"cardChanged",cancel:!1,promise:e instanceof Array?t.parent.dataModule.dataManager.saveChanges(a,t.keyField,t.getTable(),t.getQuery()):t.parent.dataModule.dataManager.update(t.keyField,e,t.getTable(),t.getQuery()),addedRecords:a.addedRecords,changedRecords:a.changedRecords,deletedRecords:a.deletedRecords};t.refreshData(i)}})},e.prototype.deleteCard=function(e){var t=this,n={addedRecords:[],changedRecords:[],deletedRecords:[]};n.deletedRecords="string"==typeof e||"number"==typeof e?this.parent.kanbanData.filter(function(n){return n[t.keyField]===e}):e instanceof Array?e:[e];var r={requestType:"cardRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:n.deletedRecords};this.parent.trigger(o,r,function(r){if(!r.cancel){var a={requestType:"cardRemoved",cancel:!1,promise:n.deletedRecords.length>1?t.parent.dataModule.dataManager.saveChanges(n,t.keyField,t.getTable(),t.getQuery()):t.parent.dataModule.dataManager.remove(t.keyField,e,t.getTable(),t.getQuery()),addedRecords:n.addedRecords,changedRecords:n.changedRecords,deletedRecords:n.deletedRecords};t.refreshData(a)}})},e.prototype.priorityOrder=function(e,t){for(var n,r=this,a=e.map(function(e){return e[r.parent.cardSettings.headerField]}),i=e.map(function(e){return e[r.parent.keyField]}),o=[],l=function(i){var l=e.filter(function(e){return e[r.parent.keyField]===i});n=s.parent.getColumnData(i);for(var d=1,c=void 0,p=0,h=l;p<h.length;p++){var u=h[p],g=void 0;if(u[s.parent.cardSettings.priority]?g=u[s.parent.cardSettings.priority]:(1===d&&(c=n.slice(-1)[0][s.parent.cardSettings.priority]),g=u[s.parent.cardSettings.priority]=(d>1?c:n.slice(-1)[0][s.parent.cardSettings.priority])+d,d++),s.parent.swimlaneSettings.keyField){var m=s.parent.getSwimlaneData(u[s.parent.swimlaneSettings.keyField]);n=s.parent.getColumnData(i,m)}for(var y=[],f=0;f<n.length;f++)if(n[f][s.parent.cardSettings.priority]===g){y.push(f+1);break}"cardChange"===t.requestType&&o.push(u);for(var v=o.map(function(e){return e[r.parent.cardSettings.headerField]}),C=y[0];C<=n.length;C++){var w=n[C-1];if(-1===a.indexOf(w[s.parent.cardSettings.headerField])&&g>=w[s.parent.cardSettings.priority]){w[s.parent.cardSettings.priority]=++g;var b=v.indexOf(w[s.parent.cardSettings.headerField]);-1===b?o.push(w):o[b]=w}}}},s=this,d=0,c=i.filter(function(e,t){return i.indexOf(e)===t}).sort();d<c.length;d++){l(c[d])}return o},e}(),me=function(){function e(e){this.parent=e,this.dragObj={element:null,cloneElement:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.dragEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.wireDragEvents=function(e){new t.Draggable(e,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:this.parent.element.querySelector("."+I),dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},e.prototype.dragHelper=function(e){if(this.parent.isAdaptive&&this.parent.touchModule.mobilePopup&&this.parent.touchModule.mobilePopup.element.classList.contains("e-popup-open")&&this.parent.touchModule.mobilePopup.hide(),this.dragObj.element=t.closest(e.sender.target,"."+Q),t.isNullOrUndefined(this.dragObj.element))return null;this.dragObj.element.style.width=t.formatUnit(this.dragObj.element.offsetWidth);var n=t.createElement("div",{innerHTML:this.dragObj.element.outerHTML});return this.dragObj.cloneElement=n.children.item(0),t.addClass([this.dragObj.cloneElement],$),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=t.createElement("div",{className:ae}),this.dragObj.targetClone=t.createElement("div",{className:"e-target-dropped-clone",styles:"width:"+t.formatUnit(this.dragObj.element.offsetWidth)+";height:"+t.formatUnit(this.dragObj.element.offsetHeight)}),this.dragObj.cloneElement},e.prototype.dragStart=function(e){var n=this;if(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains(oe)){var r=t.closest(this.dragObj.element,"."+U);this.dragObj.selectedCards=[].slice.call(r.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)")),this.dragObj.selectedCards.forEach(function(e){n.dragObj.cardDetails.push(n.parent.getCardDetails(e))})}else this.dragObj.cardDetails=[this.parent.getCardDetails(this.dragObj.element)];var a={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStart",a,function(e){if(e.cancel)return n.removeElement(n.dragObj.cloneElement),void(n.dragObj={element:null,cloneElement:null,targetClone:null,draggedClone:null,targetCloneMulti:null});if(n.dragObj.element.classList.contains(oe)){if(n.dragObj.selectedCards.forEach(function(e){n.draggedClone(e)}),n.dragObj.selectedCards.length>1){n.dragObj.cloneElement.innerHTML="";var r=t.createElement("div",{className:"e-multi-card-text",innerHTML:n.dragObj.selectedCards.length+" Cards"});n.dragObj.cloneElement.appendChild(r),t.classList(n.dragObj.cloneElement,["e-multi-card-clone"],[oe]),n.dragObj.cloneElement.style.width="90px"}}else n.draggedClone(n.dragObj.element);n.parent.notify(u,{})})},e.prototype.draggedClone=function(e){this.dragObj.draggedClone=t.createElement("div",{className:J,styles:"width:"+t.formatUnit(e.offsetWidth-1)+";height:"+t.formatUnit(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),t.addClass([e],ee)},e.prototype.drag=function(e){var n=this;if(e.target){var r=t.closest(e.target,"."+Q)||e.target,a=t.closest(r,".e-content-row:not(.e-swimlane-row) .e-content-cells");if(this.calculateArgs(e),a){var i=this.getColumnKey(a),o=i.split(",");this.multiCloneRemove();var l=!1;if(i===this.getColumnKey(t.closest(this.dragObj.draggedClone,"."+_))&&(l=!0),1===o.length||l)if(r.classList.contains(Q)){var s=t.isNullOrUndefined(r.previousElementSibling)?"beforebegin":"afterend";r.insertAdjacentElement(s,this.dragObj.targetClone)}else r.classList.contains(_)&&!t.closest(r,"."+K)?r.querySelector("."+Y).appendChild(this.dragObj.targetClone):r.classList.contains(Y)&&!t.closest(r,"."+K)&&0===a.querySelectorAll("."+Q).length&&r.appendChild(this.dragObj.targetClone);else if(o.length>1){var d=a.offsetHeight,c=a.querySelector(".e-limits");c&&(d-=c.offsetHeight),this.dragObj.targetCloneMulti.style.height=t.formatUnit(d),t.addClass([a.querySelector("."+Y)],re),a.querySelector("."+Y).style.height="auto",a.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var p=0,h=o;p<h.length;p++){var g=h[p],m=t.createElement("div",{className:ie,attrs:{"data-key":g.trim()}}),y=t.createElement("div",{className:"e-text",innerHTML:g.trim()});a.appendChild(this.dragObj.targetCloneMulti).appendChild(m).appendChild(y),m.style.lineHeight=m.style.height=t.formatUnit(d/o.length),y.style.top=t.formatUnit(d/2-y.offsetHeight/2)}}this.parent.notify(u,{})}this.addDropping();var f=!1;a&&(f=a.classList.contains(Z)&&a.classList.contains(te)),f&&(this.toggleVisible(r,void 0),t.addClass([a],ne));var v=[].slice.call(this.parent.element.querySelectorAll("."+ne));v.length>0&&!r.classList.contains(ne)&&!t.closest(r,"."+ne)&&(this.toggleVisible(r,v.slice(-1)[0]),t.removeClass(v,ne)),this.parent.notify(u,{});var C=t.closest(r,"."+_+":not(."+Z+")");C&&(this.dragObj.targetClone.style.width=t.formatUnit(C.offsetWidth-2-16));var w=t.closest(r,"."+ie);if(w){var b=[].slice.call(this.parent.element.querySelectorAll("."+ie)).filter(function(e){return n.getColumnKey(e)===n.getColumnKey(w)});b.length>0&&(t.addClass(b,"e-multi-active"),b[0].previousElementSibling&&t.addClass([b[0].previousElementSibling],"e-multi-bottom-border"))}if(document.body.style.cursor=a?"":"not-allowed",this.parent.swimlaneSettings.keyField&&!this.parent.swimlaneSettings.allowDragAndDrop){var S=t.closest(this.dragObj.element,"."+U),E=t.closest(r,".e-content-row:not(.e-swimlane-row)");S&&E&&S.rowIndex!==E.rowIndex&&(document.body.style.cursor="not-allowed")}"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone),this.multiCloneRemove()),this.updateScrollPosition(e);var k={data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("drag",k)}},e.prototype.removeElement=function(e){this.parent.element.getElementsByClassName(e.className).length>0&&t.remove(e)},e.prototype.addDropping=function(){if(this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) ."+_)).forEach(function(e){return t.addClass([e],te)})}else{var e=t.closest(this.dragObj.draggedClone,"."+U);e&&[].slice.call(e.children).forEach(function(e){return t.addClass([e],te)})}var n=t.closest(this.dragObj.draggedClone,"."+_);n&&t.removeClass([n],te)},e.prototype.dragStop=function(e){var n,r=this,a=t.closest(this.dragObj.targetClone,"."+_);this.parent.element.querySelector("."+ae)&&(n=t.closest(e.target,"."+ie));var i={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStop",i,function(e){if(!e.cancel&&(a||n)){var i;a?i=r.getColumnKey(a):(i=r.getColumnKey(n),a=t.closest(n,"."+_)),r.dragObj.selectedCards instanceof HTMLElement?r.updateDroppedData(r.dragObj.selectedCards,i,a):r.dragObj.selectedCards.forEach(function(e){r.updateDroppedData(e,i,a)}),r.parent.cardSettings.priority&&r.changeOrder(r.dragObj.modifiedData),r.parent.crudModule.updateCard(r.dragObj.modifiedData)}r.removeElement(r.dragObj.draggedClone),r.removeElement(r.dragObj.targetClone),r.removeElement(r.dragObj.cloneElement);[].slice.call(r.parent.element.querySelectorAll("."+J)).forEach(function(e){return t.remove(e)}),t.removeClass([r.dragObj.element],ee),clearInterval(r.dragObj.navigationInterval),r.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor="");[].slice.call(r.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) ."+_)).forEach(function(e){return t.removeClass([e],te)}),r.parent.isAdaptive&&(r.parent.touchModule.tabHold=!1),r.dragObj.cardDetails=r.dragObj.modifiedData=[]})},e.prototype.updateDroppedData=function(e,n,r){var a=this.parent.getCardDetails(e);if(1===n.split(",").length&&(a[this.parent.keyField]=n),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var i=t.closest(r,"."+U).previousElementSibling;if(this.parent.isAdaptive){var o=this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;a[this.parent.swimlaneSettings.keyField]=o}else a[this.parent.swimlaneSettings.keyField]=this.getColumnKey(i)}this.dragObj.modifiedData.push(a)},e.prototype.changeOrder=function(e){var t=this,n=!1,r=this.dragObj.targetClone.previousElementSibling;if(!r||r.classList.contains(ee)||r.classList.contains($)||r.classList.contains(J)){if(!this.dragObj.targetClone.nextElementSibling)return;r=this.dragObj.targetClone.nextElementSibling}else n=!0;var a=this.parent.getCardDetails(r)[this.parent.cardSettings.priority];e.forEach(function(e){n?e[t.parent.cardSettings.priority]=++a:1!==a&&a<=e[t.parent.cardSettings.priority]?e[t.parent.cardSettings.priority]=--a:1===a&&(e[t.parent.cardSettings.priority]=1)})},e.prototype.toggleVisible=function(e,n){var r=this;[].slice.call(this.parent.element.querySelectorAll("."+F)).forEach(function(t){r.getColumnKey(t)===r.getColumnKey(n||e)&&r.parent.actionModule.columnToggle(t)});var a=t.closest(this.dragObj.draggedClone,"."+_);if(a){var i=t.formatUnit(a.offsetWidth-16);this.dragObj.draggedClone.style.width=i,this.dragObj.cloneElement.style.width=i}},e.prototype.multiCloneRemove=function(){var e=[].slice.call(this.parent.element.querySelectorAll("."+ae));if(e.length>0){[].slice.call(this.parent.element.querySelectorAll("."+ie)).forEach(function(e){return t.remove(e)}),e.forEach(function(e){var n=t.closest(e,"."+_);n&&(n.style.borderStyle="",t.removeClass([n.querySelector("."+Y)],re))}),this.removeElement(this.dragObj.targetCloneMulti)}},e.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getColumnKey=function(e){return e?e.getAttribute("data-key").trim():""},e.prototype.updateScrollPosition=function(e){var n=this;t.isNullOrUndefined(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval(function(){n.autoScrollValidation(e)&&n.autoScroll()},100))},e.prototype.autoScrollValidation=function(e){var t=this.dragObj.pageY,n=this.dragObj.pageX,r={left:!1,right:!1,top:!1,bottom:!1};return this.dragObj.pageY-window.scrollY<66&&(r.top=!0),t>window.innerHeight-30+window.pageYOffset&&t<window.innerHeight+window.pageYOffset&&(r.bottom=!0),n<30+window.pageXOffset&&n>0+window.pageXOffset&&(r.left=!0),n>window.innerWidth-30+window.pageXOffset&&n<window.innerWidth+window.pageXOffset&&(r.right=!0),this.dragEdges=r,r.bottom||r.top||r.left||r.right},e.prototype.autoScroll=function(){if(this.parent.isAdaptive){var e;if(this.dragEdges.top||this.dragEdges.bottom?e=this.dragObj.targetClone?t.closest(this.dragObj.targetClone,"."+Y):t.closest(this.dragObj.draggedClone,"."+Y):(this.dragEdges.right||this.dragEdges.left)&&(e=this.parent.element.querySelector("."+I)),e){var n=e.offsetHeight<=e.scrollHeight,r=e.offsetWidth<=e.scrollWidth,a=e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,i=e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;if(n&&a&&(this.dragEdges.top||this.dragEdges.bottom)&&(e.scrollTop+=this.dragEdges.top?-66:30),r&&i&&(this.dragEdges.left||this.dragEdges.right)){(this.parent.layoutModule.getWidth()*(this.parent.columns.length-1)>e.scrollLeft||this.dragEdges.left)&&(e.scrollLeft+=this.dragEdges.left?-30:30)}}}else this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)},e.prototype.unWireDragEvents=function(e){var t=e.ej2_instances[0];t&&!t.isDestroyed&&t.destroy()},e}(),ye=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",swimlaneExpandAll:"ctrl+40",swimlaneCollapseAll:"ctrl+38",selectedSwimlaneExpand:"alt+40",selectedSwimlaneCollapse:"alt+38",selectedColumnCollapse:"ctrl+37",selectedColumnExpand:"ctrl+39",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",multiSelectionByLeftArrow:"shift+37",multiSelectionByRightArrow:"shift+39",shiftTab:"shift+tab",enter:"13",tab:"tab"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new t.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){var n=this.parent.element.querySelectorAll(".e-card."+oe).item(0);if(n||t.closest(document.activeElement,"."+x))switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":this.processUpDownArrow(e.action,n);break;case"rightArrow":case"leftArrow":case"multiSelectionByLeftArrow":case"multiSelectionByRightArrow":this.processLeftRightArrow(e,n);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,n);break;case"swimlaneExpandAll":case"swimlaneCollapseAll":case"selectedSwimlaneExpand":case"selectedSwimlaneCollapse":this.processSwimlaneExpandCollapse(e.action);break;case"selectedColumnExpand":case"selectedColumnCollapse":this.processColumnExpandcollapse(e.action,n);break;case"enter":this.processEnter(e,n);break;case"tab":case"shiftTab":this.processTab(e.action,n)}},e.prototype.processCardSelection=function(e,n){if(n){t.removeClass([n],oe);var r=this.parent.actionModule.selectionArray;r.splice(r.indexOf(n.getAttribute("data-id")),1)}var a=[].slice.call(this.parent.element.querySelectorAll("."+Q)),i="firstCardSelection"===e?a[0]:a[a.length-1];this.parent.actionModule.cardSelection(i,!1,!1)},e.prototype.processLeftRightArrow=function(e,t){var n=document.activeElement;!t&&n&&(n.classList.contains(X)||n.classList.contains(z)?this.parent.actionModule.columnExpandCollapse(n):(n.classList.contains(W)||n.classList.contains(V))&&this.parent.actionModule.rowExpandCollapse(e)),t&&this.processMoveCards(e.action,this.parent.actionModule.lastCardSelection)},e.prototype.processUpDownArrow=function(e,n){var r,a=!1;if(n){var i=t.closest(this.parent.actionModule.lastCardSelection,"."+_).getAttribute("data-key"),o="."+_+'[data-key="'+i+'"] .'+Q,l=[].slice.call(this.parent.element.querySelectorAll(o)),s=this.parent.actionModule.lastCardSelection.getAttribute("data-id"),d=this.getCardId(l).indexOf(s);a=("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&"Multiple"===this.parent.cardSettings.selectionType;r=l["upArrow"===e||"multiSelectionByUpArrow"===e?d-1:d+1]}else if("downArrow"===e&&document.activeElement)if(document.activeElement.classList.contains(W)){r=(c=t.closest(document.activeElement,"."+K)).nextElementSibling.querySelector("."+Q)}else document.activeElement.classList.contains(x)&&!this.parent.swimlaneSettings.keyField&&(r=this.parent.element.querySelector("."+Q));else if("upArrow"===e&&document.activeElement&&document.activeElement.classList.contains(W)){var c=t.closest(document.activeElement,"."+K);r=(l=[].slice.call(c.previousElementSibling.querySelectorAll("."+Q))).slice(-1)[0]}this.parent.actionModule.cardSelection(r,!1,a),this.parent.element.focus()},e.prototype.processColumnExpandcollapse=function(e,t){var n=t.getAttribute("data-key"),r=this.parent.element.querySelector("."+F+'[data-key="'+n+'"]');if(r.classList.contains(B)){if(r.classList.contains(Z)&&"selectedColumnCollapse"===e||!r.classList.contains(Z)&&"selectedColumnExpand"===e)return;this.parent.actionModule.columnExpandCollapse(r)}},e.prototype.processSwimlaneExpandCollapse=function(e){if(this.parent.swimlaneSettings.keyField){var n=".e-card."+oe;"swimlaneExpandAll"!==e&&"swimlaneCollapseAll"!==e||(n="."+U+"."+K);var r=[].slice.call(this.parent.element.querySelectorAll(n)),a=this.parent.element.querySelectorAll(n+"."+Z).length;"swimlaneCollapseAll"===e&&r.length-a==0||"swimlaneExpandAll"===e&&r.length-a===r.length||r.forEach(function(n){n.classList.contains(Q)&&(!(n=t.closest(n,"."+U).previousElementSibling).classList.contains(Z)&&"selectedSwimlaneExpand"===e||n.classList.contains(Z)&&"selectedSwimlaneCollapse"===e)||(n.classList.contains(Z)?(t.removeClass([n,n.nextElementSibling],Z),t.classList(n.querySelector("."+D),[W],[V])):n.classList.contains(Z)||(t.addClass([n,n.nextElementSibling],Z),t.classList(n.querySelector("."+D),[V],[W])))})}},e.prototype.getCardId=function(e){var t=[];return e.forEach(function(e){return t.push(e.getAttribute("data-id"))}),t},e.prototype.processNextRow=function(e){for(var t=0;t<e.childElementCount;t++){var n=e.children[t],r=[].slice.call(n.querySelectorAll("."+Q));if(r.length>0){this.parent.actionModule.cardSelection(r[0],!1,!1),e.classList.contains(Z)&&this.processSwimlaneExpandCollapse("selectedSwimlaneExpand");break}}},e.prototype.processPreviousRow=function(e){for(var t=e.childElementCount-1;t>=0;t--){var n=e.children[t],r=[].slice.call(n.querySelectorAll("."+Q));if(r.length>0){this.parent.actionModule.cardSelection(r.slice(-1)[0],!1,!1);break}}},e.prototype.processCards=function(e,t,n,r){if(e){var a=("multiSelectionByRightArrow"===r||"multiSelectionByLeftArrow"===r)&&"Multiple"===this.parent.cardSettings.selectionType,i=t[n]||t.slice(-1)[0];this.parent.actionModule.cardSelection(i,!1,a)}},e.prototype.processEnter=function(e,t){var n=e.target;n.classList.contains(H)&&this.parent.actionModule.columnExpandCollapse(e),(n.classList.contains(W)||n.classList.contains(V))&&this.parent.actionModule.rowExpandCollapse(e),t&&this.parent.actionModule.cardSelection(t,!1,!1)},e.prototype.processTab=function(e,n){if(n){var r=t.closest(n,"."+U),a="tab"===e?r.previousElementSibling:r.nextElementSibling;a&&a.querySelector("."+V+",."+W).focus(),t.removeClass([n],oe)}},e.prototype.processMoveCards=function(e,n){var r,a,i=t.closest(n,"."+_),o=[].slice.call(i.querySelectorAll("."+Q)),l=t.closest(i,"."+U),s=this.getCardId(o).indexOf(n.getAttribute("data-id"));if("rightArrow"===e||"multiSelectionByRightArrow"===e)if(i.cellIndex===l.childElementCount-1&&this.parent.swimlaneSettings.keyField&&"multiSelectionByRightArrow"!==e){if(s<this.getCardId(o).length-1)this.parent.actionModule.cardSelection(this.parent.actionModule.lastCardSelection.nextElementSibling,!1,!1);else if(l.rowIndex!==this.parent.element.querySelectorAll("."+U).length-1){var d=this.parent.element.querySelector("."+U+":nth-child("+(l.rowIndex+3)+")");this.processNextRow(d)}}else{for(var c=!1,p=i.cellIndex+1;p<l.children.length;p++)if(r=l.children[p],(a=[].slice.call(r.querySelectorAll("."+Q))).length>0){c=!0;break}this.processCards(c,a,s,e)}else if(0===i.cellIndex&&this.parent.swimlaneSettings.keyField&&"multiSelectionByLeftArrow"!==e){if(s>0)this.parent.actionModule.cardSelection(this.parent.actionModule.lastCardSelection.previousElementSibling,!1,!1);else if(l.rowIndex>1){var h="."+U+":nth-child("+(l.rowIndex-1)+"):not(."+Z+")",u=this.parent.element.querySelector(h);u&&this.processPreviousRow(u)}}else{for(c=!1,p=i.cellIndex-1;p>=0;p--){if(r=l.children[p],(a=[].slice.call(r.querySelectorAll("."+Q))).length>0){c=!0;break}if(0===p&&this.parent.swimlaneSettings.keyField){d=this.parent.element.querySelector("."+U+":nth-child("+(l.rowIndex-1)+")");this.processPreviousRow(d)}}this.processCards(c,a,s,e)}},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),fe=function(){function e(e){this.parent=e,this.renderTooltip()}return e.prototype.renderTooltip=function(){this.tooltipObj=new n.Tooltip({cssClass:this.parent.cssClass+" e-kanban-tooltip",enableRtl:this.parent.enableRtl,mouseTrail:!this.parent.isAdaptive,offsetY:5,position:"BottomCenter",showTipPointer:!0,target:"."+le,beforeRender:this.onBeforeRender.bind(this)}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0},e.prototype.onBeforeRender=function(e){var n;if(this.parent.tooltipTemplate){n=t.createElement("div");var r=t.closest(e.target,"."+Q),a=this.parent.getCardDetails(r),i=this.parent.templateParser(this.parent.tooltipTemplate)(a);t.append(i,n)}else n='<div class="e-card-header-caption">'+e.target.innerText+"</div>";this.tooltipObj.setProperties({content:n},!0)},e.prototype.destroy=function(){this.tooltipObj.destroy(),t.addClass([this.parent.element],"e-control"),this.tooltipObj=null},e}(),ve=function(){function e(e){this.parent=e,this.tabHold=!1}return e.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+I),this.touchObj=new t.Touch(this.element,{tapHold:this.tapHoldHandler.bind(this)})},e.prototype.tapHoldHandler=function(e){this.tabHold=!0;var n=t.closest(e.originalEvent.target,"."+Q);n&&"Multiple"===this.parent.cardSettings.selectionType&&(this.parent.actionModule.cardSelection(n,!0,!1),this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},e.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=t.createElement("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-close"></button></div><div class="'+he+'"></div>'});document.body.appendChild(e),t.addClass([e],j),this.mobilePopup=new n.Popup(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var r=this.mobilePopup.element.querySelector(".e-close"),i=new a.Button({cssClass:"e-flat e-round e-small",enableRtl:this.parent.enableRtl,iconCss:D+" e-close-icon"});i.appendTo(r),i.isStringTemplate=!0,t.EventHandler.add(r,"click",this.closeClick,this)}},e.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") "+this.parent.localeObj.getConstant("cardsSelected"):1===t.length&&(e=" "+this.parent.getCardDetails(t[0])[this.parent.cardSettings.headerField]),e},e.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector("."+he).textContent=e:this.mobilePopup.hide()}},e.prototype.closeClick=function(){this.parent.touchModule.mobilePopup.hide()},e.prototype.popupClose=function(){this.popupDestroy()},e.prototype.popupDestroy=function(){if(this.mobilePopup&&this.mobilePopup.element){var e=this.mobilePopup.element.querySelector(".e-control.e-btn").ej2_instances[0];e&&e.destroy(),this.mobilePopup.destroy(),t.remove(this.mobilePopup.element),this.mobilePopup=null}},e.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},e.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},e}(),Ce=function(){function e(e){this.parent=e}return e.prototype.renderSwimlaneHeader=function(){var e=t.createElement("div",{className:se});e.innerHTML='<div class="e-swimlane-header-toolbar"><div class="e-toolbar-menu"><div class="e-icons e-icon-menu"></div></div><div class="e-toolbar-level-title"><div class="'+de+'"></div></div></div>',this.parent.element.appendChild(e),t.EventHandler.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)},e.prototype.renderSwimlaneTree=function(){var e=this.parent.element.querySelector("."+se).offsetHeight,r=window.innerHeight-e;this.popupOverlay=t.createElement("div",{className:"e-swimlane-overlay",styles:"height: "+r+"px;"});var a=t.createElement("div",{className:ce,styles:"top:"+e+"px;"}),o=t.createElement("div",{className:pe+" e-popup-close",styles:"height: "+r+"px;"});a.appendChild(o),a.appendChild(this.popupOverlay),this.parent.element.appendChild(a);var l=t.createElement("div",{className:"e-swimlane-tree"});o.appendChild(l),this.treeViewObj=new i.TreeView({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:this.parent.layoutModule.kanbanRows,id:"keyField",text:"textField"},nodeTemplate:this.parent.swimlaneSettings.template,nodeClicked:this.treeSwimlaneClick.bind(this)}),this.treeViewObj.appendTo(l),this.treePopup=new n.Popup(o,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,enableRtl:this.parent.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+I)})},e.prototype.menuClick=function(e){if(this.parent.element.querySelector("."+pe).classList.contains("e-popup-open"))this.treePopup.hide(),t.removeClass([this.popupOverlay],"e-enable");else{var n=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));t.removeClass(n,"e-active"),t.addClass([n[this.parent.layoutModule.swimlaneIndex]],"e-active"),this.treePopup.show(),t.addClass([this.popupOverlay],"e-enable")}},e.prototype.treeSwimlaneClick=function(e){this.treePopup.hide();var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));this.parent.layoutModule.swimlaneIndex=t.indexOf(e.node),this.parent.layoutModule.scrollLeft=0,this.parent.notify(g,{processedData:this.parent.kanbanData}),e.event.preventDefault()},e.prototype.getWidth=function(){return 80*window.innerWidth/100},e}(),we=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(e){function n(t){var n=e.call(this,t)||this;return n.kanbanRows=[],n.parent=t,n.columnKeys=[],n.swimlaneIndex=0,n.swimlaneData={},n.scrollLeft=0,n.parent.on(g,n.initRender,n),n.parent.on(u,n.scrollUiUpdate,n),n}return we(n,e),n.prototype.initRender=function(){if(0!==this.parent.columns.length){if(this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.swimlaneData=this.getSwimlaneCards(),this.parent.isAdaptive){var e=this.parent.element.querySelector("."+I);e&&(this.scrollLeft=e.scrollLeft)}this.destroy(),this.parent.on(g,this.initRender,this),this.parent.on(u,this.scrollUiUpdate,this),this.parent.isAdaptive&&this.parent.swimlaneSettings.keyField&&this.renderSwimlaneHeader();var n=t.createElement("div",{className:P});this.parent.element.appendChild(n),this.renderHeader(n),this.renderContent(),this.renderCards(),this.renderValidation(),this.parent.notify(u,{}),this.wireEvents()}},n.prototype.renderHeader=function(e){var n=t.createElement("div",{className:this.parent.swimlaneSettings.keyField?"e-swimlane":""});e.appendChild(n);var r=t.createElement("table",{className:R+" e-header-table"});n.appendChild(r),this.renderColGroup(r);var a=t.createElement("thead");r.appendChild(a),this.parent.stackedHeaders.length>0&&a.appendChild(this.createStackedRow(this.parent.stackedHeaders));var i=t.createElement("tr",{className:"e-header-row"});a.appendChild(i);for(var o=function(e){if(l.isColumnVisible(e)){var n=l.parent.actionModule.columnToggleArray.indexOf(e.keyField),r=t.createElement("th",{className:-1===n?F:F+" "+Z,attrs:{"data-role":"kanban-column","data-key":e.keyField}}),a=[];e.allowToggle&&(a.push(B),e.isExpanded||a.push(Z)),t.addClass([r],a);var o=t.createElement("div",{className:q});r.appendChild(o);var s=l.columnData[e.keyField].length,d=t.createElement("div",{className:"e-header-title"});if(o.appendChild(d),e.template){var c={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:s};t.addClass([r],T);var h=l.parent.templateParser(e.template)(c);t.append(h,d)}else{var u=t.createElement("div",{className:L,innerHTML:e.headerText});if(d.appendChild(u),e.showItemCount){var g=t.createElement("div",{className:"e-item-count",innerHTML:"- "+s.toString()+" "+l.parent.localeObj.getConstant("items")});d.appendChild(g)}}if(e.allowToggle){var m=e.isExpanded&&-1===n?X:z,y=t.createElement("div",{className:H+" "+D+" "+m,attrs:{tabindex:"0"}});o.appendChild(y)}var f={data:[{keyField:e.keyField,textField:e.headerText}],element:i,cancel:!1,requestType:"headerRow"};l.parent.trigger(p,f,function(e){e.cancel||i.appendChild(r)})}},l=this,s=0,d=this.parent.columns;s<d.length;s++){o(d[s])}},n.prototype.renderContent=function(){var e=t.createElement("div",{className:I});this.parent.element.appendChild(e);var n=t.createElement("div",{className:this.parent.swimlaneSettings.keyField?"e-swimlane":""});e.appendChild(n);var r=t.createElement("table",{className:R+" e-content-table"});n.appendChild(r),this.renderColGroup(r);var a=t.createElement("tbody");r.appendChild(a);var i,o=!1;this.swimlaneRow=this.kanbanRows,this.parent.swimlaneSettings.keyField&&this.parent.isAdaptive&&(this.swimlaneRow=[this.kanbanRows[this.swimlaneIndex]],this.renderSwimlaneTree(),this.parent.element.querySelector("."+de).innerHTML=this.swimlaneRow[0].textField);for(var l=function(e){if(s.parent.swimlaneSettings.keyField&&0!==s.parent.swimlaneToggleArray.length){var n=s.parent.swimlaneToggleArray.indexOf(e.keyField);o=-1!==n}i=o?U+" "+Z:U;var r=t.createElement("tr",{className:i});s.parent.swimlaneSettings.keyField&&!s.parent.isAdaptive&&s.renderSwimlaneRow(a,e,o);for(var l=0,d=s.parent.columns;l<d.length;l++){var c=d[l];if(s.isColumnVisible(c)){var h=-1===(n=s.parent.actionModule.columnToggleArray.indexOf(c.keyField))?_:_+" "+Z,u=t.createElement("td",{className:h,attrs:{"data-role":"kanban-column","data-key":c.keyField}});(c.allowToggle&&!c.isExpanded||-1!==n)&&(t.addClass([u],Z),u.appendChild(t.createElement("div",{className:G,innerHTML:c.headerText}))),r.appendChild(u);var g={data:[{keyField:e.keyField,textField:e.textField}],element:r,cancel:!1,requestType:"contentRow"};s.parent.trigger(p,g,function(e){e.cancel||a.appendChild(r)})}}},s=this,d=0,c=this.swimlaneRow;d<c.length;d++){l(c[d])}},n.prototype.renderSwimlaneRow=function(e,n,r){var a=r?" "+Z:"",i=t.createElement("tr",{className:"e-content-row e-swimlane-row"+a,attrs:{"data-key":n.keyField}}),o=this.parent.columns.length-this.parent.actionModule.hideColumnKeys.length,l=t.createElement("td",{className:_,attrs:{"data-role":"kanban-column",colspan:o.toString()}}),s=t.createElement("div",{className:se});l.appendChild(s);var d=r?V:W,c=t.createElement("div",{className:D+" "+d,attrs:{tabindex:"0"}});s.appendChild(c);var h=t.createElement("div",{className:q});s.appendChild(h);var u=this.swimlaneData[n.keyField].length;if(this.parent.swimlaneSettings.template){var g=t.extend({},n,{count:u},!0);t.addClass([l],T);var m=this.parent.templateParser(this.parent.swimlaneSettings.template)(g);t.append(m,h)}else h.appendChild(t.createElement("div",{className:"e-swimlane-text",innerHTML:n.textField,attrs:{"data-role":n.textField}}));this.parent.swimlaneSettings.showItemCount&&s.appendChild(t.createElement("div",{className:"e-item-count",innerHTML:"- "+u.toString()+" "+this.parent.localeObj.getConstant("items")})),i.appendChild(l);var y={data:[{keyField:n.keyField,textField:n.textField}],element:i,cancel:!1,requestType:"swimlaneRow"};this.parent.trigger(p,y,function(t){t.cancel||e.appendChild(i)})},n.prototype.renderCards=function(){var e=this,n=this.swimlaneRow,r=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),a=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),i=[];r.forEach(function(r,o){for(var l=0,s=function(a){if(e.isColumnVisible(a)){var i=e.parent.swimlaneSettings.keyField?e.getColumnData(a.keyField,e.swimlaneData[n[o].keyField]):e.columnData[a.keyField];l+=i.length;var s=r.querySelector('[data-key="'+a.keyField+'"]'),d=t.createElement("div",{className:Y});s.appendChild(d);for(var p=function(n){var r=n[e.parent.cardSettings.headerField],a=-1===e.parent.actionModule.selectionArray.indexOf(r)?"":" "+oe,i=t.createElement("div",{className:Q+a,attrs:{"data-id":n[e.parent.cardSettings.headerField],"data-key":n[e.parent.keyField]}});if(e.parent.cardSettings.template){t.addClass([i],T);var o=e.parent.templateParser(e.parent.cardSettings.template)(n);t.append(o,i)}else{var l=e.parent.enableTooltip?" "+le:"";if(e.parent.cardSettings.showHeader){var s=t.createElement("div",{className:"e-card-header"}),p=t.createElement("div",{className:"e-card-header-caption"}),h=t.createElement("div",{className:"e-card-header-title"+l,innerHTML:n[e.parent.cardSettings.headerField]||""});s.appendChild(p),p.appendChild(h),i.appendChild(s)}var u=t.createElement("div",{className:"e-card-content"+l,innerHTML:n[e.parent.cardSettings.contentField]||""});i.appendChild(u)}var g={data:n,element:i,cancel:!1};e.parent.trigger(c,g,function(e){e.cancel||d.appendChild(i)})},h=0,u=i;h<u.length;h++){p(u[h])}}},d=0,p=e.parent.columns;d<p.length;d++){s(p[d])}0===l&&(i.push(r),a.length>0&&i.push(a[o]))}),this.parent.swimlaneSettings.showEmptyRow||i.forEach(function(e){return t.remove(e)})},n.prototype.renderColGroup=function(e){var n=this,r=t.createElement("colgroup");this.parent.columns.forEach(function(e){if(n.isColumnVisible(e)){var a=n.parent.actionModule.columnToggleArray.indexOf(e.keyField),i=e.allowToggle&&!e.isExpanded,o=-1===a?i?Z:"":Z,l=t.createElement("col",{className:o,attrs:{"data-key":e.keyField},styles:n.parent.isAdaptive?"width: "+(i?t.formatUnit(50):t.formatUnit(n.getWidth())):""});r.appendChild(l)}}),e.appendChild(r)},n.prototype.getRows=function(){var e=this,t=[];return this.parent.swimlaneSettings.keyField?(this.parent.kanbanData.map(function(n){(e.parent.swimlaneSettings.showEmptyRow||-1!==e.columnKeys.indexOf(n[e.parent.keyField]))&&t.push({keyField:n[e.parent.swimlaneSettings.keyField],textField:n[e.parent.swimlaneSettings.textField]||n[e.parent.swimlaneSettings.keyField]})}),(t=t.filter(function(e,t,n){return t===n.map(function(e){return e.keyField}).indexOf(e.keyField)})).sort(function(e,t){var n=e.textField.toLowerCase(),r=t.textField.toLowerCase();return n>r?1:r>n?-1:0}),"Descending"===this.parent.swimlaneSettings.sortBy&&t.reverse()):t.push({keyField:"",textField:""}),t},n.prototype.createStackedRow=function(e){var n=t.createElement("tr",{className:"e-header-row e-stacked-header-row"}),r=[];this.parent.columns.forEach(function(t){for(var n="",a=0,i=e;a<i.length;a++){var o=i[a];-1!==o.keyFields.indexOf(t.keyField)&&(n=o.text)}r.push(n)});for(var a=0;a<r.length;a++){for(var i=1,o=a+1;o<r.length&&(""!==r[a]&&""!==r[o]&&r[a]===r[o]);o++)i++;var l=t.createElement("div",{className:L,innerHTML:r[a]}),s=t.createElement("th",{className:F+" "+N,attrs:{colspan:i.toString()}});n.appendChild(s).appendChild(l),a+=i-1}return n},n.prototype.scrollUiUpdate=function(){var e=this,n=this.parent.element.querySelector("."+P),r=this.parent.element.querySelector("."+I),a=this.parent.element.offsetHeight-n.offsetHeight;if(this.parent.isAdaptive){a=window.innerHeight-(n.offsetHeight+25);var i=this.parent.element.querySelector("."+se);i&&(a-=i.offsetHeight);[].slice.call(this.parent.element.querySelectorAll("."+_)).forEach(function(n){var r=n.querySelector("."+Y);r.classList.contains(re)||(r.style.height=t.formatUnit(a),t.EventHandler.add(n,"touchmove",e.onAdaptiveScroll,e))})}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(r.style.height=t.formatUnit(a)),[].slice.call(n.children).forEach(function(n){var a=0;r.offsetWidth-r.clientWidth>0&&(a=17,r.offsetHeight-r.clientHeight>0&&(n.style.width=t.formatUnit(r.clientWidth))),e.parent.enableRtl?n.style.paddingLeft=t.formatUnit(a):n.style.paddingRight=t.formatUnit(a)})},n.prototype.onContentScroll=function(e){this.parent.element.querySelector("."+P+" div").scrollLeft=e.target.scrollLeft},n.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},n.prototype.isColumnVisible=function(e){var t=this,n=!1;return e.keyField.split(",").forEach(function(e){n=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)}),n},n.prototype.renderLimits=function(e,n){var r=t.createElement("div",{className:"e-limits"});e.minCount&&r.appendChild(t.createElement("div",{className:"e-min-count",innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&r.appendChild(t.createElement("div",{className:"e-max-count",innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),r.childElementCount>0&&(n.firstElementChild.classList.contains(Y)?n.insertBefore(r,n.firstElementChild):n.appendChild(r))},n.prototype.renderValidation=function(){var e=this,n=function(e,t){var n;return e.maxCount&&t>e.maxCount?n="e-max-color":e.minCount&&t<e.minCount&&(n="e-min-color"),n};this.parent.columns.forEach(function(r){if(r.minCount||r.maxCount){var a=e.columnData[r.keyField],i='[data-key="'+r.keyField+'"]',o=e.parent.element.querySelector("."+(F+i)),l=[].slice.call(e.parent.element.querySelectorAll("."+(_+i)));if("Swimlane"===e.parent.constraintType&&e.parent.swimlaneSettings.keyField)e.swimlaneRow.forEach(function(i,o){e.renderLimits(r,l[o]);var s=a.filter(function(t){return t[e.parent.swimlaneSettings.keyField]===i.keyField}),d=n(r,s.length);d&&t.addClass([l[o]],d)});else{e.renderLimits(r,o);var s=n(r,a.length);s&&t.addClass(l.concat(o),s)}}})},n.prototype.getColumnData=function(e,t){var n=this;void 0===t&&(t=this.parent.kanbanData);for(var r=[],a=function(e){var a=t.filter(function(t){return t[n.parent.keyField]===e.trim()});r=r.concat(a)},i=0,o=e.split(",");i<o.length;i++){a(o[i])}return this.parent.cardSettings.priority&&(r=r.sort(function(e,t){return parseInt(e[n.parent.cardSettings.priority],10)-parseInt(t[n.parent.cardSettings.priority],10)})),r},n.prototype.documentClick=function(e){if(!t.closest(e.target,"."+x)){var n=[].slice.call(this.parent.element.querySelectorAll(".e-card."+oe));t.removeClass(n,oe)}},n.prototype.getColumnCards=function(e){var t=this,n={};return this.columnKeys=[],this.parent.columns.forEach(function(r){t.columnKeys=t.columnKeys.concat(r.keyField.split(",").map(function(e){return e.trim()}));var a=t.getColumnData(r.keyField,e);n[r.keyField]=a}),n},n.prototype.getSwimlaneCards=function(){var e=this,t={};return this.parent.swimlaneSettings.keyField&&this.kanbanRows.forEach(function(n){return t[n.keyField]=e.parent.kanbanData.filter(function(t){return e.columnKeys.indexOf(t[e.parent.keyField])>-1&&t[e.parent.swimlaneSettings.keyField]===n.keyField})}),t},n.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector("."+P);[].slice.call(e.children).forEach(function(e){return t.remove(e)}),this.renderHeader(e)},n.prototype.refreshCards=function(){[].slice.call(this.parent.element.querySelectorAll("."+Y)).forEach(function(e){return t.remove(e)}),this.renderCards()},n.prototype.wireEvents=function(){t.EventHandler.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),t.EventHandler.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),t.EventHandler.add(document,t.Browser.touchStartEvent,this.documentClick,this);var e=this.parent.element.querySelector("."+I);t.EventHandler.add(e,"scroll",this.onContentScroll,this),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),e.scrollLeft=this.scrollLeft),this.wireDragEvent()},n.prototype.unWireEvents=function(){t.EventHandler.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),t.EventHandler.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),t.EventHandler.remove(document,t.Browser.touchStartEvent,this.documentClick);var e=this.parent.element.querySelector("."+I);e&&(t.EventHandler.remove(e,"scroll",this.onContentScroll),this.parent.allowDragAndDrop&&this.unWireDragEvent()),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},n.prototype.wireDragEvent=function(){this.parent.allowDragAndDrop&&this.parent.dragAndDropModule.wireDragEvents(this.parent.element.querySelector("."+I))},n.prototype.unWireDragEvent=function(){this.parent.dragAndDropModule.unWireDragEvents(this.parent.element.querySelector("."+I))},n.prototype.destroy=function(){this.parent.off(g,this.initRender),this.parent.off(u,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector("."+P);e&&t.remove(e);var n=this.parent.element.querySelector("."+I);n&&t.remove(n),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var r=this.parent.element.querySelector("."+se);r&&t.remove(r);var a=this.parent.element.querySelector("."+ce);a&&t.remove(a)},n}(Ce),Se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},ke=function(e){function r(t,n){return e.call(this,t,n)||this}return Se(r,e),r.prototype.preRender=function(){this.isAdaptive=t.Browser.isDevice,this.kanbanData=[],this.enablePersistence&&this.swimlaneToggleArray||(this.swimlaneToggleArray=[]),this.activeCardData={data:null,element:null};this.localeObj=new t.L10n(this.getModuleName(),{items:"items",min:"Min",max:"Max",cardsSelected:"Cards Selected"},this.locale)},r.prototype.requiredModules=function(){return[]},r.prototype.getPersistData=function(){return this.addOnPersist(["columns","dataSource","swimlaneToggleArray"])},r.prototype.getModuleName=function(){return"kanban"},r.prototype.render=function(){var e=[x],r=[];this.enableRtl?e.push("e-rtl"):r.push("e-rtl"),this.isAdaptive?e.push(j):r.push(j),this.cssClass&&e.push(this.cssClass),t.classList(this.element,e,r),this.element.style.width=t.formatUnit(this.width),this.element.style.height=t.formatUnit(this.height),n.createSpinner({target:this.element}),this.showSpinner(),this.initializeModules()},r.prototype.onPropertyChanged=function(e,n){for(var r=0,a=Object.keys(e);r<a.length;r++){switch(a[r]){case"cssClass":n.cssClass&&t.removeClass([this.element],n.cssClass),e.cssClass&&t.addClass([this.element],e.cssClass);break;case"enableRtl":case"locale":this.refresh();break;case"width":this.element.style.width=t.formatUnit(e.width),this.element.querySelector("."+P).firstElementChild.style.width="auto",this.notify(u,{});break;case"height":this.element.style.height=t.formatUnit(e.height),this.element.querySelector("."+I).style.height="auto",this.notify(u,{});break;case"dataSource":case"query":this.dataModule=new m(this);break;case"columns":case"constraintType":this.notify(g,{processedData:this.kanbanData});break;case"swimlaneSettings":this.onSwimlaneSettingsPropertyChanged(e.swimlaneSettings,n.swimlaneSettings);break;case"cardSettings":this.onCardSettingsPropertyChanged(e.cardSettings,n.cardSettings);break;case"allowDragAndDrop":e.allowDragAndDrop?this.layoutModule.wireDragEvent():this.layoutModule.unWireDragEvent();break;case"enableTooltip":this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),e.enableTooltip&&(this.tooltipModule=new fe(this),this.layoutModule.refreshCards());break;case"allowKeyboard":this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),e.allowKeyboard&&(this.keyboardModule=new ye(this));break;case"stackedHeaders":this.layoutModule.refreshHeaders()}}},r.prototype.onSwimlaneSettingsPropertyChanged=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"keyField":case"textField":case"showEmptyRow":case"showItemCount":case"template":case"sortBy":this.notify(g,{processedData:this.kanbanData})}}},r.prototype.onCardSettingsPropertyChanged=function(e,n){for(var r=0,a=Object.keys(e);r<a.length;r++){switch(a[r]){case"showHeader":case"headerField":case"contentField":case"template":this.layoutModule.refreshCards();break;case"selectionType":var i=this.getSelectedCards();i.length>0&&t.removeClass(i,oe)}}},r.prototype.initializeModules=function(){this.dataModule=new m(this),this.layoutModule=new be(this),this.allowKeyboard&&(this.keyboardModule=new ye(this)),this.actionModule=new ue(this),this.crudModule=new ge(this),this.dragAndDropModule=new me(this),this.enableTooltip&&(this.tooltipModule=new fe(this)),(t.Browser.isDevice||t.Browser.isTouch)&&(this.touchModule=new ve(this))},r.prototype.destroyModules=function(){this.layoutModule&&(this.layoutModule.destroy(),this.layoutModule=null),this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.actionModule=null,this.crudModule=null,this.dataModule=null,this.dragAndDropModule=null},r.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return t.compile(document.querySelector(e).innerHTML.trim())}catch(n){return t.compile(e)}},r.prototype.getCardDetails=function(e){var t=this,n="number"==typeof this.kanbanData[0][this.cardSettings.headerField]?parseInt(e.getAttribute("data-id"),10):e.getAttribute("data-id");return this.kanbanData.filter(function(e){return e[t.cardSettings.headerField]===n})[0]},r.prototype.getColumnData=function(e,t){return this.layoutModule.getColumnCards(t)[e]||[]},r.prototype.getSwimlaneData=function(e){return this.layoutModule.getSwimlaneCards()[e]||[]},r.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card."+oe))},r.prototype.showSpinner=function(){n.showSpinner(this.element)},r.prototype.hideSpinner=function(){n.hideSpinner(this.element)},r.prototype.addCard=function(e){this.crudModule.addCard(e)},r.prototype.updateCard=function(e){this.crudModule.updateCard(e)},r.prototype.deleteCard=function(e){this.crudModule.deleteCard(e)},r.prototype.addColumn=function(e,t){this.actionModule.addColumn(e,t)},r.prototype.deleteColumn=function(e){this.actionModule.deleteColumn(e)},r.prototype.showColumn=function(e){this.actionModule.showColumn(e)},r.prototype.hideColumn=function(e){this.actionModule.hideColumn(e)},r.prototype.destroy=function(){this.destroyModules(),[].slice.call(this.element.childNodes).forEach(function(e){return t.detach(e)});var n=[x];this.cssClass&&(n=n.concat(this.cssClass.split(" "))),t.removeClass([this.element],n),e.prototype.destroy.call(this)},Ee([t.Property()],r.prototype,"cssClass",void 0),Ee([t.Property("auto")],r.prototype,"width",void 0),Ee([t.Property("auto")],r.prototype,"height",void 0),Ee([t.Property([])],r.prototype,"dataSource",void 0),Ee([t.Property()],r.prototype,"query",void 0),Ee([t.Property()],r.prototype,"keyField",void 0),Ee([t.Property("Column")],r.prototype,"constraintType",void 0),Ee([t.Collection([],k)],r.prototype,"columns",void 0),Ee([t.Property(!0)],r.prototype,"allowKeyboard",void 0),Ee([t.Collection([],M)],r.prototype,"stackedHeaders",void 0),Ee([t.Complex({},v)],r.prototype,"swimlaneSettings",void 0),Ee([t.Complex({},b)],r.prototype,"cardSettings",void 0),Ee([t.Property(!0)],r.prototype,"allowDragAndDrop",void 0),Ee([t.Property(!1)],r.prototype,"enableTooltip",void 0),Ee([t.Property()],r.prototype,"tooltipTemplate",void 0),Ee([t.Event()],r.prototype,"actionBegin",void 0),Ee([t.Event()],r.prototype,"actionComplete",void 0),Ee([t.Event()],r.prototype,"actionFailure",void 0),Ee([t.Event()],r.prototype,"created",void 0),Ee([t.Event()],r.prototype,"dataBinding",void 0),Ee([t.Event()],r.prototype,"dataBound",void 0),Ee([t.Event()],r.prototype,"cardClick",void 0),Ee([t.Event()],r.prototype,"cardDoubleClick",void 0),Ee([t.Event()],r.prototype,"columnRendered",void 0),Ee([t.Event()],r.prototype,"cardRendered",void 0),Ee([t.Event()],r.prototype,"dragStart",void 0),Ee([t.Event()],r.prototype,"drag",void 0),Ee([t.Event()],r.prototype,"dragStop",void 0),r=Ee([t.NotifyPropertyChanges],r)}(t.Component);e.Kanban=ke,e.actionBegin=o,e.actionComplete=l,e.actionFailure=s,e.cardClick="cardClick",e.cardDoubleClick=d,e.cardRendered=c,e.columnRendered=p,e.dataBinding=h,e.dataBound="dataBound",e.dragStart="dragStart",e.drag="drag",e.dragStop="dragStop",e.documentClick="document-click",e.contentReady=u,e.dataReady=g,e.bottomSpace=25,e.cardSpace=16,e.toggleWidth=50,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-kanban.umd.min.js.map

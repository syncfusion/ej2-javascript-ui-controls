{"version":3,"file":"ej2-richtexteditor.umd.min.js","sources":["../src/rich-text-editor/models/items.js","../src/rich-text-editor/base/util.js","../src/common/util.js","../src/rich-text-editor/actions/html-attributes.js","../src/rich-text-editor/base/constant.js","../src/rich-text-editor/base/classes.js","../src/rich-text-editor/base/enum.js","../src/rich-text-editor/models/default-locale.js","../src/rich-text-editor/renderer/toolbar-renderer.js","../src/rich-text-editor/actions/base-toolbar.js","../src/rich-text-editor/actions/dropdown-buttons.js","../src/rich-text-editor/services/service-locator.js","../src/rich-text-editor/services/renderer-factory.js","../src/rich-text-editor/actions/toolbar-action.js","../src/rich-text-editor/actions/toolbar.js","../src/rich-text-editor/actions/keyboard.js","../src/rich-text-editor/actions/color-picker.js","../src/rich-text-editor/actions/base-quick-toolbar.js","../src/rich-text-editor/renderer/popup-renderer.js","../src/rich-text-editor/actions/quick-toolbar.js","../src/rich-text-editor/actions/count.js","../src/markdown-parser/plugin/markdown-selection.js","../src/rich-text-editor/actions/markdown-toolbar-status.js","../src/rich-text-editor/actions/execute-command-callback.js","../src/common/constant.js","../src/rich-text-editor/formatter/formatter.js","../src/markdown-parser/base/constant.js","../src/markdown-parser/plugin/lists.js","../src/markdown-parser/plugin/formats.js","../src/markdown-parser/plugin/md-selection-formats.js","../src/common/config.js","../src/markdown-parser/plugin/undo.js","../src/markdown-parser/plugin/link.js","../src/markdown-parser/plugin/table.js","../src/markdown-parser/plugin/clearformat.js","../src/markdown-parser/base/markdown-parser.js","../src/rich-text-editor/formatter/markdown-formatter.js","../src/rich-text-editor/renderer/markdown-renderer.js","../src/rich-text-editor/actions/markdown-editor.js","../src/editor-manager/base/constant.js","../src/selection/selection.js","../src/editor-manager/plugin/dom-node.js","../src/editor-manager/plugin/lists.js","../src/editor-manager/plugin/formats.js","../src/editor-manager/plugin/insert-methods.js","../src/editor-manager/plugin/nodecutter.js","../src/editor-manager/plugin/inserthtml.js","../src/editor-manager/plugin/link.js","../src/editor-manager/plugin/alignments.js","../src/editor-manager/plugin/indents.js","../src/editor-manager/base/classes.js","../src/editor-manager/plugin/image.js","../src/editor-manager/plugin/table.js","../src/editor-manager/plugin/isformatted.js","../src/editor-manager/plugin/selection-commands.js","../src/editor-manager/plugin/selection-exec.js","../src/editor-manager/plugin/inserthtml-exec.js","../src/editor-manager/plugin/clearformat.js","../src/editor-manager/plugin/clearformat-exec.js","../src/editor-manager/plugin/undo.js","../src/editor-manager/plugin/ms-word-clean-up.js","../src/editor-manager/plugin/insert-text.js","../src/editor-manager/base/editor-manager.js","../src/rich-text-editor/formatter/html-formatter.js","../src/editor-manager/plugin/toolbar-status.js","../src/rich-text-editor/actions/html-toolbar-status.js","../src/rich-text-editor/renderer/content-renderer.js","../src/rich-text-editor/renderer/iframe-content-renderer.js","../src/rich-text-editor/actions/html-editor.js","../src/rich-text-editor/actions/paste-clean-up.js","../src/rich-text-editor/renderer/render.js","../src/rich-text-editor/renderer/link-module.js","../src/rich-text-editor/renderer/image-module.js","../src/rich-text-editor/renderer/view-source.js","../src/rich-text-editor/renderer/table-module.js","../src/rich-text-editor/base/interface.js","../src/rich-text-editor/models/toolbar-settings.js","../src/rich-text-editor/models/iframe-settings.js","../src/rich-text-editor/models/inline-mode.js","../src/rich-text-editor/actions/full-screen.js","../src/rich-text-editor/base/rich-text-editor.js"],"sourcesContent":["// tslint:disable\n/**\n * Export items model\n */\nexport var templateItems = ['alignments', 'formats', 'fontname', 'fontsize', 'fontcolor', 'backgroundcolor', 'align', 'display', 'tablerows', 'tablecolumns', 'tablecellhorizontalalign', 'tablecellverticalalign', 'styles'];\nexport var tools = {\n    'alignments': {\n        'id': 'Alignments',\n        'icon': 'e-alignments',\n        'tooltip': 'Alignments',\n        'command': 'Alignments',\n        'subCommand': 'Alignments'\n    },\n    'justifyleft': {\n        'id': 'JustifyLeft',\n        'icon': 'e-justify-left',\n        'tooltip': 'JustifyLeft',\n        'command': 'Alignments',\n        'subCommand': 'JustifyLeft'\n    },\n    'justifycenter': {\n        'id': 'JustifyCenter',\n        'icon': 'e-justify-center',\n        'tooltip': 'JustifyCenter',\n        'command': 'Alignments',\n        'subCommand': 'JustifyCenter'\n    },\n    'justifyright': {\n        'id': 'JustifyRight',\n        'icon': 'e-justify-right',\n        'tooltip': 'JustifyRight',\n        'command': 'Alignments',\n        'subCommand': 'JustifyRight'\n    },\n    'justifyfull': {\n        'id': 'JustifyFull',\n        'icon': 'e-justify-full',\n        'tooltip': 'JustifyFull',\n        'command': 'Alignments',\n        'subCommand': 'JustifyFull'\n    },\n    'fontname': {\n        'id': 'FontName',\n        'icon': 'e-font-name',\n        'tooltip': 'Font Name',\n        'command': 'Font',\n        'subCommand': 'FontName'\n    },\n    'fontsize': {\n        'id': 'FontSize',\n        'icon': 'e-font-size',\n        'tooltip': 'Font Size',\n        'command': 'Font',\n        'subCommand': 'FontSize'\n    },\n    'fontcolor': {\n        'id': 'FontColor',\n        'icon': 'e-font-color',\n        'tooltip': 'Font Color',\n        'command': 'Font',\n        'subCommand': 'FontColor',\n        'value': '#ff0000ff'\n    },\n    'backgroundcolor': {\n        'id': 'BackgroundColor',\n        'icon': 'e-background-color',\n        'tooltip': 'Background Color',\n        'command': 'Font',\n        'subCommand': 'BackgroundColor',\n        'value': '#ffff00ff'\n    },\n    'bold': {\n        'id': 'Bold',\n        'icon': 'e-bold',\n        'tooltip': 'Bold',\n        'command': 'Style',\n        'subCommand': 'Bold'\n    },\n    'italic': {\n        'id': 'Italic',\n        'icon': 'e-italic',\n        'tooltip': 'Italic',\n        'command': 'Style',\n        'subCommand': 'Italic'\n    },\n    'underline': {\n        'id': 'Underline',\n        'icon': 'e-underline',\n        'tooltip': 'Underline',\n        'command': 'Style',\n        'subCommand': 'Underline'\n    },\n    'strikethrough': {\n        'id': 'StrikeThrough',\n        'icon': 'e-strike-through',\n        'tooltip': 'StrikeThrough',\n        'command': 'Style',\n        'subCommand': 'StrikeThrough'\n    },\n    'clearformat': {\n        'id': 'ClearFormat',\n        'icon': 'e-clear-format',\n        'tooltip': 'Clear Format',\n        'command': 'Clear',\n        'subCommand': 'ClearFormat'\n    },\n    'clearall': {\n        'id': 'ClearAll',\n        'icon': 'e-clear-all',\n        'tooltip': 'Clear All',\n        'command': 'Clear',\n        'subCommand': 'ClearAll'\n    },\n    'cut': {\n        'id': 'Cut',\n        'icon': 'e-cut',\n        'tooltip': 'Cut',\n        'command': 'ClipBoard',\n        'subCommand': 'Cut'\n    },\n    'copy': {\n        'id': 'Copy',\n        'icon': 'e-copy',\n        'tooltip': 'Copy',\n        'command': 'ClipBoard',\n        'subCommand': 'Copy'\n    },\n    'paste': {\n        'id': 'Paste',\n        'icon': 'e-paste',\n        'tooltip': 'Paste',\n        'command': 'ClipBoard',\n        'subCommand': 'Paste'\n    },\n    'unorderedlist': {\n        'id': 'UnorderedList',\n        'icon': 'e-unorder-list',\n        'tooltip': 'Bulleted List',\n        'command': 'Lists',\n        'subCommand': 'UL'\n    },\n    'orderedlist': {\n        'id': 'OrderedList',\n        'icon': 'e-order-list',\n        'tooltip': 'Numbered List',\n        'command': 'Lists',\n        'subCommand': 'OL'\n    },\n    'indent': {\n        'id': 'Indent',\n        'icon': 'e-indent',\n        'tooltip': 'Increase Indent',\n        'command': 'Indents',\n        'subCommand': 'Indent'\n    },\n    'outdent': {\n        'id': 'Outdent',\n        'icon': 'e-outdent',\n        'tooltip': 'Decrease Indent',\n        'command': 'Indents',\n        'subCommand': 'Outdent'\n    },\n    'undo': {\n        'id': 'Undo',\n        'icon': 'e-undo',\n        'tooltip': 'Undo',\n        'command': 'Actions',\n        'subCommand': 'Undo'\n    },\n    'redo': {\n        'id': 'Redo',\n        'icon': 'e-redo',\n        'tooltip': 'Redo',\n        'command': 'Actions',\n        'subCommand': 'Redo'\n    },\n    'superscript': {\n        'id': 'SuperScript',\n        'icon': 'e-super-script',\n        'tooltip': 'Superscript',\n        'command': 'Effects',\n        'subCommand': 'SuperScript'\n    },\n    'subscript': {\n        'id': 'SubScript',\n        'icon': 'e-sub-script',\n        'tooltip': 'Subscript',\n        'command': 'Effects',\n        'subCommand': 'SubScript'\n    },\n    'createlink': {\n        'id': 'CreateLink',\n        'icon': 'e-create-link',\n        'tooltip': 'Insert Hyperlink',\n        'command': 'Links',\n        'subCommand': 'CreateLink'\n    },\n    'openlink': {\n        'id': 'OpenLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Links',\n        'subCommand': 'OpenLink'\n    },\n    'editlink': {\n        'id': 'EditLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Links',\n        'subCommand': 'EditLink'\n    },\n    'removelink': {\n        'id': 'RemoveLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Links',\n        'subCommand': 'RemoveLink'\n    },\n    'image': {\n        'id': 'Image',\n        'icon': 'e-image',\n        'tooltip': 'Insert Image',\n        'command': 'Images',\n        'subCommand': 'Image'\n    },\n    'createtable': {\n        'id': 'CreateTable',\n        'icon': 'e-create-table',\n        'tooltip': 'Create Table',\n        'command': 'Table',\n        'subCommand': 'CreateTable'\n    },\n    'removetable': {\n        'id': 'removeTable',\n        'icon': 'e-remove-table',\n        'tooltip': 'Remove Table',\n        'command': 'removeTable',\n        'subCommand': 'removeTable'\n    },\n    'replace': {\n        'id': 'Replace',\n        'icon': 'e-replace',\n        'tooltip': 'Replace',\n        'command': 'Images',\n        'subCommand': 'Replace'\n    },\n    'align': {\n        'id': 'Align',\n        'icon': 'e-align',\n        'tooltip': 'Align',\n        'command': 'Images',\n        'subCommand': 'Align'\n    },\n    'caption': {\n        'id': 'Caption',\n        'icon': 'e-caption',\n        'tooltip': 'Image Caption',\n        'command': 'Images',\n        'subCommand': 'Caption'\n    },\n    'remove': {\n        'id': 'Remove',\n        'icon': 'e-remove',\n        'tooltip': 'Remove',\n        'command': 'Images',\n        'subCommand': 'Remove'\n    },\n    'openimagelink': {\n        'id': 'OpenImageLink',\n        'icon': 'e-open-link',\n        'tooltip': 'Open Link',\n        'command': 'Images',\n        'subCommand': 'OpenImageLink'\n    },\n    'editimagelink': {\n        'id': 'EditImageLink',\n        'icon': 'e-edit-link',\n        'tooltip': 'Edit Link',\n        'command': 'Images',\n        'subCommand': 'EditImageLink'\n    },\n    'removeimagelink': {\n        'id': 'RemoveImageLink',\n        'icon': 'e-remove-link',\n        'tooltip': 'Remove Link',\n        'command': 'Images',\n        'subCommand': 'RemoveImageLink'\n    },\n    'insertlink': {\n        'id': 'InsertLink',\n        'icon': 'e-insert-link',\n        'tooltip': 'Insert Link',\n        'command': 'Images',\n        'subCommand': 'InsertLink'\n    },\n    'display': {\n        'id': 'Display',\n        'icon': 'e-display',\n        'tooltip': 'Display',\n        'command': 'Images',\n        'subCommand': 'Display'\n    },\n    'alttext': {\n        'id': 'AltText',\n        'icon': 'e-alt-text',\n        'tooltip': 'Alternative Text',\n        'command': 'Images',\n        'subCommand': 'AltText'\n    },\n    'dimension': {\n        'id': 'Dimension',\n        'icon': 'e-dimension',\n        'tooltip': 'Change Size',\n        'command': 'Images',\n        'subCommand': 'Dimension'\n    },\n    'fullscreen': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'View',\n        'subCommand': 'Maximize'\n    },\n    'maximize': {\n        'id': 'Maximize',\n        'icon': 'e-maximize',\n        'tooltip': 'Maximize',\n        'command': 'FullScreen',\n        'subCommand': 'Maximize'\n    },\n    'minimize': {\n        'id': 'Minimize',\n        'icon': 'e-minimize',\n        'tooltip': 'Minimize',\n        'command': 'FullScreen',\n        'subCommand': 'Minimize'\n    },\n    'lowercase': {\n        'id': 'LowerCase',\n        'icon': 'e-lower-case',\n        'tooltip': 'Lower Case',\n        'command': 'Casing',\n        'subCommand': 'LowerCase'\n    },\n    'uppercase': {\n        'id': 'UpperCase',\n        'icon': 'e-upper-case',\n        'tooltip': 'Upper Case',\n        'command': 'Casing',\n        'subCommand': 'UpperCase'\n    },\n    'print': {\n        'id': 'Print',\n        'icon': 'e-print',\n        'tooltip': 'Print',\n        'command': 'Print',\n        'subCommand': 'Print'\n    },\n    'formats': {\n        'id': 'Formats',\n        'icon': 'e-formats',\n        'tooltip': 'Formats',\n        'command': 'Formats',\n        'subCommand': 'Formats'\n    },\n    'sourcecode': {\n        'id': 'SourceCode',\n        'icon': 'e-source-code',\n        'tooltip': 'Source Code',\n        'command': 'SourceCode',\n        'subCommand': 'SourceCode'\n    },\n    'preview': {\n        'id': 'Preview',\n        'icon': 'e-preview',\n        'tooltip': 'Preview',\n        'command': 'Preview',\n        'subCommand': 'Preview'\n    },\n    'viewside': {\n        'id': 'ViewSide',\n        'icon': 'e-view-side',\n        'tooltip': 'ViewSide',\n        'command': 'ViewSide',\n        'subCommand': 'ViewSide'\n    },\n    'insertcode': {\n        'id': 'InsertCode',\n        'icon': 'e-insert-code',\n        'tooltip': 'Insert Code',\n        'command': 'InsertCode',\n        'subCommand': 'InsertCode'\n    },\n    'tableheader': {\n        'id': 'TableHeader',\n        'icon': 'e-table-header',\n        'tooltip': 'Table Header',\n        'command': 'Table',\n        'subCommand': 'TableHeader'\n    },\n    'tableremove': {\n        'id': 'TableRemove',\n        'icon': 'e-table-remove',\n        'tooltip': 'Table Remove',\n        'command': 'Table',\n        'subCommand': 'TableRemove'\n    },\n    'tablerows': {\n        'id': 'TableRows',\n        'icon': 'e-table-rows',\n        'tooltip': 'Table Rows',\n        'command': 'Table',\n        'subCommand': 'TableRows'\n    },\n    'tablecolumns': {\n        'id': 'TableColumns',\n        'icon': 'e-table-columns',\n        'tooltip': 'Table Columns',\n        'command': 'Table',\n        'subCommand': 'TableColumns'\n    },\n    'tablecellbackground': {\n        'id': 'TableCellBackground',\n        'icon': 'e-table-cell-background',\n        'tooltip': 'Table Cell Background',\n        'command': 'Table',\n        'subCommand': 'TableCellBackground'\n    },\n    'tablecellhorizontalalign': {\n        'id': 'TableCellHorizontalAlign',\n        'icon': 'e-table-cell-horizontalAlign',\n        'tooltip': 'Table Cell HorizontalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellHorizontalAlign'\n    },\n    'tablecellverticalalign': {\n        'id': 'TableCellVerticalAlign',\n        'icon': 'e-table-cell-verticalAlign',\n        'tooltip': 'Table Cell VerticalAlign',\n        'command': 'Table',\n        'subCommand': 'TableCellVerticalAlign'\n    },\n    'tableeditproperties': {\n        'id': 'TableEditProperties',\n        'icon': 'e-table-edit-properties',\n        'tooltip': 'Table Edit Properties',\n        'command': 'Table',\n        'subCommand': 'TableEditProperties'\n    },\n    'styles': {\n        'id': 'Styles',\n        'icon': 'e-table-styles',\n        'tooltip': 'Styles',\n        'command': 'Table',\n        'subCommand': 'Styles'\n    }\n};\nvar alignmentLocale = [\n    { locale: 'alignmentsDropDownLeft', value: 'JustifyLeft' },\n    { locale: 'alignmentsDropDownCenter', value: 'JustifyCenter' },\n    { locale: 'alignmentsDropDownRight', value: 'JustifyRight' },\n    { locale: 'alignmentsDropDownJustify', value: 'JustifyFull' }\n];\nexport var alignmentItems = [\n    { iconCss: 'e-icons e-justify-left', text: 'Align Left', command: 'Alignments', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', text: 'Align Center', command: 'Alignments', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', text: 'Align Right', command: 'Alignments', subCommand: 'JustifyRight' },\n    { iconCss: 'e-icons e-justify-full', text: 'Align Justify', command: 'Alignments', subCommand: 'JustifyFull' }\n];\nexport var imageAlignItems = [\n    { iconCss: 'e-icons e-justify-left', command: 'Images', subCommand: 'JustifyLeft' },\n    { iconCss: 'e-icons e-justify-center', command: 'Images', subCommand: 'JustifyCenter' },\n    { iconCss: 'e-icons e-justify-right', command: 'Images', subCommand: 'JustifyRight' },\n];\nvar displayLocale = [\n    { locale: 'imageDisplayDropDownInline', value: 'Inline' },\n    { locale: 'imageDisplayDropDownBreak', value: 'Break' }\n];\nexport var imageDisplayItems = [\n    { text: 'Inline', cssClass: 'e-inline', command: 'Images', subCommand: 'Inline' },\n    { text: 'Break', cssClass: 'e-break', command: 'Images', subCommand: 'Break' },\n];\nvar tableRowLocale = [\n    { locale: 'tableInsertRowDropDownBefore', value: 'InsertRowBefore' },\n    { locale: 'tableInsertRowDropDownAfter', value: 'InsertRowAfter' },\n    { locale: 'tableInsertRowDropDownDelete', value: 'DeleteRow' }\n];\nexport var tableRowsItems = [\n    { iconCss: 'e-icons e-insert-row-before', text: 'Insert row before', command: 'Table', subCommand: 'InsertRowBefore' },\n    { iconCss: 'e-icons e-insert-row-after', text: 'Insert row after', command: 'Table', subCommand: 'InsertRowAfter' },\n    { iconCss: 'e-icons e-delete-row', text: 'Delete row', command: 'Table', subCommand: 'DeleteRow' },\n];\nvar tableColumnLocale = [\n    { locale: 'tableInsertColumnDropDownLeft', value: 'InsertColumnLeft' },\n    { locale: 'tableInsertColumnDropDownRight', value: 'InsertColumnRight' },\n    { locale: 'tableInsertColumnDropDownDelete', value: 'DeleteColumn' }\n];\nexport var tableColumnsItems = [\n    { iconCss: 'e-icons e-insert-column-left', text: 'Insert column left', command: 'Table', subCommand: 'InsertColumnLeft' },\n    { iconCss: 'e-icons e-insert-column-right', text: 'Insert column right', command: 'Table', subCommand: 'InsertColumnRight' },\n    { iconCss: 'e-icons e-delete-column', text: 'Delete column', command: 'Table', subCommand: 'DeleteColumn' },\n];\nvar tableVerticalLocale = [\n    { locale: 'tableVerticalAlignDropDownTop', value: 'AlignTop' },\n    { locale: 'tableVerticalAlignDropDownMiddle', value: 'AlignMiddle' },\n    { locale: 'tableVerticalAlignDropDownBottom', value: 'AlignBottom' }\n];\nexport var TableCellVerticalAlignItems = [\n    { iconCss: 'e-icons e-align-top', text: 'Align Top', command: 'Table', subCommand: 'AlignTop' },\n    { iconCss: 'e-icons e-align-middle', text: 'Align Middle', command: 'Table', subCommand: 'AlignMiddle' },\n    { iconCss: 'e-icons e-align-bottom', text: 'Align Bottom', command: 'Table', subCommand: 'AlignBottom' },\n];\nvar tableStyleLocale = [\n    { locale: 'tableStylesDropDownDashedBorder', value: 'Dashed' },\n    { locale: 'tableStylesDropDownAlternateRows', value: 'Alternate' }\n];\nexport var TableStyleItems = [\n    { text: 'Dashed Borders', cssClass: 'e-dashed-borders', command: 'Table', subCommand: 'Dashed' },\n    { text: 'Alternate Rows', cssClass: 'e-alternate-rows', command: 'Table', subCommand: 'Alternate' }\n];\nfunction getLocale(self, localeItems, item) {\n    for (var i = 0; localeItems.length > i; i++) {\n        if (localeItems[i].value === item.subCommand) {\n            return self.localeObj.getConstant(localeItems[i].locale);\n        }\n    }\n    return item.text;\n}\nexport function updateDropDownLocale(self) {\n    alignmentItems.forEach(function (item, i) {\n        alignmentItems[i].text = getLocale(self, alignmentLocale, alignmentItems[i]);\n    });\n    imageDisplayItems.forEach(function (item, i) {\n        imageDisplayItems[i].text = getLocale(self, displayLocale, imageDisplayItems[i]);\n    });\n    tableRowsItems.forEach(function (item, i) {\n        tableRowsItems[i].text = getLocale(self, tableRowLocale, tableRowsItems[i]);\n    });\n    tableColumnsItems.forEach(function (item, i) {\n        tableColumnsItems[i].text = getLocale(self, tableColumnLocale, tableColumnsItems[i]);\n    });\n    TableCellVerticalAlignItems.forEach(function (item, i) {\n        TableCellVerticalAlignItems[i].text = getLocale(self, tableVerticalLocale, TableCellVerticalAlignItems[i]);\n    });\n    TableStyleItems.forEach(function (item, i) {\n        TableStyleItems[i].text = getLocale(self, tableStyleLocale, TableStyleItems[i]);\n    });\n}\n","/**\n * Exports util methods used by RichTextEditor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement, Browser } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as model from '../models/items';\nimport { toolsLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nexport function getIndex(val, items) {\n    var index = -1;\n    items.some(function (item, i) {\n        if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n            index = i;\n            return true;\n        }\n        return false;\n    });\n    return index;\n}\nexport function hasClass(element, className) {\n    var hasClass = false;\n    if (element.classList.contains(className)) {\n        hasClass = true;\n    }\n    return hasClass;\n}\nexport function getDropDownValue(items, value, type, returnType) {\n    var data;\n    var result;\n    for (var k = 0; k < items.length; k++) {\n        if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n    }\n    if (!isNOU(data)) {\n        switch (returnType) {\n            case 'text':\n                result = data.text;\n                break;\n            case 'value':\n                result = data.value;\n                break;\n            case 'iconCss':\n                result = data.iconCss;\n                break;\n        }\n    }\n    return result;\n}\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\nexport function getFormattedFontSize(value) {\n    if (isNOU(value)) {\n        return '';\n    }\n    return value;\n}\nexport function pageYOffset(e, parentElement, isIFrame) {\n    var y = 0;\n    if (isIFrame) {\n        y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n    }\n    else {\n        y = e.pageY;\n    }\n    return y;\n}\nexport function getTooltipText(item, serviceLocator) {\n    var i10n = serviceLocator.getService('rteLocale');\n    var itemLocale = toolsLocale[item];\n    var tooltipText = i10n.getConstant(itemLocale);\n    return tooltipText;\n}\nexport function setToolbarStatus(e, isPopToolbar) {\n    var dropDown = e.dropDownModule;\n    var data = e.args;\n    var keys = Object.keys(e.args);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        for (var j = 0; j < e.tbItems.length; j++) {\n            var item = e.tbItems[j].subCommand;\n            var itemStr = item && item.toLocaleLowerCase();\n            if (item && (itemStr === key) || (item === 'UL' && key === 'unorderedlist') || (item === 'OL' && key === 'orderedlist')) {\n                if (typeof data[key] === 'boolean') {\n                    if (data[key] === true) {\n                        addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                    else {\n                        removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                }\n                else if ((typeof data[key] === 'string' || data[key] === null) &&\n                    getIndex(key, e.parent.toolbarSettings.items) > -1) {\n                    var value = ((data[key]) ? data[key] : '');\n                    var result = '';\n                    switch (key) {\n                        case 'formats':\n                            if (isNOU(dropDown.formatDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var formatItems = e.parent.format.types;\n                            result = getDropDownValue(formatItems, value, 'subCommand', 'text');\n                            var formatContent = isNOU(e.parent.format.default) ? formatItems[0].text :\n                                e.parent.format.default;\n                            dropDown.formatDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.format.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + (isNOU(result) ? formatContent : result) +\n                                '</span></span>');\n                            dropDown.formatDropDown.dataBind();\n                            break;\n                        case 'alignments':\n                            if (isNOU(dropDown.alignDropDown) ||\n                                (!isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var alignItems = model.alignmentItems;\n                            result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                            dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                            dropDown.alignDropDown.dataBind();\n                            break;\n                        case 'fontname':\n                            if (isNOU(dropDown.fontNameDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var fontNameItems = e.parent.fontFamily.items;\n                            result = getDropDownValue(fontNameItems, value, 'value', 'text');\n                            var fontNameContent = isNOU(e.parent.fontFamily.default) ? fontNameItems[0].text :\n                                e.parent.fontFamily.default;\n                            var name_1 = (isNOU(result) ? fontNameContent : result);\n                            e.tbElements[j].title = name_1;\n                            dropDown.fontNameDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontFamily.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + name_1 + '</span></span>');\n                            dropDown.fontNameDropDown.dataBind();\n                            break;\n                        case 'fontsize':\n                            if (isNOU(dropDown.fontSizeDropDown) ||\n                                (!isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed)) {\n                                return;\n                            }\n                            var fontSizeItems = e.parent.fontSize.items;\n                            var fontSizeContent = isNOU(e.parent.fontSize.default) ? fontSizeItems[1].text :\n                                e.parent.fontSize.default;\n                            result = getDropDownValue(fontSizeItems, (value === '' ? fontSizeContent.replace(/\\s/g, '') : value), 'value', 'text');\n                            dropDown.fontSizeDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontSize.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + getFormattedFontSize(result) + '</span></span>');\n                            dropDown.fontSizeDropDown.dataBind();\n                            break;\n                    }\n                }\n            }\n        }\n    }\n}\nexport function getCollection(items) {\n    if (typeof items === 'object') {\n        return items;\n    }\n    else {\n        return [items];\n    }\n}\nexport function getTBarItemsIndex(items, toolbarItems) {\n    var itemsIndex = [];\n    for (var i = 0; i < items.length; i++) {\n        for (var j = 0; j < toolbarItems.length; j++) {\n            if (toolbarItems[j].type === 'Separator') {\n                continue;\n            }\n            else {\n                if (items[i] === 'OrderedList' && toolbarItems[j].subCommand === 'OL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'UnorderedList' && toolbarItems[j].subCommand === 'UL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === toolbarItems[j].subCommand) {\n                    itemsIndex.push(j);\n                    break;\n                }\n            }\n        }\n    }\n    return itemsIndex;\n}\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n    var i = 0;\n    var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n    var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    var keys = Object.keys(undoRedoStatus);\n    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n        var key = keys_2[_i];\n        var target = tbItems[trgItems[i]];\n        if (target) {\n            baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[key]);\n        }\n        i++;\n    }\n}\n/**\n * To dispatch the event manually\n */\nexport function dispatchEvent(element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n}\nexport function parseHtml(value) {\n    var tempNode = createElement('template');\n    tempNode.innerHTML = value;\n    if (tempNode.content instanceof DocumentFragment) {\n        return tempNode.content;\n    }\n    else {\n        return document.createRange().createContextualFragment(value);\n    }\n}\nexport function getTextNodesUnder(docElement, node) {\n    var nodes = [];\n    for (node = node.firstChild; node; node = node.nextSibling) {\n        if (node.nodeType === 3) {\n            nodes.push(node);\n        }\n        else {\n            nodes = nodes.concat(getTextNodesUnder(docElement, node));\n        }\n    }\n    return nodes;\n}\nexport function toObjectLowerCase(obj) {\n    var convertedValue = {};\n    var keys = Object.keys(obj);\n    for (var i = 0; i < Object.keys(obj).length; i++) {\n        convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n    }\n    return convertedValue;\n}\nexport function getEditValue(value, rteObj) {\n    var val;\n    if (value !== null && value !== '') {\n        val = rteObj.enableHtmlEncode ? updateTextNode(decode(value)) : updateTextNode(value);\n        rteObj.setProperties({ value: val }, true);\n    }\n    else {\n        val = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n    }\n    return val;\n}\nexport function updateTextNode(value) {\n    var tempNode = document.createElement('div');\n    tempNode.innerHTML = value;\n    var childNodes = tempNode.childNodes;\n    if (childNodes.length > 0) {\n        [].slice.call(childNodes).forEach(function (childNode) {\n            if (childNode.nodeType === Node.TEXT_NODE && childNode.parentNode === tempNode) {\n                var defaultTag = document.createElement('p');\n                var parentNode = childNode.parentNode;\n                parentNode.insertBefore(defaultTag, childNode);\n                defaultTag.appendChild(childNode);\n            }\n        });\n    }\n    return tempNode.innerHTML;\n}\nexport function decode(value) {\n    return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<')\n        .replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>')\n        .replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ')\n        .replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n}\n","/**\n * Exports common util methods used by RichTextEditor.\n */\nimport { isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\nexport function setEditFrameFocus(editableElement, selector) {\n    if (editableElement.nodeName === 'BODY' && !isNullOrUndefined(selector)) {\n        top.window.document.querySelector(selector).contentWindow.focus();\n    }\n}\n","export function setAttributes(htmlAttributes, rte, isFrame, initial) {\n    var target;\n    if (isFrame) {\n        var iFrame = rte.contentModule.getDocument();\n        target = iFrame.querySelector('body');\n    }\n    else {\n        target = rte.element;\n    }\n    if (Object.keys(htmlAttributes).length) {\n        for (var _i = 0, _a = Object.keys(htmlAttributes); _i < _a.length; _i++) {\n            var htmlAttr = _a[_i];\n            if (htmlAttr === 'class') {\n                target.classList.add(htmlAttributes[htmlAttr]);\n            }\n            else if (htmlAttr === 'disabled' && htmlAttributes[htmlAttr] === 'disabled') {\n                rte.enabled = false;\n                rte.setEnable();\n            }\n            else if (htmlAttr === 'readonly' && htmlAttributes[htmlAttr] === 'readonly') {\n                rte.readonly = true;\n                rte.setReadOnly(initial);\n            }\n            else if (htmlAttr === 'style') {\n                target.setAttribute('style', htmlAttributes[htmlAttr]);\n            }\n            else if (htmlAttr === 'placeholder') {\n                rte.placeholder = htmlAttributes[htmlAttr];\n                rte.setPlaceHolder();\n            }\n            else {\n                var validateAttr = ['name', 'required'];\n                if (validateAttr.indexOf(htmlAttr) > -1) {\n                    rte.valueContainer.setAttribute(htmlAttr, htmlAttributes[htmlAttr]);\n                }\n                else {\n                    target.setAttribute(htmlAttr, htmlAttributes[htmlAttr]);\n                }\n            }\n        }\n    }\n}\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/**\n * Specifies RichTextEditor internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var iframeMouseDown = 'iframe-click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var refreshBegin = 'refresh-begin';\n/** @hidden */\nexport var toolbarUpdated = 'toolbar-updated';\n/** @hidden */\nexport var bindOnEnd = 'bind-on-end';\n/** @hidden */\nexport var renderColorPicker = 'render-color-picker';\n/** @hidden */\nexport var htmlToolbarClick = 'html-toolbar-click';\n/** @hidden */\nexport var markdownToolbarClick = 'markdown-toolbar-click';\n/** @hidden */\nexport var destroyColorPicker = 'destroy-color-picker';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var keyUp = 'keyUp';\n/** @hidden */\nexport var keyDown = 'keyDown';\n/** @hidden */\nexport var mouseUp = 'mouseUp';\n/** @hidden */\nexport var toolbarCreated = 'toolbarCreated';\n/** @hidden */\nexport var toolbarRenderComplete = 'toolbarRenderComplete';\n/** @hidden */\nexport var enableFullScreen = 'enableFullScreen';\n/** @hidden */\nexport var disableFullScreen = 'disableFullScreen';\n/** @hidden */\nexport var dropDownSelect = 'dropDownSelect';\n/** @hidden */\nexport var beforeDropDownItemRender = 'beforeDropDownItemRender';\n/** @hidden */\nexport var execCommandCallBack = 'execCommandCallBack';\n/** @hidden */\nexport var imageToolbarAction = 'image-toolbar-action';\n/** @hidden */\nexport var linkToolbarAction = 'link-toolbar-action';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var undo = 'undo';\n/** @hidden */\nexport var redo = 'redo';\n/** @hidden */\nexport var insertLink = 'insertLink';\n/** @hidden */\nexport var unLink = 'unLink';\n/** @hidden */\nexport var editLink = 'editLink';\n/** @hidden */\nexport var openLink = 'openLink';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionSuccess = 'actionSuccess';\n/** @hidden */\nexport var popupOpen = 'popupOpen';\n/** @hidden */\nexport var updateToolbarItem = 'updateToolbarItem';\n/** @hidden */\nexport var insertImage = 'insertImage';\n/** @hidden */\nexport var insertCompleted = 'insertCompleted';\n/** @hidden */\nexport var imageLeft = 'justifyLeft';\n/** @hidden */\nexport var imageRight = 'justifyRight';\n/** @hidden */\nexport var imageCenter = 'justifyCenter';\n/** @hidden */\nexport var imageBreak = 'break';\n/** @hidden */\nexport var imageInline = 'inline';\n/** @hidden */\nexport var imageLink = 'insertImgLink';\n/** @hidden */\nexport var imageAlt = 'imgAltText';\n/** @hidden */\nexport var imageDelete = 'delete';\n/** @hidden */\nexport var imageCaption = 'caption';\n/** @hidden */\nexport var imageSize = 'imageSize';\n/** @hidden */\nexport var sourceCode = 'sourceCode';\n/** @hidden */\nexport var updateSource = 'updateSource';\n/** @hidden */\nexport var toolbarOpen = 'toolbarOpen';\n/** @hidden */\nexport var beforeDropDownOpen = 'beforeDropDownOpen';\n/** @hidden */\nexport var selectionSave = 'selection-save';\n/** @hidden */\nexport var selectionRestore = 'selection-restore';\n/** @hidden */\nexport var expandPopupClick = 'expandPopupClick';\n/** @hidden */\nexport var count = 'count';\n/** @hidden */\nexport var contentFocus = 'contentFocus';\n/** @hidden */\nexport var contentBlur = 'contentBlur';\n/** @hidden */\nexport var mouseDown = 'mouseDown';\n/** @hidden */\nexport var sourceCodeMouseDown = 'sourceCodeMouseDown';\n/** @hidden */\nexport var editAreaClick = 'editAreaClick';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var colorPickerChanged = 'colorPickerChanged';\n/** @hidden */\nexport var tableColorPickerChanged = 'tableColorPickerChanged';\n/** @hidden */\nexport var focusChange = 'focusChange';\n/** @hidden */\nexport var selectAll = 'selectAll';\n/** @hidden */\nexport var selectRange = 'selectRange';\n/** @hidden */\nexport var getSelectedHtml = 'getSelectedHtml';\n/** @hidden */\nexport var renderInlineToolbar = 'renderInlineToolbar';\n/** @hidden */\nexport var paste = 'paste-content';\n/** @hidden */\nexport var imgModule = 'imageModule';\n/** @hidden */\nexport var rtlMode = 'rtl-mode';\n/** @hidden */\nexport var createTable = 'createTable';\n/** @hidden */\nexport var docClick = 'docClick';\n/** @hidden */\nexport var tableToolbarAction = 'table-toolbar-action';\n/** @hidden */\nexport var checkUndo = 'checkUndoStack';\n/** @hidden */\nexport var readOnlyMode = 'readOnlyMode';\n/** @hidden */\nexport var pasteClean = 'pasteClean';\n","/**\n * RichTextEditor classes defined here.\n */\n/** @hidden */\nexport var CLS_RTE = 'e-richtexteditor';\n/** @hidden */\nexport var CLS_RTL = 'e-rtl';\n/** @hidden */\nexport var CLS_CONTENT = 'e-content';\n/** @hidden */\nexport var CLS_DISABLED = 'e-disabled';\n/** @hidden */\nexport var CLS_SCRIPT_SHEET = 'rte-iframe-script-sheet';\n/** @hidden */\nexport var CLS_STYLE_SHEET = 'rte-iframe-style-sheet';\n/** @hidden */\nexport var CLS_TOOLBAR = 'e-rte-toolbar';\n/** @hidden */\nexport var CLS_TB_FIXED = 'e-rte-tb-fixed';\n/** @hidden */\nexport var CLS_TB_FLOAT = 'e-rte-tb-float';\n/** @hidden */\nexport var CLS_TB_ABS_FLOAT = 'e-rte-tb-abs-float';\n/** @hidden */\nexport var CLS_INLINE = 'e-rte-inline';\n/** @hidden */\nexport var CLS_TB_INLINE = 'e-rte-tb-inline';\n/** @hidden */\nexport var CLS_RTE_EXPAND_TB = 'e-rte-tb-expand';\n/** @hidden */\nexport var CLS_FULL_SCREEN = 'e-rte-full-screen';\n/** @hidden */\nexport var CLS_QUICK_TB = 'e-rte-quick-toolbar';\n/** @hidden */\nexport var CLS_POP = 'e-rte-pop';\n/** @hidden */\nexport var CLS_QUICK_POP = 'e-rte-quick-popup';\n/** @hidden */\nexport var CLS_QUICK_DROPDOWN = 'e-quick-dropdown';\n/** @hidden */\nexport var CLS_IMAGE_POP = 'e-rte-image-popup';\n/** @hidden */\nexport var CLS_INLINE_POP = 'e-rte-inline-popup';\n/** @hidden */\nexport var CLS_INLINE_DROPDOWN = 'e-rte-inline-dropdown';\n/** @hidden */\nexport var CLS_DROPDOWN_POPUP = 'e-rte-dropdown-popup';\n/** @hidden */\nexport var CLS_DROPDOWN_ICONS = 'e-rte-dropdown-icons';\n/** @hidden */\nexport var CLS_DROPDOWN_ITEMS = 'e-rte-dropdown-items';\n/** @hidden */\nexport var CLS_DROPDOWN_BTN = 'e-rte-dropdown-btn';\n/** @hidden */\nexport var CLS_RTE_CONTENT = 'e-rte-content';\n/** @hidden */\nexport var CLS_TB_ITEM = 'e-toolbar-item';\n/** @hidden */\nexport var CLS_TB_EXTENDED = 'e-toolbar-extended';\n/** @hidden */\nexport var CLS_TB_WRAP = 'e-toolbar-wrapper';\n/** @hidden */\nexport var CLS_POPUP = 'e-popup';\n/** @hidden */\nexport var CLS_SEPARATOR = 'e-separator';\n/** @hidden */\nexport var CLS_MINIMIZE = 'e-minimize';\n/** @hidden */\nexport var CLS_MAXIMIZE = 'e-maximize';\n/** @hidden */\nexport var CLS_BACK = 'e-back';\n/** @hidden */\nexport var CLS_SHOW = 'e-show';\n/** @hidden */\nexport var CLS_HIDE = 'e-hide';\n/** @hidden */\nexport var CLS_VISIBLE = 'e-visible';\n/** @hidden */\nexport var CLS_FOCUS = 'e-focused';\n/** @hidden */\nexport var CLS_RM_WHITE_SPACE = 'e-remove-white-space';\n/** @hidden */\nexport var CLS_IMGRIGHT = 'e-imgright';\n/** @hidden */\nexport var CLS_IMGLEFT = 'e-imgleft';\n/** @hidden */\nexport var CLS_IMGCENTER = 'e-imgcenter';\n/** @hidden */\nexport var CLS_IMGBREAK = 'e-imgbreak';\n/** @hidden */\nexport var CLS_CAPTION = 'e-img-caption';\n/** @hidden */\nexport var CLS_CAPINLINE = 'e-caption-inline';\n/** @hidden */\nexport var CLS_IMGINLINE = 'e-imginline';\n/** @hidden */\nexport var CLS_COUNT = 'e-rte-character-count';\n/** @hidden */\nexport var CLS_WARNING = 'e-warning';\n/** @hidden */\nexport var CLS_ERROR = 'e-error';\n/** @hidden */\nexport var CLS_ICONS = 'e-icons';\n/** @hidden */\nexport var CLS_ACTIVE = 'e-active';\n/** @hidden */\nexport var CLS_EXPAND_OPEN = 'e-expand-open';\n/** @hidden */\nexport var CLS_RTE_ELEMENTS = 'e-rte-elements';\n/** @hidden */\nexport var CLS_TB_BTN = 'e-tbar-btn';\n/** @hidden */\nexport var CLS_HR_SEPARATOR = 'e-rte-horizontal-separator';\n/** @hidden */\nexport var CLS_TB_IOS_FIX = 'e-tbar-ios-fixed';\n/** @hidden */\nexport var CLS_TB_STATIC = 'e-tb-static';\n/** @hidden */\nexport var CLS_FORMATS_TB_BTN = 'e-formats-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_NAME_TB_BTN = 'e-font-name-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_SIZE_TB_BTN = 'e-font-size-tbar-btn';\n/** @hidden */\nexport var CLS_FONT_COLOR_TARGET = 'e-rte-fontcolor-element';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_TARGET = 'e-rte-backgroundcolor-element';\n/** @hidden */\nexport var CLS_COLOR_CONTENT = 'e-rte-color-content';\n/** @hidden */\nexport var CLS_FONT_COLOR_DROPDOWN = 'e-rte-fontcolor-dropdown';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_DROPDOWN = 'e-rte-backgroundcolor-dropdown';\n/** @hidden */\nexport var CLS_COLOR_PALETTE = 'e-rte-square-palette';\n/** @hidden */\nexport var CLS_FONT_COLOR_PICKER = 'e-rte-fontcolor-colorpicker';\n/** @hidden */\nexport var CLS_BACKGROUND_COLOR_PICKER = 'e-rte-backgroundcolor-colorpicker';\n/** @hidden */\nexport var CLS_RTE_READONLY = 'e-rte-readonly';\n/** @hidden */\nexport var CLS_TABLE_SEL = 'e-cell-select';\n/** @hidden */\nexport var CLS_TB_DASH_BOR = 'e-dashed-border';\n/** @hidden */\nexport var CLS_TB_ALT_BOR = 'e-alternate-border';\n/** @hidden */\nexport var CLS_TB_COL_RES = 'e-column-resize';\n/** @hidden */\nexport var CLS_TB_ROW_RES = 'e-row-resize';\n/** @hidden */\nexport var CLS_TB_BOX_RES = 'e-table-box';\n/** @hidden */\nexport var CLS_RTE_HIDDEN = 'e-rte-hidden';\n/** @hidden */\nexport var CLS_RTE_PASTE_KEEP_FORMAT = 'e-rte-keepformat';\n/** @hidden */\nexport var CLS_RTE_PASTE_REMOVE_FORMAT = 'e-rte-removeformat';\n/** @hidden */\nexport var CLS_RTE_PASTE_PLAIN_FORMAT = 'e-rte-plainformat';\n/** @hidden */\nexport var CLS_RTE_PASTE_OK = 'e-rte-pasteok';\n/** @hidden */\nexport var CLS_RTE_PASTE_CANCEL = 'e-rte-pastecancel';\n/** @hidden */\nexport var CLS_RTE_DIALOG_MIN_HEIGHT = 'e-rte-dialog-minheight';\n","/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Toolbar */\n    RenderType[RenderType[\"Toolbar\"] = 0] = \"Toolbar\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Popup\"] = 2] = \"Popup\";\n    /**  Defines RenderType as LinkToolbar */\n    RenderType[RenderType[\"LinkToolbar\"] = 3] = \"LinkToolbar\";\n    /**  Defines RenderType as TextToolbar */\n    RenderType[RenderType[\"TextToolbar\"] = 4] = \"TextToolbar\";\n    /**  Defines RenderType as ImageToolbar */\n    RenderType[RenderType[\"ImageToolbar\"] = 5] = \"ImageToolbar\";\n    /**  Defines RenderType as ImageToolbar */\n    RenderType[RenderType[\"InlineToolbar\"] = 6] = \"InlineToolbar\";\n    RenderType[RenderType[\"TableToolbar\"] = 7] = \"TableToolbar\";\n})(RenderType || (RenderType = {}));\nexport var ToolbarType;\n(function (ToolbarType) {\n    /**  Defines ToolbarType as Standard */\n    ToolbarType[\"Expand\"] = \"Expand\";\n    /**  Defines ToolbarType as MultiRow */\n    ToolbarType[\"MultiRow\"] = \"MultiRow\";\n})(ToolbarType || (ToolbarType = {}));\n","// tslint:disable\n/**\n * Export default locale\n */\nexport var defaultLocale = {\n    'alignments': 'Alignments',\n    'justifyLeft': 'Align Left',\n    'justifyCenter': 'Align Center',\n    'justifyRight': 'Align Right',\n    'justifyFull': 'Align Justify',\n    'fontName': 'Font Name',\n    'fontSize': 'Font Size',\n    'fontColor': 'Font Color',\n    'backgroundColor': 'Background Color',\n    'bold': 'Bold',\n    'italic': 'Italic',\n    'underline': 'Underline',\n    'strikethrough': 'Strikethrough',\n    'clearFormat': 'Clear Format',\n    'clearAll': 'Clear All',\n    'cut': 'Cut',\n    'copy': 'Copy',\n    'paste': 'Paste',\n    'unorderedList': 'Bulleted List',\n    'orderedList': 'Numbered List',\n    'indent': 'Increase Indent',\n    'outdent': 'Decrease Indent',\n    'undo': 'Undo',\n    'redo': 'Redo',\n    'superscript': 'Superscript',\n    'subscript': 'Subscript',\n    'createLink': 'Insert Hyperlink',\n    'openLink': 'Open Link',\n    'editLink': 'Edit Link',\n    'removeLink': 'Remove Link',\n    'image': 'Insert Image',\n    'replace': 'Replace',\n    'align': 'Align',\n    'caption': 'Image Caption',\n    'remove': 'Remove',\n    'insertLink': 'Insert Link',\n    'display': 'Display',\n    'altText': 'Alternative Text',\n    'dimension': 'Change Size',\n    'fullscreen': 'Maximize',\n    'maximize': 'Maximize',\n    'minimize': 'Minimize',\n    'lowerCase': 'Lower Case',\n    'upperCase': 'Upper Case',\n    'print': 'Print',\n    'formats': 'Formats',\n    'sourcecode': 'Code View',\n    'preview': 'Preview',\n    'viewside': 'ViewSide',\n    'insertCode': 'Insert Code',\n    'linkText': 'Display Text',\n    'linkTooltipLabel': 'Title',\n    'linkWebUrl': 'Web Address',\n    'linkTitle': 'Enter a title',\n    'linkurl': 'http://example.com',\n    'linkOpenInNewWindow': 'Open Link in New Window',\n    'linkHeader': 'Insert Link',\n    'dialogInsert': 'Insert',\n    'dialogCancel': 'Cancel',\n    'dialogUpdate': 'Update',\n    'imageHeader': 'Insert Image',\n    'imageLinkHeader': 'You can also provide a link from the web',\n    'mdimageLink': 'Please provide a URL for your image',\n    'imageUploadMessage': 'Drop image here or browse to upload',\n    'imageDeviceUploadMessage': 'Click here to upload',\n    'imageAlternateText': 'Alternate Text',\n    'alternateHeader': 'Alternative Text',\n    'browse': 'Browse',\n    'imageUrl': 'http://example.com/image.png',\n    'imageCaption': 'Caption',\n    'imageSizeHeader': 'Image Size',\n    'imageHeight': 'Height',\n    'imageWidth': 'Width',\n    'textPlaceholder': 'Enter Text',\n    'inserttablebtn': 'Insert Table',\n    'tabledialogHeader': 'Insert Table',\n    'tableWidth': 'Width',\n    'cellpadding': 'Cell Padding',\n    'cellspacing': 'Cell Spacing',\n    'columns': 'Number of columns',\n    'rows': 'Number of rows',\n    'tableRows': 'Table Rows',\n    'tableColumns': 'Table Columns',\n    'tableCellHorizontalAlign': 'Table Cell Horizontal Align',\n    'tableCellVerticalAlign': 'Table Cell Vertical Align',\n    'createTable': 'Create Table',\n    'removeTable': 'Remove Table',\n    'tableHeader': 'Table Header',\n    'tableRemove': 'Table Remove',\n    'tableCellBackground': 'Table Cell Background',\n    'tableEditProperties': 'Table Edit Properties',\n    'styles': 'Styles',\n    'insertColumnLeft': 'Insert Column Left',\n    'insertColumnRight': 'Insert Column Right',\n    'deleteColumn': 'Delete Column',\n    'insertRowBefore': 'Insert Row Before',\n    'insertRowAfter': 'Insert Row After',\n    'deleteRow': 'Delete Row',\n    'tableEditHeader': 'Edit Table',\n    'TableHeadingText': 'Heading',\n    'TableColText': 'Col',\n    'imageInsertLinkHeader': 'Insert Link',\n    'editImageHeader': 'Edit Image',\n    \"alignmentsDropDownLeft\": 'Align Left',\n    \"alignmentsDropDownCenter\": 'Align Center',\n    \"alignmentsDropDownRight\": 'Align Right',\n    \"alignmentsDropDownJustify\": 'Align Justify',\n    \"imageDisplayDropDownInline\": 'Inline',\n    \"imageDisplayDropDownBreak\": 'Break',\n    \"tableInsertRowDropDownBefore\": 'Insert row before',\n    \"tableInsertRowDropDownAfter\": 'Insert row after',\n    \"tableInsertRowDropDownDelete\": 'Delete row',\n    \"tableInsertColumnDropDownLeft\": 'Insert column left',\n    \"tableInsertColumnDropDownRight\": 'Insert column right',\n    \"tableInsertColumnDropDownDelete\": 'Delete column',\n    \"tableVerticalAlignDropDownTop\": 'Align Top',\n    \"tableVerticalAlignDropDownMiddle\": 'Align Middle',\n    \"tableVerticalAlignDropDownBottom\": 'Align Bottom',\n    \"tableStylesDropDownDashedBorder\": 'Dashed Borders',\n    \"tableStylesDropDownAlternateRows\": 'Alternate Rows',\n    'pasteFormat': 'Paste Format',\n    'pasteFormatContent': 'Choose the formatting action',\n    'plainText': 'Plain Text',\n    'cleanFormat': 'Clean',\n    'keepFormat': 'Keep',\n    'pasteDialogOk': 'OK',\n    'pasteDialogCancel': 'Cancel'\n};\nexport var toolsLocale = {\n    'alignments': 'alignments',\n    'justifyleft': 'justifyLeft',\n    'justifycenter': 'justifyCenter',\n    'justifyright': 'justifyRight',\n    'justifyfull': 'justifyFull',\n    'fontname': 'fontName',\n    'fontsize': 'fontSize',\n    'fontcolor': 'fontColor',\n    'backgroundcolor': 'backgroundColor',\n    'bold': 'bold',\n    'italic': 'italic',\n    'underline': 'underline',\n    'strikethrough': 'strikethrough',\n    'clearformat': 'clearFormat',\n    'clearall': 'clearAll',\n    'cut': 'cut',\n    'copy': 'copy',\n    'paste': 'paste',\n    'unorderedlist': 'unorderedList',\n    'orderedlist': 'orderedList',\n    'indent': 'indent',\n    'outdent': 'outdent',\n    'undo': 'undo',\n    'redo': 'redo',\n    'superscript': 'superscript',\n    'subscript': 'subscript',\n    'createlink': 'createLink',\n    'openlink': 'openLink',\n    'editlink': 'editLink',\n    'removelink': 'removeLink',\n    'openimagelink': 'openLink',\n    'editimagelink': 'editLink',\n    'removeimagelink': 'removeLink',\n    'image': 'image',\n    'replace': 'replace',\n    'align': 'align',\n    'caption': 'caption',\n    'remove': 'remove',\n    'insertlink': 'insertLink',\n    'display': 'display',\n    'alttext': 'altText',\n    'dimension': 'dimension',\n    'fullscreen': 'fullscreen',\n    'maximize': 'maximize',\n    'minimize': 'minimize',\n    'lowercase': 'lowerCase',\n    'uppercase': 'upperCase',\n    'print': 'print',\n    'formats': 'formats',\n    'sourcecode': 'sourcecode',\n    'preview': 'preview',\n    'viewside': 'viewside',\n    'insertcode': 'insertCode',\n    'tablerows': 'tableRows',\n    'tablecolumns': 'tableColumns',\n    'tablecellhorizontalalign': 'tableCellHorizontalAlign',\n    'tablecellverticalalign': 'tableCellVerticalAlign',\n    'createtable': 'createTable',\n    'removetable': 'removeTable',\n    'tableheader': 'tableHeader',\n    'tableremove': 'tableRemove',\n    'tablecellbackground': 'tableCellBackground',\n    'tableeditproperties': 'tableEditProperties',\n    'styles': 'styles',\n    'insertcolumnleft': 'insertColumnLeft',\n    'insertcolumnright': 'insertColumnRight',\n    'deletecolumn': 'deleteColumn',\n    'aligntop': 'AlignTop',\n    'alignmiddle': 'AlignMiddle',\n    'alignbottom': 'AlignBottom',\n    'insertrowbefore': 'insertRowBefore',\n    'insertrowafter': 'insertRowAfter',\n    'deleterow': 'deleteRow'\n};\n","import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER } from '../base/classes';\nimport { isIDevice } from '../base/util';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n * @hidden\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     */\n    function ToolbarRenderer(parent) {\n        this.parent = parent;\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n        if (this.popupOverlay) {\n            EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n        }\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.toolbarClick, args);\n        this.parent.trigger('toolbarClick', args);\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.onPopupOverlay();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n            this.popupModal(args.element.parentElement);\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.parent.notify(events.selectionRestore, args);\n    };\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl\n        });\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    };\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                for (var index = 0; index < args.element.childNodes.length; index++) {\n                    var divNode = _this.parent.createElement('div');\n                    divNode.innerHTML = dropDown.content.trim();\n                    if (divNode.textContent.trim() !== ''\n                        && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                        if (!args.element.childNodes[index].classList.contains('e-active')) {\n                            addClass([args.element.childNodes[index]], 'e-active');\n                        }\n                    }\n                    else {\n                        removeClass([args.element.childNodes[index]], 'e-active');\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n        if (!isNullOrUndefined(this.popupOverlay)) {\n            closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n            this.popupOverlay.style.display = 'none';\n            removeClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.setIsModel = function (element) {\n        if (!closest(element, '.e-popup-container')) {\n            var popupContainer = this.parent.createElement('div', {\n                className: 'e-rte-modal-popup e-popup-container e-center'\n            });\n            element.parentNode.insertBefore(popupContainer, element);\n            popupContainer.appendChild(element);\n            popupContainer.style.zIndex = element.style.zIndex;\n            popupContainer.style.display = 'flex';\n            element.style.position = 'relative';\n            addClass([element], 'e-popup-modal');\n            this.popupOverlay = this.parent.createElement('div', { className: 'e-popup-overlay' });\n            this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n            this.popupOverlay.style.display = 'block';\n            popupContainer.appendChild(this.popupOverlay);\n            EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n        }\n        else {\n            element.parentElement.style.display = 'flex';\n            this.popupOverlay = element.nextElementSibling;\n            this.popupOverlay.style.display = 'block';\n            addClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker) {\n        var _this = this;\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement,\n            cssClass: css,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                var focusEle;\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                if (Browser.isDevice) {\n                    _this.popupModal(dropDownArgs.element.parentElement);\n                }\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    /* tslint:enable */\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n                var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n                if (dropElement) {\n                    dropElement.style.display = 'none';\n                    dropElement.lastElementChild.style.display = 'none';\n                    removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n                }\n            }\n        });\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () { proxy.parent.notify(events.selectionSave, {}); };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.popupModal = function (element) {\n        var popupInst = getInstance(element, Popup);\n        popupInst.relateTo = document.body;\n        popupInst.position = { X: 0, Y: 0 };\n        popupInst.targetType = 'container';\n        popupInst.collision = { X: 'fit', Y: 'fit' };\n        popupInst.offsetY = 4;\n        popupInst.dataBind();\n        this.setIsModel(element);\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        var _this = this;\n        var proxy = this;\n        this.colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: true,\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                _this.colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n            },\n            change: function (colorPickerArgs) {\n                if (isIDevice()) {\n                    proxy.parent.notify(events.selectionRestore, {});\n                }\n                /* tslint:disable */\n                var colorpickerValue = Browser.info.name === 'msie' || Browser.info.name === 'edge' || isIDevice() ? colorPickerArgs.currentValue.rgba : colorPickerArgs.currentValue.hex;\n                /* tslint:enable */\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                _this.colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        this.colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        this.colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        this.colorPicker.cssClass = (item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n        this.colorPicker.createElement = this.parent.createElement;\n        this.colorPicker.appendTo(document.body.querySelector(args.target));\n        return this.colorPicker;\n    };\n    /**\n     * The function is used to render RichTextEditor toolbar\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     * @return {Element}\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     * @param  {Element} panel\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n","import { RenderType } from '../base/enum';\nimport { CLS_HR_SEPARATOR } from '../base/classes';\nimport * as events from '../base/constant';\nimport { getTooltipText, toObjectLowerCase } from '../base/util';\nimport { tools, templateItems } from '../models/items';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar BaseToolbar = /** @class */ (function () {\n    function BaseToolbar(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    BaseToolbar.prototype.addEventListener = function () {\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    BaseToolbar.prototype.removeEventListener = function () {\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    BaseToolbar.prototype.setRtl = function (args) {\n        if (!isNullOrUndefined(this.toolbarObj)) {\n            this.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    BaseToolbar.prototype.getTemplateObject = function (itemStr, container) {\n        var tagName;\n        switch (itemStr) {\n            case 'fontcolor':\n            case 'backgroundcolor':\n                tagName = 'span';\n                break;\n            default:\n                tagName = 'button';\n                break;\n        }\n        return {\n            command: this.tools[itemStr.toLocaleLowerCase()].command,\n            subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand,\n            template: this.parent.createElement(tagName, {\n                id: this.parent.getID() + '_' + container\n                    + '_' + this.tools[itemStr.toLocaleLowerCase()].id\n            }).outerHTML,\n            tooltipText: getTooltipText(itemStr, this.locator)\n        };\n    };\n    BaseToolbar.prototype.getObject = function (item, container) {\n        var itemStr = item.toLowerCase();\n        if (templateItems.indexOf(itemStr) !== -1) {\n            return this.getTemplateObject(itemStr, container);\n        }\n        else {\n            switch (itemStr) {\n                case '|':\n                    return { type: 'Separator' };\n                case '-':\n                    return { type: 'Separator', cssClass: CLS_HR_SEPARATOR };\n                default:\n                    return {\n                        id: this.parent.getID() + '_' + container + '_' + this.tools[itemStr.toLocaleLowerCase()].id,\n                        prefixIcon: this.tools[itemStr.toLocaleLowerCase()].icon,\n                        tooltipText: getTooltipText(itemStr, this.locator),\n                        command: this.tools[itemStr.toLocaleLowerCase()].command,\n                        subCommand: this.tools[itemStr.toLocaleLowerCase()].subCommand\n                    };\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseToolbar.prototype.getItems = function (tbItems, container) {\n        if (this.parent.toolbarSettings.items.length < 1) {\n            return [];\n        }\n        var items = [];\n        for (var _i = 0, tbItems_1 = tbItems; _i < tbItems_1.length; _i++) {\n            var item = tbItems_1[_i];\n            switch (typeof item) {\n                case 'string':\n                    items.push(this.getObject(item, container));\n                    break;\n                default:\n                    items.push(item);\n            }\n        }\n        return items;\n    };\n    BaseToolbar.prototype.getToolbarOptions = function (args) {\n        return {\n            target: args.target,\n            rteToolbarObj: this,\n            items: this.getItems(args.items, args.container),\n            overflowMode: args.mode,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl\n        };\n    };\n    BaseToolbar.prototype.render = function (args) {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.toolbarRenderer.renderToolbar(this.getToolbarOptions(args));\n    };\n    return BaseToolbar;\n}());\nexport { BaseToolbar };\n","import { addClass, isNullOrUndefined, removeClass, select, closest } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport { getIndex } from '../base/util';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getDropDownValue, getFormattedFontSize, getTooltipText } from '../base/util';\nimport * as model from '../models/items';\nimport { dispatchEvent } from '../base/util';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar DropDownButtons = /** @class */ (function () {\n    function DropDownButtons(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    DropDownButtons.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    DropDownButtons.prototype.beforeRender = function (args) {\n        var item = args.item;\n        if (item.cssClass) {\n            addClass([args.element], item.cssClass);\n        }\n        if (item.command === 'Alignments' || item.subCommand === 'JustifyLeft'\n            || item.subCommand === 'JustifyRight' || item.subCommand === 'JustifyCenter') {\n            args.element.setAttribute('title', getTooltipText(item.subCommand.toLocaleLowerCase(), this.locator));\n        }\n    };\n    DropDownButtons.prototype.dropdownContent = function (width, type, content) {\n        return ('<span style=\"display: inline-flex;' + 'width:' + ((type === 'quick') ? 'auto' : width) + '\" >' +\n            '<span class=\"e-rte-dropdown-btn-text\">' + content + '</span></span>');\n    };\n    DropDownButtons.prototype.renderDropDowns = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var type = args.containerType;\n        var tbElement = args.container;\n        model.templateItems.forEach(function (item) {\n            var targetElement = undefined;\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'formats':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Formats', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var formatItem = _this.parent.format.types.slice();\n                        formatItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Formats', enumerable: true }, subCommand: { value: item.value, enumerable: true }\n                            });\n                        });\n                        var formatContent = isNullOrUndefined(_this.parent.format.default) ? formatItem[0].text :\n                            _this.parent.format.default;\n                        _this.formatDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-formats e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.format.width, type, ((type === 'quick') ? '' : getDropDownValue(formatItem, formatContent, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FORMATS_TB_BTN,\n                            itemName: 'Formats', items: formatItem, element: targetElement\n                        });\n                        break;\n                    case 'fontname':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontName', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontItem = _this.parent.fontFamily.items.slice();\n                        fontItem.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontName', enumerable: true }\n                            });\n                        });\n                        var fontNameContent = isNullOrUndefined(_this.parent.fontFamily.default) ? fontItem[0].text :\n                            _this.parent.fontFamily.default;\n                        _this.fontNameDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: ((type === 'quick') ? 'e-font-name e-icons' : ''),\n                            content: _this.dropdownContent(_this.parent.fontFamily.width, type, ((type === 'quick') ? '' : getDropDownValue(fontItem, fontNameContent, 'text', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_NAME_TB_BTN,\n                            itemName: 'FontName', items: fontItem, element: targetElement\n                        });\n                        if (!isNullOrUndefined(_this.parent.fontFamily.default)) {\n                            _this.getEditNode().style.fontFamily = _this.parent.fontFamily.default;\n                        }\n                        break;\n                    case 'fontsize':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_FontSize', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        var fontsize = _this.parent.fontSize.items.slice();\n                        fontsize.forEach(function (item) {\n                            Object.defineProperties(item, {\n                                command: { value: 'Font', enumerable: true }, subCommand: { value: 'FontSize', enumerable: true }\n                            });\n                        });\n                        var fontSizeContent = isNullOrUndefined(_this.parent.fontSize.default) ? fontsize[1].text :\n                            _this.parent.fontSize.default;\n                        _this.fontSizeDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            content: _this.dropdownContent(_this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, fontSizeContent.replace(/\\s/g, ''), 'value', 'text'))),\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_FONT_SIZE_TB_BTN,\n                            itemName: 'FontSize', items: fontsize, element: targetElement\n                        });\n                        if (!isNullOrUndefined(_this.parent.fontSize.default)) {\n                            _this.getEditNode().style.fontSize = _this.parent.fontSize.default;\n                        }\n                        break;\n                    case 'alignments':\n                        targetElement = select('#' + _this.parent.getID() + '_' + type + '_Alignments', tbElement);\n                        if (isNullOrUndefined(targetElement) || targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n                            return;\n                        }\n                        _this.alignDropDown = _this.toolbarRenderer.renderDropDownButton({\n                            iconCss: 'e-justify-left e-icons',\n                            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS,\n                            itemName: 'Alignments', items: model.alignmentItems, element: targetElement\n                        });\n                        break;\n                    case 'align':\n                        _this.imageAlignmentDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'display':\n                        _this.imageDisplayDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablerows':\n                        _this.rowDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecolumns':\n                        _this.columnDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'tablecellverticalalign':\n                        _this.verticalAlignDropDown(type, tbElement, targetElement);\n                        break;\n                    case 'styles':\n                        _this.tableStylesDropDown(type, tbElement, targetElement);\n                        break;\n                }\n            }\n        });\n    };\n    DropDownButtons.prototype.getUpdateItems = function (items, value) {\n        var dropDownItems = items.slice();\n        dropDownItems.forEach(function (item) {\n            Object.defineProperties(item, {\n                command: { value: (value === 'Format' ? 'Formats' : 'Font'), enumerable: true },\n                subCommand: { value: (value === 'Format' ? item.value : value), enumerable: true }\n            });\n        });\n        return dropDownItems;\n    };\n    DropDownButtons.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        var type;\n        var content;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontFamily':\n                    if (this.fontNameDropDown) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontFamily); _b < _c.length; _b++) {\n                            var fontFamily = _c[_b];\n                            switch (fontFamily) {\n                                case 'default':\n                                case 'width':\n                                    var fontItems = this.fontNameDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.fontNameDropDown.element, '.' + classes.CLS_QUICK_TB)) ?\n                                        'quick' : 'toolbar';\n                                    var fontNameContent = isNullOrUndefined(this.parent.fontFamily.default) ? fontItems[0].text :\n                                        this.parent.fontFamily.default;\n                                    content = this.dropdownContent(this.parent.fontFamily.width, type, ((type === 'quick') ? '' : getDropDownValue(fontItems, fontNameContent, 'text', 'text')));\n                                    this.fontNameDropDown.setProperties({ content: content });\n                                    if (!isNullOrUndefined(this.parent.fontFamily.default)) {\n                                        this.getEditNode().style.fontFamily = this.parent.fontFamily.default;\n                                    }\n                                    else {\n                                        this.getEditNode().style.removeProperty('font-family');\n                                    }\n                                    break;\n                                case 'items':\n                                    this.fontNameDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontFamily.items, 'FontSize')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'fontSize':\n                    if (this.fontSizeDropDown) {\n                        for (var _d = 0, _e = Object.keys(newProp.fontSize); _d < _e.length; _d++) {\n                            var fontSize = _e[_d];\n                            switch (fontSize) {\n                                case 'default':\n                                case 'width':\n                                    var fontsize = this.fontSizeDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.fontSizeDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var fontSizeContent = isNullOrUndefined(this.parent.fontSize.default) ? fontsize[1].text :\n                                        this.parent.fontSize.default;\n                                    content = this.dropdownContent(this.parent.fontSize.width, type, getFormattedFontSize(getDropDownValue(fontsize, fontSizeContent.replace(/\\s/g, ''), 'value', 'text')));\n                                    this.fontSizeDropDown.setProperties({ content: content });\n                                    if (!isNullOrUndefined(this.parent.fontSize.default)) {\n                                        this.getEditNode().style.fontSize = this.parent.fontSize.default;\n                                    }\n                                    else {\n                                        this.getEditNode().style.removeProperty('font-size');\n                                    }\n                                    break;\n                                case 'items':\n                                    this.fontSizeDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.fontSize.items, 'FontSize')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'format':\n                    if (this.formatDropDown) {\n                        for (var _f = 0, _g = Object.keys(newProp.format); _f < _g.length; _f++) {\n                            var format = _g[_f];\n                            switch (format) {\n                                case 'default':\n                                case 'width':\n                                    var formatItems = this.formatDropDown.items;\n                                    type = !isNullOrUndefined(closest(this.formatDropDown.element, '.' + classes.CLS_QUICK_TB)) ? 'quick' : 'toolbar';\n                                    var formatContent = isNullOrUndefined(this.parent.format.default) ? formatItems[0].text :\n                                        this.parent.format.default;\n                                    content = this.dropdownContent(this.parent.format.width, type, ((type === 'quick') ? '' : getDropDownValue(formatItems, formatContent, 'text', 'text')));\n                                    this.formatDropDown.setProperties({ content: content });\n                                    break;\n                                case 'types':\n                                    this.formatDropDown.setProperties({\n                                        items: this.getUpdateItems(newProp.format.types, 'Format')\n                                    });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownButtons.prototype.getEditNode = function () {\n        return this.parent.contentModule.getEditPanel();\n    };\n    DropDownButtons.prototype.rowDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableRows', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableRowsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-rows e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableRows',\n            items: model.tableRowsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.columnDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableColumns', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableColumnsDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-columns e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableColumns',\n            items: model.tableColumnsItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.verticalAlignDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_TableCellVerticalAlign', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.tableCellVerticalAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-table-cell-ver-align e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'TableCellVerticalAlign',\n            items: model.TableCellVerticalAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.imageDisplayDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Display', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.displayDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-display e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ITEMS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Display',\n            items: model.imageDisplayItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.imageAlignmentDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Align', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-justify-left e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Align',\n            items: model.imageAlignItems,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.tableStylesDropDown = function (type, tbElement, targetElement) {\n        targetElement = select('#' + this.parent.getID() + '_' + type + '_Styles', tbElement);\n        if (targetElement.classList.contains(classes.CLS_DROPDOWN_BTN)) {\n            return;\n        }\n        this.imageAlignDropDown = this.toolbarRenderer.renderDropDownButton({\n            iconCss: 'e-style e-icons',\n            cssClass: classes.CLS_DROPDOWN_POPUP + ' ' + classes.CLS_DROPDOWN_ICONS + ' ' + classes.CLS_QUICK_DROPDOWN,\n            itemName: 'Styles',\n            items: this.parent.tableSettings.styles,\n            element: targetElement\n        });\n    };\n    DropDownButtons.prototype.removeDropDownClasses = function (target) {\n        removeClass([target], [\n            classes.CLS_DROPDOWN_BTN,\n            classes.CLS_DROPDOWN_POPUP,\n            classes.CLS_DROPDOWN_ICONS,\n            classes.CLS_DROPDOWN_ITEMS\n        ]);\n    };\n    DropDownButtons.prototype.destroyDropDowns = function () {\n        if (this.formatDropDown) {\n            this.removeDropDownClasses(this.formatDropDown.element);\n            this.formatDropDown.destroy();\n        }\n        if (this.fontNameDropDown) {\n            this.removeDropDownClasses(this.fontNameDropDown.element);\n            this.fontNameDropDown.destroy();\n        }\n        if (this.fontSizeDropDown) {\n            this.removeDropDownClasses(this.fontSizeDropDown.element);\n            this.fontSizeDropDown.destroy();\n        }\n        if (this.alignDropDown) {\n            this.removeDropDownClasses(this.alignDropDown.element);\n            this.alignDropDown.destroy();\n        }\n        if (this.imageAlignDropDown) {\n            this.removeDropDownClasses(this.imageAlignDropDown.element);\n            this.imageAlignDropDown.destroy();\n        }\n        if (this.displayDropDown) {\n            this.removeDropDownClasses(this.displayDropDown.element);\n            this.displayDropDown.destroy();\n        }\n        if (this.tableRowsDropDown) {\n            this.removeDropDownClasses(this.tableRowsDropDown.element);\n            this.tableRowsDropDown.destroy();\n        }\n        if (this.tableColumnsDropDown) {\n            this.removeDropDownClasses(this.tableColumnsDropDown.element);\n            this.tableColumnsDropDown.destroy();\n        }\n        if (this.tableCellVerticalAlignDropDown) {\n            this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element);\n            this.tableCellVerticalAlignDropDown.destroy();\n        }\n    };\n    DropDownButtons.prototype.setRtl = function (args) {\n        if (this.formatDropDown) {\n            this.formatDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontNameDropDown) {\n            this.fontNameDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.fontSizeDropDown) {\n            this.fontSizeDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.alignDropDown) {\n            this.alignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageAlignDropDown) {\n            this.imageAlignDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.displayDropDown) {\n            this.displayDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    DropDownButtons.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.beforeDropDownItemRender, this.beforeRender, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    };\n    DropDownButtons.prototype.onIframeMouseDown = function () {\n        dispatchEvent(document, 'mousedown');\n    };\n    DropDownButtons.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.beforeDropDownItemRender, this.beforeRender);\n        this.parent.off(events.destroy, this.removeEventListener);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n    };\n    return DropDownButtons;\n}());\nexport { DropDownButtons };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\n/**\n * `ToolbarAction` module is used to toolbar click action\n */\nvar ToolbarAction = /** @class */ (function () {\n    function ToolbarAction(parent) {\n        this.parent = parent;\n        this.addEventListener();\n        this.serviceLocator = new ServiceLocator;\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n    }\n    ToolbarAction.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarClick, this.toolbarClick, this);\n        this.parent.on(events.dropDownSelect, this.dropDownSelect, this);\n        this.parent.on(events.colorPickerChanged, this.renderSelection, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ToolbarAction.prototype.toolbarClick = function (args) {\n        if (isNOU(args.item)) {\n            return;\n        }\n        if (!isNOU(args.item.controlParent)) {\n            var activeEle = args.item.controlParent\n                .activeEle;\n            if (activeEle) {\n                activeEle.tabIndex = -1;\n            }\n        }\n        this.parent.notify(events.htmlToolbarClick, args);\n        this.parent.notify(events.markdownToolbarClick, args);\n    };\n    ToolbarAction.prototype.dropDownSelect = function (e) {\n        this.parent.notify(events.selectionRestore, {});\n        if (!(document.body.contains(document.body.querySelector('.e-rte-quick-toolbar'))\n            && e.item && (e.item.command === 'Images' || e.item.command === 'Display' || e.item.command === 'Table'))) {\n            this.parent.formatter.process(this.parent, e, e.originalEvent, null);\n        }\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.renderSelection = function (args) {\n        this.parent.notify(events.selectionRestore, {});\n        this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n        this.parent.notify(events.selectionSave, {});\n    };\n    ToolbarAction.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarClick, this.toolbarClick);\n        this.parent.off(events.dropDownSelect, this.dropDownSelect);\n        this.parent.off(events.colorPickerChanged, this.renderSelection);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ToolbarAction;\n}());\nexport { ToolbarAction };\n","import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.parent = parent;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        model.updateDropDownLocale(this.parent);\n        this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent));\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n                keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n            });\n        }\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        else {\n            if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.element.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice || isIDevice()) {\n            return false;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: 'MultiRow',\n            target: ele\n        });\n        addClass([ele], ['e-rte-tb-mobile']);\n        if (this.parent.inlineMode.enable) {\n            this.addFixedTBarClass();\n        }\n        else {\n            addClass([ele], [classes.CLS_TB_STATIC]);\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.parent.notify(events.renderColorPicker, {\n            container: this.tbElement,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function (e) {\n        var topValue;\n        var isBody = false;\n        var isFloat = false;\n        var scrollParent;\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (e && e.target !== document) {\n            scrollParent = e.target;\n        }\n        else {\n            isBody = true;\n            scrollParent = document.body;\n        }\n        var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n        if (this.isTransformChild) {\n            topValue = 0;\n            var scrollParentRelativeTop = 0;\n            var trgHeight = this.parent.element.offsetHeight;\n            if (isBody) {\n                var bodyStyle = window.getComputedStyle(scrollParent);\n                scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n            }\n            var targetTop = this.parent.element.getBoundingClientRect().top;\n            var scrollParentYOffset = (Browser.isMSPointer && isBody) ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n            var scrollParentRect = scrollParent.getBoundingClientRect();\n            var scrollParentTop = (!isBody) ? scrollParentRect.top : (scrollParentRect.top + scrollParentYOffset);\n            var outOfRange = ((targetTop - ((!isBody) ? scrollParentTop : 0)) + trgHeight > tbHeight + floatOffset) ? false : true;\n            if (targetTop > (scrollParentTop + floatOffset) || targetTop < -trgHeight || ((targetTop < 0) ? outOfRange : false)) {\n                isFloat = false;\n                removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n            }\n            else if (targetTop < (scrollParentTop + floatOffset)) {\n                if (targetTop < 0) {\n                    topValue = (-targetTop) + scrollParentTop;\n                }\n                else {\n                    topValue = scrollParentTop - targetTop;\n                }\n                topValue = (isBody) ? topValue - scrollParentRelativeTop : topValue;\n                addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n                isFloat = true;\n            }\n        }\n        else {\n            var parent_1 = this.parent.element.getBoundingClientRect();\n            if (window.innerHeight < parent_1.top) {\n                return;\n            }\n            topValue = (e && e.target !== document) ? scrollParent.getBoundingClientRect().top : 0;\n            if ((parent_1.bottom < (floatOffset + tbHeight + topValue)) || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n                isFloat = false;\n            }\n            else if (parent_1.top < floatOffset) {\n                isFloat = true;\n            }\n        }\n        if (!isFloat) {\n            removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { top: 0 + 'px', width: '100%' });\n        }\n        else {\n            addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { width: this.parent.element.offsetWidth + 'px', top: (floatOffset + topValue) + 'px' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement\n            });\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable && !isIDevice()) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.parent.notify(events.renderColorPicker, {\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.refreshToolbarOverflow();\n        }\n    };\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        if (!this.tbElement || (this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice))) {\n            return;\n        }\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        setToolbarStatus(options, (this.parent.inlineMode.enable ? true : false));\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.e-rte-srctextarea', this.parent.element)) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    Toolbar.prototype.getToolbarElement = function () {\n        return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    };\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.baseToolbar.toolbarObj.refreshOverflow();\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.parent.notify(events.destroyColorPicker, {});\n            this.dropDownModule.destroyDropDowns();\n            this.baseToolbar.toolbarObj.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            else if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n            }\n        }\n    };\n    Toolbar.prototype.scrollHandler = function (e) {\n        if (!this.parent.inlineMode.enable) {\n            if (this.parent.toolbarSettings.enableFloating) {\n                this.toggleFloatClass(e.args);\n            }\n        }\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    Toolbar.prototype.toolbarMouseDownHandler = function (e) {\n        var trg = closest(e.target, '.e-hor-nav');\n        if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n            if (!trg.classList.contains('e-nav-active')) {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', false);\n            }\n            else {\n                addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', true);\n            }\n        }\n        else if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.isToolbar = true;\n        }\n        if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        if (this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        EventHandler.add(this.tbElement, 'click mousedown', this.toolbarMouseDownHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'click mousedown', this.toolbarMouseDownHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        this.parent.on(events.scroll, this.scrollHandler, this);\n        this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n        this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        this.parent.off(events.scroll, this.scrollHandler);\n        this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n        this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n    };\n    Toolbar.prototype.onRefresh = function () {\n        this.refreshToolbarOverflow();\n        this.parent.setContentHeight();\n        this.parent.formatter.undoRedoRefresh(this.parent);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        this.refreshToolbar();\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.refreshToolbar();\n    };\n    Toolbar.prototype.refreshToolbar = function () {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.e-rte-srctextarea', this.parent.element)) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, NotifyPropertyChanges, Event } from '@syncfusion/ej2-base';\nimport { Base } from '@syncfusion/ej2-base';\nvar keyCode = {\n    'backspace': 8,\n    'tab': 9,\n    'enter': 13,\n    'shift': 16,\n    'control': 17,\n    'alt': 18,\n    'pause': 19,\n    'capslock': 20,\n    'space': 32,\n    'escape': 27,\n    'pageup': 33,\n    'pagedown': 34,\n    'end': 35,\n    'home': 36,\n    'leftarrow': 37,\n    'uparrow': 38,\n    'rightarrow': 39,\n    'downarrow': 40,\n    'insert': 45,\n    'delete': 46,\n    'f1': 112,\n    'f2': 113,\n    'f3': 114,\n    'f4': 115,\n    'f5': 116,\n    'f6': 117,\n    'f7': 118,\n    'f8': 119,\n    'f9': 120,\n    'f10': 121,\n    'f11': 122,\n    'f12': 123,\n    'semicolon': 186,\n    'plus': 187,\n    'comma': 188,\n    'minus': 189,\n    'dot': 190,\n    'forwardslash': 191,\n    'graveaccent': 192,\n    'openbracket': 219,\n    'backslash': 220,\n    'closebracket': 221,\n    'singlequote': 222,\n    ']': 221,\n    '[': 219,\n    '=': 187\n};\n/**\n * KeyboardEvents class enables you to bind key action desired key combinations for ex., Ctrl+A, Delete, Alt+Space etc.\n * ```html\n * <div id='testEle'>  </div>;\n * <script>\n *   let node: HTMLElement = document.querySelector('#testEle');\n *   let kbInstance = new KeyboardEvents({\n *       element: node,\n *       keyConfigs:{ selectAll : 'ctrl+a' },\n *       keyAction: function (e:KeyboardEvent, action:string) {\n *           // handler function code\n *       }\n *   });\n * </script>\n * ```\n */\nvar KeyboardEvents = /** @class */ (function (_super) {\n    __extends(KeyboardEvents, _super);\n    /**\n     * Initializes the KeyboardEvents\n     * @param {HTMLElement} element\n     * @param {KeyboardEventsModel} options\n     */\n    function KeyboardEvents(element, options) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * To handle a key press event returns null\n         */\n        _this.keyPressHandler = function (e) {\n            var isAltKey = e.altKey;\n            var isCtrlKey = e.ctrlKey;\n            var isShiftKey = e.shiftKey;\n            var curkeyCode = e.which;\n            var keys = Object.keys(_this.keyConfigs);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                var configCollection = _this.keyConfigs[key].split(',');\n                for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {\n                    var rconfig = configCollection_1[_a];\n                    var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());\n                    if (isAltKey === rKeyObj.altKey && isCtrlKey === rKeyObj.ctrlKey &&\n                        isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {\n                        e.action = key;\n                    }\n                }\n            }\n            if (_this.keyAction) {\n                _this.keyAction(e);\n            }\n        };\n        _this.bind();\n        return _this;\n    }\n    KeyboardEvents_1 = KeyboardEvents;\n    /**\n     * Unwire bound events and destroy the instance.\n     * @return {void}\n     */\n    KeyboardEvents.prototype.destroy = function () {\n        this.unwireEvents();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Function can be used to specify certain action if a property is changed\n     * @param newProp\n     * @param oldProp\n     * @returns {void}\n     * @private\n     */\n    KeyboardEvents.prototype.onPropertyChanged = function (newProp, oldProp) {\n        // No code are needed\n    };\n    ;\n    KeyboardEvents.prototype.bind = function () {\n        this.wireEvents();\n    };\n    /**\n     * To get the module name, returns 'keyboard'.\n     * @private\n     */\n    KeyboardEvents.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * Wiring event handlers to events\n     */\n    KeyboardEvents.prototype.wireEvents = function () {\n        this.element.addEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * Unwiring event handlers to events\n     */\n    KeyboardEvents.prototype.unwireEvents = function () {\n        this.element.removeEventListener(this.eventName, this.keyPressHandler);\n    };\n    /**\n     * To get the key configuration data\n     * @param {string} config - configuration data\n     * returns {KeyData}\n     */\n    KeyboardEvents.getKeyConfigData = function (config) {\n        if (config in this.configCache) {\n            return this.configCache[config];\n        }\n        var keys = config.toLowerCase().split('+');\n        var keyData = {\n            altKey: (keys.indexOf('alt') !== -1 ? true : false),\n            ctrlKey: (keys.indexOf('ctrl') !== -1 ? true : false),\n            shiftKey: (keys.indexOf('shift') !== -1 ? true : false),\n            keyCode: null\n        };\n        if (keys[keys.length - 1].length > 1 && !!Number(keys[keys.length - 1])) {\n            keyData.keyCode = Number(keys[keys.length - 1]);\n        }\n        else {\n            keyData.keyCode = KeyboardEvents_1.getKeyCode(keys[keys.length - 1]);\n        }\n        KeyboardEvents_1.configCache[config] = keyData;\n        return keyData;\n    };\n    // Return the keycode value as string \n    KeyboardEvents.getKeyCode = function (keyVal) {\n        return keyCode[keyVal] || keyVal.toUpperCase().charCodeAt(0);\n    };\n    var KeyboardEvents_1;\n    KeyboardEvents.configCache = {};\n    __decorate([\n        Property({})\n    ], KeyboardEvents.prototype, \"keyConfigs\", void 0);\n    __decorate([\n        Property('keyup')\n    ], KeyboardEvents.prototype, \"eventName\", void 0);\n    __decorate([\n        Event()\n    ], KeyboardEvents.prototype, \"keyAction\", void 0);\n    KeyboardEvents = KeyboardEvents_1 = __decorate([\n        NotifyPropertyChanges\n    ], KeyboardEvents);\n    return KeyboardEvents;\n}(Base));\nexport { KeyboardEvents };\n","import { select, detach, extend } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { getIndex, toObjectLowerCase } from '../base/util';\nimport { templateItems, tools } from '../models/items';\n/**\n * `Color Picker` module is used to handle ColorPicker actions.\n */\nvar ColorPickerInput = /** @class */ (function () {\n    function ColorPickerInput(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = tools;\n        }\n    }\n    ColorPickerInput.prototype.initializeInstance = function () {\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    };\n    ColorPickerInput.prototype.renderColorPickerInput = function (args) {\n        var _this = this;\n        this.initializeInstance();\n        var suffixID = args.containerType;\n        var tbElement = args.container;\n        var targetID;\n        var options;\n        templateItems.forEach(function (item) {\n            if (getIndex(item, args.items) !== -1) {\n                switch (item) {\n                    case 'fontcolor':\n                        targetID = _this.parent.getID() + '_' + suffixID + '_FontColor_Target';\n                        var fontNode = _this.parent.createElement('input');\n                        fontNode.id = targetID;\n                        fontNode.classList.add(classes.CLS_FONT_COLOR_TARGET);\n                        document.body.appendChild(fontNode);\n                        options = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_FontColor', tbElement),\n                            target: ('#' + targetID)\n                        };\n                        _this.fontColorPicker = _this.toolbarRenderer.renderColorPicker(options, 'fontcolor');\n                        _this.fontColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(options, 'fontcolor', _this.fontColorPicker);\n                        break;\n                    case 'backgroundcolor':\n                        targetID = _this.parent.getID() + '_' + suffixID + '_BackgroundColor_Target';\n                        var backNode = _this.parent.createElement('input');\n                        backNode.id = targetID;\n                        backNode.classList.add(classes.CLS_BACKGROUND_COLOR_TARGET);\n                        document.body.appendChild(backNode);\n                        options = {\n                            cssClass: _this.tools[item.toLocaleLowerCase()].icon\n                                + ' ' + classes.CLS_RTE_ELEMENTS + ' ' + classes.CLS_ICONS,\n                            value: _this.tools[item.toLocaleLowerCase()].value,\n                            command: _this.tools[item.toLocaleLowerCase()].command,\n                            subCommand: _this.tools[item.toLocaleLowerCase()].subCommand,\n                            element: select('#' + _this.parent.getID() + '_' + suffixID + '_BackgroundColor', tbElement),\n                            target: ('#' + targetID)\n                        };\n                        _this.backgroundColorPicker = _this.toolbarRenderer.renderColorPicker(options, 'backgroundcolor');\n                        _this.backgroundColorDropDown = _this.toolbarRenderer.renderColorPickerDropDown(options, 'backgroundcolor', _this.backgroundColorPicker);\n                        break;\n                }\n            }\n        });\n    };\n    ColorPickerInput.prototype.destroy = function () {\n        this.removeEventListener();\n        this.destroyColorPicker();\n    };\n    ColorPickerInput.prototype.destroyColorPicker = function () {\n        if (this.fontColorPicker && !this.fontColorPicker.isDestroyed) {\n            this.fontColorPicker.destroy();\n        }\n        if (this.backgroundColorPicker && !this.backgroundColorPicker.isDestroyed) {\n            this.backgroundColorPicker.destroy();\n        }\n        if (this.fontColorDropDown && !this.fontColorDropDown.isDestroyed) {\n            var innerEle = this.fontColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                detach(innerEle);\n            }\n            this.fontColorDropDown.destroy();\n        }\n        if (this.backgroundColorDropDown && !this.backgroundColorDropDown.isDestroyed) {\n            var innerEle = this.backgroundColorDropDown.element.querySelector('.e-rte-color-content');\n            if (innerEle) {\n                detach(innerEle);\n            }\n            this.backgroundColorDropDown.destroy();\n        }\n    };\n    ColorPickerInput.prototype.setRtl = function (args) {\n        if (this.fontColorPicker) {\n            this.fontColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.fontColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.backgroundColorPicker) {\n            this.backgroundColorPicker.setProperties({ enableRtl: args.enableRtl });\n            this.backgroundColorDropDown.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    ColorPickerInput.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRenderComplete, this.renderColorPickerInput, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.destroyColorPicker, this.destroyColorPicker, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    };\n    ColorPickerInput.prototype.onPropertyChanged = function (model) {\n        var newProp = model.newProp;\n        var element;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'fontColor':\n                    if (this.fontColorPicker) {\n                        for (var _b = 0, _c = Object.keys(newProp.fontColor); _b < _c.length; _b++) {\n                            var font = _c[_b];\n                            switch (font) {\n                                case 'default':\n                                    this.fontColorPicker.setProperties({ value: newProp.fontColor.default });\n                                    element = this.fontColorDropDown.element;\n                                    var fontBorder = element.querySelector('.' + this.tools['fontcolor'].icon);\n                                    fontBorder.style.borderBottomColor = newProp.fontColor.default;\n                                    break;\n                                case 'mode':\n                                    this.fontColorPicker.setProperties({ mode: newProp.fontColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.fontColorPicker.setProperties({ columns: newProp.fontColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.fontColorPicker.setProperties({ presetColors: newProp.fontColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.fontColorPicker.setProperties({ modeSwitcher: newProp.fontColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n                case 'backgroundColor':\n                    if (this.backgroundColorPicker) {\n                        for (var _d = 0, _e = Object.keys(newProp.backgroundColor); _d < _e.length; _d++) {\n                            var background = _e[_d];\n                            switch (background) {\n                                case 'default':\n                                    this.backgroundColorPicker.setProperties({ value: newProp.backgroundColor.default });\n                                    element = this.backgroundColorDropDown.element;\n                                    var backgroundBorder = element.querySelector('.' + this.tools['backgroundcolor'].icon);\n                                    backgroundBorder.style.borderBottomColor = newProp.backgroundColor.default;\n                                    break;\n                                case 'mode':\n                                    this.backgroundColorPicker.setProperties({ mode: newProp.backgroundColor.mode });\n                                    break;\n                                case 'columns':\n                                    this.backgroundColorPicker.setProperties({ columns: newProp.backgroundColor.columns });\n                                    break;\n                                case 'colorCode':\n                                    this.backgroundColorPicker.setProperties({ presetColors: newProp.backgroundColor.colorCode });\n                                    break;\n                                case 'modeSwitcher':\n                                    this.backgroundColorPicker.setProperties({ modeSwitcher: newProp.backgroundColor.modeSwitcher });\n                                    break;\n                            }\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    ColorPickerInput.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRenderComplete, this.renderColorPickerInput);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.destroyColorPicker, this.destroyColorPicker);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n    };\n    return ColorPickerInput;\n}());\nexport { ColorPickerInput };\n","import { detach, getUniqueID, append, closest, selectAll, select, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, Browser, isNullOrUndefined, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isCollide } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ColorPickerInput } from './color-picker';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar BaseQuickToolbar = /** @class */ (function () {\n    function BaseQuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.isDOMElement = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.popupRenderer = this.renderFactory.getRenderer(RenderType.Popup);\n        this.dropDownButtons = new DropDownButtons(this.parent, this.locator);\n        this.colorPickerObj = new ColorPickerInput(this.parent, this.locator);\n    }\n    BaseQuickToolbar.prototype.appendPopupContent = function () {\n        this.toolbarElement = this.parent.createElement('div', { className: classes.CLS_QUICK_TB });\n        this.element.appendChild(this.toolbarElement);\n    };\n    BaseQuickToolbar.prototype.render = function (args) {\n        var className;\n        if (args.popupType === 'Image') {\n            className = classes.CLS_IMAGE_POP;\n        }\n        else if (args.popupType === 'Inline') {\n            className = classes.CLS_INLINE_POP;\n        }\n        else {\n            className = '';\n        }\n        var popupId = getUniqueID(args.popupType + '_Quick_Popup');\n        this.stringItems = args.toolbarItems;\n        this.element = this.parent.createElement('div', { id: popupId, className: className + ' ' + classes.CLS_RTE_ELEMENTS });\n        this.element.setAttribute('aria-owns', this.parent.getID());\n        this.appendPopupContent();\n        this.createToolbar(args.toolbarItems, args.mode);\n        this.popupRenderer.renderPopup(this);\n        this.addEventListener();\n    };\n    BaseQuickToolbar.prototype.createToolbar = function (items, mode) {\n        this.quickTBarObj = new BaseToolbar(this.parent, this.locator);\n        this.quickTBarObj.render({\n            container: 'quick',\n            target: this.toolbarElement,\n            items: items,\n            mode: mode\n        });\n        this.quickTBarObj.toolbarObj.refresh();\n    };\n    BaseQuickToolbar.prototype.setPosition = function (e) {\n        var x;\n        var y;\n        var imgWrapper = closest(e.target, '.e-img-caption');\n        var target = !isNOU(imgWrapper) ? imgWrapper : e.target;\n        addClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n        var targetOffsetTop = target.offsetTop;\n        var parentOffsetTop = window.pageYOffset + e.parentData.top;\n        if ((targetOffsetTop - e.editTop) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) - e.popHeight - 5;\n        }\n        else if (((e.editTop + e.editHeight) - (targetOffsetTop + target.offsetHeight)) > e.popHeight) {\n            y = parentOffsetTop + e.tBarElementHeight + (targetOffsetTop - e.editTop) + target.offsetHeight + 5;\n        }\n        else {\n            y = e.y;\n        }\n        if (target.offsetWidth > e.popWidth) {\n            x = (target.offsetWidth / 2) - (e.popWidth / 2) + e.parentData.left + target.offsetLeft;\n        }\n        else {\n            x = e.parentData.left + target.offsetLeft;\n        }\n        this.popupObj.position.X = ((x + e.popWidth) > e.parentData.right) ? e.parentData.right - e.popWidth : x;\n        this.popupObj.position.Y = y;\n        this.popupObj.dataBind();\n        removeClass([this.toolbarElement], [classes.CLS_RM_WHITE_SPACE]);\n    };\n    BaseQuickToolbar.prototype.checkCollision = function (e, viewPort, type) {\n        var x;\n        var y;\n        var parentTop = e.parentData.top;\n        var contentTop = e.windowY + parentTop + e.tBarElementHeight;\n        var collision = [];\n        if (viewPort === 'document') {\n            collision = isCollide(e.popup);\n        }\n        else {\n            collision = isCollide(e.popup, e.parentElement);\n        }\n        for (var i = 0; i < collision.length; i++) {\n            switch (collision[i]) {\n                case 'top':\n                    if (viewPort === 'document') {\n                        y = e.windowY;\n                    }\n                    else {\n                        y = (window.pageYOffset + parentTop) + e.tBarElementHeight;\n                    }\n                    break;\n                case 'bottom':\n                    var posY = void 0;\n                    if (viewPort === 'document') {\n                        if (type === 'inline') {\n                            posY = (e.y - e.popHeight - 10);\n                        }\n                        else {\n                            if ((e.windowHeight - (parentTop + e.tBarElementHeight)) > e.popHeight) {\n                                if ((contentTop - e.windowHeight) > e.popHeight) {\n                                    posY = (contentTop + (e.windowHeight - parentTop)) - e.popHeight;\n                                }\n                                else {\n                                    posY = contentTop;\n                                }\n                            }\n                            else {\n                                posY = e.windowY + (parentTop + e.tBarElementHeight);\n                            }\n                        }\n                    }\n                    else {\n                        if (e.target.tagName !== 'IMG') {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 10;\n                        }\n                        else {\n                            posY = (e.parentData.bottom + window.pageYOffset) - e.popHeight - 5;\n                        }\n                    }\n                    y = posY;\n                    break;\n                case 'right':\n                    if (type === 'inline') {\n                        x = e.windowWidth - (e.popWidth + e.bodyRightSpace + 10);\n                    }\n                    else {\n                        x = e.x - (e.popWidth + e.parentData.left);\n                    }\n                    break;\n                case 'left':\n                    if (type === 'inline') {\n                        x = 0;\n                    }\n                    else {\n                        x = e.parentData.left;\n                    }\n                    break;\n            }\n        }\n        this.popupObj.position.X = (x) ? x : this.popupObj.position.X;\n        this.popupObj.position.Y = (y) ? y : this.popupObj.position.Y;\n        this.popupObj.dataBind();\n    };\n    BaseQuickToolbar.prototype.showPopup = function (x, y, target) {\n        var editPanelTop;\n        var editPanelHeight;\n        var bodyStyle = window.getComputedStyle(document.body);\n        var bodyRight = parseFloat(bodyStyle.marginRight.split('px')[0]) + parseFloat(bodyStyle.paddingRight.split('px')[0]);\n        var windowHeight = window.innerHeight;\n        var windowWidth = window.innerWidth;\n        var parent = this.parent.element;\n        var toolbarAvail = !isNullOrUndefined(this.parent.getToolbar());\n        var tbHeight = toolbarAvail && this.parent.toolbarModule.getToolbarHeight();\n        var expTBHeight = toolbarAvail && this.parent.toolbarModule.getExpandTBarPopHeight();\n        var tBarHeight = (toolbarAvail) ? (tbHeight + expTBHeight) : 0;\n        addClass([this.element], [classes.CLS_HIDE]);\n        if (Browser.isDevice && !isIDevice()) {\n            addClass([this.parent.getToolbar()], [classes.CLS_HIDE]);\n        }\n        if (this.parent.iframeSettings.enable) {\n            var cntEle = this.contentRenderer.getPanel().contentWindow;\n            editPanelTop = cntEle.pageYOffset;\n            editPanelHeight = cntEle.innerHeight;\n        }\n        else {\n            var cntEle = closest(target, '.' + classes.CLS_RTE_CONTENT);\n            editPanelTop = (cntEle) ? cntEle.scrollTop : 0;\n            editPanelHeight = (cntEle) ? cntEle.offsetHeight : 0;\n        }\n        if (!this.parent.inlineMode.enable && !closest(target, 'table')) {\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n            this.parent.enableToolbarItem(['Undo', 'Redo']);\n        }\n        append([this.element], document.body);\n        this.popupObj.position.X = x + 20;\n        this.popupObj.position.Y = y + ((this.parent.iframeSettings.enable) ? 35 : 20);\n        this.popupObj.dataBind();\n        this.popupObj.show();\n        this.dropDownButtons.renderDropDowns({\n            container: this.toolbarElement,\n            containerType: 'quick',\n            items: this.stringItems\n        });\n        this.colorPickerObj.renderColorPickerInput({\n            container: this.toolbarElement,\n            containerType: 'quick',\n            items: this.stringItems\n        });\n        var showPopupData = {\n            x: x, y: y,\n            target: target,\n            editTop: editPanelTop,\n            editHeight: editPanelHeight,\n            popup: this.popupObj.element,\n            popHeight: this.popupObj.element.offsetHeight,\n            popWidth: this.popupObj.element.offsetWidth,\n            parentElement: parent,\n            bodyRightSpace: bodyRight,\n            windowY: window.pageYOffset,\n            windowHeight: windowHeight,\n            windowWidth: windowWidth,\n            parentData: parent.getBoundingClientRect(),\n            tBarElementHeight: tBarHeight\n        };\n        if (target.tagName === 'IMG') {\n            this.setPosition(showPopupData);\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.checkCollision(showPopupData, 'parent', '');\n        }\n        this.checkCollision(showPopupData, 'document', ((this.parent.inlineMode.enable) ? 'inline' : ''));\n        this.popupObj.hide();\n        removeClass([this.element], [classes.CLS_HIDE]);\n        this.popupObj.show({ name: 'ZoomIn', duration: 400 });\n        setStyleAttribute(this.element, {\n            maxWidth: this.parent.element.offsetWidth + 'px'\n        });\n        addClass([this.element], [classes.CLS_POP]);\n        this.isDOMElement = true;\n    };\n    BaseQuickToolbar.prototype.hidePopup = function () {\n        var viewSourcePanel = this.parent.sourceCodeModule.getViewPanel();\n        if (Browser.isDevice && !isIDevice()) {\n            removeClass([this.parent.getToolbar()], [classes.CLS_HIDE]);\n        }\n        if (!isNullOrUndefined(this.parent.getToolbar()) && !this.parent.inlineMode.enable) {\n            if (isNullOrUndefined(viewSourcePanel) || viewSourcePanel.style.display === 'none') {\n                this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n            }\n        }\n        this.removeEleFromDOM();\n        this.isDOMElement = false;\n    };\n    /**\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.addQTBarItem = function (item, index) {\n        this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(item, 'toolbar'), index);\n    };\n    /**\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.removeQTBarItem = function (index) {\n        this.quickTBarObj.toolbarObj.removeItems(index);\n    };\n    BaseQuickToolbar.prototype.removeEleFromDOM = function () {\n        var element = this.popupObj.element;\n        if (this.isDOMElement) {\n            this.dropDownButtons.destroyDropDowns();\n            this.colorPickerObj.destroyColorPicker();\n            removeClass([this.element], [classes.CLS_POP]);\n            detach(element);\n        }\n    };\n    BaseQuickToolbar.prototype.updateStatus = function (args) {\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownButtons,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.element),\n            tbItems: this.quickTBarObj.toolbarObj.items\n        };\n        setToolbarStatus(options, true);\n        if (!select('.e-rte-srctextarea', this.parent.element)) {\n            updateUndoRedoStatus(this.parent.getBaseToolbarObject(), this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * Destroys the Quick toolbar.\n     * @method destroy\n     * @return {void}\n     */\n    BaseQuickToolbar.prototype.destroy = function () {\n        if (this.popupObj && !this.popupObj.isDestroyed) {\n            this.popupObj.destroy();\n            this.removeEleFromDOM();\n        }\n        this.removeEventListener();\n    };\n    BaseQuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.inlineMode.enable) {\n            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    BaseQuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        if (e.newProp.inlineMode.enable) {\n                            this.parent.on(events.toolbarUpdated, this.updateStatus, this);\n                        }\n                        else {\n                            this.parent.off(events.toolbarUpdated, this.updateStatus);\n                        }\n                        break;\n                }\n            }\n        }\n    };\n    BaseQuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.inlineMode.enable) {\n            this.parent.off(events.toolbarUpdated, this.updateStatus);\n        }\n    };\n    return BaseQuickToolbar;\n}());\nexport { BaseQuickToolbar };\n","import { Popup } from '@syncfusion/ej2-popups';\nimport { CLS_QUICK_POP } from '../base/classes';\nimport { popupOpen } from '../base/constant';\n/**\n * `Popup renderer` module is used to render popup in RichTextEditor.\n * @hidden\n */\nvar PopupRenderer = /** @class */ (function () {\n    /**\n     * Constructor for popup renderer module\n     */\n    function PopupRenderer(parent) {\n        this.parent = parent;\n    }\n    PopupRenderer.prototype.popupOpen = function () {\n        this.parent.notify(popupOpen, this);\n    };\n    PopupRenderer.prototype.renderPopup = function (args) {\n        this.setPanel(args.element);\n        this.renderPanel();\n        args.popupObj = new Popup(args.element, {\n            targetType: 'relative',\n            relateTo: this.parent.element,\n            open: this.popupOpen.bind(this)\n        });\n        this.popupObj = args.popupObj;\n        args.popupObj.hide();\n    };\n    /**\n     * The function is used to add popup class in Quick Toolbar\n     */\n    PopupRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_QUICK_POP);\n    };\n    /**\n     * Get the popup element of RichTextEditor\n     * @return {Element}\n     */\n    PopupRenderer.prototype.getPanel = function () {\n        return this.popupPanel;\n    };\n    /**\n     * Set the popup element of RichTextEditor\n     * @param  {Element} panel\n     */\n    PopupRenderer.prototype.setPanel = function (panel) {\n        this.popupPanel = panel;\n    };\n    return PopupRenderer;\n}());\nexport { PopupRenderer };\n","import { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass, isIDevice } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar QuickToolbar = /** @class */ (function () {\n    function QuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n        this.addEventListener();\n    }\n    QuickToolbar.prototype.formatItems = function (items) {\n        var formattedItems = [];\n        items.forEach(function (item) {\n            if (typeof item === 'string') {\n                switch (item.toLocaleLowerCase()) {\n                    case 'open':\n                        formattedItems.push('openLink');\n                        break;\n                    case 'edit':\n                        formattedItems.push('editLink');\n                        break;\n                    case 'unlink':\n                        formattedItems.push('removeLink');\n                        break;\n                    default:\n                        formattedItems.push(item);\n                        break;\n                }\n            }\n            else {\n                formattedItems.push(item);\n            }\n        });\n        return formattedItems;\n    };\n    QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n        return {\n            popupType: popType,\n            toolbarItems: items,\n            mode: mode,\n            renderType: type\n        };\n    };\n    QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n        if (items.length < 1) {\n            return null;\n        }\n        var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n        qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n        return qTBar;\n    };\n    QuickToolbar.prototype.initializeQuickToolbars = function () {\n        this.parent.quickToolbarModule = this;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        if (this.parent.inlineMode.enable && this.parent.inlineMode.onSelection && isIDevice()) {\n            EventHandler.add(this.contentRenderer.getDocument(), 'selectionchange', this.selectionChangeHandler, this);\n        }\n    };\n    QuickToolbar.prototype.onMouseDown = function (e) {\n        this.parent.isBlur = false;\n        this.parent.isRTE = true;\n    };\n    QuickToolbar.prototype.renderQuickToolbars = function () {\n        if (this.linkQTBar || this.imageQTBar || this.textQTBar || this.tableQTBar) {\n            return;\n        }\n        this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n        this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n        this.textQTBar = this.createQTBar('Text', 'Scrollable', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n        this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n        this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n        this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n        this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n        this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n        if (this.linkQTBar) {\n            EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.imageQTBar) {\n            EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.textQTBar) {\n            EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n        if (this.tableQTBar) {\n            EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n    };\n    QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n            this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n            EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n        }\n    };\n    QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n        this.inlineQTBar.showPopup(x, y, target);\n    };\n    QuickToolbar.prototype.hideInlineQTBar = function () {\n        if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n            this.inlineQTBar.hidePopup();\n        }\n    };\n    QuickToolbar.prototype.hideQuickToolbars = function () {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close')) {\n            this.textQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.deBounce = function (x, y, target) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () { _this.showInlineQTBar(x, y, target); }, 1000);\n    };\n    QuickToolbar.prototype.mouseUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            var coordinates = void 0;\n            coordinates = e.args.touches ? e.args.changedTouches[0] : e.args;\n            var range = this.parent.getRange();\n            var target = e.args.target;\n            if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n                if (isIDevice() && e.touchData && e.touchData.prevClientX !== e.touchData.clientX\n                    && e.touchData.prevClientY !== e.touchData.clientY) {\n                    return;\n                }\n                this.hideInlineQTBar();\n                this.offsetX = coordinates.pageX;\n                this.offsetY = pageYOffset(coordinates, this.parent.element, this.parent.iframeSettings.enable);\n                if (target.nodeName === 'TEXTAREA') {\n                    this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                }\n                else {\n                    var closestAnchor = closest(target, 'a');\n                    target = closestAnchor ? closestAnchor : target;\n                    if (target.tagName !== 'IMG' && target.tagName !== 'A' && (!closest(target, 'td,th') || !range.collapsed)) {\n                        if (this.parent.inlineMode.onSelection && range.collapsed) {\n                            return;\n                        }\n                        this.target = target;\n                        this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                    }\n                }\n            }\n        }\n    };\n    QuickToolbar.prototype.keyDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.keyUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            if (this.parent.inlineMode.onSelection) {\n                return;\n            }\n            var args = e.args;\n            this.deBounce(this.offsetX, this.offsetY, args.target);\n        }\n    };\n    QuickToolbar.prototype.getInlineBaseToolbar = function () {\n        return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n    };\n    QuickToolbar.prototype.selectionChangeHandler = function (e) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () { _this.onSelectionChange(e); }, 1000);\n    };\n    QuickToolbar.prototype.onSelectionChange = function (e) {\n        if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n            return;\n        }\n        var selection = this.contentRenderer.getDocument().getSelection();\n        if (!selection.isCollapsed) {\n            this.mouseUpHandler({ args: e });\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    QuickToolbar.prototype.destroy = function () {\n        if (this.linkQTBar) {\n            EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n            this.linkQTBar.destroy();\n        }\n        if (this.textQTBar) {\n            EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n            this.textQTBar.destroy();\n        }\n        if (this.imageQTBar) {\n            EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n            this.imageQTBar.destroy();\n        }\n        if (this.tableQTBar) {\n            EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n            this.tableQTBar.destroy();\n        }\n        if (this.inlineQTBar) {\n            EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n            if (isIDevice()) {\n                EventHandler.remove(document, 'selectionchange', this.selectionChangeHandler);\n            }\n            this.inlineQTBar.destroy();\n        }\n        this.removeEventListener();\n    };\n    QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n        this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n        this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n        this.parent.on(events.keyDown, this.keyDownHandler, this);\n        this.parent.on(events.keyUp, this.keyUpHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n        this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n    };\n    QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n        this.parent.off(events.mouseUp, this.mouseUpHandler);\n        this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n        this.parent.off(events.keyDown, this.keyDownHandler);\n        this.parent.off(events.keyUp, this.keyUpHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n        this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n    };\n    QuickToolbar.prototype.toolbarUpdated = function (args) {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n    };\n    QuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n        this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n        this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n        this.wireInlineQTBarEvents();\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n        }\n        this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n    };\n    QuickToolbar.prototype.onKeyDown = function (e) {\n        var args = e.args;\n        if (args.which === 8 || args.which === 46) {\n            if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n                this.imageQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.onIframeMouseDown = function () {\n        this.hideQuickToolbars();\n        this.hideInlineQTBar();\n    };\n    QuickToolbar.prototype.setRtl = function (args) {\n        if (this.inlineQTBar) {\n            this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.linkQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    QuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n        this.parent.off(events.mouseDown, this.renderQuickToolbars);\n        this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n        this.unWireInlineQTBarEvents();\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.off(events.scroll, this.hideQuickToolbars);\n        }\n        this.parent.off(events.focusChange, this.hideQuickToolbars);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    QuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'actionOnScroll':\n                        if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n                            this.parent.off(events.scroll, this.hideQuickToolbars);\n                        }\n                        else {\n                            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n                        }\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.inlineQTBar) {\n            removeClass([this.parent.element], [CLS_INLINE]);\n            this.unWireInlineQTBarEvents();\n            this.hideInlineQTBar();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.wireInlineQTBarEvents();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    QuickToolbar.prototype.getModuleName = function () {\n        return 'quickToolbar';\n    };\n    return QuickToolbar;\n}());\nexport { QuickToolbar };\n","import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\nvar Count = /** @class */ (function () {\n    function Count(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Count.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editPanel = this.contentRenderer.getEditPanel();\n    };\n    Count.prototype.renderCount = function () {\n        this.initializeInstance();\n        this.element = this.parent.createElement('span', { className: CLS_COUNT });\n        this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n        this.appendCount();\n        if (this.parent.maxLength !== -1) {\n            this.charCountBackground(this.htmlLength);\n        }\n    };\n    Count.prototype.appendCount = function () {\n        var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value.trim() :\n            this.editPanel.textContent.trim();\n        this.htmlLength = htmlText.length;\n        var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n        this.element.innerHTML = string;\n    };\n    Count.prototype.charCountBackground = function (htmlLength) {\n        var percentage = (htmlLength / this.parent.maxLength) * 100;\n        if (percentage < 85) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.remove(CLS_ERROR);\n        }\n        else if (percentage > 85 && percentage <= 90) {\n            this.element.classList.remove(CLS_ERROR);\n            this.element.classList.add(CLS_WARNING);\n        }\n        else if (percentage > 90) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.add(CLS_ERROR);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Count.prototype.refresh = function () {\n        if (!isNullOrUndefined(this.editPanel)) {\n            this.appendCount();\n            if (this.parent.maxLength !== -1) {\n                this.charCountBackground(this.htmlLength);\n            }\n        }\n    };\n    Count.prototype.restrict = function (e) {\n        if (this.parent.showCharCount) {\n            var element = e.args.currentTarget.textContent.trim();\n            var array = [8, 16, 17, 37, 38, 39, 40, 46, 65];\n            var arrayKey = void 0;\n            for (var i = 0; i <= array.length - 1; i++) {\n                if (e.args.which === array[i]) {\n                    if (e.args.ctrlKey && e.args.which === 65) {\n                        return;\n                    }\n                    else if (e.args.which !== 65) {\n                        arrayKey = array[i];\n                        return;\n                    }\n                }\n            }\n            if ((element.length >= this.parent.maxLength && this.parent.maxLength !== -1) && e.args.which !== arrayKey) {\n                e.args.preventDefault();\n            }\n        }\n    };\n    /**\n     * Destroys the Count.\n     * @method destroy\n     * @return {void}\n     */\n    Count.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Count.prototype.toggle = function (e) {\n        this.element.style.display = (e.member === 'viewSource') ? 'none' : 'block';\n    };\n    Count.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.showCharCount) {\n            this.parent.on(events.initialEnd, this.renderCount, this);\n            this.parent.on(events.keyUp, this.refresh, this);\n            this.parent.on(events.keyDown, this.restrict, this);\n            this.parent.on(events.count, this.refresh, this);\n            this.parent.on(events.refreshBegin, this.refresh, this);\n            this.parent.on(events.mouseDown, this.refresh, this);\n            this.parent.on(events.destroy, this.destroy, this);\n            this.parent.on(events.sourceCode, this.toggle, this);\n            this.parent.on(events.updateSource, this.toggle, this);\n        }\n    };\n    Count.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        detach(this.element);\n        this.parent.off(events.initialEnd, this.renderCount);\n        this.parent.off(events.keyUp, this.refresh);\n        this.parent.off(events.refreshBegin, this.refresh);\n        this.parent.off(events.keyDown, this.restrict);\n        this.parent.off(events.count, this.refresh);\n        this.parent.off(events.mouseDown, this.refresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.sourceCode, this.toggle);\n        this.parent.off(events.updateSource, this.toggle);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Count.prototype.getModuleName = function () {\n        return 'count';\n    };\n    return Count;\n}());\nexport { Count };\n","/**\n * MarkdownSelection internal module\n * @hidden\n */\nvar MarkdownSelection = /** @class */ (function () {\n    function MarkdownSelection() {\n    }\n    MarkdownSelection.prototype.getLineNumber = function (textarea, point) {\n        return textarea.value.substr(0, point).split('\\n').length;\n    };\n    MarkdownSelection.prototype.getSelectedText = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        return textarea.value.substring(start, end);\n    };\n    MarkdownSelection.prototype.getAllParents = function (value) {\n        return value.split('\\n');\n    };\n    MarkdownSelection.prototype.getSelectedLine = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var index = this.getLineNumber(textarea, textarea.selectionStart);\n        return lines[index - 1];\n    };\n    MarkdownSelection.prototype.getLine = function (textarea, index) {\n        var lines = this.getAllParents(textarea.value);\n        return lines[index];\n    };\n    MarkdownSelection.prototype.getSelectedParentPoints = function (textarea) {\n        var lines = this.getAllParents(textarea.value);\n        var start = this.getLineNumber(textarea, textarea.selectionStart);\n        var end = this.getLineNumber(textarea, textarea.selectionEnd);\n        var parents = this.getSelectedText(textarea).split('\\n');\n        var selectedPoints = [];\n        var selectedLine = lines[start - 1];\n        var startLength = lines.slice(0, start - 1).join('').length;\n        var firstPoint = {};\n        firstPoint.line = start - 1;\n        firstPoint.start = startLength + firstPoint.line;\n        firstPoint.end = selectedLine !== '' ? firstPoint.start +\n            selectedLine.length + 1 : firstPoint.start + selectedLine.length;\n        firstPoint.text = selectedLine;\n        selectedPoints.push(firstPoint);\n        if (parents.length > 1) {\n            for (var i = 1; i < parents.length - 1; i++) {\n                var points = {};\n                points.line = selectedPoints[i - 1].line + 1;\n                points.start = parents[i] !== '' ? selectedPoints[i - 1].end : selectedPoints[i - 1].end;\n                points.end = points.start + parents[i].length + 1;\n                points.text = parents[i];\n                selectedPoints.push(points);\n            }\n            var lastPoint = {};\n            lastPoint.line = selectedPoints[selectedPoints.length - 1].line + 1;\n            lastPoint.start = selectedPoints[selectedPoints.length - 1].end;\n            lastPoint.end = lastPoint.start + lines[end - 1].length + 1;\n            lastPoint.text = lines[end - 1];\n            selectedPoints.push(lastPoint);\n        }\n        return selectedPoints;\n    };\n    MarkdownSelection.prototype.setSelection = function (textarea, start, end) {\n        textarea.setSelectionRange(start, end);\n        textarea.focus();\n    };\n    MarkdownSelection.prototype.save = function (start, end) {\n        this.selectionStart = start;\n        this.selectionEnd = end;\n    };\n    MarkdownSelection.prototype.restore = function (textArea) {\n        this.setSelection(textArea, this.selectionStart, this.selectionEnd);\n    };\n    MarkdownSelection.prototype.isStartWith = function (line, command) {\n        var isStart = false;\n        if (line) {\n            var reg = line.trim() === command.trim() ?\n                new RegExp('^(' + this.replaceSpecialChar(command.trim()) + ')', 'gim') :\n                new RegExp('^(' + this.replaceSpecialChar(command) + ')', 'gim');\n            isStart = reg.test(line.trim());\n        }\n        return isStart;\n    };\n    MarkdownSelection.prototype.replaceSpecialChar = function (value) {\n        return value.replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/g, '\\\\$&');\n    };\n    MarkdownSelection.prototype.isClear = function (parents, regex) {\n        var isClear = false;\n        for (var i = 0; i < parents.length; i++) {\n            if (new RegExp(regex, 'gim').test(parents[i].text)) {\n                return true;\n            }\n        }\n        return isClear;\n    };\n    MarkdownSelection.prototype.getRegex = function (syntax) {\n        syntax = this.replaceSpecialChar(syntax);\n        var regex = '^(' + syntax + ')|^(' + syntax.trim() + ')';\n        return new RegExp(regex);\n    };\n    MarkdownSelection.prototype.getSelectedInlinePoints = function (textarea) {\n        var start = textarea.selectionStart;\n        var end = textarea.selectionEnd;\n        var selection = this.getSelectedText(textarea);\n        return { start: start, end: end, text: selection };\n    };\n    return MarkdownSelection;\n}());\nexport { MarkdownSelection };\n","import { MarkdownSelection } from '../../markdown-parser/plugin/markdown-selection';\nimport * as events from '../base/constant';\n/**\n * MarkdownToolbarStatus module for refresh the toolbar status\n */\nvar MarkdownToolbarStatus = /** @class */ (function () {\n    function MarkdownToolbarStatus(parent) {\n        this.toolbarStatus = {\n            bold: false,\n            italic: false,\n            subscript: false,\n            superscript: false,\n            strikethrough: false,\n            orderedlist: false,\n            uppercase: false,\n            inlinecode: false,\n            unorderedlist: false,\n            underline: false,\n            alignments: null,\n            backgroundcolor: null,\n            fontcolor: null,\n            fontname: null,\n            fontsize: null,\n            formats: null\n        };\n        this.selection = new MarkdownSelection();\n        this.parent = parent;\n        this.element = this.parent.contentModule.getEditPanel();\n        this.addEventListener();\n    }\n    MarkdownToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    MarkdownToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n        this.parent.off(events.destroy, this.onRefreshHandler);\n    };\n    MarkdownToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var parentsLines = this.selection.getSelectedParentPoints(this.element);\n        this.toolbarStatus = {\n            orderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'OL'),\n            unorderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'UL'),\n            formats: this.currentFormat(parentsLines, args.documentNode),\n            bold: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Bold'),\n            italic: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Italic'),\n            inlinecode: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode'),\n            strikethrough: args.documentNode ? false :\n                this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('StrikeThrough'),\n            subscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SubScript'),\n            superscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SuperScript'),\n            uppercase: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('UpperCase')\n        };\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n    };\n    MarkdownToolbarStatus.prototype.isListsApplied = function (lines, type) {\n        var isApply = true;\n        for (var i = 0; i < lines.length; i++) {\n            if (!this.selection.isStartWith(lines[i].text, this.parent.formatter.listTags[type])) {\n                isApply = false;\n                break;\n            }\n        }\n        return isApply;\n    };\n    MarkdownToolbarStatus.prototype.currentFormat = function (lines, documentNode) {\n        var format = 'p';\n        var keys = Object.keys(this.parent.formatter.formatTags);\n        var direction = this.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.parent.formatter.formatTags[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                var parentLines = this.selection.getAllParents(this.element.value);\n                var firstPrevText = parentLines[lines[0].line - 1];\n                var lastNextText = parentLines[lines.length + 1];\n                if (this.selection.isStartWith(firstPrevText, this.parent.formatter.formatTags[keys[i]].split('\\n')[0]) &&\n                    this.selection.isStartWith(lastNextText, this.parent.formatter.formatTags[keys[i]].split('\\n')[0])) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    return MarkdownToolbarStatus;\n}());\nexport { MarkdownToolbarStatus };\n","import * as events from '../base/constant';\n/**\n * `ExecCommandCallBack` module is used to run the editor manager command\n */\nvar ExecCommandCallBack = /** @class */ (function () {\n    function ExecCommandCallBack(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ExecCommandCallBack.prototype.addEventListener = function () {\n        this.parent.on(events.execCommandCallBack, this.commandCallBack, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    ExecCommandCallBack.prototype.commandCallBack = function (args) {\n        if (args.requestType !== 'Undo' && args.requestType !== 'Redo') {\n            this.parent.formatter.saveData();\n        }\n        this.parent.notify(events.toolbarRefresh, { args: args });\n        this.parent.notify(events.count, {});\n    };\n    ExecCommandCallBack.prototype.removeEventListener = function () {\n        this.parent.off(events.execCommandCallBack, this.commandCallBack);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    return ExecCommandCallBack;\n}());\nexport { ExecCommandCallBack };\n","/**\n * Constant values for Common\n */\n/* Keydown event trigger\n * @hidden\n */\nexport var KEY_DOWN = 'keydown';\n/* Undo and Redo action HTML plugin events\n * @hidden\n */\nexport var ACTION = 'action';\n/* Formats plugin events\n * @hidden\n */\nexport var FORMAT_TYPE = 'format-type';\n/* Keydown handler event trigger\n * @hidden\n */\nexport var KEY_DOWN_HANDLER = 'keydown-handler';\n/* List plugin events\n * @hidden\n */\nexport var LIST_TYPE = 'list-type';\n/* Keyup handler event trigger\n * @hidden\n */\nexport var KEY_UP_HANDLER = 'keyup-handler';\n/* Keyup event trigger\n * @hidden\n */\nexport var KEY_UP = 'keyup';\n/* Model changed plugin event trigger\n * @hidden\n */\nexport var MODEL_CHANGED_PLUGIN = 'model_changed_plugin';\n/* Model changed event trigger\n * @hidden\n */\nexport var MODEL_CHANGED = 'model_changed';\n/* PasteCleanup plugin for MSWord content\n * @hidden\n */\nexport var MS_WORD_CLEANUP_PLUGIN = 'ms_word_cleanup_plugin';\n/* PasteCleanup for MSWord content\n * @hidden\n */\nexport var MS_WORD_CLEANUP = 'ms_word_cleanup';\n","import { extend, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n * @hidden\n */\nvar Formatter = /** @class */ (function () {\n    function Formatter() {\n    }\n    /**\n     * To execute the command\n     * @param  {IRichTextEditor} self\n     * @param  {ActionBeginEventArgs} args\n     * @param  {MouseEvent|KeyboardEvent} event\n     * @param  {NotifyArgs} value\n     */\n    Formatter.prototype.process = function (self, args, event, value) {\n        var selection = self.contentModule.getDocument().getSelection();\n        var range = (selection.rangeCount > 0) ? selection.getRangeAt(selection.rangeCount - 1) : null;\n        if (!isNullOrUndefined(args)\n            && args.item.command\n            && args.item.command !== 'Table'\n            && args.item.command !== 'Actions'\n            && args.item.command !== 'Links'\n            && args.item.command !== 'Images'\n            && range\n            && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer))\n                || self.contentModule.getEditPanel() === range.commonAncestorContainer\n                || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n            return;\n        }\n        if (isNullOrUndefined(args)) {\n            var action = event.action;\n            if (action !== 'tab' && action !== 'enter' && action !== 'space' && action !== 'escape') {\n                args = {};\n                if (self.editorMode === 'Markdown' && action === 'insert-table') {\n                    value = {\n                        'headingText': self.localeObj.getConstant('TableHeadingText'),\n                        'colText': self.localeObj.getConstant('TableColText')\n                    };\n                }\n                var items = {\n                    originalEvent: event, cancel: false,\n                    requestType: action || (event.key + 'Key'),\n                    itemCollection: value\n                };\n                extend(args, args, items, true);\n                self.trigger(CONSTANT.actionBegin, args);\n                if (args.cancel) {\n                    if (action === 'paste' || action === 'cut' || action === 'copy') {\n                        event.preventDefault();\n                    }\n                    return;\n                }\n            }\n            this.editorManager.observer.notify((event.type === 'keydown' ? KEY_DOWN : KEY_UP), {\n                event: event,\n                callBack: this.onSuccess.bind(this, self),\n                value: value\n            });\n        }\n        else if (!isNullOrUndefined(args) && args.item.command && args.item.subCommand && ((args.item.command !== args.item.subCommand\n            && args.item.command !== 'Font')\n            || ((args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect')\n            || ((args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor')\n                && args.name === 'colorPickerChanged'))) {\n            extend(args, args, { requestType: args.item.subCommand, cancel: false, itemCollection: value }, true);\n            self.trigger(CONSTANT.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            if (this.getUndoRedoStack().length === 0 && args.item.command !== 'Links' && args.item.command !== 'Images') {\n                this.saveData();\n            }\n            self.isBlur = false;\n            self.contentModule.getEditPanel().focus();\n            var command = args.item.subCommand.toLocaleLowerCase();\n            if (command === 'paste' || command === 'cut' || command === 'copy') {\n                self.clipboardAction(command, event);\n            }\n            else {\n                this.editorManager.observer.notify(CONSTANT.checkUndo, { subCommand: args.item.subCommand });\n                this.editorManager.execCommand(args.item.command, args.item.subCommand, event, this.onSuccess.bind(this, self), args.item.value, value, ('#' + self.getID() + ' iframe'));\n            }\n        }\n        if (isNullOrUndefined(event) || event && event.action !== 'copy') {\n            this.enableUndo(self);\n        }\n    };\n    Formatter.prototype.getAncestorNode = function (node) {\n        node = node.nodeType === 3 ? node.parentNode : node;\n        return node;\n    };\n    Formatter.prototype.onKeyHandler = function (self, e) {\n        var _this = this;\n        this.editorManager.observer.notify(KEY_UP, {\n            event: e, callBack: function () {\n                _this.enableUndo(self);\n            }\n        });\n    };\n    Formatter.prototype.onSuccess = function (self, events) {\n        if (isNullOrUndefined(events.event) || (events && events.event.action !== 'copy')) {\n            this.enableUndo(self);\n            self.notify(CONSTANT.execCommandCallBack, events);\n        }\n        self.trigger(CONSTANT.actionComplete, events);\n        if (events.requestType === 'Images' || events.requestType === 'Links' && self.editorMode === 'HTML') {\n            var args = events;\n            if (events.requestType === 'Links' && events.event &&\n                events.event.type === 'keydown' &&\n                events.event.keyCode === 32) {\n                return;\n            }\n            self.notify(CONSTANT.insertCompleted, {\n                args: args.event, type: events.requestType, isNotify: true,\n                elements: args.elements\n            });\n        }\n        self.autoResize();\n    };\n    /**\n     * Save the data for undo and redo action.\n     */\n    Formatter.prototype.saveData = function (e) {\n        this.editorManager.undoRedoManager.saveData(e);\n    };\n    Formatter.prototype.getUndoStatus = function () {\n        return this.editorManager.undoRedoManager.getUndoStatus();\n    };\n    Formatter.prototype.getUndoRedoStack = function () {\n        return this.editorManager.undoRedoManager.undoRedoStack;\n    };\n    Formatter.prototype.enableUndo = function (self) {\n        var status = this.getUndoStatus();\n        if (self.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n        }\n        else {\n            if (self.toolbarModule) {\n                updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n            }\n        }\n    };\n    Formatter.prototype.undoRedoRefresh = function (iRichTextEditor) {\n        if (this.editorManager.undoRedoManager.undoRedoStack.length) {\n            this.editorManager.undoRedoManager.undoRedoStack = [];\n            this.editorManager.undoRedoManager.steps = 0;\n            iRichTextEditor.disableToolbarItem(['Undo', 'Redo']);\n        }\n    };\n    return Formatter;\n}());\nexport { Formatter };\n","/**\n * Constant values for Markdown Parser\n */\n/* List plugin events\n * @hidden\n */\nexport var LISTS_COMMAND = 'lists-commands';\n/* selectioncommand plugin events\n * @hidden\n */\nexport var selectionCommand = 'command-type';\n/* Link plugin events\n * @hidden\n */\nexport var LINK_COMMAND = 'link-commands';\n/* Clear plugin events\n * @hidden\n */\nexport var CLEAR_COMMAND = 'clear-commands';\n/* Table plugin events\n * @hidden\n */\nexport var MD_TABLE = 'insert-table';\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * Lists internal component\n * @hidden\n */\nvar MDLists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     * @hidden\n     */\n    function MDLists(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLists.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LISTS_COMMAND, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.keyUpHandler, this);\n    };\n    MDLists.prototype.keyDownHandler = function (event) {\n        switch (event.event.which) {\n            case 9:\n                this.tabKey(event);\n                break;\n        }\n        switch (event.event.action) {\n            case 'ordered-list':\n                this.applyListsHandler({ subCommand: 'OL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n            case 'unordered-list':\n                this.applyListsHandler({ subCommand: 'UL', callBack: event.callBack });\n                event.event.preventDefault();\n                break;\n        }\n    };\n    MDLists.prototype.keyUpHandler = function (event) {\n        switch (event.event.which) {\n            case 13:\n                this.enterKey(event);\n                break;\n        }\n    };\n    MDLists.prototype.tabKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var addedLength = 0;\n        var isNotFirst = this.isNotFirstLine(textArea, parents[0]);\n        if (!isNotFirst && !event.event.shiftKey) {\n            this.restore(textArea, start, end + addedLength, event);\n            return;\n        }\n        var regex = this.getListRegex();\n        this.currentAction = this.getAction(parents[0].text);\n        for (var i = 0; i < parents.length; i++) {\n            var prevIndex = event.event.shiftKey ? parents[i].line : parents[i].line - 1;\n            var prevLine = this.selection.getLine(textArea, prevIndex);\n            if (prevLine && (!event.event.shiftKey && isNotFirst || (event.event.shiftKey && /^(\\t)/.test(prevLine)))) {\n                prevLine = prevLine.trim();\n                if (regex.test(prevLine)) {\n                    event.event.preventDefault();\n                    var tabSpace = '\\t';\n                    var tabSpaceLength = event.event.shiftKey ? -tabSpace.length : tabSpace.length;\n                    var splitTab = parents[i].text.split('\\t');\n                    parents[i].text = event.event.shiftKey ? splitTab.splice(1, splitTab.length).join('\\t') : tabSpace + parents[i].text;\n                    textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                        textArea.value.substr(parents[i].end, textArea.value.length);\n                    start = i === 0 ? start + tabSpaceLength : start;\n                    addedLength += tabSpaceLength;\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? parents[j].start + tabSpaceLength : parents[j].start;\n                            parents[j].end = parents[j].end + tabSpaceLength;\n                        }\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, event);\n    };\n    MDLists.prototype.getTabSpace = function (line) {\n        var split = line.split('\\t');\n        var tabs = '';\n        for (var i = 0; i < split.length; i++) {\n            if (split[i] === '') {\n                tabs += '\\t';\n            }\n            else {\n                break;\n            }\n        }\n        return tabs;\n    };\n    MDLists.prototype.isNotFirstLine = function (textArea, points) {\n        var currentLine = points.text;\n        var prevIndex = points.line - 1;\n        var prevLine = this.selection.getLine(textArea, prevIndex);\n        var regex = this.getListRegex();\n        var isNotFirst = false;\n        if (prevLine && regex.test(prevLine.trim())) {\n            var curTabSpace = this.getTabSpace(currentLine);\n            var prevTabSpace = this.getTabSpace(prevLine);\n            isNotFirst = curTabSpace === prevTabSpace ? true : isNotFirst;\n            for (; prevTabSpace.length > curTabSpace.length; null) {\n                prevIndex = prevIndex - 1;\n                prevLine = this.selection.getLine(textArea, prevIndex);\n                if (regex.test(prevLine.trim())) {\n                    prevTabSpace = this.getTabSpace(prevLine);\n                    if (prevTabSpace.length <= curTabSpace.length) {\n                        isNotFirst = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return isNotFirst;\n    };\n    MDLists.prototype.getAction = function (line) {\n        var ol = line.trim().split(new RegExp('^(' + this.selection.replaceSpecialChar(this.syntax.OL) + ')'))[1];\n        var ul = line.trim().split(new RegExp('^(' + this.selection.replaceSpecialChar(this.syntax.UL) + ')'))[1];\n        return (ol ? 'OL' : 'UL');\n    };\n    MDLists.prototype.enterKey = function (event) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prevLine = this.selection.getLine(textArea, parents[0].line - 1);\n        var regex = this.getListRegex();\n        if (regex.test(prevLine.trim()) && prevLine.trim().replace(regex, '') !== '') {\n            var addedLength = 0;\n            var tabSpace = this.getTabSpace(prevLine);\n            this.currentAction = this.getAction(prevLine);\n            var prefix = this.syntax[this.currentAction];\n            parents[0].text = tabSpace + prefix + parents[0].text;\n            textArea.value = textArea.value.substr(0, parents[0].start) + parents[0].text +\n                textArea.value.substr(parents[0].end, textArea.value.length);\n            start = start + prefix.length + tabSpace.length;\n            addedLength += prefix.length + tabSpace.length;\n            this.restore(textArea, start, end + addedLength, event);\n        }\n    };\n    MDLists.prototype.applyListsHandler = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        this.currentAction = e.subCommand;\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var startLength = 0;\n        var endLength = 0;\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var prefix = '';\n        var regex = this.syntax[this.currentAction];\n        for (var i = 0; i < parents.length; i++) {\n            if (!this.selection.isStartWith(parents[i].text, regex)) {\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n                var replace = this.appliedLine(parents[i].text);\n                prefix = replace.line ? prefix : this.syntax[this.currentAction];\n                parents[i].text = replace.line ? replace.line : prefix + parents[i].text;\n                replace.space = replace.space ? replace.space : 0;\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? (start + prefix.length + replace.space) > 0 ?\n                    start + prefix.length + replace.space : 0 : start;\n                addedLength += prefix.length + replace.space;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? prefix.length +\n                            parents[j].start + replace.space : parents[j].start;\n                        parents[j].end = prefix.length + parents[j].end + replace.space;\n                    }\n                }\n                this.restore(textArea, start, end + addedLength, e);\n            }\n            else {\n                parents[i].text = parents[i].text.replace(regex, '');\n                textArea.value = textArea.value.substr(0, parents[i].start + endLength) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end + endLength, textArea.value.length);\n                endLength -= this.syntax[this.currentAction].length;\n                startLength = this.syntax[this.currentAction].length;\n                this.restore(textArea, start - startLength, end + endLength, e);\n            }\n        }\n    };\n    MDLists.prototype.appliedLine = function (line) {\n        var points = {};\n        var regex = this.getListRegex();\n        var isExist = regex.test(line.trim()) || line.trim() === this.syntax.OL.trim()\n            || line.trim() === this.syntax.UL.trim();\n        if (isExist) {\n            var replace = void 0;\n            var pattern = void 0;\n            var space = 0;\n            if (this.selection.getRegex(this.syntax.OL).test(line.trim())) {\n                pattern = this.selection.getRegex(this.syntax.OL);\n                replace = this.syntax.UL;\n                points.space = this.syntax.UL.length - this.syntax.OL.length;\n            }\n            else {\n                pattern = this.selection.getRegex(this.syntax.UL);\n                replace = this.syntax.OL;\n                points.space = this.syntax.OL.length - this.syntax.UL.length;\n            }\n            points.line = this.getTabSpace(line) + line.trim().replace(pattern, replace);\n        }\n        return points;\n    };\n    MDLists.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDLists.prototype.getListRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length; j++) {\n            var syntax = this.selection.replaceSpecialChar(this.syntax[configKey[j]]);\n            regex += regex === '' ? '^(' + syntax + ')|^(' + syntax.trim() + ')' :\n                '|^(' + syntax + ')|^(' + syntax.trim() + ')';\n        }\n        return new RegExp(regex);\n    };\n    return MDLists;\n}());\nexport { MDLists };\n","import { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport * as CONSTANT from './../../markdown-parser/base/constant';\n/**\n * MDFormats internal plugin\n * @hidden\n */\nvar MDFormats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDFormats(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n    };\n    MDFormats.prototype.applyFormats = function (e) {\n        e.subCommand = e.subCommand.toLowerCase();\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        if (this.isAppliedFormat(parents) === e.subCommand) {\n            if (e.subCommand === 'pre') {\n                if (parents.length > 1) {\n                    this.applyCodeBlock(textArea, e, parents);\n                }\n                else {\n                    return;\n                }\n            }\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        if (e.subCommand === 'p') {\n            this.cleanFormat(textArea);\n            this.restore(textArea, textArea.selectionStart, textArea.selectionEnd, e);\n            return;\n        }\n        else {\n            if ((e.subCommand === 'pre' && parents.length !== 1) || e.subCommand !== 'pre') {\n                this.cleanFormat(textArea, e.subCommand);\n            }\n        }\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        parents = this.selection.getSelectedParentPoints(textArea);\n        if (e.subCommand === 'pre') {\n            if (parents.length > 1) {\n                this.applyCodeBlock(textArea, e, parents);\n            }\n            else {\n                extend(e, e, { subCommand: 'InlineCode' }, true);\n                this.parent.observer.notify(CONSTANT.selectionCommand, e);\n            }\n            return;\n        }\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i].text !== '' && !this.selection.isStartWith(parents[i].text, '\\\\' + this.syntax[e.subCommand])) {\n                parents[i].text = this.syntax[e.subCommand] + parents[i].text;\n                textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                    textArea.value.substr(parents[i].end, textArea.value.length);\n                start = i === 0 ? start + this.syntax[e.subCommand].length : start;\n                addedLength += this.syntax[e.subCommand].length;\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ?\n                            this.syntax[e.subCommand].length + parents[j].start : parents[j].start;\n                        parents[j].end = this.syntax[e.subCommand].length + parents[j].end;\n                    }\n                }\n            }\n            else if (parents[i].text === '' && i === 0) {\n                this.selection.save(start, end);\n                if (parents.length !== 1) {\n                    for (var j = i; j < parents.length; j++) {\n                        parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                        parents[j].end = 1 + parents[j].end;\n                    }\n                }\n            }\n        }\n        this.restore(textArea, start, end + addedLength, e);\n    };\n    MDFormats.prototype.clearRegex = function () {\n        var regex = '';\n        var configKey = Object.keys(this.syntax);\n        for (var j = 0; j < configKey.length && configKey[j] !== 'pre' && configKey[j] !== 'p'; j++) {\n            regex += regex === '' ? '^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')' :\n                '|^(' + this.selection.replaceSpecialChar(this.syntax[configKey[j]].trim()) + ')';\n        }\n        return regex;\n    };\n    MDFormats.prototype.cleanFormat = function (textArea, command) {\n        var parents = this.selection.getSelectedParentPoints(textArea);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var removeLength = 0;\n        if (this.selection.isClear(parents, this.clearRegex())) {\n            for (var i = 0; i < parents.length; i++) {\n                var configKey = Object.keys(this.syntax);\n                for (var j = 0; parents[i].text !== '' && j < configKey.length; j++) {\n                    var removeText = this.syntax[configKey[j]];\n                    if (configKey[j] === command) {\n                        continue;\n                    }\n                    var regex = new RegExp('^(' + this.selection.replaceSpecialChar(removeText) + ')', 'gim');\n                    if (regex.test(parents[i].text)) {\n                        parents[i].text = parents[i].text.replace(regex, '');\n                        textArea.value = textArea.value.substr(0, parents[i].start) + parents[i].text + '\\n' +\n                            textArea.value.substr(parents[i].end, textArea.value.length);\n                        start = i === 0 ? (start - (removeText.length)) > 0 ? start - (removeText.length) : 0 : start;\n                        removeLength += removeText.length;\n                        if (parents.length !== 1) {\n                            for (var k = 0; k < parents.length; k++) {\n                                parents[k].start = k !== 0 ?\n                                    parents[k].start - removeText.length : parents[k].start;\n                                parents[k].end = parents[k].end - removeText.length;\n                            }\n                        }\n                        break;\n                    }\n                }\n                if (parents[i].text === '' && i === 0) {\n                    this.selection.save(start, end);\n                    if (parents.length !== 1) {\n                        for (var j = i; j < parents.length; j++) {\n                            parents[j].start = j !== 0 ? 1 + parents[j].start : parents[j].start;\n                            parents[j].end = 1 + parents[j].end;\n                        }\n                    }\n                }\n            }\n            this.restore(textArea, start, end - removeLength);\n        }\n    };\n    MDFormats.prototype.applyCodeBlock = function (textArea, event, parents) {\n        var command = event.subCommand;\n        var start = parents[0].start;\n        var end = parents[parents.length - 1].end;\n        var parentLines = this.selection.getAllParents(textArea.value);\n        var firstPrevText = parentLines[parents[0].line - 1];\n        var lastNextText = parentLines[(parents.length + 1) + 1];\n        var addedLength = 0;\n        if (!this.selection.isStartWith(firstPrevText, this.syntax.pre.split('\\n')[0]) &&\n            !this.selection.isStartWith(lastNextText, this.syntax.pre.split('\\n')[0])) {\n            var lines = textArea.value.substring(start, end).split('\\n');\n            var lastLine = lines[lines.length - 1] === '' ? '' : '\\n';\n            textArea.value = textArea.value.substr(0, start) + this.syntax[command] + textArea.value.substring(start, end) +\n                lastLine + this.syntax[command] +\n                textArea.value.substr(end, textArea.value.length);\n            start = this.selection.selectionStart + this.syntax[command].length;\n            end = this.selection.selectionEnd + this.syntax[command].length - 1;\n        }\n        else {\n            var cmd = this.syntax[command];\n            var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n            var startNo = textArea.value.substr(0, textArea.selectionStart).lastIndexOf(cmd);\n            var endNo = textArea.value.substr(textArea.selectionEnd, textArea.selectionEnd).indexOf(cmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), cmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), cmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            start = this.selection.selectionStart - cmd.length;\n            end = this.selection.selectionEnd - cmd.length;\n        }\n        this.restore(textArea, start, end, event);\n    };\n    MDFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDFormats.prototype.isAppliedFormat = function (lines, documentNode) {\n        var format = 'p';\n        var configKey = Object.keys(this.syntax);\n        var keys = Object.keys(this.syntax);\n        var direction = this.parent.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.syntax[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                var parentLines = this.selection.getAllParents(this.parent.element.value);\n                var firstPrevText = parentLines[lines[0].line - 1];\n                var lastNextText = parentLines[lines.length + 1];\n                if (this.selection.isStartWith(firstPrevText, this.syntax[keys[i]].split('\\n')[0]) &&\n                    this.selection.isStartWith(lastNextText, this.syntax[keys[i]].split('\\n')[0])) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    return MDFormats;\n}());\nexport { MDFormats };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * SelectionCommands internal component\n * @hidden\n */\nvar MDSelectionFormats = /** @class */ (function () {\n    function MDSelectionFormats(parent) {\n        extend(this, this, parent, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDSelectionFormats.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.selectionCommand, this.applyCommands, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    MDSelectionFormats.prototype.keyDownHandler = function (e) {\n        switch (e.event.action) {\n            case 'bold':\n                this.applyCommands({ subCommand: 'Bold', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'italic':\n                this.applyCommands({ subCommand: 'Italic', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'strikethrough':\n                this.applyCommands({ subCommand: 'StrikeThrough', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'uppercase':\n                this.applyCommands({ subCommand: 'UpperCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'lowercase':\n                this.applyCommands({ subCommand: 'LowerCase', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'superscript':\n                this.applyCommands({ subCommand: 'SuperScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'subscript':\n                this.applyCommands({ subCommand: 'SubScript', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    MDSelectionFormats.prototype.isBold = function (text, cmd) {\n        return text.search('\\\\' + cmd + '\\\\' + cmd + '') !== -1;\n    };\n    MDSelectionFormats.prototype.isItalic = function (text, cmd) {\n        return text.search('\\\\' + cmd) !== -1;\n    };\n    MDSelectionFormats.prototype.isMatch = function (text, cmd) {\n        var matchText = [''];\n        switch (cmd) {\n            case this.syntax.Italic:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.InlineCode:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n            case this.syntax.StrikeThrough:\n                matchText = text.match(this.singleCharRegx(cmd));\n                break;\n        }\n        return matchText;\n    };\n    MDSelectionFormats.prototype.multiCharRegx = function (cmd) {\n        return new RegExp('(\\\\' + cmd + '\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.singleCharRegx = function (cmd) {\n        return new RegExp('(\\\\' + cmd + ')', 'g');\n    };\n    MDSelectionFormats.prototype.isAppliedCommand = function (cmd) {\n        var selectCmd = '';\n        var isFormat = false;\n        var textArea = this.parent.element;\n        var start = textArea.selectionStart;\n        var splitAt = function (index) { return function (x) { return [x.slice(0, index), x.slice(index)]; }; };\n        var splitText = splitAt(start)(textArea.value);\n        var cmdB = this.syntax.Bold.substr(0, 1);\n        var cmdI = this.syntax.Italic;\n        var selectedText = this.parent.markdownSelection.getSelectedText(textArea);\n        if (selectedText !== '' && selectedText === selectedText.toLocaleUpperCase() && cmd === 'UpperCase') {\n            return true;\n        }\n        else if (selectedText === '') {\n            var beforeText = textArea.value.substr(splitText[0].length - 1, 1);\n            var afterText = splitText[1].substr(0, 1);\n            if ((beforeText !== '' && afterText !== '' && beforeText.match(/[a-z]/i)) &&\n                beforeText === beforeText.toLocaleUpperCase() && afterText === afterText.toLocaleUpperCase() && cmd === 'UpperCase') {\n                return true;\n            }\n        }\n        if (!(this.isBold(splitText[0], cmdB)) && !(this.isItalic(splitText[0], cmdI)) && !(this.isBold(splitText[1], cmdB)) &&\n            !(this.isItalic(splitText[1], cmdI))) {\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n                (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n                !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n                (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                    this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n                (splitText[0].match(/\\<sub>/g).length % 2 === 1 &&\n                    splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n                isFormat = true;\n            }\n            if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n                (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) &&\n                cmd === 'SuperScript') {\n                isFormat = true;\n            }\n        }\n        if ((this.isBold(splitText[0], cmdB) && this.isBold(splitText[1], cmdB)) &&\n            (splitText[0].match(this.multiCharRegx(cmdB)).length % 2 === 1 &&\n                splitText[1].match(this.multiCharRegx(cmdB)).length % 2 === 1) && cmd === 'Bold') {\n            isFormat = true;\n        }\n        splitText[0] = this.isBold(splitText[0], cmdB) ? splitText[0].replace(this.multiCharRegx(cmdB), '$%@') : splitText[0];\n        splitText[1] = this.isBold(splitText[1], cmdB) ? splitText[1].replace(this.multiCharRegx(cmdB), '$%@') : splitText[1];\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.Italic)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.Italic))) &&\n            (this.isMatch(splitText[0], this.syntax.Italic).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.Italic).length % 2 === 1) && cmd === 'Italic') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.StrikeThrough)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.StrikeThrough))) &&\n            (this.isMatch(splitText[0], this.syntax.StrikeThrough).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.StrikeThrough).length % 2 === 1) && cmd === 'StrikeThrough') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(this.isMatch(splitText[0], this.syntax.InlineCode)) &&\n            !isNullOrUndefined(this.isMatch(splitText[1], this.syntax.InlineCode))) &&\n            (this.isMatch(splitText[0], this.syntax.InlineCode).length % 2 === 1 &&\n                this.isMatch(splitText[1], this.syntax.InlineCode).length % 2 === 1) && cmd === 'InlineCode') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sub>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sub>/g))) &&\n            (splitText[0].match(/\\<sub>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sub>/g).length % 2 === 1) && cmd === 'SubScript') {\n            isFormat = true;\n        }\n        if ((!isNullOrUndefined(splitText[0].match(/\\<sup>/g)) && !isNullOrUndefined(splitText[1].match(/\\<\\/sup>/g))) &&\n            (splitText[0].match(/\\<sup>/g).length % 2 === 1 && splitText[1].match(/\\<\\/sup>/g).length % 2 === 1) && cmd === 'SuperScript') {\n            isFormat = true;\n        }\n        return isFormat;\n    };\n    MDSelectionFormats.prototype.applyCommands = function (e) {\n        this.currentAction = e.subCommand;\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var addedLength = 0;\n        var selection = this.parent.markdownSelection.getSelectedInlinePoints(textArea);\n        if (this.isAppliedCommand(e.subCommand) && selection.text !== '') {\n            var startCmd = this.syntax[e.subCommand];\n            var endCmd = e.subCommand === 'SubScript' ? '</sub>' :\n                e.subCommand === 'SuperScript' ? '</sup>' : this.syntax[e.subCommand];\n            var startLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 : startCmd.length;\n            var startNo = textArea.value.substr(0, selection.start).lastIndexOf(startCmd);\n            var endNo = textArea.value.substr(selection.end, textArea.value.length).indexOf(endCmd);\n            endNo = endNo + selection.end;\n            var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), startCmd, '', startNo, selection.start);\n            var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), endCmd, '', 0, endNo);\n            textArea.value = repStartText + selection.text + repEndText;\n            this.restore(textArea, start - startLength, end - startLength, e);\n            return;\n        }\n        if (selection.text !== '' && !this.isApplied(selection, e.subCommand)) {\n            addedLength = (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') ? 0 :\n                this.syntax[e.subCommand].length;\n            var repStart = textArea.value.substr(selection.start - this.syntax[e.subCommand].length, this.syntax[e.subCommand].length);\n            var repEnd = void 0;\n            if ((repStart === e.subCommand) || ((selection.start - this.syntax[e.subCommand].length ===\n                textArea.value.indexOf(this.syntax[e.subCommand])) && (selection.end === textArea.value.lastIndexOf(this.syntax[e.subCommand]) || selection.end === textArea.value.lastIndexOf('</' + this.syntax[e.subCommand].substring(1, 5))))) {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length + 1);\n                }\n                else {\n                    repEnd = textArea.value.substr(selection.end, this.syntax[e.subCommand].length);\n                }\n                var repStartText = this.replaceAt(textArea.value.substr(0, selection.start), repStart, '', selection.start - this.syntax[e.subCommand].length, selection.start);\n                var repEndText = this.replaceAt(textArea.value.substr(selection.end, textArea.value.length), repEnd, '', 0, repEnd.length);\n                textArea.value = repStartText + selection.text + repEndText;\n                this.restore(textArea, start - addedLength, end - addedLength, e);\n            }\n            else {\n                if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                    selection.text = this.syntax[e.subCommand] + selection.text\n                        + '</' + this.syntax[e.subCommand].substring(1, 5);\n                }\n                else if (e.subCommand === 'UpperCase' || e.subCommand === 'LowerCase') {\n                    selection.text = (e.subCommand === 'UpperCase') ? selection.text.toUpperCase()\n                        : selection.text.toLowerCase();\n                }\n                else {\n                    selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n                }\n                textArea.value = textArea.value.substr(0, selection.start) + selection.text +\n                    textArea.value.substr(selection.end, textArea.value.length);\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n        }\n        else if (e.subCommand !== 'UpperCase' && e.subCommand !== 'LowerCase') {\n            if (e.subCommand === 'SubScript' || e.subCommand === 'SuperScript') {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text\n                    + '</' + this.syntax[e.subCommand].substring(1, 5);\n            }\n            else {\n                selection.text = this.textReplace(selection.text, e.subCommand);\n                selection.text = this.syntax[e.subCommand] + selection.text + this.syntax[e.subCommand];\n            }\n            textArea.value = textArea.value.substr(0, selection.start)\n                + selection.text + textArea.value.substr(selection.end, textArea.value.length);\n            addedLength = this.syntax[e.subCommand].length;\n            if (selection.start === selection.end) {\n                this.restore(textArea, start + addedLength, end + addedLength, e);\n            }\n            else {\n                this.restore(textArea, start + addedLength, end - addedLength, e);\n            }\n        }\n        else {\n            this.restore(textArea, start, end, e);\n        }\n        this.parent.undoRedoManager.saveData();\n    };\n    MDSelectionFormats.prototype.replaceAt = function (input, search, replace, start, end) {\n        return input.slice(0, start)\n            + input.slice(start, end).replace(search, replace)\n            + input.slice(end);\n    };\n    MDSelectionFormats.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    MDSelectionFormats.prototype.textReplace = function (text, command) {\n        var regx = this.singleCharRegx(this.syntax[command]);\n        switch (command) {\n            case 'Bold':\n                regx = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                text = text.replace(regx, '');\n                break;\n            case 'Italic':\n                if (!this.isBold(text, this.syntax[command].substr(0, 1))) {\n                    text = text.replace(regx, '');\n                }\n                else {\n                    var regxB = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                    var repText = text;\n                    repText = repText.replace(regxB, '$%@').replace(regx, '');\n                    var regxTemp = new RegExp('\\\\$%@', 'g');\n                    text = repText.replace(regxTemp, this.syntax[command].substr(0, 1) + this.syntax[command].substr(0, 1));\n                }\n                break;\n            case 'StrikeThrough':\n                text = text.replace(regx, '');\n                break;\n            case 'InlineCode':\n                text = text.replace(regx, '');\n                break;\n            case 'SubScript':\n                text = text.replace(/<sub>/g, '').replace(/<\\/sub>/g, '');\n                break;\n            case 'SuperScript':\n                text = text.replace(/<sup>/g, '').replace(/<\\/sup>/g, '');\n                break;\n        }\n        return text;\n    };\n    MDSelectionFormats.prototype.isApplied = function (line, command) {\n        var regx = this.singleCharRegx(this.syntax[command]);\n        switch (command) {\n            case 'SubScript':\n            case 'SuperScript':\n                regx = this.singleCharRegx(this.syntax[command]);\n                return regx.test(line.text);\n            case 'Bold':\n            case 'StrikeThrough':\n                regx = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                return regx.test(line.text);\n            case 'UpperCase':\n            case 'LowerCase':\n                regx = new RegExp('^[' + this.syntax[command] + ']*$', 'g');\n                return regx.test(line.text);\n            case 'Italic':\n                var regTest = void 0;\n                var regxB = this.multiCharRegx(this.syntax[command].substr(0, 1));\n                if (regxB.test(line.text)) {\n                    var repText = line.text;\n                    repText = repText.replace(regxB, '$%#');\n                    regTest = regx.test(repText);\n                }\n                else {\n                    regTest = regx.test(line.text);\n                }\n                return regTest;\n            case 'InlineCode':\n                return regx.test(line.text);\n        }\n    };\n    return MDSelectionFormats;\n}());\nexport { MDSelectionFormats };\n","/**\n * Default Markdown formats config for adapter\n */\nexport var markdownFormatTags = {\n    'h6': '###### ',\n    'h5': '##### ',\n    'h4': '#### ',\n    'h3': '### ',\n    'h2': '## ',\n    'h1': '# ',\n    'blockquote': '> ',\n    'pre': '```\\n',\n    'p': ''\n};\n/**\n * Default selection formats config for adapter\n */\nexport var markdownSelectionTags = {\n    'Bold': '**',\n    'Italic': '*',\n    'StrikeThrough': '~~',\n    'InlineCode': '`',\n    'SubScript': '<sub>',\n    'SuperScript': '<sup>',\n    'UpperCase': 'A-Z',\n    'LowerCase': 'a-z'\n};\n/**\n * Default Markdown lists config for adapter\n */\nexport var markdownListsTags = {\n    'OL': '1. ',\n    'UL': '- ',\n};\n/**\n * Default html key config for adapter\n */\nexport var htmlKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'insert-table': 'ctrl+shift+e',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'underline': 'ctrl+u',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'indents': 'ctrl+]',\n    'outdents': 'ctrl+[',\n    'html-source': 'ctrl+shift+h',\n    'full-screen': 'ctrl+shift+f',\n    'decrease-fontsize': 'ctrl+shift+<',\n    'increase-fontsize': 'ctrl+shift+>',\n    'justify-center': 'ctrl+e',\n    'justify-full': 'ctrl+j',\n    'justify-left': 'ctrl+l',\n    'justify-right': 'ctrl+r',\n    'clear-format': 'ctrl+shift+r',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o',\n    'space': '32',\n    'enter': '13',\n    'tab': '9'\n};\n/**\n * Default  markdown key config for adapter\n */\nexport var markdownKeyConfig = {\n    'toolbar-focus': 'alt+f10',\n    'escape': '27',\n    'insert-link': 'ctrl+k',\n    'insert-image': 'ctrl+shift+i',\n    'insert-table': 'ctrl+shift+e',\n    'undo': 'ctrl+z',\n    'redo': 'ctrl+y',\n    'copy': 'ctrl+c',\n    'cut': 'ctrl+x',\n    'paste': 'ctrl+v',\n    'bold': 'ctrl+b',\n    'italic': 'ctrl+i',\n    'strikethrough': 'ctrl+shift+s',\n    'uppercase': 'ctrl+shift+u',\n    'lowercase': 'ctrl+shift+l',\n    'superscript': 'ctrl+shift+=',\n    'subscript': 'ctrl+=',\n    'full-screen': 'ctrl+shift+f',\n    'ordered-list': 'ctrl+shift+o',\n    'unordered-list': 'ctrl+alt+o'\n};\n/**\n * PasteCleanup Grouping of similar functionality tags\n */\nexport var pasteCleanupGroupingTags = {\n    'b': ['strong'],\n    'strong': ['b'],\n    'i': ['emp', 'cite'],\n    'emp': ['i', 'cite'],\n    'cite': ['i', 'emp']\n};\n/**\n * PasteCleanup Grouping of similar functionality tags\n */\nexport var listConversionFilters = {\n    'first': 'MsoListParagraphCxSpFirst',\n    'middle': 'MsoListParagraphCxSpMiddle',\n    'last': 'MsoListParagraphCxSpLast'\n};\n/**\n * Dom-Node Grouping of self closing tags\n * @hidden\n */\nexport var selfClosingTags = [\n    'BR',\n    'IMG'\n];\n","import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoCommands = /** @class */ (function () {\n    function UndoRedoCommands(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    UndoRedoCommands.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoCommands.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoCommands.prototype.removeEventListener = function () {\n        var debounceListener = debounce(this.keyUp, 300);\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, debounceListener);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n        this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoCommands.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    UndoRedoCommands.prototype.keyDown = function (e) {\n        var event = e.event;\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoCommands.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * MD collection stored string format.\n     * @method saveData\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.saveData = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var textValue = this.parent.element.value;\n        var changEle = { text: textValue, start: start, end: end };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].start === start) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].end === end)) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     * @method undo\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            this.currentAction = 'Undo';\n            var start = this.undoRedoStack[this.steps - 1].start;\n            var end = this.undoRedoStack[this.steps - 1].end;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.element.value = removedContent;\n            this.parent.element.focus();\n            this.steps--;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    /**\n     * Redo the editable text.\n     * @method redo\n     * @return {void}\n     */\n    UndoRedoCommands.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            this.currentAction = 'Redo';\n            var start = this.undoRedoStack[this.steps + 1].start;\n            var end = this.undoRedoStack[this.steps + 1].end;\n            this.parent.element.value = this.undoRedoStack[this.steps + 1].text;\n            this.parent.element.focus();\n            this.steps++;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    UndoRedoCommands.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    UndoRedoCommands.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoCommands;\n}());\nexport { UndoRedoCommands };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar MDLink = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDLink(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDLink.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK_COMMAND, this.createLink, this);\n    };\n    MDLink.prototype.createLink = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = (e.subCommand === 'Image') ? this.selection.getSelectedText(textArea) : e.item.text;\n        var startOffset = (e.subCommand === 'Image') ? (start + 2) : (start + 1);\n        var endOffset = (e.subCommand === 'Image') ? (end + 2) : (end + 1);\n        text = (e.subCommand === 'Image') ? '![' + text + '](' + e.item.url + ')' : '[' + text + '](' + e.item.url + ')';\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, startOffset, endOffset);\n        this.restore(textArea, startOffset, endOffset, e);\n    };\n    MDLink.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDLink;\n}());\nexport { MDLink };\n","import * as CONSTANT from './../base/constant';\nimport { extend } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar MDTable = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function MDTable(options) {\n        extend(this, this, options, true);\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    MDTable.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.MD_TABLE, this.createTable, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    MDTable.prototype.removeEventListener = function () {\n        this.parent.observer.off(CONSTANT.MD_TABLE, this.createTable);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    MDTable.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    MDTable.prototype.onKeyDown = function (e) {\n        if (e.event.action === 'insert-table') {\n            e.item = e.value;\n            this.createTable(e);\n        }\n    };\n    MDTable.prototype.createTable = function (e) {\n        this.element = this.parent.element;\n        var start = this.element.selectionStart;\n        var end = this.element.selectionEnd;\n        var textAreaInitial;\n        textAreaInitial = this.element.value;\n        this.locale = e;\n        this.selection.save(start, end);\n        this.restore(this.element.selectionStart, this.element.selectionEnd, null);\n        this.insertTable(start, end, textAreaInitial, e);\n    };\n    MDTable.prototype.getTable = function () {\n        var table = '';\n        table += this.textNonEmpty();\n        table += this.tableHeader(this.locale);\n        table += this.tableCell(this.locale);\n        return table;\n    };\n    MDTable.prototype.tableHeader = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                if (i === 1) {\n                    text += e.item.headingText + ' ' + j + '|';\n                }\n                else {\n                    text += '---------|';\n                }\n            }\n            text += this.insertLine();\n        }\n        return text;\n    };\n    MDTable.prototype.tableCell = function (e) {\n        var text = '';\n        for (var i = 1; i <= 2; i++) {\n            text += '|';\n            for (var j = 1; j <= 2; j++) {\n                text += e.item.colText + ' ' + this.convertToLetters(i) + j + '|';\n            }\n            text += this.insertLine();\n        }\n        text += this.insertLine();\n        return text;\n    };\n    MDTable.prototype.insertLine = function () {\n        var dummyElement = document.createElement('div');\n        dummyElement.innerHTML = '\\n';\n        return dummyElement.textContent;\n    };\n    MDTable.prototype.insertTable = function (start, end, textAreaInitial, e) {\n        var parentText = this.selection.getSelectedParentPoints(this.element);\n        var lastLineSplit = parentText[parentText.length - 1].text.split(' ', 2);\n        var syntaxArr = this.getFormatTag();\n        var syntaxCount = 0;\n        if (lastLineSplit.length < 2) {\n            this.element.value = this.updateValue(this.getTable());\n            this.makeSelection(textAreaInitial, start, end);\n        }\n        else {\n            if (this.ensureFormatApply(parentText[parentText.length - 1].text)) {\n                this.checkValid(start, end, this.getTable(), textAreaInitial, e, lastLineSplit, parentText, syntaxArr);\n            }\n            else {\n                this.element.value = this.updateValue(this.getTable());\n                this.makeSelection(textAreaInitial, start, end);\n            }\n        }\n        this.restore(this.element.selectionStart, this.element.selectionEnd, e);\n    };\n    MDTable.prototype.makeSelection = function (textAreaInitial, start, end) {\n        end = start + (textAreaInitial.length > 0 ? 12 : 10); //end is added 12 or 10 because to make the table heading selected\n        start += textAreaInitial.length > 0 ? 3 : 1; // Start is added 3 or 1 because new lines are added when inserting table\n        this.selection.setSelection(this.element, start, end);\n    };\n    MDTable.prototype.getFormatTag = function () {\n        var syntaxFormatKey = Object.keys(this.syntaxTag.Formats);\n        var syntaxListKey = Object.keys(this.syntaxTag.List);\n        var syntaxArr = [];\n        for (var i = 0; i < syntaxFormatKey.length; i++) {\n            syntaxArr.push(this.syntaxTag.Formats[syntaxFormatKey[i]]);\n        }\n        for (var j = 0; j < syntaxListKey.length; j++) {\n            syntaxArr.push(this.syntaxTag.List[syntaxListKey[j]]);\n        }\n        return syntaxArr;\n    };\n    MDTable.prototype.ensureFormatApply = function (line) {\n        var formatTags = this.getFormatTag();\n        var formatSplitZero = line.split(' ', 2)[0] + ' ';\n        for (var i = 0; i < formatTags.length; i++) {\n            if (formatSplitZero === formatTags[i]) {\n                return true;\n            }\n        }\n        return false;\n    };\n    MDTable.prototype.ensureStartValid = function (firstLine, parentText) {\n        var firstLineSplit = parentText[0].text.split(' ', 2);\n        for (var i = firstLine + 1; i <= firstLine + firstLineSplit[0].length + 1; i++) {\n            if (this.element.selectionStart === i || this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.ensureEndValid = function (lastLine, formatSplitLength) {\n        for (var i = lastLine + 1; i <= lastLine + formatSplitLength + 1; i++) {\n            if (this.element.selectionEnd === i) {\n                return false;\n            }\n        }\n        return true;\n    };\n    MDTable.prototype.updateValueWithFormat = function (formatSplit, text) {\n        var textApplyFormat = this.element.value.substring(this.element.selectionEnd, this.element.value.length);\n        text += textApplyFormat.replace(textApplyFormat, (formatSplit[0] + ' ' + textApplyFormat));\n        return this.element.value.substr(0, this.element.selectionStart) + text;\n    };\n    MDTable.prototype.updateValue = function (text) {\n        return this.element.value.substr(0, this.element.selectionStart) + text +\n            this.element.value.substr(this.element.selectionEnd, this.element.value.length);\n    };\n    MDTable.prototype.checkValid = function (start, end, text, textAreaInitial, e, formatSplit, parentText, syntaxArr) {\n        if (this.ensureStartValid(parentText[0].start, parentText) &&\n            this.ensureEndValid(parentText[parentText.length - 1].start, formatSplit[0].length)) {\n            if (start === parentText[0].start) {\n                if (start !== end && end !== (parentText[parentText.length - 1].end - 1)) {\n                    this.element.value = this.updateValueWithFormat(formatSplit, text);\n                }\n                else {\n                    this.element.value = this.updateValue(text);\n                }\n            }\n            else if (end === parentText[parentText.length - 1].end - 1) {\n                this.element.value = this.updateValue(text);\n            }\n            else {\n                this.element.value = this.updateValueWithFormat(formatSplit, text);\n            }\n            this.makeSelection(textAreaInitial, start, end);\n        }\n    };\n    MDTable.prototype.convertToLetters = function (rowNumber) {\n        var baseChar = ('A').charCodeAt(0);\n        var letters = '';\n        do {\n            rowNumber -= 1;\n            letters = String.fromCharCode(baseChar + (rowNumber % 26)) + letters;\n            rowNumber = (rowNumber / 26) >> 0;\n        } while (rowNumber > 0);\n        return letters;\n    };\n    MDTable.prototype.textNonEmpty = function () {\n        var emptyText = '';\n        if (this.isCursorBased() || this.isSelectionBased()) {\n            if (this.element.value.length > 0) {\n                emptyText += this.insertLine();\n                emptyText += this.insertLine(); // to append two new line when textarea having content.               \n            }\n        }\n        return emptyText;\n    };\n    MDTable.prototype.isCursorBased = function () {\n        return this.element.selectionStart === this.element.selectionEnd;\n    };\n    MDTable.prototype.isSelectionBased = function () {\n        return this.element.selectionStart !== this.element.selectionEnd;\n    };\n    MDTable.prototype.restore = function (start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(this.element);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(this.element),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return MDTable;\n}());\nexport { MDTable };\n","import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n * @hidden\n */\nvar ClearFormat = /** @class */ (function () {\n    /**\n     * Constructor for creating the clear format plugin\n     * @hidden\n     */\n    function ClearFormat(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    ClearFormat.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n    };\n    ClearFormat.prototype.replaceRegex = function (data) {\n        return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&')\n            .replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^')\n            .replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.')\n            .replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?')\n            .replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-')\n            .replace(/\\&/ig, '\\\\&');\n    };\n    ClearFormat.prototype.clearSelectionTags = function (text) {\n        var data = this.parent.selectionTags;\n        var keys = Object.keys(data);\n        for (var num = 0; num < keys.length; num++) {\n            var key = keys[num];\n            if (data.hasOwnProperty(key) && data[key] !== '') {\n                var expString = this.replaceRegex(data[key]);\n                var regExp = void 0;\n                var startExp = void 0;\n                var endExp = void 0;\n                if (data[key] === '<sup>') {\n                    regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n                }\n                else if (data[key] === '<sub>') {\n                    regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n                }\n                else {\n                    regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n                }\n                startExp = data[key].length;\n                endExp = (data[key] === '<sup>' || data[key] === '<sub>') ? data[key].length + 1 : data[key].length;\n                var val = text.match(regExp);\n                for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n                    text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n                }\n            }\n        }\n        return text;\n    };\n    ClearFormat.prototype.clearFormatTags = function (text) {\n        var lines = text.split('\\n');\n        return this.clearFormatLines(lines);\n    };\n    ClearFormat.prototype.clearFormatLines = function (lines) {\n        var tags = [this.parent.formatTags, this.parent.listTags];\n        var str = '';\n        for (var len = 0; len < lines.length; len++) {\n            for (var num = 0; num < tags.length; num++) {\n                var data = tags[num];\n                var keys = Object.keys(data);\n                for (var index = 0; index < keys.length; index++) {\n                    var key = keys[index];\n                    if (data.hasOwnProperty(key) && data[key] !== '') {\n                        if (lines[len].indexOf(data[key]) === 0) {\n                            lines[len] = lines[len].replace(data[key], '');\n                            lines[len] = this.clearFormatLines([lines[len]]);\n                        }\n                    }\n                }\n            }\n            str = str + lines[len] + ((len !== lines.length - 1) ? '\\n' : '');\n        }\n        return str;\n    };\n    ClearFormat.prototype.clear = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = this.selection.getSelectedText(textArea);\n        text = this.clearSelectionTags(text);\n        text = this.clearFormatTags(text);\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n        this.restore(textArea, start, start + text.length, e);\n    };\n    ClearFormat.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { MDLists } from './../plugin/lists';\nimport { MDFormats } from './../plugin/formats';\nimport { MDSelectionFormats } from './../plugin/md-selection-formats';\nimport { MarkdownSelection } from './../plugin/markdown-selection';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownFormatTags, markdownListsTags, markdownSelectionTags } from './../../common/config';\nimport { UndoRedoCommands } from './../plugin/undo';\nimport { MDLink } from './../plugin/link';\nimport { MDTable } from './../plugin/table';\nimport * as EVENTS from './../../common/constant';\nimport { ClearFormat } from './../plugin/clearformat';\n/**\n * MarkdownParser internal component\n * @hidden\n */\nvar MarkdownParser = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function MarkdownParser(options) {\n        this.initialize();\n        extend(this, this, options, true);\n        this.observer = new Observer(this);\n        this.markdownSelection = new MarkdownSelection();\n        this.listObj = new MDLists({ parent: this, syntax: this.listTags });\n        this.formatObj = new MDFormats({ parent: this, syntax: this.formatTags });\n        this.undoRedoManager = new UndoRedoCommands(this, options.options);\n        this.mdSelectionFormats = new MDSelectionFormats({ parent: this, syntax: this.selectionTags });\n        this.linkObj = new MDLink(this);\n        this.tableObj = new MDTable({ parent: this, syntaxTag: ({ Formats: this.formatTags, List: this.listTags }) });\n        this.clearObj = new ClearFormat(this);\n        this.wireEvents();\n    }\n    MarkdownParser.prototype.initialize = function () {\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    MarkdownParser.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n    };\n    MarkdownParser.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    MarkdownParser.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    MarkdownParser.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    MarkdownParser.prototype.execCommand = function (command, value, event, callBack, text, exeValue) {\n        switch (command.toLocaleLowerCase()) {\n            case 'lists':\n                this.observer.notify(CONSTANT.LISTS_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.selectionCommand, { subCommand: value, event: event, callBack: callBack });\n                break;\n            case 'links':\n            case 'images':\n                this.observer.notify(CONSTANT.LINK_COMMAND, { subCommand: value, event: event, callBack: callBack, item: exeValue });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.MD_TABLE, { subCommand: value, item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_COMMAND, { subCommand: value, event: event, callBack: callBack });\n                break;\n        }\n    };\n    return MarkdownParser;\n}());\nexport { MarkdownParser };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { MarkdownParser } from './../../markdown-parser/base/markdown-parser';\nimport { extend } from '@syncfusion/ej2-base';\nimport { markdownKeyConfig, markdownListsTags, markdownFormatTags, markdownSelectionTags } from './../../common/config';\n/**\n * Markdown adapter\n * @hidden\n */\nvar MarkdownFormatter = /** @class */ (function (_super) {\n    __extends(MarkdownFormatter, _super);\n    function MarkdownFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (options && _this.element) {\n            _this.updateFormatter(_this.element, document, options.options);\n        }\n        return _this;\n    }\n    MarkdownFormatter.prototype.initialize = function () {\n        this.keyConfig = markdownKeyConfig;\n        this.formatTags = markdownFormatTags;\n        this.listTags = markdownListsTags;\n        this.selectionTags = markdownSelectionTags;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     * @param  {Element} editElement\n     * @param  {Document} doc\n     */\n    MarkdownFormatter.prototype.updateFormatter = function (editElement, doc, options) {\n        if (editElement) {\n            this.editorManager = new MarkdownParser({\n                element: editElement,\n                formatTags: this.formatTags,\n                listTags: this.listTags,\n                selectionTags: this.selectionTags,\n                options: options\n            });\n        }\n    };\n    return MarkdownFormatter;\n}(Formatter));\nexport { MarkdownFormatter };\n","/**\n * Markdown module is used to render RichTextEditor as Markdown editor content\n * @hidden\n */\nvar MarkdownRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function MarkdownRender(parent) {\n        this.parent = parent;\n    }\n    /**\n     * The function is used to render RichTextEditor content div\n     */\n    MarkdownRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { id: this.parent.getID() + '_view', className: 'e-rte-content' });\n        this.editableElement = this.parent.createElement('textarea', {\n            className: 'e-content',\n            id: this.parent.getID() + '_editable-content'\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     * @return {Element}\n     */\n    MarkdownRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    MarkdownRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    MarkdownRender.prototype.getText = function () {\n        return this.getEditPanel().value;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     * @param  {Element} panel\n     */\n    MarkdownRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @param  {Document}\n     */\n    MarkdownRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return MarkdownRender;\n}());\nexport { MarkdownRender };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { MarkdownFormatter } from '../formatter/markdown-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { MarkdownToolbarStatus } from './markdown-toolbar-status';\nimport { MarkdownRender } from '../renderer/markdown-renderer';\nimport { MarkdownSelection } from './../../markdown-parser/plugin/markdown-selection';\n/**\n * `MarkdownEditor` module is used to markdown editor\n */\nvar MarkdownEditor = /** @class */ (function () {\n    function MarkdownEditor(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     * @method destroy\n     * @return {void}\n     */\n    MarkdownEditor.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    MarkdownEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.saveSelection = new MarkdownSelection();\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.markdownToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n    };\n    MarkdownEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            this.parent.contentModule.getEditPanel().setAttribute('readonly', 'readonly');\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            this.parent.contentModule.getEditPanel().removeAttribute('readonly');\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    MarkdownEditor.prototype.onSelectionSave = function () {\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.save(textArea.selectionStart, textArea.selectionEnd);\n    };\n    MarkdownEditor.prototype.onSelectionRestore = function (e) {\n        this.contentRenderer.getEditPanel().focus();\n        var textArea = this.parent.contentModule.getEditPanel();\n        this.saveSelection.restore(textArea);\n    };\n    MarkdownEditor.prototype.onToolbarClick = function (args) {\n        var text;\n        var startOffset;\n        var endOffset;\n        var item = args.item;\n        if (this.parent.editorMode === 'Markdown') {\n            var textArea = this.parent.contentModule.getEditPanel();\n            textArea.focus();\n            startOffset = textArea.selectionStart;\n            endOffset = textArea.selectionEnd;\n            text = textArea.value.substring(startOffset, endOffset);\n        }\n        switch (item.subCommand) {\n            case 'Maximize':\n                this.parent.notify(events.enableFullScreen, { args: args });\n                break;\n            case 'Minimize':\n                this.parent.notify(events.disableFullScreen, { args: args });\n                break;\n            case 'CreateLink':\n                this.parent.notify(events.insertLink, { member: 'link', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'Image':\n                this.parent.notify(events.insertImage, { member: 'image', args: args, text: text, module: 'Markdown' });\n                break;\n            case 'CreateTable':\n                var tableConstant = {\n                    'headingText': this.parent.localeObj.getConstant('TableHeadingText'),\n                    'colText': this.parent.localeObj.getConstant('TableColText')\n                };\n                this.parent.formatter.process(this.parent, args, args.originalEvent, tableConstant);\n                break;\n            default:\n                this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                break;\n        }\n    };\n    MarkdownEditor.prototype.instantiateRenderer = function () {\n        this.renderFactory.addRenderer(RenderType.Content, new MarkdownRender(this.parent));\n    };\n    MarkdownEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.markdownToolbarClick, this.onToolbarClick);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n    };\n    MarkdownEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            this.parent.formatter = new MarkdownFormatter({\n                element: editElement,\n                options: option\n            });\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new MarkdownToolbarStatus(this.parent);\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    MarkdownEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    MarkdownEditor.prototype.getModuleName = function () {\n        return 'markdownEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    MarkdownEditor.prototype.selectAll = function () {\n        this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.contentModule.getEditPanel(), 0, this.parent.contentModule.getEditPanel().value.length);\n    };\n    /**\n     * For get a selected text in RTE\n     * @private\n     */\n    MarkdownEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()));\n    };\n    return MarkdownEditor;\n}());\nexport { MarkdownEditor };\n","/**\n * Constant values for EditorManager\n */\n/* Image plugin events\n * @hidden\n */\nexport var IMAGE = 'INSERT-IMAGE';\nexport var TABLE = 'INSERT-TABLE';\nexport var LINK = 'INSERT-LINK';\nexport var INSERT_ROW = 'INSERT-ROW';\nexport var INSERT_COLUMN = 'INSERT-COLUMN';\nexport var DELETEROW = 'DELETE-ROW';\nexport var DELETECOLUMN = 'DELETE-COLUMN';\nexport var REMOVETABLE = 'REMOVE-TABLE';\nexport var TABLEHEADER = 'TABLE-HEADER';\nexport var TABLE_VERTICAL_ALIGN = 'TABLE_VERTICAL_ALIGN';\n/* Alignments plugin events\n * @hidden\n */\nexport var ALIGNMENT_TYPE = 'alignment-type';\n/* Indents plugin events\n * @hidden\n */\nexport var INDENT_TYPE = 'indent-type';\n/* Constant tag names\n */\n/** @hidden */\nexport var DEFAULT_TAG = 'p';\n/** @hidden */\nexport var BLOCK_TAGS = ['address', 'article', 'aside', 'audio', 'blockquote',\n    'canvas', 'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n    'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'li', 'main', 'nav',\n    'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr', 'ul', 'video'];\n/** @hidden */\nexport var IGNORE_BLOCK_TAGS = ['td', 'th'];\n/** @hidden */\nexport var TABLE_BLOCK_TAGS = ['table', 'tbody', 'td', 'tfoot', 'th',\n    'thead', 'tr'];\n/* Selection plugin events\n * @hidden\n */\nexport var SELECTION_TYPE = 'selection-type';\n/* Insert HTML plugin events\n * @hidden\n */\nexport var INSERTHTML_TYPE = 'inserthtml-type';\n/* Insert Text plugin events\n * @hidden\n */\nexport var INSERT_TEXT_TYPE = 'insert-text-type';\n/* Clear Format HTML plugin events\n * @hidden\n */\nexport var CLEAR_TYPE = 'clear-type';\n","/**\n * `Selection` module is used to handle RTE Selections.\n */\nvar NodeSelection = /** @class */ (function () {\n    function NodeSelection() {\n        this.startNodeName = [];\n        this.endNodeName = [];\n    }\n    NodeSelection.prototype.saveInstance = function (range, body) {\n        this.range = range.cloneRange();\n        this.rootNode = this.documentFromRange(range);\n        this.body = body;\n        this.startContainer = this.getNodeArray(range.startContainer, true);\n        this.endContainer = this.getNodeArray(range.endContainer, false);\n        this.startOffset = range.startOffset;\n        this.endOffset = range.endOffset;\n        this.html = this.body.innerHTML;\n        return this;\n    };\n    NodeSelection.prototype.documentFromRange = function (range) {\n        return (9 === range.startContainer.nodeType) ? range.startContainer : range.startContainer.ownerDocument;\n    };\n    NodeSelection.prototype.getRange = function (docElement) {\n        var select = this.get(docElement);\n        var range = select && select.rangeCount > 0 ? select.getRangeAt(select.rangeCount - 1) : docElement.createRange();\n        return (range.startContainer !== docElement || range.endContainer !== docElement\n            || range.startOffset || range.endOffset || (range.setStart(docElement.body, 0),\n            range.collapse(!0)),\n            range);\n    };\n    NodeSelection.prototype.get = function (docElement) {\n        return docElement.defaultView.getSelection();\n    };\n    NodeSelection.prototype.save = function (range, docElement) {\n        range = (range) ? range.cloneRange() : this.getRange(docElement);\n        return this.saveInstance(range, docElement.body);\n    };\n    NodeSelection.prototype.getIndex = function (node) {\n        var index;\n        var num = 0;\n        node = !node.previousSibling && node.tagName === 'BR' ? node : node.previousSibling;\n        if (node) {\n            for (var type = node.nodeType; node; null) {\n                index = node.nodeType;\n                num++;\n                type = index;\n                node = node.previousSibling;\n            }\n        }\n        return num;\n    };\n    NodeSelection.prototype.isChildNode = function (nodeCollection, parentNode) {\n        for (var index = 0; index < parentNode.childNodes.length; index++) {\n            if (nodeCollection.indexOf(parentNode.childNodes[index]) > -1) {\n                return true;\n            }\n        }\n        return false;\n    };\n    NodeSelection.prototype.getNode = function (startNode, endNode, nodeCollection) {\n        if (endNode === startNode &&\n            (startNode.nodeType === 3 || !startNode.firstChild || nodeCollection.indexOf(startNode.firstChild) !== -1\n                || this.isChildNode(nodeCollection, startNode))) {\n            return null;\n        }\n        if (nodeCollection.indexOf(startNode.firstChild) === -1 && startNode.firstChild && !this.isChildNode(nodeCollection, startNode)) {\n            return startNode.firstChild;\n        }\n        if (startNode.nextSibling) {\n            return startNode.nextSibling;\n        }\n        if (!startNode.parentNode) {\n            return null;\n        }\n        else {\n            return startNode.parentNode;\n        }\n    };\n    NodeSelection.prototype.getNodeCollection = function (range) {\n        var startNode = range.startContainer.childNodes[range.startOffset]\n            || range.startContainer;\n        var endNode = range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer;\n        if (startNode === endNode && startNode.childNodes.length === 0) {\n            return [startNode];\n        }\n        var nodeCollection = [];\n        do {\n            if (nodeCollection.indexOf(startNode) === -1) {\n                nodeCollection.push(startNode);\n            }\n            startNode = this.getNode(startNode, endNode, nodeCollection);\n        } while (startNode);\n        return nodeCollection;\n    };\n    NodeSelection.prototype.getParentNodeCollection = function (range) {\n        return this.getParentNodes(this.getNodeCollection(range), range);\n    };\n    NodeSelection.prototype.getParentNodes = function (nodeCollection, range) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection.indexOf(nodeCollection[index].parentNode) !== -1)\n                || (nodeCollection[index].nodeType === 3 &&\n                    range.startContainer !== range.endContainer &&\n                    range.startContainer.parentNode !== range.endContainer.parentNode)) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n            else if (nodeCollection[index].nodeType === 3) {\n                nodeCollection[index] = nodeCollection[index].parentNode;\n            }\n        }\n        return nodeCollection;\n    };\n    NodeSelection.prototype.getSelectionNodeCollection = function (range) {\n        return this.getSelectionNodes(this.getNodeCollection(range));\n    };\n    NodeSelection.prototype.getSelectionNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if (nodeCollection[index].nodeType !== 3 || nodeCollection[index].textContent.trim() === '') {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    NodeSelection.prototype.getInsertNodeCollection = function (range) {\n        return this.getInsertNodes(this.getNodeCollection(range));\n    };\n    NodeSelection.prototype.getInsertNodes = function (nodeCollection) {\n        nodeCollection = nodeCollection.reverse();\n        for (var index = 0; index < nodeCollection.length; index++) {\n            if ((nodeCollection[index].childNodes.length !== 0 &&\n                nodeCollection[index].nodeType !== 3) ||\n                (nodeCollection[index].nodeType === 3 &&\n                    nodeCollection[index].textContent === '')) {\n                nodeCollection.splice(index, 1);\n                index--;\n            }\n        }\n        return nodeCollection.reverse();\n    };\n    NodeSelection.prototype.getNodeArray = function (node, isStart, root) {\n        var array = [];\n        ((isStart) ? (this.startNodeName = []) : (this.endNodeName = []));\n        for (; node !== (root ? root : this.rootNode); null) {\n            (isStart) ? this.startNodeName.push(node.nodeName.toLowerCase()) : this.endNodeName.push(node.nodeName.toLowerCase());\n            array.push(this.getIndex(node));\n            node = node.parentNode;\n        }\n        return array;\n    };\n    NodeSelection.prototype.setRangePoint = function (range, isvalid, num, size) {\n        var node = this.rootNode;\n        var index = num.length;\n        var constant = size;\n        for (; index--; null) {\n            node = node && node.childNodes[num[index]];\n        }\n        if (node && constant >= 0) {\n            range[isvalid ? 'setStart' : 'setEnd'](node, constant);\n        }\n        return range;\n    };\n    NodeSelection.prototype.restore = function () {\n        var range = this.range.cloneRange();\n        range = this.setRangePoint(range, true, this.startContainer, this.startOffset);\n        range = this.setRangePoint(range, false, this.endContainer, this.endOffset);\n        this.selectRange(this.rootNode, range);\n        return range;\n    };\n    NodeSelection.prototype.selectRange = function (docElement, range) {\n        this.setRange(docElement, range);\n        this.save(range, docElement);\n    };\n    NodeSelection.prototype.setRange = function (docElement, range) {\n        var selection = this.get(docElement);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    NodeSelection.prototype.setSelectionText = function (docElement, startNode, endNode, startIndex, endIndex) {\n        var range = docElement.createRange();\n        range.setStart(startNode, startIndex);\n        range.setEnd(endNode, endIndex);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.setSelectionContents = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNode(element);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.setSelectionNode = function (docElement, element) {\n        var range = docElement.createRange();\n        range.selectNodeContents(element);\n        this.setRange(docElement, range);\n    };\n    NodeSelection.prototype.getSelectedNodes = function (docElement) {\n        return this.getNodeCollection(this.getRange(docElement));\n    };\n    NodeSelection.prototype.Clear = function (docElement) {\n        this.get(docElement).removeAllRanges();\n    };\n    NodeSelection.prototype.insertParentNode = function (docElement, newNode, range) {\n        range.surroundContents(newNode);\n        this.selectRange(docElement, range);\n    };\n    NodeSelection.prototype.setCursorPoint = function (docElement, element, point) {\n        var range = docElement.createRange();\n        var selection = docElement.defaultView.getSelection();\n        range.setStart(element, point);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    };\n    return NodeSelection;\n}());\nexport { NodeSelection };\n","import * as CONSTANT from './../base/constant';\nimport { append, detach, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/index';\nimport { selfClosingTags } from '../../common/config';\nexport var markerClassName = {\n    startSelection: 'e-editor-select-start',\n    endSelection: 'e-editor-select-end'\n};\n/**\n * DOMNode internal plugin\n * @hidden\n */\nvar DOMNode = /** @class */ (function () {\n    /**\n     * Constructor for creating the DOMNode plugin\n     * @hidden\n     */\n    function DOMNode(parent, currentDocument) {\n        this.parent = parent;\n        this.nodeSelection = new NodeSelection();\n        this.currentDocument = currentDocument;\n    }\n    DOMNode.prototype.contents = function (element) {\n        return (element && 'IFRAME' !== element.tagName ? Array.prototype.slice.call(element.childNodes || []) : []);\n    };\n    DOMNode.prototype.isBlockNode = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && CONSTANT.BLOCK_TAGS.indexOf(element.tagName.toLowerCase()) >= 0));\n    };\n    DOMNode.prototype.isLink = function (element) {\n        return (!!element && (element.nodeType === Node.ELEMENT_NODE && 'a' === element.tagName.toLowerCase()));\n    };\n    DOMNode.prototype.blockParentNode = function (element) {\n        for (; element && element.parentNode !== this.parent && ((!element.parentNode ||\n            !this.hasClass(element.parentNode, 'e-node-inner'))); null) {\n            element = element.parentNode;\n            if (this.isBlockNode(element)) {\n                return element;\n            }\n        }\n        return element;\n    };\n    DOMNode.prototype.rawAttributes = function (element) {\n        var rawAttr = {};\n        var attributes = element.attributes;\n        if (attributes.length > 0) {\n            for (var d = 0; d < attributes.length; d++) {\n                var e = attributes[d];\n                rawAttr[e.nodeName] = e.value;\n            }\n        }\n        return rawAttr;\n    };\n    DOMNode.prototype.attributes = function (element) {\n        if (!element) {\n            return '';\n        }\n        var attr = '';\n        var rawAttr = this.rawAttributes(element);\n        var orderRawAttr = Object.keys(rawAttr).sort();\n        for (var e = 0; e < orderRawAttr.length; e++) {\n            var attrKey = orderRawAttr[e];\n            var attrValue = rawAttr[attrKey];\n            /* tslint:disable */\n            if (attrValue.indexOf(\"'\") < 0 && attrValue.indexOf('\"') >= 0) {\n                attr += ' ' + attrKey + \"='\" + attrValue + \"'\";\n            }\n            else if (attrValue.indexOf('\"') >= 0 && attrValue.indexOf(\"'\") >= 0) {\n                /* tslint:enable */\n                attrValue = attrValue.replace(/\"/g, '&quot;');\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n            else {\n                attr += ' ' + attrKey + '=\"' + attrValue + '\"';\n            }\n        }\n        return attr;\n    };\n    DOMNode.prototype.clearAttributes = function (element) {\n        for (var attr = element.attributes, c = attr.length - 1; c >= 0; c--) {\n            var key = attr[c];\n            element.removeAttribute(key.nodeName);\n        }\n    };\n    DOMNode.prototype.openTagString = function (element) {\n        return '<' + element.tagName.toLowerCase() + this.attributes(element) + '>';\n    };\n    DOMNode.prototype.closeTagString = function (element) {\n        return '</' + element.tagName.toLowerCase() + '>';\n    };\n    DOMNode.prototype.createTagString = function (tagName, relativeElement, innerHTML) {\n        return '<' + tagName.toLowerCase() + this.attributes(relativeElement) + '>' + innerHTML + '</' + tagName.toLowerCase() + '>';\n    };\n    DOMNode.prototype.isList = function (element) {\n        return !!element && ['UL', 'OL'].indexOf(element.tagName) >= 0;\n    };\n    DOMNode.prototype.isElement = function (element) {\n        return element === this.parent;\n    };\n    DOMNode.prototype.isEditable = function (element) {\n        return ((!element.getAttribute || element.getAttribute('contenteditable') === 'true')\n            && ['STYLE', 'SCRIPT'].indexOf(element.tagName) < 0);\n    };\n    DOMNode.prototype.hasClass = function (element, className) {\n        return element && element.classList && element.classList.contains(className);\n    };\n    DOMNode.prototype.replaceWith = function (element, value) {\n        var parentNode = element.parentNode;\n        parentNode.insertBefore(this.parseHTMLFragment(value), element);\n        detach(element);\n    };\n    DOMNode.prototype.parseHTMLFragment = function (value) {\n        /* tslint:disable */\n        var temp = createElement('template');\n        temp.innerHTML = value;\n        if (temp.content instanceof DocumentFragment) {\n            return temp.content;\n        }\n        else {\n            return document.createRange().createContextualFragment(value);\n        }\n        /* tslint:enable */\n    };\n    DOMNode.prototype.wrap = function (element, wrapper) {\n        element.parentNode.insertBefore(wrapper, element);\n        wrapper = element.previousSibling;\n        wrapper.appendChild(element);\n        return wrapper;\n    };\n    DOMNode.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    DOMNode.prototype.wrapInner = function (parent, wrapper) {\n        parent.appendChild(wrapper);\n        wrapper = parent.querySelector('.e-rte-wrap-inner');\n        wrapper.classList.remove('e-rte-wrap-inner');\n        if (wrapper.classList.length === 0) {\n            wrapper.removeAttribute('class');\n        }\n        while (parent.firstChild !== wrapper) {\n            wrapper.appendChild(parent.firstChild);\n        }\n        return wrapper;\n    };\n    DOMNode.prototype.unWrap = function (element) {\n        var parent = element.parentNode;\n        var unWrapNode = [];\n        while (element.firstChild) {\n            unWrapNode.push(element.firstChild);\n            parent.insertBefore(element.firstChild, element);\n        }\n        unWrapNode = unWrapNode.length > 0 ? unWrapNode : [element.parentNode];\n        parent.removeChild(element);\n        return unWrapNode;\n    };\n    DOMNode.prototype.getSelectedNode = function (element, index) {\n        if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 &&\n            element.childNodes[index - 1] && element.childNodes[index - 1].nodeType === Node.ELEMENT_NODE &&\n            (element.childNodes[index - 1].classList.contains(markerClassName.startSelection) ||\n                element.childNodes[index - 1].classList.contains(markerClassName.endSelection))) {\n            element = element.childNodes[index - 1];\n        }\n        else if (element.nodeType === Node.ELEMENT_NODE && element.childNodes.length > 0 && element.childNodes[index]) {\n            element = element.childNodes[index];\n        }\n        if (element.nodeType === Node.TEXT_NODE) {\n            element = element.parentNode;\n        }\n        return element;\n    };\n    DOMNode.prototype.nodeFinds = function (element, elements) {\n        var existNodes = [];\n        for (var i = 0; i < elements.length; i++) {\n            if (element.contains(elements[i]) && element !== elements[i]) {\n                existNodes.push(elements[i]);\n            }\n        }\n        return existNodes;\n    };\n    DOMNode.prototype.isEditorArea = function () {\n        var range = this.getRangePoint(0);\n        var element;\n        for (element = range.commonAncestorContainer; element && !this.isElement(element); null) {\n            element = element.parentNode;\n        }\n        return !!this.isElement(element);\n    };\n    DOMNode.prototype.getRangePoint = function (point) {\n        var selection = this.getSelection();\n        var ranges = [];\n        if (selection && selection.getRangeAt && selection.rangeCount) {\n            ranges = [];\n            for (var f = 0; f < selection.rangeCount; f++) {\n                ranges.push(selection.getRangeAt(f));\n            }\n        }\n        else {\n            ranges = [this.currentDocument.createRange()];\n        }\n        return 'undefined' !== typeof point ? ranges[point] : ranges;\n    };\n    DOMNode.prototype.getSelection = function () {\n        return this.nodeSelection.get(this.currentDocument);\n    };\n    DOMNode.prototype.getPreviousNode = function (element) {\n        element = element.previousSibling;\n        for (; element && element.textContent === '\\n'; null) {\n            element = element.previousSibling;\n        }\n        return element;\n    };\n    DOMNode.prototype.encode = function (value) {\n        var divNode = document.createElement('div');\n        divNode.innerText = value;\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    DOMNode.prototype.saveMarker = function (save, action) {\n        var start = this.parent.querySelector('.' + markerClassName.startSelection);\n        var end = this.parent.querySelector('.' + markerClassName.endSelection);\n        var startTextNode;\n        var endTextNode;\n        if (start.textContent === '' && isNullOrUndefined(end) && action !== 'tab') {\n            start.innerHTML = '&#65279;&#65279;';\n        }\n        if (this.hasClass(start, markerClassName.startSelection) && start.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, start, this.encode(start.textContent));\n            this.replaceWith(start, replace);\n            start = this.parent.querySelector('.' + markerClassName.startSelection);\n            start.classList.remove(markerClassName.startSelection);\n            startTextNode = start.childNodes[0];\n        }\n        else {\n            startTextNode = this.unWrap(start)[0];\n        }\n        if (this.hasClass(end, markerClassName.endSelection) && end.classList.length > 1) {\n            var replace = this.createTagString(CONSTANT.DEFAULT_TAG, end, this.encode(end.textContent));\n            this.replaceWith(end, replace);\n            end = this.parent.querySelector('.' + markerClassName.endSelection);\n            end.classList.remove(markerClassName.endSelection);\n            endTextNode = end.childNodes[0];\n        }\n        else {\n            endTextNode = end ? this.unWrap(end)[0] : startTextNode;\n        }\n        save.startContainer = save.getNodeArray(startTextNode, true);\n        save.endContainer = save.getNodeArray(endTextNode, false);\n        return save;\n    };\n    DOMNode.prototype.marker = function (className, textContent) {\n        return '<span class=\"' + className + '\">' + textContent + '</span>';\n    };\n    DOMNode.prototype.setMarker = function (save) {\n        var range = save.range;\n        var start = (range.startContainer.childNodes[range.startOffset]\n            || range.startContainer);\n        var end = (range.endContainer.childNodes[(range.endOffset > 0) ? (range.endOffset - 1) : range.endOffset]\n            || range.endContainer);\n        if ((start.nodeType === Node.ELEMENT_NODE && end.nodeType === Node.ELEMENT_NODE) && (start.contains(end) || end.contains(start))) {\n            var existNode = start.contains(end) ? start : end;\n            var isElement = existNode.nodeType !== Node.TEXT_NODE;\n            if (isElement) {\n                var nodes = [];\n                var textNodes = [];\n                for (var node = existNode; existNode.contains(node); null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (textNodes.indexOf(node) < 0 && (node.nodeType === Node.TEXT_NODE ||\n                        (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0\n                            && node.tagName === 'BR'))) {\n                        textNodes.push(node);\n                    }\n                }\n                if (textNodes.length) {\n                    start = start.contains(end) ? textNodes[0] : start;\n                    end = textNodes[textNodes.length - 1];\n                }\n            }\n        }\n        if (start !== end) {\n            if (start.nodeType !== Node.TEXT_NODE && start.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(start.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n                var markerStart = range.startContainer.querySelector('.' + markerClassName.startSelection);\n                markerStart.appendChild(start);\n            }\n            else {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n            }\n            if (end.nodeType !== Node.TEXT_NODE && end.tagName === 'BR' &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(end.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                this.replaceWith(end, this.marker(markerClassName.endSelection, this.encode(end.textContent)));\n                var markerEnd = range.endContainer.querySelector('.' + markerClassName.endSelection);\n                markerEnd.appendChild(end);\n            }\n            else {\n                this.replaceWith(end, this.marker(markerClassName.endSelection, this.encode(end.textContent)));\n            }\n        }\n        else {\n            if (start.nodeType === 3) {\n                this.replaceWith(start, this.marker(markerClassName.startSelection, this.encode(start.textContent)));\n            }\n            else {\n                for (var i = 0; i < selfClosingTags.length; i++) {\n                    start = start.tagName === selfClosingTags[i] ? start.parentNode : start;\n                }\n                var marker = this.marker(markerClassName.startSelection, '');\n                append([this.parseHTMLFragment(marker)], start);\n            }\n        }\n    };\n    DOMNode.prototype.createTempNode = function (element) {\n        var textContent = element.textContent;\n        if (element.tagName === 'BR') {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var node = element.parentNode;\n            if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.tagName.toLocaleLowerCase()) >= 0) {\n                element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            }\n        }\n        else if (((element.nodeType !== Node.TEXT_NODE &&\n            (element.classList.contains(markerClassName.startSelection) ||\n                element.classList.contains(markerClassName.endSelection))) ||\n            textContent.replace(/\\n/g, '').replace(/(^ *)|( *$)/g, '').length > 0 ||\n            textContent.length && textContent.indexOf('\\n') < 0)) {\n            var wrapper = '<' + CONSTANT.DEFAULT_TAG + '></' + CONSTANT.DEFAULT_TAG + '>';\n            var target = element;\n            element = this.wrap(element, this.parseHTMLFragment(wrapper));\n            var ignoreBr = target.nodeType === Node.ELEMENT_NODE && target.firstChild && target.firstChild.nodeName === 'BR'\n                && (target.classList.contains(markerClassName.startSelection) ||\n                    target.classList.contains(markerClassName.endSelection));\n            if (!ignoreBr && element.nextElementSibling && element.nextElementSibling.tagName === 'BR') {\n                element.appendChild(element.nextElementSibling);\n            }\n        }\n        return element;\n    };\n    DOMNode.prototype.blockNodes = function () {\n        var collectionNodes = [];\n        var selection = this.getSelection();\n        if (this.isEditorArea() && selection.rangeCount) {\n            var ranges = this.getRangePoint();\n            for (var j = 0; j < ranges.length; j++) {\n                var parentNode = void 0;\n                var range = ranges[j];\n                var startNode = this.getSelectedNode(range.startContainer, range.startOffset);\n                var endNode = this.getSelectedNode(range.endContainer, range.endOffset);\n                if (this.isBlockNode(startNode) && collectionNodes.indexOf(startNode) < 0) {\n                    collectionNodes.push(startNode);\n                }\n                parentNode = this.blockParentNode(startNode);\n                if (parentNode && collectionNodes.indexOf(parentNode) < 0) {\n                    if (CONSTANT.IGNORE_BLOCK_TAGS.indexOf(parentNode.tagName.toLocaleLowerCase()) >= 0 && (startNode.tagName === 'BR' ||\n                        startNode.nodeType === Node.TEXT_NODE ||\n                        startNode.classList.contains(markerClassName.startSelection) ||\n                        startNode.classList.contains(markerClassName.endSelection))) {\n                        var tempNode = startNode.previousSibling &&\n                            startNode.previousSibling.nodeType === Node.TEXT_NODE ?\n                            startNode.previousSibling : startNode;\n                        collectionNodes.push(this.createTempNode(tempNode));\n                    }\n                    else {\n                        collectionNodes.push(parentNode);\n                    }\n                }\n                var nodes = [];\n                for (var node = startNode; node !== endNode && node !== this.parent; null) {\n                    if (nodes.indexOf(node) < 0 && node.childNodes && node.childNodes.length) {\n                        nodes.push(node);\n                        node = node.childNodes[0];\n                    }\n                    else if (node && (node.tagName === 'BR' || node.nodeType === Node.TEXT_NODE ||\n                        node.classList.contains(markerClassName.startSelection) ||\n                        node.classList.contains(markerClassName.endSelection)) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node);\n                    }\n                    else if (node.nextSibling && (node.nextSibling.tagName === 'BR' ||\n                        node.nextSibling.nodeType === Node.TEXT_NODE ||\n                        node.nextSibling.classList.contains(markerClassName.startSelection) ||\n                        node.nextSibling.classList.contains(markerClassName.endSelection)) &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.nextSibling.parentNode.tagName.toLocaleLowerCase()) >= 0) {\n                        node = this.createTempNode(node.nextSibling);\n                    }\n                    else if (node.nextSibling) {\n                        node = node.nextSibling;\n                    }\n                    else if (node.parentNode) {\n                        node = node.parentNode;\n                        nodes.push(node);\n                    }\n                    if (collectionNodes.indexOf(node) < 0 && node.nodeType === Node.ELEMENT_NODE &&\n                        CONSTANT.IGNORE_BLOCK_TAGS.indexOf(node.parentNode.tagName.toLocaleLowerCase()) >= 0 &&\n                        (node.classList.contains(markerClassName.startSelection) ||\n                            node.classList.contains(markerClassName.endSelection))) {\n                        collectionNodes.push(this.createTempNode(node));\n                    }\n                    if (this.isBlockNode(node) && this.ignoreTableTag(node) && nodes.indexOf(node) < 0 &&\n                        collectionNodes.indexOf(node) < 0 && (node !== endNode || range.endOffset > 0)) {\n                        collectionNodes.push(node);\n                    }\n                }\n                parentNode = this.blockParentNode(endNode);\n                if (parentNode && this.ignoreTableTag(parentNode) && collectionNodes.indexOf(parentNode) < 0) {\n                    collectionNodes.push(parentNode);\n                }\n            }\n        }\n        for (var i = collectionNodes.length - 1; i > 0; i--) {\n            var nodes = this.nodeFinds(collectionNodes[i], collectionNodes);\n            if (nodes.length) {\n                var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n                if (collectionNodes[i].tagName === 'LI' && listNodes.length > 0) {\n                    continue;\n                }\n                else {\n                    collectionNodes.splice(i, 1);\n                }\n            }\n        }\n        return collectionNodes;\n    };\n    DOMNode.prototype.ignoreTableTag = function (element) {\n        return !(CONSTANT.TABLE_BLOCK_TAGS.indexOf(element.tagName.toLocaleLowerCase()) >= 0);\n    };\n    return DOMNode;\n}());\nexport { DOMNode };\n","import * as CONSTANT from './../base/constant';\nimport { createElement, detach, prepend, append, attributes } from '@syncfusion/ej2-base';\nimport { markerClassName } from './dom-node';\nimport * as EVENTS from './../../common/constant';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Lists internal component\n * @hidden\n */\nvar Lists = /** @class */ (function () {\n    /**\n     * Constructor for creating the Lists plugin\n     * @hidden\n     */\n    function Lists(parent) {\n        this.parent = parent;\n        this.domNode = this.parent.domNode;\n        this.addEventListener();\n    }\n    Lists.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.LIST_TYPE, this.applyListsHandler, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    Lists.prototype.keyDownHandler = function (e) {\n        if (e.event.which === 9) {\n            var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n            this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n            var blockNodes = void 0;\n            var startOffset = range.startOffset;\n            var endOffset = range.endOffset;\n            var startNode = this.parent.domNode.getSelectedNode(range.startContainer, range.startOffset);\n            var endNode = this.parent.domNode.getSelectedNode(range.endContainer, range.endOffset);\n            if ((startNode === endNode && (startNode.nodeName === 'BR' || startNode.nodeName === '#text') &&\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(startNode.parentNode.tagName.toLocaleLowerCase()) >= 0)) {\n                return;\n            }\n            else {\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.domNode.setMarker(this.saveSelection);\n                }\n                blockNodes = this.domNode.blockNodes();\n            }\n            var nodes = [];\n            var isNested = true;\n            for (var i = 0; i < blockNodes.length; i++) {\n                if (blockNodes[i].parentNode.tagName === 'LI') {\n                    nodes.push(blockNodes[i].parentNode);\n                }\n                else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                    (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                        blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                    nodes.push(blockNodes[i]);\n                }\n            }\n            if (nodes.length > 1 || nodes.length && ((startOffset === 0 && endOffset === 0) || e.ignoreDefault)) {\n                e.event.preventDefault();\n                e.event.stopPropagation();\n                this.currentAction = this.getAction(nodes[0]);\n                if (e.event.shiftKey) {\n                    this.revertList(nodes);\n                    this.revertClean();\n                }\n                else {\n                    isNested = this.nestedList(nodes);\n                }\n                if (isNested) {\n                    this.cleanNode();\n                    this.parent.editableElement.focus();\n                }\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n                    this.saveSelection.restore();\n                    if (e.callBack) {\n                        e.callBack({\n                            requestType: this.currentAction,\n                            editorMode: 'HTML',\n                            range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                            elements: this.parent.domNode.blockNodes(),\n                            event: e.event\n                        });\n                    }\n                }\n            }\n            else {\n                if (!(e.event.action && e.event.action === 'indent')) {\n                    this.saveSelection = this.domNode.saveMarker(this.saveSelection, e.event.action);\n                    this.saveSelection.restore();\n                }\n            }\n        }\n        else {\n            switch (e.event.action) {\n                case 'ordered-list':\n                    this.applyListsHandler({ subCommand: 'OL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n                case 'unordered-list':\n                    this.applyListsHandler({ subCommand: 'UL', callBack: e.callBack });\n                    e.event.preventDefault();\n                    break;\n            }\n        }\n    };\n    Lists.prototype.getAction = function (element) {\n        var parentNode = element.parentNode;\n        return (parentNode.nodeName === 'OL' ? 'OL' : 'UL');\n    };\n    Lists.prototype.revertClean = function () {\n        var collectionNodes = this.parent.editableElement.querySelectorAll('ul, ol');\n        for (var i = 0; i < collectionNodes.length; i++) {\n            var listNodes = collectionNodes[i].querySelectorAll('ul, ol');\n            if (listNodes.length > 0) {\n                for (var j = 0; j < listNodes.length; j++) {\n                    var prevSibling = listNodes[j].previousSibling;\n                    if (prevSibling && prevSibling.tagName === 'LI') {\n                        prevSibling.appendChild(listNodes[j]);\n                    }\n                }\n            }\n        }\n    };\n    Lists.prototype.noPreviousElement = function (elements) {\n        var firstNode;\n        var firstNodeOL;\n        var siblingListOL = elements.querySelectorAll('ol, ul');\n        var siblingListLI = elements\n            .querySelectorAll('li');\n        var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n        if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n            firstNode = siblingListLI[0];\n        }\n        else {\n            firstNodeOL = siblingListOL[0];\n        }\n        if (firstNode) {\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                prepend([h], firstNode);\n                setStyleAttribute(elements, { 'list-style-type': 'none' });\n                setStyleAttribute(firstNode, { 'list-style-type': '' });\n                h = nextSibling;\n            }\n        }\n        else if (firstNodeOL) {\n            var nestedElement = createElement('li');\n            prepend([nestedElement], firstNodeOL);\n            for (var h = this.domNode.contents(elements)[0]; h && !this.domNode.isList(h); null) {\n                var nextSibling = h.nextSibling;\n                nestedElement.appendChild(h);\n                h = nextSibling;\n            }\n            prepend([firstNodeOL], elements.parentNode);\n            detach(elements);\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], firstNodeOL.parentNode);\n            append([firstNodeOL], nestedElementLI);\n        }\n        else {\n            var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n            prepend([nestedElementLI], elements.parentNode);\n            var nestedElement = createElement(elements.parentNode.tagName);\n            prepend([nestedElement], nestedElementLI);\n            append([elements], nestedElement);\n        }\n    };\n    Lists.prototype.nestedList = function (elements) {\n        var isNested = false;\n        for (var i = 0; i < elements.length; i++) {\n            var prevSibling = this.domNode.getPreviousNode(elements[i]);\n            if (prevSibling) {\n                isNested = true;\n                var firstNode = void 0;\n                var firstNodeLI = void 0;\n                var siblingListOL = elements[i].querySelectorAll('ol, ul');\n                var siblingListLI = elements[i]\n                    .querySelectorAll('li');\n                var siblingListLIFirst = this.domNode.contents(siblingListLI[0])[0];\n                if (siblingListLI.length > 0 && (siblingListLIFirst.nodeName === 'OL' || siblingListLIFirst.nodeName === 'UL')) {\n                    firstNodeLI = siblingListLI[0];\n                }\n                else {\n                    firstNode = siblingListOL[0];\n                }\n                if (firstNode) {\n                    var nestedElement = createElement('li');\n                    prepend([nestedElement], firstNode);\n                    for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                        var nextSibling = h.nextSibling;\n                        nestedElement.appendChild(h);\n                        h = nextSibling;\n                    }\n                    append([firstNode], prevSibling);\n                    detach(elements[i]);\n                }\n                else if (firstNodeLI) {\n                    if (prevSibling.tagName === 'LI') {\n                        for (var h = this.domNode.contents(elements[i])[0]; h && !this.domNode.isList(h); null) {\n                            var nextSibling = h.nextSibling;\n                            prepend([h], firstNodeLI);\n                            setStyleAttribute(elements[i], { 'list-style-type': 'none' });\n                            setStyleAttribute(firstNodeLI, { 'list-style-type': '' });\n                            h = nextSibling;\n                        }\n                        append([firstNodeLI.parentNode], prevSibling);\n                        detach(elements[i]);\n                    }\n                }\n                else {\n                    if (prevSibling.tagName === 'LI') {\n                        var nestedElement = createElement(elements[i].parentNode.tagName);\n                        append([nestedElement], prevSibling);\n                        append([elements[i]], nestedElement);\n                    }\n                }\n            }\n            else {\n                var element = elements[i];\n                isNested = true;\n                this.noPreviousElement(element);\n            }\n        }\n        return isNested;\n    };\n    Lists.prototype.applyListsHandler = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        this.saveSelection = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.currentAction = e.subCommand;\n        this.domNode.setMarker(this.saveSelection);\n        var listsNodes = this.domNode.blockNodes();\n        for (var i = 0; i < listsNodes.length; i++) {\n            if (listsNodes[i].tagName !== 'LI' && 'LI' === listsNodes[i].parentNode.tagName) {\n                listsNodes[i] = listsNodes[i].parentNode;\n            }\n        }\n        this.applyLists(listsNodes, this.currentAction, e.selector);\n        if (e.callBack) {\n            e.callBack({\n                requestType: this.currentAction,\n                event: e.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Lists.prototype.applyLists = function (elements, type, selector) {\n        var isReverse = true;\n        if (this.isRevert(elements, type)) {\n            this.revertList(elements);\n        }\n        else {\n            this.checkLists(elements, type);\n            for (var i = 0; i < elements.length; i++) {\n                if ('LI' !== elements[i].tagName) {\n                    isReverse = false;\n                    var openTag = '<' + type + this.domNode.attributes(elements[i]) + '>';\n                    var closeTag = '</' + type + '>';\n                    var newTag = 'li class=\"e-rte-replace-tag\"';\n                    var replaceHTML = (elements[i].tagName.toLowerCase() === CONSTANT.DEFAULT_TAG ? elements[i].innerHTML :\n                        elements[i].outerHTML);\n                    var innerHTML = this.domNode.createTagString(newTag, null, replaceHTML);\n                    var collectionString = openTag + innerHTML + closeTag;\n                    this.domNode.replaceWith(elements[i], collectionString);\n                    var element = this.parent.editableElement.querySelector('.e-rte-replace-tag');\n                    element.removeAttribute('class');\n                }\n            }\n        }\n        this.cleanNode();\n        this.parent.editableElement.focus();\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, selector);\n        }\n        this.saveSelection = this.domNode.saveMarker(this.saveSelection);\n        this.saveSelection.restore();\n    };\n    Lists.prototype.isRevert = function (nodes, tagName) {\n        var isRevert = true;\n        for (var i = 0; i < nodes.length; i++) {\n            if (nodes[i].tagName !== 'LI') {\n                return false;\n            }\n            if (nodes[i].parentNode.tagName !== tagName) {\n                isRevert = false;\n            }\n        }\n        return isRevert;\n    };\n    Lists.prototype.checkLists = function (nodes, tagName) {\n        var nodesTemp = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i].parentNode;\n            if (nodes[i].tagName === 'LI' && node.tagName !== tagName && nodesTemp.indexOf(node) < 0) {\n                nodesTemp.push(node);\n            }\n        }\n        for (var j = nodesTemp.length - 1; j >= 0; j--) {\n            var h = nodesTemp[j];\n            var replace = '<' + tagName.toLowerCase() + ' '\n                + this.domNode.attributes(h) + '>' + h.innerHTML + '</' + tagName.toLowerCase() + '>';\n            this.domNode.replaceWith(nodesTemp[j], replace);\n        }\n    };\n    Lists.prototype.cleanNode = function () {\n        var liParents = this.parent.editableElement.querySelectorAll('ol + ol, ul + ul');\n        for (var c = 0; c < liParents.length; c++) {\n            var node = liParents[c];\n            if (this.domNode.isList(node.previousSibling) &&\n                this.domNode.openTagString(node) === this.domNode.openTagString(node.previousSibling)) {\n                var contentNodes = this.domNode.contents(node);\n                for (var f = 0; f < contentNodes.length; f++) {\n                    node.previousSibling.appendChild(contentNodes[f]);\n                }\n                node.parentNode.removeChild(node);\n            }\n        }\n    };\n    Lists.prototype.findUnSelected = function (temp, elements) {\n        temp = temp.slice().reverse();\n        if (temp.length > 0) {\n            var rightIndent = [];\n            var indentElements = [];\n            var lastElement = elements[elements.length - 1];\n            var lastElementChild = [];\n            var childElements = [];\n            lastElementChild = (lastElement.childNodes);\n            for (var z = 0; z < lastElementChild.length; z++) {\n                if (lastElementChild[z].tagName === 'OL' || lastElementChild[z].tagName === 'UL') {\n                    var childLI = lastElementChild[z]\n                        .querySelectorAll('li');\n                    if (childLI.length > 0) {\n                        for (var y = 0; y < childLI.length; y++) {\n                            childElements.push(childLI[y]);\n                        }\n                    }\n                }\n            }\n            for (var i = 0; i < childElements.length; i++) {\n                var count = 0;\n                for (var j = 0; j < temp.length; j++) {\n                    if (!childElements[i].contains((temp[j]))) {\n                        count = count + 1;\n                    }\n                }\n                if (count === temp.length) {\n                    indentElements.push(childElements[i]);\n                }\n            }\n            if (indentElements.length > 0) {\n                for (var x = 0; x < indentElements.length; x++) {\n                    if (this.domNode.contents(indentElements[x])[0].nodeName !== 'OL' &&\n                        this.domNode.contents(indentElements[x])[0].nodeName !== 'UL') {\n                        rightIndent.push(indentElements[x]);\n                    }\n                }\n            }\n            if (rightIndent.length > 0) {\n                this.nestedList(rightIndent);\n            }\n        }\n    };\n    Lists.prototype.revertList = function (elements) {\n        var temp = [];\n        for (var i = elements.length - 1; i >= 0; i--) {\n            for (var j = i - 1; j >= 0; j--) {\n                if (elements[j].contains((elements[i])) || elements[j] === elements[i]) {\n                    temp.push(elements[i]);\n                    elements.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.findUnSelected(temp, elements);\n        var viewNode = [];\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var parentNode = elements[i].parentNode;\n            var className = element.getAttribute('class');\n            if (temp.length === 0) {\n                var siblingList = elements[i].querySelectorAll('ul, ol');\n                var firstNode = siblingList[0];\n                if (firstNode) {\n                    var child = firstNode\n                        .querySelectorAll('li');\n                    if (child) {\n                        var nestedElement = createElement(firstNode.tagName);\n                        append([nestedElement], firstNode.parentNode);\n                        var nestedElementLI = createElement('li', { styles: 'list-style-type: none;' });\n                        append([nestedElementLI], nestedElement);\n                        append([firstNode], nestedElementLI);\n                    }\n                }\n            }\n            if (element.parentNode.insertBefore(this.closeTag(parentNode.tagName), element),\n                'LI' === parentNode.parentNode.tagName) {\n                element.parentNode.insertBefore(this.closeTag('LI'), element);\n            }\n            else {\n                var classAttr = '';\n                if (className) {\n                    classAttr += ' class=\"' + className + '\"';\n                }\n                if (CONSTANT.DEFAULT_TAG && 0 === element.querySelectorAll(CONSTANT.BLOCK_TAGS.join(', ')).length) {\n                    var wrapper = '<' + CONSTANT.DEFAULT_TAG + classAttr + ' class=\"e-rte-wrap-inner\"' +\n                        this.domNode.attributes(parentNode) + '></' + CONSTANT.DEFAULT_TAG + '>';\n                    this.domNode.wrapInner(element, this.domNode.parseHTMLFragment(wrapper));\n                }\n                else if (this.domNode.contents(element)[0].nodeType === 3) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.parent.domNode.encode(this.domNode.contents(element)[0].textContent));\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else if (this.domNode.contents(element)[0].classList.contains(markerClassName.startSelection) ||\n                    this.domNode.contents(element)[0].classList.contains(markerClassName.endSelection)) {\n                    var replace = this.domNode.createTagString(CONSTANT.DEFAULT_TAG, parentNode, this.domNode.contents(element)[0].outerHTML);\n                    this.domNode.replaceWith(this.domNode.contents(element)[0], replace);\n                }\n                else {\n                    var childNode = element.firstChild;\n                    className = childNode.getAttribute('class');\n                    attributes(childNode, this.domNode.rawAttributes(parentNode));\n                    if (className && childNode.getAttribute('class')) {\n                        attributes(childNode, { 'class': className + ' ' + childNode.getAttribute('class') });\n                    }\n                }\n                append([this.openTag('LI')], element);\n                prepend([this.closeTag('LI')], element);\n            }\n            this.domNode.insertAfter(this.openTag(parentNode.tagName), element);\n            if (parentNode.parentNode.tagName === 'LI') {\n                parentNode = parentNode.parentNode.parentNode;\n            }\n            if (viewNode.indexOf(parentNode) < 0) {\n                viewNode.push(parentNode);\n            }\n        }\n        for (var i = 0; i < viewNode.length; i++) {\n            var node = viewNode[i];\n            var nodeInnerHtml = node.innerHTML;\n            var closeTag = /<span class=\"e-rte-list-close-([a-z]*)\"><\\/span>/g;\n            var openTag = /<span class=\"e-rte-list-open-([a-z]*)\"><\\/span>/g;\n            nodeInnerHtml = nodeInnerHtml.replace(closeTag, '</$1>');\n            nodeInnerHtml = nodeInnerHtml.replace(openTag, '<$1 ' + this.domNode.attributes(node) + '>');\n            this.domNode.replaceWith(node, this.domNode.openTagString(node) + nodeInnerHtml.trim() + this.domNode.closeTagString(node));\n        }\n        var emptyUl = this.parent.editableElement.querySelectorAll('ul:empty, ol:empty');\n        for (var i = 0; i < emptyUl.length; i++) {\n            detach(emptyUl[i]);\n        }\n        var emptyLi = this.parent.editableElement.querySelectorAll('li:empty');\n        for (var i = 0; i < emptyLi.length; i++) {\n            detach(emptyLi[i]);\n        }\n    };\n    Lists.prototype.openTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-open-' + type.toLowerCase() + '\"></span>');\n    };\n    Lists.prototype.closeTag = function (type) {\n        return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-close-' + type.toLowerCase() + '\"></span>');\n    };\n    return Lists;\n}());\nexport { Lists };\n","import * as EVENTS from './../../common/constant';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Formats internal component\n * @hidden\n */\nvar Formats = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Formats(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Formats.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.FORMAT_TYPE, this.applyFormats, this);\n    };\n    Formats.prototype.getParentNode = function (node) {\n        for (; node.parentNode && node.parentNode !== this.parent.editableElement; null) {\n            node = node.parentNode;\n        }\n        return node;\n    };\n    Formats.prototype.applyFormats = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var formatsNodes = this.parent.domNode.blockNodes();\n        for (var i = 0; i < formatsNodes.length; i++) {\n            var parentNode = void 0;\n            var replaceHTML = void 0;\n            if (e.subCommand.toLowerCase() === 'blockquote') {\n                parentNode = this.getParentNode(formatsNodes[i]);\n                replaceHTML = this.parent.domNode.isList(parentNode) ||\n                    parentNode.tagName === 'TABLE' ? parentNode.outerHTML : parentNode.innerHTML;\n            }\n            else {\n                parentNode = formatsNodes[i];\n                replaceHTML = parentNode.innerHTML;\n            }\n            if (e.subCommand.toLowerCase() === parentNode.tagName.toLowerCase() ||\n                isNullOrUndefined(parentNode.parentNode) || parentNode.tagName === 'LI') {\n                continue;\n            }\n            this.cleanFormats(parentNode, e.subCommand);\n            var replaceTag = this.parent.domNode.createTagString(e.subCommand, parentNode, replaceHTML.replace(/>\\s+</g, '><'));\n            this.parent.domNode.replaceWith(parentNode, replaceTag);\n        }\n        this.parent.editableElement.focus();\n        save = this.parent.domNode.saveMarker(save);\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, e.selector);\n        }\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    Formats.prototype.cleanFormats = function (element, tagName) {\n        var ignoreAttr = ['display', 'font-size', 'margin-top', 'margin-bottom', 'margin-left', 'margin-right', 'font-weight'];\n        tagName = tagName.toLowerCase();\n        for (var i = 0; i < ignoreAttr.length && (tagName !== 'p' && tagName !== 'blockquote' && tagName !== 'pre'); i++) {\n            element.style.removeProperty(ignoreAttr[i]);\n        }\n    };\n    return Formats;\n}());\nexport { Formats };\n","/**\n * Node appending methods.\n * @hidden\n */\nvar InsertMethods = /** @class */ (function () {\n    function InsertMethods() {\n    }\n    InsertMethods.WrapBefore = function (textNode, parentNode, isAfter) {\n        parentNode.innerText = textNode.textContent;\n        (!isAfter) ? this.AppendBefore(parentNode, textNode) : this.AppendBefore(parentNode, textNode, true);\n        if (textNode.parentNode) {\n            textNode.parentNode.removeChild(textNode);\n        }\n        return parentNode.childNodes[0];\n    };\n    InsertMethods.Wrap = function (childNode, parentNode) {\n        this.AppendBefore(parentNode, childNode);\n        parentNode.appendChild(childNode);\n        return childNode;\n    };\n    InsertMethods.unwrap = function (node) {\n        var parent = node.parentNode;\n        var child = [];\n        for (; node.firstChild; null) {\n            child.push(parent.insertBefore(node.firstChild, node));\n        }\n        parent.removeChild(node);\n        return child;\n    };\n    InsertMethods.AppendBefore = function (textNode, parentNode, isAfter) {\n        return (parentNode.parentNode) ? ((!isAfter) ? parentNode.parentNode.insertBefore(textNode, parentNode)\n            : parentNode.parentNode.insertBefore(textNode, parentNode.nextSibling)) :\n            parentNode;\n    };\n    return InsertMethods;\n}());\nexport { InsertMethods };\n","import { NodeSelection } from './../../selection/index';\nimport { InsertMethods } from './insert-methods';\n/**\n * Split the Node based on selection\n * @hidden\n */\nvar NodeCutter = /** @class */ (function () {\n    function NodeCutter() {\n        this.position = -1;\n        this.nodeSelection = new NodeSelection();\n    }\n    // Split Selection Node\n    NodeCutter.prototype.GetSpliceNode = function (range, node) {\n        node = this.SplitNode(range, node, true);\n        node = this.SplitNode(range, node, false);\n        return node;\n    };\n    NodeCutter.prototype.SplitNode = function (range, node, isCollapsed) {\n        if (node) {\n            var clone = range.cloneRange();\n            var parent_1 = node.parentNode;\n            var index = this.nodeSelection.getIndex(node);\n            clone.collapse(isCollapsed);\n            (isCollapsed) ? clone.setStartBefore(node) : clone.setEndAfter(node);\n            var fragment = clone.extractContents();\n            if (isCollapsed) {\n                node = parent_1.childNodes[index];\n                fragment = this.spliceEmptyNode(fragment, false);\n                if (fragment && fragment.textContent !== '') {\n                    if (node) {\n                        InsertMethods.AppendBefore(fragment, node);\n                    }\n                    else {\n                        parent_1.appendChild(fragment);\n                        var divNode = document.createElement('div');\n                        divNode.innerHTML = '&#65279;&#65279;';\n                        node = divNode.firstChild;\n                        parent_1.appendChild(node);\n                    }\n                }\n            }\n            else {\n                node = parent_1.childNodes.length > 1 ? parent_1.childNodes[index] :\n                    parent_1.childNodes[0];\n                fragment = this.spliceEmptyNode(fragment, true);\n                if (fragment && fragment.textContent !== '') {\n                    if (node) {\n                        InsertMethods.AppendBefore(fragment, node, true);\n                    }\n                    else {\n                        parent_1.appendChild(fragment);\n                        var divNode = document.createElement('div');\n                        divNode.innerHTML = '&#65279;&#65279;';\n                        parent_1.insertBefore(divNode.firstChild, parent_1.firstChild);\n                        node = parent_1.firstChild;\n                    }\n                }\n            }\n            return node;\n        }\n        else {\n            return null;\n        }\n    };\n    NodeCutter.prototype.spliceEmptyNode = function (fragment, isStart) {\n        var len = fragment.childNodes.length - 1;\n        if (len > -1 && !isStart) {\n            this.spliceEmptyNode(fragment.childNodes[len], isStart);\n        }\n        else if (len > -1) {\n            this.spliceEmptyNode(fragment.childNodes[0], isStart);\n        }\n        else if (fragment.nodeType !== 3 && fragment.nodeType !== 11) {\n            fragment.parentNode.removeChild(fragment);\n        }\n        return fragment;\n    };\n    // Cursor Position split\n    NodeCutter.prototype.GetCursorStart = function (indexes, index, isStart) {\n        indexes = (isStart) ? indexes : indexes.reverse();\n        var position = indexes[0];\n        for (var num = 0; num < indexes.length && ((isStart) ? (indexes[num] < index) : (indexes[num] >= index)); num++) {\n            position = indexes[num];\n        }\n        return position;\n    };\n    NodeCutter.prototype.GetCursorRange = function (docElement, range, node) {\n        var cursorRange = docElement.createRange();\n        var indexes = [];\n        indexes.push(0);\n        var str = this.TrimLineBreak(node.data);\n        var index = str.indexOf(' ', 0);\n        while (index !== -1) {\n            if (indexes.indexOf(index) < 0) {\n                indexes.push(index);\n            }\n            if (new RegExp('\\\\s').test(str[index - 1]) && (indexes.indexOf(index - 1) < 0)) {\n                indexes.push(index - 1);\n            }\n            if (new RegExp('\\\\s').test(str[index + 1])) {\n                indexes.push(index + 1);\n            }\n            index = str.indexOf(' ', (index + 1));\n        }\n        indexes.push(str.length);\n        if ((indexes.indexOf(range.startOffset) >= 0)\n            || ((indexes.indexOf(range.startOffset - 1) >= 0) && (range.startOffset !== 1\n                || (range.startOffset === 1 && new RegExp('\\\\s').test(str[0])))\n                || ((indexes[indexes.length - 1] - 1) === range.startOffset))) {\n            cursorRange = range;\n            this.position = 1;\n        }\n        else {\n            var startOffset = this.GetCursorStart(indexes, range.startOffset, true);\n            this.position = range.startOffset - startOffset;\n            cursorRange.setStart(range.startContainer, startOffset);\n            cursorRange.setEnd(range.startContainer, this.GetCursorStart(indexes, range.startOffset, false));\n        }\n        return cursorRange;\n    };\n    NodeCutter.prototype.GetCursorNode = function (docElement, range, node) {\n        return this.GetSpliceNode(this.GetCursorRange(docElement, range, node), node);\n    };\n    NodeCutter.prototype.TrimLineBreak = function (line) {\n        return line.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, ' ');\n    };\n    return NodeCutter;\n}());\nexport { NodeCutter };\n","import { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport * as CONSTANT from './../base/constant';\nimport { detach } from '@syncfusion/ej2-base';\nimport { InsertMethods } from './insert-methods';\n/**\n * Insert a HTML Node or Text\n * @hidden\n */\nvar InsertHtml = /** @class */ (function () {\n    function InsertHtml() {\n    }\n    InsertHtml.Insert = function (docElement, insertNode, editNode) {\n        var node;\n        if (typeof insertNode === 'string') {\n            var divNode = document.createElement('div');\n            divNode.innerHTML = insertNode;\n            node = divNode.firstChild;\n        }\n        else {\n            node = insertNode;\n        }\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        var isCollapsed = range.collapsed;\n        var nodes = nodeSelection.getInsertNodeCollection(range);\n        var closestParentNode = (node.nodeName.toLowerCase() === 'table') ? this.closestEle(nodes[0].parentNode, editNode) : nodes[0];\n        if ((!isCollapsed && !(closestParentNode.nodeType === Node.ELEMENT_NODE &&\n            CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) !== -1))\n            || (node.nodeName.toLowerCase() === 'table' && closestParentNode &&\n                CONSTANT.TABLE_BLOCK_TAGS.indexOf(closestParentNode.tagName.toLocaleLowerCase()) === -1)) {\n            var preNode = nodeCutter.GetSpliceNode(range, closestParentNode);\n            var sibNode = preNode.previousSibling;\n            var parentNode = preNode.parentNode;\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else {\n                var lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1]);\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            range.extractContents();\n            for (var index = 0; index < nodes.length; index++) {\n                if (nodes[index].nodeType !== 3 && nodes[index].parentNode != null) {\n                    nodes[index].parentNode.removeChild(nodes[index]);\n                }\n            }\n            if (sibNode) {\n                InsertMethods.AppendBefore(node, sibNode, true);\n            }\n            else {\n                var previousNode = null;\n                while (parentNode !== editNode && parentNode.firstChild &&\n                    (parentNode.textContent.trim() === '')) {\n                    var parentNode1 = parentNode.parentNode;\n                    previousNode = parentNode;\n                    parentNode = parentNode1;\n                }\n                if (previousNode !== null) {\n                    parentNode = previousNode;\n                }\n                if (parentNode.firstChild) {\n                    if (parentNode.textContent.trim() === '') {\n                        InsertMethods.AppendBefore(node, parentNode, false);\n                        detach(parentNode);\n                    }\n                    else {\n                        InsertMethods.AppendBefore(node, parentNode.firstChild, false);\n                    }\n                }\n                else {\n                    parentNode.appendChild(node);\n                }\n            }\n            if (node.nodeType !== 3) {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.childNodes.length);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, 0, node.textContent.length);\n            }\n        }\n        else {\n            range.deleteContents();\n            range.insertNode(node);\n            if (node.nodeType !== 3 && node.childNodes.length > 0) {\n                nodeSelection.setSelectionText(docElement, node, node, 1, 1);\n            }\n            else if (node.nodeType !== 3) {\n                nodeSelection.setSelectionContents(docElement, node);\n            }\n            else {\n                nodeSelection.setSelectionText(docElement, node, node, node.textContent.length, node.textContent.length);\n            }\n        }\n    };\n    InsertHtml.closestEle = function (element, editNode) {\n        var el = element;\n        while (el && el.nodeType === 1) {\n            if (el.parentNode === editNode ||\n                CONSTANT.IGNORE_BLOCK_TAGS.indexOf(el.parentNode.tagName.toLocaleLowerCase()) !== -1) {\n                return el;\n            }\n            el = el.parentNode;\n        }\n        return null;\n    };\n    return InsertHtml;\n}());\nexport { InsertHtml };\n","import { createElement, isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar LinkCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function LinkCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    LinkCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.LINK, this.linkCommand, this);\n    };\n    LinkCommand.prototype.linkCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'createlink':\n            case 'editlink':\n                this.createLink(e);\n                break;\n            case 'openlink':\n                this.openLink(e);\n                break;\n            case 'removelink':\n                this.removeLink(e);\n                break;\n        }\n    };\n    LinkCommand.prototype.createLink = function (e) {\n        var closestAnchor = (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent.length > 0) &&\n            closest(e.item.selectParent[0], 'a');\n        closestAnchor = !isNullOrUndefined(closestAnchor) ? closestAnchor :\n            (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent.length > 0) ? (e.item.selectParent[0]) : null;\n        if (!isNullOrUndefined(closestAnchor) && closestAnchor.tagName === 'A') {\n            var anchorEle = closestAnchor;\n            anchorEle.setAttribute('href', e.item.url);\n            anchorEle.setAttribute('title', e.item.title);\n            anchorEle.innerHTML = e.item.text;\n            if (!isNullOrUndefined(e.item.target)) {\n                anchorEle.setAttribute('target', e.item.target);\n            }\n            else {\n                anchorEle.removeAttribute('target');\n            }\n            e.item.selection.setSelectionText(this.parent.currentDocument, anchorEle, anchorEle, 1, 1);\n        }\n        else {\n            var anchor = createElement('a', {\n                className: 'e-rte-anchor', attrs: {\n                    href: e.item.url,\n                    title: isNullOrUndefined(e.item.title) || e.item.title === '' ? e.item.url : e.item.title\n                }\n            });\n            if (!isNullOrUndefined(e.item.target)) {\n                anchor.setAttribute('target', e.item.target);\n            }\n            anchor.innerText = e.item.text === '' ? e.item.url : e.item.text;\n            e.item.selection.restore();\n            InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n            if (e.event && e.event.type === 'keydown' && e.event.keyCode === 32) {\n                var startContainer = e.item.selection.range.startContainer;\n                startContainer.textContent = this.removeText(startContainer.textContent, e.item.url);\n            }\n            else {\n                var startIndex = e.item.action === 'Paste' ? anchor.childNodes[0].textContent.length : 0;\n                e.item.selection.setSelectionText(this.parent.currentDocument, anchor.childNodes[0], anchor.childNodes[0], startIndex, anchor.childNodes[0].textContent.length);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Links',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    LinkCommand.prototype.removeText = function (text, val) {\n        var arr = text.split(' ');\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === val) {\n                arr.splice(i, 1);\n                i--;\n            }\n        }\n        return arr.join(' ');\n    };\n    LinkCommand.prototype.openLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    LinkCommand.prototype.removeLink = function (e) {\n        this.parent.domNode.setMarker(e.item.selection);\n        var closestAnchor = closest(e.item.selectParent[0], 'a');\n        var selectParent = closestAnchor ? closestAnchor : e.item.selectParent[0];\n        var parent = selectParent.parentNode;\n        var child = [];\n        for (; selectParent.firstChild; null) {\n            child.push(parent.insertBefore(selectParent.firstChild, selectParent));\n        }\n        parent.removeChild(selectParent);\n        if (child && child.length === 1) {\n            e.item.selection.startContainer = e.item.selection.getNodeArray(child[child.length - 1], true);\n            e.item.selection.endContainer = e.item.selection.startContainer;\n        }\n        e.item.selection = this.parent.domNode.saveMarker(e.item.selection);\n        e.item.selection.restore();\n        this.callBack(e);\n    };\n    LinkCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return LinkCommand;\n}());\nexport { LinkCommand };\n","import * as CONSTANT from './../base/constant';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Formats internal component\n * @hidden\n */\nvar Alignments = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Alignments(parent) {\n        this.alignments = {\n            'JustifyLeft': 'left',\n            'JustifyCenter': 'center',\n            'JustifyRight': 'right',\n            'JustifyFull': 'justify'\n        };\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Alignments.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.ALIGNMENT_TYPE, this.applyAlignment, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Alignments.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'justify-center':\n                this.applyAlignment({ subCommand: 'JustifyCenter', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-full':\n                this.applyAlignment({ subCommand: 'JustifyFull', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-left':\n                this.applyAlignment({ subCommand: 'JustifyLeft', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'justify-right':\n                this.applyAlignment({ subCommand: 'JustifyRight', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Alignments.prototype.applyAlignment = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var alignmentNodes = this.parent.domNode.blockNodes();\n        for (var i = 0; i < alignmentNodes.length; i++) {\n            var parentNode = alignmentNodes[i];\n            setStyleAttribute(parentNode, { 'text-align': this.alignments[e.subCommand] });\n        }\n        this.parent.editableElement.focus();\n        save = this.parent.domNode.saveMarker(save);\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, e.selector);\n        }\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    return Alignments;\n}());\nexport { Alignments };\n","import * as CONSTANT from './../base/constant';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * Indents internal component\n * @hidden\n */\nvar Indents = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function Indents(parent) {\n        this.indentValue = 20;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Indents.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INDENT_TYPE, this.applyIndents, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    Indents.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'indents':\n                this.applyIndents({ subCommand: 'Indent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n            case 'outdents':\n                this.applyIndents({ subCommand: 'Outdent', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    Indents.prototype.applyIndents = function (e) {\n        var range = this.parent.nodeSelection.getRange(this.parent.currentDocument);\n        var save = this.parent.nodeSelection.save(range, this.parent.currentDocument);\n        this.parent.domNode.setMarker(save);\n        var indentsNodes = this.parent.domNode.blockNodes();\n        var parentNodes = indentsNodes.slice();\n        var listsNodes = [];\n        for (var i = 0; i < parentNodes.length; i++) {\n            if (parentNodes[i].tagName !== 'LI' && 'LI' === parentNodes[i].parentNode.tagName) {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i].parentNode);\n            }\n            else if (parentNodes[i].tagName === 'LI') {\n                indentsNodes.splice(indentsNodes.indexOf(parentNodes[i]), 1);\n                listsNodes.push(parentNodes[i]);\n            }\n        }\n        if (listsNodes.length > 0) {\n            this.parent.observer.notify(EVENTS.KEY_DOWN_HANDLER, {\n                event: {\n                    preventDefault: function () { return; },\n                    stopPropagation: function () { return; },\n                    shiftKey: (e.subCommand === 'Indent' ? false : true),\n                    which: 9,\n                    action: 'indent'\n                },\n                ignoreDefault: true\n            });\n        }\n        for (var i = 0; i < indentsNodes.length; i++) {\n            var parentNode = indentsNodes[i];\n            var marginLeft = parentNode.style.marginLeft;\n            var indentsValue = void 0;\n            if (e.subCommand === 'Indent') {\n                indentsValue = marginLeft === '' ? this.indentValue + 'px' : parseInt(marginLeft, null) + this.indentValue + 'px';\n                parentNode.style.marginLeft = indentsValue;\n            }\n            else {\n                indentsValue = (marginLeft === '' || marginLeft === '0px') ? '' : parseInt(marginLeft, null) - this.indentValue + 'px';\n                parentNode.style.marginLeft = indentsValue;\n            }\n        }\n        this.parent.editableElement.focus();\n        if (isIDevice()) {\n            setEditFrameFocus(this.parent.editableElement, e.selector);\n        }\n        save = this.parent.domNode.saveMarker(save);\n        save.restore();\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.domNode.blockNodes()\n            });\n        }\n    };\n    return Indents;\n}());\nexport { Indents };\n","/**\n * RichTextEditor classes defined here.\n */\n/** @hidden */\nexport var CLASS_IMAGE_RIGHT = 'e-imgright';\nexport var CLASS_IMAGE_LEFT = 'e-imgleft';\nexport var CLASS_IMAGE_CENTER = 'e-imgcenter';\nexport var CLASS_IMAGE_BREAK = 'e-imgbreak';\nexport var CLASS_CAPTION = 'e-img-caption';\nexport var CLASS_CAPTION_INLINE = 'e-caption-inline';\nexport var CLASS_IMAGE_INLINE = 'e-imginline';\n","import { createElement, isNullOrUndefined, detach, closest, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport * as classes from './../base/classes';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar ImageCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function ImageCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ImageCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.IMAGE, this.imageCommand, this);\n    };\n    ImageCommand.prototype.imageCommand = function (e) {\n        switch (e.value.toString().toLocaleLowerCase()) {\n            case 'image':\n            case 'replace':\n                this.createImage(e);\n                break;\n            case 'insertlink':\n                this.insertImageLink(e);\n                break;\n            case 'openimagelink':\n                this.openImageLink(e);\n                break;\n            case 'editimagelink':\n                this.editImageLink(e);\n                break;\n            case 'removeimagelink':\n                this.removeImageLink(e);\n                break;\n            case 'remove':\n                this.removeImage(e);\n                break;\n            case 'alttext':\n                this.insertAltTextImage(e);\n                break;\n            case 'dimension':\n                this.imageDimension(e);\n                break;\n            case 'caption':\n                this.imageCaption(e);\n                break;\n            case 'justifyleft':\n                this.imageJustifyLeft(e);\n                break;\n            case 'justifycenter':\n                this.imageJustifyCenter(e);\n                break;\n            case 'justifyright':\n                this.imageJustifyRight(e);\n                break;\n            case 'inline':\n                this.imageInline(e);\n                break;\n            case 'break':\n                this.imageBreak(e);\n                break;\n        }\n    };\n    ImageCommand.prototype.createImage = function (e) {\n        if (!isNullOrUndefined(e.item.selectParent) && e.item.selectParent[0].tagName === 'IMG') {\n            var imgEle = e.item.selectParent[0];\n            imgEle.setAttribute('src', e.item.url);\n            imgEle.setAttribute('alt', e.item.altText);\n        }\n        else {\n            var imgElement = createElement('img', {\n                className: 'e-rte-image ' + e.item.cssClass, attrs: {\n                    width: (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.width)) ? 'auto' :\n                        e.item.width.width,\n                    height: (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.height)) ? 'auto' :\n                        e.item.height.height,\n                    alt: (e.item.altText !== '') ? e.item.altText : ''\n                }\n            });\n            imgElement.setAttribute('src', isNullOrUndefined(e.item.url) ? '' : e.item.url);\n            imgElement.style.minWidth = (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.minWidth)) ? 0 + 'px' :\n                e.item.width.minWidth + 'px';\n            imgElement.style.maxWidth = (isNullOrUndefined(e.item.width) || isNullOrUndefined(e.item.width.maxWidth)) ? null :\n                e.item.width.maxWidth + 'px';\n            imgElement.style.minHeight = (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.minHeight)) ? 0 + 'px' :\n                e.item.height.minHeight + 'px';\n            imgElement.style.maxHeight = (isNullOrUndefined(e.item.height) || isNullOrUndefined(e.item.height.maxHeight)) ? null :\n                e.item.height.maxHeight + 'px';\n            if (!isNullOrUndefined(e.item.selection)) {\n                e.item.selection.restore();\n            }\n            InsertHtml.Insert(this.parent.currentDocument, imgElement, this.parent.editableElement);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Image',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    ImageCommand.prototype.insertImageLink = function (e) {\n        var anchor = createElement('a', {\n            attrs: {\n                href: e.item.url\n            }\n        });\n        anchor.appendChild(e.item.selectNode[0]);\n        if (!isNullOrUndefined(e.item.target)) {\n            anchor.setAttribute('target', e.item.target);\n        }\n        InsertHtml.Insert(this.parent.currentDocument, anchor, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.openImageLink = function (e) {\n        document.defaultView.open(e.item.url, e.item.target);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImageLink = function (e) {\n        detach(closest(e.item.selectParent[0], 'a'));\n        InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.editImageLink = function (e) {\n        e.item.selectNode[0].parentElement.href = e.item.url;\n        if (isNullOrUndefined(e.item.target)) {\n            e.item.selectNode[0].parentElement.removeAttribute('target');\n        }\n        else {\n            e.item.selectNode[0].parentElement.target = e.item.target;\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.removeImage = function (e) {\n        if (closest(e.item.selectNode[0], 'a')) {\n            detach(closest(e.item.selectNode[0], 'a'));\n        }\n        else if (!isNullOrUndefined(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION))) {\n            detach(closest(e.item.selectNode[0], '.' + classes.CLASS_CAPTION));\n        }\n        else {\n            detach(e.item.selectNode[0]);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.insertAltTextImage = function (e) {\n        e.item.selectNode[0].setAttribute('alt', e.item.altText);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageDimension = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.style.height = '';\n        selectNode.style.width = '';\n        selectNode.width = e.item.width;\n        selectNode.height = e.item.height;\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageCaption = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.item.insertElement, this.parent.editableElement);\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyLeft = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_LEFT);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyCenter = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_CENTER);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_CENTER);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageJustifyRight = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n        }\n        if (selectNode.parentElement.nodeName === 'A') {\n            removeClass([selectNode.parentElement], classes.CLASS_IMAGE_LEFT);\n            addClass([selectNode.parentElement], classes.CLASS_IMAGE_RIGHT);\n        }\n        else {\n            addClass([selectNode], classes.CLASS_IMAGE_RIGHT);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageInline = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], 'e-rte-image');\n        addClass([selectNode], classes.CLASS_IMAGE_INLINE);\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.imageBreak = function (e) {\n        var selectNode = e.item.selectNode[0];\n        selectNode.removeAttribute('class');\n        addClass([selectNode], classes.CLASS_IMAGE_BREAK);\n        addClass([selectNode], 'e-rte-image');\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLASS_CAPTION))) {\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_CAPTION_INLINE);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_CENTER);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_LEFT);\n            removeClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_RIGHT);\n            addClass([closest(selectNode, '.' + classes.CLASS_CAPTION)], classes.CLASS_IMAGE_BREAK);\n        }\n        this.callBack(e);\n    };\n    ImageCommand.prototype.callBack = function (e) {\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return ImageCommand;\n}());\nexport { ImageCommand };\n","import { createElement, closest, detach } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Link internal component\n * @hidden\n */\nvar TableCommand = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function TableCommand(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    TableCommand.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.TABLE, this.createTable, this);\n        this.parent.observer.on(CONSTANT.INSERT_ROW, this.insertRow, this);\n        this.parent.observer.on(CONSTANT.INSERT_COLUMN, this.insertColumn, this);\n        this.parent.observer.on(CONSTANT.DELETEROW, this.deleteRow, this);\n        this.parent.observer.on(CONSTANT.DELETECOLUMN, this.deleteColumn, this);\n        this.parent.observer.on(CONSTANT.REMOVETABLE, this.removeTable, this);\n        this.parent.observer.on(CONSTANT.TABLEHEADER, this.tableHeader, this);\n        this.parent.observer.on(CONSTANT.TABLE_VERTICAL_ALIGN, this.tableVerticalAlign, this);\n    };\n    TableCommand.prototype.createTable = function (e) {\n        var table = createElement('table', { className: 'e-rte-table' });\n        var tblBody = createElement('tbody');\n        table.style.width = e.item.width.width;\n        var tdWid = parseInt(e.item.width.width, 10) / e.item.columns;\n        for (var i = 0; i < e.item.row; i++) {\n            var row = createElement('tr');\n            for (var j = 0; j < e.item.columns; j++) {\n                var cell = createElement('td');\n                cell.appendChild(createElement('br'));\n                cell.style.width = tdWid + '%';\n                row.appendChild(cell);\n            }\n            tblBody.appendChild(row);\n        }\n        table.appendChild(tblBody);\n        e.item.selection.restore();\n        InsertHtml.Insert(this.parent.currentDocument, table, this.parent.editableElement);\n        this.removeEmptyNode();\n        e.item.selection.setSelectionText(this.parent.currentDocument, table.querySelector('td'), table.querySelector('td'), 0, 0);\n        table.querySelector('td').classList.add('e-cell-select');\n        if (e.callBack) {\n            e.callBack({\n                requestType: 'Table',\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n        return table;\n    };\n    TableCommand.prototype.removeEmptyNode = function () {\n        var emptyUl = this.parent.editableElement.querySelectorAll('ul:empty, ol:empty');\n        for (var i = 0; i < emptyUl.length; i++) {\n            detach(emptyUl[i]);\n        }\n        var emptyLiChild = this.parent.editableElement.querySelectorAll('li *:empty');\n        for (var i = 0; i < emptyLiChild.length; i++) {\n            detach(emptyLiChild[i]);\n            if (emptyLiChild.length === i + 1) {\n                emptyLiChild = this.parent.editableElement.querySelectorAll('li *:empty');\n                i = -1;\n            }\n        }\n        var emptyLi = this.parent.editableElement.querySelectorAll('li:empty');\n        for (var i = 0; i < emptyLi.length; i++) {\n            detach(emptyLi[i]);\n        }\n    };\n    TableCommand.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    TableCommand.prototype.insertRow = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        if (selectedCell.nodeName.toLowerCase() === 'th' && e.item.subCommand === 'InsertRowBefore') {\n            return;\n        }\n        var curRow = closest(selectedCell, 'tr');\n        var newRow;\n        if (selectedCell.nodeName.toLowerCase() !== 'th') {\n            newRow = closest(selectedCell, 'tr').cloneNode(true);\n            var tabCell = Array.prototype.slice.call(newRow.querySelectorAll('td'));\n            Array.prototype.forEach.call(tabCell, function (cell) {\n                cell.innerHTML = '';\n                cell.appendChild(createElement('br'));\n                cell.removeAttribute('class');\n            });\n        }\n        else {\n            var childNodes = curRow.childNodes;\n            newRow = createElement('tr');\n            for (var i = 0; i < childNodes.length; i++) {\n                var tdElement = createElement('td');\n                tdElement.appendChild(createElement('br'));\n                newRow.appendChild(tdElement);\n            }\n        }\n        (e.item.subCommand === 'InsertRowBefore') ?\n            curRow.parentElement.insertBefore(newRow, curRow) : this.insertAfter(newRow, curRow);\n        e.item.selection.setSelectionText(this.parent.currentDocument, e.item.selection.range.startContainer, e.item.selection.range.startContainer, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.insertColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        selectedCell = (selectedCell.nodeName !== 'TD') ? closest(selectedCell, 'td,th') : selectedCell;\n        var curRow = closest(selectedCell, 'tr');\n        var curCell;\n        var allRows = closest((curRow), 'table').rows;\n        var colIndex = Array.prototype.slice.call(curRow.querySelectorAll('th,td')).indexOf(selectedCell);\n        var width = parseInt(e.item.width, 10) / (curRow.querySelectorAll('td,th').length + 1);\n        for (var j = 0; j < closest(curRow, 'table').querySelectorAll('th,td').length; j++) {\n            closest(curRow, 'table').querySelectorAll('th,td')[j].style.width = width + '%';\n        }\n        for (var i = 0; i < allRows.length; i++) {\n            curCell = allRows[i].querySelectorAll('th,td')[colIndex];\n            var colTemplate = curCell.cloneNode(true);\n            colTemplate.innerHTML = '';\n            colTemplate.appendChild(createElement('br'));\n            colTemplate.removeAttribute('class');\n            (e.item.subCommand === 'InsertColumnLeft') ? curCell.parentElement.insertBefore(colTemplate, curCell) :\n                this.insertAfter(colTemplate, curCell);\n        }\n        e.item.selection.setSelectionText(this.parent.currentDocument, selectedCell, selectedCell, 0, 0);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteColumn = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var curRow = closest(selectedCell, 'tr');\n        var allRows = closest(curRow, 'table').rows;\n        if (curRow.querySelectorAll('th,td').length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            for (var i = 0; i < allRows.length; i++) {\n                allRows[i].deleteCell(selectedCell.cellIndex);\n            }\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.deleteRow = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var parentTable = closest(selectedCell, 'table');\n        if (parentTable.rows.length === 1) {\n            e.item.selection.restore();\n            detach(closest(selectedCell.parentElement, 'table'));\n        }\n        else {\n            parentTable.deleteRow(selectedCell.parentNode.rowIndex);\n            e.item.selection.setSelectionText(this.parent.currentDocument, parentTable.querySelector('td'), parentTable.querySelector('td'), 0, 0);\n            parentTable.querySelector('td, th').classList.add('e-cell-select');\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.removeTable = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var seletedTable = closest(selectedCell.parentElement, 'table');\n        if (seletedTable) {\n            e.item.selection.restore();\n            detach(seletedTable);\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableHeader = function (e) {\n        var selectedCell = e.item.selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? selectedCell.parentNode : selectedCell;\n        var table = closest(selectedCell.parentElement, 'table');\n        if (table && 0 === table.querySelectorAll('thead').length) {\n            var cellCount = table.querySelector('tr').querySelectorAll('td').length;\n            var header = table.createTHead();\n            var row = header.insertRow(0);\n            for (var i = 0; i < cellCount; i++) {\n                var th = createElement('th');\n                th.appendChild(createElement('br'));\n                row.appendChild(th);\n            }\n        }\n        else {\n            table.deleteTHead();\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    TableCommand.prototype.tableVerticalAlign = function (e) {\n        if (e.item.subCommand === 'AlignTop') {\n            e.item.tableCell.style.verticalAlign = 'top';\n        }\n        else if (e.item.subCommand === 'AlignMiddle') {\n            e.item.tableCell.style.verticalAlign = 'middle';\n        }\n        else {\n            e.item.tableCell.style.verticalAlign = 'bottom';\n        }\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.item.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return TableCommand;\n}());\nexport { TableCommand };\n","/**\n * Is formatted or not.\n * @hidden\n */\nvar IsFormatted = /** @class */ (function () {\n    function IsFormatted() {\n    }\n    IsFormatted.prototype.getFormattedNode = function (node, format, endNode) {\n        var parentNode = this.getFormatParent(node, format, endNode);\n        if (parentNode !== null && parentNode !== endNode) {\n            return parentNode;\n        }\n        return null;\n    };\n    IsFormatted.prototype.getFormatParent = function (node, format, endNode) {\n        do {\n            node = node.parentNode;\n        } while (node && (node !== endNode) && !this.isFormattedNode(node, format));\n        return node;\n    };\n    IsFormatted.prototype.isFormattedNode = function (node, format) {\n        switch (format) {\n            case 'bold':\n                return IsFormatted.isBold(node);\n            case 'italic':\n                return IsFormatted.isItalic(node);\n            case 'underline':\n                return IsFormatted.isUnderline(node);\n            case 'strikethrough':\n                return IsFormatted.isStrikethrough(node);\n            case 'superscript':\n                return IsFormatted.isSuperscript(node);\n            case 'subscript':\n                return IsFormatted.isSubscript(node);\n            case 'fontcolor':\n                return this.isFontColor(node);\n            case 'fontname':\n                return this.isFontName(node);\n            case 'fontsize':\n                return this.isFontSize(node);\n            case 'backgroundcolor':\n                return this.isBackgroundColor(node);\n            default:\n                return false;\n        }\n    };\n    IsFormatted.isBold = function (node) {\n        var validTags = ['strong', 'b'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontWeight === 'bold') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isItalic = function (node) {\n        var validTags = ['em', 'i'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.fontStyle === 'italic') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isUnderline = function (node) {\n        var validTags = ['u'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.textDecoration === 'underline') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isStrikethrough = function (node) {\n        var validTags = ['del', 'strike'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else if (this.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            node.style && node.style.textDecoration === 'line-through') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isSuperscript = function (node) {\n        var validTags = ['sup'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.isSubscript = function (node) {\n        var validTags = ['sub'];\n        if (validTags.indexOf(node.nodeName.toLowerCase()) !== -1) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontColor = function (node) {\n        var color = node.style && node.style.color;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            color !== null && color !== '' && color !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            backColor !== null && backColor !== '' && backColor !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontSize = function (node) {\n        var size = node.style && node.style.fontSize;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            size !== null && size !== '' && size !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    IsFormatted.prototype.isFontName = function (node) {\n        var name = node.style && node.style.fontFamily;\n        if (IsFormatted.inlineTags.indexOf(node.nodeName.toLowerCase()) !== -1 &&\n            name !== null && name !== '' && name !== undefined) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    // Get Formatted Node\n    IsFormatted.inlineTags = [\n        'a',\n        'abbr',\n        'acronym',\n        'b',\n        'bdo',\n        'big',\n        'cite',\n        'code',\n        'dfn',\n        'em',\n        'i',\n        'kbd',\n        'label',\n        'q',\n        'samp',\n        'small',\n        'span',\n        'strong',\n        'sub',\n        'sup',\n        'tt',\n        'u',\n        'var'\n    ];\n    return IsFormatted;\n}());\nexport { IsFormatted };\n","/**\n * `Selection` module is used to handle RTE Selections.\n */\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nvar SelectionCommands = /** @class */ (function () {\n    function SelectionCommands() {\n    }\n    SelectionCommands.applyFormat = function (docElement, format, endNode, value, selector) {\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase', 'fontcolor', 'fontname', 'fontsize', 'backgroundcolor'];\n        if (validFormats.indexOf(format) > -1) {\n            var domSelection = new NodeSelection();\n            var nodeCutter = new NodeCutter();\n            var isFormatted = new IsFormatted();\n            var range = domSelection.getRange(docElement);\n            var save = domSelection.save(range, docElement);\n            var nodes = domSelection.getSelectionNodeCollection(range);\n            var isCollapsed = false;\n            var isFormat = false;\n            var isCursor = false;\n            var isFontStyle = (['fontcolor', 'fontname', 'fontsize', 'backgroundcolor'].indexOf(format) > -1);\n            if (range.collapsed) {\n                if (nodes.length > 0) {\n                    isCollapsed = true;\n                    range = nodeCutter.GetCursorRange(docElement, range, nodes[0]);\n                }\n                else if (range.startContainer.nodeName.toLowerCase() !== 'td') {\n                    var cursorNode = this.insertCursorNode(domSelection, range, isFormatted, nodeCutter, format, value, endNode);\n                    domSelection.endContainer = domSelection.startContainer = domSelection.getNodeArray(cursorNode, true);\n                    domSelection.endOffset = domSelection.startOffset = 1;\n                }\n            }\n            isCursor = range.collapsed;\n            for (var index = 0; index < nodes.length; index++) {\n                var formatNode = isFormatted.getFormattedNode(nodes[index], format, endNode);\n                if (index === 0 && formatNode === null) {\n                    isFormat = true;\n                }\n                if (formatNode !== null && (!isFormat || isFontStyle)) {\n                    nodes[index] = this.removeFormat(nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection);\n                }\n                else {\n                    nodes[index] = this.insertFormat(nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value);\n                }\n                domSelection = this.applySelection(nodes, domSelection, nodeCutter, index, isCollapsed);\n            }\n            if (isIDevice()) {\n                setEditFrameFocus(endNode, selector);\n            }\n            save.restore();\n        }\n    };\n    SelectionCommands.insertCursorNode = function (domSelection, range, isFormatted, nodeCutter, format, value, endNode) {\n        var cursorNodes = domSelection.getNodeCollection(range);\n        var cursorFormat = (cursorNodes.length > 0) ? isFormatted.getFormattedNode(cursorNodes[0], format, endNode) : null;\n        var cursorNode = null;\n        if (cursorFormat) {\n            cursorNode = cursorNodes[0];\n            InsertMethods.unwrap(cursorFormat);\n        }\n        else {\n            cursorNode = this.getInsertNode(range, format, value).firstChild;\n        }\n        return cursorNode;\n    };\n    SelectionCommands.removeFormat = function (nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value, domSelection) {\n        var splitNode = null;\n        if (!(range.startContainer === range.endContainer && range.startOffset === 0\n            && range.endOffset === range.startContainer.length)) {\n            var nodeIndex = [];\n            var cloneNode = nodes[index];\n            do {\n                nodeIndex.push(domSelection.getIndex(cloneNode));\n                cloneNode = cloneNode.parentNode;\n            } while (cloneNode && (cloneNode !== formatNode));\n            cloneNode = splitNode = nodeCutter.GetSpliceNode(range, formatNode);\n            if (!isCursor) {\n                while (cloneNode && cloneNode.childNodes.length > 0 && ((nodeIndex.length - 1) >= 0)\n                    && (cloneNode.childNodes.length > nodeIndex[nodeIndex.length - 1])) {\n                    cloneNode = cloneNode.childNodes[nodeIndex[nodeIndex.length - 1]];\n                    nodeIndex.pop();\n                }\n                if (cloneNode.nodeType === 3 && !(isCursor && cloneNode.nodeValue === '')) {\n                    nodes[index] = cloneNode;\n                }\n                else {\n                    var divNode = document.createElement('div');\n                    divNode.innerHTML = '&#65279;&#65279;';\n                    if (cloneNode.nodeType !== 3) {\n                        cloneNode.insertBefore(divNode.firstChild, cloneNode.firstChild);\n                        nodes[index] = cloneNode.firstChild;\n                    }\n                    else {\n                        cloneNode.parentNode.insertBefore(divNode.firstChild, cloneNode);\n                        nodes[index] = cloneNode.previousSibling;\n                        cloneNode.parentNode.removeChild(cloneNode);\n                    }\n                }\n            }\n            else {\n                var lastNode = splitNode;\n                for (; lastNode.firstChild !== null && lastNode.firstChild.nodeType !== 3; null) {\n                    lastNode = lastNode.firstChild;\n                }\n                lastNode.innerHTML = '&#65279;&#65279;';\n                nodes[index] = lastNode.firstChild;\n            }\n        }\n        var child = InsertMethods.unwrap(formatNode);\n        if (child.length > 0 && isFontStyle) {\n            for (var num = 0; num < child.length; num++) {\n                child[num] = InsertMethods.Wrap(child[num], this.GetFormatNode(format, value));\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.insertFormat = function (nodes, index, formatNode, isCursor, isFormat, isFontStyle, range, nodeCutter, format, value) {\n        if (!isCursor) {\n            if ((formatNode === null && isFormat) || isFontStyle) {\n                nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n                nodes[index].textContent = nodeCutter.TrimLineBreak(nodes[index].textContent);\n                if (format === 'uppercase' || format === 'lowercase') {\n                    nodes[index].textContent = (format === 'uppercase') ? nodes[index].textContent.toLocaleUpperCase()\n                        : nodes[index].textContent.toLocaleLowerCase();\n                }\n                else if (!(isFontStyle === true && value === '')) {\n                    var element = this.GetFormatNode(format, value);\n                    nodes[index] = (index === (nodes.length - 1)) ? InsertMethods.Wrap(nodes[index], element)\n                        : InsertMethods.WrapBefore(nodes[index], element, true);\n                    nodes[index] = this.getChildNode(nodes[index], element);\n                }\n            }\n            else {\n                nodes[index] = nodeCutter.GetSpliceNode(range, nodes[index]);\n            }\n        }\n        else {\n            if (format !== 'uppercase' && format !== 'lowercase') {\n                var element = this.getInsertNode(range, format, value);\n                nodes[index] = element.firstChild;\n                nodeCutter.position = 1;\n            }\n            else {\n                nodeCutter.position = range.startOffset;\n            }\n        }\n        return nodes[index];\n    };\n    SelectionCommands.getInsertNode = function (range, format, value) {\n        var element = this.GetFormatNode(format, value);\n        element.innerHTML = '&#65279;&#65279;';\n        range.insertNode(element);\n        return element;\n    };\n    SelectionCommands.getChildNode = function (node, element) {\n        if (node === undefined || node === null) {\n            element.innerHTML = '&#65279;';\n            node = element.firstChild;\n        }\n        return node;\n    };\n    SelectionCommands.applySelection = function (nodes, domSelection, nodeCutter, index, isCollapsed) {\n        if (nodes.length === 1 && !isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = 0;\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        else if (nodes.length === 1 && isCollapsed) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.endContainer = domSelection.startContainer;\n            domSelection.startOffset = nodeCutter.position;\n            domSelection.endOffset = nodeCutter.position;\n        }\n        else if (index === 0) {\n            domSelection.startContainer = domSelection.getNodeArray(nodes[index], true);\n            domSelection.startOffset = 0;\n        }\n        else if (index === nodes.length - 1) {\n            domSelection.endContainer = domSelection.getNodeArray(nodes[index], false);\n            domSelection.endOffset = nodes[index].textContent.length;\n        }\n        return domSelection;\n    };\n    SelectionCommands.GetFormatNode = function (format, value) {\n        var node;\n        switch (format) {\n            case 'bold':\n                return document.createElement('strong');\n            case 'italic':\n                return document.createElement('em');\n            case 'underline':\n                node = document.createElement('span');\n                node.style.textDecoration = 'underline';\n                return node;\n            case 'strikethrough':\n                node = document.createElement('span');\n                node.style.textDecoration = 'line-through';\n                return node;\n            case 'superscript':\n                return document.createElement('sup');\n            case 'subscript':\n                return document.createElement('sub');\n            case 'fontcolor':\n                node = document.createElement('span');\n                node.style.color = value;\n                node.style.textDecoration = 'inherit';\n                return node;\n            case 'fontname':\n                node = document.createElement('span');\n                node.style.fontFamily = value;\n                return node;\n            case 'fontsize':\n                node = document.createElement('span');\n                node.style.fontSize = value;\n                return node;\n            default:\n                node = document.createElement('span');\n                node.style.backgroundColor = value;\n                return node;\n        }\n    };\n    return SelectionCommands;\n}());\nexport { SelectionCommands };\n","import * as CONSTANT from './../base/constant';\nimport { SelectionCommands } from './selection-commands';\nimport * as EVENTS from './../../common/constant';\n/**\n * Selection EXEC internal component\n * @hidden\n */\nvar SelectionBasedExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function SelectionBasedExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    SelectionBasedExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.SELECTION_TYPE, this.applySelection, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDownHandler, this);\n    };\n    SelectionBasedExec.prototype.keyDownHandler = function (e) {\n        var validFormats = ['bold', 'italic', 'underline', 'strikethrough', 'superscript',\n            'subscript', 'uppercase', 'lowercase'];\n        if (e.event.ctrlKey && validFormats.indexOf(e.event.action) > -1) {\n            e.event.preventDefault();\n            SelectionCommands.applyFormat(this.parent.currentDocument, e.event.action, this.parent.editableElement);\n            this.callBack(e, e.event.action);\n        }\n    };\n    SelectionBasedExec.prototype.applySelection = function (e) {\n        SelectionCommands.applyFormat(this.parent.currentDocument, e.subCommand.toLocaleLowerCase(), this.parent.editableElement, e.value, e.selector);\n        this.callBack(e, e.subCommand);\n    };\n    SelectionBasedExec.prototype.callBack = function (event, action) {\n        if (event.callBack) {\n            event.callBack({\n                requestType: action,\n                event: event.event,\n                editorMode: 'HTML',\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return SelectionBasedExec;\n}());\nexport { SelectionBasedExec };\n","import * as CONSTANT from './../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Selection EXEC internal component\n * @hidden\n */\nvar InsertHtmlExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function InsertHtmlExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    InsertHtmlExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERTHTML_TYPE, this.applyHtml, this);\n    };\n    InsertHtmlExec.prototype.applyHtml = function (e) {\n        InsertHtml.Insert(this.parent.currentDocument, e.value, this.parent.editableElement);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return InsertHtmlExec;\n}());\nexport { InsertHtmlExec };\n","/**\n * `Clear Format` module is used to handle Clear Format.\n */\nimport { NodeSelection } from './../../selection/index';\nimport { NodeCutter } from './nodecutter';\nimport { InsertMethods } from './insert-methods';\nimport { IsFormatted } from './isformatted';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\nvar ClearFormat = /** @class */ (function () {\n    function ClearFormat() {\n    }\n    ClearFormat.clear = function (docElement, endNode, selector) {\n        var nodeSelection = new NodeSelection();\n        var nodeCutter = new NodeCutter();\n        var range = nodeSelection.getRange(docElement);\n        var isCollapsed = range.collapsed;\n        var nodes = nodeSelection.getInsertNodeCollection(range);\n        var save = nodeSelection.save(range, docElement);\n        if (!isCollapsed) {\n            var preNode = nodeCutter.GetSpliceNode(range, nodes[0]);\n            if (nodes.length === 1) {\n                nodeSelection.setSelectionContents(docElement, preNode);\n                range = nodeSelection.getRange(docElement);\n            }\n            else {\n                var lasNode = nodeCutter.GetSpliceNode(range, nodes[nodes.length - 1]);\n                nodeSelection.setSelectionText(docElement, preNode, lasNode, 0, (lasNode.nodeType === 3) ?\n                    lasNode.textContent.length : lasNode.childNodes.length);\n                range = nodeSelection.getRange(docElement);\n            }\n            var exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneSelectNodes = exactNodes.slice();\n            this.clearInlines(nodeSelection.getSelectionNodes(cloneSelectNodes), cloneSelectNodes, nodeSelection.getRange(docElement), nodeCutter, endNode);\n            this.reSelection(docElement, save, exactNodes);\n            range = nodeSelection.getRange(docElement);\n            exactNodes = nodeSelection.getNodeCollection(range);\n            var cloneParentNodes = exactNodes.slice();\n            this.clearBlocks(docElement, cloneParentNodes, endNode, nodeCutter, nodeSelection);\n            if (isIDevice()) {\n                setEditFrameFocus(endNode, selector);\n            }\n            this.reSelection(docElement, save, exactNodes);\n        }\n    };\n    ClearFormat.reSelection = function (docElement, save, exactNodes) {\n        var selectionNodes = save.getInsertNodes(exactNodes);\n        save.startContainer = save.getNodeArray(selectionNodes[0], true, docElement);\n        save.startOffset = 0;\n        save.endContainer = save.getNodeArray(selectionNodes[selectionNodes.length - 1], false, docElement);\n        var endIndexNode = selectionNodes[selectionNodes.length - 1];\n        save.endOffset = (endIndexNode.nodeType === 3) ? endIndexNode.textContent.length\n            : endIndexNode.childNodes.length;\n        save.restore();\n    };\n    ClearFormat.clearBlocks = function (docElement, nodes, endNode, nodeCutter, nodeSelection) {\n        var parentNodes = [];\n        for (var index = 0; index < nodes.length; index++) {\n            if (this.BLOCK_TAGS.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1\n                && parentNodes.indexOf(nodes[index]) === -1) {\n                parentNodes.push(nodes[index]);\n            }\n            else if ((this.BLOCK_TAGS.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1)\n                && parentNodes.indexOf(nodes[index].parentNode) === -1\n                && endNode !== nodes[index].parentNode) {\n                parentNodes.push(nodes[index].parentNode);\n            }\n        }\n        parentNodes = this.spliceParent(parentNodes, nodes)[0];\n        parentNodes = this.removeParent(parentNodes);\n        this.unWrap(docElement, parentNodes, nodeCutter, nodeSelection);\n    };\n    ClearFormat.spliceParent = function (parentNodes, nodes) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            var len = parentNodes[index1].childNodes.length;\n            for (var index2 = 0; index2 < len; index2++) {\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) > 0)\n                    && (parentNodes[index1].childNodes[index2].childNodes.length > 0)) {\n                    nodes = this.spliceParent([parentNodes[index1].childNodes[index2]], nodes)[1];\n                }\n                if ((nodes.indexOf(parentNodes[index1].childNodes[index2]) <= -1) &&\n                    (parentNodes[index1].childNodes[index2].textContent.trim() !== '')) {\n                    for (var index3 = 0; index3 < len; index3++) {\n                        if (nodes.indexOf(parentNodes[index1].childNodes[index3]) > -1) {\n                            nodes.splice(nodes.indexOf(parentNodes[index1].childNodes[index3]), 1);\n                        }\n                    }\n                    index2 = parentNodes[index1].childNodes.length;\n                    var parentIndex = parentNodes.indexOf(parentNodes[index1].parentNode);\n                    var nodeIndex = nodes.indexOf(parentNodes[index1].parentNode);\n                    if (parentIndex > -1) {\n                        parentNodes.splice(parentIndex, 1);\n                    }\n                    if (nodeIndex > -1) {\n                        nodes.splice(nodeIndex, 1);\n                    }\n                    var elementIndex = nodes.indexOf(parentNodes[index1]);\n                    if (elementIndex > -1) {\n                        nodes.splice(elementIndex, 1);\n                    }\n                    parentNodes.splice(index1, 1);\n                    index1--;\n                }\n            }\n        }\n        return [parentNodes, nodes];\n    };\n    ClearFormat.removeChild = function (parentNodes, parentNode) {\n        var count = parentNode.childNodes.length;\n        if (count > 0) {\n            for (var index = 0; index < count; index++) {\n                if (parentNodes.indexOf(parentNode.childNodes[index]) > -1) {\n                    parentNodes = this.removeChild(parentNodes, parentNode.childNodes[index]);\n                    parentNodes.splice(parentNodes.indexOf(parentNode.childNodes[index]), 1);\n                }\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.removeParent = function (parentNodes) {\n        for (var index = 0; index < parentNodes.length; index++) {\n            if (parentNodes.indexOf(parentNodes[index].parentNode) > -1) {\n                parentNodes = this.removeChild(parentNodes, parentNodes[index]);\n                parentNodes.splice(index, 1);\n                index--;\n            }\n        }\n        return parentNodes;\n    };\n    ClearFormat.unWrap = function (docElement, parentNodes, nodeCutter, nodeSelection) {\n        for (var index1 = 0; index1 < parentNodes.length; index1++) {\n            if (this.NONVALID_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) > -1\n                && parentNodes[index1].parentNode\n                && this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].parentNode.nodeName.toLowerCase()) > -1) {\n                nodeSelection.setSelectionText(docElement, parentNodes[index1], parentNodes[index1], 0, parentNodes[index1].childNodes.length);\n                InsertMethods.unwrap(nodeCutter.GetSpliceNode(nodeSelection.getRange(docElement), parentNodes[index1].parentNode));\n            }\n            if (parentNodes[index1].nodeName.toLocaleLowerCase() !== 'p') {\n                if (this.NONVALID_PARENT_TAGS.indexOf(parentNodes[index1].nodeName.toLowerCase()) < 0\n                    && parentNodes[index1].parentNode.nodeName.toLocaleLowerCase() !== 'p'\n                    && !(parentNodes[index1].childNodes.length === 1\n                        && parentNodes[index1].childNodes[0].nodeName.toLocaleLowerCase() === 'p')) {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                }\n                var childNodes = InsertMethods.unwrap(parentNodes[index1]);\n                if (childNodes.length === 1\n                    && childNodes[0].parentNode.nodeName.toLocaleLowerCase() === 'p') {\n                    InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                    InsertMethods.unwrap(parentNodes[index1]);\n                }\n                for (var index2 = 0; index2 < childNodes.length; index2++) {\n                    if (this.NONVALID_TAGS.indexOf(childNodes[index2].nodeName.toLowerCase()) > -1) {\n                        this.unWrap(docElement, [childNodes[index2]], nodeCutter, nodeSelection);\n                    }\n                    else if (this.BLOCK_TAGS.indexOf(childNodes[index2].nodeName.toLocaleLowerCase()) > -1 &&\n                        childNodes[index2].nodeName.toLocaleLowerCase() !== 'p') {\n                        var blockNodes = this.removeParent([childNodes[index2]]);\n                        this.unWrap(docElement, blockNodes, nodeCutter, nodeSelection);\n                    }\n                }\n            }\n            else {\n                InsertMethods.Wrap(parentNodes[index1], docElement.createElement('p'));\n                InsertMethods.unwrap(parentNodes[index1]);\n            }\n        }\n    };\n    ClearFormat.clearInlines = function (textNodes, nodes, range, nodeCutter, endNode) {\n        for (var index = 0; index < textNodes.length; index++) {\n            if (textNodes[index].parentNode &&\n                IsFormatted.inlineTags.indexOf(textNodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1) {\n                nodeCutter.GetSpliceNode(range, textNodes[index].parentNode);\n                this.removeInlineParent(textNodes[index].parentNode);\n            }\n        }\n    };\n    ClearFormat.removeInlineParent = function (textNodes) {\n        var nodes = InsertMethods.unwrap(textNodes);\n        for (var index = 0; index < nodes.length; index++) {\n            if (nodes[index].parentNode.childNodes.length === 1\n                && IsFormatted.inlineTags.indexOf(nodes[index].parentNode.nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index].parentNode);\n            }\n            else if (IsFormatted.inlineTags.indexOf(nodes[index].nodeName.toLocaleLowerCase()) > -1) {\n                this.removeInlineParent(nodes[index]);\n            }\n        }\n    };\n    ClearFormat.BLOCK_TAGS = ['address', 'article', 'aside', 'blockquote',\n        'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer',\n        'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'li', 'main', 'nav',\n        'noscript', 'ol', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th',\n        'thead', 'tr', 'ul'];\n    ClearFormat.NONVALID_PARENT_TAGS = ['thead', 'tbody', 'ul', 'ol', 'table', 'tfoot', 'tr'];\n    ClearFormat.NONVALID_TAGS = ['thead', 'tbody', 'figcaption', 'td', 'tr',\n        'th', 'tfoot', 'figcaption', 'li'];\n    return ClearFormat;\n}());\nexport { ClearFormat };\n","import * as CONSTANT from './../base/constant';\nimport { ClearFormat } from './clearformat';\nimport * as EVENTS from './../../common/constant';\n/**\n * Clear Format EXEC internal component\n * @hidden\n */\nvar ClearFormatExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the Formats plugin\n     * @hidden\n     */\n    function ClearFormatExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    ClearFormatExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_TYPE, this.applyClear, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ClearFormatExec.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'clear-format':\n                this.applyClear({ subCommand: 'ClearFormat', callBack: e.callBack });\n                e.event.preventDefault();\n                break;\n        }\n    };\n    ClearFormatExec.prototype.applyClear = function (e) {\n        if (e.subCommand === 'ClearFormat') {\n            ClearFormat.clear(this.parent.currentDocument, this.parent.editableElement, e.selector);\n            if (e.callBack) {\n                e.callBack({\n                    requestType: e.subCommand,\n                    event: e.event,\n                    editorMode: 'HTML',\n                    range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n                });\n            }\n        }\n    };\n    return ClearFormatExec;\n}());\nexport { ClearFormatExec };\n","import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    };\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * RTE collection stored html format.\n     * @method saveData\n     * @return {void}\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        var range = new NodeSelection().getRange(this.parent.currentDocument);\n        var save = new NodeSelection().save(range, this.parent.currentDocument);\n        var htmlText = this.parent.editableElement.innerHTML;\n        var changEle = { text: htmlText, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].text.trim() === changEle.text.trim())) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     * @method undo\n     * @return {void}\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = removedContent;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     * @method redo\n     * @return {void}\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            this.parent.editableElement.innerHTML = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n","import * as EVENTS from '../../common/constant';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * PasteCleanup for MsWord content\n * @hidden\n */\nvar MsWordPaste = /** @class */ (function () {\n    function MsWordPaste(parent) {\n        this.olData = [\n            'decimal',\n            'lower-alpha',\n            'lower-roman',\n            'upper-alpha',\n            'upper-roman',\n            'lower-greek'\n        ];\n        this.ulData = [\n            'disc',\n            'square',\n            'circle',\n            'disc',\n            'square',\n            'circle'\n        ];\n        this.ignorableNodes = ['A', 'APPLET', 'B', 'BLOCKQUOTE', 'BR',\n            'BUTTON', 'CENTER', 'CODE', 'COL', 'COLGROUP', 'DD', 'DEL', 'DFN', 'DIR', 'DIV',\n            'DL', 'DT', 'EM', 'FIELDSET', 'FONT', 'FORM', 'FRAME', 'FRAMESET', 'H1', 'H2',\n            'H3', 'H4', 'H5', 'H6', 'HR', 'I', 'IMG', 'IFRAME', 'INPUT', 'INS', 'LABEL',\n            'LI', 'OL', 'OPTION', 'P', 'PARAM', 'PRE', 'Q', 'S', 'SELECT', 'SPAN', 'STRIKE',\n            'STRONG', 'SUB', 'SUP', 'TABLE', 'TBODY', 'TD', 'TEXTAREA', 'TFOOT', 'TH',\n            'THEAD', 'TITLE', 'TR', 'TT', 'U', 'UL'];\n        this.blockNode = ['div', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset',\n            'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript',\n            'object', 'ol', 'pre', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul',\n            'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n        this.listContents = [];\n        this.parent = parent;\n        this.addEventListener();\n    }\n    MsWordPaste.prototype.addEventListener = function () {\n        this.parent.observer.on(EVENTS.MS_WORD_CLEANUP_PLUGIN, this.wordCleanup, this);\n    };\n    MsWordPaste.prototype.wordCleanup = function (e) {\n        var listNodes = [];\n        var tempHTMLContent = e.args.clipboardData.getData('text/HTML');\n        var elm = createElement('p');\n        elm.innerHTML = tempHTMLContent;\n        var patern = /class='?Mso|style='[^ ]*\\bmso-/i;\n        if (patern.test(tempHTMLContent)) {\n            tempHTMLContent = tempHTMLContent.replace(/<img[^>]+>/i, '');\n            listNodes = this.cleanUp(elm, listNodes);\n            this.listConverter(listNodes);\n            e.callBack(elm.innerHTML);\n        }\n        else {\n            e.callBack(elm.innerHTML);\n        }\n    };\n    MsWordPaste.prototype.cleanUp = function (node, listNodes) {\n        var temp = '';\n        var tempCleaner = [];\n        var prevflagState;\n        for (var index = 0; index < node.childNodes.length; index++) {\n            if (this.ignorableNodes.indexOf(node.childNodes[index].nodeName) === -1 ||\n                (node.childNodes[index].nodeType === 3 && node.childNodes[index].textContent.trim() === '')) {\n                tempCleaner.push(node.childNodes[index]);\n                continue;\n            }\n            else if (node.childNodes[index].className &&\n                node.childNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1) {\n                listNodes.push(node.childNodes[index]);\n            }\n            if (prevflagState && (this.blockNode.indexOf(node.childNodes[index].nodeName.toLowerCase()) !== -1) &&\n                !(node.childNodes[index].className &&\n                    node.childNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1)) {\n                listNodes.push(null);\n            }\n            if (this.blockNode.indexOf(node.childNodes[index].nodeName.toLowerCase()) !== -1) {\n                if (node.childNodes[index].className &&\n                    node.childNodes[index].className.toLowerCase().indexOf('msolistparagraph') !== -1) {\n                    prevflagState = true;\n                }\n                else {\n                    prevflagState = false;\n                }\n            }\n        }\n        if (listNodes.length && (listNodes[listNodes.length - 1] !== null)) {\n            listNodes.push(null);\n        }\n        return listNodes;\n    };\n    MsWordPaste.prototype.listConverter = function (listNodes) {\n        var level;\n        var data = [];\n        var collection = [];\n        var content = '';\n        var stNode;\n        for (var i = 0; i < listNodes.length; i++) {\n            if (listNodes[i] === null) {\n                data.push({ content: this.makeConversion(collection), node: listNodes[i - 1] });\n                collection = [];\n                continue;\n            }\n            content = listNodes[i].getAttribute('style');\n            if (content && content.indexOf('level') !== -1) {\n                level = parseInt(content.charAt(content.indexOf('level') + 5), null);\n            }\n            else {\n                level = 1;\n            }\n            this.listContents = [];\n            this.getListContent(listNodes[i]);\n            var type = void 0;\n            type = this.listContents[0].trim().length > 1 ? 'ol' : 'ul';\n            var tempNode = [];\n            for (var j = 1; j < this.listContents.length; j++) {\n                tempNode.push(this.listContents[j]);\n            }\n            collection.push({ listType: type, content: tempNode, nestedLevel: level });\n        }\n        stNode = listNodes.shift();\n        while (stNode) {\n            var elemColl = [];\n            for (var temp1 = 0; temp1 < data.length; temp1++) {\n                if (data[temp1].node === stNode) {\n                    for (var index = 0; index < data[temp1].content.childNodes.length; index++) {\n                        elemColl.push(data[temp1].content.childNodes[index]);\n                    }\n                    for (var index = 0; index < elemColl.length; index++) {\n                        stNode.parentElement.insertBefore(elemColl[index], stNode);\n                    }\n                    break;\n                }\n            }\n            stNode.remove();\n            stNode = listNodes.shift();\n            if (!stNode) {\n                stNode = listNodes.shift();\n            }\n        }\n    };\n    MsWordPaste.prototype.makeConversion = function (collection) {\n        var root = createElement('div');\n        var temp;\n        var pLevel = 1;\n        var prevList;\n        var listCount = 0;\n        var elem;\n        for (var index = 0; index < collection.length; index++) {\n            var pElement = createElement('p');\n            for (var i = 0; i < collection[index].content.length; i++) {\n                var imgPattern = /<img\\s[^>]*?src\\s*=\\s*['\\\"]([^'\\\"]*?)['\\\"][^>]*?>/i;\n                if (imgPattern.test(collection[index].content[i])) {\n                    var imgSpanElement = createElement('span');\n                    imgSpanElement.innerHTML = collection[index].content[i];\n                    pElement.appendChild(imgSpanElement);\n                }\n                else {\n                    pElement.appendChild(document.createTextNode(collection[index].content[i].trim()));\n                }\n            }\n            if ((collection[index].nestedLevel === 1) && listCount === 0 && collection[index].content) {\n                root.appendChild(temp = createElement(collection[index].listType));\n                prevList = createElement('li');\n                prevList.appendChild(pElement);\n                temp.appendChild(prevList);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n                temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n            }\n            else if (collection[index].nestedLevel === pLevel) {\n                if (prevList.parentElement.tagName.toLowerCase() === collection[index].listType) {\n                    prevList.parentElement.appendChild(prevList = createElement('li'));\n                    prevList.appendChild(pElement);\n                }\n                else {\n                    temp = createElement(collection[index].listType);\n                    prevList.parentElement.parentElement.appendChild(temp);\n                    prevList = createElement('li');\n                    prevList.appendChild(pElement);\n                    temp.appendChild(prevList);\n                    temp.setAttribute('level', collection[index].nestedLevel.toString());\n                }\n            }\n            else if (collection[index].nestedLevel > pLevel) {\n                for (var j = 0; j < collection[index].nestedLevel - pLevel; j++) {\n                    prevList.appendChild(temp = createElement(collection[index].listType));\n                    prevList = createElement('li', { styles: 'list-style-type: none;' });\n                    temp.appendChild(prevList);\n                }\n                prevList.appendChild(pElement);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n                temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n                temp.childNodes[0].style.listStyle =\n                    this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n            }\n            else if (collection[index].nestedLevel === 1) {\n                if (root.lastChild.tagName.toLowerCase() === collection[index].listType) {\n                    temp = root.lastChild;\n                }\n                else {\n                    root.appendChild(temp = createElement(collection[index].listType));\n                }\n                prevList = createElement('li');\n                prevList.appendChild(pElement);\n                temp.appendChild(prevList);\n                temp.setAttribute('level', collection[index].nestedLevel.toString());\n                temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n            }\n            else {\n                elem = prevList;\n                while (elem.parentElement) {\n                    elem = elem.parentElement;\n                    if (elem.attributes.getNamedItem('level')) {\n                        if (parseInt(elem.attributes.getNamedItem('level').textContent, null) === collection[index].nestedLevel) {\n                            prevList = createElement('li');\n                            prevList.appendChild(pElement);\n                            elem.appendChild(prevList);\n                            break;\n                        }\n                        else if (collection[index].nestedLevel > parseInt(elem.attributes.getNamedItem('level').textContent, null)) {\n                            elem.appendChild(temp = createElement(collection[index].listType));\n                            prevList = createElement('li');\n                            prevList.appendChild(pElement);\n                            temp.appendChild(prevList);\n                            temp.setAttribute('level', collection[index].nestedLevel.toString());\n                            temp.style.listStyle = this.getListStyle(collection[index].listType, collection[index].nestedLevel);\n                            break;\n                        }\n                    }\n                    continue;\n                }\n            }\n            pLevel = collection[index].nestedLevel;\n            listCount++;\n        }\n        return root;\n    };\n    MsWordPaste.prototype.getListStyle = function (listType, nestedLevel) {\n        nestedLevel = (nestedLevel > 0) ? nestedLevel - 1 : nestedLevel;\n        if (listType === 'ol') {\n            return (nestedLevel < this.olData.length ? this.olData[nestedLevel] : this.olData[0]);\n        }\n        else {\n            return (nestedLevel < this.ulData.length ? this.ulData[nestedLevel] : this.ulData[0]);\n        }\n    };\n    MsWordPaste.prototype.getListContent = function (elem) {\n        if (elem.nodeType === 3 && elem.textContent.trim().length > 0) {\n            this.listContents.push(elem.textContent.trim());\n        }\n        else if (elem.tagName === 'IMG') {\n            var tempElem = createElement('div');\n            tempElem.appendChild(elem);\n            this.listContents.push(tempElem.innerHTML);\n        }\n        if (elem.firstChild) {\n            elem = elem.firstChild;\n            do {\n                this.getListContent(elem);\n                elem = elem.nextSibling;\n            } while (elem);\n        }\n    };\n    return MsWordPaste;\n}());\nexport { MsWordPaste };\n","import * as CONSTANT from '../base/constant';\nimport { InsertHtml } from './inserthtml';\n/**\n * Insert a Text Node or Text\n * @hidden\n */\nvar InsertTextExec = /** @class */ (function () {\n    /**\n     * Constructor for creating the InsertText plugin\n     * @hidden\n     */\n    function InsertTextExec(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    InsertTextExec.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.INSERT_TEXT_TYPE, this.insertText, this);\n    };\n    InsertTextExec.prototype.insertText = function (e) {\n        var node = document.createTextNode(e.value);\n        InsertHtml.Insert(this.parent.currentDocument, node);\n        if (e.callBack) {\n            e.callBack({\n                requestType: e.subCommand,\n                editorMode: 'HTML',\n                event: e.event,\n                range: this.parent.nodeSelection.getRange(this.parent.currentDocument),\n                elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)\n            });\n        }\n    };\n    return InsertTextExec;\n}());\nexport { InsertTextExec };\n","import { Observer } from '@syncfusion/ej2-base';\nimport * as CONSTANT from './constant';\nimport { Lists } from './../plugin/lists';\nimport { NodeSelection } from './../../selection/index';\nimport { DOMNode } from './../plugin/dom-node';\nimport { Formats } from './../plugin/formats';\nimport { LinkCommand } from './../plugin/link';\nimport { Alignments } from './../plugin/alignments';\nimport { Indents } from './../plugin/indents';\nimport { ImageCommand } from './../plugin/image';\nimport { TableCommand } from './../plugin/table';\nimport { SelectionBasedExec } from './../plugin/selection-exec';\nimport { InsertHtmlExec } from './../plugin/inserthtml-exec';\nimport { ClearFormatExec } from './../plugin/clearformat-exec';\nimport { UndoRedoManager } from './../plugin/undo';\nimport { MsWordPaste } from '../plugin/ms-word-clean-up';\nimport * as EVENTS from './../../common/constant';\nimport { InsertTextExec } from '../plugin/insert-text';\n/**\n * EditorManager internal component\n * @hidden\n */\nvar EditorManager = /** @class */ (function () {\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function EditorManager(options) {\n        this.currentDocument = options.document;\n        this.editableElement = options.editableElement;\n        this.nodeSelection = new NodeSelection();\n        this.domNode = new DOMNode(this.editableElement, this.currentDocument);\n        this.observer = new Observer(this);\n        this.listObj = new Lists(this);\n        this.formatObj = new Formats(this);\n        this.alignmentObj = new Alignments(this);\n        this.indentsObj = new Indents(this);\n        this.linkObj = new LinkCommand(this);\n        this.imgObj = new ImageCommand(this);\n        this.selectionObj = new SelectionBasedExec(this);\n        this.inserthtmlObj = new InsertHtmlExec(this);\n        this.insertTextObj = new InsertTextExec(this);\n        this.clearObj = new ClearFormatExec(this);\n        this.tableObj = new TableCommand(this);\n        this.undoRedoManager = new UndoRedoManager(this, options.options);\n        this.msWordPaste = new MsWordPaste(this);\n        this.wireEvents();\n    }\n    EditorManager.prototype.wireEvents = function () {\n        this.observer.on(EVENTS.KEY_DOWN, this.editorKeyDown, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.KEY_UP, this.editorKeyUp, this);\n        this.observer.on(EVENTS.MODEL_CHANGED, this.onPropertyChanged, this);\n        this.observer.on(EVENTS.MS_WORD_CLEANUP, this.onWordPaste, this);\n    };\n    EditorManager.prototype.onWordPaste = function (e) {\n        this.observer.notify(EVENTS.MS_WORD_CLEANUP_PLUGIN, e);\n    };\n    EditorManager.prototype.onPropertyChanged = function (props) {\n        this.observer.notify(EVENTS.MODEL_CHANGED_PLUGIN, props);\n    };\n    EditorManager.prototype.editorKeyDown = function (e) {\n        this.observer.notify(EVENTS.KEY_DOWN_HANDLER, e);\n    };\n    EditorManager.prototype.editorKeyUp = function (e) {\n        this.observer.notify(EVENTS.KEY_UP_HANDLER, e);\n    };\n    EditorManager.prototype.execCommand = function (command, value, event, callBack, text, exeValue, selector) {\n        switch (command.toLocaleLowerCase()) {\n            case 'lists':\n                this.observer.notify(EVENTS.LIST_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'formats':\n                this.observer.notify(EVENTS.FORMAT_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'alignments':\n                this.observer.notify(CONSTANT.ALIGNMENT_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'indents':\n                this.observer.notify(CONSTANT.INDENT_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'links':\n                this.observer.notify(CONSTANT.LINK, { command: command, value: value, item: exeValue, event: event, callBack: callBack });\n                break;\n            case 'images':\n                this.observer.notify(CONSTANT.IMAGE, { command: command, value: value, item: exeValue, event: event, callBack: callBack });\n                break;\n            case 'table':\n                switch (value.toString().toLocaleLowerCase()) {\n                    case 'createtable':\n                        this.observer.notify(CONSTANT.TABLE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'insertrowbefore':\n                    case 'insertrowafter':\n                        this.observer.notify(CONSTANT.INSERT_ROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'insertcolumnleft':\n                    case 'insertcolumnright':\n                        this.observer.notify(CONSTANT.INSERT_COLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deleterow':\n                        this.observer.notify(CONSTANT.DELETEROW, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'deletecolumn':\n                        this.observer.notify(CONSTANT.DELETECOLUMN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableremove':\n                        this.observer.notify(CONSTANT.REMOVETABLE, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'tableheader':\n                        this.observer.notify(CONSTANT.TABLEHEADER, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                    case 'aligntop':\n                    case 'alignmiddle':\n                    case 'alignbottom':\n                        this.observer.notify(CONSTANT.TABLE_VERTICAL_ALIGN, { item: exeValue, event: event, callBack: callBack });\n                        break;\n                }\n                break;\n            case 'font':\n            case 'style':\n            case 'effects':\n            case 'casing':\n                this.observer.notify(CONSTANT.SELECTION_TYPE, { subCommand: value, event: event, callBack: callBack, value: text, selector: selector });\n                break;\n            case 'inserthtml':\n                this.observer.notify(CONSTANT.INSERTHTML_TYPE, { subCommand: value, callBack: callBack, value: text });\n                break;\n            case 'inserttext':\n                this.observer.notify(CONSTANT.INSERT_TEXT_TYPE, { subCommand: value, callBack: callBack, value: text });\n                break;\n            case 'clear':\n                this.observer.notify(CONSTANT.CLEAR_TYPE, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n            case 'actions':\n                this.observer.notify(EVENTS.ACTION, { subCommand: value, event: event, callBack: callBack, selector: selector });\n                break;\n        }\n    };\n    return EditorManager;\n}());\nexport { EditorManager };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Formatter } from './formatter';\nimport { EditorManager } from './../../editor-manager/base/editor-manager';\nimport { extend } from '@syncfusion/ej2-base';\nimport { htmlKeyConfig } from './../../common/config';\n/**\n * HTML adapter\n * @hidden\n */\nvar HTMLFormatter = /** @class */ (function (_super) {\n    __extends(HTMLFormatter, _super);\n    function HTMLFormatter(options) {\n        var _this = _super.call(this) || this;\n        _this.initialize();\n        extend(_this, _this, options, true);\n        if (_this.currentDocument && _this.element) {\n            _this.updateFormatter(_this.element, _this.currentDocument, options.options);\n        }\n        return _this;\n    }\n    HTMLFormatter.prototype.initialize = function () {\n        this.keyConfig = htmlKeyConfig;\n    };\n    /**\n     * Update the formatter of RichTextEditor\n     * @param  {Element} editElement\n     * @param  {Document} doc\n     */\n    HTMLFormatter.prototype.updateFormatter = function (editElement, doc, options) {\n        if (editElement && doc) {\n            this.editorManager = new EditorManager({\n                document: doc,\n                editableElement: editElement,\n                options: options\n            });\n        }\n    };\n    return HTMLFormatter;\n}(Formatter));\nexport { HTMLFormatter };\n","import { IsFormatted } from './isformatted';\nimport * as CONSTANT from './../base/constant';\nimport { NodeSelection } from './../../selection/index';\n/**\n * Update Toolbar Status\n * @hidden\n */\nexport var statusCollection = {\n    bold: false,\n    italic: false,\n    subscript: false,\n    superscript: false,\n    strikethrough: false,\n    orderedlist: false,\n    unorderedlist: false,\n    underline: false,\n    alignments: null,\n    backgroundcolor: null,\n    fontcolor: null,\n    fontname: null,\n    fontsize: null,\n    formats: null,\n    createlink: false\n};\nvar ToolbarStatus = /** @class */ (function () {\n    function ToolbarStatus() {\n    }\n    ToolbarStatus.get = function (docElement, targetNode, formatNode, fontSize, fontName, documentNode) {\n        var formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeCollection = JSON.parse(JSON.stringify(statusCollection));\n        var nodeSelection = new NodeSelection();\n        var nodes = documentNode ? [documentNode] : nodeSelection.getNodeCollection(nodeSelection.getRange(docElement));\n        for (var index = 0; index < nodes.length; index++) {\n            if (nodes[index].nodeType !== 3) {\n                nodes.splice(index, 1);\n                index--;\n            }\n        }\n        for (var index = 0; index < nodes.length; index++) {\n            formatCollection = this.getFormatParent(docElement, formatCollection, nodes[index], targetNode, formatNode, fontSize, fontName);\n            if ((index === 0 && formatCollection.bold) || !formatCollection.bold) {\n                nodeCollection.bold = formatCollection.bold;\n            }\n            if ((index === 0 && formatCollection.italic) || !formatCollection.italic) {\n                nodeCollection.italic = formatCollection.italic;\n            }\n            if ((index === 0 && formatCollection.underline) || !formatCollection.underline) {\n                nodeCollection.underline = formatCollection.underline;\n            }\n            if ((index === 0 && formatCollection.strikethrough) || !formatCollection.strikethrough) {\n                nodeCollection.strikethrough = formatCollection.strikethrough;\n            }\n            if ((index === 0 && formatCollection.superscript) || !formatCollection.superscript) {\n                nodeCollection.superscript = formatCollection.superscript;\n            }\n            if ((index === 0 && formatCollection.subscript) || !formatCollection.subscript) {\n                nodeCollection.subscript = formatCollection.subscript;\n            }\n            if ((index === 0 && formatCollection.fontcolor) || !formatCollection.fontcolor) {\n                nodeCollection.fontcolor = formatCollection.fontcolor;\n            }\n            if ((index === 0 && formatCollection.fontname) || !formatCollection.fontname) {\n                nodeCollection.fontname = formatCollection.fontname;\n            }\n            if ((index === 0 && formatCollection.fontsize) || !formatCollection.fontsize) {\n                nodeCollection.fontsize = formatCollection.fontsize;\n            }\n            if ((index === 0 && formatCollection.backgroundcolor) || !formatCollection.backgroundcolor) {\n                nodeCollection.backgroundcolor = formatCollection.backgroundcolor;\n            }\n            if ((index === 0 && formatCollection.orderedlist) || !formatCollection.orderedlist) {\n                nodeCollection.orderedlist = formatCollection.orderedlist;\n            }\n            if ((index === 0 && formatCollection.unorderedlist) || !formatCollection.unorderedlist) {\n                nodeCollection.unorderedlist = formatCollection.unorderedlist;\n            }\n            if ((index === 0 && formatCollection.alignments) || !formatCollection.alignments) {\n                nodeCollection.alignments = formatCollection.alignments;\n            }\n            if ((index === 0 && formatCollection.formats) || !formatCollection.formats) {\n                nodeCollection.formats = formatCollection.formats;\n            }\n            if ((index === 0 && formatCollection.createlink) || !formatCollection.createlink) {\n                nodeCollection.createlink = formatCollection.createlink;\n            }\n            formatCollection = JSON.parse(JSON.stringify(statusCollection));\n        }\n        return nodeCollection;\n    };\n    ToolbarStatus.getFormatParent = function (docElement, formatCollection, node, targetNode, formatNode, fontSize, fontName) {\n        if (targetNode.contains(node) ||\n            (node.nodeType === 3 && targetNode.nodeType !== 3 && targetNode.contains(node.parentNode))) {\n            do {\n                formatCollection = this.isFormattedNode(docElement, formatCollection, node, formatNode, fontSize, fontName);\n                node = node.parentNode;\n            } while (node && (node !== targetNode));\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFormattedNode = function (docElement, formatCollection, node, formatNode, fontSize, fontName) {\n        if (!formatCollection.bold) {\n            formatCollection.bold = IsFormatted.isBold(node);\n        }\n        if (!formatCollection.italic) {\n            formatCollection.italic = IsFormatted.isItalic(node);\n        }\n        if (!formatCollection.underline) {\n            formatCollection.underline = IsFormatted.isUnderline(node);\n        }\n        if (!formatCollection.strikethrough) {\n            formatCollection.strikethrough = IsFormatted.isStrikethrough(node);\n        }\n        if (!formatCollection.superscript) {\n            formatCollection.superscript = IsFormatted.isSuperscript(node);\n        }\n        if (!formatCollection.subscript) {\n            formatCollection.subscript = IsFormatted.isSubscript(node);\n        }\n        if (!formatCollection.fontcolor) {\n            formatCollection.fontcolor = this.isFontColor(docElement, node);\n        }\n        if (!formatCollection.fontname) {\n            formatCollection.fontname = this.isFontName(docElement, node, fontName);\n        }\n        if (!formatCollection.fontsize) {\n            formatCollection.fontsize = this.isFontSize(node, fontSize);\n        }\n        if (!formatCollection.backgroundcolor) {\n            formatCollection.backgroundcolor = this.isBackgroundColor(node);\n        }\n        if (!formatCollection.orderedlist) {\n            formatCollection.orderedlist = this.isOrderedList(node);\n        }\n        if (!formatCollection.unorderedlist) {\n            formatCollection.unorderedlist = this.isUnorderedList(node);\n        }\n        if (!formatCollection.alignments) {\n            formatCollection.alignments = this.isAlignment(node);\n        }\n        if (!formatCollection.formats) {\n            formatCollection.formats = this.isFormats(node, formatNode);\n        }\n        if (!formatCollection.createlink) {\n            formatCollection.createlink = this.isLink(node);\n        }\n        return formatCollection;\n    };\n    ToolbarStatus.isFontColor = function (docElement, node) {\n        var color = node.style && node.style.color;\n        if ((color === null || color === undefined || color === '') && node.nodeType !== 3) {\n            color = this.getComputedStyle(docElement, node, 'color');\n        }\n        if (color !== null && color !== '' && color !== undefined) {\n            return color;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isLink = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'a') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isBackgroundColor = function (node) {\n        var backColor = node.style && node.style.backgroundColor;\n        if (backColor !== null && backColor !== '' && backColor !== undefined) {\n            return backColor;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontSize = function (node, fontSize) {\n        var size = node.style && node.style.fontSize;\n        if ((size !== null && size !== '' && size !== undefined)\n            && (fontSize === null || fontSize === undefined || (fontSize.indexOf(size) > -1))) {\n            return size;\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFontName = function (docElement, node, fontName) {\n        var name = node.style && node.style.fontFamily;\n        if ((name === null || name === undefined || name === '') && node.nodeType !== 3) {\n            name = this.getComputedStyle(docElement, node, 'font-family');\n        }\n        var index = null;\n        if ((name !== null && name !== '' && name !== undefined)\n            && (fontName === null || fontName === undefined || (fontName.filter(function (value, pos) {\n                var pattern = new RegExp(name, 'i');\n                if ((value.replace(/\"/g, '').replace(/ /g, '') === name.replace(/\"/g, '').replace(/ /g, '')) ||\n                    (value.search(pattern) > -1)) {\n                    index = pos;\n                }\n            }) && (index !== null)))) {\n            return (index !== null) ? fontName[index] : name.replace(/\"/g, '');\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isOrderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ol') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isUnorderedList = function (node) {\n        if (node.nodeName.toLocaleLowerCase() === 'ul') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ToolbarStatus.isAlignment = function (node) {\n        var align = node.style && node.style.textAlign;\n        if (align === 'left') {\n            return 'justifyleft';\n        }\n        else if (align === 'center') {\n            return 'justifycenter';\n        }\n        else if (align === 'right') {\n            return 'justifyright';\n        }\n        else if (align === 'justify') {\n            return 'justifyfull';\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.isFormats = function (node, formatNode) {\n        if (((formatNode === undefined || formatNode === null)\n            && CONSTANT.BLOCK_TAGS.indexOf(node.nodeName.toLocaleLowerCase()) > -1)\n            || (formatNode !== null && formatNode !== undefined\n                && formatNode.indexOf(node.nodeName.toLocaleLowerCase()) > -1)) {\n            return node.nodeName.toLocaleLowerCase();\n        }\n        else {\n            return null;\n        }\n    };\n    ToolbarStatus.getComputedStyle = function (docElement, node, prop) {\n        return docElement.defaultView.getComputedStyle(node, null).getPropertyValue(prop);\n    };\n    return ToolbarStatus;\n}());\nexport { ToolbarStatus };\n","import * as events from '../base/constant';\nimport { ToolbarStatus } from '../../editor-manager/plugin/toolbar-status';\n/**\n * HtmlToolbarStatus module for refresh the toolbar status\n */\nvar HtmlToolbarStatus = /** @class */ (function () {\n    function HtmlToolbarStatus(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    HtmlToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    HtmlToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n    };\n    HtmlToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var fontsize = [];\n        var fontName = [];\n        var formats = [];\n        this.parent.fontSize.items.forEach(function (item) { fontsize.push(item.value); });\n        this.parent.fontFamily.items.forEach(function (item) { fontName.push(item.value); });\n        this.parent.format.types.forEach(function (item) {\n            formats.push(item.value.toLocaleLowerCase());\n        });\n        this.toolbarStatus = ToolbarStatus.get(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel(), formats, fontsize, fontName, args.documentNode);\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n    };\n    return HtmlToolbarStatus;\n}());\nexport { HtmlToolbarStatus };\n","import { getEditValue } from '../base/util';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    /**\n     * The function is used to render RichTextEditor content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-rte-content', id: this.parent.getID() + 'rte-view' });\n        var rteContent = getEditValue(rteObj.value, rteObj);\n        this.editableElement = this.parent.createElement('div', {\n            className: 'e-content',\n            id: this.parent.getID() + '_rte-edit-view',\n            attrs: {\n                'contenteditable': 'true'\n            },\n            innerHTML: rteContent\n        });\n        div.appendChild(this.editableElement);\n        this.setPanel(div);\n        rteObj.element.appendChild(div);\n    };\n    /**\n     * Get the content div element of RichTextEditor\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    ContentRender.prototype.getEditPanel = function () {\n        return this.editableElement;\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    ContentRender.prototype.getText = function () {\n        return this.getEditPanel().textContent;\n    };\n    /**\n     * Set the content div element of RichTextEditor\n     * @param {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @return {Document}\n     */\n    ContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ContentRender } from '../renderer/content-renderer';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getEditValue } from '../base/util';\n/* tslint:disable */\nvar IFRAMEHEADER = \"\\n<!DOCTYPE html> \\n    <html>\\n         <head>\\n            <meta charset='utf-8' /> \\n            <style>\\n                @charset \\\"UTF-8\\\";\\n                body {\\n                    font-family: \\\"Roboto\\\", sans-serif;\\n                    font-size: 14px;\\n                }\\n                html, body{height: 100%;margin: 0;}\\n                body.e-cursor{cursor:default}\\n                span.e-selected-node\\t{background-color: #939393;color: white;}\\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\\n                .e-rte-image {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\\n                .e-imgleft {float: left;margin: 0 5px 0 0;text-align: left;}\\n                .e-imgright {float: right;margin: 0 0 0 5px;text-align: right;}\\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\\n                .e-imgbreak {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\\n                img::selection { background: transparent;color: transparent;}\\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\\n                p{margin: 0 0 10px;margin-bottom: 10px;}\\n                li{margin-bottom: 10px;}\\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\\n                h4{font-size: 1em;font-weight: 400;margin: 0;}\\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\\n                strong, b{font-weight: 700;}\\n                a{text-decoration: none;user-select: auto;}\\n                a:hover{text-decoration: underline;};\\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\\n                ul:last-child{margin-bottom: 0;}\\n                table.e-rte-table { border-collapse: collapse; empty-cells: show;}\\n                table.e-rte-table td,table.e-rte-table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;}\\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\\n                table.e-rte-table th {background-color: #E0E0E0;}\\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \\n                table.e-rte-table .e-cell-select {border: 1px double #4a90e2;}\\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\\n                .e-row-resize { cursor: row-resize; height: 1px;}\\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\\n                .e-table-rhelper.e-column-helper { width: 1px; }\\n                .e-table-rhelper.e-row-helper {height: 1px;}\\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\\n                .e-table-rhelper { background-color: #4a90e2;}\\n            </style>\\n        </head>\";\n/* tslint:enable */\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar IframeContentRender = /** @class */ (function (_super) {\n    __extends(IframeContentRender, _super);\n    function IframeContentRender() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * The function is used to render RichTextEditor iframe\n     */\n    IframeContentRender.prototype.renderPanel = function () {\n        var rteObj = this.parent;\n        var rteContent = getEditValue(rteObj.value, rteObj);\n        var iFrameBodyContent = '<body spellcheck=\"false\" autocorrect=\"off\" contenteditable=\"true\">' +\n            rteContent + '</body></html>';\n        var iFrameContent = IFRAMEHEADER + iFrameBodyContent;\n        var iframe = this.parent.createElement('iframe', {\n            innerHTML: iFrameContent,\n            id: this.parent.getID() + '_rte-view',\n            className: 'e-rte-content',\n            styles: 'display:block;'\n        });\n        this.setPanel(iframe);\n        rteObj.element.appendChild(iframe);\n        iframe.contentDocument.body.id = this.parent.getID() + '_rte-edit-view';\n        iframe.contentDocument.body.setAttribute('aria-owns', this.parent.getID());\n        iframe.contentDocument.open();\n        iFrameContent = this.setThemeColor(iFrameContent, { color: '#333' });\n        iframe.contentDocument.write(iFrameContent);\n        iframe.contentDocument.close();\n    };\n    IframeContentRender.prototype.setThemeColor = function (content, styles) {\n        var fontColor = getComputedStyle(this.parent.element, '.e-richtexteditor').getPropertyValue('color');\n        return content.replace(styles.color, fontColor);\n    };\n    /**\n     * Get the editable element of RichTextEditor\n     * @return {Element}\n     */\n    IframeContentRender.prototype.getEditPanel = function () {\n        var editNode;\n        if (!isNullOrUndefined(this.contentPanel.contentDocument)) {\n            editNode = this.contentPanel.contentDocument.body;\n        }\n        else {\n            editNode = this.parent.inputElement;\n        }\n        return editNode;\n    };\n    /**\n     * Get the document of RichTextEditor\n     * @param  {Document}\n     */\n    IframeContentRender.prototype.getDocument = function () {\n        return this.getEditPanel().ownerDocument;\n    };\n    return IframeContentRender;\n}(ContentRender));\nexport { IframeContentRender };\n","import * as events from '../base/constant';\nimport { isNullOrUndefined, closest, attributes, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { HTMLFormatter } from '../formatter/html-formatter';\nimport { RenderType } from '../base/enum';\nimport * as classes from '../base/classes';\nimport { HtmlToolbarStatus } from './html-toolbar-status';\nimport { IframeContentRender } from '../renderer/iframe-content-renderer';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { ColorPickerInput } from './color-picker';\nimport { NodeSelection } from '../../selection/selection';\nimport { InsertHtml } from '../../editor-manager/plugin/inserthtml';\nimport { getTextNodesUnder } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `HtmlEditor` module is used to HTML editor\n */\nvar HtmlEditor = /** @class */ (function () {\n    function HtmlEditor(parent, serviceLocator) {\n        this.rangeCollection = [];\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * Destroys the Markdown.\n     * @method destroy\n     * @return {void}\n     */\n    HtmlEditor.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    HtmlEditor.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.nodeSelectionObj = new NodeSelection();\n        this.colorPickerModule = new ColorPickerInput(this.parent, this.locator);\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.htmlToolbarClick, this.onToolbarClick, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.renderColorPicker, this.renderColorPicker, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.selectAll, this.selectAll, this);\n        this.parent.on(events.selectRange, this.selectRange, this);\n        this.parent.on(events.getSelectedHtml, this.getSelectedHtml, this);\n        this.parent.on(events.selectionSave, this.onSelectionSave, this);\n        this.parent.on(events.selectionRestore, this.onSelectionRestore, this);\n        this.parent.on(events.readOnlyMode, this.updateReadOnly, this);\n        this.parent.on(events.paste, this.onPaste, this);\n    };\n    HtmlEditor.prototype.updateReadOnly = function () {\n        if (this.parent.readonly) {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'false' });\n            addClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n        else {\n            attributes(this.parent.contentModule.getEditPanel(), { contenteditable: 'true' });\n            removeClass([this.parent.element], classes.CLS_RTE_READONLY);\n        }\n    };\n    HtmlEditor.prototype.onSelectionSave = function () {\n        var currentDocument = this.contentRenderer.getDocument();\n        var range = this.nodeSelectionObj.getRange(currentDocument);\n        this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n    };\n    HtmlEditor.prototype.onSelectionRestore = function (e) {\n        this.parent.isBlur = false;\n        this.contentRenderer.getEditPanel().focus();\n        if (isNullOrUndefined(e.items) || e.items) {\n            this.saveSelection.restore();\n        }\n    };\n    HtmlEditor.prototype.onKeyDown = function (e) {\n        if (e.args.keyCode === 9 && this.parent.enableTabKey) {\n            var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n            var parentNode = this.nodeSelectionObj.getParentNodeCollection(range);\n            if (!((parentNode[0].nodeName === 'LI' || parentNode[0].nodeName === 'BR' || closest(parentNode[0], 'li')) &&\n                range.startOffset === 0)) {\n                e.args.preventDefault();\n                if (!e.args.shiftKey) {\n                    InsertHtml.Insert(this.contentRenderer.getDocument(), '&nbsp;&nbsp;&nbsp;&nbsp;');\n                    this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()));\n                }\n                else if (this.rangeCollection.length > 0 &&\n                    this.rangeCollection[this.rangeCollection.length - 1].startContainer.textContent.length === 4) {\n                    var textCont = this.rangeCollection[this.rangeCollection.length - 1].startContainer;\n                    this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(), textCont, textCont, 0, textCont.textContent.length);\n                    InsertHtml.Insert(this.contentRenderer.getDocument(), document.createTextNode(''));\n                    this.rangeCollection.pop();\n                }\n            }\n        }\n        if (e.args.action === 'space' ||\n            e.args.action === 'enter') {\n            this.spaceLink(e.args);\n        }\n    };\n    HtmlEditor.prototype.onPaste = function (e) {\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (e.text.match(regex)) {\n            e.args.preventDefault();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var saveSelection = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            var firstElement = this.parent.createElement('span');\n            var httpRegex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)))/gi);\n            var wwwRegex = new RegExp(/([^\\S]|^)(((www\\.))(\\S+))/gi);\n            var httpText = '';\n            if (e.text.match(httpRegex)) {\n                firstElement.innerHTML = e.text.split('http')[0];\n                httpText = 'http' + e.text.split('http')[1];\n            }\n            else if (e.text.match(wwwRegex)) {\n                firstElement.innerHTML = e.text.split('www')[0];\n                httpText = 'www' + e.text.split('www')[1];\n            }\n            var httpSplitText = httpText.split(' ');\n            var splittedText = '';\n            for (var i = 1; i < httpSplitText.length; i++) {\n                splittedText = splittedText + ' ' + httpSplitText[i];\n            }\n            var lastElement = this.parent.createElement('span');\n            lastElement.innerHTML = splittedText;\n            var anchor = this.parent.createElement('a', {\n                className: 'e-rte-anchor', attrs: {\n                    href: httpSplitText[0],\n                    title: httpSplitText[0]\n                }\n            });\n            anchor.innerHTML = httpSplitText[0];\n            var resultElement = this.parent.createElement('span');\n            if (firstElement.innerHTML !== '') {\n                resultElement.appendChild(firstElement);\n            }\n            if (anchor.innerHTML !== '') {\n                resultElement.appendChild(anchor);\n            }\n            if (lastElement.innerHTML !== '') {\n                resultElement.appendChild(lastElement);\n            }\n            this.parent.executeCommand('insertHTML', resultElement);\n        }\n    };\n    HtmlEditor.prototype.spaceLink = function (e) {\n        var range = this.nodeSelectionObj.getRange(this.contentRenderer.getDocument());\n        var selectNodeEle = this.nodeSelectionObj.getParentNodeCollection(range);\n        var text = range.startContainer.textContent;\n        var splitText = text.split(' ');\n        var urlText = splitText[splitText.length - 1];\n        var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n        if (selectNodeEle[0].nodeName !== 'A' && urlText.match(regex)) {\n            var selection = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n            var selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            var value = {\n                url: urlText,\n                selection: selection, selectParent: selectParent,\n                text: '',\n                title: '',\n                target: ''\n            };\n            this.parent.formatter.process(this.parent, {\n                item: {\n                    'command': 'Links',\n                    'subCommand': 'CreateLink'\n                }\n            }, e, value);\n        }\n    };\n    HtmlEditor.prototype.onToolbarClick = function (args) {\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        var item = args.item;\n        var closestElement = closest(args.originalEvent.target, '.e-rte-quick-popup');\n        if (closestElement && !closestElement.classList.contains('e-rte-inline-popup')) {\n            if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                if (isIDevice() && item.command === 'Images') {\n                    this.nodeSelectionObj.restore();\n                }\n                var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n            }\n            if (item.command === 'Images') {\n                this.parent.notify(events.imageToolbarAction, {\n                    member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n            if (item.command === 'Links') {\n                this.parent.notify(events.linkToolbarAction, {\n                    member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n            if (item.command === 'Table') {\n                this.parent.notify(events.tableToolbarAction, {\n                    member: 'table', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                });\n            }\n        }\n        else {\n            var linkDialog = this.parent.element.querySelector('#' + this.parent.getID() + '_rtelink');\n            var imageDialog = this.parent.element.querySelector('#' + this.parent.getID() + '_image');\n            if (!(item.subCommand === 'SourceCode' || item.subCommand === 'Preview' ||\n                item.subCommand === 'FontColor' || item.subCommand === 'BackgroundColor')) {\n                var range = this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());\n                if (isNullOrUndefined(linkDialog) && isNullOrUndefined(imageDialog)) {\n                    save = this.nodeSelectionObj.save(range, this.parent.contentModule.getDocument());\n                }\n                selectNodeEle = this.nodeSelectionObj.getNodeCollection(range);\n                selectParentEle = this.nodeSelectionObj.getParentNodeCollection(range);\n            }\n            switch (item.subCommand) {\n                case 'Maximize':\n                    this.parent.notify(events.enableFullScreen, { args: args });\n                    break;\n                case 'Minimize':\n                    this.parent.notify(events.disableFullScreen, { args: args });\n                    break;\n                case 'CreateLink':\n                    this.parent.notify(events.insertLink, {\n                        member: 'link', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                    break;\n                case 'Print':\n                    this.parent.print();\n                    break;\n                case 'Image':\n                    this.parent.notify(events.insertImage, {\n                        member: 'image', args: args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    });\n                    break;\n                case 'CreateTable':\n                    this.parent.notify(events.createTable, {\n                        member: 'table', args: args, selection: save\n                    });\n                    break;\n                case 'SourceCode':\n                    this.parent.notify(events.sourceCode, { member: 'viewSource', args: args });\n                    break;\n                case 'Preview':\n                    this.parent.notify(events.updateSource, { member: 'updateSource', args: args });\n                    break;\n                case 'FontColor':\n                case 'BackgroundColor':\n                    break;\n                default:\n                    this.parent.formatter.process(this.parent, args, args.originalEvent, null);\n                    break;\n            }\n        }\n    };\n    HtmlEditor.prototype.renderColorPicker = function (args) {\n        this.colorPickerModule.renderColorPickerInput(args);\n    };\n    HtmlEditor.prototype.instantiateRenderer = function () {\n        if (this.parent.iframeSettings.enable) {\n            this.renderFactory.addRenderer(RenderType.Content, new IframeContentRender(this.parent, this.locator));\n        }\n        else {\n            this.renderFactory.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        }\n    };\n    HtmlEditor.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.htmlToolbarClick, this.onToolbarClick);\n        this.parent.off(events.renderColorPicker, this.renderColorPicker);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n        this.parent.off(events.selectAll, this.selectAll);\n        this.parent.off(events.selectRange, this.selectRange);\n        this.parent.off(events.getSelectedHtml, this.getSelectedHtml);\n        this.parent.off(events.selectionSave, this.onSelectionSave);\n        this.parent.off(events.selectionRestore, this.onSelectionRestore);\n        this.parent.off(events.readOnlyMode, this.updateReadOnly);\n        this.parent.off(events.paste, this.onPaste);\n    };\n    HtmlEditor.prototype.render = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var editElement = this.contentRenderer.getEditPanel();\n        var option = { undoRedoSteps: this.parent.undoRedoSteps, undoRedoTimer: this.parent.undoRedoTimer };\n        if (isNullOrUndefined(this.parent.formatter)) {\n            this.parent.formatter = new HTMLFormatter({\n                currentDocument: this.contentRenderer.getDocument(),\n                element: editElement,\n                options: option\n            });\n        }\n        else {\n            this.parent.formatter.updateFormatter(editElement, this.contentRenderer.getDocument(), option);\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.toolbarUpdate = new HtmlToolbarStatus(this.parent);\n        }\n        this.parent.notify(events.bindOnEnd, {});\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    HtmlEditor.prototype.onPropertyChanged = function (e) {\n        // On property code change here\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    HtmlEditor.prototype.getModuleName = function () {\n        return 'htmlEditor';\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    HtmlEditor.prototype.selectAll = function () {\n        var nodes = getTextNodesUnder(this.parent.contentModule.getDocument(), this.parent.contentModule.getEditPanel());\n        this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(), nodes[0], nodes[nodes.length - 1], 0, nodes[nodes.length - 1].textContent.length);\n    };\n    /**\n     * For selecting all content in RTE\n     * @private\n     */\n    HtmlEditor.prototype.selectRange = function (e) {\n        this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(), e.range);\n    };\n    /**\n     * For get a selected text in RTE\n     * @private\n     */\n    HtmlEditor.prototype.getSelectedHtml = function (e) {\n        e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString());\n    };\n    return HtmlEditor;\n}());\nexport { HtmlEditor };\n","import * as events from '../base/constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { RadioButton } from '@syncfusion/ej2-buttons';\nimport { isNullOrUndefined as isNOU, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { CLS_RTE_PASTE_KEEP_FORMAT, CLS_RTE_PASTE_REMOVE_FORMAT, CLS_RTE_PASTE_PLAIN_FORMAT } from '../base/classes';\nimport { CLS_RTE_PASTE_OK, CLS_RTE_PASTE_CANCEL, CLS_RTE_DIALOG_MIN_HEIGHT } from '../base/classes';\nimport { pasteCleanupGroupingTags } from '../../common/config';\nimport { NodeSelection } from '../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { RenderType } from '../base/enum';\n/**\n * PasteCleanup module called when pasting content in RichTextEditor\n */\nvar PasteCleanup = /** @class */ (function () {\n    function PasteCleanup(parent, serviceLocator) {\n        this.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'button',\n            'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'i', 'iframe', 'img', 'input',\n            'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n            'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg',\n            'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.addEventListener();\n    }\n    PasteCleanup.prototype.addEventListener = function () {\n        this.nodeSelectionObj = new NodeSelection();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.pasteClean, this.pasteClean, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    PasteCleanup.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    PasteCleanup.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.pasteClean, this.pasteClean);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    PasteCleanup.prototype.pasteClean = function (e) {\n        var _this = this;\n        var args = {\n            requestType: 'Paste',\n            editorMode: this.parent.editorMode,\n            event: e\n        };\n        var value = null;\n        if (e.args && !isNOU(e.args.clipboardData)) {\n            value = e.args.clipboardData.getData('text/html');\n        }\n        if (e.args && value !== null && this.parent.editorMode === 'HTML') {\n            var regex = new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);\n            if (value.length === 0 || value.match(regex)) {\n                value = e.args.clipboardData.getData('text/plain');\n                var file = e && e.args.clipboardData &&\n                    e.args.clipboardData.items.length > 0 ?\n                    e.args.clipboardData.items[0].getAsFile() : null;\n                this.parent.notify(events.paste, { file: file, args: e.args, text: value });\n            }\n            else if (value.length > 0) {\n                this.parent.formatter.editorManager.observer.notify(EVENTS.MS_WORD_CLEANUP, {\n                    args: e.args,\n                    text: e.text,\n                    callBack: function (a) {\n                        value = a;\n                    }\n                });\n                this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n                var currentDocument = this.contentRenderer.getDocument();\n                var range = this.nodeSelectionObj.getRange(currentDocument);\n                this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n                if (this.parent.pasteCleanupSettings.prompt) {\n                    e.args.preventDefault();\n                    this.pasteDialog(value);\n                }\n                else if (this.parent.pasteCleanupSettings.plainText) {\n                    e.args.preventDefault();\n                    this.plainFormatting(value);\n                }\n                else if (this.parent.pasteCleanupSettings.keepFormat) {\n                    e.args.preventDefault();\n                    this.formatting(value, false);\n                }\n                else {\n                    e.args.preventDefault();\n                    this.formatting(value, true);\n                }\n            }\n        }\n        setTimeout(function () { _this.parent.formatter.onSuccess(_this.parent, args); }, 0);\n    };\n    PasteCleanup.prototype.radioRender = function () {\n        var keepRadioButton = new RadioButton({ label: 'Keep', name: 'pasteOption', checked: true });\n        var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n        keepRadioButton.appendTo(keepFormatElement);\n        var cleanRadioButton = new RadioButton({ label: 'Clean', name: 'pasteOption' });\n        var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n        cleanRadioButton.appendTo(cleanFormatElement);\n        var plainTextRadioButton = new RadioButton({ label: 'Plain Text', name: 'pasteOption' });\n        var plainTextElement = this.parent.element.querySelector('#plainTextFormat');\n        plainTextRadioButton.appendTo(plainTextElement);\n    };\n    PasteCleanup.prototype.selectFormatting = function (value) {\n        var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n        var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n        if (keepFormatElement.checked) {\n            this.formatting(value, false);\n        }\n        else if (cleanFormatElement.checked) {\n            this.formatting(value, true);\n        }\n        else {\n            this.plainFormatting(value);\n        }\n    };\n    PasteCleanup.prototype.pasteDialog = function (value) {\n        var _this = this;\n        var dialog = new Dialog({\n            buttons: [\n                {\n                    click: function () {\n                        if (!dialog.isDestroyed) {\n                            _this.selectFormatting(value);\n                            dialog.hide();\n                            dialog.destroy();\n                        }\n                    },\n                    buttonModel: {\n                        isPrimary: true,\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_OK,\n                        content: this.i10n.getConstant('pasteDialogOk')\n                    }\n                },\n                {\n                    click: function () {\n                        if (!dialog.isDestroyed) {\n                            dialog.hide();\n                            dialog.destroy();\n                        }\n                    },\n                    buttonModel: {\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_CANCEL,\n                        content: this.i10n.getConstant('pasteDialogCancel')\n                    }\n                }\n            ],\n            header: this.i10n.getConstant('pasteFormat'),\n            content: this.i10n.getConstant('pasteFormatContent') + '<br/><div><div style=\"padding-top:24px;\">' +\n                '<input type=\"radio\" class=\"' + CLS_RTE_PASTE_KEEP_FORMAT + '\" id=\"keepFormating\"/>' +\n                '</div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_REMOVE_FORMAT + '\" id=\"cleanFormat\"/></div>' +\n                '<div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_PLAIN_FORMAT + '\" id=\"plainTextFormat\"/></div></div>',\n            target: this.parent.element,\n            width: '300px',\n            height: '265px',\n            cssClass: CLS_RTE_DIALOG_MIN_HEIGHT,\n            isModal: true\n        });\n        var rteDialogWrapper = this.parent.element.querySelector('#' + this.parent.getID()\n            + '_pasteCleanupDialog');\n        if (rteDialogWrapper !== null && rteDialogWrapper.innerHTML !== '') {\n            this.destroyDialog(rteDialogWrapper);\n        }\n        if (rteDialogWrapper === null) {\n            rteDialogWrapper = this.parent.createElement('div', {\n                id: this.parent.getID() + '_pasteCleanupDialog'\n            });\n            this.parent.element.appendChild(rteDialogWrapper);\n        }\n        dialog.appendTo(rteDialogWrapper);\n        this.radioRender();\n        dialog.show();\n    };\n    PasteCleanup.prototype.destroyDialog = function (rteDialogWrapper) {\n        var rteDialogContainer = this.parent.element.querySelector('.e-dlg-container');\n        detach(rteDialogContainer);\n        var rteDialogWrapperChildLength = rteDialogWrapper.children.length;\n        for (var i = 0; i < rteDialogWrapperChildLength; i++) {\n            detach(rteDialogWrapper.children[0]);\n        }\n    };\n    PasteCleanup.prototype.formatting = function (value, clean) {\n        var clipBoardElem = this.parent.createElement('span');\n        clipBoardElem.innerHTML = value;\n        if (this.parent.pasteCleanupSettings.deniedTags !== null) {\n            clipBoardElem = this.deniedTags(clipBoardElem);\n        }\n        if (clean) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        else if (this.parent.pasteCleanupSettings.deniedAttrs !== null) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        if (this.parent.pasteCleanupSettings.allowedStyleProps !== null) {\n            clipBoardElem = this.allowedStyle(clipBoardElem);\n        }\n        this.saveSelection.restore();\n        this.parent.executeCommand('insertHTML', clipBoardElem);\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    //Plain Formatting\n    PasteCleanup.prototype.plainFormatting = function (value) {\n        var clipBoardElem = this.parent.createElement('div');\n        clipBoardElem.innerHTML = value;\n        this.detachInlineElements(clipBoardElem);\n        var text = this.getTextContent(clipBoardElem);\n        var resultElement = this.parent.createElement('span');\n        resultElement.innerHTML = text;\n        this.saveSelection.restore();\n        this.parent.executeCommand('insertHTML', resultElement);\n    };\n    PasteCleanup.prototype.detachInlineElements = function (element) {\n        while (!isNullOrUndefined(element)) {\n            var isInlineElement = false;\n            for (var j = 0; j < this.inlineNode.length && !isInlineElement; j++) {\n                if (element.tagName.toLocaleLowerCase() === this.inlineNode[j]) {\n                    var node = element.nextElementSibling ?\n                        element.nextElementSibling : element.parentElement.nextElementSibling;\n                    if (!isNullOrUndefined(element.childNodes[0]) && element.childNodes[0].textContent !== '') {\n                        element.parentElement.insertBefore(this.getTextNode(element), element);\n                    }\n                    detach(element);\n                    element = node;\n                    isInlineElement = true;\n                }\n            }\n            if (!isNullOrUndefined(element)) {\n                if (isInlineElement) {\n                    element = element;\n                }\n                else if (element.firstElementChild) {\n                    element = element.firstElementChild;\n                }\n                else if (element.nextElementSibling) {\n                    element = element.nextElementSibling;\n                }\n                else if (element.parentElement.nextElementSibling) {\n                    element = element.parentElement.nextElementSibling;\n                }\n                else {\n                    element = null;\n                }\n            }\n            else {\n                element = null;\n            }\n        }\n    };\n    PasteCleanup.prototype.getTextNode = function (element) {\n        var rootElement = this.parent.createElement('span');\n        rootElement.innerHTML = element.textContent;\n        return rootElement.childNodes[0];\n    };\n    PasteCleanup.prototype.insertAfter = function (newNode, referenceNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    PasteCleanup.prototype.getTextContent = function (element) {\n        var result;\n        var text;\n        result = '';\n        var brElement = element.nodeType === 1 ? element.querySelectorAll('br') : null;\n        if (brElement) {\n            for (var i = 0; i < brElement.length; i++) {\n                if (!isNullOrUndefined(brElement[i].previousSibling)) {\n                    var resultElement = this.parent.createElement('div');\n                    resultElement.innerHTML = brElement[i].previousSibling.textContent;\n                    detach(brElement[i].previousSibling);\n                    brElement[i].parentElement.insertBefore(resultElement, brElement[i]);\n                }\n                if (i + 1 === brElement.length && !isNullOrUndefined(brElement[i].nextSibling)) {\n                    var divNextElement = this.parent.createElement('div');\n                    divNextElement.innerHTML = brElement[i].nextSibling.textContent;\n                    detach(brElement[i].nextSibling);\n                    this.insertAfter(divNextElement, brElement[i]);\n                }\n                detach(brElement[i]);\n            }\n        }\n        if (element.children.length === 0 && element.textContent.trim() !== '') {\n            text = '<p>' + element.textContent + '</p>';\n            result += text;\n        }\n        else {\n            for (var i = 0; i < element.children.length; i++) {\n                if (!isNullOrUndefined(element.children[i])) {\n                    text = this.getTextContent(element.children[i]);\n                }\n                else {\n                    text = '<p>' + element.children[i].textContent + '</p>';\n                }\n                result += text;\n            }\n        }\n        return result;\n    };\n    //GroupingTags\n    PasteCleanup.prototype.tagGrouping = function (deniedTags) {\n        var groupingTags = deniedTags.slice();\n        var keys = Object.keys(pasteCleanupGroupingTags);\n        var values = keys.map(function (key) { return pasteCleanupGroupingTags[key]; });\n        var addTags = [];\n        for (var i = 0; i < groupingTags.length; i++) {\n            //The value split using '[' because to reterive the tag name from the user given format which may contain tag with attributes\n            if (groupingTags[i].split('[').length > 1) {\n                groupingTags[i] = groupingTags[i].split('[')[0].trim();\n            }\n            if (keys.indexOf(groupingTags[i]) > -1) {\n                for (var j = 0; j < values[keys.indexOf(groupingTags[i])].length; j++) {\n                    if (groupingTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0 &&\n                        addTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0) {\n                        addTags.push(values[keys.indexOf(groupingTags[i])][j]);\n                    }\n                }\n            }\n        }\n        return deniedTags = deniedTags.concat(addTags);\n    };\n    //Filter Attributes in Denied Tags\n    PasteCleanup.prototype.attributesfilter = function (deniedTags) {\n        for (var i = 0; i < deniedTags.length; i++) {\n            if (deniedTags[i].split('[').length > 1) {\n                var userAttributes = deniedTags[i].split('[')[1].split(']')[0].split(',');\n                var allowedAttributeArray = [];\n                var deniedAttributeArray = [];\n                for (var j = 0; j < userAttributes.length; j++) {\n                    userAttributes[j].indexOf('!') < 0 ? allowedAttributeArray.push(userAttributes[j].trim())\n                        : deniedAttributeArray.push(userAttributes[j].split('!')[1].trim());\n                }\n                var allowedAttribute = allowedAttributeArray.length > 1 ?\n                    (allowedAttributeArray.join('][')) : (allowedAttributeArray.join());\n                var deniedAttribute = deniedAttributeArray.length > 1 ? deniedAttributeArray.join('][') : (deniedAttributeArray.join());\n                if (deniedAttribute.length > 0) {\n                    var select = allowedAttribute !== '' ? deniedTags[i].split('[')[0] +\n                        '[' + allowedAttribute + ']' : deniedTags[i].split('[')[0];\n                    deniedTags[i] = select + ':not([' + deniedAttribute + '])';\n                }\n                else {\n                    deniedTags[i] = deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']';\n                }\n            }\n        }\n        return deniedTags;\n    };\n    //Denied Tags\n    PasteCleanup.prototype.deniedTags = function (clipBoardElem) {\n        var deniedTags = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags) ? [] : this.parent.pasteCleanupSettings.deniedTags.slice();\n        deniedTags = this.attributesfilter(deniedTags);\n        deniedTags = this.tagGrouping(deniedTags);\n        for (var i = 0; i < deniedTags.length; i++) {\n            var removableElement = clipBoardElem.querySelectorAll(deniedTags[i]);\n            for (var j = removableElement.length - 1; j >= 0; j--) {\n                var parentElem = removableElement[j].parentNode;\n                while (removableElement[j].firstChild) {\n                    parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n                }\n                parentElem.removeChild(removableElement[j]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Denied Attributes\n    PasteCleanup.prototype.deniedAttributes = function (clipBoardElem, clean) {\n        var deniedAttrs = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs) ? [] : this.parent.pasteCleanupSettings.deniedAttrs.slice();\n        if (clean) {\n            deniedAttrs.push('style');\n        }\n        for (var i = 0; i < deniedAttrs.length; i++) {\n            var removableAttrElement = clipBoardElem.\n                querySelectorAll('[' + deniedAttrs[i] + ']');\n            for (var j = 0; j < removableAttrElement.length; j++) {\n                removableAttrElement[j].removeAttribute(deniedAttrs[i]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Allowed Style Properties\n    PasteCleanup.prototype.allowedStyle = function (clipBoardElem) {\n        var allowedStyleProps = isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps) ? [] : this.parent.pasteCleanupSettings.allowedStyleProps.slice();\n        allowedStyleProps.push('list-style-type', 'list-style');\n        var styleElement = clipBoardElem.querySelectorAll('[style]');\n        for (var i = 0; i < styleElement.length; i++) {\n            var allowedStyleValue = '';\n            var allowedStyleValueArray = [];\n            var styleValue = styleElement[i].getAttribute('style').split(';');\n            for (var k = 0; k < allowedStyleProps.length; k++) {\n                for (var j = 0; j < styleValue.length; j++) {\n                    if (!styleElement[i].getAttribute('style').split(';')[j]\n                        .trim().indexOf(allowedStyleProps[k] + ':')) {\n                        allowedStyleValueArray.push(styleElement[i].getAttribute('style').split(';')[j]);\n                        k++;\n                    }\n                }\n            }\n            styleElement[i].removeAttribute('style');\n            allowedStyleValue = allowedStyleValueArray.join(';');\n            if (allowedStyleValue) {\n                styleElement[i].setAttribute('style', allowedStyleValue);\n            }\n        }\n        return clipBoardElem;\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    PasteCleanup.prototype.getModuleName = function () {\n        return 'pasteCleanup';\n    };\n    return PasteCleanup;\n}());\nexport { PasteCleanup };\n","import { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize RichTextEditor header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var rteObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.contentRenderer.renderPanel();\n    };\n    /**\n     * Refresh the entire RichTextEditor.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     * @return {void}\n     */\n    Render.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Render.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.keyUp, this.keyUp, this);\n    };\n    Render.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.modelChanged, this.refresh);\n        this.parent.off(events.keyUp, this.keyUp);\n    };\n    Render.prototype.keyUp = function (e) {\n        if (this.parent.editorMode === 'HTML') {\n            switch (e.args.which) {\n                case 46:\n                case 8:\n                    var childNodes = this.parent.contentModule.getEditPanel().childNodes;\n                    if ((childNodes.length === 0) ||\n                        (childNodes.length === 1 && ((childNodes[0].tagName === 'BR') ||\n                            (childNodes[0].tagName === 'P' &&\n                                (childNodes[0].childNodes.length === 0 || childNodes[0].textContent === ''))))) {\n                        var node = this.parent.contentModule.getEditPanel();\n                        node.innerHTML = '<p><br/></p>';\n                        this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), node.childNodes[0], 0);\n                    }\n                    break;\n            }\n        }\n    };\n    return Render;\n}());\nexport { Render };\n","import { EventHandler, detach, isNullOrUndefined, select } from '@syncfusion/ej2-base';\nimport { closest, addClass, removeClass, Browser } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_RTE_ELEMENTS } from '../base/classes';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Link` module is used to handle undo actions.\n */\nvar Link = /** @class */ (function () {\n    function Link(parent, serviceLocator) {\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.addEventListener();\n        this.serviceLocator = serviceLocator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n    }\n    Link.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.insertLink, this.linkDialog, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.insertCompleted, this.showLinkQuickToolbar, this);\n        this.parent.on(events.linkToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.unLink, this.removeLink, this);\n        this.parent.on(events.editLink, this.editLink, this);\n        this.parent.on(events.openLink, this.openLink, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    };\n    Link.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'OpenLink':\n                this.parent.notify(events.openLink, args);\n                break;\n            case 'EditLink':\n                this.parent.notify(events.editLink, args);\n                break;\n            case 'RemoveLink':\n                this.parent.notify(events.unLink, args);\n                break;\n        }\n    };\n    Link.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.insertLink, this.linkDialog);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.insertCompleted, this.showLinkQuickToolbar);\n        this.parent.off(events.linkToolbarAction, this.onToolbarAction);\n        this.parent.off(events.unLink, this.removeLink);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.editLink, this.editLink);\n        this.parent.off(events.openLink, this.openLink);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    };\n    Link.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Link.prototype.showLinkQuickToolbar = function (e) {\n        var pageX;\n        var pageY;\n        if (e.type !== 'Links' || isNullOrUndefined(this.parent.quickToolbarModule) ||\n            isNullOrUndefined(this.parent.quickToolbarModule.linkQTBar)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var parentTop = this.parent.element.getBoundingClientRect().top;\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var target;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = ((element.nodeName === '#text') ? (element.parentNode) : element);\n            }\n        });\n        if (e.isNotify) {\n            pageX = target.getBoundingClientRect().left;\n            var tbElement = this.parent.toolbarModule.getToolbarElement();\n            var linkTop = target.getBoundingClientRect().top;\n            var linkPos = linkTop - parentTop;\n            var tbHeight = (tbElement) ? (tbElement.offsetHeight + this.parent.toolbarModule.getExpandTBarPopHeight()) : 0;\n            pageY = window.pageYOffset + ((this.parent.iframeSettings.enable) ? (parentTop + tbHeight + linkTop) : (parentTop + linkPos));\n        }\n        else {\n            var args = void 0;\n            args = e.args.touches ? e.args.changedTouches[0] : args = e.args;\n            pageX = args.pageX;\n            pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + parentTop + args.clientY : args.pageY;\n        }\n        if (this.quickToolObj.linkQTBar) {\n            this.quickToolObj.linkQTBar.showPopup(pageX, pageY, range.endContainer);\n        }\n    };\n    Link.prototype.hideLinkQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.linkQTBar && document.body.contains(this.quickToolObj.linkQTBar.element)) {\n            this.quickToolObj.linkQTBar.hidePopup();\n        }\n    };\n    Link.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.linkQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            target = this.getAnchorNode(target);\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.linkQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'A' && !target.contains(target.querySelector('img'))) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.showLinkQuickToolbar({\n                    args: args,\n                    isNotify: false,\n                    type: 'Links',\n                    elements: [args.target]\n                });\n            }\n            else {\n                this.hideLinkQuickToolbar();\n            }\n        }\n    };\n    Link.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'insert-link':\n                if (this.parent.editorMode === 'HTML') {\n                    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n                    var save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                    var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n                    var selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n                    var eventArgs = {\n                        args: event.args, selectNode: selectNodeEle, selection: save, selectParent: selectParentEle\n                    };\n                    this.linkDialog(eventArgs);\n                }\n                else {\n                    var textArea = this.parent.contentModule.getEditPanel();\n                    this.parent.formatter.editorManager.markdownSelection.save(textArea.selectionStart, textArea.selectionEnd);\n                    this.linkDialog({\n                        args: {\n                            item: { command: 'Links', subCommand: 'Link' },\n                            originalEvent: originalEvent\n                        },\n                        member: 'link',\n                        text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                        module: 'Markdown',\n                        name: 'insertLink'\n                    });\n                }\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Link.prototype.linkDialog = function (e, inputDetails) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && (e.selectParent.length > 0 &&\n            !isNullOrUndefined(e.selectParent[0].classList) &&\n            e.selectParent[0].classList.contains('e-rte-anchor')) && isNullOrUndefined(inputDetails)) {\n            this.editLink(e);\n            return;\n        }\n        var selectText;\n        var linkWebAddress = this.i10n.getConstant('linkWebUrl');\n        var linkDisplayText = this.i10n.getConstant('linkText');\n        var linkTooltip = this.i10n.getConstant('linkTooltipLabel');\n        var urlPlace = this.i10n.getConstant('linkurl');\n        var textPlace = this.i10n.getConstant('textPlaceholder');\n        var title = this.i10n.getConstant('linkTitle');\n        var linkDialogEle = this.parent.createElement('div', { className: 'e-rte-link-dialog', id: this.rteID + '_rtelink' });\n        this.parent.element.appendChild(linkDialogEle);\n        var linkContent = this.parent.createElement('div', {\n            className: 'e-rte-linkcontent', id: this.rteID + '_linkContent'\n        });\n        var htmlTextbox = (this.parent.editorMode === 'HTML') ? '<label>' + linkTooltip +\n            '</label></div><div class=\"e-rte-field\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder = \"' + title + '\" class=\"e-input e-rte-linkTitle\"></div>' +\n            '<div class=\"e-rte-label\"></div>' + '<div class=\"e-rte-field\">' +\n            '<input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>' : '';\n        var content = '<div class=\"e-rte-label\"><label>' + linkWebAddress + '</label></div>' + '<div class=\"e-rte-field\">' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder=\"' + urlPlace + '\" class=\"e-input e-rte-linkurl\"/></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + linkDisplayText + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" data-role =\"none\" spellcheck=\"false\" class=\"e-input e-rte-linkText\" placeholder=\"' + textPlace + '\">' +\n            '</div><div class=\"e-rte-label\">' + htmlTextbox;\n        var contentElem = parseHtml(content);\n        linkContent.appendChild(contentElem);\n        var linkTarget = linkContent.querySelector('.e-rte-linkTarget');\n        var linkUrl = linkContent.querySelector('.e-rte-linkurl');\n        var linkText = linkContent.querySelector('.e-rte-linkText');\n        var linkTitle = linkContent.querySelector('.e-rte-linkTitle');\n        var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n        this.checkBoxObj = new CheckBox({ label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl });\n        this.checkBoxObj.createElement = this.parent.createElement;\n        this.checkBoxObj.appendTo(linkTarget);\n        selectText = (this.parent.editorMode === 'HTML') ? e.selection.getRange(this.parent.contentModule.getDocument()).toString() :\n            e.text;\n        var linkInsert = this.i10n.getConstant('dialogInsert');\n        var linkCancel = this.i10n.getConstant('dialogCancel');\n        var selection = e.selection;\n        var selectObj = { selfLink: this, selection: e.selection, selectParent: e.selectParent, args: e.args };\n        this.dialogObj = new Dialog({\n            header: this.i10n.getConstant('linkHeader'),\n            content: linkContent,\n            cssClass: CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '310px', height: 'inherit',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertlink.bind(selectObj),\n                    buttonModel: { content: linkInsert, cssClass: 'e-flat e-insertLink', isPrimary: true }\n                },\n                { click: this.cancelDialog.bind(selectObj), buttonModel: { cssClass: 'e-flat', content: linkCancel } }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogObj = null;\n            },\n        });\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(linkDialogEle);\n        linkDialogEle.style.maxHeight = 'inherit';\n        if (!isNullOrUndefined(inputDetails)) {\n            linkUrl.value = inputDetails.url;\n            linkText.value = inputDetails.text;\n            linkTitle.value = inputDetails.title;\n            (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n            this.dialogObj.header = inputDetails.header;\n            this.dialogObj.element.querySelector('.e-insertLink').textContent = inputDetails.btnText;\n        }\n        this.checkUrl(false);\n        if ((this.parent.editorMode === 'HTML' && ((!isNullOrUndefined(selectText) && selectText !== '') &&\n            (e.selection.range.startOffset === 0) || e.selection.range.startOffset !== e.selection.range.endOffset))\n            || e.module === 'Markdown') {\n            linkText.value = selectText;\n        }\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        if (this.quickToolObj) {\n            this.hideLinkQuickToolbar();\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n        }\n    };\n    Link.prototype.insertlink = function (e) {\n        var linkEle = this.selfLink.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl').value;\n        var linkText = linkEle.querySelector('.e-rte-linkText').value;\n        var linkTitle;\n        if (this.selfLink.parent.editorMode === 'HTML') {\n            linkTitle = linkEle.querySelector('.e-rte-linkTitle').value;\n        }\n        var target = (this.selfLink.checkBoxObj.checked) ? '_blank' : null;\n        if (linkUrl === '') {\n            this.selfLink.checkUrl(true);\n            return;\n        }\n        if (!this.selfLink.isUrl(linkUrl)) {\n            linkText = (linkText === '') ? linkUrl : linkText;\n            linkUrl = 'http://' + linkUrl;\n        }\n        else {\n            this.selfLink.checkUrl(false);\n        }\n        var proxy = this.selfLink;\n        if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(this.selection.range.startContainer.parentNode, '#' + proxy.parent.contentModule.getPanel().id))) {\n            proxy.parent.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n            this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.parent.contentModule.getDocument());\n            this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        var value = {\n            url: linkUrl, text: linkText, title: linkTitle, target: target,\n            selection: this.selection, selectParent: this.selectParent\n        };\n        if (document.body.contains(proxy.dialogObj.element)) {\n            this.selfLink.dialogObj.hide({ returnValue: false });\n        }\n        if (isIDevice() && proxy.parent.iframeSettings.enable) {\n            select('iframe', proxy.parent.element).contentWindow.focus();\n        }\n        if (proxy.parent.editorMode === 'HTML') {\n            this.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        this.selfLink.parent.formatter.process(this.selfLink.parent, this.args, this.args.originalEvent, value);\n        this.selfLink.parent.contentModule.getEditPanel().focus();\n    };\n    Link.prototype.isUrl = function (url) {\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Link.prototype.checkUrl = function (e) {\n        var linkEle = this.dialogObj.element;\n        var linkUrl = linkEle.querySelector('.e-rte-linkurl');\n        if (e) {\n            addClass([linkUrl], 'e-error');\n            linkUrl.setSelectionRange(0, linkUrl.value.length);\n            linkUrl.focus();\n        }\n        else {\n            removeClass([linkUrl], 'e-error');\n        }\n    };\n    Link.prototype.removeLink = function (e) {\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode, selectParent: e.selectParent, selection: e.selection,\n            subCommand: e.args.item.subCommand\n        });\n        if (isIDevice() && this.parent.iframeSettings.enable) {\n            select('iframe', this.parent.element).contentWindow.focus();\n        }\n        else {\n            this.contentModule.getEditPanel().focus();\n        }\n        this.hideLinkQuickToolbar();\n    };\n    Link.prototype.openLink = function (e) {\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                url: selectParentEle.href,\n                target: selectParentEle.target === '' ? '_self' : '_blank', selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n        }\n    };\n    Link.prototype.getAnchorNode = function (element) {\n        var selectParent = closest(element, 'a');\n        return (selectParent ? selectParent : element);\n    };\n    Link.prototype.editLink = function (e) {\n        var selectParentEle = this.getAnchorNode(e.selectParent[0]);\n        if (selectParentEle.classList.contains('e-rte-anchor') || selectParentEle.tagName === 'A') {\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var inputDetails = {\n                url: selectParentEle.href, text: selectParentEle.innerText,\n                title: selectParentEle.title, target: selectParentEle.target,\n                header: this.i10n.getConstant('editLink'), btnText: linkUpdate\n            };\n            this.linkDialog(e, inputDetails);\n        }\n    };\n    Link.prototype.cancelDialog = function (e) {\n        this.selfLink.parent.isBlur = false;\n        this.selfLink.dialogObj.hide({ returnValue: true });\n        if (isIDevice()) {\n            this.selection.restore();\n        }\n        else {\n            this.selfLink.parent.contentModule.getEditPanel().focus();\n        }\n    };\n    Link.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!isNullOrUndefined(this.dialogObj) && ((!closest(target, '#' + this.dialogObj.element.id) && this.parent.toolbarSettings.enable &&\n            this.parent.getToolbarElement() && !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_CreateLink') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_CreateLink')))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Link.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Link.prototype.getModuleName = function () {\n        return 'link';\n    };\n    return Link;\n}());\nexport { Link };\n","import { addClass, detach, EventHandler, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Image` module is used to handle image actions.\n */\nvar Image = /** @class */ (function () {\n    function Image(parent, serviceLocator) {\n        this.pageX = null;\n        this.pageY = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Image.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.insertImage, this.insertImage, this);\n        this.parent.on(events.insertCompleted, this.showImageQuickToolbar, this);\n        this.parent.on(events.imageToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.imageCaption, this.caption, this);\n        this.parent.on(events.imageDelete, this.deleteImg, this);\n        this.parent.on(events.imageLink, this.insertImgLink, this);\n        this.parent.on(events.imageAlt, this.insertAltText, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.imageSize, this.imageSize, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.paste, this.imagePaste, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    Image.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.insertImage, this.insertImage);\n        this.parent.off(events.insertCompleted, this.showImageQuickToolbar);\n        this.parent.off(events.imageCaption, this.caption);\n        this.parent.off(events.imageToolbarAction, this.onToolbarAction);\n        this.parent.off(events.imageDelete, this.deleteImg);\n        this.parent.off(events.imageLink, this.insertImgLink);\n        this.parent.off(events.imageAlt, this.insertAltText);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.imageSize, this.imageSize);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.paste, this.imagePaste);\n        this.parent.off(events.destroy, this.removeEventListener);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick);\n            this.parent.formatter.editorManager.observer.off(events.checkUndo, this.undoStack);\n            if (this.parent.insertImageSettings.resize) {\n                EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n                EventHandler.remove(this.contentModule.getDocument(), 'mousedown', this.onDocumentClick);\n            }\n        }\n    };\n    Image.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Image.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.imageClick, this);\n        if (this.parent.insertImageSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            EventHandler.add(this.contentModule.getDocument(), 'mousedown', this.onDocumentClick, this);\n        }\n    };\n    Image.prototype.undoStack = function (args) {\n        if (args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = parseHtml(this.parent.formatter.getUndoRedoStack()[i].text);\n                temp.appendChild(contentElem);\n                var img = temp.querySelectorAll('img');\n                if (temp.querySelector('.e-img-resize') && img.length > 0) {\n                    for (var j = 0; j < img.length; j++) {\n                        img[j].style.outline = '';\n                    }\n                    detach(temp.querySelector('.e-img-resize'));\n                    this.parent.formatter.getUndoRedoStack()[i].text = temp.innerHTML;\n                }\n            }\n        }\n    };\n    Image.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        this.imgEle.parentElement.style.cursor = 'auto';\n        if (Browser.isDevice) {\n            removeClass([e.target.parentElement], 'e-mob-span');\n        }\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.resizeStop, args);\n        var pageX = this.getPointX(e);\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + e.clientY : e.pageY;\n        this.parent.formatter.editorManager.observer.on(events.checkUndo, this.undoStack, this);\n        this.parent.formatter.saveData();\n    };\n    Image.prototype.resizeStart = function (e) {\n        if (e.target.tagName === 'IMG') {\n            this.parent.preventDefaultResize(e);\n            var img = e.target;\n            if (this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n                detach(this.imgResizeDiv);\n            }\n            this.imageResize(img);\n        }\n        if (e.target.classList.contains('e-rte-imageboxmark')) {\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.resizeBtnInit();\n            if (this.quickToolObj) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n            if (e.target.classList.contains('e-rte-topLeft')) {\n                this.resizeBtnStat.topLeft = true;\n            }\n            if (e.target.classList.contains('e-rte-topRight')) {\n                this.resizeBtnStat.topRight = true;\n            }\n            if (e.target.classList.contains('e-rte-botLeft')) {\n                this.resizeBtnStat.botLeft = true;\n            }\n            if (e.target.classList.contains('e-rte-botRight')) {\n                this.resizeBtnStat.botRight = true;\n            }\n            if (Browser.isDevice && this.contentModule.getEditPanel().contains(this.imgResizeDiv) &&\n                !this.imgResizeDiv.classList.contains('e-mob-span')) {\n                addClass([this.imgResizeDiv], 'e-mob-span');\n            }\n            else {\n                var args = { event: e, requestType: 'images' };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Image.prototype.imageClick = function (e) {\n        if (Browser.isDevice) {\n            if ((e.target.tagName === 'IMG' &&\n                e.target.parentElement.tagName === 'A') ||\n                (e.target.tagName === 'IMG')) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                if (!this.parent.readonly) {\n                    this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n                }\n            }\n        }\n        if (e.target.tagName === 'IMG' &&\n            e.target.parentElement.tagName === 'A') {\n            e.preventDefault();\n        }\n    };\n    Image.prototype.imageResize = function (e) {\n        this.resizeBtnInit();\n        this.imgEle = e;\n        addClass([this.imgEle], 'e-resize');\n        this.imgResizeDiv = this.parent.createElement('span', { className: 'e-img-resize', id: this.rteID + '_imgResize' });\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topLeft', styles: 'cursor: nwse-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-topRight', styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botLeft', styles: 'cursor: nesw-resize'\n        }));\n        this.imgResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-imageboxmark e-rte-botRight', styles: 'cursor: nwse-resize'\n        }));\n        if (Browser.isDevice) {\n            addClass([this.imgResizeDiv], 'e-mob-rte');\n        }\n        e.style.outline = '2px solid #4a90e2';\n        this.imgResizePos(e, this.imgResizeDiv);\n        this.resizeImgDupPos(e);\n        this.contentModule.getEditPanel().appendChild(this.imgResizeDiv);\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n    };\n    Image.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Image.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Image.prototype.imgResizePos = function (e, imgResizeDiv) {\n        var pos = this.calcPos(e);\n        var top = pos.top;\n        var left = pos.left;\n        var imgWid = e.width;\n        var imgHgt = e.height;\n        var borWid = (Browser.isDevice) ? (4 * parseInt((e.style.outline.slice(-3)), 10)) + 2 :\n            (2 * parseInt((e.style.outline.slice(-3)), 10)) + 2; //span border width + image outline width\n        var devWid = ((Browser.isDevice) ? 0 : 2); // span border width\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botLeft').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-botRight').style.top = ((imgHgt - borWid) + top) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.left = ((imgWid - (borWid - devWid)) + left) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topRight').style.top = (top - (borWid)) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.left = (left - borWid) + 'px';\n        imgResizeDiv.querySelector('.e-rte-topLeft').style.top = (top - borWid) + 'px';\n    };\n    Image.prototype.calcPos = function (elem) {\n        var ignoreOffset = ['TD', 'TH', 'TABLE'];\n        var parentOffset = { top: 0, left: 0 };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = ((elem.offsetParent && (elem.offsetParent.classList.contains('e-img-caption') ||\n            ignoreOffset.indexOf(elem.offsetParent.tagName) > -1)) ?\n            closest(elem, '#' + this.parent.getID() + '_rte-edit-view') : elem.offsetParent) || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Image.prototype.setAspectRatio = function (img, expectedX, expectedY) {\n        if (isNullOrUndefined(img.width)) {\n            return;\n        }\n        var width = img.style.width !== '' ? parseInt(img.style.width, 10) : img.width;\n        var height = img.style.height !== '' ? parseInt(img.style.height, 10) : img.height;\n        if (width > height) {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc((width / height * expectedY), (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = (width / height * expectedY) + 'px';\n                img.style.height = expectedY + 'px';\n            }\n            else {\n                img.setAttribute('width', (width / height * expectedY).toString());\n                img.setAttribute('height', expectedY.toString());\n            }\n        }\n        else if (height > width) {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc(expectedX, (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = expectedX + 'px';\n                img.style.height = (height / width * expectedX) + 'px';\n            }\n            else {\n                img.setAttribute('width', expectedX.toString());\n                img.setAttribute('height', (height / width * expectedX).toString());\n            }\n        }\n        else {\n            if (this.parent.insertImageSettings.resizeByPercent) {\n                img.style.width = this.pixToPerc(expectedX, (img.previousElementSibling || img.parentElement)) + '%';\n                img.style.height = null;\n                img.removeAttribute('height');\n            }\n            else if (img.style.width !== '') {\n                img.style.width = expectedX + 'px';\n                img.style.height = expectedX + 'px';\n            }\n            else {\n                img.setAttribute('width', expectedX.toString());\n                img.setAttribute('height', expectedX.toString());\n            }\n        }\n    };\n    Image.prototype.pixToPerc = function (expected, parentEle) {\n        return expected / parseFloat(getComputedStyle(parentEle).width) * 100;\n    };\n    Image.prototype.imgDupMouseMove = function (width, height, e) {\n        var args = { event: e, requestType: 'images' };\n        this.parent.trigger(events.onResize, args);\n        if (args.cancel) {\n            this.cancelResizeAction();\n            return;\n        }\n        if ((parseInt(this.parent.insertImageSettings.minWidth, 10) >= parseInt(width, 10) ||\n            parseInt(this.parent.insertImageSettings.maxWidth, 10) <= parseInt(width, 10))) {\n            return;\n        }\n        if (!this.parent.insertImageSettings.resizeByPercent &&\n            (parseInt(this.parent.insertImageSettings.minHeight, 10) >= parseInt(height, 10) ||\n                parseInt(this.parent.insertImageSettings.maxHeight, 10) <= parseInt(height, 10))) {\n            return;\n        }\n        this.imgEle.parentElement.style.cursor = 'pointer';\n        this.setAspectRatio(this.imgEle, parseInt(width, 10), parseInt(height, 10));\n        this.resizeImgDupPos(this.imgEle);\n        this.imgResizePos(this.imgEle, this.imgResizeDiv);\n        this.parent.setContentHeight('', false);\n    };\n    Image.prototype.resizing = function (e) {\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.resizeBtnStat.topLeft || this.resizeBtnStat.topRight) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        var width = parseInt(this.imgDupPos.width, 10) + mouseX;\n        var height = parseInt(this.imgDupPos.height, 10) + mouseY;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        if (this.resizeBtnStat.botRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.botLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topRight) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topLeft) {\n            this.imgDupMouseMove(width + 'px', height + 'px', e);\n        }\n    };\n    Image.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.imgEle && this.imgResizeDiv && this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            detach(this.imgResizeDiv);\n            this.imgEle.style.outline = '';\n            this.imgResizeDiv = null;\n            this.pageX = null;\n            this.pageY = null;\n        }\n    };\n    Image.prototype.resizeImgDupPos = function (e) {\n        this.imgDupPos = {\n            width: (e.style.height !== '') ? this.imgEle.style.width : e.width + 'px',\n            height: (e.style.height !== '') ? this.imgEle.style.height : e.height + 'px'\n        };\n    };\n    Image.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { botLeft: false, botRight: false, topRight: false, topLeft: false };\n    };\n    Image.prototype.onToolbarAction = function (args) {\n        if (isIDevice()) {\n            this.parent.notify(events.selectionRestore, {});\n        }\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'Replace':\n                this.parent.notify(events.insertImage, args);\n                break;\n            case 'Caption':\n                this.parent.notify(events.imageCaption, args);\n                break;\n            case 'InsertLink':\n                this.parent.notify(events.imageLink, args);\n                break;\n            case 'AltText':\n                this.parent.notify(events.imageAlt, args);\n                break;\n            case 'Remove':\n                this.parent.notify(events.imageDelete, args);\n                break;\n            case 'Dimension':\n                this.parent.notify(events.imageSize, args);\n                break;\n            case 'OpenImageLink':\n                this.openImgLink(args);\n                break;\n            case 'EditImageLink':\n                this.editImgLink(args);\n                break;\n            case 'RemoveImageLink':\n                this.removeImgLink(args);\n                break;\n        }\n    };\n    Image.prototype.openImgLink = function (e) {\n        var target = e.selectParent[0].parentNode.target === '' ? '_self' : '_blank';\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            url: e.selectParent[0].parentNode.href, target: target, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n    };\n    Image.prototype.editImgLink = function (e) {\n        var selectParentEle = e.selectParent[0].parentNode;\n        var linkUpdate = this.i10n.getConstant('dialogUpdate');\n        var inputDetails = {\n            url: selectParentEle.href, target: selectParentEle.target,\n            header: 'Edit Link', btnText: linkUpdate\n        };\n        this.insertImgLink(e, inputDetails);\n    };\n    Image.prototype.removeImgLink = function (e) {\n        e.selection.restore();\n        var insertEle = (this.contentModule.getEditPanel().contains(this.captionEle) && closest(this.captionEle, 'a')) ?\n            this.captionEle : e.selectNode[0];\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            insertElement: insertEle, selectParent: e.selectParent,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            if (!isNullOrUndefined(e.selectParent)) {\n                removeClass([e.selectParent[0]], 'e-img-focus');\n            }\n        }\n    };\n    Image.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                (selectParentEle[0].tagName === 'IMG') && selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                    this.remvoeResizEle();\n                }\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], 'e-img-focus');\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && selectNodeEle[0].nodeName === 'IMG') {\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Images', subCommand: 'Remove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteImg(event_1);\n            }\n            if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n                this.remvoeResizEle();\n            }\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'insert-image':\n                if (this.parent.editorMode === 'HTML') {\n                    this.insertImage({\n                        args: {\n                            item: { command: 'Images', subCommand: 'Image' },\n                            originalEvent: originalEvent\n                        },\n                        selectNode: selectNodeEle,\n                        selection: save,\n                        selectParent: selectParentEle\n                    });\n                }\n                else {\n                    this.insertImage({\n                        args: {\n                            item: { command: 'Images', subCommand: 'Image' },\n                            originalEvent: originalEvent\n                        },\n                        member: 'image',\n                        text: this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),\n                        module: 'Markdown',\n                        name: 'insertImage'\n                    });\n                }\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    Image.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Images') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = (selectNodeEle[0].nodeName === 'IMG') ? selectNodeEle : [this.imgEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'JustifyLeft':\n                this.justifyImageLeft(args);\n                break;\n            case 'JustifyCenter':\n                this.justifyImageCenter(args);\n                break;\n            case 'JustifyRight':\n                this.justifyImageRight(args);\n                break;\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], 'e-img-focus');\n        }\n        this.cancelResizeAction();\n    };\n    Image.prototype.imageWithLinkQTBarItemUpdate = function () {\n        var separator;\n        var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                addClass([items[i]], 'e-link-groups');\n                items[i].style.display = 'none';\n            }\n            else if (items[i].getAttribute('title') === 'Insert Link') {\n                items[i].style.display = '';\n            }\n            else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                separator = items[i];\n                detach(items[i]);\n            }\n        }\n        var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n        this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n    };\n    Image.prototype.showImageQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Images' || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.imageQTBar)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (target && !closest(target, 'a')) {\n            this.imageWithLinkQTBarItemUpdate();\n        }\n        if (target.nodeName === 'IMG') {\n            addClass([target], ['e-img-focus']);\n        }\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        if (this.parent.quickToolbarModule.imageQTBar) {\n            if (e.isNotify) {\n                setTimeout(function () { _this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target); }, 400);\n            }\n            else {\n                this.quickToolObj.imageQTBar.showPopup(args.pageX, pageY, target);\n            }\n        }\n    };\n    Image.prototype.hideImageQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.e-img-focus'))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.e-img-focus')], 'e-img-focus');\n            if (this.quickToolObj && this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n            }\n        }\n    };\n    Image.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.imageQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.imageQTBar.element.classList.contains('e-rte-pop');\n            if (target.nodeName === 'IMG' && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                if (isIDevice()) {\n                    this.parent.notify(events.selectionSave, e);\n                }\n                addClass([target], 'e-img-focus');\n                var items = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item');\n                var separator = void 0;\n                if (closest(target, 'a')) {\n                    for (var i = 0; i < items.length; i++) {\n                        if (items[i].getAttribute('title') === this.i10n.getConstant('openLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('editLink') ||\n                            items[i].getAttribute('title') === this.i10n.getConstant('removeLink')) {\n                            items[i].style.display = '';\n                            removeClass([items[i]], 'e-link-groups');\n                        }\n                        else if (items[i].getAttribute('title') === 'Insert Link') {\n                            items[i].style.display = 'none';\n                        }\n                        else if (items[i].classList.contains('e-rte-horizontal-separator')) {\n                            separator = items[i];\n                            detach(items[i]);\n                        }\n                    }\n                    var newItems = this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll('.e-toolbar-item:not(.e-link-groups)');\n                    this.quickToolObj.imageQTBar.addQTBarItem(['-'], Math.round(newItems.length / 2));\n                }\n                else if (!closest(target, 'a')) {\n                    this.imageWithLinkQTBarItemUpdate();\n                }\n                this.showImageQuickToolbar({ args: args, type: 'Images', elements: [args.target] });\n            }\n            else {\n                this.hideImageQuickToolbar();\n            }\n        }\n    };\n    Image.prototype.insertImgLink = function (e, inputDetails) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var linkWrap = this.parent.createElement('div', { className: 'e-img-linkwrap' });\n            var linkUrl = this.i10n.getConstant('linkurl');\n            var content = '<div class=\"e-rte-field\">' +\n                '<input type=\"text\" data-role =\"none\" class=\"e-input e-img-link\" spellcheck=\"false\" placeholder=\"' + linkUrl + '\"/></div>' +\n                '<div class=\"e-rte-label\"></div>' + '<div class=\"e-rte-field\">' +\n                '<input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>';\n            var contentElem = parseHtml(content);\n            linkWrap.appendChild(contentElem);\n            var linkTarget = linkWrap.querySelector('.e-rte-linkTarget');\n            var inputLink = linkWrap.querySelector('.e-img-link');\n            var linkOpenLabel = this.i10n.getConstant('linkOpenInNewWindow');\n            this.checkBoxObj = new CheckBox({\n                label: linkOpenLabel, checked: true, enableRtl: this.parent.enableRtl, change: function (e) {\n                    if (e.checked) {\n                        target_1 = '_blank';\n                    }\n                    else {\n                        target_1 = null;\n                    }\n                }\n            });\n            this.checkBoxObj.createElement = this.parent.createElement;\n            this.checkBoxObj.appendTo(linkTarget);\n            var target_1 = this.checkBoxObj.checked ? '_blank' : null;\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var linkargs_1 = {\n                args: e.args,\n                selfImage: this, selection: e.selection,\n                selectNode: e.selectNode, selectParent: e.selectParent, link: inputLink, target: target_1\n            };\n            this.dialogObj.setProperties({\n                height: 'inherit',\n                width: '290px',\n                header: this.parent.localeObj.getConstant('imageInsertLinkHeader'),\n                content: linkWrap,\n                position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertlink(linkargs_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-link', isPrimary: true\n                        }\n                    }]\n            });\n            if (!isNullOrUndefined(inputDetails)) {\n                inputLink.value = inputDetails.url;\n                (inputDetails.target) ? this.checkBoxObj.checked = true : this.checkBoxObj.checked = false;\n                this.dialogObj.header = inputDetails.header;\n            }\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAltText = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        var altText = this.i10n.getConstant('altText');\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var altWrap = this.parent.createElement('div', { className: 'e-img-altwrap' });\n            var altHeader = this.i10n.getConstant('alternateHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var getAlt = (e.selectNode[0].getAttribute('alt') === null) ? '' :\n                e.selectNode[0].getAttribute('alt');\n            var content = '<div class=\"e-rte-field\">' +\n                '<input type=\"text\" spellcheck=\"false\" value=\"' + getAlt + '\" class=\"e-input e-img-alt\" placeholder=\"' + altText + '\"/>' +\n                '</div>';\n            var contentElem = parseHtml(content);\n            altWrap.appendChild(contentElem);\n            var inputAlt = altWrap.querySelector('.e-img-alt');\n            var altArgs_1 = {\n                args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode,\n                alt: inputAlt\n            };\n            this.dialogObj.setProperties({\n                height: 'inherit', width: '290px', header: altHeader, content: altWrap, position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertAlt(altArgs_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-alt', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.insertAlt = function (e) {\n        if (!isNullOrUndefined(e.alt)) {\n            e.selection.restore();\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            var altText = e.alt.value;\n            this.parent.formatter.process(this.parent, e.args, e.args, {\n                altText: altText, selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            this.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.insertlink = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var url = e.link.value;\n        if (url === '') {\n            addClass([e.link], 'e-error');\n            e.link.setSelectionRange(0, url.length);\n            e.link.focus();\n            return;\n        }\n        if (!this.isUrl(url)) {\n            url = 'http://' + url;\n        }\n        else {\n            removeClass([e.link], 'e-error');\n        }\n        var proxy = e.selfImage;\n        if (proxy.parent.editorMode === 'HTML') {\n            e.selection.restore();\n        }\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (e.selectNode[0].parentElement.nodeName === 'A') {\n            proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n                url: url, target: proxy.checkBoxObj.checked ? '_blank' : null, selectNode: e.selectNode,\n                subCommand: e.args.item.subCommand\n            });\n            proxy.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        proxy.parent.formatter.process(proxy.parent, e.args, e.args, {\n            url: url, target: proxy.checkBoxObj.checked ? '_blank' : null, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        proxy.dialogObj.hide({ returnValue: false });\n    };\n    Image.prototype.isUrl = function (url) {\n        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi;\n        return regexp.test(url);\n    };\n    Image.prototype.deleteImg = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        if (this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n            this.remvoeResizEle();\n        }\n        this.parent.formatter.process(this.parent, e.args, e.args, {\n            selectNode: e.selectNode,\n            captionClass: classes.CLS_CAPTION,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n        }\n        this.cancelResizeAction();\n    };\n    Image.prototype.caption = function (e) {\n        var selectNode = e.selectNode[0];\n        if (selectNode.nodeName !== 'IMG') {\n            return;\n        }\n        e.selection.restore();\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        this.cancelResizeAction();\n        addClass([selectNode], 'e-rte-image');\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Caption';\n        if (!isNullOrUndefined(closest(selectNode, '.' + classes.CLS_CAPTION))) {\n            detach(closest(selectNode, '.' + classes.CLS_CAPTION));\n            if (selectNode.parentElement.tagName === 'A') {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode.parentElement, selectNode: e.selectNode, subCommand: subCommand });\n            }\n            else {\n                this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: selectNode, selectNode: e.selectNode, subCommand: subCommand });\n            }\n        }\n        else {\n            this.captionEle = this.parent.createElement('span', {\n                className: classes.CLS_CAPTION,\n                attrs: { contenteditable: 'false', draggable: 'false' }\n            });\n            var imgWrap = this.parent.createElement('span', { className: 'e-img-wrap' });\n            var imgInner = this.parent.createElement('span', { className: 'e-img-inner', attrs: { contenteditable: 'true' } });\n            imgWrap.appendChild(e.selectNode[0]);\n            imgWrap.appendChild(imgInner);\n            var imgCaption = this.i10n.getConstant('imageCaption');\n            imgInner.innerHTML = imgCaption;\n            this.captionEle.appendChild(imgWrap);\n            if (selectNode.classList.contains(classes.CLS_IMGINLINE)) {\n                addClass([this.captionEle], classes.CLS_CAPINLINE);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGBREAK)) {\n                addClass([this.captionEle], classes.CLS_IMGBREAK);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGLEFT)) {\n                addClass([this.captionEle], classes.CLS_IMGLEFT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGRIGHT)) {\n                addClass([this.captionEle], classes.CLS_IMGRIGHT);\n            }\n            if (selectNode.classList.contains(classes.CLS_IMGCENTER)) {\n                addClass([this.captionEle], classes.CLS_IMGCENTER);\n            }\n            this.parent.formatter.process(this.parent, e.args, e.args, { insertElement: this.captionEle, selectNode: e.selectNode, subCommand: subCommand });\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), imgInner.childNodes[0], imgInner.childNodes[0], 0, imgInner.childNodes[0].textContent.length);\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n            this.quickToolObj.imageQTBar.hidePopup();\n            removeClass([selectNode], 'e-img-focus');\n        }\n    };\n    Image.prototype.imageSize = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var imgSizeHeader = this.i10n.getConstant('imageSizeHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var dialogContent = this.imgsizeInput(e);\n            var selectObj_1 = { args: e.args, selfImage: this, selection: e.selection, selectNode: e.selectNode };\n            this.dialogObj.setProperties({\n                height: 'inherit', width: '290px', header: imgSizeHeader, content: dialogContent, position: { X: 'center', Y: 'center' },\n                buttons: [{\n                        click: function (e) { _this.insertSize(selectObj_1); },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-size', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Image.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'IMG') {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageLeft = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyLeft';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageRight = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyRight';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.justifyImageCenter = function (e) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'JustifyCenter';\n        this.parent.formatter.process(this.parent, e.args, e.args, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Image.prototype.imagDialog = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var imgDialog = this.parent.createElement('div', { className: 'e-rte-img-dialog', id: this.rteID + '_image' });\n        this.parent.element.appendChild(imgDialog);\n        var imgInsert = this.i10n.getConstant('dialogInsert');\n        var imglinkCancel = this.i10n.getConstant('dialogCancel');\n        var imgHeader = this.i10n.getConstant('imageHeader');\n        var selection = e.selection;\n        var selectObj = { selfImage: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        this.dialogObj = new Dialog({\n            header: imgHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'inherit',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertImageUrl.bind(selectObj),\n                    buttonModel: { content: imgInsert, cssClass: 'e-flat e-insertImage', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: imglinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                if (event && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                    else {\n                        _this.parent.formatter.editorManager.markdownSelection.restore(_this.parent.contentModule.getEditPanel());\n                    }\n                }\n                _this.dialogObj.destroy();\n                detach(_this.dialogObj.element);\n                _this.dialogObj = null;\n            },\n        });\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(imgDialog);\n        imgDialog.style.maxHeight = 'inherit';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.imageQTBar && document.body.contains(this.quickToolObj.imageQTBar.element)) {\n                this.quickToolObj.imageQTBar.hidePopup();\n                if (!isNullOrUndefined(e.selectParent)) {\n                    removeClass([e.selectParent[0]], 'e-img-focus');\n                }\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n        }\n    };\n    Image.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n    };\n    Image.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (target.nodeName === 'IMG') {\n            this.imgEle = target;\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((!closest(target, '#' + this.dialogObj.element.id) && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Image') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Image')))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        if (e.target.tagName !== 'IMG' && this.imgResizeDiv && !(this.quickToolObj &&\n            this.quickToolObj.imageQTBar && this.quickToolObj.imageQTBar.element.contains(e.target)) &&\n            this.contentModule.getEditPanel().contains(this.imgResizeDiv)) {\n            this.cancelResizeAction();\n        }\n        if (target.tagName !== 'IMG' && this.contentModule.getEditPanel().querySelector('.e-img-resize')) {\n            this.remvoeResizEle();\n            this.contentModule.getEditPanel().querySelector('img').style.outline = '';\n        }\n    };\n    Image.prototype.remvoeResizEle = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        detach(this.contentModule.getEditPanel().querySelector('.e-img-resize'));\n    };\n    Image.prototype.imageUrlPopup = function (e) {\n        var imgUrl = this.parent.createElement('div', { className: 'imgUrl' });\n        var placeUrl = this.i10n.getConstant('imageUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-img-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false' }\n        });\n        imgUrl.appendChild(this.inputUrl);\n        return imgUrl;\n    };\n    Image.prototype.insertImageUrl = function (e) {\n        var proxy = this.selfImage;\n        var url = proxy.inputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertImageSettings.display === 'inline' ?\n                classes.CLS_IMGINLINE : classes.CLS_IMGBREAK);\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.dialogObj.hide({ returnValue: false });\n            proxy.uploadUrl.url = '';\n        }\n        else if (url !== '') {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(this.selection.range.startContainer.parentNode, '#' + proxy.contentModule.getPanel().id))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var regex = /[\\w-]+.(jpg|png|jpeg|gif)/g;\n            var matchUrl = (!isNullOrUndefined(url.match(regex)) && proxy.parent.editorMode === 'HTML') ? url.match(regex)[0] : '';\n            var value = {\n                cssClass: (proxy.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                url: url, selection: this.selection, altText: matchUrl,\n                selectParent: this.selectParent, width: {\n                    width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                    maxWidth: proxy.parent.insertImageSettings.maxWidth\n                },\n                height: {\n                    height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                    maxHeight: proxy.parent.insertImageSettings.maxHeight\n                }\n            };\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n            proxy.dialogObj.hide({ returnValue: false });\n        }\n    };\n    Image.prototype.imgsizeInput = function (e) {\n        var selectNode = e.selectNode[0];\n        var imgHeight = this.i10n.getConstant('imageHeight');\n        var imgWidth = this.i10n.getConstant('imageWidth');\n        var imgSizeWrap = this.parent.createElement('div', { className: 'e-img-sizewrap' });\n        var widthVal = (selectNode.getAttribute('width') === 'auto' ||\n            isNullOrUndefined(selectNode.getAttribute('width'))) ? selectNode.width : selectNode.getClientRects()[0].width;\n        var heightVal = (selectNode.getAttribute('height') === 'auto' ||\n            isNullOrUndefined(selectNode.getAttribute('height'))) ? selectNode.height : selectNode.getClientRects()[0].height;\n        var content = '<div class=\"e-rte-label\"><label>' + imgWidth +\n            '</label></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"imgwidth\" class=\"e-img-width\" value=' +\n            widthVal\n            + ' /></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + imgHeight + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" data-role =\"none\" id=\"imgheight\" class=\"e-img-height\" value=' +\n            heightVal\n            + ' /></div>';\n        var contentElem = parseHtml(content);\n        imgSizeWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: '###.### px', min: this.parent.insertImageSettings.minWidth,\n            max: this.parent.insertImageSettings.maxWidth,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.createElement = this.parent.createElement;\n        widthNum.appendTo(imgSizeWrap.querySelector('#imgwidth'));\n        var heightNum = new NumericTextBox({\n            format: '###.### px', min: this.parent.insertImageSettings.minHeight,\n            max: this.parent.insertImageSettings.maxHeight,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        heightNum.createElement = this.parent.createElement;\n        heightNum.appendTo(imgSizeWrap.querySelector('#imgheight'));\n        return imgSizeWrap;\n    };\n    Image.prototype.insertSize = function (e) {\n        e.selection.restore();\n        var proxy = e.selfImage;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        var dialogEle = proxy.dialogObj.element;\n        var width = parseFloat(dialogEle.querySelector('.e-img-width').value);\n        var height = parseFloat(dialogEle.parentElement.querySelector('.e-img-height').value);\n        proxy.parent.formatter.process(this.parent, e.args, e.args, {\n            width: width, height: height, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.imgResizeDiv) {\n            proxy.imgResizePos(e.selectNode[0], this.imgResizeDiv);\n        }\n        proxy.dialogObj.hide({ returnValue: true });\n    };\n    Image.prototype.insertImage = function (e) {\n        this.imagDialog(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var dialogContent = this.parent.createElement('div', { className: 'e-img-content' });\n            if ((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n                || this.parent.editorMode === 'HTML') {\n                dialogContent.appendChild(this.imgUpload(e));\n            }\n            var linkHeader = this.parent.createElement('div', { className: 'e-linkheader' });\n            var linkHeaderText = this.i10n.getConstant('imageLinkHeader');\n            if (this.parent.editorMode === 'HTML') {\n                linkHeader.innerHTML = linkHeaderText;\n            }\n            else {\n                linkHeader.innerHTML = this.i10n.getConstant('mdimageLink');\n            }\n            dialogContent.appendChild(linkHeader);\n            dialogContent.appendChild(this.imageUrlPopup(e));\n            if (e.selectNode && e.selectNode[0].nodeName === 'IMG') {\n                this.dialogObj.setProperties({\n                    header: this.parent.localeObj.getConstant('editImageHeader'), content: dialogContent\n                });\n                this.dialogObj.element.querySelector('.e-insertImage').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n            }\n            else {\n                this.dialogObj.setProperties({ content: dialogContent }, false);\n            }\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            if ((!isNullOrUndefined(this.parent.insertImageSettings.path) && this.parent.editorMode === 'Markdown')\n                || this.parent.editorMode === 'HTML') {\n                dialogContent.querySelector('#' + this.rteID + '_insertImage').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-img-url').focus();\n            }\n        }\n    };\n    Image.prototype.imgUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        var proxy = this;\n        if (proxy.parent.editorMode === 'HTML' &&\n            isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '#' + this.contentModule.getPanel().id))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-img-uploadwrap e-droparea' });\n        var deviceImgUpMsg = this.i10n.getConstant('imageDeviceUploadMessage');\n        var imgUpMsg = this.i10n.getConstant('imageUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' });\n        var spanMsg = this.parent.createElement('span', {\n            className: 'e-rte-upload-text',\n            innerHTML: ((Browser.isDevice) ? deviceImgUpMsg : imgUpMsg)\n        });\n        span.appendChild(spanMsg);\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn', id: this.rteID + '_insertImage',\n            attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        var button = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        button.createElement = this.parent.createElement;\n        button.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var altText;\n        this.uploadObj = new Uploader({\n            asyncSettings: {\n                saveUrl: this.parent.insertImageSettings.saveUrl,\n            },\n            dropArea: span,\n            multiple: false,\n            enableRtl: this.parent.enableRtl,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            selected: function (e) {\n                altText = e.filesData[0].name;\n                if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                    var reader_1 = new FileReader();\n                    reader_1.addEventListener('load', function (e) {\n                        var url = URL.createObjectURL(proxy.url(reader_1.result));\n                        proxy.uploadUrl = {\n                            url: url, selection: save, altText: altText, selectParent: selectParent,\n                            width: {\n                                width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                                maxWidth: proxy.parent.insertImageSettings.maxWidth\n                            },\n                            height: {\n                                height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                                maxHeight: proxy.parent.insertImageSettings.maxHeight\n                            }\n                        };\n                        proxy.inputUrl.setAttribute('disabled', 'true');\n                    });\n                    reader_1.readAsDataURL(e.filesData[0].rawFile);\n                }\n            },\n            success: function (e) {\n                if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                    var url = _this.parent.insertImageSettings.path + e.file.name;\n                    var value = { url: url, selection: save };\n                    proxy.uploadUrl = {\n                        url: url, selection: save, altText: altText, selectParent: selectParent,\n                        width: {\n                            width: proxy.parent.insertImageSettings.width, minWidth: proxy.parent.insertImageSettings.minWidth,\n                            maxWidth: proxy.parent.insertImageSettings.maxWidth\n                        },\n                        height: {\n                            height: proxy.parent.insertImageSettings.height, minHeight: proxy.parent.insertImageSettings.minHeight,\n                            maxHeight: proxy.parent.insertImageSettings.maxHeight\n                        }\n                    };\n                    proxy.inputUrl.setAttribute('disabled', 'true');\n                }\n            },\n            removing: function () {\n                proxy.inputUrl.removeAttribute('disabled');\n                proxy.uploadUrl.url = '';\n            }\n        });\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Image.prototype.fileSelect = function () {\n        this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    Image.prototype.imagePaste = function (args) {\n        if (args.text.length === 0) {\n            var proxy_1 = this;\n            var reader_2 = new FileReader();\n            args.args.preventDefault();\n            reader_2.addEventListener('load', function (e) {\n                var url = {\n                    cssClass: (proxy_1.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                    url: URL.createObjectURL(proxy_1.url(reader_2.result)),\n                    width: {\n                        width: proxy_1.parent.insertImageSettings.width, minWidth: proxy_1.parent.insertImageSettings.minWidth,\n                        maxWidth: proxy_1.parent.insertImageSettings.maxWidth\n                    },\n                    height: {\n                        height: proxy_1.parent.insertImageSettings.height, minHeight: proxy_1.parent.insertImageSettings.minHeight,\n                        maxHeight: proxy_1.parent.insertImageSettings.maxHeight\n                    }\n                };\n                proxy_1.parent.formatter.process(proxy_1.parent, { item: { command: 'Images', subCommand: 'Image' } }, args.args, url);\n            });\n            reader_2.readAsDataURL(args.file);\n        }\n    };\n    Image.prototype.url = function (dataurl) {\n        var arr = dataurl.split(',');\n        var mime = arr[0].match(/:(.*?);/)[1];\n        var bstr = atob(arr[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n        while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n        }\n        return new Blob([u8arr], { type: mime });\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Image.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Image.prototype.getModuleName = function () {\n        return 'image';\n    };\n    return Image;\n}());\nexport { Image };\n","import { removeClass, selectAll, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render RichTextEditor content\n * @hidden\n */\nvar ViewSource = /** @class */ (function () {\n    /**\n     * Constructor for view source module\n     */\n    function ViewSource(parent, locator) {\n        this.parent = parent;\n        var serviceLocator = locator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    ViewSource.prototype.addEventListener = function () {\n        this.parent.on(events.sourceCode, this.sourceCode, this);\n        this.parent.on(events.initialEnd, this.onInitialEnd, this);\n        this.parent.on(events.updateSource, this.updateSourceCode, this);\n    };\n    ViewSource.prototype.onInitialEnd = function () {\n        this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ViewSource.prototype.removeEventListener = function () {\n        this.unWireEvent();\n        this.parent.off(events.sourceCode, this.sourceCode);\n        this.parent.off(events.updateSource, this.updateSourceCode);\n        this.parent.off(events.initialEnd, this.onInitialEnd);\n        this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    ViewSource.prototype.getSourceCode = function () {\n        return this.parent.createElement('textarea', { className: 'e-rte-srctextarea' });\n    };\n    ViewSource.prototype.wireEvent = function (element) {\n        this.keyboardModule = new KeyboardEvents(element, {\n            keyAction: this.previewKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n        EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n    };\n    ViewSource.prototype.unWireEvent = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        if (this.previewElement) {\n            EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n        }\n    };\n    ViewSource.prototype.wireBaseKeyDown = function () {\n        this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n            keyAction: this.parent.keyDown.bind(this.parent), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n    };\n    ViewSource.prototype.unWireBaseKeyDown = function () {\n        this.parent.keyboardModule.destroy();\n    };\n    ViewSource.prototype.mouseDownHandler = function (e) {\n        this.parent.notify(events.sourceCodeMouseDown, { args: e });\n    };\n    ViewSource.prototype.previewKeyDown = function (event) {\n        switch (event.action) {\n            case 'html-source':\n                this.updateSourceCode(event);\n                event.preventDefault();\n                break;\n        }\n    };\n    ViewSource.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'html-source':\n                e.event.preventDefault();\n                this.sourceCode(e);\n                e.callBack({\n                    requestType: 'SourceCode',\n                    editorMode: 'HTML',\n                    event: e.event\n                });\n                break;\n        }\n    };\n    ViewSource.prototype.sourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.parent.element);\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'SourceCode', updateItem: 'Preview',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (isNullOrUndefined(this.previewElement)) {\n            this.previewElement = this.getSourceCode();\n        }\n        this.parent.updateValueData();\n        if (this.parent.iframeSettings.enable) {\n            var rteContent = void 0;\n            if (isNullOrUndefined(this.parent.element.querySelector('#' + this.parent.element.id + '_source-view'))) {\n                rteContent = this.parent.createElement('div', {\n                    className: 'e-source-content', id: this.parent.element.id + '_source-view'\n                });\n            }\n            else {\n                rteContent = this.parent.element.querySelector('#' + this.parent.element.id + '_source-view');\n            }\n            rteContent.appendChild(this.previewElement);\n            this.parent.element.appendChild(rteContent);\n            rteContent.style.height = this.contentModule.getPanel().style.height;\n            rteContent.style.marginTop = this.contentModule.getPanel().style.marginTop;\n            this.getPanel().value = this.parent.value;\n            this.contentModule.getPanel().style.display = 'none';\n            rteContent.style.display = 'block';\n        }\n        else {\n            this.contentModule.getPanel().appendChild(this.previewElement);\n            this.getPanel().value = (this.contentModule.getEditPanel().innerHTML === '<p><br></p>' ||\n                this.contentModule.getEditPanel().innerHTML.length === 12) ||\n                (this.contentModule.getEditPanel().childNodes.length === 1 &&\n                    this.contentModule.getEditPanel().childNodes[0].tagName === 'P' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 7) ? null : this.parent.value;\n            this.contentModule.getEditPanel().style.display = 'none';\n            this.previewElement.style.display = 'block';\n        }\n        this.parent.isBlur = false;\n        this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        this.parent.enableToolbarItem('SourceCode');\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        removeClass(tbItems, [CLS_ACTIVE]);\n        this.parent.setContentHeight('sourceCode');\n        this.wireEvent(this.previewElement);\n        this.unWireBaseKeyDown();\n        this.previewElement.focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder)) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder');\n            placeHolderWrapper.style.display = 'none';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        this.parent.invokeChangeEvent();\n    };\n    ViewSource.prototype.updateSourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        var editHTML = this.getPanel();\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'Preview', updateItem: 'SourceCode',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (this.parent.iframeSettings.enable) {\n            editHTML.parentElement.style.display = 'none';\n            this.contentModule.getPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = editHTML.value;\n        }\n        else {\n            editHTML.style.display = 'none';\n            this.contentModule.getEditPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = editHTML.value;\n        }\n        this.parent.isBlur = false;\n        this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        this.parent.setContentHeight();\n        this.unWireEvent();\n        this.wireBaseKeyDown();\n        this.contentModule.getEditPanel().focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder) && this.contentModule.getEditPanel().innerText.length === 0) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder');\n            placeHolderWrapper.style.display = 'block';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        this.parent.formatter.enableUndo(this.parent);\n        this.parent.invokeChangeEvent();\n    };\n    ViewSource.prototype.getPanel = function () {\n        return this.parent.element.querySelector('.e-rte-srctextarea');\n    };\n    ViewSource.prototype.getViewPanel = function () {\n        return (this.parent.iframeSettings.enable && this.getPanel()) ? this.getPanel().parentElement : this.getPanel();\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     * @return {void}\n     */\n    ViewSource.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return ViewSource;\n}());\nexport { ViewSource };\n","import { detach, closest, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Dialog, Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.createTable, this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.dropdownSelect);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyDown, this.keyDown);\n    };\n    Table.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n        this.parent.on(events.mouseDown, this.cellSelect, this);\n        if (this.parent.tableSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n        }\n        if (!Browser.isDevice && this.parent.tableSettings.resize) {\n            EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n                this.tableStyles(args, item.subCommand);\n                break;\n        }\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        var proxy = this;\n        switch (event.action) {\n            case 'escape':\n                break;\n            case 'insert-table':\n                if (this.parent.editorMode === 'HTML') {\n                    var docElement = this.parent.contentModule.getDocument();\n                    var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n                    var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n                    var args = {\n                        originalEvent: e.args,\n                        item: {\n                            command: 'Table',\n                            subCommand: 'CreateTable'\n                        }\n                    };\n                    this.insertTableDialog({\n                        self: this,\n                        args: args, selection: selection\n                    });\n                }\n                event.preventDefault();\n                break;\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeEle();\n                }\n            }\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                switch (event.keyCode) {\n                    case 9:\n                    case 37:\n                    case 39:\n                        proxy.tabSelection(event, selection, ele);\n                        break;\n                    case 40:\n                    case 38:\n                        proxy.tableArrowNavigation(event, selection, ele);\n                        break;\n                }\n            }\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = (args.selection.range.startContainer.nodeName === 'TD' ||\n            args.selection.range.startContainer.nodeName === 'TH') ?\n            args.selection.range.startContainer : args.selection.range.startContainer.parentElement;\n        if (tdEle.nodeName !== 'TD' && tdEle.nodeName !== 'TH') {\n            return;\n        }\n        this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? table.classList.remove(classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? table.classList.remove(classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n        }\n        this.parent.formatter.saveData();\n        this.parent.formatter.editorManager.nodeSelection.restore();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                this.addRow(selection, event, true);\n                nextElement = nextElement.parentElement.nextSibling.firstChild;\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextSibling)) ?\n                closest(ele, 'tr').nextSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousSibling)) ?\n                closest(ele, 'tr').previousSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        var selectedCell = selection.range.startContainer;\n        selectedCell = (selectedCell.nodeType === 3) ? closest(selectedCell.parentNode, 'td,th') : closest(selectedCell, 'td, th');\n        if (selectedCell && (selectedCell.nodeName === 'TD' || selectedCell.nodeName === 'TH')) {\n            var items = closest(selectedCell, 'table').querySelectorAll('.' + classes.CLS_TABLE_SEL);\n            for (var i = 0; i < items.length; i++) {\n                items[i].style.backgroundColor = args.item.value;\n            }\n            this.parent.formatter.saveData();\n        }\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n                    this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n                this.quickToolObj.tableQTBar.showPopup(args.pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClass([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    Table.prototype.tableCellLeave = function (e) {\n        removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(selectionObj.selection.range.startContainer.parentNode, '#' + proxy.contentModule.getPanel().id))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            row: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width,\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            target.removeAttribute('class');\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            this.removeResizeEle();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n    };\n    Table.prototype.resizeHelper = function (e) {\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table');\n        if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeEle();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = Array.prototype.slice.call(table.rows[0].cells, 1);\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, 1)[0]);\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length > i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                className: classes.CLS_TB_COL_RES, attrs: {\n                    'data-col': (i + 1).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                className: classes.CLS_TB_ROW_RES, attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) +\n                'px; left:' + (this.calcPos(rows[i]).left + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES, attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeEle = function () {\n        var item = this.contentModule.getEditPanel().querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-control');\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                this.columnEle = this.curTable.rows[0].cells[parseInt(target.getAttribute('data-col'), 10)];\n                this.colIndex = this.columnEle.cellIndex;\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper'\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = pos.left + this.calcPos(this.columnEle).left - 1;\n            this.helper.style.left = left + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.resizing = function (e) {\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.onResize, args);\n        if (args.cancel) {\n            this.cancelResizeAction();\n            return;\n        }\n        var tableReBox = this.contentModule.getEditPanel().querySelector('.e-table-box');\n        var tableWidth = parseInt(getComputedStyle(this.curTable).width, 10);\n        var tableHeight = parseInt(getComputedStyle(this.curTable).height, 10);\n        if (this.resizeBtnStat.column) {\n            var cellColl = this.curTable.rows[0].cells;\n            var width = parseFloat(getComputedStyle(this.columnEle).width);\n            var actualwid = width - mouseX;\n            var totalwid = parseFloat(getComputedStyle(this.columnEle).width) +\n                parseFloat(getComputedStyle(cellColl[this.colIndex - 1]).width);\n            for (var i = 0; i < this.curTable.rows.length; i++) {\n                if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                    this.curTable.rows[i].cells[this.colIndex - 1].style.width = totalwid - actualwid + 'px';\n                    this.curTable.rows[i].cells[this.colIndex].style.width = actualwid + 'px';\n                }\n            }\n            this.updateHelper();\n        }\n        else if (this.resizeBtnStat.row) {\n            this.parent.preventDefaultResize(e);\n            var height = parseFloat(getComputedStyle(this.rowEle).height) + mouseY;\n            if (height > 20) {\n                this.rowEle.style.height = height + 'px';\n            }\n            this.curTable.style.height = '';\n            tableReBox.style.cssText = 'top: ' + (this.calcPos(this.curTable).top + tableHeight - 4) +\n                'px; left:' + (this.calcPos(this.curTable).left + tableWidth - 4) + 'px;';\n            this.updateHelper();\n        }\n        else if (this.resizeBtnStat.tableBox) {\n            if (!Browser.isDevice) {\n                EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n            }\n            this.curTable.style.width = tableWidth + mouseX + 'px';\n            this.curTable.style.height = tableHeight + mouseY + 'px';\n            tableReBox.classList.add('e-rbox-select');\n            tableReBox.style.cssText = 'top: ' + (this.calcPos(this.curTable).top + tableHeight - 4) +\n                'px; left:' + (this.calcPos(this.curTable).left + tableWidth - 4) + 'px;';\n        }\n    };\n    Table.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeEle();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            if (!Browser.isDevice) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n            this.removeResizeEle();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n                this.helper = null;\n            }\n            this.pageX = null;\n            this.pageY = null;\n            this.moveEle = null;\n        }\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        this.removeResizeEle();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.insertTableDialog(args);\n            return;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = '1X1';\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup', id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn', id: this.rteID + '_insertTable',\n            attrs: { type: 'button' }\n        });\n        this.dlgDiv.appendChild(btnEle);\n        var button = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        button.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        if (target && target.classList && ((this.popupObj && !closest(target, '#' + this.popupObj.element.id) ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')) {\n            removeClass(this.parent.element.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n            this.hideTableQuickToolbar();\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeEle();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row', attrs: { 'data-column': '' + row } });\n            for (var col = 0; col < 10; col++) {\n                var display = (row > 2) ? 'none' : 'inline-block';\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default', attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = display;\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) { proxy.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' });\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div>'\n            + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', { className: 'e-rte-edit-table', id: this.rteID + '_tabledialog' });\n        this.parent.element.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        this.editdlgObj = new Dialog({\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) { _this.cancelDialog(e); },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.editdlgObj = null;\n            },\n        });\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || (!isNullOrUndefined(args.args)\n                && !isNullOrUndefined(args.args.originalEvent) &&\n                args.args.originalEvent.action === 'insert-table')\n                || proxy.parent.inlineMode.enable) ? args : this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n        table.cellPadding = dialogEle.querySelector('.e-cell-padding').value;\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\" '\n            + ' /></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" />'\n            + ' </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        var padding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        padding.appendTo(tableWrap.querySelector('#cellPadding'));\n        var spacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        spacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Table.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    return Table;\n}());\nexport { Table };\n","/** @hidden  */\nexport var executeGroup = {\n    'bold': {\n        command: 'style',\n        subCommand: 'bold',\n        value: 'strong'\n    },\n    'italic': {\n        command: 'style',\n        subCommand: 'italic',\n        value: 'em'\n    },\n    'underline': {\n        command: 'style',\n        subCommand: 'underline',\n        value: 'span'\n    },\n    'strikeThrough': {\n        command: 'style',\n        subCommand: 'strikeThrough',\n        value: 'span'\n    },\n    'superscript': {\n        command: 'effects',\n        subCommand: 'superscript',\n        value: 'sup'\n    },\n    'subscript': {\n        command: 'effects',\n        subCommand: 'subscript',\n        value: 'sub'\n    },\n    'uppercase': {\n        command: 'casing',\n        subCommand: 'uppercase'\n    },\n    'lowercase': {\n        command: 'casing',\n        subCommand: 'lowercase'\n    },\n    'fontColor': {\n        command: 'font',\n        subCommand: 'fontcolor',\n        value: '#ff0000'\n    },\n    'fontName': {\n        command: 'font',\n        subCommand: 'fontname',\n        value: 'Segoe UI'\n    },\n    'fontSize': {\n        command: 'font',\n        subCommand: 'fontsize',\n        value: '10pt'\n    },\n    'backColor': {\n        command: 'font',\n        subCommand: 'backgroundcolor',\n        value: '#ffff00'\n    },\n    'justifyCenter': {\n        command: 'Alignments',\n        subCommand: 'JustifyCenter'\n    },\n    'justifyFull': {\n        command: 'Alignments',\n        subCommand: 'JustifyFull'\n    },\n    'justifyLeft': {\n        command: 'Alignments',\n        subCommand: 'JustifyLeft'\n    },\n    'justifyRight': {\n        command: 'Alignments',\n        subCommand: 'JustifyRight'\n    },\n    'undo': {\n        command: 'Actions',\n        subCommand: 'Undo'\n    },\n    'redo': {\n        command: 'Actions',\n        subCommand: 'Redo'\n    },\n    'createLink': {\n        command: 'Links',\n        subCommand: 'Links'\n    },\n    'createImage': {\n        command: 'Images',\n        subCommand: 'Images'\n    },\n    'formatBlock': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'heading': {\n        command: 'Formats',\n        value: 'H1'\n    },\n    'indent': {\n        command: 'Indents',\n        subCommand: 'Indent'\n    },\n    'outdent': {\n        command: 'Indents',\n        subCommand: 'Outdent'\n    },\n    'insertHTML': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: ''\n    },\n    'insertText': {\n        command: 'InsertText',\n        subCommand: 'InsertText',\n        value: ''\n    },\n    'insertHorizontalRule': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<hr/>'\n    },\n    'insertImage': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<img/>'\n    },\n    'insertBrOnReturn': {\n        command: 'InsertHTML',\n        subCommand: 'InsertHTML',\n        value: '<br/>'\n    },\n    'insertOrderedList': {\n        command: 'Lists',\n        value: 'OL'\n    },\n    'insertUnorderedList': {\n        command: 'Lists',\n        value: 'UL'\n    },\n    'insertParagraph': {\n        command: 'Formats',\n        value: 'P'\n    },\n    'removeFormat': {\n        command: 'Clear',\n        subCommand: 'ClearFormat'\n    }\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\nimport { ToolbarType } from '../base/enum';\nimport { TableStyleItems } from '../models/items';\nexport var predefinedItems = ['Bold', 'Italic', 'Underline', '|', 'Formats', 'Alignments',\n    'OrderedList', 'UnorderedList', '|', 'CreateLink', 'Image', '|', 'SourceCode', 'Undo', 'Redo'];\nexport var fontFamily = [\n    { text: 'Segoe UI', value: 'Segoe UI', cssClass: 'e-segoe-ui' },\n    { text: 'Arial', value: 'Arial,Helvetica,sans-serif', cssClass: 'e-arial' },\n    { text: 'Georgia', value: 'Georgia,serif', cssClass: 'e-georgia' },\n    { text: 'Impact', value: 'Impact,Charcoal,sans-serif', cssClass: 'e-impact' },\n    { text: 'Tahoma', value: 'Tahoma,Geneva,sans-serif', cssClass: 'e-tahoma' },\n    { text: 'Times New Roman', value: 'Times New Roman,Times,serif', cssClass: 'e-times-new-roman' },\n    { text: 'Verdana', value: 'Verdana,Geneva,sans-serif', cssClass: 'e-verdana' }\n];\nexport var fontSize = [\n    { text: '8 pt', value: '8pt' },\n    { text: '10 pt', value: '10pt' },\n    { text: '12 pt', value: '12pt' },\n    { text: '14 pt', value: '14pt' },\n    { text: '18 pt', value: '18pt' },\n    { text: '24 pt', value: '24pt' },\n    { text: '36 pt', value: '36pt' }\n];\nexport var formatItems = [\n    { text: 'Paragraph', value: 'P', cssClass: 'e-paragraph' },\n    { text: 'Code', value: 'Pre', cssClass: 'e-code' },\n    { text: 'Quotation', value: 'BlockQuote', cssClass: 'e-quote' },\n    { text: 'Heading 1', value: 'H1', cssClass: 'e-h1' },\n    { text: 'Heading 2', value: 'H2', cssClass: 'e-h2' },\n    { text: 'Heading 3', value: 'H3', cssClass: 'e-h3' },\n    { text: 'Heading 4', value: 'H4', cssClass: 'e-h4' }\n];\nexport var fontColor = {\n    'Custom': [\n        '', '#000000', '#e7e6e6', '#44546a', '#4472c4', '#ed7d31', '#a5a5a5', '#ffc000', '#70ad47', '#ff0000',\n        '#f2f2f2', '#808080', '#cfcdcd', '#d5dce4', '#d9e2f3', '#fbe4d5', '#ededed', '#fff2cc', '#e2efd9', '#ffcccc',\n        '#d9d9d9', '#595959', '#aeaaaa', '#acb9ca', '#b4c6e7', '#f7caac', '#dbdbdb', '#ffe599', '#c5e0b3', '#ff8080',\n        '#bfbfbf', '#404040', '#747070', '#8496b0', '#8eaadb', '#f4b083', '#c9c9c9', '#ffd966', '#a8d08d', '#ff3333',\n        '#a6a6a6', '#262626', '#3b3838', '#323e4f', '#2f5496', '#c45911', '#7b7b7b', '#bf8f00', '#538135', '#b30000',\n        '#7f7f7f', '#0d0d0d', '#161616', '#212934', '#1f3763', '#823b0b', '#525252', '#7f5f00', '#375623', '#660000'\n    ]\n};\nexport var backgroundColor = {\n    'Custom': [\n        '', '#000000', '#ffff00', '#00ff00', '#00ffff', '#0000ff', '#ff0000', '#000080', '#800080', '#996633',\n        '#f2f2f2', '#808080', '#ffffcc', '#b3ffb3', '#ccffff', '#ccccff', '#ffcccc', '#ccccff', '#ff80ff', '#f2e6d9',\n        '#d9d9d9', '#595959', '#ffff80', '#80ff80', '#b3ffff', '#8080ff', '#ff8080', '#8080ff', '#ff00ff', '#dfbf9f',\n        '#bfbfbf', '#404040', '#ffff33', '#33ff33', '#33ffff', '#3333ff', '#ff3333', '#0000b3', '#b300b3', '#c68c53',\n        '#a6a6a6', '#262626', '#e6e600', '#00b300', '#009999', '#000099', '#b30000', '#000066', '#660066', '#86592d',\n        '#7f7f7f', '#0d0d0d', '#999900', '#006600', '#006666', '#000066', '#660000', '#00004d', '#4d004d', '#734d26',\n    ]\n};\n/**\n * Configures the toolbar settings of the RichTextEditor.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"enableFloating\", void 0);\n    __decorate([\n        Property(ToolbarType.Expand)\n    ], ToolbarSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(predefinedItems)\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Property({})\n    ], ToolbarSettings.prototype, \"itemConfigs\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * Configures the image settings of the RichTextEditor.\n */\nvar ImageSettings = /** @class */ (function (_super) {\n    __extends(ImageSettings, _super);\n    function ImageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(['.jpeg', '.jpg', '.png'])\n    ], ImageSettings.prototype, \"allowedTypes\", void 0);\n    __decorate([\n        Property('inline')\n    ], ImageSettings.prototype, \"display\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], ImageSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"path\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxWidth\", void 0);\n    __decorate([\n        Property(0)\n    ], ImageSettings.prototype, \"minHeight\", void 0);\n    __decorate([\n        Property(null)\n    ], ImageSettings.prototype, \"maxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageSettings.prototype, \"resizeByPercent\", void 0);\n    return ImageSettings;\n}(ChildProperty));\nexport { ImageSettings };\nvar TableSettings = /** @class */ (function (_super) {\n    __extends(TableSettings, _super);\n    function TableSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], TableSettings.prototype, \"width\", void 0);\n    __decorate([\n        Property(TableStyleItems)\n    ], TableSettings.prototype, \"styles\", void 0);\n    __decorate([\n        Property(true)\n    ], TableSettings.prototype, \"resize\", void 0);\n    __decorate([\n        Property(0)\n    ], TableSettings.prototype, \"minWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], TableSettings.prototype, \"maxWidth\", void 0);\n    return TableSettings;\n}(ChildProperty));\nexport { TableSettings };\n/**\n * Configures the quick toolbar settings of the RichTextEditor.\n */\nvar QuickToolbarSettings = /** @class */ (function (_super) {\n    __extends(QuickToolbarSettings, _super);\n    function QuickToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], QuickToolbarSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(false)\n    ], QuickToolbarSettings.prototype, \"showOnRightClick\", void 0);\n    __decorate([\n        Property('hide')\n    ], QuickToolbarSettings.prototype, \"actionOnScroll\", void 0);\n    __decorate([\n        Property(['Open', 'Edit', 'UnLink'])\n    ], QuickToolbarSettings.prototype, \"link\", void 0);\n    __decorate([\n        Property(['Replace', 'Align', 'Caption', 'Remove', '-', 'InsertLink', 'OpenImageLink', 'EditImageLink', 'RemoveImageLink', 'Display', 'AltText', 'Dimension'])\n    ], QuickToolbarSettings.prototype, \"image\", void 0);\n    __decorate([\n        Property(['Cut', 'Copy', 'Paste'])\n    ], QuickToolbarSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property(['TableHeader', 'TableRows', 'TableColumns', 'BackgroundColor', '-', 'TableRemove', 'Alignments', 'TableCellVerticalAlign', 'Styles'])\n    ], QuickToolbarSettings.prototype, \"table\", void 0);\n    return QuickToolbarSettings;\n}(ChildProperty));\nexport { QuickToolbarSettings };\n/**\n * Configures the Paste Cleanup settings of the RichTextEditor.\n */\nvar PasteCleanupSettings = /** @class */ (function (_super) {\n    __extends(PasteCleanupSettings, _super);\n    function PasteCleanupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], PasteCleanupSettings.prototype, \"prompt\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"deniedAttrs\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"allowedStyleProps\", void 0);\n    __decorate([\n        Property(null)\n    ], PasteCleanupSettings.prototype, \"deniedTags\", void 0);\n    __decorate([\n        Property(true)\n    ], PasteCleanupSettings.prototype, \"keepFormat\", void 0);\n    __decorate([\n        Property(false)\n    ], PasteCleanupSettings.prototype, \"plainText\", void 0);\n    return PasteCleanupSettings;\n}(ChildProperty));\nexport { PasteCleanupSettings };\n/**\n * Configures the font family settings of the RichTextEditor.\n */\nvar FontFamily = /** @class */ (function (_super) {\n    __extends(FontFamily, _super);\n    function FontFamily() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FontFamily.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], FontFamily.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontFamily)\n    ], FontFamily.prototype, \"items\", void 0);\n    return FontFamily;\n}(ChildProperty));\nexport { FontFamily };\n/**\n * Configures the font size settings of the RichTextEditor.\n */\nvar FontSize = /** @class */ (function (_super) {\n    __extends(FontSize, _super);\n    function FontSize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FontSize.prototype, \"default\", void 0);\n    __decorate([\n        Property('35px')\n    ], FontSize.prototype, \"width\", void 0);\n    __decorate([\n        Property(fontSize)\n    ], FontSize.prototype, \"items\", void 0);\n    return FontSize;\n}(ChildProperty));\nexport { FontSize };\n/**\n * Configures the format settings of the RichTextEditor.\n */\nvar Format = /** @class */ (function (_super) {\n    __extends(Format, _super);\n    function Format() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], Format.prototype, \"default\", void 0);\n    __decorate([\n        Property('65px')\n    ], Format.prototype, \"width\", void 0);\n    __decorate([\n        Property(formatItems)\n    ], Format.prototype, \"types\", void 0);\n    return Format;\n}(ChildProperty));\nexport { Format };\n/**\n * Configures the font Color settings of the RichTextEditor.\n */\nvar FontColor = /** @class */ (function (_super) {\n    __extends(FontColor, _super);\n    function FontColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ff0000')\n    ], FontColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], FontColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], FontColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(fontColor)\n    ], FontColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], FontColor.prototype, \"modeSwitcher\", void 0);\n    return FontColor;\n}(ChildProperty));\nexport { FontColor };\n/**\n * Configures the background Color settings of the RichTextEditor.\n */\nvar BackgroundColor = /** @class */ (function (_super) {\n    __extends(BackgroundColor, _super);\n    function BackgroundColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('#ffff00')\n    ], BackgroundColor.prototype, \"default\", void 0);\n    __decorate([\n        Property('Palette')\n    ], BackgroundColor.prototype, \"mode\", void 0);\n    __decorate([\n        Property(10)\n    ], BackgroundColor.prototype, \"columns\", void 0);\n    __decorate([\n        Property(backgroundColor)\n    ], BackgroundColor.prototype, \"colorCode\", void 0);\n    __decorate([\n        Property(false)\n    ], BackgroundColor.prototype, \"modeSwitcher\", void 0);\n    return BackgroundColor;\n}(ChildProperty));\nexport { BackgroundColor };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\n/**\n * Objects used for configuring the iframe resources properties.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"styles\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"scripts\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n/**\n * Configures the iframe settings of the RTE.\n */\nvar IFrameSettings = /** @class */ (function (_super) {\n    __extends(IFrameSettings, _super);\n    function IFrameSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], IFrameSettings.prototype, \"enable\", void 0);\n    __decorate([\n        Property(null)\n    ], IFrameSettings.prototype, \"attributes\", void 0);\n    __decorate([\n        Complex({}, Resources)\n    ], IFrameSettings.prototype, \"resources\", void 0);\n    return IFrameSettings;\n}(ChildProperty));\nexport { IFrameSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the inlineMode property of the RTE.\n */\nvar InlineMode = /** @class */ (function (_super) {\n    __extends(InlineMode, _super);\n    function InlineMode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], InlineMode.prototype, \"enable\", void 0);\n    __decorate([\n        Property(true)\n    ], InlineMode.prototype, \"onSelection\", void 0);\n    return InlineMode;\n}(ChildProperty));\nexport { InlineMode };\n","import { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\n/**\n * `FullScreen` module is used to maximize and minimize screen\n */\nvar FullScreen = /** @class */ (function () {\n    function FullScreen(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FullScreen.prototype.showFullScreen = function (event) {\n        this.scrollableParent = getScrollableParent(this.parent.element);\n        if (!this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.parent.trigger(events.actionBegin, { requestType: 'Maximize', targetItem: 'Maximize', args: event });\n            if (this.parent.toolbarSettings.enableFloating &&\n                !this.parent.inlineMode.enable && this.parent.toolbarSettings.enable) {\n                this.parent.getToolbarElement().style.width = '100%';\n                this.parent.getToolbarElement().style.top = '0px';\n            }\n            this.parent.element.classList.add(classes.CLS_FULL_SCREEN);\n            this.toggleParentOverflow(true);\n            this.parent.setContentHeight();\n            if (this.parent.toolbarModule) {\n                if (!this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                    this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                }\n                if (Browser.isDevice) {\n                    this.parent.toolbarModule.removeFixedTBarClass();\n                }\n                this.parent.toolbarModule.updateItem({\n                    targetItem: 'Maximize',\n                    updateItem: 'Minimize',\n                    baseToolbar: this.parent.getBaseToolbarObject()\n                });\n            }\n            this.parent.trigger(events.actionComplete, { requestType: 'Maximize', targetItem: 'Maximize', args: event });\n        }\n    };\n    FullScreen.prototype.hideFullScreen = function (event) {\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.parent.element.classList.remove(classes.CLS_FULL_SCREEN);\n            var elem = document.querySelectorAll('.e-rte-overflow');\n            for (var i = 0; i < elem.length; i++) {\n                removeClass([elem[i]], ['e-rte-overflow']);\n            }\n            this.parent.trigger(events.actionBegin, { requestType: 'Minimize', targetItem: 'Minimize', args: event });\n            this.parent.setContentHeight();\n            if (this.parent.toolbarModule) {\n                if (!this.parent.getBaseToolbarObject().toolbarObj.items[0].properties) {\n                    this.parent.getBaseToolbarObject().toolbarObj.removeItems(0);\n                }\n                this.parent.toolbarModule.updateItem({\n                    targetItem: 'Minimize',\n                    updateItem: 'Maximize',\n                    baseToolbar: this.parent.getBaseToolbarObject()\n                });\n                if (Browser.isDevice && this.parent.inlineMode.enable) {\n                    this.parent.toolbarModule.addFixedTBarClass();\n                }\n            }\n            this.parent.trigger(events.actionComplete, { requestType: 'Minimize', targetItem: 'Minimize', args: event });\n        }\n    };\n    FullScreen.prototype.toggleParentOverflow = function (isAdd) {\n        if (isNullOrUndefined(this.scrollableParent)) {\n            return;\n        }\n        for (var i = 0; i < this.scrollableParent.length; i++) {\n            if (this.scrollableParent[i].nodeName === '#document') {\n                var elem = document.querySelector('body');\n                addClass([elem], ['e-rte-overflow']);\n            }\n            else {\n                var elem = this.scrollableParent[i];\n                addClass([elem], ['e-rte-overflow']);\n            }\n        }\n    };\n    FullScreen.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        switch (originalEvent.action) {\n            case 'full-screen':\n                this.showFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n            case 'escape':\n                this.hideFullScreen(event.args);\n                originalEvent.preventDefault();\n                break;\n        }\n    };\n    FullScreen.prototype.addEventListener = function () {\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    FullScreen.prototype.removeEventListener = function () {\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    FullScreen.prototype.destroy = function () {\n        if (this.parent.element.classList.contains(classes.CLS_FULL_SCREEN)) {\n            this.toggleParentOverflow(false);\n        }\n        this.removeEventListener();\n    };\n    return FullScreen;\n}());\nexport { FullScreen };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Complex, Browser, addClass, select, detach } from '@syncfusion/ej2-base';\nimport { Property, NotifyPropertyChanges, formatUnit, L10n, closest } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, Event, removeClass, print as printWindow, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, compile, append, extend, debounce } from '@syncfusion/ej2-base';\nimport { Touch as EJ2Touch } from '@syncfusion/ej2-base';\nimport { getScrollableParent } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Render } from '../renderer/render';\nimport { ViewSource } from '../renderer/view-source';\nimport { executeGroup } from './interface';\nimport { ServiceLocator } from '../services/service-locator';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { RenderType, ToolbarType } from './enum';\nimport { ExecCommandCallBack } from '../actions/execute-command-callback';\nimport { KeyboardEvents } from '../actions/keyboard';\nimport { ToolbarSettings, ImageSettings, QuickToolbarSettings, FontFamily, FontSize, Format } from '../models/toolbar-settings';\nimport { TableSettings, PasteCleanupSettings } from '../models/toolbar-settings';\nimport { FontColor, BackgroundColor } from '../models/toolbar-settings';\nimport { IFrameSettings } from '../models/iframe-settings';\nimport { InlineMode } from '../models/inline-mode';\nimport { defaultLocale } from '../models/default-locale';\nimport { setAttributes } from '../actions/html-attributes';\nimport { FullScreen } from '../actions/full-screen';\nimport * as CONSTANT from '../../common/constant';\nimport { dispatchEvent, getEditValue, isIDevice, decode } from '../base/util';\n/**\n * Represents the RichTextEditor component.\n * ```html\n * <textarea id=\"rte\"></textarea>\n * <script>\n *  var rteObj = new RichTextEditor();\n *  rteObj.appendTo(\"#rte\");\n * </script>\n * ```\n */\nvar RichTextEditor = /** @class */ (function (_super) {\n    __extends(RichTextEditor, _super);\n    function RichTextEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * @hidden\n         */\n        _this.isFocusOut = false;\n        /**\n         * @hidden\n         */\n        _this.isRTE = false;\n        /**\n         * @hidden\n         */\n        _this.isBlur = true;\n        _this.needsID = true;\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    RichTextEditor.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.toolbarSettings.enable) {\n            modules.push({ member: 'toolbar', args: [this, this.serviceLocator] });\n            modules.push({\n                member: 'link',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'table',\n                args: [this, this.serviceLocator]\n            });\n            modules.push({\n                member: 'image',\n                args: [this, this.serviceLocator]\n            });\n            if (this.quickToolbarSettings.enable) {\n                modules.push({ member: 'quickToolbar', args: [this, this.serviceLocator] });\n            }\n        }\n        if (this.showCharCount) {\n            modules.push({ member: 'count', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'Markdown') {\n            modules.push({ member: 'markdownEditor', args: [this, this.serviceLocator] });\n        }\n        if (this.editorMode === 'HTML') {\n            modules.push({ member: 'htmlEditor', args: [this, this.serviceLocator] });\n            modules.push({ member: 'pasteCleanup', args: [this, this.serviceLocator] });\n        }\n        return modules;\n    };\n    RichTextEditor.prototype.updateEnable = function () {\n        if (this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n            this.element.tabIndex = 0;\n            this.element.setAttribute('aria-disabled', 'false');\n            this.inputElement.setAttribute('tabindex', '0');\n        }\n        else {\n            if (this.getToolbar()) {\n                removeClass(this.getToolbar().querySelectorAll('.' + classes.CLS_ACTIVE), classes.CLS_ACTIVE);\n                removeClass([this.getToolbar()], [classes.CLS_TB_FLOAT, classes.CLS_TB_ABS_FLOAT]);\n            }\n            addClass([this.element], classes.CLS_DISABLED);\n            this.element.tabIndex = -1;\n            this.element.setAttribute('aria-disabled', 'true');\n            this.inputElement.setAttribute('tabindex', '-1');\n        }\n    };\n    RichTextEditor.prototype.setEnable = function () {\n        this.updateEnable();\n        (this.enabled) ? this.eventInitializer() : this.unWireEvents();\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    RichTextEditor.prototype.preRender = function () {\n        this.onBlurHandler = this.blurHandler.bind(this);\n        this.onFocusHandler = this.focusHandler.bind(this);\n        this.onResizeHandler = this.resizeHandler.bind(this);\n        this.clickPoints = { clientX: 0, clientY: 0 };\n        this.initialValue = this.value;\n        this.serviceLocator = new ServiceLocator;\n        this.initializeServices();\n        this.setContainer();\n        setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        attributes(this.element, { role: 'application' });\n    };\n    RichTextEditor.prototype.setContainer = function () {\n        this.originalElement = this.element.cloneNode(true);\n        if (this.value === null || this.valueTemplate !== null) {\n            this.setValue();\n        }\n        this.element.innerHTML = '';\n        var invalidAttr = ['class', 'style', 'id', 'ejs-for'];\n        var htmlAttr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(/^data-val/.test(this.element.attributes[a].name))) { // data-val for asp.net core data annotation validation.\n                htmlAttr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(htmlAttr, this.htmlAttributes, htmlAttr);\n        this.setProperties({ htmlAttributes: htmlAttr }, true);\n        if (!isNOU(this.htmlAttributes.id)) {\n            this.element.id = this.htmlAttributes.id;\n        }\n        if (this.element.tagName === 'TEXTAREA') {\n            var rteOuterWrapper = this.createElement('div', {\n                className: this.element.getAttribute('class')\n            });\n            this.element.innerHTML = '';\n            this.element.parentElement.insertBefore(rteOuterWrapper, this.element);\n            this.valueContainer = this.element;\n            removeClass([this.valueContainer], this.element.getAttribute('class').split(' '));\n            this.element = rteOuterWrapper;\n        }\n        else {\n            this.valueContainer = this.createElement('textarea', {\n                id: this.getID() + '-value'\n            });\n        }\n        this.valueContainer.name = this.getID();\n        addClass([this.valueContainer], classes.CLS_RTE_HIDDEN);\n        this.element.appendChild(this.valueContainer);\n    };\n    RichTextEditor.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    /**\n     * Focuses the RichTextEditor component\n     * @public\n     */\n    RichTextEditor.prototype.focusIn = function () {\n        if (this.enabled) {\n            this.inputElement.focus();\n            this.focusHandler({});\n        }\n    };\n    /**\n     * Blurs the RichTextEditor component\n     * @public\n     */\n    RichTextEditor.prototype.focusOut = function () {\n        if (this.enabled) {\n            this.inputElement.blur();\n            this.blurHandler({});\n        }\n    };\n    /**\n     * Selects all the content in RichTextEditor\n     * @public\n     */\n    RichTextEditor.prototype.selectAll = function () {\n        this.notify(events.selectAll, {});\n    };\n    /**\n     * Selects a content range or an element\n     * @param {Range} range - Specify the range which you want to select within the content.\n     * The method used to select a particular sentence or word or entire document.\n     * @public\n     */\n    RichTextEditor.prototype.selectRange = function (range) {\n        this.notify(events.selectRange, { range: range });\n    };\n    /**\n     * Retrieves the HTML markup content from currently selected content of RichTextEditor.\n     * @public\n     */\n    RichTextEditor.prototype.getSelection = function () {\n        var str = '';\n        this.notify(events.getSelectedHtml, {\n            callBack: function (txt) {\n                str = txt;\n            }\n        });\n        return str;\n    };\n    /**\n     * Executes the commands\n     * @param {CommandName} CommandName - Specifies the name of the command to be executed.\n     * @param {string | HTMLElement} value - Specifies the value that you want to execute.\n     * @public\n     */\n    RichTextEditor.prototype.executeCommand = function (commandName, value) {\n        var tool = executeGroup[commandName];\n        this.formatter.editorManager.execCommand(tool.command, tool.subCommand ? tool.subCommand : (value ? value : tool.value), null, null, (value ? value : tool.value), (value ? value : tool.value));\n    };\n    RichTextEditor.prototype.encode = function (value) {\n        var divNode = this.createElement('div');\n        divNode.innerText = value.trim();\n        return divNode.innerHTML.replace(/<br\\s*[\\/]?>/gi, '\\n');\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    RichTextEditor.prototype.render = function () {\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.sourceCodeModule = new ViewSource(this, this.serviceLocator);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        this.RTERender();\n        var execCommandCallBack = new ExecCommandCallBack(this);\n        this.notify(events.initialEnd, {});\n        if (this.toolbarSettings.enable && this.toolbarSettings.type === 'Expand' && !isNOU(this.getToolbar()) &&\n            (this.toolbarSettings.items.indexOf('Undo') > -1 && this.toolbarSettings.items.indexOf('Redo') > -1)) {\n            this.disableToolbarItem(['Undo', 'Redo']);\n        }\n        this.setContentHeight();\n        if (this.value !== null) {\n            this.valueContainer.defaultValue = this.value;\n        }\n        (!this.enabled) ? this.unWireEvents() : this.eventInitializer();\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    RichTextEditor.prototype.eventInitializer = function () {\n        this.wireEvents();\n    };\n    /**\n     * For internal use only - keydown the event handler;\n     * @private\n     */\n    RichTextEditor.prototype.keyDown = function (e) {\n        this.notify(events.keyDown, { member: 'keydown', args: e });\n        if (this.formatter.getUndoRedoStack().length === 0) {\n            this.formatter.saveData();\n        }\n        if (e.action && e.action !== 'paste' || e.which === 9) {\n            this.formatter.process(this, null, e);\n            switch (e.action) {\n                case 'toolbar-focus':\n                    if (this.toolbarSettings.enable) {\n                        var selector = '.e-toolbar-item[aria-disabled=\"false\"][title] [tabindex]';\n                        this.toolbarModule.baseToolbar.toolbarObj.element.querySelector(selector).focus();\n                    }\n                    break;\n                case 'escape':\n                    this.contentModule.getEditPanel().focus();\n                    break;\n            }\n        }\n        if (!isNOU(this.placeholder)) {\n            this.setPlaceHolder();\n        }\n        this.autoResize();\n    };\n    RichTextEditor.prototype.keyUp = function (e) {\n        this.notify(events.keyUp, { member: 'keyup', args: e });\n        var allowedKeys = e.which === 32 || e.which === 13 || e.which === 8 || e.which === 46;\n        if (((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys) || (this.editorMode === 'Markdown'\n            && ((e.key !== 'shift' && !e.ctrlKey) && e.key && e.key.length === 1 || allowedKeys)) && !this.inlineMode.enable) {\n            this.formatter.onKeyHandler(this, e);\n        }\n        if (this.inputElement && this.inputElement.textContent.length !== 0) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        if (!isNOU(this.placeholder)) {\n            this.setPlaceHolder();\n        }\n    };\n    RichTextEditor.prototype.updateValue = function (value) {\n        if (isNOU(value)) {\n            this.setProperties({ value: this.inputElement.innerHTML });\n        }\n        else {\n            this.setProperties({ value: value });\n        }\n    };\n    RichTextEditor.prototype.triggerEditArea = function (e) {\n        if (!isIDevice()) {\n            this.notify(events.editAreaClick, { member: 'editAreaClick', args: e });\n        }\n        else {\n            var touch = (e.touches ? e.changedTouches[0] : e);\n            if (this.clickPoints.clientX === touch.clientX && this.clickPoints.clientY === touch.clientY) {\n                this.notify(events.editAreaClick, { member: 'editAreaClick', args: e });\n            }\n        }\n    };\n    RichTextEditor.prototype.notifyMouseUp = function (e) {\n        this.notify(events.mouseUp, { member: 'mouseUp', args: e });\n        if (this.inputElement && ((this.editorMode === 'HTML' && this.inputElement.textContent.length !== 0) ||\n            (this.editorMode === 'Markdown' && this.inputElement.value.length !== 0))) {\n            this.notify(events.toolbarRefresh, { args: e });\n        }\n        this.triggerEditArea(e);\n    };\n    RichTextEditor.prototype.mouseUp = function (e) {\n        if (this.quickToolbarSettings.showOnRightClick && Browser.isDevice) {\n            var target = e.target;\n            var closestTable = closest(target, 'table');\n            if (target && target.nodeName === 'A' || target.nodeName === 'IMG' || (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.contentModule.getEditPanel().contains(closestTable)))) {\n                return;\n            }\n        }\n        this.notifyMouseUp(e);\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    RichTextEditor.prototype.onCopy = function () {\n        this.contentModule.getDocument().execCommand('copy', false, null);\n    };\n    RichTextEditor.prototype.onCut = function () {\n        this.contentModule.getDocument().execCommand('cut', false, null);\n    };\n    RichTextEditor.prototype.onPaste = function (e) {\n        var _this = this;\n        var evenArgs = {\n            originalEvent: e,\n            cancel: false,\n            requestType: 'Paste'\n        };\n        this.trigger(events.actionBegin, evenArgs);\n        if (!evenArgs.cancel) {\n            if (!isNOU(this.pasteCleanupModule)) {\n                this.notify(events.pasteClean, { args: e });\n            }\n            else {\n                var args_1 = { requestType: 'Paste', editorMode: this.editorMode, event: e };\n                var value = null;\n                if (e && !isNOU(e.clipboardData)) {\n                    value = e.clipboardData.getData('text/plain');\n                }\n                var file = e && e.clipboardData && e.clipboardData.items.length > 0 ?\n                    e.clipboardData.items[0].getAsFile() : null;\n                if (value !== null) {\n                    this.notify(events.paste, {\n                        file: file,\n                        args: e,\n                        text: value\n                    });\n                }\n                setTimeout(function () { _this.formatter.onSuccess(_this, args_1); }, 0);\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.clipboardAction = function (action, event) {\n        switch (action.toLowerCase()) {\n            case 'cut':\n                this.onCut();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Cut',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'copy':\n                this.onCopy();\n                this.formatter.onSuccess(this, {\n                    requestType: 'Copy',\n                    editorMode: this.editorMode,\n                    event: event\n                });\n                break;\n            case 'paste':\n                this.onPaste(event);\n                break;\n        }\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    RichTextEditor.prototype.destroy = function () {\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (!isNOU(this.timeInterval)) {\n            clearInterval(this.timeInterval);\n            this.timeInterval = null;\n        }\n        this.unWireEvents();\n        if (this.originalElement.tagName === 'TEXTAREA') {\n            this.element.parentElement.insertBefore(this.valueContainer, this.element);\n            this.valueContainer.id = this.getID();\n            this.valueContainer.removeAttribute('name');\n            detach(this.element);\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.valueContainer.value = this.originalElement.innerHTML.trim();\n                this.setProperties({ value: (!isNOU(this.initialValue) ? this.initialValue : null) }, true);\n            }\n            else {\n                this.valueContainer.value = '';\n            }\n            this.element = this.valueContainer;\n        }\n        else {\n            if (this.originalElement.innerHTML.trim() !== '') {\n                this.element.innerHTML = this.originalElement.innerHTML.trim();\n                this.setProperties({ value: (!isNOU(this.initialValue) ? this.initialValue : null) }, true);\n            }\n            else {\n                this.element.innerHTML = '';\n            }\n        }\n        if (this.placeholder && this.placeHolderWrapper) {\n            this.placeHolderWrapper = null;\n        }\n        if (!isNOU(this.cssClass)) {\n            removeClass([this.element], this.cssClass);\n        }\n        this.removeHtmlAttributes();\n        this.removeAttributes();\n        _super.prototype.destroy.call(this);\n    };\n    RichTextEditor.prototype.removeHtmlAttributes = function () {\n        if (this.htmlAttributes) {\n            var keys = Object.keys(this.htmlAttributes);\n            for (var i = 0; i < keys.length && this.element.hasAttribute(keys[i]); i++) {\n                this.element.removeAttribute(keys[i]);\n            }\n        }\n    };\n    RichTextEditor.prototype.removeAttributes = function () {\n        if (!this.enabled) {\n            removeClass([this.element], classes.CLS_DISABLED);\n        }\n        if (this.enableRtl) {\n            removeClass([this.element], classes.CLS_RTL);\n        }\n        if (this.readonly) {\n            removeClass([this.element], classes.CLS_RTE_READONLY);\n        }\n        if (this.element.style.width !== '' && this.originalElement.style.width === '') {\n            this.element.style.removeProperty('width');\n        }\n        if (this.element.style.height !== '' && this.originalElement.style.height === '') {\n            this.element.style.removeProperty('height');\n        }\n        this.element.removeAttribute('aria-disabled');\n        this.element.removeAttribute('role');\n        this.element.removeAttribute('tabindex');\n    };\n    RichTextEditor.prototype.destroyDependentModules = function () {\n        /* destroy dependent modules */\n        this.renderModule.destroy();\n        this.formatter.editorManager.undoRedoManager.destroy();\n        this.sourceCodeModule.destroy();\n    };\n    /**\n     * Returns the HTML or Text inside the RichTextEditor.\n     * @return {Element}\n     */\n    RichTextEditor.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Returns the text content as string.\n     * @return {string}\n     */\n    RichTextEditor.prototype.getText = function () {\n        return this.contentModule.getText();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RichTextEditor.prototype.getModuleName = function () {\n        return 'richtexteditor';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    RichTextEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'value':\n                    var nVal = newProp[prop];\n                    var val = this.editorMode === 'HTML' ? getEditValue(nVal, this) : nVal;\n                    if (!isNOU(nVal) && nVal !== '') {\n                        this.value = (this.enableHtmlEncode) ? this.encode(decode(val)) : val;\n                    }\n                    this.updatePanelValue();\n                    this.setPlaceHolder();\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'valueTemplate':\n                    this.setValue();\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'width':\n                    this.setWidth(newProp[prop]);\n                    if (this.toolbarSettings.enable) {\n                        this.toolbarModule.refreshToolbarOverflow();\n                        this.resizeHandler();\n                    }\n                    break;\n                case 'height':\n                    this.setHeight(newProp[prop]);\n                    this.setContentHeight();\n                    this.autoResize();\n                    break;\n                case 'readonly':\n                    this.setReadOnly(false);\n                    break;\n                case 'cssClass':\n                    this.element.classList.remove(oldProp[prop]);\n                    this.setCssClass(newProp[prop]);\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'placeholder':\n                    this.placeholder = newProp[prop];\n                    this.setPlaceHolder();\n                    break;\n                case 'htmlAttributes':\n                    setAttributes(this.htmlAttributes, this, false, false);\n                    break;\n                case 'iframeSettings':\n                    var frameSetting = oldProp[prop];\n                    if (frameSetting.resources) {\n                        var iframe = this.contentModule.getDocument();\n                        var header = iframe.querySelector('head');\n                        var files = void 0;\n                        if (frameSetting.resources.scripts) {\n                            files = header.querySelectorAll('.' + classes.CLS_SCRIPT_SHEET);\n                            this.removeSheets(files);\n                        }\n                        if (frameSetting.resources.styles) {\n                            files = header.querySelectorAll('.' + classes.CLS_STYLE_SHEET);\n                            this.removeSheets(files);\n                        }\n                    }\n                    this.setIframeSettings();\n                    break;\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'inlineMode':\n                    this.notify(events.modelChanged, { module: 'quickToolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'toolbarSettings':\n                    this.notify(events.modelChanged, { module: 'toolbar', newProp: newProp, oldProp: oldProp });\n                    this.setContentHeight();\n                    break;\n                case 'maxLength':\n                    if (this.showCharCount) {\n                        this.countModule.refresh();\n                    }\n                    break;\n                case 'showCharCount':\n                    if (newProp[prop] && this.countModule) {\n                        this.countModule.renderCount();\n                    }\n                    else if (newProp[prop] === false && this.countModule) {\n                        this.countModule.destroy();\n                    }\n                    break;\n                case 'enableHtmlEncode':\n                    this.updateValueData();\n                    break;\n                case 'undoRedoSteps':\n                case 'undoRedoTimer':\n                    this.formatter.editorManager.observer.notify(CONSTANT.MODEL_CHANGED, { newProp: newProp, oldProp: oldProp });\n                    break;\n                case 'quickToolbarSettings':\n                    newProp.quickToolbarSettings.showOnRightClick ? this.wireContextEvent() : this.unWireContextEvent();\n                    this.notify(events.modelChanged, { newProp: newProp, oldProp: oldProp });\n                    break;\n                default:\n                    this.notify(events.modelChanged, { newProp: newProp, oldProp: oldProp });\n                    break;\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.updateValueData = function () {\n        if (this.enableHtmlEncode) {\n            this.setProperties({ value: this.encode(decode(this.inputElement.innerHTML)) });\n        }\n        else {\n            this.setProperties({\n                value: /<[a-z][\\s\\S]*>/i.test(this.inputElement.innerHTML) ? this.inputElement.innerHTML :\n                    decode(this.inputElement.innerHTML)\n            });\n        }\n    };\n    RichTextEditor.prototype.removeSheets = function (srcList) {\n        var i;\n        for (i = 0; i < srcList.length; i++) {\n            detach(srcList[i]);\n        }\n    };\n    RichTextEditor.prototype.updatePanelValue = function () {\n        var value;\n        if (this.editorMode === 'HTML' && this.value) {\n            value = this.value.replace(/>\\s+</g, '><');\n        }\n        else {\n            value = this.value;\n        }\n        value = (this.enableHtmlEncode && this.value) ? decode(value) : value;\n        if (value) {\n            if (this.valueContainer) {\n                this.valueContainer.value = (this.enableHtmlEncode) ? this.value : value;\n            }\n            if (this.editorMode === 'HTML' && this.inputElement && this.inputElement.innerHTML.trim() !== value.trim()) {\n                this.inputElement.innerHTML = value;\n            }\n            else if (this.editorMode === 'Markdown' && this.inputElement\n                && this.inputElement.value.trim() !== value.trim()) {\n                this.inputElement.value = value;\n            }\n        }\n        else {\n            if (this.editorMode === 'HTML') {\n                this.inputElement.innerHTML = '<p><br/></p>';\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            if (this.valueContainer) {\n                this.valueContainer.value = '';\n            }\n        }\n        if (this.showCharCount) {\n            this.countModule.refresh();\n        }\n    };\n    RichTextEditor.prototype.setHeight = function (height) {\n        if (height !== 'auto') {\n            this.element.style.height = formatUnit(height);\n        }\n        else {\n            this.element.style.height = 'auto';\n        }\n    };\n    RichTextEditor.prototype.setPlaceHolder = function () {\n        if (this.inputElement && this.placeholder && this.iframeSettings.enable !== true) {\n            if (this.editorMode !== 'Markdown') {\n                if (!this.placeHolderWrapper) {\n                    this.placeHolderWrapper = this.createElement('span', { className: 'rte-placeholder' });\n                    if (this.inputElement) {\n                        this.inputElement.parentElement.insertBefore(this.placeHolderWrapper, this.inputElement);\n                    }\n                    attributes(this.placeHolderWrapper, {\n                        'style': 'font-size: 16px; padding: 16px; margin-left: 0px; margin-right: 0px;'\n                    });\n                }\n                this.placeHolderWrapper.innerHTML = this.placeholder;\n                if (this.inputElement.textContent.length !== 0) {\n                    this.placeHolderWrapper.style.display = 'none';\n                }\n                else {\n                    this.placeHolderWrapper.style.display = 'block';\n                }\n            }\n            else {\n                this.inputElement.setAttribute('placeholder', this.placeholder);\n            }\n        }\n    };\n    RichTextEditor.prototype.setWidth = function (width) {\n        if (width !== 'auto') {\n            setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n        }\n        else {\n            this.element.style.width = 'auto';\n        }\n    };\n    RichTextEditor.prototype.setCssClass = function (cssClass) {\n        if (!isNOU(cssClass)) {\n            this.element.classList.add(cssClass);\n        }\n    };\n    RichTextEditor.prototype.updateRTL = function () {\n        this.notify(events.rtlMode, { enableRtl: this.enableRtl });\n        if (this.enableRtl) {\n            this.element.classList.add(classes.CLS_RTL);\n        }\n        else {\n            this.element.classList.remove(classes.CLS_RTL);\n        }\n    };\n    RichTextEditor.prototype.updateReadOnly = function () {\n        this.notify(events.readOnlyMode, { editPanel: this.inputElement, mode: this.readonly });\n    };\n    RichTextEditor.prototype.setReadOnly = function (initial) {\n        this.updateReadOnly();\n        if (!initial) {\n            if (this.readonly && this.enabled) {\n                this.unbindEvents();\n            }\n            else if (this.enabled) {\n                this.bindEvents();\n            }\n        }\n    };\n    /**\n     * By default, prints all the pages of the RichTextEditor.\n     * @return {void}\n     */\n    RichTextEditor.prototype.print = function () {\n        var printWind;\n        var printArgs = {\n            element: this.inputElement,\n            requestType: 'print',\n            cancel: false\n        };\n        this.trigger(events.actionBegin, printArgs);\n        printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth);\n        if (Browser.info.name === 'msie') {\n            printWind.resizeTo(screen.availWidth, screen.availHeight);\n        }\n        printWind = printWindow(this.inputElement, printWind);\n        if (printArgs.cancel) {\n            return;\n        }\n        var actionArgs = {\n            requestType: 'print'\n        };\n        this.trigger(events.actionComplete, actionArgs);\n    };\n    /**\n     * Applies all the pending property changes and render the component again.\n     * @public\n     */\n    RichTextEditor.prototype.refresh = function () {\n        this.renderModule.refresh();\n    };\n    /**\n     * Shows the RichTextEditor component in full-screen mode.\n     */\n    RichTextEditor.prototype.showFullScreen = function () {\n        if (this.readonly) {\n            return;\n        }\n        this.fullScreenModule.showFullScreen();\n    };\n    /**\n     * Enables the give toolbar items in the RichTextEditor component.\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * that you want to be enable in Rich Text Editors Toolbar.\n     * @public\n     */\n    RichTextEditor.prototype.enableToolbarItem = function (items) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, true);\n    };\n    /**\n     * Disables the given toolbar items in the RichTextEditor component.\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * that you want to be disable in Rich Text Editors Toolbar.\n     * @public\n     */\n    RichTextEditor.prototype.disableToolbarItem = function (items) {\n        this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(), items, false);\n    };\n    /**\n     * Removes the give toolbar items from the RichTextEditor component.\n     * @param {string | string[]} items - Specifies the single or collection of items\n     * that you want to be remove from Rich Text Editors Toolbar.\n     * @public\n     */\n    RichTextEditor.prototype.removeToolbarItem = function (items) {\n        this.toolbarModule.removeTBarItems(items);\n    };\n    /**\n     * Get the selected range from the RichTextEditor's content.\n     * @public\n     */\n    RichTextEditor.prototype.getRange = function () {\n        return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n    };\n    RichTextEditor.prototype.initializeServices = function () {\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('rteLocale', this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale));\n    };\n    RichTextEditor.prototype.RTERender = function () {\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.fullScreenModule = new FullScreen(this);\n        this.renderModule.render();\n        this.inputElement = this.contentModule.getEditPanel();\n        this.setHeight(this.height);\n        setAttributes(this.htmlAttributes, this, false, true);\n        if (this.iframeSettings) {\n            this.setIframeSettings();\n        }\n        this.setCssClass(this.cssClass);\n        this.updateEnable();\n        this.setPlaceHolder();\n        this.updateRTL();\n        this.updateReadOnly();\n        this.updatePanelValue();\n        if (this.enableHtmlEncode && !isNOU(this.value)) {\n            this.setProperties({ value: this.encode(decode(this.value)) });\n        }\n    };\n    RichTextEditor.prototype.setIframeSettings = function () {\n        if (this.iframeSettings.resources) {\n            var styleSrc = this.iframeSettings.resources.styles;\n            var scriptSrc = this.iframeSettings.resources.scripts;\n            if (this.iframeSettings.resources.scripts.length > 0) {\n                this.InjectSheet(true, scriptSrc);\n            }\n            if (this.iframeSettings.resources.styles.length > 0) {\n                this.InjectSheet(false, styleSrc);\n            }\n        }\n        if (this.iframeSettings.attributes) {\n            setAttributes(this.iframeSettings.attributes, this, true, false);\n        }\n    };\n    RichTextEditor.prototype.InjectSheet = function (scriptSheet, srcList) {\n        try {\n            if (srcList && srcList.length > 0) {\n                var iFrame = this.contentModule.getDocument();\n                var target = iFrame.querySelector('head');\n                for (var i = 0; i < srcList.length; i++) {\n                    if (scriptSheet) {\n                        var scriptEle = this.createScriptElement();\n                        scriptEle.src = srcList[i];\n                        target.appendChild(scriptEle);\n                    }\n                    else {\n                        var styleEle = this.createStyleElement();\n                        styleEle.href = srcList[i];\n                        target.appendChild(styleEle);\n                    }\n                }\n            }\n        }\n        catch (e) {\n            return;\n        }\n    };\n    RichTextEditor.prototype.createScriptElement = function () {\n        var scriptEle = this.createElement('script', {\n            className: classes.CLS_SCRIPT_SHEET\n        });\n        scriptEle.type = 'text/javascript';\n        return scriptEle;\n    };\n    RichTextEditor.prototype.createStyleElement = function () {\n        var styleEle = this.createElement('link', {\n            className: classes.CLS_STYLE_SHEET\n        });\n        styleEle.rel = 'stylesheet';\n        return styleEle;\n    };\n    RichTextEditor.prototype.setValue = function () {\n        if (this.valueTemplate) {\n            if (typeof this.valueTemplate === 'string') {\n                this.setProperties({ value: this.valueTemplate });\n            }\n            else {\n                var compiledString = void 0;\n                compiledString = compile(this.valueTemplate);\n                var compiledTemplate = compiledString({});\n                for (var i = 0; i < compiledTemplate.length; i++) {\n                    var item = compiledTemplate[i];\n                    append([item], this.element);\n                }\n                this.setProperties({ value: this.element.innerHTML.trim() });\n            }\n        }\n        else if (this.element.innerHTML.trim() !== '') {\n            if (this.element.tagName === 'TEXTAREA') {\n                this.setProperties({ value: decode(this.element.innerHTML.trim()) });\n            }\n            else {\n                this.setProperties({ value: this.element.innerHTML.trim() });\n            }\n        }\n    };\n    RichTextEditor.prototype.setContentHeight = function (target, isExpand) {\n        var heightValue;\n        var topValue = 0;\n        var cntEle = (this.sourceCodeModule.getPanel() &&\n            this.sourceCodeModule.getPanel().parentElement.style.display === 'block') ? this.sourceCodeModule.getPanel().parentElement :\n            this.contentModule.getPanel();\n        var rteHeight = this.element.offsetHeight;\n        var tbHeight = this.getToolbar() ? this.toolbarModule.getToolbarHeight() : 0;\n        var expandPopHeight = this.getToolbar() ? this.toolbarModule.getExpandTBarPopHeight() : 0;\n        if (this.toolbarSettings.type === ToolbarType.Expand && isExpand && target !== 'preview') {\n            heightValue = (this.height === 'auto') ? 'auto' : rteHeight - (tbHeight + expandPopHeight) + 'px';\n            topValue = (!this.toolbarSettings.enableFloating) ? expandPopHeight : 0;\n        }\n        else {\n            if (this.height === 'auto' && !(this.element.classList.contains('e-rte-full-screen'))) {\n                heightValue = 'auto';\n            }\n            else {\n                heightValue = rteHeight - tbHeight + 'px';\n            }\n        }\n        setStyleAttribute(cntEle, { height: heightValue, marginTop: topValue + 'px' });\n        if (this.iframeSettings.enable && target === 'sourceCode') {\n            var codeElement = select('.' + classes.CLS_RTE_CONTENT, this.element);\n            setStyleAttribute(codeElement, { height: heightValue, marginTop: topValue + 'px' });\n        }\n        if (this.toolbarSettings.enableFloating && this.getToolbar() && !this.inlineMode.enable) {\n            if (isExpand) {\n                setStyleAttribute(this.getToolbar().parentElement, { height: (tbHeight + expandPopHeight) + 'px' });\n            }\n            else {\n                setStyleAttribute(this.getToolbar().parentElement, { height: tbHeight + 'px' });\n            }\n        }\n        this.autoResize();\n    };\n    /**\n     * Retrieves the HTML from RichTextEditor.\n     * @public\n     */\n    RichTextEditor.prototype.getHtml = function () {\n        return this.value;\n    };\n    /**\n     * Shows the source HTML/MD markup.\n     * @public\n     */\n    RichTextEditor.prototype.showSourceCode = function () {\n        if (this.readonly) {\n            return;\n        }\n        this.notify(events.sourceCode, {});\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getBaseToolbarObject = function () {\n        var tbObj;\n        if (this.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            tbObj = this.quickToolbarModule && this.quickToolbarModule.getInlineBaseToolbar();\n        }\n        else {\n            tbObj = this.toolbarModule && this.toolbarModule.getBaseToolbar();\n        }\n        return tbObj;\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getToolbar = function () {\n        return this.toolbarModule ? this.toolbarModule.getToolbarElement() : null;\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.getToolbarElement = function () {\n        return this.toolbarModule && this.toolbarModule.getToolbarElement();\n    };\n    RichTextEditor.prototype.getID = function () {\n        return (this.originalElement.tagName === 'TEXTAREA' ? this.valueContainer.id : this.element.id);\n    };\n    RichTextEditor.prototype.mouseDownHandler = function (e) {\n        var touch = (e.touches ? e.changedTouches[0] : e);\n        addClass([this.element], [classes.CLS_FOCUS]);\n        this.preventDefaultResize(e);\n        this.notify(events.mouseDown, { args: e });\n        this.clickPoints = { clientX: touch.clientX, clientY: touch.clientY };\n    };\n    RichTextEditor.prototype.preventImgResize = function (e) {\n        if (e.target.nodeName.toLocaleLowerCase() === 'img') {\n            e.preventDefault();\n        }\n    };\n    RichTextEditor.prototype.preventDefaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().addEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', false, 'false');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', false, 'false');\n        }\n    };\n    RichTextEditor.prototype.defaultResize = function (e) {\n        if (Browser.info.name === 'msie') {\n            this.contentModule.getEditPanel().removeEventListener('mscontrolselect', this.preventImgResize);\n        }\n        else if (Browser.info.name === 'mozilla') {\n            this.contentModule.getDocument().execCommand('enableObjectResizing', true, 'true');\n            this.contentModule.getDocument().execCommand('enableInlineTableEditing', true, 'true');\n        }\n    };\n    RichTextEditor.prototype.resizeHandler = function () {\n        var isExpand = false;\n        if (this.toolbarSettings.enable && !this.inlineMode.enable) {\n            this.toolbarModule.refreshToolbarOverflow();\n            isExpand = this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains(classes.CLS_EXPAND_OPEN);\n        }\n        this.setContentHeight('', isExpand);\n    };\n    RichTextEditor.prototype.scrollHandler = function (e) {\n        this.notify(events.scroll, { args: e });\n    };\n    RichTextEditor.prototype.focusHandler = function (e) {\n        if (!this.isRTE || this.isFocusOut) {\n            this.isRTE = this.isFocusOut ? false : true;\n            this.isFocusOut = false;\n            addClass([this.element], [classes.CLS_FOCUS]);\n            if (this.editorMode === 'HTML') {\n                this.cloneValue = (this.inputElement.innerHTML === '<p><br></p>') ? null : this.enableHtmlEncode ?\n                    this.encode(decode(this.inputElement.innerHTML)) : this.inputElement.innerHTML;\n            }\n            else {\n                this.cloneValue = this.inputElement.value === '' ? null :\n                    this.inputElement.value;\n            }\n            if (document.activeElement === this.element) {\n                this.contentModule.getEditPanel().focus();\n            }\n            this.preventDefaultResize(e);\n            this.trigger('focus', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.saveInterval) && this.saveInterval > 0) {\n                this.timeInterval = setInterval(this.updateIntervalValue.bind(this), this.saveInterval);\n            }\n            EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        }\n    };\n    RichTextEditor.prototype.getUpdatedValue = function () {\n        var value;\n        if (this.editorMode === 'HTML') {\n            value = (this.inputElement.innerHTML === '<p><br></p>') ? null : this.enableHtmlEncode ?\n                this.encode(decode(this.inputElement.innerHTML)) : this.inputElement.innerHTML;\n        }\n        else {\n            value = this.inputElement.value === '' ? null :\n                this.inputElement.value;\n        }\n        return value;\n    };\n    RichTextEditor.prototype.updateIntervalValue = function () {\n        this.setProperties({ value: this.getUpdatedValue() }, true);\n        this.valueContainer.value = this.value;\n        this.invokeChangeEvent();\n    };\n    RichTextEditor.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var rteElement = closest(target, '.' + classes.CLS_RTE);\n        if (!this.element.contains(e.target) && document !== e.target && rteElement !== this.element &&\n            !closest(target, '[aria-owns=\"' + this.getID() + '\"]')) {\n            this.isBlur = true;\n            this.isRTE = false;\n        }\n        this.notify(events.docClick, { args: e });\n    };\n    RichTextEditor.prototype.blurHandler = function (e) {\n        var trg = e.relatedTarget;\n        if (trg) {\n            var rteElement = closest(trg, '.' + classes.CLS_RTE);\n            if (rteElement && rteElement === this.element) {\n                this.isBlur = false;\n            }\n            else if (closest(trg, '[aria-owns=\"' + this.getID() + '\"]')) {\n                this.isBlur = false;\n            }\n            else {\n                this.isBlur = true;\n                trg = null;\n            }\n        }\n        if (this.isBlur && isNOU(trg)) {\n            removeClass([this.element], [classes.CLS_FOCUS]);\n            this.notify(events.focusChange, {});\n            var value = this.getUpdatedValue();\n            this.setProperties({ value: value });\n            this.notify(events.toolbarRefresh, { args: e, documentNode: document });\n            this.invokeChangeEvent();\n            this.isFocusOut = true;\n            this.isBlur = false;\n            dispatchEvent(this.valueContainer, 'focusout');\n            this.defaultResize(e);\n            this.trigger('blur', { event: e, isInteracted: Object.keys(e).length === 0 ? false : true });\n            if (!isNOU(this.timeInterval)) {\n                clearInterval(this.timeInterval);\n                this.timeInterval = null;\n            }\n            EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        }\n        else {\n            this.isRTE = true;\n        }\n    };\n    RichTextEditor.prototype.invokeChangeEvent = function () {\n        var eventArgs = {\n            value: this.value\n        };\n        if (this.value !== this.cloneValue) {\n            this.trigger('change', eventArgs);\n            this.cloneValue = this.value;\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.wireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.add(element, 'scroll', this.scrollHandler, this);\n        }\n    };\n    RichTextEditor.prototype.wireContextEvent = function () {\n        if (this.quickToolbarSettings.showOnRightClick) {\n            EventHandler.add(this.inputElement, 'contextmenu', this.contextHandler, this);\n            if (Browser.isDevice) {\n                this.touchModule = new EJ2Touch(this.inputElement, { tapHold: this.touchHandler.bind(this), tapHoldThreshold: 500 });\n            }\n        }\n    };\n    RichTextEditor.prototype.unWireContextEvent = function () {\n        EventHandler.remove(this.inputElement, 'contextmenu', this.contextHandler);\n        if (Browser.isDevice && this.touchModule) {\n            this.touchModule.destroy();\n        }\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.unWireScrollElementsEvents = function () {\n        this.scrollParentElements = getScrollableParent(this.element);\n        for (var _i = 0, _a = this.scrollParentElements; _i < _a.length; _i++) {\n            var element = _a[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n    };\n    RichTextEditor.prototype.touchHandler = function (e) {\n        this.notifyMouseUp(e.originalEvent);\n        this.triggerEditArea(e.originalEvent);\n    };\n    RichTextEditor.prototype.contextHandler = function (e) {\n        e.preventDefault();\n    };\n    RichTextEditor.prototype.resetHandler = function () {\n        this.setProperties({ value: this.valueContainer.defaultValue === '' ? null : this.valueContainer.defaultValue });\n    };\n    /**\n     * @hidden\n     */\n    RichTextEditor.prototype.autoResize = function () {\n        var _this = this;\n        if (this.height === 'auto') {\n            if (this.editorMode === 'Markdown') {\n                setTimeout(function () { _this.setAutoHeight(_this.inputElement); }, 0);\n            }\n            else if (this.iframeSettings.enable) {\n                var iframeElement_1 = this.element.querySelector('#' + this.getID() + '_rte-view');\n                setTimeout(function () { _this.setAutoHeight(iframeElement_1); }, 0);\n            }\n        }\n        else {\n            this.inputElement.style.overflow = null;\n        }\n    };\n    RichTextEditor.prototype.setAutoHeight = function (element) {\n        element.style.height = '';\n        element.style.height = this.inputElement.scrollHeight + 'px';\n        element.style.overflow = 'hidden';\n    };\n    RichTextEditor.prototype.wireEvents = function () {\n        this.element.addEventListener('focusin', this.onFocusHandler, true);\n        this.element.addEventListener('focusout', this.onBlurHandler, true);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.bindEvents();\n    };\n    RichTextEditor.prototype.bindEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.inputElement, {\n            keyAction: this.keyDown.bind(this), keyConfigs: __assign({}, this.formatter.keyConfig, this.keyConfig),\n            eventName: 'keydown'\n        });\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetHandler, this);\n        }\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        EventHandler.add(this.inputElement, 'paste', this.onPaste, this);\n        EventHandler.add(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30), this);\n        EventHandler.add(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler, this);\n        this.wireContextEvent();\n        this.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown, this);\n        this.element.ownerDocument.defaultView.addEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.add(this.inputElement, 'focusin', this.focusHandler, this);\n            EventHandler.add(this.inputElement, 'focusout', this.blurHandler, this);\n            EventHandler.add(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown, this);\n        }\n        this.wireScrollElementsEvents();\n    };\n    RichTextEditor.prototype.onIframeMouseDown = function (e) {\n        this.isBlur = false;\n        this.notify(events.iframeMouseDown, e);\n    };\n    RichTextEditor.prototype.editorKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'copy':\n                this.onCopy();\n                break;\n            case 'cut':\n                this.onCut();\n                break;\n        }\n        if (e.callBack && (e.event.action === 'copy' || e.event.action === 'cut')) {\n            e.callBack({\n                requestType: e.event.action,\n                editorMode: 'HTML',\n                event: e.event\n            });\n        }\n    };\n    RichTextEditor.prototype.unWireEvents = function () {\n        this.element.removeEventListener('focusin', this.onFocusHandler, true);\n        this.element.removeEventListener('focusout', this.onBlurHandler, true);\n        if (this.readonly && this.enabled) {\n            return;\n        }\n        this.unbindEvents();\n    };\n    RichTextEditor.prototype.unbindEvents = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        var formElement = closest(this.valueContainer, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetHandler);\n        }\n        EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n        EventHandler.remove(this.inputElement, 'paste', this.onPaste);\n        EventHandler.remove(this.inputElement, Browser.touchEndEvent, debounce(this.mouseUp, 30));\n        EventHandler.remove(this.inputElement, Browser.touchStartEvent, this.mouseDownHandler);\n        this.unWireContextEvent();\n        if (this.formatter) {\n            this.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.editorKeyDown);\n        }\n        this.element.ownerDocument.defaultView.removeEventListener('resize', this.onResizeHandler, true);\n        if (this.iframeSettings.enable) {\n            EventHandler.remove(this.inputElement, 'focusin', this.focusHandler);\n            EventHandler.remove(this.inputElement, 'focusout', this.blurHandler);\n            EventHandler.remove(this.inputElement.ownerDocument, Browser.touchStartEvent, this.onIframeMouseDown);\n        }\n        this.unWireScrollElementsEvents();\n    };\n    __decorate([\n        Complex({}, ToolbarSettings)\n    ], RichTextEditor.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Complex({}, QuickToolbarSettings)\n    ], RichTextEditor.prototype, \"quickToolbarSettings\", void 0);\n    __decorate([\n        Complex({}, PasteCleanupSettings)\n    ], RichTextEditor.prototype, \"pasteCleanupSettings\", void 0);\n    __decorate([\n        Complex({}, IFrameSettings)\n    ], RichTextEditor.prototype, \"iframeSettings\", void 0);\n    __decorate([\n        Complex({}, ImageSettings)\n    ], RichTextEditor.prototype, \"insertImageSettings\", void 0);\n    __decorate([\n        Complex({}, TableSettings)\n    ], RichTextEditor.prototype, \"tableSettings\", void 0);\n    __decorate([\n        Property(0)\n    ], RichTextEditor.prototype, \"floatingToolbarOffset\", void 0);\n    __decorate([\n        Complex({}, InlineMode)\n    ], RichTextEditor.prototype, \"inlineMode\", void 0);\n    __decorate([\n        Property('100%')\n    ], RichTextEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property({})\n    ], RichTextEditor.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], RichTextEditor.prototype, \"enabled\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableHtmlEncode\", void 0);\n    __decorate([\n        Property('auto')\n    ], RichTextEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property(30)\n    ], RichTextEditor.prototype, \"undoRedoSteps\", void 0);\n    __decorate([\n        Property(300)\n    ], RichTextEditor.prototype, \"undoRedoTimer\", void 0);\n    __decorate([\n        Property('HTML')\n    ], RichTextEditor.prototype, \"editorMode\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"keyConfig\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"showCharCount\", void 0);\n    __decorate([\n        Property(false)\n    ], RichTextEditor.prototype, \"enableTabKey\", void 0);\n    __decorate([\n        Property(-1)\n    ], RichTextEditor.prototype, \"maxLength\", void 0);\n    __decorate([\n        Complex({}, Format)\n    ], RichTextEditor.prototype, \"format\", void 0);\n    __decorate([\n        Complex({}, FontFamily)\n    ], RichTextEditor.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Complex({}, FontSize)\n    ], RichTextEditor.prototype, \"fontSize\", void 0);\n    __decorate([\n        Complex({}, FontColor)\n    ], RichTextEditor.prototype, \"fontColor\", void 0);\n    __decorate([\n        Complex({}, BackgroundColor)\n    ], RichTextEditor.prototype, \"backgroundColor\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"valueTemplate\", void 0);\n    __decorate([\n        Property(10000)\n    ], RichTextEditor.prototype, \"saveInterval\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"blur\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"focus\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], RichTextEditor.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Property(null)\n    ], RichTextEditor.prototype, \"formatter\", void 0);\n    RichTextEditor = __decorate([\n        NotifyPropertyChanges\n    ], RichTextEditor);\n    return RichTextEditor;\n}(Component));\nexport { RichTextEditor };\n"],"names":["getLocale","self","localeItems","item","i","length","value","subCommand","localeObj","getConstant","locale","text","getIndex","val","items","index","some","toLocaleLowerCase","hasClass","element","className","classList","contains","getDropDownValue","type","returnType","data","result","k","isNOU","iconCss","isIDevice","Browser","isDevice","isIos","getFormattedFontSize","getTooltipText","serviceLocator","i10n","getService","itemLocale","toolsLocale","setToolbarStatus","e","isPopToolbar","dropDown","dropDownModule","args","_i","keys_1","Object","keys","key","j","tbItems","itemStr","addClass","tbElements","classes.CLS_ACTIVE","removeClass","parent","toolbarSettings","formatDropDown","isDestroyed","formatItems","format","types","formatContent","default","content","width","dataBind","alignDropDown","model.alignmentItems","fontNameDropDown","fontNameItems","fontFamily","fontNameContent","name_1","title","fontSizeDropDown","fontSizeItems","fontSize","fontSizeContent","replace","getCollection","getTBarItemsIndex","toolbarItems","itemsIndex","push","updateUndoRedoStatus","baseToolbar","undoRedoStatus","trgItems","undoRedoItems","toolbarObj","selectAll","classes.CLS_TB_ITEM","keys_2","target","enableItems","dispatchEvent","evt","document","createEvent","initEvent","parseHtml","tempNode","createElement","innerHTML","DocumentFragment","createRange","createContextualFragment","getTextNodesUnder","docElement","node","nodes","firstChild","nextSibling","nodeType","concat","toObjectLowerCase","obj","convertedValue","getEditValue","rteObj","enableHtmlEncode","updateTextNode","decode","setProperties","childNodes","slice","call","forEach","childNode","Node","TEXT_NODE","parentNode","defaultTag","insertBefore","appendChild","setEditFrameFocus","editableElement","selector","nodeName","isNullOrUndefined","top","window","querySelector","contentWindow","focus","setAttributes","htmlAttributes","rte","isFrame","initial","contentModule","getDocument","_a","htmlAttr","add","enabled","setEnable","readonly","setReadOnly","setAttribute","placeholder","setPlaceHolder","indexOf","valueContainer","initialLoad","initialEnd","iframeMouseDown","destroy","toolbarClick","toolbarRefresh","refreshBegin","toolbarUpdated","bindOnEnd","renderColorPicker","htmlToolbarClick","markdownToolbarClick","destroyColorPicker","modelChanged","keyUp","keyDown","mouseUp","toolbarCreated","toolbarRenderComplete","enableFullScreen","disableFullScreen","dropDownSelect","beforeDropDownItemRender","execCommandCallBack","imageToolbarAction","linkToolbarAction","resizeStart","onResize","resizeStop","insertLink","unLink","editLink","openLink","actionBegin","actionComplete","updateToolbarItem","insertImage","insertCompleted","imageLink","imageAlt","imageDelete","imageCaption","imageSize","sourceCode","updateSource","beforeDropDownOpen","selectionSave","selectionRestore","expandPopupClick","count","mouseDown","sourceCodeMouseDown","editAreaClick","scroll","colorPickerChanged","tableColorPickerChanged","focusChange","selectRange","getSelectedHtml","renderInlineToolbar","paste","rtlMode","createTable","docClick","tableToolbarAction","checkUndo","readOnlyMode","pasteClean","CLS_RTE","CLS_DISABLED","CLS_SCRIPT_SHEET","CLS_STYLE_SHEET","CLS_TOOLBAR","CLS_TB_FIXED","CLS_TB_FLOAT","CLS_TB_ABS_FLOAT","CLS_INLINE","CLS_RTE_EXPAND_TB","CLS_FULL_SCREEN","CLS_QUICK_TB","CLS_QUICK_DROPDOWN","CLS_INLINE_POP","CLS_INLINE_DROPDOWN","CLS_DROPDOWN_POPUP","CLS_DROPDOWN_ICONS","CLS_DROPDOWN_ITEMS","CLS_DROPDOWN_BTN","CLS_RTE_CONTENT","CLS_TB_ITEM","CLS_TB_WRAP","CLS_HIDE","CLS_FOCUS","CLS_RM_WHITE_SPACE","CLS_IMGBREAK","CLS_CAPTION","CLS_IMGINLINE","CLS_WARNING","CLS_ACTIVE","CLS_EXPAND_OPEN","CLS_RTE_ELEMENTS","CLS_TB_IOS_FIX","CLS_COLOR_CONTENT","CLS_RTE_READONLY","CLS_TABLE_SEL","CLS_TB_DASH_BOR","CLS_TB_ALT_BOR","CLS_TB_COL_RES","CLS_TB_ROW_RES","CLS_TB_BOX_RES","RenderType","ToolbarType","templateItems","tools","alignments","id","icon","tooltip","command","justifyleft","justifycenter","justifyright","justifyfull","fontname","fontsize","fontcolor","backgroundcolor","bold","italic","underline","strikethrough","clearformat","clearall","cut","copy","unorderedlist","orderedlist","indent","outdent","undo","redo","superscript","subscript","createlink","openlink","editlink","removelink","image","createtable","removetable","align","caption","remove","openimagelink","editimagelink","removeimagelink","insertlink","display","alttext","dimension","fullscreen","maximize","minimize","lowercase","uppercase","print","formats","sourcecode","preview","viewside","insertcode","tableheader","tableremove","tablerows","tablecolumns","tablecellbackground","tablecellhorizontalalign","tablecellverticalalign","tableeditproperties","styles","alignmentLocale","alignmentItems","imageAlignItems","displayLocale","imageDisplayItems","cssClass","tableRowLocale","tableRowsItems","tableColumnLocale","tableColumnsItems","tableVerticalLocale","TableCellVerticalAlignItems","tableStyleLocale","TableStyleItems","defaultLocale","justifyLeft","justifyCenter","justifyRight","justifyFull","fontName","fontColor","backgroundColor","clearFormat","clearAll","unorderedList","orderedList","createLink","removeLink","altText","lowerCase","upperCase","insertCode","linkText","linkTooltipLabel","linkWebUrl","linkTitle","linkurl","linkOpenInNewWindow","linkHeader","dialogInsert","dialogCancel","dialogUpdate","imageHeader","imageLinkHeader","mdimageLink","imageUploadMessage","imageDeviceUploadMessage","imageAlternateText","alternateHeader","browse","imageUrl","imageSizeHeader","imageHeight","imageWidth","textPlaceholder","inserttablebtn","tabledialogHeader","tableWidth","cellpadding","cellspacing","columns","rows","tableRows","tableColumns","tableCellHorizontalAlign","tableCellVerticalAlign","removeTable","tableHeader","tableRemove","tableCellBackground","tableEditProperties","insertColumnLeft","insertColumnRight","deleteColumn","insertRowBefore","insertRowAfter","deleteRow","tableEditHeader","TableHeadingText","TableColText","imageInsertLinkHeader","editImageHeader","alignmentsDropDownLeft","alignmentsDropDownCenter","alignmentsDropDownRight","alignmentsDropDownJustify","imageDisplayDropDownInline","imageDisplayDropDownBreak","tableInsertRowDropDownBefore","tableInsertRowDropDownAfter","tableInsertRowDropDownDelete","tableInsertColumnDropDownLeft","tableInsertColumnDropDownRight","tableInsertColumnDropDownDelete","tableVerticalAlignDropDownTop","tableVerticalAlignDropDownMiddle","tableVerticalAlignDropDownBottom","tableStylesDropDownDashedBorder","tableStylesDropDownAlternateRows","pasteFormat","pasteFormatContent","plainText","cleanFormat","keepFormat","pasteDialogOk","pasteDialogCancel","insertcolumnleft","insertcolumnright","deletecolumn","aligntop","alignmiddle","alignbottom","insertrowbefore","insertrowafter","deleterow","ToolbarRenderer","this","wireEvent","prototype","on","events.destroy","unWireEvent","off","popupOverlay","EventHandler","onPopupOverlay","toolbarBeforeCreate","mode","enableCollision","notify","events.toolbarCreated","toolbarClicked","events.toolbarClick","trigger","dropDownSelected","events.dropDownSelect","events.beforeDropDownItemRender","dropDownOpen","parentElement","classes.CLS_QUICK_DROPDOWN","popupModal","events.selectionSave","dropDownClose","events.selectionRestore","renderToolbar","setPanel","renderPanel","overflowMode","rteToolbarObj","Toolbar","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","appendTo","renderDropDownButton","css","_this","inlineMode","enable","proxy","DropDownButton","select","beforeOpen","divNode","trim","textContent","events.beforeDropDownOpen","cancel","close","open","beforeItemRender","tabIndex","getElementById","getID","closest","style","setIsModel","nextElementSibling","popupContainer","zIndex","position","parseInt","toString","paletteSelection","dropDownArgs","currentElement","ele","colorbox","borderBottomColor","filter","renderColorPickerDropDown","colorPicker","range","inlineEle","event","currentDropdown","colorpickerValue","formatter","editorManager","nodeSelection","getRange","startContainer","collapsed","events.tableColorPickerChanged","events.colorPickerChanged","inst","getInstance","ColorPicker","showButtons","onclick","toggle","setColorPickerContentWidth","focusEle","beforeClose","dropElement","lastElementChild","removeAttribute","onmousedown","popupInst","Popup","relateTo","body","X","Y","targetType","collision","offsetY","colorPickerContent","borderWidth","getComputedStyle","borderBottomWidth","formatUnit","children","offsetWidth","inline","modeSwitcher","beforeTileRender","change","colorPickerArgs","info","name","currentValue","rgba","hex","beforeModeSwitch","presetColors","colorCode","getPanel","toolbarPanel","panel","BaseToolbar","locator","renderFactory","addEventListener","itemConfigs","extend","events.rtlMode","setRtl","removeEventListener","getTemplateObject","container","tagName","template","outerHTML","tooltipText","getObject","toLowerCase","prefixIcon","getItems","tbItems_1","getToolbarOptions","render","toolbarRenderer","getRenderer","DropDownButtons","initializeInstance","beforeRender","dropdownContent","renderDropDowns","containerType","tbElement","model.templateItems","targetElement","undefined","classes.CLS_DROPDOWN_BTN","formatItem","defineProperties","enumerable","classes.CLS_DROPDOWN_POPUP","classes.CLS_DROPDOWN_ITEMS","itemName","fontItem","getEditNode","imageAlignmentDropDown","imageDisplayDropDown","rowDropDown","columnDropDown","verticalAlignDropDown","tableStylesDropDown","getUpdateItems","dropDownItems","onPropertyChanged","model","newProp","_b","_c","fontItems","classes.CLS_QUICK_TB","removeProperty","_d","_e","_f","_g","getEditPanel","tableRowsDropDown","model.tableRowsItems","tableColumnsDropDown","model.tableColumnsItems","tableCellVerticalAlignDropDown","model.TableCellVerticalAlignItems","displayDropDown","model.imageDisplayItems","imageAlignDropDown","classes.CLS_DROPDOWN_ICONS","model.imageAlignItems","tableSettings","removeDropDownClasses","destroyDropDowns","events.iframeMouseDown","onIframeMouseDown","events.modelChanged","ServiceLocator","services","register","RendererFactory","rendererMap","addRenderer","rName","getEnumValue","ToolbarAction","renderSelection","controlParent","activeEle","events.htmlToolbarClick","events.markdownToolbarClick","process","originalEvent","isToolbar","isTransformChild","model.updateDropDownLocale","model.tools","contentRenderer","Content","editPanel","toolbarBindEvent","keyBoardModule","KeyboardEvents","getToolbarElement","keyAction","toolBarKeyDown","keyConfigs","keyConfig","eventName","action","createToolbarElement","enableFloating","tbWrapper","classes.CLS_TB_WRAP","firstElementChild","getToolbarMode","tbMode","Expand","checkToolbarResponsive","addFixedTBarClass","wireEvents","events.renderColorPicker","checkIsTransformChild","transformElements","toggleFloatClass","topValue","scrollParent","isBody","isFloat","floatOffset","floatingToolbarOffset","tbHeight","getToolbarHeight","getExpandTBarPopHeight","scrollParentRelativeTop","trgHeight","offsetHeight","bodyStyle","parseFloat","marginTop","split","paddingTop","targetTop","getBoundingClientRect","scrollParentYOffset","isMSPointer","pageYOffset","scrollTop","scrollParentRect","scrollParentTop","classes.CLS_TB_ABS_FLOAT","parent_1","innerHeight","bottom","classes.CLS_TB_FLOAT","setStyleAttribute","events.renderInlineToolbar","classes.CLS_RTE_EXPAND_TB","refreshToolbarOverflow","classes.CLS_TB_FIXED","removeFixedTBarClass","showFixedTBar","classes.CLS_TB_IOS_FIX","hideFixedTBar","updateItem","targetItem","addTBarItem","prefixId","updateToolbarStatus","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","enableTBarItems","isEnable","undoRedoManager","getUndoStatus","removeTBarItems","getBaseToolbarObject","removeItems","popHeight","expandPopup","classes.CLS_EXPAND_OPEN","classes.CLS_TOOLBAR","refreshOverflow","isToolbarDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","events.destroyColorPicker","detach","scrollHandler","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","toolbarMouseDownHandler","trg","setContentHeight","toolbarActionModule","events.initialEnd","events.scroll","events.bindOnEnd","events.toolbarUpdated","events.refreshBegin","onRefresh","events.enableFullScreen","events.disableFullScreen","events.updateToolbarItem","events.expandPopupClick","events.focusChange","events.mouseDown","events.sourceCodeMouseDown","undoRedoRefresh","refreshToolbar","module","getModuleName","wireScrollElementsEvents","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__decorate","decorators","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","keyCode","backspace","tab","enter","shift","control","alt","pause","capslock","space","escape","pageup","pagedown","end","home","leftarrow","uparrow","rightarrow","downarrow","insert","delete","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","semicolon","plus","comma","minus","dot","forwardslash","graveaccent","openbracket","backslash","closebracket","singlequote","]","[","=","_super","options","keyPressHandler","isAltKey","altKey","isCtrlKey","ctrlKey","isShiftKey","shiftKey","curkeyCode","which","configCollection_1","rconfig","rKeyObj","KeyboardEvents_1","getKeyConfigData","unwireEvents","oldProp","config","configCache","keyData","Number","getKeyCode","keyVal","toUpperCase","charCodeAt","Property","Event","NotifyPropertyChanges","Base","ColorPickerInput","renderColorPickerInput","targetID","suffixID","fontNode","classes.CLS_RTE_ELEMENTS","fontColorPicker","fontColorDropDown","backNode","backgroundColorPicker","backgroundColorDropDown","innerEle","events.toolbarRenderComplete","BaseQuickToolbar","isDOMElement","popupRenderer","dropDownButtons","colorPickerObj","appendPopupContent","toolbarElement","popupType","classes.CLS_INLINE_POP","popupId","getUniqueID","stringItems","createToolbar","renderPopup","quickTBarObj","refresh","setPosition","x","y","imgWrapper","classes.CLS_RM_WHITE_SPACE","targetOffsetTop","offsetTop","parentOffsetTop","parentData","editTop","tBarElementHeight","editHeight","popWidth","left","offsetLeft","popupObj","right","checkCollision","viewPort","parentTop","contentTop","windowY","isCollide","popup","windowHeight","windowWidth","bodyRightSpace","showPopup","editPanelTop","editPanelHeight","bodyRight","marginRight","paddingRight","innerWidth","toolbarAvail","getToolbar","toolbarModule","expTBHeight","tBarHeight","classes.CLS_HIDE","iframeSettings","cntEle","classes.CLS_RTE_CONTENT","disableToolbarItem","enableToolbarItem","append","show","showPopupData","hide","duration","maxWidth","hidePopup","viewSourcePanel","sourceCodeModule","getViewPanel","removeEleFromDOM","addQTBarItem","removeQTBarItem","updateStatus","PopupRenderer","popupOpen","popupPanel","QuickToolbar","formattedItems","getQTBarOptions","popType","renderType","createQTBar","qTBar","initializeQuickToolbars","quickToolbarModule","onSelection","selectionChangeHandler","onMouseDown","isBlur","isRTE","renderQuickToolbars","linkQTBar","imageQTBar","textQTBar","tableQTBar","quickToolbarSettings","link","LinkToolbar","TextToolbar","ImageToolbar","table","TableToolbar","renderInlineQuickToolbar","inlineQTBar","InlineToolbar","showInlineQTBar","hideInlineQTBar","hideQuickToolbars","deBounce","clearTimeout","deBouncer","setTimeout","mouseUpHandler","coordinates","touches","changedTouches","touchData","prevClientX","clientX","prevClientY","clientY","offsetX","pageX","isIFrame","pageY","closestAnchor","keyDownHandler","inlineQTBarMouseDownHandler","keyUpHandler","getInlineBaseToolbar","onSelectionChange","getSelection","isCollapsed","wireInlineQTBarEvents","events.mouseUp","events.keyDown","events.keyUp","unWireInlineQTBarEvents","actionOnScroll","onKeyDown","Count","renderCount","appendCount","maxLength","charCountBackground","htmlLength","htmlText","editorMode","string","percentage","restrict","showCharCount","currentTarget","array","arrayKey","preventDefault","member","events.count","events.sourceCode","events.updateSource","MarkdownSelection","getLineNumber","textarea","point","substr","getSelectedText","start","selectionStart","selectionEnd","substring","getAllParents","getSelectedLine","getLine","getSelectedParentPoints","lines","parents","selectedPoints","selectedLine","startLength","join","firstPoint","line","points","lastPoint","setSelection","setSelectionRange","save","restore","textArea","isStartWith","isStart","RegExp","replaceSpecialChar","test","isClear","regex","getRegex","syntax","getSelectedInlinePoints","MarkdownToolbarStatus","toolbarStatus","inlinecode","selection","events.toolbarRefresh","onRefreshHandler","parentsLines","documentNode","isListsApplied","currentFormat","mdSelectionFormats","isAppliedCommand","isApply","listTags","formatTags","checkLine","selectionDirection","parentLines","firstPrevText","lastNextText","ExecCommandCallBack","events.execCommandCallBack","commandCallBack","requestType","saveData","ACTION","FORMAT_TYPE","KEY_DOWN_HANDLER","KEY_UP_HANDLER","MODEL_CHANGED_PLUGIN","MODEL_CHANGED","MS_WORD_CLEANUP_PLUGIN","MS_WORD_CLEANUP","Formatter","rangeCount","getRangeAt","getAncestorNode","commonAncestorContainer","headingText","colText","itemCollection","CONSTANT.actionBegin","observer","callBack","onSuccess","getUndoRedoStack","clipboardAction","CONSTANT.checkUndo","execCommand","enableUndo","onKeyHandler","events","CONSTANT.execCommandCallBack","CONSTANT.actionComplete","CONSTANT.insertCompleted","isNotify","elements","autoResize","undoRedoStack","status","iRichTextEditor","steps","LISTS_COMMAND","selectionCommand","LINK_COMMAND","CLEAR_COMMAND","MD_TABLE","MDLists","markdownSelection","CONSTANT.LISTS_COMMAND","applyListsHandler","EVENTS.KEY_DOWN_HANDLER","EVENTS.KEY_UP_HANDLER","tabKey","enterKey","addedLength","isNotFirst","isNotFirstLine","getListRegex","currentAction","getAction","prevIndex","prevLine","tabSpaceLength","splitTab","splice","getTabSpace","tabs","currentLine","curTabSpace","prevTabSpace","ol","OL","UL","tabSpace","prefix","endLength","appliedLine","pattern","selectedText","configKey","MDFormats","EVENTS.FORMAT_TYPE","applyFormats","isAppliedFormat","applyCodeBlock","CONSTANT.selectionCommand","clearRegex","removeLength","removeText","pre","cmd","startNo","lastIndexOf","endNo","repStartText","replaceAt","repEndText","lastLine","input","search","MDSelectionFormats","applyCommands","isBold","isItalic","isMatch","matchText","Italic","InlineCode","StrikeThrough","match","singleCharRegx","multiCharRegx","isFormat","splitText","splitAt","cmdB","Bold","cmdI","toLocaleUpperCase","beforeText","afterText","startCmd","endCmd","isApplied","textReplace","repStart","repEnd","regx","regxB","repText","regxTemp","regTest","markdownFormatTags","h6","h5","h4","h3","h2","h1","blockquote","markdownSelectionTags","SubScript","SuperScript","UpperCase","LowerCase","markdownListsTags","htmlKeyConfig","toolbar-focus","insert-link","insert-image","insert-table","indents","outdents","html-source","full-screen","decrease-fontsize","increase-fontsize","justify-center","justify-full","justify-left","justify-right","clear-format","ordered-list","unordered-list","markdownKeyConfig","pasteCleanupGroupingTags","strong","emp","cite","selfClosingTags","UndoRedoCommands","undoRedoSteps","undoRedoTimer","debounceListener","debounce","EVENTS.ACTION","onAction","EVENTS.MODEL_CHANGED_PLUGIN","props","changEle","removedContent","MDLink","CONSTANT.LINK_COMMAND","startOffset","endOffset","url","MDTable","CONSTANT.MD_TABLE","textAreaInitial","insertTable","getTable","textNonEmpty","tableCell","insertLine","convertToLetters","dummyElement","parentText","lastLineSplit","syntaxArr","getFormatTag","updateValue","makeSelection","ensureFormatApply","checkValid","syntaxFormatKey","syntaxTag","Formats","syntaxListKey","List","formatSplitZero","ensureStartValid","firstLine","firstLineSplit","ensureEndValid","formatSplitLength","updateValueWithFormat","formatSplit","textApplyFormat","rowNumber","baseChar","letters","String","fromCharCode","emptyText","isCursorBased","isSelectionBased","ClearFormat","CONSTANT.CLEAR_COMMAND","clear","replaceRegex","clearSelectionTags","selectionTags","num","expString","regExp","startExp","endExp","clearFormatTags","clearFormatLines","tags","str","len","MarkdownParser","initialize","Observer","listObj","formatObj","linkObj","tableObj","clearObj","editorKeyDown","editorKeyUp","EVENTS.MODEL_CHANGED","exeValue","MarkdownFormatter","updateFormatter","editElement","doc","MarkdownRender","div","contentPanel","getText","ownerDocument","MarkdownEditor","saveSelection","events.initialLoad","instantiateRenderer","onToolbarClick","events.selectAll","events.getSelectedHtml","onSelectionSave","onSelectionRestore","events.readOnlyMode","updateReadOnly","classes.CLS_RTE_READONLY","events.insertLink","events.insertImage","tableConstant","option","toolbarUpdate","IMAGE","TABLE","LINK","INSERT_ROW","INSERT_COLUMN","DELETEROW","DELETECOLUMN","REMOVETABLE","TABLEHEADER","TABLE_VERTICAL_ALIGN","ALIGNMENT_TYPE","INDENT_TYPE","BLOCK_TAGS","IGNORE_BLOCK_TAGS","TABLE_BLOCK_TAGS","SELECTION_TYPE","INSERTHTML_TYPE","INSERT_TEXT_TYPE","CLEAR_TYPE","NodeSelection","startNodeName","endNodeName","saveInstance","cloneRange","rootNode","documentFromRange","getNodeArray","endContainer","html","get","setStart","collapse","defaultView","previousSibling","isChildNode","nodeCollection","getNode","startNode","endNode","getNodeCollection","getParentNodeCollection","getParentNodes","reverse","getSelectionNodeCollection","getSelectionNodes","getInsertNodeCollection","getInsertNodes","root","setRangePoint","isvalid","size","constant","setRange","removeAllRanges","addRange","setSelectionText","startIndex","endIndex","setEnd","setSelectionContents","selectNode","setSelectionNode","selectNodeContents","getSelectedNodes","Clear","insertParentNode","newNode","surroundContents","setCursorPoint","markerClassName","startSelection","endSelection","DOMNode","currentDocument","contents","isBlockNode","ELEMENT_NODE","CONSTANT.BLOCK_TAGS","isLink","blockParentNode","rawAttributes","rawAttr","attributes","attr","orderRawAttr","sort","attrKey","attrValue","clearAttributes","openTagString","closeTagString","createTagString","relativeElement","isList","isElement","isEditable","getAttribute","replaceWith","parseHTMLFragment","temp","wrap","wrapper","insertAfter","referenceNode","wrapInner","unWrap","unWrapNode","removeChild","getSelectedNode","nodeFinds","existNodes","isEditorArea","getRangePoint","ranges","f","getPreviousNode","encode","innerText","saveMarker","startTextNode","endTextNode","marker","setMarker","existNode","textNodes","CONSTANT.IGNORE_BLOCK_TAGS","createTempNode","blockNodes","collectionNodes","ignoreTableTag","listNodes","querySelectorAll","CONSTANT.TABLE_BLOCK_TAGS","Lists","domNode","isNested","ignoreDefault","stopPropagation","revertList","revertClean","nestedList","cleanNode","prevSibling","noPreviousElement","firstNode","firstNodeOL","siblingListOL","siblingListLI","siblingListLIFirst","h","prepend","list-style-type","nestedElement","nestedElementLI","firstNodeLI","listsNodes","applyLists","isRevert","checkLists","openTag","closeTag","replaceHTML","collectionString","nodesTemp","liParents","contentNodes","findUnSelected","rightIndent","indentElements","childElements","z","childLI","viewNode","classAttr","class","nodeInnerHtml","emptyUl","emptyLi","getParentNode","formatsNodes","cleanFormats","replaceTag","ignoreAttr","InsertMethods","WrapBefore","textNode","isAfter","AppendBefore","Wrap","unwrap","child","NodeCutter","GetSpliceNode","SplitNode","clone","setStartBefore","setEndAfter","fragment","extractContents","spliceEmptyNode","GetCursorStart","indexes","GetCursorRange","cursorRange","TrimLineBreak","GetCursorNode","InsertHtml","Insert","insertNode","editNode","nodeCutter","closestParentNode","closestEle","preNode","sibNode","lasNode","previousNode","deleteContents","el","LinkCommand","CONSTANT.LINK","linkCommand","selectParent","anchor","attrs","href","anchorEle","arr","Alignments","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","CONSTANT.ALIGNMENT_TYPE","applyAlignment","alignmentNodes","text-align","Indents","indentValue","CONSTANT.INDENT_TYPE","applyIndents","indentsNodes","parentNodes","marginLeft","indentsValue","CLASS_IMAGE_RIGHT","CLASS_IMAGE_LEFT","CLASS_IMAGE_CENTER","CLASS_IMAGE_BREAK","CLASS_CAPTION","CLASS_CAPTION_INLINE","ImageCommand","CONSTANT.IMAGE","imageCommand","createImage","insertImageLink","openImageLink","editImageLink","removeImageLink","removeImage","insertAltTextImage","imageDimension","imageJustifyLeft","imageJustifyCenter","imageJustifyRight","imageInline","imageBreak","imgElement","height","minWidth","minHeight","maxHeight","imgEle","insertElement","classes.CLASS_CAPTION","classes.CLASS_IMAGE_RIGHT","classes.CLASS_IMAGE_LEFT","classes.CLASS_IMAGE_CENTER","classes.CLASS_IMAGE_BREAK","classes.CLASS_CAPTION_INLINE","TableCommand","CONSTANT.TABLE","CONSTANT.INSERT_ROW","insertRow","CONSTANT.INSERT_COLUMN","insertColumn","CONSTANT.DELETEROW","CONSTANT.DELETECOLUMN","CONSTANT.REMOVETABLE","CONSTANT.TABLEHEADER","CONSTANT.TABLE_VERTICAL_ALIGN","tableVerticalAlign","tblBody","tdWid","row","cell","removeEmptyNode","emptyLiChild","selectedCell","newRow","curRow","cloneNode","tabCell","tdElement","curCell","allRows","colIndex","colTemplate","deleteCell","cellIndex","parentTable","rowIndex","seletedTable","cellCount","createTHead","th","deleteTHead","verticalAlign","IsFormatted","getFormattedNode","getFormatParent","isFormattedNode","isUnderline","isStrikethrough","isSuperscript","isSubscript","isFontColor","isFontName","isFontSize","isBackgroundColor","inlineTags","fontWeight","fontStyle","textDecoration","color","backColor","SelectionCommands","applyFormat","domSelection","isFormatted","isCursor","isFontStyle","cursorNode","insertCursorNode","formatNode","insertFormat","removeFormat","applySelection","cursorNodes","cursorFormat","getInsertNode","splitNode","nodeIndex","lastNode","pop","nodeValue","GetFormatNode","getChildNode","SelectionBasedExec","CONSTANT.SELECTION_TYPE","InsertHtmlExec","CONSTANT.INSERTHTML_TYPE","applyHtml","exactNodes","cloneSelectNodes","clearInlines","reSelection","cloneParentNodes","clearBlocks","selectionNodes","endIndexNode","spliceParent","removeParent","index1","index2","index3","parentIndex","elementIndex","NONVALID_TAGS","NONVALID_PARENT_TAGS","removeInlineParent","ClearFormatExec","CONSTANT.CLEAR_TYPE","applyClear","UndoRedoManager","MsWordPaste","olData","ulData","ignorableNodes","blockNode","listContents","EVENTS.MS_WORD_CLEANUP_PLUGIN","wordCleanup","tempHTMLContent","clipboardData","getData","elm","cleanUp","listConverter","prevflagState","tempCleaner","level","stNode","collection","charAt","getListContent","listType","nestedLevel","makeConversion","elemColl","temp1","prevList","elem","pLevel","listCount","pElement","imgSpanElement","createTextNode","listStyle","getListStyle","lastChild","getNamedItem","tempElem","InsertTextExec","CONSTANT.INSERT_TEXT_TYPE","insertText","EditorManager","alignmentObj","indentsObj","imgObj","selectionObj","inserthtmlObj","insertTextObj","msWordPaste","EVENTS.MS_WORD_CLEANUP","onWordPaste","HTMLFormatter","statusCollection","ToolbarStatus","targetNode","formatCollection","JSON","parse","stringify","isOrderedList","isUnorderedList","isAlignment","isFormats","pos","textAlign","prop","getPropertyValue","HtmlToolbarStatus","ContentRender","rteContent","contenteditable","IframeContentRender","apply","iFrameContent","iframe","contentDocument","setThemeColor","write","inputElement","HtmlEditor","rangeCollection","nodeSelectionObj","colorPickerModule","events.selectRange","events.paste","onPaste","enableTabKey","textCont","spaceLink","firstElement","httpRegex","wwwRegex","httpText","httpSplitText","splittedText","lastElement","resultElement","executeCommand","selectNodeEle","urlText","selectParentEle","closestElement","events.imageToolbarAction","events.linkToolbarAction","events.tableToolbarAction","linkDialog","imageDialog","events.createTable","PasteCleanup","inlineNode","events.pasteClean","file","getAsFile","a","pasteCleanupSettings","prompt","pasteDialog","plainFormatting","formatting","radioRender","keepRadioButton","RadioButton","label","checked","keepFormatElement","cleanRadioButton","cleanFormatElement","plainTextRadioButton","plainTextElement","selectFormatting","dialog","Dialog","buttons","click","buttonModel","isPrimary","header","isModal","rteDialogWrapper","destroyDialog","rteDialogContainer","rteDialogWrapperChildLength","clean","clipBoardElem","deniedTags","deniedAttributes","deniedAttrs","allowedStyleProps","allowedStyle","detachInlineElements","getTextContent","isInlineElement","getTextNode","rootElement","brElement","divNextElement","tagGrouping","groupingTags","values","map","addTags","attributesfilter","userAttributes","allowedAttributeArray","deniedAttributeArray","allowedAttribute","deniedAttribute","removableElement","parentElem","removableAttrElement","styleElement","allowedStyleValue","allowedStyleValueArray","styleValue","Render","renderer","Link","rteID","rendererFactory","events.insertCompleted","showLinkQuickToolbar","onToolbarAction","events.unLink","events.editLink","events.openLink","events.editAreaClick","editAreaClickHandler","dialogObj","returnValue","quickToolObj","linkTop","linkPos","hideLinkQuickToolbar","showOnRightClick","getAnchorNode","isPopupOpen","eventArgs","inputDetails","selectText","linkWebAddress","linkDisplayText","linkTooltip","urlPlace","textPlace","linkDialogEle","linkContent","contentElem","linkTarget","linkUrl","linkOpenLabel","checkBoxObj","CheckBox","linkInsert","linkCancel","selectObj","selfLink","showCloseIcon","closeOnEscape","cancelDialog","animationSettings","effect","btnText","checkUrl","onDocumentClick","linkEle","isUrl","linkUpdate","Image","showImageQuickToolbar","events.imageCaption","events.imageDelete","deleteImg","events.imageLink","insertImgLink","events.imageAlt","insertAltText","events.imageSize","alignmentSelect","afterRender","imagePaste","touchEndEvent","imageClick","events.checkUndo","undoStack","insertImageSettings","resize","touchStartEvent","img","outline","resizeEnd","resizeBtnInit","cursor","events.resizeStop","getPointX","preventDefaultResize","imgResizeDiv","imageResize","getPointY","stopImmediatePropagation","resizeBtnStat","topLeft","topRight","botLeft","botRight","events.resizeStart","cancelResizeAction","imgResizePos","resizeImgDupPos","touchMoveEvent","resizing","calcPos","imgWid","imgHgt","borWid","devWid","parentOffset","offset","offsetParent","documentElement","setAspectRatio","expectedX","expectedY","resizeByPercent","pixToPerc","previousElementSibling","expected","parentEle","imgDupMouseMove","events.onResize","mouseX","mouseY","imgDupPos","openImgLink","editImgLink","removeImgLink","insertEle","captionEle","prev","remvoeResizEle","event_1","justifyImageLeft","justifyImageCenter","justifyImageRight","break","imageWithLinkQTBarItemUpdate","newItems","Math","round","hideImageQuickToolbar","imagDialog","linkWrap","inputLink","target_1","linkargs_1","selfImage","altWrap","altHeader","inputAlt","altArgs_1","insertAlt","captionClass","classes.CLS_CAPTION","draggable","imgWrap","imgInner","imgCaption","classes.CLS_IMGINLINE","classes.CLS_IMGBREAK","imgSizeHeader","dialogContent","imgsizeInput","selectObj_1","insertSize","imgDialog","imgInsert","imglinkCancel","imgHeader","insertImageUrl","imageUrlPopup","imgUrl","placeUrl","inputUrl","spellcheck","uploadUrl","matchUrl","imgHeight","imgWidth","imgSizeWrap","getClientRects","widthNum","NumericTextBox","min","max","heightNum","dialogEle","path","imgUpload","linkHeaderText","uploadParentEle","deviceImgUpMsg","imgUpMsg","span","spanMsg","btnEle","autofocus","browserMsg","button","Button","btnClick","fileSelect","uploadEle","uploadObj","Uploader","asyncSettings","saveUrl","dropArea","multiple","allowedExtensions","allowedTypes","selected","filesData","reader_1","FileReader","URL","createObjectURL","readAsDataURL","rawFile","success","removing","getElementsByClassName","proxy_1","reader_2","dataurl","mime","bstr","atob","n","u8arr","Uint8Array","Blob","ViewSource","onInitialEnd","updateSourceCode","CONSTANT.KEY_DOWN_HANDLER","getSourceCode","keyboardModule","previewKeyDown","previewElement","wireBaseKeyDown","unWireBaseKeyDown","events.actionBegin","updateValueData","events.actionComplete","invokeChangeEvent","editHTML","Table","moveEle","l10n","renderDlgContent","events.docClick","dropdownSelect","cellSelect","setBGColor","resizeHelper","addRow","addColumn","removeRowColumn","tableStyles","insertTableDialog","removeResizeEle","closestTd","tabSelection","tableArrowNavigation","editTable","tdEle","classes.CLS_TB_DASH_BOR","classes.CLS_TB_ALT_BOR","insideList","classes.CLS_TABLE_SEL","prevElement","tHead","clsTble","cells","nextElement","selText","hideTableQuickToolbar","closestTable","range_1","tableCellSelect","col","list","dlgDiv","tblHeader","tableCellLeave","tableCellClick","tableInsert","editdlgObj","tdNode","curTable","helper","targetTouches","tableResizeEleCreation","colReEle","classes.CLS_TB_COL_RES","data-col","unselectable","cssText","rowReEle","classes.CLS_TB_ROW_RES","data-row","tableReBox","classes.CLS_TB_BOX_RES","column","columnEle","appendHelper","rowEle","tableBox","removeHelper","setHelperHeight","updateHelper","top_1","tableHeight","cellColl","actualwid","totalwid","selectCell","tabkey","delKey","insertbtn","tableDiv","drawTable","viewPortElement","refreshPosition","isExist","rowDiv","data-column","data-cell","createDialog","editContent","tableDlgContent","update","editHeader","applyProperties","dlgContent","tableCellDlgContent","customTable","tableColumn","tableRow","tableWrap","columnTextBox","floatLabelType","rowTextBox","tableDialog","argument","cellPadding","cellSpacing","widthVal","executeGroup","strikeThrough","formatBlock","heading","insertHTML","insertHorizontalRule","insertBrOnReturn","insertOrderedList","insertUnorderedList","insertParagraph","predefinedItems","Custom","ToolbarSettings","ChildProperty","ImageSettings","TableSettings","QuickToolbarSettings","PasteCleanupSettings","FontFamily","FontSize","Format","FontColor","BackgroundColor","Resources","IFrameSettings","Complex","InlineMode","FullScreen","scrollableParent","getScrollableParent","classes.CLS_FULL_SCREEN","toggleParentOverflow","properties","isAdd","__assign","assign","t","s","RichTextEditor","isFocusOut","needsID","requiredModules","modules","updateEnable","classes.CLS_DISABLED","eventInitializer","preRender","onBlurHandler","blurHandler","onFocusHandler","focusHandler","onResizeHandler","resizeHandler","clickPoints","initialValue","initializeServices","setContainer","role","originalElement","valueTemplate","setValue","invalidAttr","rteOuterWrapper","getPersistData","addOnPersist","focusIn","focusOut","blur","txt","commandName","tool","renderModule","RTERender","defaultValue","allowedKeys","triggerEditArea","touch","notifyMouseUp","ensureModuleInjected","getInjectedModules","onCopy","onCut","evenArgs","pasteCleanupModule","args_1","destroyDependentModules","timeInterval","clearInterval","placeHolderWrapper","removeHtmlAttributes","removeAttributes","hasAttribute","getContent","nVal","updatePanelValue","countModule","setWidth","setHeight","setCssClass","updateRTL","frameSetting","resources","files","scripts","classes.CLS_SCRIPT_SHEET","removeSheets","classes.CLS_STYLE_SHEET","setIframeSettings","CONSTANT.MODEL_CHANGED","wireContextEvent","unWireContextEvent","srcList","unbindEvents","bindEvents","printWind","printArgs","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printWindow","removeToolbarItem","L10n","styleSrc","scriptSrc","InjectSheet","scriptSheet","scriptEle","createScriptElement","src","styleEle","createStyleElement","rel","compiledTemplate","compile","compiledString","isExpand","heightValue","rteHeight","expandPopHeight","codeElement","getHtml","showSourceCode","classes.CLS_FOCUS","preventImgResize","defaultResize","cloneValue","activeElement","isInteracted","saveInterval","setInterval","updateIntervalValue","getUpdatedValue","rteElement","classes.CLS_RTE","relatedTarget","scrollParentElements","contextHandler","touchModule","EJ2Touch","tapHold","touchHandler","tapHoldThreshold","resetHandler","setAutoHeight","iframeElement_1","overflow","scrollHeight","formElement","Component","first","middle","last"],"mappings":"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"}